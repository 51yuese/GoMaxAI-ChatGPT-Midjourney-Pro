'use strict';const _0x41945c=_0x5d1c;(function(_0x3c27ba,_0x1e2dd3){const _0x401285=_0x5d1c,_0x4fa1e1=_0x3c27ba();while(!![]){try{const _0x430a6c=parseInt(_0x401285(0x207))/0x1+-parseInt(_0x401285(0x1e5))/0x2+-parseInt(_0x401285(0x1f8))/0x3*(parseInt(_0x401285(0x20a))/0x4)+parseInt(_0x401285(0x1fb))/0x5*(parseInt(_0x401285(0x20c))/0x6)+-parseInt(_0x401285(0x206))/0x7+parseInt(_0x401285(0x1f3))/0x8+parseInt(_0x401285(0x1e1))/0x9;if(_0x430a6c===_0x1e2dd3)break;else _0x4fa1e1['push'](_0x4fa1e1['shift']());}catch(_0x28690b){_0x4fa1e1['push'](_0x4fa1e1['shift']());}}}(_0x5ac0,0x50661));var __decorate=this&&this[_0x41945c(0x201)]||function(_0x26f0e1,_0x1d89c3,_0x4935b4,_0x4de50f){const _0x42fca0=_0x41945c;var _0xbc7cee=arguments['length'],_0x5256f1=_0xbc7cee<0x3?_0x1d89c3:_0x4de50f===null?_0x4de50f=Object[_0x42fca0(0x1de)](_0x1d89c3,_0x4935b4):_0x4de50f,_0x500e4a;if(typeof Reflect===_0x42fca0(0x1e4)&&typeof Reflect['decorate']==='function')_0x5256f1=Reflect[_0x42fca0(0x1ef)](_0x26f0e1,_0x1d89c3,_0x4935b4,_0x4de50f);else{for(var _0x18e2bd=_0x26f0e1[_0x42fca0(0x1f5)]-0x1;_0x18e2bd>=0x0;_0x18e2bd--)if(_0x500e4a=_0x26f0e1[_0x18e2bd])_0x5256f1=(_0xbc7cee<0x3?_0x500e4a(_0x5256f1):_0xbc7cee>0x3?_0x500e4a(_0x1d89c3,_0x4935b4,_0x5256f1):_0x500e4a(_0x1d89c3,_0x4935b4))||_0x5256f1;}return _0xbc7cee>0x3&&_0x5256f1&&Object[_0x42fca0(0x1dc)](_0x1d89c3,_0x4935b4,_0x5256f1),_0x5256f1;},__metadata=this&&this[_0x41945c(0x209)]||function(_0x5db811,_0x2214ec){const _0x4f4b3e=_0x41945c;if(typeof Reflect===_0x4f4b3e(0x1e4)&&typeof Reflect[_0x4f4b3e(0x1f0)]==='function')return Reflect[_0x4f4b3e(0x1f0)](_0x5db811,_0x2214ec);},__param=this&&this['__param']||function(_0x1fb3a9,_0xf13a8c){return function(_0x381c02,_0x54f277){_0xf13a8c(_0x381c02,_0x54f277,_0x1fb3a9);};};Object[_0x41945c(0x1dc)](exports,'__esModule',{'value':!![]}),exports['CategoryService']=void 0x0;const common_1=require(_0x41945c(0x1f7)),typeorm_1=require(_0x41945c(0x1f6)),typeorm_2=require(_0x41945c(0x1e0)),nestjs_cls_1=require(_0x41945c(0x1df)),utils_1=require('../../common/utils'),category_entity_1=require(_0x41945c(0x205));let CategoryService=class CategoryService{constructor(_0x1b37c8,_0x191eda){const _0x431e6f=_0x41945c;this[_0x431e6f(0x1f4)]=_0x1b37c8,this[_0x431e6f(0x200)]=_0x191eda;}[_0x41945c(0x1f9)](_0x4bbe94){const _0x55003c=_0x41945c,_0x2eb87a={},_0x17dfa0=[];return _0x4bbe94[_0x55003c(0x1e7)](_0x5d2130=>{_0x2eb87a[_0x5d2130['id']]=_0x5d2130;}),_0x4bbe94[_0x55003c(0x1e7)](_0x30e079=>{const _0x12f278=_0x55003c;_0x30e079[_0x12f278(0x1ee)]===0x0?_0x17dfa0[_0x12f278(0x1eb)](_0x30e079):_0x2eb87a[_0x30e079[_0x12f278(0x1ee)]]&&(_0x2eb87a[_0x30e079[_0x12f278(0x1ee)]]['children']=_0x2eb87a[_0x30e079['pId']]['children']||[],_0x2eb87a[_0x30e079[_0x12f278(0x1ee)]][_0x12f278(0x203)][_0x12f278(0x1eb)](_0x30e079));}),_0x17dfa0;}async[_0x41945c(0x1ff)](_0x2c1ff0=!![]){const _0x17401a=_0x41945c;try{const _0x8a68b3=(0x0,utils_1[_0x17401a(0x1fe)])(this['clsService']);let _0x1d4b68=_0x17401a(0x1ea);_0x2c1ff0&&(_0x1d4b68+='\x20and\x20isRelease=1');const _0xb2236d=await this[_0x17401a(0x1f4)][_0x17401a(0x1e9)](_0x17401a(0x1e2)+_0x1d4b68+_0x17401a(0x1f2)+_0x8a68b3+_0x17401a(0x202));return this[_0x17401a(0x1f9)](_0xb2236d);}catch(_0x2872c5){throw new common_1['HttpException'](_0x2872c5[_0x17401a(0x208)],common_1[_0x17401a(0x1e3)]['BAD_REQUEST']);}}async['save'](_0x2e9f78){const _0x472953=_0x41945c;try{const _0x133d0a=(0x0,utils_1[_0x472953(0x1fe)])(this[_0x472953(0x200)]),_0x2daa18=await this[_0x472953(0x1f4)][_0x472953(0x1db)]({'where':{'categoryName':_0x2e9f78[_0x472953(0x1fc)],'saasId':_0x133d0a}});if(_0x2e9f78['id']&&_0x2daa18>0x1||!_0x2e9f78['id']&&_0x2daa18>0x0)throw new Error(_0x472953(0x1ed));return await this['categoryEntity'][_0x472953(0x1ec)]({..._0x2e9f78,'saasId':_0x133d0a}),!![];}catch(_0x5f3e60){throw new common_1[(_0x472953(0x20b))](_0x5f3e60['message'],common_1['HttpStatus'][_0x472953(0x1e8)]);}}async[_0x41945c(0x1f1)](_0x4e7167){const _0xa0817a=_0x41945c;return await this[_0xa0817a(0x1f4)]['delete']({'id':_0x4e7167}),!![];}};function _0x5d1c(_0x50614c,_0x32b86b){const _0x5ac013=_0x5ac0();return _0x5d1c=function(_0x5d1c15,_0x306885){_0x5d1c15=_0x5d1c15-0x1db;let _0xbe228b=_0x5ac013[_0x5d1c15];return _0xbe228b;},_0x5d1c(_0x50614c,_0x32b86b);}CategoryService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x41945c(0x1fd)])(category_entity_1[_0x41945c(0x1e6)])),__metadata(_0x41945c(0x204),[typeorm_2['Repository'],nestjs_cls_1[_0x41945c(0x1dd)]])],CategoryService),exports[_0x41945c(0x1fa)]=CategoryService;function _0x5ac0(){const _0x8ce8ae=['save','分类已存在','pId','decorate','metadata','delete','\x20and\x20saasId=','2450840aKPzsw','categoryEntity','length','@nestjs/typeorm','@nestjs/common','56127WvdlGX','listToTree','CategoryService','5unBqVp','categoryName','InjectRepository','getReqSaasId','tree','clsService','__decorate','\x20order\x20by\x20sortIndex,createdAt\x20desc','children','design:paramtypes','./category.entity','2541588RSrTox','266160jvlvhf','message','__metadata','4OzLbQE','HttpException','1739574psxmDX','count','defineProperty','ClsService','getOwnPropertyDescriptor','nestjs-cls','typeorm','2452527Dtbyun','select\x20id,pId,categoryName,isRelease,sortIndex\x20from\x20lx_category_tb\x20where\x20','HttpStatus','object','847682fzalXq','CategoryEntity','forEach','BAD_REQUEST','query','1=1','push'];_0x5ac0=function(){return _0x8ce8ae;};return _0x5ac0();}