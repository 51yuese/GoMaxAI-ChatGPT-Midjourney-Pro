'use strict';const _0x51703a=_0x43fc;(function(_0x1df4a0,_0x4823a9){const _0x4a13f3=_0x43fc,_0x1d3efa=_0x1df4a0();while(!![]){try{const _0x15f940=-parseInt(_0x4a13f3(0x1f4))/0x1*(parseInt(_0x4a13f3(0x1f0))/0x2)+parseInt(_0x4a13f3(0x1e3))/0x3+parseInt(_0x4a13f3(0x1da))/0x4+parseInt(_0x4a13f3(0x209))/0x5*(parseInt(_0x4a13f3(0x202))/0x6)+parseInt(_0x4a13f3(0x20a))/0x7+-parseInt(_0x4a13f3(0x1ed))/0x8+parseInt(_0x4a13f3(0x204))/0x9;if(_0x15f940===_0x4823a9)break;else _0x1d3efa['push'](_0x1d3efa['shift']());}catch(_0x1044d3){_0x1d3efa['push'](_0x1d3efa['shift']());}}}(_0x50e0,0xcfc8f));function _0x43fc(_0x1be7c7,_0x1c9f7d){const _0x50e06c=_0x50e0();return _0x43fc=function(_0x43fc39,_0xd3ad96){_0x43fc39=_0x43fc39-0x1da;let _0x50f0ca=_0x50e06c[_0x43fc39];return _0x50f0ca;},_0x43fc(_0x1be7c7,_0x1c9f7d);}function _0x50e0(){const _0x56b6e2=['message','../../common/utils','categoryEntity','14yMWirh','InjectRepository','push','CategoryEntity','typeorm','ClsService','select\x20id,pId,categoryName,isRelease,sortIndex\x20from\x20lx_category_tb\x20where\x20','clsService','\x20and\x20saasId=','@nestjs/typeorm','Repository','design:paramtypes','__decorate','count','18AwsOSx','function','4322538bAyrBX','save','children','object','CategoryService','1479150MBTwsQ','2824829CJZmgZ','pId','delete','2010560zpEpUE','__esModule','HttpException','listToTree','query','\x20and\x20isRelease=1','defineProperty','metadata','__param','652971PYPizA','./category.entity','\x20order\x20by\x20sortIndex,createdAt\x20desc','getReqSaasId','__metadata','getOwnPropertyDescriptor','forEach','tree','BAD_REQUEST','length','6032952gOgbTC','nestjs-cls','@nestjs/common','126630UcEMcj'];_0x50e0=function(){return _0x56b6e2;};return _0x50e0();}var __decorate=this&&this[_0x51703a(0x200)]||function(_0x2f2540,_0x2f1776,_0xe819d0,_0x18dd6e){const _0x3f23c7=_0x51703a;var _0x542702=arguments['length'],_0x54027=_0x542702<0x3?_0x2f1776:_0x18dd6e===null?_0x18dd6e=Object[_0x3f23c7(0x1e8)](_0x2f1776,_0xe819d0):_0x18dd6e,_0x56f3ac;if(typeof Reflect===_0x3f23c7(0x207)&&typeof Reflect['decorate']===_0x3f23c7(0x203))_0x54027=Reflect['decorate'](_0x2f2540,_0x2f1776,_0xe819d0,_0x18dd6e);else{for(var _0x4f77d5=_0x2f2540[_0x3f23c7(0x1ec)]-0x1;_0x4f77d5>=0x0;_0x4f77d5--)if(_0x56f3ac=_0x2f2540[_0x4f77d5])_0x54027=(_0x542702<0x3?_0x56f3ac(_0x54027):_0x542702>0x3?_0x56f3ac(_0x2f1776,_0xe819d0,_0x54027):_0x56f3ac(_0x2f1776,_0xe819d0))||_0x54027;}return _0x542702>0x3&&_0x54027&&Object[_0x3f23c7(0x1e0)](_0x2f1776,_0xe819d0,_0x54027),_0x54027;},__metadata=this&&this[_0x51703a(0x1e7)]||function(_0x3e6cc2,_0x3c5ee7){const _0x29995c=_0x51703a;if(typeof Reflect===_0x29995c(0x207)&&typeof Reflect['metadata']===_0x29995c(0x203))return Reflect[_0x29995c(0x1e1)](_0x3e6cc2,_0x3c5ee7);},__param=this&&this[_0x51703a(0x1e2)]||function(_0xff0099,_0x3d9c5a){return function(_0x9b8273,_0x3d7fbc){_0x3d9c5a(_0x9b8273,_0x3d7fbc,_0xff0099);};};Object['defineProperty'](exports,_0x51703a(0x1db),{'value':!![]}),exports[_0x51703a(0x208)]=void 0x0;const common_1=require(_0x51703a(0x1ef)),typeorm_1=require(_0x51703a(0x1fd)),typeorm_2=require(_0x51703a(0x1f8)),nestjs_cls_1=require(_0x51703a(0x1ee)),utils_1=require(_0x51703a(0x1f2)),category_entity_1=require(_0x51703a(0x1e4));let CategoryService=class CategoryService{constructor(_0xb1568f,_0x586ea8){const _0x390554=_0x51703a;this[_0x390554(0x1f3)]=_0xb1568f,this[_0x390554(0x1fb)]=_0x586ea8;}['listToTree'](_0x1d293f){const _0x321ce8=_0x51703a,_0x9f3026={},_0xce0333=[];return _0x1d293f[_0x321ce8(0x1e9)](_0x53b09b=>{_0x9f3026[_0x53b09b['id']]=_0x53b09b;}),_0x1d293f[_0x321ce8(0x1e9)](_0x6cacef=>{const _0x31f0f9=_0x321ce8;_0x6cacef[_0x31f0f9(0x20b)]===0x0?_0xce0333[_0x31f0f9(0x1f6)](_0x6cacef):_0x9f3026[_0x6cacef[_0x31f0f9(0x20b)]]&&(_0x9f3026[_0x6cacef[_0x31f0f9(0x20b)]][_0x31f0f9(0x206)]=_0x9f3026[_0x6cacef[_0x31f0f9(0x20b)]][_0x31f0f9(0x206)]||[],_0x9f3026[_0x6cacef[_0x31f0f9(0x20b)]][_0x31f0f9(0x206)][_0x31f0f9(0x1f6)](_0x6cacef));}),_0xce0333;}async[_0x51703a(0x1ea)](_0x43829b=!![]){const _0x1085ab=_0x51703a;try{const _0x2345ba=(0x0,utils_1[_0x1085ab(0x1e6)])(this['clsService']);let _0x3f5500='1=1';_0x43829b&&(_0x3f5500+=_0x1085ab(0x1df));const _0x27107c=await this[_0x1085ab(0x1f3)][_0x1085ab(0x1de)](_0x1085ab(0x1fa)+_0x3f5500+_0x1085ab(0x1fc)+_0x2345ba+_0x1085ab(0x1e5));return this[_0x1085ab(0x1dd)](_0x27107c);}catch(_0x61c55b){throw new common_1['HttpException'](_0x61c55b[_0x1085ab(0x1f1)],common_1['HttpStatus'][_0x1085ab(0x1eb)]);}}async['save'](_0x25f9fa){const _0x47ce25=_0x51703a;try{const _0xb4c101=(0x0,utils_1[_0x47ce25(0x1e6)])(this[_0x47ce25(0x1fb)]),_0x5d69c8=await this[_0x47ce25(0x1f3)][_0x47ce25(0x201)]({'where':{'categoryName':_0x25f9fa['categoryName'],'saasId':_0xb4c101}});if(_0x25f9fa['id']&&_0x5d69c8>0x1||!_0x25f9fa['id']&&_0x5d69c8>0x0)throw new Error('分类已存在');return await this[_0x47ce25(0x1f3)][_0x47ce25(0x205)]({..._0x25f9fa,'saasId':_0xb4c101}),!![];}catch(_0x30bb71){throw new common_1[(_0x47ce25(0x1dc))](_0x30bb71['message'],common_1['HttpStatus']['BAD_REQUEST']);}}async[_0x51703a(0x20c)](_0x18b2aa){const _0x66762a=_0x51703a;return await this[_0x66762a(0x1f3)][_0x66762a(0x20c)]({'id':_0x18b2aa}),!![];}};CategoryService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x51703a(0x1f5)])(category_entity_1[_0x51703a(0x1f7)])),__metadata(_0x51703a(0x1ff),[typeorm_2[_0x51703a(0x1fe)],nestjs_cls_1[_0x51703a(0x1f9)]])],CategoryService),exports[_0x51703a(0x208)]=CategoryService;