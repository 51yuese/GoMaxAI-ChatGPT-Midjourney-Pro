'use strict';const _0x27e12c=_0x118d;(function(_0x377bc8,_0x50fcd7){const _0x342143=_0x118d,_0x276819=_0x377bc8();while(!![]){try{const _0xf3fdd8=parseInt(_0x342143(0x1cb))/0x1+parseInt(_0x342143(0x1c0))/0x2*(parseInt(_0x342143(0x1ba))/0x3)+parseInt(_0x342143(0x1cd))/0x4*(-parseInt(_0x342143(0x1bf))/0x5)+-parseInt(_0x342143(0x1bd))/0x6+parseInt(_0x342143(0x1ae))/0x7+-parseInt(_0x342143(0x1cc))/0x8+parseInt(_0x342143(0x1c4))/0x9;if(_0xf3fdd8===_0x50fcd7)break;else _0x276819['push'](_0x276819['shift']());}catch(_0x3b0bee){_0x276819['push'](_0x276819['shift']());}}}(_0x44db,0xdce01));var __decorate=this&&this['__decorate']||function(_0x1c1fcd,_0x531152,_0x3bcd57,_0x4dfb84){const _0x109ab9=_0x118d;var _0x3200a5=arguments[_0x109ab9(0x1d0)],_0x592574=_0x3200a5<0x3?_0x531152:_0x4dfb84===null?_0x4dfb84=Object[_0x109ab9(0x1ab)](_0x531152,_0x3bcd57):_0x4dfb84,_0x94653a;if(typeof Reflect===_0x109ab9(0x1b5)&&typeof Reflect['decorate']===_0x109ab9(0x1c2))_0x592574=Reflect[_0x109ab9(0x1b4)](_0x1c1fcd,_0x531152,_0x3bcd57,_0x4dfb84);else{for(var _0xa439c7=_0x1c1fcd[_0x109ab9(0x1d0)]-0x1;_0xa439c7>=0x0;_0xa439c7--)if(_0x94653a=_0x1c1fcd[_0xa439c7])_0x592574=(_0x3200a5<0x3?_0x94653a(_0x592574):_0x3200a5>0x3?_0x94653a(_0x531152,_0x3bcd57,_0x592574):_0x94653a(_0x531152,_0x3bcd57))||_0x592574;}return _0x3200a5>0x3&&_0x592574&&Object['defineProperty'](_0x531152,_0x3bcd57,_0x592574),_0x592574;},__metadata=this&&this[_0x27e12c(0x1c6)]||function(_0x200ba6,_0x46e70b){const _0x529f2a=_0x27e12c;if(typeof Reflect===_0x529f2a(0x1b5)&&typeof Reflect[_0x529f2a(0x1ce)]===_0x529f2a(0x1c2))return Reflect['metadata'](_0x200ba6,_0x46e70b);},__param=this&&this[_0x27e12c(0x1a9)]||function(_0x2795a6,_0x4046a7){return function(_0x3c4a11,_0x1c455f){_0x4046a7(_0x3c4a11,_0x1c455f,_0x2795a6);};};Object['defineProperty'](exports,_0x27e12c(0x1c1),{'value':!![]}),exports[_0x27e12c(0x1bc)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require('typeorm'),nestjs_cls_1=require(_0x27e12c(0x1b1)),utils_1=require(_0x27e12c(0x1ac)),category_entity_1=require('./category.entity');function _0x118d(_0x580c9a,_0x35a69a){const _0x44db8d=_0x44db();return _0x118d=function(_0x118d2a,_0x4400ca){_0x118d2a=_0x118d2a-0x1a7;let _0x31b28c=_0x44db8d[_0x118d2a];return _0x31b28c;},_0x118d(_0x580c9a,_0x35a69a);}let CategoryService=class CategoryService{constructor(_0x25b715,_0x44dcb6){const _0x1b6c56=_0x27e12c;this['categoryEntity']=_0x25b715,this[_0x1b6c56(0x1d4)]=_0x44dcb6;}[_0x27e12c(0x1b3)](_0x1b34cd){const _0xae180c=_0x27e12c,_0x3f59e3={},_0x11dd40=[];return _0x1b34cd[_0xae180c(0x1c7)](_0xe02a38=>{_0x3f59e3[_0xe02a38['id']]=_0xe02a38;}),_0x1b34cd['forEach'](_0x4a7321=>{const _0x282d14=_0xae180c;_0x4a7321['pId']===0x0?_0x11dd40[_0x282d14(0x1d2)](_0x4a7321):_0x3f59e3[_0x4a7321[_0x282d14(0x1d1)]]&&(_0x3f59e3[_0x4a7321[_0x282d14(0x1d1)]][_0x282d14(0x1c8)]=_0x3f59e3[_0x4a7321['pId']][_0x282d14(0x1c8)]||[],_0x3f59e3[_0x4a7321[_0x282d14(0x1d1)]][_0x282d14(0x1c8)][_0x282d14(0x1d2)](_0x4a7321));}),_0x11dd40;}async[_0x27e12c(0x1b6)](_0x448b07=!![]){const _0x2fb543=_0x27e12c;try{const _0x5d71ef=(0x0,utils_1[_0x2fb543(0x1ad)])(this[_0x2fb543(0x1d4)]);let _0x5a1543=_0x2fb543(0x1b8);_0x448b07&&(_0x5a1543+=_0x2fb543(0x1aa));const _0x79c4bb=await this['categoryEntity'][_0x2fb543(0x1c9)](_0x2fb543(0x1b0)+_0x5a1543+'\x20and\x20saasId='+_0x5d71ef+_0x2fb543(0x1d3));return this['listToTree'](_0x79c4bb);}catch(_0x1aa453){throw new common_1[(_0x2fb543(0x1cf))](_0x1aa453[_0x2fb543(0x1c3)],common_1[_0x2fb543(0x1ca)][_0x2fb543(0x1b9)]);}}async[_0x27e12c(0x1b7)](_0x15722a){const _0xc2f535=_0x27e12c;try{const _0x4583e0=(0x0,utils_1['getReqSaasId'])(this[_0xc2f535(0x1d4)]),_0x43f890=await this[_0xc2f535(0x1c5)][_0xc2f535(0x1be)]({'where':{'categoryName':_0x15722a[_0xc2f535(0x1d5)],'saasId':_0x4583e0}});if(_0x15722a['id']&&_0x43f890>0x1||!_0x15722a['id']&&_0x43f890>0x0)throw new Error('分类已存在');return await this['categoryEntity'][_0xc2f535(0x1b7)]({..._0x15722a,'saasId':_0x4583e0}),!![];}catch(_0x3aaa0f){throw new common_1[(_0xc2f535(0x1cf))](_0x3aaa0f['message'],common_1['HttpStatus'][_0xc2f535(0x1b9)]);}}async[_0x27e12c(0x1a8)](_0x48770b){const _0x26263f=_0x27e12c;return await this[_0x26263f(0x1c5)]['delete']({'id':_0x48770b}),!![];}};function _0x44db(){const _0x5dffcf=['5237155JZKHtn','CategoryEntity','select\x20id,pId,categoryName,isRelease,sortIndex\x20from\x20lx_category_tb\x20where\x20','nestjs-cls','Injectable','listToTree','decorate','object','tree','save','1=1','BAD_REQUEST','41505tUlwAR','ClsService','CategoryService','6336792nLHAll','count','35HVHVdD','170tLuHPf','__esModule','function','message','15139233NShcan','categoryEntity','__metadata','forEach','children','query','HttpStatus','174207FZBpMg','8479720AeUBCi','434104vAJYjA','metadata','HttpException','length','pId','push','\x20order\x20by\x20sortIndex,createdAt\x20desc','clsService','categoryName','design:paramtypes','delete','__param','\x20and\x20isRelease=1','getOwnPropertyDescriptor','../../common/utils','getReqSaasId'];_0x44db=function(){return _0x5dffcf;};return _0x44db();}CategoryService=__decorate([(0x0,common_1[_0x27e12c(0x1b2)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(category_entity_1[_0x27e12c(0x1af)])),__metadata(_0x27e12c(0x1a7),[typeorm_2['Repository'],nestjs_cls_1[_0x27e12c(0x1bb)]])],CategoryService),exports[_0x27e12c(0x1bc)]=CategoryService;