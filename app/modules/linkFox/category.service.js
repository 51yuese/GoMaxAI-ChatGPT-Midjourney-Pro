'use strict';const _0x1cc43e=_0x470c;(function(_0x16cf0f,_0x3d1531){const _0x1073b8=_0x470c,_0x2bbf8f=_0x16cf0f();while(!![]){try{const _0x1439e3=-parseInt(_0x1073b8(0x106))/0x1+parseInt(_0x1073b8(0xe5))/0x2+parseInt(_0x1073b8(0xf8))/0x3*(-parseInt(_0x1073b8(0x10e))/0x4)+parseInt(_0x1073b8(0xdd))/0x5+-parseInt(_0x1073b8(0x101))/0x6+parseInt(_0x1073b8(0xef))/0x7*(parseInt(_0x1073b8(0xe6))/0x8)+parseInt(_0x1073b8(0xe3))/0x9*(parseInt(_0x1073b8(0xda))/0xa);if(_0x1439e3===_0x3d1531)break;else _0x2bbf8f['push'](_0x2bbf8f['shift']());}catch(_0x2247c0){_0x2bbf8f['push'](_0x2bbf8f['shift']());}}}(_0x4329,0x9493b));var __decorate=this&&this['__decorate']||function(_0x2947fb,_0x11e053,_0x3d8aad,_0x2441c6){const _0x84f320=_0x470c;var _0x44bb2f=arguments[_0x84f320(0xde)],_0x2c0428=_0x44bb2f<0x3?_0x11e053:_0x2441c6===null?_0x2441c6=Object[_0x84f320(0xf2)](_0x11e053,_0x3d8aad):_0x2441c6,_0x4fe269;if(typeof Reflect===_0x84f320(0xdf)&&typeof Reflect['decorate']===_0x84f320(0xe1))_0x2c0428=Reflect[_0x84f320(0xf1)](_0x2947fb,_0x11e053,_0x3d8aad,_0x2441c6);else{for(var _0x33871d=_0x2947fb[_0x84f320(0xde)]-0x1;_0x33871d>=0x0;_0x33871d--)if(_0x4fe269=_0x2947fb[_0x33871d])_0x2c0428=(_0x44bb2f<0x3?_0x4fe269(_0x2c0428):_0x44bb2f>0x3?_0x4fe269(_0x11e053,_0x3d8aad,_0x2c0428):_0x4fe269(_0x11e053,_0x3d8aad))||_0x2c0428;}return _0x44bb2f>0x3&&_0x2c0428&&Object[_0x84f320(0xdb)](_0x11e053,_0x3d8aad,_0x2c0428),_0x2c0428;},__metadata=this&&this['__metadata']||function(_0x554999,_0x100e93){const _0x5d6bf9=_0x470c;if(typeof Reflect==='object'&&typeof Reflect[_0x5d6bf9(0xf3)]==='function')return Reflect[_0x5d6bf9(0xf3)](_0x554999,_0x100e93);},__param=this&&this['__param']||function(_0x574b68,_0x2b04e1){return function(_0x5ed8cc,_0x880851){_0x2b04e1(_0x5ed8cc,_0x880851,_0x574b68);};};Object[_0x1cc43e(0xdb)](exports,_0x1cc43e(0x104),{'value':!![]}),exports[_0x1cc43e(0x100)]=void 0x0;function _0x470c(_0x538236,_0x1e590b){const _0x43293a=_0x4329();return _0x470c=function(_0x470c31,_0x15e71e){_0x470c31=_0x470c31-0xd9;let _0x36c9bb=_0x43293a[_0x470c31];return _0x36c9bb;},_0x470c(_0x538236,_0x1e590b);}function _0x4329(){const _0x242a4c=['280514XAkUgE','categoryEntity','nestjs-cls','forEach','typeorm','HttpStatus','../../common/utils','1=1','4302124QMbrdO','delete','40rmWfcU','defineProperty','listToTree','1251730sicUmK','length','object','./category.entity','function','tree','2987667VtCeTF','query','2347372NWSraU','8vppLDo','Repository','HttpException','push','children','count','CategoryEntity','InjectRepository','categoryName','358757bBbquk','ClsService','decorate','getOwnPropertyDescriptor','metadata','pId','@nestjs/common','\x20and\x20isRelease=1','save','3ooRMao','Injectable','message','BAD_REQUEST','getReqSaasId','@nestjs/typeorm','design:paramtypes','分类已存在','CategoryService','5031114kaTeZw','clsService','\x20and\x20saasId=','__esModule','select\x20id,pId,categoryName,isRelease,sortIndex\x20from\x20lx_category_tb\x20where\x20'];_0x4329=function(){return _0x242a4c;};return _0x4329();}const common_1=require(_0x1cc43e(0xf5)),typeorm_1=require(_0x1cc43e(0xfd)),typeorm_2=require(_0x1cc43e(0x10a)),nestjs_cls_1=require(_0x1cc43e(0x108)),utils_1=require(_0x1cc43e(0x10c)),category_entity_1=require(_0x1cc43e(0xe0));let CategoryService=class CategoryService{constructor(_0x2229a5,_0x511347){const _0x3a96d2=_0x1cc43e;this[_0x3a96d2(0x107)]=_0x2229a5,this[_0x3a96d2(0x102)]=_0x511347;}[_0x1cc43e(0xdc)](_0x2dd6d4){const _0x2a9bc8=_0x1cc43e,_0x23b3b6={},_0x58dec2=[];return _0x2dd6d4['forEach'](_0x46cd8c=>{_0x23b3b6[_0x46cd8c['id']]=_0x46cd8c;}),_0x2dd6d4[_0x2a9bc8(0x109)](_0x50793e=>{const _0x192cbe=_0x2a9bc8;_0x50793e[_0x192cbe(0xf4)]===0x0?_0x58dec2[_0x192cbe(0xe9)](_0x50793e):_0x23b3b6[_0x50793e[_0x192cbe(0xf4)]]&&(_0x23b3b6[_0x50793e['pId']][_0x192cbe(0xea)]=_0x23b3b6[_0x50793e['pId']][_0x192cbe(0xea)]||[],_0x23b3b6[_0x50793e['pId']][_0x192cbe(0xea)][_0x192cbe(0xe9)](_0x50793e));}),_0x58dec2;}async[_0x1cc43e(0xe2)](_0x3a4f45=!![]){const _0x1d7c08=_0x1cc43e;try{const _0x32b3c7=(0x0,utils_1[_0x1d7c08(0xfc)])(this[_0x1d7c08(0x102)]);let _0x27d735=_0x1d7c08(0x10d);_0x3a4f45&&(_0x27d735+=_0x1d7c08(0xf6));const _0x50ce1e=await this[_0x1d7c08(0x107)][_0x1d7c08(0xe4)](_0x1d7c08(0x105)+_0x27d735+_0x1d7c08(0x103)+_0x32b3c7+'\x20order\x20by\x20sortIndex,createdAt\x20desc');return this[_0x1d7c08(0xdc)](_0x50ce1e);}catch(_0x345941){throw new common_1[(_0x1d7c08(0xe8))](_0x345941['message'],common_1['HttpStatus']['BAD_REQUEST']);}}async[_0x1cc43e(0xf7)](_0x5210f3){const _0x29d013=_0x1cc43e;try{const _0x3102ad=(0x0,utils_1[_0x29d013(0xfc)])(this['clsService']),_0x266e27=await this[_0x29d013(0x107)][_0x29d013(0xeb)]({'where':{'categoryName':_0x5210f3[_0x29d013(0xee)],'saasId':_0x3102ad}});if(_0x5210f3['id']&&_0x266e27>0x1||!_0x5210f3['id']&&_0x266e27>0x0)throw new Error(_0x29d013(0xff));return await this[_0x29d013(0x107)]['save']({..._0x5210f3,'saasId':_0x3102ad}),!![];}catch(_0xe2a48f){throw new common_1[(_0x29d013(0xe8))](_0xe2a48f[_0x29d013(0xfa)],common_1[_0x29d013(0x10b)][_0x29d013(0xfb)]);}}async[_0x1cc43e(0xd9)](_0x38ad83){const _0xd08b70=_0x1cc43e;return await this[_0xd08b70(0x107)][_0xd08b70(0xd9)]({'id':_0x38ad83}),!![];}};CategoryService=__decorate([(0x0,common_1[_0x1cc43e(0xf9)])(),__param(0x0,(0x0,typeorm_1[_0x1cc43e(0xed)])(category_entity_1[_0x1cc43e(0xec)])),__metadata(_0x1cc43e(0xfe),[typeorm_2[_0x1cc43e(0xe7)],nestjs_cls_1[_0x1cc43e(0xf0)]])],CategoryService),exports['CategoryService']=CategoryService;