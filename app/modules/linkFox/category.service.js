'use strict';const _0x5bdf8f=_0x1dcf;function _0x1dcf(_0x374721,_0xec1360){const _0x1fc654=_0x1fc6();return _0x1dcf=function(_0x1dcfa4,_0x452860){_0x1dcfa4=_0x1dcfa4-0xe4;let _0x44193c=_0x1fc654[_0x1dcfa4];return _0x44193c;},_0x1dcf(_0x374721,_0xec1360);}(function(_0x2843a9,_0x302afc){const _0x37b590=_0x1dcf,_0x56c395=_0x2843a9();while(!![]){try{const _0x58db5e=-parseInt(_0x37b590(0xff))/0x1*(parseInt(_0x37b590(0xeb))/0x2)+parseInt(_0x37b590(0xf6))/0x3+parseInt(_0x37b590(0xf4))/0x4+-parseInt(_0x37b590(0xee))/0x5+parseInt(_0x37b590(0xef))/0x6+-parseInt(_0x37b590(0x100))/0x7+parseInt(_0x37b590(0xf7))/0x8;if(_0x58db5e===_0x302afc)break;else _0x56c395['push'](_0x56c395['shift']());}catch(_0x224f38){_0x56c395['push'](_0x56c395['shift']());}}}(_0x1fc6,0xf3574));var __decorate=this&&this[_0x5bdf8f(0xfd)]||function(_0x572366,_0x3b4db6,_0x4c4adb,_0xf9f08c){const _0x2db5fb=_0x5bdf8f;var _0xb0c1a6=arguments[_0x2db5fb(0xf8)],_0x136c87=_0xb0c1a6<0x3?_0x3b4db6:_0xf9f08c===null?_0xf9f08c=Object['getOwnPropertyDescriptor'](_0x3b4db6,_0x4c4adb):_0xf9f08c,_0x254dfc;if(typeof Reflect==='object'&&typeof Reflect[_0x2db5fb(0x10f)]===_0x2db5fb(0xe4))_0x136c87=Reflect['decorate'](_0x572366,_0x3b4db6,_0x4c4adb,_0xf9f08c);else{for(var _0x562cd6=_0x572366[_0x2db5fb(0xf8)]-0x1;_0x562cd6>=0x0;_0x562cd6--)if(_0x254dfc=_0x572366[_0x562cd6])_0x136c87=(_0xb0c1a6<0x3?_0x254dfc(_0x136c87):_0xb0c1a6>0x3?_0x254dfc(_0x3b4db6,_0x4c4adb,_0x136c87):_0x254dfc(_0x3b4db6,_0x4c4adb))||_0x136c87;}return _0xb0c1a6>0x3&&_0x136c87&&Object['defineProperty'](_0x3b4db6,_0x4c4adb,_0x136c87),_0x136c87;},__metadata=this&&this['__metadata']||function(_0x400f24,_0x35d592){const _0x9395b3=_0x5bdf8f;if(typeof Reflect===_0x9395b3(0xe7)&&typeof Reflect[_0x9395b3(0x10e)]===_0x9395b3(0xe4))return Reflect['metadata'](_0x400f24,_0x35d592);},__param=this&&this[_0x5bdf8f(0xe6)]||function(_0x529407,_0x382f8a){return function(_0x1f2198,_0x170a89){_0x382f8a(_0x1f2198,_0x170a89,_0x529407);};};function _0x1fc6(){const _0x5692e8=['length','getReqSaasId','delete','HttpException','nestjs-cls','__decorate','HttpStatus','4280QZqver','8196167ktkdvP','__esModule','count','1=1','children','typeorm','BAD_REQUEST','Injectable','@nestjs/typeorm','clsService','defineProperty','CategoryEntity','message','forEach','metadata','decorate','pId','function','listToTree','__param','object','design:paramtypes','categoryName','select\x20id,pId,categoryName,isRelease,sortIndex\x20from\x20lx_category_tb\x20where\x20','752YFqAnp','../../common/utils','分类已存在','3959765ttWJzB','7355634ThwRfl','categoryEntity','\x20and\x20isRelease=1','push','InjectRepository','461492RZZygw','save','3664425FEZPdH','16048408IWdiac'];_0x1fc6=function(){return _0x5692e8;};return _0x1fc6();}Object[_0x5bdf8f(0x10a)](exports,_0x5bdf8f(0x101),{'value':!![]}),exports['CategoryService']=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x5bdf8f(0x108)),typeorm_2=require(_0x5bdf8f(0x105)),nestjs_cls_1=require(_0x5bdf8f(0xfc)),utils_1=require(_0x5bdf8f(0xec)),category_entity_1=require('./category.entity');let CategoryService=class CategoryService{constructor(_0x292599,_0x1803bf){const _0x2bedbd=_0x5bdf8f;this['categoryEntity']=_0x292599,this[_0x2bedbd(0x109)]=_0x1803bf;}[_0x5bdf8f(0xe5)](_0x1c59cf){const _0xd03671=_0x5bdf8f,_0x4832f3={},_0x49402f=[];return _0x1c59cf[_0xd03671(0x10d)](_0xe387c1=>{_0x4832f3[_0xe387c1['id']]=_0xe387c1;}),_0x1c59cf['forEach'](_0x29151c=>{const _0x5b768b=_0xd03671;_0x29151c[_0x5b768b(0x110)]===0x0?_0x49402f[_0x5b768b(0xf2)](_0x29151c):_0x4832f3[_0x29151c[_0x5b768b(0x110)]]&&(_0x4832f3[_0x29151c['pId']][_0x5b768b(0x104)]=_0x4832f3[_0x29151c['pId']][_0x5b768b(0x104)]||[],_0x4832f3[_0x29151c['pId']][_0x5b768b(0x104)]['push'](_0x29151c));}),_0x49402f;}async['tree'](_0x50e636=!![]){const _0x49a70c=_0x5bdf8f;try{const _0x53366d=(0x0,utils_1['getReqSaasId'])(this['clsService']);let _0x9b66=_0x49a70c(0x103);_0x50e636&&(_0x9b66+=_0x49a70c(0xf1));const _0x4fa972=await this[_0x49a70c(0xf0)]['query'](_0x49a70c(0xea)+_0x9b66+'\x20and\x20saasId='+_0x53366d+'\x20order\x20by\x20sortIndex,createdAt\x20desc');return this[_0x49a70c(0xe5)](_0x4fa972);}catch(_0x507466){throw new common_1[(_0x49a70c(0xfb))](_0x507466[_0x49a70c(0x10c)],common_1[_0x49a70c(0xfe)][_0x49a70c(0x106)]);}}async[_0x5bdf8f(0xf5)](_0x3f96bb){const _0x100321=_0x5bdf8f;try{const _0x3b04ef=(0x0,utils_1[_0x100321(0xf9)])(this[_0x100321(0x109)]),_0x1984d1=await this[_0x100321(0xf0)][_0x100321(0x102)]({'where':{'categoryName':_0x3f96bb[_0x100321(0xe9)],'saasId':_0x3b04ef}});if(_0x3f96bb['id']&&_0x1984d1>0x1||!_0x3f96bb['id']&&_0x1984d1>0x0)throw new Error(_0x100321(0xed));return await this[_0x100321(0xf0)]['save']({..._0x3f96bb,'saasId':_0x3b04ef}),!![];}catch(_0x371dd2){throw new common_1[(_0x100321(0xfb))](_0x371dd2[_0x100321(0x10c)],common_1['HttpStatus'][_0x100321(0x106)]);}}async[_0x5bdf8f(0xfa)](_0x45edde){const _0x23d968=_0x5bdf8f;return await this[_0x23d968(0xf0)][_0x23d968(0xfa)]({'id':_0x45edde}),!![];}};CategoryService=__decorate([(0x0,common_1[_0x5bdf8f(0x107)])(),__param(0x0,(0x0,typeorm_1[_0x5bdf8f(0xf3)])(category_entity_1[_0x5bdf8f(0x10b)])),__metadata(_0x5bdf8f(0xe8),[typeorm_2['Repository'],nestjs_cls_1['ClsService']])],CategoryService),exports['CategoryService']=CategoryService;