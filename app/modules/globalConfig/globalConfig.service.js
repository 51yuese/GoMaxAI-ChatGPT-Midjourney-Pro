'use strict';const _0xece36a=_0x56c5;(function(_0x12d8e9,_0x4a7d40){const _0x4b8e81=_0x56c5,_0x4e2135=_0x12d8e9();while(!![]){try{const _0x525398=parseInt(_0x4b8e81(0x189))/0x1+-parseInt(_0x4b8e81(0x18f))/0x2+parseInt(_0x4b8e81(0x1d3))/0x3*(-parseInt(_0x4b8e81(0x1bc))/0x4)+-parseInt(_0x4b8e81(0x1cf))/0x5*(-parseInt(_0x4b8e81(0x1c7))/0x6)+-parseInt(_0x4b8e81(0x1bf))/0x7+parseInt(_0x4b8e81(0x166))/0x8*(parseInt(_0x4b8e81(0x1c3))/0x9)+parseInt(_0x4b8e81(0x1c2))/0xa;if(_0x525398===_0x4a7d40)break;else _0x4e2135['push'](_0x4e2135['shift']());}catch(_0x4f5a4d){_0x4e2135['push'](_0x4e2135['shift']());}}}(_0x2a33,0x934b3));var __decorate=this&&this['__decorate']||function(_0x311a7b,_0x3808b2,_0x5dcadf,_0x209974){const _0x1814ee=_0x56c5;var _0x31945b=arguments[_0x1814ee(0x19c)],_0x4f6f63=_0x31945b<0x3?_0x3808b2:_0x209974===null?_0x209974=Object['getOwnPropertyDescriptor'](_0x3808b2,_0x5dcadf):_0x209974,_0x19c600;if(typeof Reflect===_0x1814ee(0x208)&&typeof Reflect[_0x1814ee(0x1b2)]==='function')_0x4f6f63=Reflect[_0x1814ee(0x1b2)](_0x311a7b,_0x3808b2,_0x5dcadf,_0x209974);else{for(var _0x3378d5=_0x311a7b[_0x1814ee(0x19c)]-0x1;_0x3378d5>=0x0;_0x3378d5--)if(_0x19c600=_0x311a7b[_0x3378d5])_0x4f6f63=(_0x31945b<0x3?_0x19c600(_0x4f6f63):_0x31945b>0x3?_0x19c600(_0x3808b2,_0x5dcadf,_0x4f6f63):_0x19c600(_0x3808b2,_0x5dcadf))||_0x4f6f63;}return _0x31945b>0x3&&_0x4f6f63&&Object[_0x1814ee(0x1df)](_0x3808b2,_0x5dcadf,_0x4f6f63),_0x4f6f63;},__metadata=this&&this[_0xece36a(0x19d)]||function(_0x17fc84,_0x50df36){const _0x2092df=_0xece36a;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x2092df(0x173)](_0x17fc84,_0x50df36);},__param=this&&this[_0xece36a(0x16a)]||function(_0x2c44e4,_0x212eec){return function(_0x510d73,_0x449f63){_0x212eec(_0x510d73,_0x449f63,_0x2c44e4);};};Object[_0xece36a(0x1df)](exports,_0xece36a(0x1ce),{'value':!![]}),exports[_0xece36a(0x1f4)]=void 0x0;function _0x2a33(){const _0x19627e=['cls','LinkFoxConfig','warn','configKey','findOne','GlobalConfigService','nestjs-cls','手机验证码功能暂未开放!','ConfigEntity','签到功能暂未开放!','HttpStatus','baidu','getNamespace','catch','https://gomaxai.qumao518.vip/api/official/getAccessToken?type=official','getVipLeavelRelById','base64','nineaiBuiltInSensitiveApiBase','save','toString','../../config/AppConfig','pushLog','baiduTextSecretKey','wechatOfficialAppSecret','getConfigByKeys','object','saveVipLeavelRel','includes','saas.qumao518.vip','aliPhoneSignName','response','relateId','7363704ovCgII','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','&grant_type=client_credentials','hupi','__param','typeorm','BAD_GATEWAY','UNAUTHORIZED','fetchBaseAccessToken','message','check','VipLeavelRelEntity','env','metadata','wechatAccessTokenMap','CZConfig','ClsService','Injectable','json','APP_VERSION','ceshi.qumao518.vip','未配置\x20robotAvatar.','getConfigs4Front','BAD_REQUEST','queryPayType','default','onModuleInit','getPhoneVerifyConfig','nineaiBuiltInSensitiveAuthKey','vxNumber','GOMAXAI','ticket','saas\x20','设置配置信息错误！','epay','839427HawEOh','axios','wechatOfficialAppId','post','mpay','&type=jsapi','1843790UiQBIq','configEntity','arraybuffer','Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0bno5L8H6T5QXXNUvLB6d1U','log','nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5','HttpException','@nestjs/cli/actions','phoneRegisterStatus','FrontKeys','getSensitiveConfig','./vip_leavel_rel.entity','baiduTextApiKey','length','__metadata','exit','forEach','payWechatStatus','Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0ZDV7rlji6LO/S+cD95Ru8Q','get','nineai','checkDomain','Repository','wechat','WechatConfig','payEpayStatus','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','获取微信access_token失败、错误信息：','@nestjs/common','vipLeavelRelEntity','PPTConfig','nineaiBuiltInSensitiveStatus','Logger','SAAS','JPFq8fAlQE2V2Eq7KWYSxg==','decorate','&secret=','robotAvatar','POST','refresh','signInRewards','9kxwFUQptTaelrKStrwZQQ==','../../common/store','concat','domain','12BfhvEu','wechatAccessToken-','error_description','1211147dMZcbd','wechatJsapiTicketMap','configVal','184160iuOuzG','9djAwcq','InjectRepository','update','getWechatAccessToken','102UlGKtT','find','initBaiduSensitive','MusicConfig','has','wechatJsapiTicket-','push\x20log\x20error','__esModule','164920vXLGgm','checkAiAuth','&client_secret=','https://aip.baidubce.com/oauth/2.0/token?client_id=','640803IKixKI','error','data','data:image/jpeg;base64,','signInStatus','getSignatureGiftConfig','code','keys','siteName','baiduTextAccessToken','支付功能暂未开放!','decrypt','defineProperty','access_token','MjConfig','saasId','qqNumber','application/json','wechat\x20get\x20access_token\x20done','queryFrontConfig','aliPhoneTemplateCode','GOMAXAI_HOST','errmsg','registerBaseUrl','set','from','NAMESPACE','every'];_0x2a33=function(){return _0x19627e;};return _0x2a33();}const common_1=require(_0xece36a(0x1ab)),config_entity_1=require('./config.entity'),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0xece36a(0x16b)),utils_1=require('../../common/utils'),axios_1=require(_0xece36a(0x18a)),actions_1=require(_0xece36a(0x196)),store_1=require(_0xece36a(0x1b9)),store_2=require('../../common/store'),AppConfig_1=require(_0xece36a(0x203)),vip_leavel_rel_entity_1=require(_0xece36a(0x19a)),nestjs_cls_1=require(_0xece36a(0x1f5)),constant_1=require('./constant'),authCheckUrl=(0x0,utils_1['decrypt'])(_0xece36a(0x1a1)),authLogUrl=(0x0,utils_1['decrypt'])(_0xece36a(0x192));let GlobalConfigService=class GlobalConfigService{constructor(_0x4d18f,_0x35638d,_0x16786b){const _0x1580d9=_0xece36a;this['configEntity']=_0x4d18f,this['vipLeavelRelEntity']=_0x35638d,this['cls']=_0x16786b,this[_0x1580d9(0x174)]=new Map(),this['wechatJsapiTicketMap']=new Map();}async[_0xece36a(0x180)](){const _0x55fa81=_0xece36a;await this[_0x55fa81(0x1d0)](),await this[_0x55fa81(0x204)](),await this[_0x55fa81(0x1c9)](),await this[_0x55fa81(0x1c6)](!![]);const _0x11bd5a=[][_0x55fa81(0x1ba)](store_1[_0x55fa81(0x1e1)][_0x55fa81(0x1da)],store_1[_0x55fa81(0x175)]['keys'],store_2['WechatConfig'][_0x55fa81(0x1da)],store_1['LinkFoxConfig']['keys'],store_1[_0x55fa81(0x1ad)]['keys'],store_1[_0x55fa81(0x1ca)][_0x55fa81(0x1da)]),_0x2ca6af=await this['getConfigByKeys'](_0x11bd5a);store_1[_0x55fa81(0x1e1)]['refresh'](_0x2ca6af),store_1[_0x55fa81(0x175)][_0x55fa81(0x1b6)](_0x2ca6af),store_2[_0x55fa81(0x1a7)][_0x55fa81(0x1b6)](_0x2ca6af),store_1[_0x55fa81(0x1f0)]['refresh'](_0x2ca6af),store_1[_0x55fa81(0x1ca)]['refresh'](_0x2ca6af),store_1['PPTConfig'][_0x55fa81(0x1b6)](_0x2ca6af);}async[_0xece36a(0x1d0)](){const _0x15aa64=_0xece36a,_0x59232d=process[_0x15aa64(0x172)][(0x0,utils_1[_0x15aa64(0x1de)])('JPFq8fAlQE2V2Eq7KWYSxg==')],_0x39a647=process[_0x15aa64(0x172)][(0x0,utils_1['decrypt'])(_0x15aa64(0x1b8))];(!_0x39a647||!_0x59232d)&&(common_1[_0x15aa64(0x1af)][_0x15aa64(0x1d4)]((0x0,utils_1[_0x15aa64(0x1de)])(_0x15aa64(0x194))),(0x0,actions_1['exit'])());const _0xf97d97={'authDomain':_0x59232d,'authKey':_0x39a647},_0x5ea71d={'method':_0x15aa64(0x1b5),'headers':{'Content-Type':_0x15aa64(0x1e4)},'body':JSON['stringify'](_0xf97d97)},_0x3dfab1=await fetch(authCheckUrl,_0x5ea71d)['then'](_0x168e5e=>{const _0x37b4eb=_0x15aa64;return _0x168e5e[_0x37b4eb(0x178)]();})[_0x15aa64(0x1fc)](_0x5ec7d3=>{const _0x41f885=_0x15aa64;common_1[_0x41f885(0x1af)][_0x41f885(0x1d4)](_0x5ec7d3,'global');});_0x3dfab1['code']!==0x0&&(common_1[_0x15aa64(0x1af)][_0x15aa64(0x1d4)]((0x0,utils_1[_0x15aa64(0x1de)])('bkYMP1mVCBurarEsc48hu4lD0nfoPfj1FccGPRuygRtgPnbJWkkvJGU6zhr/otMF6E7iBQk6kY90kyEI47sVTA==')),(0x0,actions_1[_0x15aa64(0x19e)])()),_0x3dfab1?.[_0x15aa64(0x1d9)]===0x0&&!_0x3dfab1?.[_0x15aa64(0x1d5)]?.[_0x15aa64(0x170)]&&(common_1['Logger'][_0x15aa64(0x1d4)]((0x0,utils_1['decrypt'])(_0x15aa64(0x194))),(0x0,actions_1['exit'])());}async[_0xece36a(0x204)](_0x2944f2,_0x32c33e){const _0x5a81c5=_0xece36a,_0x34ec19=process[_0x5a81c5(0x172)][(0x0,utils_1[_0x5a81c5(0x1de)])(_0x5a81c5(0x1b1))],_0x28a823=process[_0x5a81c5(0x172)][(0x0,utils_1[_0x5a81c5(0x1de)])(_0x5a81c5(0x1b8))],_0x54e687=process[_0x5a81c5(0x172)]['PORT'];if(!_0x34ec19||!_0x28a823)throw new common_1['HttpException']((0x0,utils_1[_0x5a81c5(0x1de)])(_0x5a81c5(0x194)),common_1[_0x5a81c5(0x1f9)][_0x5a81c5(0x16d)]);const {qqNumber:_0x4e4863,vxNumber:_0x1b05af,siteName:_0xe1693a,domain:_0x22e9cc,registerBaseUrl:_0x451158}=await this['getConfigByKeys'](['qqNumber',_0x5a81c5(0x183),_0x5a81c5(0x1db),_0x5a81c5(0x1bb),_0x5a81c5(0x1ea)]),_0x18f6f5={'ip':_0x34ec19,'key':_0x28a823,'port':_0x54e687,'qqNumber':_0x4e4863,'vxNumber':_0x1b05af,'domain':_0x22e9cc,'adminAccount':_0x2944f2,'adminPass':_0x32c33e,'baseUrl':_0x451158,'siteName':_0xe1693a,'qq':_0x4e4863,'vxNum':_0x1b05af,'version':AppConfig_1[_0x5a81c5(0x179)]},_0x120d80={'method':_0x5a81c5(0x1b5),'headers':{'Content-Type':_0x5a81c5(0x1e4)},'body':JSON['stringify'](_0x18f6f5)};await fetch(authLogUrl,_0x120d80)[_0x5a81c5(0x1fc)](_0x2f2fd9=>{const _0x326cf3=_0x5a81c5;console[_0x326cf3(0x193)](_0x326cf3(0x1cd),_0x2f2fd9);});}async[_0xece36a(0x1c9)](_0x419c78=!![]){const _0x30f49f=_0xece36a,{baiduTextApiKey:_0x17f9b3,baiduTextSecretKey:_0x59ca56}=await this['getConfigByKeys']([_0x30f49f(0x19b),_0x30f49f(0x205)]);if(!_0x17f9b3||!_0x59ca56){common_1[_0x30f49f(0x1af)][_0x30f49f(0x1d4)]('百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!',_0x30f49f(0x1f4));return;}const _0x128e6e={'Content-Type':_0x30f49f(0x1e4),'Accept':_0x30f49f(0x1e4)},_0x2c58be=_0x30f49f(0x1d2)+_0x17f9b3+_0x30f49f(0x1d1)+_0x59ca56+_0x30f49f(0x168);try{const _0x3dd1a3=await axios_1[_0x30f49f(0x17f)][_0x30f49f(0x18c)](_0x2c58be,{'headers':_0x128e6e});this['baiduTextAccessToken']=_0x3dd1a3[_0x30f49f(0x1d5)][_0x30f49f(0x1e0)];}catch(_0x1fa75e){if(_0x419c78)common_1[_0x30f49f(0x1af)][_0x30f49f(0x1d4)]('百度敏感词配置检测失败，您的参数可能配置的不正确!',_0x30f49f(0x1f4));else throw new common_1[(_0x30f49f(0x195))](_0x1fa75e[_0x30f49f(0x164)][_0x30f49f(0x1d5)][_0x30f49f(0x1be)],common_1[_0x30f49f(0x1f9)][_0x30f49f(0x17d)]);}}async[_0xece36a(0x1c6)](_0x31ab0d=![]){const _0x2d99e4=_0xece36a,_0x563921=new Map(),_0x36a604=await this['configEntity'][_0x2d99e4(0x1c8)]({'where':{'configKey':(0x0,typeorm_2['In'])([_0x2d99e4(0x18b),_0x2d99e4(0x206)])}});_0x36a604[_0x2d99e4(0x19f)](_0x545df6=>{const _0xbdca05=_0x2d99e4;!_0x563921[_0xbdca05(0x1cb)](_0x545df6[_0xbdca05(0x1e2)])&&_0x563921['set'](_0x545df6['saasId'],{}),_0x563921[_0xbdca05(0x1a2)](_0x545df6[_0xbdca05(0x1e2)])[_0x545df6[_0xbdca05(0x1f2)]]=_0x545df6['configVal'];}),_0x563921['forEach']((_0x42ab25,_0x1acc62)=>{const _0x2dbfed=_0x2d99e4;!_0x42ab25[_0x2dbfed(0x18b)]||!_0x42ab25[_0x2dbfed(0x206)]?common_1[_0x2dbfed(0x1af)][_0x2dbfed(0x1f1)](_0x2dbfed(0x186)+_0x1acc62+'\x20微信配置缺失，不可使用微信登录！',_0x2dbfed(0x1c6)):this[_0x2dbfed(0x16e)](_0x1acc62,_0x42ab25[_0x2dbfed(0x18b)],_0x42ab25[_0x2dbfed(0x206)],_0x31ab0d);}),common_1[_0x2d99e4(0x1af)][_0x2d99e4(0x193)](_0x2d99e4(0x1e5),'OfficialService');}async[_0xece36a(0x16e)](_0xfa0c7,_0x16eb24,_0x118862,_0x5aeada=![]){const _0x58ffd7=_0xece36a;if(process[_0x58ffd7(0x172)]['ISDEV']==='TRUE')return;try{let _0x300faa='';const _0x44ca27=process[_0x58ffd7(0x172)][_0x58ffd7(0x1e8)];if(_0x44ca27==='kaifa.qumao518.vip'||_0x44ca27===_0x58ffd7(0x17a)||_0x44ca27===_0x58ffd7(0x162)){const _0x19cd59=await axios_1[_0x58ffd7(0x17f)]['get'](_0x58ffd7(0x1fd));_0x300faa=_0x19cd59[_0x58ffd7(0x1d5)][_0x58ffd7(0x1d5)];}else{const _0x1cf830=await axios_1[_0x58ffd7(0x17f)][_0x58ffd7(0x1a2)](_0x58ffd7(0x1a9)+_0x16eb24+_0x58ffd7(0x1b3)+_0x118862);if(_0x1cf830[_0x58ffd7(0x1d5)][_0x58ffd7(0x1e9)])throw new Error(_0x58ffd7(0x1aa)+_0x1cf830[_0x58ffd7(0x1d5)][_0x58ffd7(0x1e9)]);_0x300faa=_0x1cf830[_0x58ffd7(0x1d5)][_0x58ffd7(0x1e0)];}this['wechatAccessTokenMap'][_0x58ffd7(0x1eb)](_0xfa0c7,_0x300faa);const _0x15ae72=await axios_1['default']['get'](_0x58ffd7(0x167)+_0x300faa+_0x58ffd7(0x18e));this['wechatJsapiTicketMap'][_0x58ffd7(0x1eb)](_0xfa0c7,_0x15ae72?.[_0x58ffd7(0x1d5)]?.[_0x58ffd7(0x185)]);}catch(_0x4f8b56){common_1[_0x58ffd7(0x1af)][_0x58ffd7(0x1d4)](_0x4f8b56[_0x58ffd7(0x16f)],_0x58ffd7(0x16e));}}async[_0xece36a(0x1a4)](_0x9de188){const _0x86afb6=_0xece36a;if(process[_0x86afb6(0x172)][_0x86afb6(0x1b0)])return!![];const {domain:_0x22f6ec}=_0x9de188,_0x47027c=process[_0x86afb6(0x172)][(0x0,utils_1['decrypt'])(_0x86afb6(0x1b1))];return _0x22f6ec['includes'](_0x47027c);}async['createOrUpdate'](_0x36e9e3){const _0xc4edf=_0xece36a;try{const _0xf7aa1e=this[_0xc4edf(0x1ef)][_0xc4edf(0x1a2)]('saasId'),{configKey:_0x4bfbb4,configVal:_0x2834d7,status:status=0x1}=_0x36e9e3,_0x3c3378=await this[_0xc4edf(0x190)]['findOne']({'where':{'configKey':_0x4bfbb4,'saasId':_0xf7aa1e}});_0x3c3378?await this[_0xc4edf(0x190)][_0xc4edf(0x1c5)]({'configKey':_0x4bfbb4,'saasId':_0xf7aa1e},{'configVal':_0x2834d7,'status':status}):await this[_0xc4edf(0x190)][_0xc4edf(0x201)]({'configKey':_0x4bfbb4,'configVal':_0x2834d7,'status':status,'saasId':_0xf7aa1e});}catch(_0x4d6869){throw new common_1[(_0xc4edf(0x195))](_0xc4edf(0x187),common_1['HttpStatus'][_0xc4edf(0x17d)]);}}async['setConfig'](_0x5553b5){const _0xb7b4d9=_0xece36a;let _0x437530=![],_0x261b9b=![],_0x594eec=![],_0x2aa1b2=![],_0x2ba124=![],_0x4f3e17=![],_0xef2d6a=![];const _0x4c0c14={},{settings:_0x10b5d8}=_0x5553b5;for(const _0x4640f7 of _0x10b5d8){await this['createOrUpdate'](_0x4640f7),_0x4c0c14[_0x4640f7[_0xb7b4d9(0x1f2)]]=_0x4640f7[_0xb7b4d9(0x1c1)],store_1[_0xb7b4d9(0x1e1)][_0x4640f7[_0xb7b4d9(0x1f2)]]&&(_0x437530=!![]),store_1[_0xb7b4d9(0x175)][_0x4640f7[_0xb7b4d9(0x1f2)]]&&(_0x261b9b=!![]),store_2[_0xb7b4d9(0x1a7)][_0x4640f7[_0xb7b4d9(0x1f2)]]&&(_0x594eec=!![]),store_1['LinkFoxConfig'][_0x4640f7[_0xb7b4d9(0x1f2)]]&&(_0xef2d6a=!![]),[_0xb7b4d9(0x19b),_0xb7b4d9(0x205)][_0xb7b4d9(0x161)](_0x4640f7[_0xb7b4d9(0x1f2)])&&(_0x2aa1b2=!![]),[_0xb7b4d9(0x18b),_0xb7b4d9(0x206)][_0xb7b4d9(0x161)](_0x4640f7[_0xb7b4d9(0x1f2)])&&(_0x2ba124=!![]),[_0xb7b4d9(0x1e3),_0xb7b4d9(0x183),_0xb7b4d9(0x1db),_0xb7b4d9(0x1bb),'registerBaseUrl']['includes'](_0x4640f7['configKey'])&&(_0x4f3e17=!![]);}return _0x437530&&store_1[_0xb7b4d9(0x1e1)][_0xb7b4d9(0x1b6)](_0x4c0c14),_0x261b9b&&store_1[_0xb7b4d9(0x175)][_0xb7b4d9(0x1b6)](_0x4c0c14),_0x594eec&&store_2[_0xb7b4d9(0x1a7)][_0xb7b4d9(0x1b6)](_0x4c0c14),_0xef2d6a&&store_1[_0xb7b4d9(0x1f0)][_0xb7b4d9(0x1b6)](_0x4c0c14),_0x2aa1b2&&await this[_0xb7b4d9(0x1c9)](![]),_0x2ba124&&await this[_0xb7b4d9(0x1c6)](),_0x4f3e17&&this[_0xb7b4d9(0x204)](),'设置完成！';}async[_0xece36a(0x17c)](_0x5c2734){const _0xef6964=_0xece36a,_0x51c2b9=await this[_0xef6964(0x207)](_0x5c2734,!![]);return _0x5c2734[_0xef6964(0x19c)]===0x1?_0x51c2b9[_0x5c2734[0x0]]:_0x51c2b9;}async[_0xece36a(0x207)](_0x4968c1,_0x20f0cf=![]){const _0x4b2fcd=_0xece36a;if(!_0x4968c1[_0x4b2fcd(0x19c)])throw new Error('查询配置不能为空！');const _0x271352=this[_0x4b2fcd(0x1ef)][_0x4b2fcd(0x1a2)]('saasId')||0x0,_0x41321f=new Map(),_0x577e54=await this['configEntity'][_0x4b2fcd(0x1c8)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4968c1),'saasId':(0x0,typeorm_2['In'])([0x0,_0x271352])}});_0x577e54['forEach'](_0x42c8b7=>{const {configKey:_0x21ecda,configVal:_0x4dbe96,saasId:_0x282fc9}=_0x42c8b7;_0x41321f['set'](_0x21ecda+'-'+_0x282fc9,_0x4dbe96);}),this[_0x4b2fcd(0x174)][_0x4b2fcd(0x19f)]((_0x18c363,_0x40e2a1)=>{const _0x473ac7=_0x4b2fcd;_0x41321f['set'](_0x473ac7(0x1bd)+_0x40e2a1,_0x18c363);}),this[_0x4b2fcd(0x1c0)]['forEach']((_0x40083e,_0x25946a)=>{const _0x1c42d0=_0x4b2fcd;_0x41321f[_0x1c42d0(0x1eb)](_0x1c42d0(0x1cc)+_0x25946a,_0x40083e);}),_0x41321f[_0x4b2fcd(0x1eb)]('baiduTextAccessToken-0',this['baiduTextAccessToken']);const _0x4c0052={};_0x4968c1['forEach'](_0xd1285a=>{const _0x344064=_0x4b2fcd;let _0x433872=_0xd1285a+'-'+_0x271352,_0x4028f5='';_0x41321f[_0x344064(0x1cb)](_0x433872)?_0x4028f5=_0x41321f['get'](_0x433872):!constant_1['SelfKeys'][_0x344064(0x161)](_0xd1285a)&&(_0x4028f5=_0x41321f[_0x344064(0x1a2)](_0xd1285a+'-'+0x0)),_0x4c0052[_0xd1285a]=_0x4028f5;});if(_0x20f0cf)return _0x4c0052;return _0x4968c1[_0x4b2fcd(0x19c)]===0x1?_0x4c0052[_0x4968c1[0x0]]:_0x4c0052;}async[_0xece36a(0x1e6)](){const _0x193736=_0xece36a,_0x574356=await this[_0x193736(0x207)](constant_1[_0x193736(0x198)]);return{..._0x574356,'isUseWxLogin':!!(_0x574356[_0x193736(0x18b)]&&_0x574356[_0x193736(0x206)])};}async[_0xece36a(0x17e)](_0x10f329=_0xece36a(0x1a6)){const _0x41a3ca=_0xece36a,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this['getConfigByKeys'](['payHupiStatus',_0x41a3ca(0x1a8),'payMpayStatus',_0x41a3ca(0x1a0)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x41a3ca(0x1ee)](_0x4cadda=>_0x4cadda===0x0))throw new common_1[(_0x41a3ca(0x195))](_0x41a3ca(0x1dd),common_1[_0x41a3ca(0x1f9)][_0x41a3ca(0x17d)]);if(Number(payWechatStatus)===0x1)return _0x10f329;if(Number(payEpayStatus)===0x1)return _0x41a3ca(0x188);if(Number(payMpayStatus)===0x1)return _0x41a3ca(0x18d);if(Number(payHupiStatus)===0x1)return _0x41a3ca(0x169);}async[_0xece36a(0x181)](){const _0x5a4bb4=_0xece36a,{phoneRegisterStatus:_0x3482d7,aliPhoneAccessKeyId:_0x39002e,aliPhoneAccessKeySecret:_0xffb116,aliPhoneSignName:_0x2be438,aliPhoneTemplateCode:_0x20d5ca}=await this[_0x5a4bb4(0x207)]([_0x5a4bb4(0x197),'aliPhoneAccessKeyId','aliPhoneAccessKeySecret',_0x5a4bb4(0x163),_0x5a4bb4(0x1e7)]);if(Number(_0x3482d7)!==0x1)throw new common_1['HttpException'](_0x5a4bb4(0x1f6),common_1[_0x5a4bb4(0x1f9)][_0x5a4bb4(0x17d)]);return{'accessKeyId':_0x39002e,'accessKeySecret':_0xffb116,'SignName':_0x2be438,'TemplateCode':_0x20d5ca};}[_0xece36a(0x1fb)](){const _0x3bc2f6=_0xece36a;return process[_0x3bc2f6(0x172)][_0x3bc2f6(0x1ed)]||_0x3bc2f6(0x184);}async[_0xece36a(0x1d8)](){const _0x3ca6e5=_0xece36a,_0x46277d=await this[_0x3ca6e5(0x207)]([_0x3ca6e5(0x1d7),_0x3ca6e5(0x1b7)]),_0xc347de={};for(let _0x293da4 in _0x46277d){const _0x3aa0a0=Number(_0x46277d[_0x293da4]);_0xc347de[_0x293da4]=isNaN(_0x3aa0a0)?0x0:_0x3aa0a0;}if(!_0xc347de[_0x3ca6e5(0x1d7)])throw new common_1[(_0x3ca6e5(0x195))](_0x3ca6e5(0x1f8),common_1[_0x3ca6e5(0x1f9)][_0x3ca6e5(0x17d)]);return _0xc347de[_0x3ca6e5(0x1b7)];}async[_0xece36a(0x199)](){const _0x5a9777=_0xece36a,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x42924f,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x3dcb9b,nineaiBuiltInSensitiveAuthKey:_0x1de07d}=await this[_0x5a9777(0x207)](['baiduTextStatus',_0x5a9777(0x1dc),_0x5a9777(0x1ae),_0x5a9777(0x200),_0x5a9777(0x182)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x5a9777(0x1fa),'baiduTextAccessToken':_0x42924f};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x5a9777(0x1a3),'nineaiBuiltInSensitiveApiBase':_0x3dcb9b,'nineaiBuiltInSensitiveAuthKey':_0x1de07d};return null;}async['robotAvatar2Base64'](){const _0x3e6c6c=_0xece36a,_0x208a9a=await this[_0x3e6c6c(0x207)]([_0x3e6c6c(0x1b4)]);if(!_0x208a9a)throw new common_1[(_0x3e6c6c(0x195))](_0x3e6c6c(0x17b),common_1['HttpStatus'][_0x3e6c6c(0x16c)]);const _0x107e3d=await axios_1[_0x3e6c6c(0x17f)][_0x3e6c6c(0x1a2)](_0x208a9a,{'responseType':_0x3e6c6c(0x191)}),_0x4c77f7=Buffer[_0x3e6c6c(0x1ec)](_0x107e3d[_0x3e6c6c(0x1d5)])[_0x3e6c6c(0x202)](_0x3e6c6c(0x1ff));return _0x3e6c6c(0x1d6)+_0x4c77f7;}async[_0xece36a(0x209)](_0x4d625c){const _0x2ba9b5=_0xece36a;await this[_0x2ba9b5(0x1ac)][_0x2ba9b5(0x201)](_0x4d625c);}async[_0xece36a(0x1fe)](_0x9aede1,_0x4859da,_0x4ea593){const _0x399f59=_0xece36a,_0x277a9e={'vipLeavelId':_0x9aede1,'relateType':_0x4859da};_0x4ea593&&(_0x277a9e[_0x399f59(0x165)]=_0x4ea593);const _0x394f77=await this[_0x399f59(0x1ac)][_0x399f59(0x1f3)]({'where':_0x277a9e});return _0x394f77;}};function _0x56c5(_0xd4be7d,_0x2979b3){const _0x2a334d=_0x2a33();return _0x56c5=function(_0x56c5dc,_0x590c5a){_0x56c5dc=_0x56c5dc-0x161;let _0x2c60c4=_0x2a334d[_0x56c5dc];return _0x2c60c4;},_0x56c5(_0xd4be7d,_0x2979b3);}GlobalConfigService=__decorate([(0x0,common_1[_0xece36a(0x177)])(),__param(0x0,(0x0,typeorm_1[_0xece36a(0x1c4)])(config_entity_1[_0xece36a(0x1f7)])),__param(0x1,(0x0,typeorm_1[_0xece36a(0x1c4)])(vip_leavel_rel_entity_1[_0xece36a(0x171)])),__metadata('design:paramtypes',[typeorm_2[_0xece36a(0x1a5)],typeorm_2[_0xece36a(0x1a5)],nestjs_cls_1[_0xece36a(0x176)]])],GlobalConfigService),exports[_0xece36a(0x1f4)]=GlobalConfigService;