'use strict';const _0x5cdf51=_0x1ce7;(function(_0xc3a832,_0x162284){const _0x9971ab=_0x1ce7,_0x545b4f=_0xc3a832();while(!![]){try{const _0x3fff84=parseInt(_0x9971ab(0x1d9))/0x1+parseInt(_0x9971ab(0x1f3))/0x2*(parseInt(_0x9971ab(0x1ed))/0x3)+parseInt(_0x9971ab(0x1ea))/0x4+parseInt(_0x9971ab(0x20a))/0x5*(-parseInt(_0x9971ab(0x1b0))/0x6)+parseInt(_0x9971ab(0x1ee))/0x7+parseInt(_0x9971ab(0x1fd))/0x8*(-parseInt(_0x9971ab(0x202))/0x9)+-parseInt(_0x9971ab(0x1dd))/0xa;if(_0x3fff84===_0x162284)break;else _0x545b4f['push'](_0x545b4f['shift']());}catch(_0x393bee){_0x545b4f['push'](_0x545b4f['shift']());}}}(_0x5a41,0xce11a));function _0x1ce7(_0x24d6f0,_0xae131a){const _0x5a41a9=_0x5a41();return _0x1ce7=function(_0x1ce7e0,_0x1951f9){_0x1ce7e0=_0x1ce7e0-0x1a4;let _0x2c3622=_0x5a41a9[_0x1ce7e0];return _0x2c3622;},_0x1ce7(_0x24d6f0,_0xae131a);}function _0x5a41(){const _0x215294=['审核状态错误','HttpStatus','Like','getUserById','decorate','用户不存在','salesBaseTitle','625137yVFKyp','提现金额必须为数字且大于0','inviterUsername','inviteCode','2441420AoelNg','changeUserBaseSalesInfo','count','__decorate','isSuper','orderStatus','../user/user.service','avatar','user','SalesService','SalesUsersEntity','map','提现金额不足','1544028WFntkH','salesOrderEntity','clsService','18339FNCcLS','11693122DwavLA','findOne','修改失败','length','userInfo','154OHhmjj','HttpException','Injectable','inviteLinkCount','DESC','auditOrder','./salesOrder.entity','auditUserId','Repository','appForMoney','8bNDoXk','GlobalConfigService','hideString','inviterUserId','countByInviteCode','11089836MawClF','formatCreateOrUpdateDate','forwardRef','object','error:\x20','./salesUsers.entity','withdrawalChannels','number','594205VyFcDV','createOrder','email','@nestjs/common','inviteeUserId','该工单已审核过','新秀分销商','UserService','getOwnPropertyDescriptor','function','createUserBaseSalesInfo','userId','getUserListByIds','withdrawalAmount','toNumber','getConfigByKeys','salesUsersEntity','审核失败','drawMoneyOrder','审核完成','design:paramtypes','salesAllowDrawMoney','创建提现工单失败','xxxxxxx','BAD_REQUEST','42VlzfPf','inviterEmail','findAndCount','inviteeEmail','salesBaseRatio','default','plus','save','log','inviteRecords','userService','globalConfigService','inviteeAvatar','__metadata','./salesRecords.entity','minus','metadata','./../globalConfig/globalConfig.service','InjectRepository','getMineRecords','updateUserSales','提现金额最低必须为','username','performanceRatio','push','forEach','update','salesOrder','SalesRecordsEntity','@nestjs/typeorm','find','affected','defineProperty','salesRecordsEntity'];_0x5a41=function(){return _0x215294;};return _0x5a41();}var __decorate=this&&this[_0x5cdf51(0x1e0)]||function(_0x2c548b,_0x508eaa,_0x5a362b,_0x5c6615){const _0x3e2835=_0x5cdf51;var _0x5ca285=arguments[_0x3e2835(0x1f1)],_0x2c5808=_0x5ca285<0x3?_0x508eaa:_0x5c6615===null?_0x5c6615=Object[_0x3e2835(0x212)](_0x508eaa,_0x5a362b):_0x5c6615,_0x1f5665;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x3e2835(0x213))_0x2c5808=Reflect[_0x3e2835(0x1d6)](_0x2c548b,_0x508eaa,_0x5a362b,_0x5c6615);else{for(var _0x4192d8=_0x2c548b['length']-0x1;_0x4192d8>=0x0;_0x4192d8--)if(_0x1f5665=_0x2c548b[_0x4192d8])_0x2c5808=(_0x5ca285<0x3?_0x1f5665(_0x2c5808):_0x5ca285>0x3?_0x1f5665(_0x508eaa,_0x5a362b,_0x2c5808):_0x1f5665(_0x508eaa,_0x5a362b))||_0x2c5808;}return _0x5ca285>0x3&&_0x2c5808&&Object[_0x3e2835(0x1d0)](_0x508eaa,_0x5a362b,_0x2c5808),_0x2c5808;},__metadata=this&&this[_0x5cdf51(0x1bd)]||function(_0x4fe38c,_0x45eb7f){const _0x5dde56=_0x5cdf51;if(typeof Reflect===_0x5dde56(0x205)&&typeof Reflect[_0x5dde56(0x1c0)]===_0x5dde56(0x213))return Reflect[_0x5dde56(0x1c0)](_0x4fe38c,_0x45eb7f);},__param=this&&this['__param']||function(_0x34fe77,_0x1f8a59){return function(_0x28ffd2,_0x289ddc){_0x1f8a59(_0x28ffd2,_0x289ddc,_0x34fe77);};};Object[_0x5cdf51(0x1d0)](exports,'__esModule',{'value':!![]}),exports['SalesService']=void 0x0;const globalConfig_service_1=require(_0x5cdf51(0x1c1)),common_1=require(_0x5cdf51(0x20d)),salesUsers_entity_1=require(_0x5cdf51(0x207)),typeorm_1=require(_0x5cdf51(0x1cd)),typeorm_2=require('typeorm'),salesRecords_entity_1=require(_0x5cdf51(0x1be)),utils_1=require('../../common/utils'),decimal_js_1=require('decimal.js'),salesOrder_entity_1=require(_0x5cdf51(0x1f9)),user_service_1=require(_0x5cdf51(0x1e3)),nestjs_cls_1=require('nestjs-cls');let SalesService=class SalesService{constructor(_0x24fc94,_0x3858f8,_0x1ca7c6,_0x2733a4,_0x3131f5,_0x349794){const _0x420244=_0x5cdf51;this[_0x420244(0x1a7)]=_0x24fc94,this['salesOrderEntity']=_0x3858f8,this[_0x420244(0x1d1)]=_0x1ca7c6,this[_0x420244(0x1ba)]=_0x2733a4,this[_0x420244(0x1ec)]=_0x3131f5,this['globalConfigService']=_0x349794;}async['getMineAccount'](_0x1074b9){const _0x918eb9=_0x5cdf51;try{const {id:_0x6bc77f}=_0x1074b9[_0x918eb9(0x1e5)];let _0x3010b1=await this['salesUsersEntity'][_0x918eb9(0x1ef)]({'where':{'userId':_0x6bc77f}});if(!_0x3010b1){const {salesBaseRatio:salesBaseRatio=0xa,salesBaseTitle:salesBaseTitle=_0x918eb9(0x210)}=await this['globalConfigService'][_0x918eb9(0x1a6)]([_0x918eb9(0x1b4),_0x918eb9(0x1d8)]);_0x3010b1=await this[_0x918eb9(0x214)]({'userId':_0x6bc77f,'performanceRatio':Number(salesBaseRatio),'salesOutletName':salesBaseTitle});}const _0x1b8da2=(0x0,utils_1[_0x918eb9(0x203)])(_0x3010b1),_0x236bf3=await this[_0x918eb9(0x1d1)][_0x918eb9(0x1df)]({'where':{'inviterUserId':_0x6bc77f}});let _0x11cb07=0x0,_0x49b9a7=_0x918eb9(0x1ae);const _0x3d31e6=await this['userService'][_0x918eb9(0x1d5)](_0x6bc77f);_0x3d31e6&&(_0x49b9a7=_0x3d31e6[_0x918eb9(0x1dc)],_0x11cb07=_0x3d31e6[_0x918eb9(0x1f6)]);const _0x4df6e6=await this[_0x918eb9(0x1ba)][_0x918eb9(0x201)](_0x49b9a7);return{..._0x1b8da2,'orderCount':_0x236bf3,'inviteCount':_0x4df6e6,'inviteLinkCount':_0x11cb07};}catch(_0x52cd21){console['log']('error:\x20',_0x52cd21);}}async[_0x5cdf51(0x1c3)](_0x18263d,_0x36bf1b){const _0x2911a9=_0x5cdf51;try{const {id:_0x500c83}=_0x18263d[_0x2911a9(0x1e5)],{page:_0x11722f,size:_0x70a78e}=_0x36bf1b,[_0x1e476f,_0x286264]=await this[_0x2911a9(0x1d1)][_0x2911a9(0x1b2)]({'where':{'inviterUserId':_0x500c83},'order':{'createdAt':_0x2911a9(0x1f7)},'skip':(_0x11722f-0x1)*_0x70a78e,'take':_0x70a78e});return{'rows':(0x0,utils_1[_0x2911a9(0x203)])(_0x1e476f),'count':_0x286264};}catch(_0x2aff1a){console[_0x2911a9(0x1b8)](_0x2911a9(0x206),_0x2aff1a);}}async[_0x5cdf51(0x1b9)](_0x40c38e,_0x53bbb0){const _0x46328a=_0x5cdf51;try{const {page:_0x2c618e,size:_0x1fe8f1,orderId:_0xf22ad8,orderPrice:_0x313ac2}=_0x53bbb0;let _0x46a6c4={};_0xf22ad8&&(_0x46a6c4={'orderId':_0xf22ad8}),_0x313ac2&&(_0x46a6c4={'orderPrice':_0x313ac2});const [_0x590a18,_0x5af3ac]=await this['salesRecordsEntity'][_0x46328a(0x1b2)]({'where':_0x46a6c4,'order':{'createdAt':_0x46328a(0x1f7)},'skip':(_0x2c618e-0x1)*_0x1fe8f1,'take':_0x1fe8f1}),_0xd6b639=[];_0x590a18[_0x46328a(0x1e8)](_0x14bd14=>{const _0x5069b0=_0x46328a;_0xd6b639[_0x5069b0(0x1c8)](_0x14bd14[_0x5069b0(0x200)]),_0xd6b639[_0x5069b0(0x1c8)](_0x14bd14[_0x5069b0(0x20e)]);});const _0x11b85f=await this[_0x46328a(0x1ba)][_0x46328a(0x216)](_0xd6b639);return _0x590a18[_0x46328a(0x1c9)](_0x43e11c=>{const _0x2efbc6=_0x46328a,_0x4bd0ed=_0x11b85f[_0x2efbc6(0x1ce)](_0x4b0e30=>_0x4b0e30['id']===_0x43e11c[_0x2efbc6(0x200)]),_0x21c064=_0x11b85f[_0x2efbc6(0x1ce)](_0x1b1a15=>_0x1b1a15['id']===_0x43e11c[_0x2efbc6(0x20e)]);_0x43e11c[_0x2efbc6(0x1db)]=_0x4bd0ed?.['username'],_0x43e11c[_0x2efbc6(0x1b1)]=_0x4bd0ed?.[_0x2efbc6(0x20c)],_0x43e11c['inviterAvatar']=_0x4bd0ed?.[_0x2efbc6(0x1e4)],_0x43e11c['inviteeUsername']=_0x21c064?.[_0x2efbc6(0x1c6)],_0x43e11c[_0x2efbc6(0x1b3)]=_0x21c064?.[_0x2efbc6(0x20c)],_0x43e11c[_0x2efbc6(0x1bc)]=_0x21c064?.[_0x2efbc6(0x1e4)];}),!(0x0,utils_1[_0x46328a(0x1e1)])(this[_0x46328a(0x1ec)])&&_0x590a18[_0x46328a(0x1c9)](_0x1aa1d7=>{const _0xe863e=_0x46328a;_0x1aa1d7[_0xe863e(0x1b1)]=_0x1aa1d7['inviterEmail']?(0x0,utils_1['hideString'])(_0x1aa1d7[_0xe863e(0x1b1)]):'',_0x1aa1d7[_0xe863e(0x1b3)]=_0x1aa1d7[_0xe863e(0x1b3)]?(0x0,utils_1[_0xe863e(0x1ff)])(_0x1aa1d7[_0xe863e(0x1b3)]):'';}),{'rows':(0x0,utils_1[_0x46328a(0x203)])(_0x590a18),'count':_0x5af3ac};}catch(_0x5e6ff5){console[_0x46328a(0x1b8)](_0x46328a(0x206),_0x5e6ff5);}}async[_0x5cdf51(0x214)](_0x1192d9){const _0x15d4c6=_0x5cdf51,{userId:_0x579908,performanceRatio:_0x149c3d,salesOutletName:_0x27a6c5}=_0x1192d9;return await this[_0x15d4c6(0x1a7)][_0x15d4c6(0x1b7)]({'userId':_0x579908,'performanceRatio':_0x149c3d,'salesOutletName':_0x27a6c5});}async[_0x5cdf51(0x1de)](_0x279db1){const _0x5281e6=_0x5cdf51;return await this[_0x5281e6(0x1a7)][_0x5281e6(0x1b7)](_0x279db1);}async['createSalesRecords'](_0x4136a1){const _0x57b302=_0x5cdf51;return await this[_0x57b302(0x1d1)][_0x57b302(0x1b7)](_0x4136a1);}async['saveCommissionAmount'](_0x11701c,_0x5b1808){const _0x50f2b5=_0x5cdf51,_0xc4c1cb=await this[_0x50f2b5(0x1a7)][_0x50f2b5(0x1ef)]({'where':{'userId':_0x11701c}});if(!_0xc4c1cb)return;const {totalAmount:_0x48266b,distributionBalance:_0x46a5d2}=_0xc4c1cb;return console[_0x50f2b5(0x1b8)]('totalAmount,\x20distributionBalance:\x20',_0x48266b,_0x46a5d2),await this[_0x50f2b5(0x1a7)]['update']({'userId':_0x11701c},{'totalAmount':new decimal_js_1[(_0x50f2b5(0x1b5))](_0x48266b)['plus'](_0x5b1808)[_0x50f2b5(0x1a5)](),'distributionBalance':new decimal_js_1['default'](_0x46a5d2)['plus'](_0x5b1808)[_0x50f2b5(0x1a5)]()});}async[_0x5cdf51(0x1fc)](_0x1937c9,_0x388304){const _0x429ee3=_0x5cdf51,{id:_0x4edf37}=_0x1937c9[_0x429ee3(0x1e5)],{withdrawalAmount:_0x1e9944,withdrawalChannels:_0x556272,contactInformation:_0xd92e4b,remark:_0x31e372}=_0x388304,_0x46f63e=await this[_0x429ee3(0x1bb)][_0x429ee3(0x1a6)]([_0x429ee3(0x1ac)])||0xa;if(typeof _0x1e9944!==_0x429ee3(0x209)||_0x1e9944<=0x0)throw new common_1[(_0x429ee3(0x1f4))](_0x429ee3(0x1da),common_1[_0x429ee3(0x1d3)][_0x429ee3(0x1af)]);if(Number(_0x1e9944)<Number(_0x46f63e))throw new common_1[(_0x429ee3(0x1f4))](_0x429ee3(0x1c5)+_0x46f63e+'元',common_1[_0x429ee3(0x1d3)][_0x429ee3(0x1af)]);const _0x136bb5=await this[_0x429ee3(0x1a7)][_0x429ee3(0x1ef)]({'where':{'userId':_0x4edf37}}),{distributionBalance:_0x8006eb,drawMoneyIn:_0x3fdd3a}=_0x136bb5;if(Number(_0x8006eb)<Number(_0x1e9944))throw new common_1[(_0x429ee3(0x1f4))](_0x429ee3(0x1e9),common_1[_0x429ee3(0x1d3)][_0x429ee3(0x1af)]);const _0x22c676=new decimal_js_1[(_0x429ee3(0x1b5))](_0x8006eb)[_0x429ee3(0x1bf)](_0x1e9944)['toNumber'](),_0x502305={'userId':_0x4edf37,'withdrawalAmount':_0x1e9944,'orderStatus':0x0,'auditStatus':0x0,'withdrawalChannels':_0x556272,'contactInformation':_0xd92e4b,'remark':_0x31e372};await this['createOrder'](_0x502305);const _0x29c0f0=await this[_0x429ee3(0x1a7)][_0x429ee3(0x1ca)]({'userId':_0x4edf37},{'distributionBalance':_0x22c676,'drawMoneyIn':new decimal_js_1['default'](_0x3fdd3a)[_0x429ee3(0x1b6)](_0x1e9944)[_0x429ee3(0x1a5)]()});}async[_0x5cdf51(0x1a9)](_0x4ad3eb,_0x4f101b){const _0x57139b=_0x5cdf51,{id:_0x1d5567}=_0x4ad3eb['user'],{page:_0xd1e74e,size:_0x546351}=_0x4f101b,[_0x11d603,_0x11981d]=await this['salesOrderEntity'][_0x57139b(0x1b2)]({'where':{'userId':_0x1d5567},'order':{'createdAt':_0x57139b(0x1f7)},'skip':(_0xd1e74e-0x1)*_0x546351,'take':_0x546351}),_0x3a1e8c=_0x11d603['map'](_0x37a035=>_0x37a035['auditUserId']),_0x2acc62=await this[_0x57139b(0x1ba)]['getUserListByIds'](_0x3a1e8c);return _0x11d603[_0x57139b(0x1c9)](_0x480f9a=>{const _0x287040=_0x57139b,_0x2e2ed2=_0x2acc62[_0x287040(0x1ce)](_0x494301=>_0x494301['id']===_0x480f9a[_0x287040(0x1fa)]);_0x480f9a['auditUserName']=_0x2e2ed2?_0x2e2ed2['username']:'';}),{'rows':(0x0,utils_1[_0x57139b(0x203)])(_0x11d603),'count':_0x11981d};}async[_0x5cdf51(0x1cb)](_0x2496ad,_0xdafb92){const _0x46934c=_0x5cdf51,{page:_0x2f088f,size:_0x5b6f16}=_0xdafb92,_0x4e4e6b={};_0xdafb92[_0x46934c(0x1e2)]!==undefined&&_0xdafb92[_0x46934c(0x1e2)]!==''&&(_0x4e4e6b[_0x46934c(0x1e2)]=_0xdafb92['orderStatus']),_0xdafb92[_0x46934c(0x208)]&&(_0x4e4e6b['withdrawalChannels']=_0xdafb92[_0x46934c(0x208)]);const [_0xa08f3d,_0x3fe3c9]=await this[_0x46934c(0x1eb)]['findAndCount']({'where':_0x4e4e6b,'order':{'createdAt':_0x46934c(0x1f7)},'skip':(_0x2f088f-0x1)*_0x5b6f16,'take':_0x5b6f16}),_0x1f17bb=_0xa08f3d[_0x46934c(0x1e8)](_0x59f337=>_0x59f337[_0x46934c(0x215)]),_0x1c2239=await this[_0x46934c(0x1ba)][_0x46934c(0x216)](_0x1f17bb);return _0xa08f3d[_0x46934c(0x1c9)](_0x5b02e6=>{const _0x145928=_0x46934c,_0x1fbd03=_0x1c2239['find'](_0x3c30c6=>_0x3c30c6['id']===_0x5b02e6[_0x145928(0x215)]);if(_0x1fbd03){const {username:_0x52a698,email:_0x28fc5d,avatar:_0x53948f}=_0x1fbd03;_0x5b02e6[_0x145928(0x1f2)]={'username':_0x52a698,'avatar':_0x53948f,'email':(0x0,utils_1[_0x145928(0x1ff)])(_0x28fc5d)};}}),{'rows':(0x0,utils_1[_0x46934c(0x203)])(_0xa08f3d),'count':_0x3fe3c9};}async[_0x5cdf51(0x20b)](_0x14961c){const _0x1221ba=_0x5cdf51;try{return await this['salesOrderEntity'][_0x1221ba(0x1b7)](_0x14961c);}catch(_0x43fc2c){console[_0x1221ba(0x1b8)](_0x1221ba(0x206),_0x43fc2c);throw new common_1[(_0x1221ba(0x1f4))](_0x1221ba(0x1ad),common_1[_0x1221ba(0x1d3)][_0x1221ba(0x1af)]);}}async[_0x5cdf51(0x1f8)](_0x28d2eb,_0x3dd9e6){const _0x30974f=_0x5cdf51;try{const {id:_0x51f5c1}=_0x28d2eb[_0x30974f(0x1e5)],{id:_0x26f2e4,status:_0x3dcc90}=_0x3dd9e6;if(![0x1,-0x1]['includes'](_0x3dcc90))throw new common_1[(_0x30974f(0x1f4))](_0x30974f(0x1d2),common_1[_0x30974f(0x1d3)][_0x30974f(0x1af)]);const _0x42bdcb=await this['salesOrderEntity']['findOne']({'where':{'id':_0x26f2e4}});if(_0x42bdcb[_0x30974f(0x1e2)]!==0x0)throw new common_1['HttpException'](_0x30974f(0x20f),common_1[_0x30974f(0x1d3)]['BAD_REQUEST']);const _0x2a3d43=await this[_0x30974f(0x1a7)][_0x30974f(0x1ef)]({'where':{'userId':_0x42bdcb['userId']}}),{withdrawalAmount:_0x41e8d2,drawMoneyIn:_0x5b1867}=_0x2a3d43,_0x439291=new decimal_js_1[(_0x30974f(0x1b5))](_0x41e8d2)[_0x30974f(0x1b6)](_0x42bdcb[_0x30974f(0x1a4)])[_0x30974f(0x1a5)](),_0x2c2b6d=new decimal_js_1[(_0x30974f(0x1b5))](_0x5b1867)[_0x30974f(0x1bf)](_0x42bdcb[_0x30974f(0x1a4)])[_0x30974f(0x1a5)]();return await this[_0x30974f(0x1a7)][_0x30974f(0x1ca)]({'userId':_0x42bdcb[_0x30974f(0x215)]},{'withdrawalAmount':_0x439291,'drawMoneyIn':_0x2c2b6d}),await this['salesOrderEntity'][_0x30974f(0x1ca)]({'id':_0x26f2e4},{'orderStatus':_0x3dcc90,'auditStatus':_0x3dcc90,'auditUserId':_0x51f5c1,'paymentStatus':_0x3dcc90}),_0x30974f(0x1aa);}catch(_0x418c59){console[_0x30974f(0x1b8)]('error:\x20',_0x418c59);throw new common_1[(_0x30974f(0x1f4))](_0x30974f(0x1a8),common_1[_0x30974f(0x1d3)][_0x30974f(0x1af)]);}}async['salesUserList'](_0x19d05d,_0x3c09f9){const _0x2fc1f1=_0x5cdf51,{page:_0x3d2544,size:_0x10647d,salesOutletName:_0x2d6487,performanceRatio:_0x5b5168}=_0x3c09f9,_0x3a62d9={};_0x2d6487&&(_0x3a62d9['salesOutletName']=(0x0,typeorm_2[_0x2fc1f1(0x1d4)])('%'+_0x2d6487+'%')),_0x5b5168&&(_0x3a62d9[_0x2fc1f1(0x1c7)]=_0x5b5168);const [_0x21a03f,_0x14ad77]=await this[_0x2fc1f1(0x1a7)][_0x2fc1f1(0x1b2)]({'where':_0x3a62d9,'order':{'id':'DESC'},'skip':(_0x3d2544-0x1)*_0x10647d,'take':_0x10647d}),_0x1330d8=_0x21a03f[_0x2fc1f1(0x1e8)](_0x2b0f2e=>_0x2b0f2e[_0x2fc1f1(0x215)]),_0x9c773b=await this['userService'][_0x2fc1f1(0x216)](_0x1330d8);return _0x21a03f[_0x2fc1f1(0x1c9)](_0x2a5444=>{const _0x38f444=_0x2fc1f1,_0x32fe40=_0x9c773b[_0x38f444(0x1ce)](_0x785927=>_0x785927['id']===_0x2a5444[_0x38f444(0x215)]);_0x2a5444['userInfo']=_0x32fe40?_0x32fe40:{};}),!(0x0,utils_1[_0x2fc1f1(0x1e1)])(this[_0x2fc1f1(0x1ec)])&&_0x21a03f['forEach'](_0xbdae4c=>{const _0x2f513c=_0x2fc1f1;_0xbdae4c[_0x2f513c(0x1f2)]['email']=_0xbdae4c[_0x2f513c(0x1f2)]?.['email']?(0x0,utils_1[_0x2f513c(0x1ff)])(_0xbdae4c[_0x2f513c(0x1f2)]?.[_0x2f513c(0x20c)]):'';}),{'rows':_0x21a03f,'count':_0x14ad77};}async[_0x5cdf51(0x1c4)](_0x5622a9,_0x4a240e){const _0x2a3edb=_0x5cdf51,{performanceRatio:_0x51a3c6,salesOutletName:_0x4aa7ce,userId:_0x27ffa1}=_0x4a240e,_0x4d8083=await this[_0x2a3edb(0x1a7)][_0x2a3edb(0x1ef)]({'where':{'userId':_0x27ffa1}});if(!_0x4d8083)throw new common_1[(_0x2a3edb(0x1f4))](_0x2a3edb(0x1d7),common_1[_0x2a3edb(0x1d3)]['BAD_REQUEST']);const _0x59b2fa=await this[_0x2a3edb(0x1a7)][_0x2a3edb(0x1ca)]({'userId':_0x27ffa1},{'performanceRatio':_0x51a3c6,'salesOutletName':_0x4aa7ce});if(_0x59b2fa[_0x2a3edb(0x1cf)]>0x0)return'修改成功';else throw new common_1[(_0x2a3edb(0x1f4))](_0x2a3edb(0x1f0),common_1[_0x2a3edb(0x1d3)]['BAD_REQUEST']);}};SalesService=__decorate([(0x0,common_1[_0x5cdf51(0x1f5)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(salesUsers_entity_1[_0x5cdf51(0x1e7)])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(salesOrder_entity_1['SalesOrderEntity'])),__param(0x2,(0x0,typeorm_1[_0x5cdf51(0x1c2)])(salesRecords_entity_1[_0x5cdf51(0x1cc)])),__param(0x3,(0x0,common_1['Inject'])((0x0,common_1[_0x5cdf51(0x204)])(()=>user_service_1[_0x5cdf51(0x211)]))),__metadata(_0x5cdf51(0x1ab),[typeorm_2['Repository'],typeorm_2[_0x5cdf51(0x1fb)],typeorm_2['Repository'],user_service_1[_0x5cdf51(0x211)],nestjs_cls_1['ClsService'],globalConfig_service_1[_0x5cdf51(0x1fe)]])],SalesService),exports[_0x5cdf51(0x1e6)]=SalesService;