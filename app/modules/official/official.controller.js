'use strict';function _0x46dd(_0xb64db5,_0x45ad9c){const _0x5789a9=_0x5789();return _0x46dd=function(_0x46ddbb,_0x15459e){_0x46ddbb=_0x46ddbb-0xe7;let _0x5f48c3=_0x5789a9[_0x46ddbb];return _0x5f48c3;},_0x46dd(_0xb64db5,_0x45ad9c);}const _0x4a687d=_0x46dd;(function(_0x1157c0,_0x511c3b){const _0x1c4a7a=_0x46dd,_0x134d13=_0x1157c0();while(!![]){try{const _0x397091=-parseInt(_0x1c4a7a(0x103))/0x1*(-parseInt(_0x1c4a7a(0x106))/0x2)+-parseInt(_0x1c4a7a(0xed))/0x3*(parseInt(_0x1c4a7a(0x104))/0x4)+-parseInt(_0x1c4a7a(0x138))/0x5+parseInt(_0x1c4a7a(0x149))/0x6*(parseInt(_0x1c4a7a(0xf9))/0x7)+-parseInt(_0x1c4a7a(0xe7))/0x8+parseInt(_0x1c4a7a(0x100))/0x9*(parseInt(_0x1c4a7a(0x134))/0xa)+parseInt(_0x1c4a7a(0x10f))/0xb;if(_0x397091===_0x511c3b)break;else _0x134d13['push'](_0x134d13['shift']());}catch(_0x4632b1){_0x134d13['push'](_0x134d13['shift']());}}}(_0x5789,0x43969));function _0x5789(){const _0x4d1001=['verify','4419080AvRHBY','aotoPlay','application/json','officialBindAccountText','echostr','Req','147CtBIxi','getRedirectUrl','split','officialScanLoginText','POST','send','genXmlMsg','offical\x20getQRCode','ApiOperation','公众号通知接口GET','__param','eventkey','56GfLjDC','msgtype','VIEW','SCAN','Get','__esModule','ApiTags','109539HkSItU','Query','gomaxai.qumao518.vip','83cNvclx','35228XWbtkX','saas.qumao518.vip：广播扫码事件失败','2508UwhSRB','JwtAuthGuard','scan','./official.service','CLICK','axios','公众号通知接口POST','ApiResponse','prototype','9163594IejNEx','sceneStr:\x20','log','Body','__decorate','timestamp','officialSubscribeText','design:returntype','Post','loginByCode','qrscene_','error','env','./dto/getQrSceneStr.dto','nonce','notifyPost','UseGuards','decorate','loginBySceneStr','getQRCode','Res','object','OfficialController','getOwnPropertyDescriptor','default','./vo/Login.vo','type','notify','catch','getQRSceneStr','includes','./dto/getQrCode.dto','event','bindWxBySceneStr','getJsapiTicket','GetQrCodeDto','ceshi.qumao518.vip：广播扫码事件失败','300TVWwMm','GetQrSceneStrDto','获取登录二维码sceneStr','https://ceshi.qumao518.vip/api/official/notify','2590485lAjhJi','__metadata','get\x20通知>>>','getQRCodeTicket','扫码登录轮询查询','xml:\x20','getQRSceneStrByBind','officialService','genXmlMsgByConfig','https://kaifa.qumao518.vip/api/official/notify','sceneStr','@nestjs/swagger','scanBindWx','获取登录跳转地址','客户端发送了文字消息','Logger','content','357450AvxicV','design:type','length','metadata','code','获取绑定二维码的sceneStr','status','扫码绑定轮询查询','defineProperty','design:paramtypes','official','subscribe','fromusername','GOMAXAI_HOST','function','获取二维码','unsubscribe','获取注册配置','getAccessToken','https://saas.qumao518.vip/api/official/notify'];_0x5789=function(){return _0x4d1001;};return _0x5789();}var __decorate=this&&this[_0x4a687d(0x113)]||function(_0x3fca8b,_0x30b978,_0x2686a9,_0x37b4aa){const _0x5fff7e=_0x4a687d;var _0x553425=arguments[_0x5fff7e(0x14b)],_0xecc827=_0x553425<0x3?_0x30b978:_0x37b4aa===null?_0x37b4aa=Object[_0x5fff7e(0x126)](_0x30b978,_0x2686a9):_0x37b4aa,_0x15d24b;if(typeof Reflect===_0x5fff7e(0x124)&&typeof Reflect[_0x5fff7e(0x120)]===_0x5fff7e(0x157))_0xecc827=Reflect[_0x5fff7e(0x120)](_0x3fca8b,_0x30b978,_0x2686a9,_0x37b4aa);else{for(var _0x24cc11=_0x3fca8b[_0x5fff7e(0x14b)]-0x1;_0x24cc11>=0x0;_0x24cc11--)if(_0x15d24b=_0x3fca8b[_0x24cc11])_0xecc827=(_0x553425<0x3?_0x15d24b(_0xecc827):_0x553425>0x3?_0x15d24b(_0x30b978,_0x2686a9,_0xecc827):_0x15d24b(_0x30b978,_0x2686a9))||_0xecc827;}return _0x553425>0x3&&_0xecc827&&Object['defineProperty'](_0x30b978,_0x2686a9,_0xecc827),_0xecc827;},__metadata=this&&this[_0x4a687d(0x139)]||function(_0x405c1e,_0x5efad0){const _0x3fd400=_0x4a687d;if(typeof Reflect===_0x3fd400(0x124)&&typeof Reflect['metadata']===_0x3fd400(0x157))return Reflect[_0x3fd400(0x14c)](_0x405c1e,_0x5efad0);},__param=this&&this[_0x4a687d(0xf7)]||function(_0x11164a,_0x34b309){return function(_0x67e307,_0x59ce93){_0x34b309(_0x67e307,_0x59ce93,_0x11164a);};};Object[_0x4a687d(0x151)](exports,_0x4a687d(0xfe),{'value':!![]}),exports[_0x4a687d(0x125)]=void 0x0;const common_1=require('@nestjs/common'),swagger_1=require(_0x4a687d(0x143)),jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),official_service_1=require(_0x4a687d(0x109)),axios_1=require(_0x4a687d(0x10b)),getQrCode_dto_1=require(_0x4a687d(0x12e)),getQrSceneStr_dto_1=require(_0x4a687d(0x11c)),Login_vo_1=require(_0x4a687d(0x128));let OfficialController=class OfficialController{constructor(_0x35ad62){const _0x3a0b86=_0x4a687d;this[_0x3a0b86(0x13f)]=_0x35ad62;}async[_0x4a687d(0x12a)](_0x4d877d,_0x5a584f,_0x21f8d8){const _0x10e15b=_0x4a687d;console[_0x10e15b(0x111)](_0x10e15b(0x13a),_0x5a584f,_0x21f8d8);const _0x55b5e9=await this[_0x10e15b(0x13f)][_0x10e15b(0x15d)](_0x5a584f['signature'],_0x5a584f[_0x10e15b(0x11d)],_0x5a584f[_0x10e15b(0x114)]);return _0x55b5e9?_0x5a584f[_0x10e15b(0xeb)]:'';}async['notifyPost'](_0x58b796,_0x30b5a8,_0x3cbccf,_0x20f488){const _0x1ab6c6=_0x4a687d,{xml:_0x3fa84b}=_0x3cbccf;console[_0x1ab6c6(0x111)](_0x1ab6c6(0x13d),_0x3fa84b);const _0x36931d=process[_0x1ab6c6(0x11b)][_0x1ab6c6(0x156)];_0x36931d===_0x1ab6c6(0x102)&&((0x0,axios_1[_0x1ab6c6(0x127)])({'url':_0x1ab6c6(0x141),'data':_0x3cbccf,'method':'POST','headers':{'Content-Type':_0x1ab6c6(0xe9)}})[_0x1ab6c6(0x12b)](_0x2be25a=>{console['error']('kaifa.qumao518.vip：广播扫码事件失败');}),(0x0,axios_1[_0x1ab6c6(0x127)])({'url':_0x1ab6c6(0x137),'data':_0x3cbccf,'method':_0x1ab6c6(0xf1),'headers':{'Content-Type':_0x1ab6c6(0xe9)}})[_0x1ab6c6(0x12b)](_0x190998=>{const _0x285812=_0x1ab6c6;console[_0x285812(0x11a)](_0x285812(0x133));}),(0x0,axios_1[_0x1ab6c6(0x127)])({'url':_0x1ab6c6(0x15c),'data':_0x3cbccf,'method':_0x1ab6c6(0xf1),'headers':{'Content-Type':_0x1ab6c6(0xe9)}})[_0x1ab6c6(0x12b)](_0x670b60=>{const _0x56e0e8=_0x1ab6c6;console['error'](_0x56e0e8(0x105));}));if(_0x3fa84b[_0x1ab6c6(0xfa)][0x0]==_0x1ab6c6(0x12f)){if(_0x3fa84b[_0x1ab6c6(0x12f)][0x0]==_0x1ab6c6(0xfb)||_0x3fa84b[_0x1ab6c6(0x12f)][0x0]==_0x1ab6c6(0x10a))return _0x20f488['status'](0xc8)[_0x1ab6c6(0xf2)]('');if(_0x3fa84b[_0x1ab6c6(0x12f)][0x0]==_0x1ab6c6(0xfc)){console[_0x1ab6c6(0x111)]('扫码');const _0x212d8d=_0x3fa84b[_0x1ab6c6(0xf8)][0x0];if(_0x212d8d['includes']('/')){this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x144)](_0x3fa84b[_0x1ab6c6(0x155)][0x0],_0x212d8d);const _0x43a7a8=await this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x140)](_0x3fa84b,'officialBindAccountText');return _0x20f488['status'](0xc8)[_0x1ab6c6(0xf2)](_0x43a7a8);}this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x108)](_0x3fa84b[_0x1ab6c6(0x155)][0x0],_0x212d8d);const _0x43eaf6=await this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x140)](_0x3fa84b,_0x1ab6c6(0xf0));return _0x20f488['status'](0xc8)[_0x1ab6c6(0xf2)](_0x43eaf6);}if(_0x3fa84b[_0x1ab6c6(0x12f)][0x0]==_0x1ab6c6(0x154)){console['log']('订阅',_0x3fa84b['eventkey'][0x0]);const _0x4c2ed6=_0x3fa84b[_0x1ab6c6(0xf8)][0x0][_0x1ab6c6(0xef)](_0x1ab6c6(0x119))[0x1];console[_0x1ab6c6(0x111)](_0x1ab6c6(0x110),_0x4c2ed6);if(!_0x4c2ed6){const _0x34272f=await this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x140)](_0x3fa84b,_0x1ab6c6(0x115));return _0x20f488['status'](0xc8)[_0x1ab6c6(0xf2)](_0x34272f);}if(_0x4c2ed6[_0x1ab6c6(0x12d)]('/')){this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x144)](_0x3fa84b[_0x1ab6c6(0x155)][0x0],_0x4c2ed6);const _0x2c8862=await this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x140)](_0x3fa84b,_0x1ab6c6(0xea));return _0x20f488[_0x1ab6c6(0x14f)](0xc8)['send'](_0x2c8862);}this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x108)](_0x3fa84b[_0x1ab6c6(0x155)][0x0],_0x4c2ed6);const _0x1bd244=await this[_0x1ab6c6(0x13f)][_0x1ab6c6(0x140)](_0x3fa84b,_0x1ab6c6(0x115));return _0x20f488[_0x1ab6c6(0x14f)](0xc8)[_0x1ab6c6(0xf2)](_0x1bd244);}if(_0x3fa84b['event'][0x0]==_0x1ab6c6(0x159))return _0x20f488[_0x1ab6c6(0x14f)](0xc8)['send']('');}if(_0x3fa84b['msgtype'][0x0]=='text'){console[_0x1ab6c6(0x111)](_0x1ab6c6(0x146));const _0x19f47f=await this[_0x1ab6c6(0x13f)][_0x1ab6c6(0xe8)](_0x3fa84b[_0x1ab6c6(0x148)][0x0]),_0x1deeb3=await this[_0x1ab6c6(0x13f)][_0x1ab6c6(0xf3)](_0x3fa84b,_0x19f47f);return _0x20f488[_0x1ab6c6(0x14f)](0xc8)[_0x1ab6c6(0xf2)](_0x1deeb3);}return'success';}async['getQRSceneStr'](_0x29e65f){return this['officialService']['getQRSceneStr'](_0x29e65f);}async[_0x4a687d(0x13e)](_0x1ece56){const _0x9008f2=_0x4a687d;return this['officialService'][_0x9008f2(0x13e)](_0x1ece56);}async['getQRCode'](_0x55cf69){const _0xc4a74c=_0x4a687d,_0x14a005=await this[_0xc4a74c(0x13f)][_0xc4a74c(0x13b)](_0x55cf69[_0xc4a74c(0x142)]);return common_1[_0xc4a74c(0x147)][_0xc4a74c(0x111)](_0x14a005,_0xc4a74c(0xf4)),'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='+encodeURIComponent(_0x14a005);}async['loginBySceneStr'](_0x272b39,_0x1a9b7f){const _0x4d4948=_0x4a687d;return this[_0x4d4948(0x13f)]['loginBySceneStr'](_0x272b39,_0x1a9b7f[_0x4d4948(0x142)]);}async[_0x4a687d(0x130)](_0x57ee2e,_0x376c3e){const _0x455b29=_0x4a687d;return this[_0x455b29(0x13f)]['bindWxBySceneStr'](_0x57ee2e,_0x376c3e[_0x455b29(0x142)]);}async[_0x4a687d(0xee)](_0x2d1d53){const _0x582fbf=_0x4a687d;return this[_0x582fbf(0x13f)][_0x582fbf(0xee)](_0x2d1d53['url']);}async[_0x4a687d(0x131)](_0x268d5e){const _0x54025a=_0x4a687d;return this[_0x54025a(0x13f)][_0x54025a(0x131)](_0x268d5e['url']);}async[_0x4a687d(0x118)](_0x2509f7,_0x23a447){const _0x1f0fb2=_0x4a687d;return this[_0x1f0fb2(0x13f)]['loginByCode'](_0x2509f7,_0x23a447[_0x1f0fb2(0x14d)]);}async[_0x4a687d(0x15b)](_0x292a62,_0x92cadc){const _0x1818ab=_0x4a687d;return this[_0x1818ab(0x13f)][_0x1818ab(0x15b)](_0x292a62,_0x92cadc);}};__decorate([(0x0,common_1[_0x4a687d(0xfd)])(_0x4a687d(0x12a)),(0x0,swagger_1['ApiOperation'])({'summary':_0x4a687d(0xf6)}),__param(0x0,(0x0,common_1[_0x4a687d(0xec)])()),__param(0x1,(0x0,common_1[_0x4a687d(0x101)])()),__param(0x2,(0x0,common_1[_0x4a687d(0x112)])()),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[Object,Object,Object]),__metadata(_0x4a687d(0x116),Promise)],OfficialController[_0x4a687d(0x10e)],'notify',null),__decorate([(0x0,common_1[_0x4a687d(0x117)])(_0x4a687d(0x12a)),(0x0,swagger_1[_0x4a687d(0xf5)])({'summary':_0x4a687d(0x10c)}),__param(0x0,(0x0,common_1[_0x4a687d(0xec)])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x4a687d(0x112)])()),__param(0x3,(0x0,common_1[_0x4a687d(0x123)])()),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[Object,Object,Object,Object]),__metadata(_0x4a687d(0x116),Promise)],OfficialController['prototype'],_0x4a687d(0x11e),null),__decorate([(0x0,common_1['Post'])('getQRSceneStr'),(0x0,swagger_1['ApiOperation'])({'summary':_0x4a687d(0x136)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[getQrSceneStr_dto_1[_0x4a687d(0x135)]]),__metadata(_0x4a687d(0x116),Promise)],OfficialController['prototype'],_0x4a687d(0x12c),null),__decorate([(0x0,common_1[_0x4a687d(0x117)])(_0x4a687d(0x13e)),(0x0,swagger_1['ApiOperation'])({'summary':_0x4a687d(0x14e)}),(0x0,common_1[_0x4a687d(0x11f)])(jwtAuth_guard_1[_0x4a687d(0x107)]),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[Object]),__metadata(_0x4a687d(0x116),Promise)],OfficialController['prototype'],_0x4a687d(0x13e),null),__decorate([(0x0,common_1[_0x4a687d(0xfd)])('getQRCode'),(0x0,swagger_1[_0x4a687d(0xf5)])({'summary':_0x4a687d(0x158)}),__param(0x0,(0x0,common_1[_0x4a687d(0x101)])()),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[getQrCode_dto_1[_0x4a687d(0x132)]]),__metadata(_0x4a687d(0x116),Promise)],OfficialController[_0x4a687d(0x10e)],_0x4a687d(0x122),null),__decorate([(0x0,common_1[_0x4a687d(0x117)])(_0x4a687d(0x121)),(0x0,swagger_1[_0x4a687d(0xf5)])({'summary':_0x4a687d(0x13c)}),__param(0x0,(0x0,common_1[_0x4a687d(0xec)])()),__param(0x1,(0x0,common_1[_0x4a687d(0x112)])()),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[Object,getQrCode_dto_1[_0x4a687d(0x132)]]),__metadata(_0x4a687d(0x116),Promise)],OfficialController[_0x4a687d(0x10e)],_0x4a687d(0x121),null),__decorate([(0x0,common_1[_0x4a687d(0x117)])(_0x4a687d(0x130)),(0x0,swagger_1[_0x4a687d(0xf5)])({'summary':_0x4a687d(0x150)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1[_0x4a687d(0xec)])()),__param(0x1,(0x0,common_1[_0x4a687d(0x112)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x4a687d(0x116),Promise)],OfficialController[_0x4a687d(0x10e)],'bindWxBySceneStr',null),__decorate([(0x0,common_1[_0x4a687d(0x117)])(_0x4a687d(0xee)),(0x0,swagger_1['ApiOperation'])({'summary':_0x4a687d(0x145)}),__param(0x0,(0x0,common_1[_0x4a687d(0x112)])()),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[Object]),__metadata('design:returntype',Promise)],OfficialController[_0x4a687d(0x10e)],_0x4a687d(0xee),null),__decorate([(0x0,common_1[_0x4a687d(0x117)])(_0x4a687d(0x131)),(0x0,swagger_1[_0x4a687d(0xf5)])({'summary':_0x4a687d(0x15a)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x4a687d(0x14a),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x4a687d(0x116),Promise)],OfficialController[_0x4a687d(0x10e)],_0x4a687d(0x131),null),__decorate([(0x0,common_1[_0x4a687d(0x117)])(_0x4a687d(0x118)),(0x0,swagger_1[_0x4a687d(0xf5)])({'summary':'公众号静默登录'}),(0x0,swagger_1[_0x4a687d(0x10d)])({'type':Login_vo_1['OfficialLoginVO']}),__param(0x0,(0x0,common_1[_0x4a687d(0xec)])()),__param(0x1,(0x0,common_1[_0x4a687d(0x112)])()),__metadata('design:type',Function),__metadata(_0x4a687d(0x152),[Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x4a687d(0x10e)],'loginByCode',null),__decorate([(0x0,common_1['Get'])('getAccessToken'),__param(0x0,(0x0,common_1[_0x4a687d(0xec)])()),__param(0x1,(0x0,common_1['Query'])(_0x4a687d(0x129))),__metadata(_0x4a687d(0x14a),Function),__metadata(_0x4a687d(0x152),[Object,String]),__metadata(_0x4a687d(0x116),Promise)],OfficialController['prototype'],_0x4a687d(0x15b),null),OfficialController=__decorate([(0x0,swagger_1[_0x4a687d(0xff)])('official'),(0x0,common_1['Controller'])(_0x4a687d(0x153)),__metadata('design:paramtypes',[official_service_1['OfficialService']])],OfficialController),exports[_0x4a687d(0x125)]=OfficialController;