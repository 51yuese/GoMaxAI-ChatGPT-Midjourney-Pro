'use strict';function _0x4bdf(_0x22441a,_0xe300f4){const _0xbc9835=_0xbc98();return _0x4bdf=function(_0x4bdff0,_0xb80886){_0x4bdff0=_0x4bdff0-0x1a3;let _0x4740d0=_0xbc9835[_0x4bdff0];return _0x4740d0;},_0x4bdf(_0x22441a,_0xe300f4);}const _0x5a3296=_0x4bdf;(function(_0x53f0fc,_0x4e4b36){const _0x476289=_0x4bdf,_0x351098=_0x53f0fc();while(!![]){try{const _0xbe8f6e=parseInt(_0x476289(0x205))/0x1+parseInt(_0x476289(0x1d6))/0x2*(-parseInt(_0x476289(0x1bc))/0x3)+parseInt(_0x476289(0x1f3))/0x4*(-parseInt(_0x476289(0x1e6))/0x5)+parseInt(_0x476289(0x1fd))/0x6+-parseInt(_0x476289(0x1db))/0x7+parseInt(_0x476289(0x1be))/0x8*(parseInt(_0x476289(0x1dc))/0x9)+parseInt(_0x476289(0x1b4))/0xa;if(_0xbe8f6e===_0x4e4b36)break;else _0x351098['push'](_0x351098['shift']());}catch(_0x387768){_0x351098['push'](_0x351098['shift']());}}}(_0xbc98,0xc3efb));function _0xbc98(){const _0x587d30=['official','187778CcJmBw','公众号通知接口POST','prototype','env','msgtype','4579596IOxSqj','9lFyJwg','ApiOperation','SCAN','getQRSceneStr','object','design:paramtypes','获取登录二维码sceneStr','log','公众号静默登录','content','4336625ylGvZz','unsubscribe','catch','CLICK','getOwnPropertyDescriptor','fromusername','获取二维码','loginBySceneStr','Body','saas.qumao518.vip：广播扫码事件失败','xml:\x20','design:returntype','defineProperty','4hIzYav','text','OfficialController','./dto/getQrCode.dto','verify','https://ceshi.qumao518.vip/api/official/notify','url','scanBindWx','kaifa.qumao518.vip：广播扫码事件失败','offical\x20getQRCode','3290208gtMXNn','__param','get\x20通知>>>','type','function','eventkey','status','getJsapiTicket','432106mDVuMs','./dto/getQrSceneStr.dto','getQRSceneStrByBind','Controller','../../common/auth/jwtAuth.guard','success','application/json','officialBindAccountText','axios','length','notifyPost','notify','loginByCode','GetQrSceneStrDto','decorate','officialService','GetQrCodeDto','officialSubscribeText','getRedirectUrl','Req','ApiTags','echostr','genXmlMsg','Query','POST','bindWxBySceneStr','gomaxai.qumao518.vip','metadata','Post','genXmlMsgByConfig','design:type','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','default','./official.service','13173950TsgPSf','includes','VIEW','error','客户端发送了文字消息','Get','https://kaifa.qumao518.vip/api/official/notify','ceshi.qumao518.vip：广播扫码事件失败','48awXRJR','code','12227704XfnoQn','ApiResponse','公众号通知接口GET','qrscene_','获取绑定二维码的sceneStr','scan','__metadata','event','Logger','getQRCode','signature','OfficialLoginVO','send','UseGuards','aotoPlay','@nestjs/swagger','Res','getQRCodeTicket','subscribe','获取登录跳转地址','sceneStr','JwtAuthGuard','扫码绑定轮询查询'];_0xbc98=function(){return _0x587d30;};return _0xbc98();}var __decorate=this&&this['__decorate']||function(_0x34aabd,_0x2a3157,_0x3a533d,_0x15ed42){const _0x45bd61=_0x4bdf;var _0x4314d6=arguments[_0x45bd61(0x20e)],_0x333326=_0x4314d6<0x3?_0x2a3157:_0x15ed42===null?_0x15ed42=Object[_0x45bd61(0x1ea)](_0x2a3157,_0x3a533d):_0x15ed42,_0x31e962;if(typeof Reflect===_0x45bd61(0x1e0)&&typeof Reflect[_0x45bd61(0x213)]===_0x45bd61(0x201))_0x333326=Reflect['decorate'](_0x34aabd,_0x2a3157,_0x3a533d,_0x15ed42);else{for(var _0xbe45a0=_0x34aabd[_0x45bd61(0x20e)]-0x1;_0xbe45a0>=0x0;_0xbe45a0--)if(_0x31e962=_0x34aabd[_0xbe45a0])_0x333326=(_0x4314d6<0x3?_0x31e962(_0x333326):_0x4314d6>0x3?_0x31e962(_0x2a3157,_0x3a533d,_0x333326):_0x31e962(_0x2a3157,_0x3a533d))||_0x333326;}return _0x4314d6>0x3&&_0x333326&&Object[_0x45bd61(0x1f2)](_0x2a3157,_0x3a533d,_0x333326),_0x333326;},__metadata=this&&this[_0x5a3296(0x1c4)]||function(_0x5cbef4,_0x3f4b8c){const _0x3dc9b3=_0x5a3296;if(typeof Reflect===_0x3dc9b3(0x1e0)&&typeof Reflect[_0x3dc9b3(0x1ad)]===_0x3dc9b3(0x201))return Reflect[_0x3dc9b3(0x1ad)](_0x5cbef4,_0x3f4b8c);},__param=this&&this[_0x5a3296(0x1fe)]||function(_0x495e32,_0xf09d4d){return function(_0x5b5be4,_0x138743){_0xf09d4d(_0x5b5be4,_0x138743,_0x495e32);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['OfficialController']=void 0x0;const common_1=require('@nestjs/common'),swagger_1=require(_0x5a3296(0x1cd)),jwtAuth_guard_1=require(_0x5a3296(0x209)),official_service_1=require(_0x5a3296(0x1b3)),axios_1=require(_0x5a3296(0x20d)),getQrCode_dto_1=require(_0x5a3296(0x1f6)),getQrSceneStr_dto_1=require(_0x5a3296(0x206)),Login_vo_1=require('./vo/Login.vo');let OfficialController=class OfficialController{constructor(_0x394b8a){const _0x439baf=_0x5a3296;this[_0x439baf(0x214)]=_0x394b8a;}async['notify'](_0x465ed1,_0x52b228,_0x15bf95){const _0x46efa6=_0x5a3296;console[_0x46efa6(0x1e3)](_0x46efa6(0x1ff),_0x52b228,_0x15bf95);const _0x176ffa=await this[_0x46efa6(0x214)][_0x46efa6(0x1f7)](_0x52b228[_0x46efa6(0x1c8)],_0x52b228['nonce'],_0x52b228['timestamp']);return _0x176ffa?_0x52b228[_0x46efa6(0x1a7)]:'';}async[_0x5a3296(0x20f)](_0x56e955,_0x1a5fdd,_0x18f63b,_0x208a1c){const _0x21247c=_0x5a3296,{xml:_0x196a96}=_0x18f63b;console[_0x21247c(0x1e3)](_0x21247c(0x1f0),_0x196a96);const _0xb41af4=process[_0x21247c(0x1d9)]['GOMAXAI_HOST'];_0xb41af4===_0x21247c(0x1ac)&&((0x0,axios_1[_0x21247c(0x1b2)])({'url':_0x21247c(0x1ba),'data':_0x18f63b,'method':_0x21247c(0x1aa),'headers':{'Content-Type':'application/json'}})[_0x21247c(0x1e8)](_0x1e43e9=>{const _0x3c83c5=_0x21247c;console[_0x3c83c5(0x1b7)](_0x3c83c5(0x1fb));}),(0x0,axios_1[_0x21247c(0x1b2)])({'url':_0x21247c(0x1f8),'data':_0x18f63b,'method':_0x21247c(0x1aa),'headers':{'Content-Type':_0x21247c(0x20b)}})[_0x21247c(0x1e8)](_0x2f09e0=>{const _0x3af1f3=_0x21247c;console[_0x3af1f3(0x1b7)](_0x3af1f3(0x1bb));}),(0x0,axios_1[_0x21247c(0x1b2)])({'url':'https://saas.qumao518.vip/api/official/notify','data':_0x18f63b,'method':_0x21247c(0x1aa),'headers':{'Content-Type':_0x21247c(0x20b)}})[_0x21247c(0x1e8)](_0x27691d=>{const _0x31ac87=_0x21247c;console[_0x31ac87(0x1b7)](_0x31ac87(0x1ef));}));if(_0x196a96[_0x21247c(0x1da)][0x0]=='event'){if(_0x196a96[_0x21247c(0x1c5)][0x0]==_0x21247c(0x1b6)||_0x196a96[_0x21247c(0x1c5)][0x0]==_0x21247c(0x1e9))return _0x208a1c['status'](0xc8)[_0x21247c(0x1ca)]('');if(_0x196a96['event'][0x0]==_0x21247c(0x1de)){console[_0x21247c(0x1e3)]('--------------------------扫码----------',_0x196a96);const _0x40a35f=_0x196a96['eventkey'][0x0];if(_0x40a35f['includes']('/')){this[_0x21247c(0x214)][_0x21247c(0x1fa)](_0x196a96[_0x21247c(0x1eb)][0x0],_0x40a35f);const _0x477e44=await this[_0x21247c(0x214)][_0x21247c(0x1af)](_0x196a96,_0x21247c(0x20c));return _0x208a1c[_0x21247c(0x203)](0xc8)[_0x21247c(0x1ca)](_0x477e44);}this[_0x21247c(0x214)]['scan'](_0x196a96[_0x21247c(0x1eb)][0x0],_0x40a35f);const _0x521338=await this['officialService'][_0x21247c(0x1af)](_0x196a96,'officialScanLoginText');return _0x208a1c[_0x21247c(0x203)](0xc8)[_0x21247c(0x1ca)](_0x521338);}if(_0x196a96['event'][0x0]==_0x21247c(0x1d0)){console[_0x21247c(0x1e3)]('订阅',_0x196a96[_0x21247c(0x202)][0x0]);const _0x473c6f=_0x196a96[_0x21247c(0x202)][0x0]['split'](_0x21247c(0x1c1))[0x1];console[_0x21247c(0x1e3)]('sceneStr:\x20',_0x473c6f);if(!_0x473c6f){const _0x140db2=await this[_0x21247c(0x214)]['genXmlMsgByConfig'](_0x196a96,_0x21247c(0x1a3));return _0x208a1c[_0x21247c(0x203)](0xc8)['send'](_0x140db2);}if(_0x473c6f[_0x21247c(0x1b5)]('/')){this[_0x21247c(0x214)]['scanBindWx'](_0x196a96[_0x21247c(0x1eb)][0x0],_0x473c6f);const _0x843193=await this[_0x21247c(0x214)][_0x21247c(0x1af)](_0x196a96,_0x21247c(0x20c));return _0x208a1c['status'](0xc8)[_0x21247c(0x1ca)](_0x843193);}this['officialService'][_0x21247c(0x1c3)](_0x196a96[_0x21247c(0x1eb)][0x0],_0x473c6f);const _0x56652f=await this['officialService'][_0x21247c(0x1af)](_0x196a96,_0x21247c(0x1a3));return _0x208a1c['status'](0xc8)['send'](_0x56652f);}if(_0x196a96[_0x21247c(0x1c5)][0x0]==_0x21247c(0x1e7))return _0x208a1c['status'](0xc8)[_0x21247c(0x1ca)]('');}if(_0x196a96[_0x21247c(0x1da)][0x0]==_0x21247c(0x1f4)){console[_0x21247c(0x1e3)](_0x21247c(0x1b8));const _0xe1d550=await this[_0x21247c(0x214)][_0x21247c(0x1cc)](_0x196a96[_0x21247c(0x1e5)][0x0]),_0x40d839=await this['officialService'][_0x21247c(0x1a8)](_0x196a96,_0xe1d550);return _0x208a1c[_0x21247c(0x203)](0xc8)[_0x21247c(0x1ca)](_0x40d839);}return _0x21247c(0x20a);}async[_0x5a3296(0x1df)](_0x17be44){const _0x138d23=_0x5a3296;return this[_0x138d23(0x214)][_0x138d23(0x1df)](_0x17be44);}async[_0x5a3296(0x207)](_0x260b84){const _0xafae7e=_0x5a3296;return this[_0xafae7e(0x214)][_0xafae7e(0x207)](_0x260b84);}async[_0x5a3296(0x1c7)](_0x31afdc){const _0x3166fa=_0x5a3296,_0x424dfb=await this['officialService'][_0x3166fa(0x1cf)](_0x31afdc['sceneStr']);return common_1[_0x3166fa(0x1c6)]['log'](_0x424dfb,_0x3166fa(0x1fc)),_0x3166fa(0x1b1)+encodeURIComponent(_0x424dfb);}async[_0x5a3296(0x1ed)](_0x49f268,_0x30f23e){const _0x5abc3c=_0x5a3296;return this[_0x5abc3c(0x214)][_0x5abc3c(0x1ed)](_0x49f268,_0x30f23e['sceneStr']);}async[_0x5a3296(0x1ab)](_0x5f2a36,_0x41f610){const _0x56a4a5=_0x5a3296;return this[_0x56a4a5(0x214)][_0x56a4a5(0x1ab)](_0x5f2a36,_0x41f610[_0x56a4a5(0x1d2)]);}async['getRedirectUrl'](_0xc42d0c){const _0x4ee7d0=_0x5a3296;return this[_0x4ee7d0(0x214)][_0x4ee7d0(0x1a4)](_0xc42d0c[_0x4ee7d0(0x1f9)]);}async[_0x5a3296(0x204)](_0x56555f){const _0x13195a=_0x5a3296;return this[_0x13195a(0x214)][_0x13195a(0x204)](_0x56555f[_0x13195a(0x1f9)]);}async[_0x5a3296(0x211)](_0x16c07f,_0x6e4895){const _0xf77139=_0x5a3296;return this[_0xf77139(0x214)][_0xf77139(0x211)](_0x16c07f,_0x6e4895[_0xf77139(0x1bd)]);}async['getAccessToken'](_0x2165d2,_0x20b9a8){const _0x47a704=_0x5a3296;return this[_0x47a704(0x214)]['getAccessToken'](_0x2165d2,_0x20b9a8);}};__decorate([(0x0,common_1[_0x5a3296(0x1b9)])('notify'),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':_0x5a3296(0x1c0)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x5a3296(0x1a9)])()),__param(0x2,(0x0,common_1[_0x5a3296(0x1ee)])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object,Object,Object]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController['prototype'],_0x5a3296(0x210),null),__decorate([(0x0,common_1[_0x5a3296(0x1ae)])(_0x5a3296(0x210)),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':_0x5a3296(0x1d7)}),__param(0x0,(0x0,common_1[_0x5a3296(0x1a5)])()),__param(0x1,(0x0,common_1[_0x5a3296(0x1a9)])()),__param(0x2,(0x0,common_1[_0x5a3296(0x1ee)])()),__param(0x3,(0x0,common_1[_0x5a3296(0x1ce)])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object,Object,Object,Object]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController[_0x5a3296(0x1d8)],_0x5a3296(0x20f),null),__decorate([(0x0,common_1[_0x5a3296(0x1ae)])('getQRSceneStr'),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':_0x5a3296(0x1e2)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[getQrSceneStr_dto_1[_0x5a3296(0x212)]]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController['prototype'],_0x5a3296(0x1df),null),__decorate([(0x0,common_1[_0x5a3296(0x1ae)])(_0x5a3296(0x207)),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':_0x5a3296(0x1c2)}),(0x0,common_1[_0x5a3296(0x1cb)])(jwtAuth_guard_1[_0x5a3296(0x1d3)]),__param(0x0,(0x0,common_1[_0x5a3296(0x1a5)])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController['prototype'],'getQRSceneStrByBind',null),__decorate([(0x0,common_1[_0x5a3296(0x1b9)])(_0x5a3296(0x1c7)),(0x0,swagger_1['ApiOperation'])({'summary':_0x5a3296(0x1ec)}),__param(0x0,(0x0,common_1[_0x5a3296(0x1a9)])()),__metadata(_0x5a3296(0x1b0),Function),__metadata('design:paramtypes',[getQrCode_dto_1[_0x5a3296(0x215)]]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController[_0x5a3296(0x1d8)],_0x5a3296(0x1c7),null),__decorate([(0x0,common_1[_0x5a3296(0x1ae)])(_0x5a3296(0x1ed)),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':'扫码登录轮询查询'}),__param(0x0,(0x0,common_1[_0x5a3296(0x1a5)])()),__param(0x1,(0x0,common_1[_0x5a3296(0x1ee)])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController['prototype'],_0x5a3296(0x1ed),null),__decorate([(0x0,common_1[_0x5a3296(0x1ae)])(_0x5a3296(0x1ab)),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':_0x5a3296(0x1d4)}),(0x0,common_1[_0x5a3296(0x1cb)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x5a3296(0x1ee)])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x5a3296(0x1ab),null),__decorate([(0x0,common_1[_0x5a3296(0x1ae)])(_0x5a3296(0x1a4)),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':_0x5a3296(0x1d1)}),__param(0x0,(0x0,common_1[_0x5a3296(0x1ee)])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController[_0x5a3296(0x1d8)],'getRedirectUrl',null),__decorate([(0x0,common_1['Post'])(_0x5a3296(0x204)),(0x0,swagger_1[_0x5a3296(0x1dd)])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1[_0x5a3296(0x1ee)])()),__metadata('design:type',Function),__metadata(_0x5a3296(0x1e1),[Object]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController[_0x5a3296(0x1d8)],_0x5a3296(0x204),null),__decorate([(0x0,common_1[_0x5a3296(0x1ae)])(_0x5a3296(0x211)),(0x0,swagger_1['ApiOperation'])({'summary':_0x5a3296(0x1e4)}),(0x0,swagger_1[_0x5a3296(0x1bf)])({'type':Login_vo_1[_0x5a3296(0x1c9)]}),__param(0x0,(0x0,common_1[_0x5a3296(0x1a5)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object,Object]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController[_0x5a3296(0x1d8)],_0x5a3296(0x211),null),__decorate([(0x0,common_1[_0x5a3296(0x1b9)])('getAccessToken'),__param(0x0,(0x0,common_1[_0x5a3296(0x1a5)])()),__param(0x1,(0x0,common_1['Query'])(_0x5a3296(0x200))),__metadata(_0x5a3296(0x1b0),Function),__metadata(_0x5a3296(0x1e1),[Object,String]),__metadata(_0x5a3296(0x1f1),Promise)],OfficialController[_0x5a3296(0x1d8)],'getAccessToken',null),OfficialController=__decorate([(0x0,swagger_1[_0x5a3296(0x1a6)])(_0x5a3296(0x1d5)),(0x0,common_1[_0x5a3296(0x208)])(_0x5a3296(0x1d5)),__metadata(_0x5a3296(0x1e1),[official_service_1['OfficialService']])],OfficialController),exports[_0x5a3296(0x1f5)]=OfficialController;