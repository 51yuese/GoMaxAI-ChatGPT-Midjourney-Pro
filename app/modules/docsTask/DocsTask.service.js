'use strict';const _0x13b238=_0x19c5;(function(_0x26cfce,_0x2fa02d){const _0x36dc52=_0x19c5,_0x46d5c8=_0x26cfce();while(!![]){try{const _0x2a86b7=-parseInt(_0x36dc52(0x168))/0x1+parseInt(_0x36dc52(0x169))/0x2+-parseInt(_0x36dc52(0x17f))/0x3+-parseInt(_0x36dc52(0x189))/0x4+parseInt(_0x36dc52(0x166))/0x5*(-parseInt(_0x36dc52(0x179))/0x6)+parseInt(_0x36dc52(0x16b))/0x7+parseInt(_0x36dc52(0x158))/0x8*(parseInt(_0x36dc52(0x176))/0x9);if(_0x2a86b7===_0x2fa02d)break;else _0x46d5c8['push'](_0x46d5c8['shift']());}catch(_0x97547b){_0x46d5c8['push'](_0x46d5c8['shift']());}}}(_0x53db,0xd9042));var __decorate=this&&this[_0x13b238(0x173)]||function(_0x4a95aa,_0xfe2bcc,_0x1c0113,_0x3a84c2){const _0x2f50f4=_0x13b238;var _0x394109=arguments[_0x2f50f4(0x16d)],_0x28bc71=_0x394109<0x3?_0xfe2bcc:_0x3a84c2===null?_0x3a84c2=Object['getOwnPropertyDescriptor'](_0xfe2bcc,_0x1c0113):_0x3a84c2,_0x494b90;if(typeof Reflect===_0x2f50f4(0x15a)&&typeof Reflect['decorate']===_0x2f50f4(0x183))_0x28bc71=Reflect[_0x2f50f4(0x171)](_0x4a95aa,_0xfe2bcc,_0x1c0113,_0x3a84c2);else{for(var _0x15abec=_0x4a95aa[_0x2f50f4(0x16d)]-0x1;_0x15abec>=0x0;_0x15abec--)if(_0x494b90=_0x4a95aa[_0x15abec])_0x28bc71=(_0x394109<0x3?_0x494b90(_0x28bc71):_0x394109>0x3?_0x494b90(_0xfe2bcc,_0x1c0113,_0x28bc71):_0x494b90(_0xfe2bcc,_0x1c0113))||_0x28bc71;}return _0x394109>0x3&&_0x28bc71&&Object[_0x2f50f4(0x16a)](_0xfe2bcc,_0x1c0113,_0x28bc71),_0x28bc71;},__metadata=this&&this[_0x13b238(0x188)]||function(_0x372ddb,_0x13fbfc){const _0x1555ec=_0x13b238;if(typeof Reflect===_0x1555ec(0x15a)&&typeof Reflect[_0x1555ec(0x164)]==='function')return Reflect['metadata'](_0x372ddb,_0x13fbfc);},__param=this&&this[_0x13b238(0x157)]||function(_0x420b76,_0x197def){return function(_0x239017,_0x30f76d){_0x197def(_0x239017,_0x30f76d,_0x420b76);};};Object[_0x13b238(0x16a)](exports,_0x13b238(0x15d),{'value':!![]}),exports[_0x13b238(0x15c)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x13b238(0x17b)),typeorm_2=require(_0x13b238(0x17c)),docsTask_entity_1=require('./entity/docsTask.entity'),nestjs_cls_1=require(_0x13b238(0x16c)),utils_1=require(_0x13b238(0x17e));function _0x53db(){const _0x1b8268=['__param','304jtsKjs','HttpStatus','object','docsTaskEntity','DocsTaskService','__esModule','getList','Injectable','findAndCount','save','InjectRepository','find','metadata','deleteFlag','205ChxtYM','ClsService','1460589KBXkbq','1540464iTXmTs','defineProperty','9689708bVPVDV','nestjs-cls','length','getPage','assign','clsService','decorate','design:paramtypes','__decorate','getReqSaasId','saasId','594369rPEraB','文档不存在','saveDocsTask','66072HAycVt','Repository','@nestjs/typeorm','typeorm','content','../../common/utils','2747265NQdmlN','topDocs','userId','name','function','DESC','BAD_REQUEST','HttpException','findOne','__metadata','3789200Wmlflw','user','delDocsTask'];_0x53db=function(){return _0x1b8268;};return _0x53db();}let DocsTaskService=class DocsTaskService{constructor(_0x51ee0a,_0x2c5b50){const _0x1e4235=_0x13b238;this[_0x1e4235(0x15b)]=_0x51ee0a,this[_0x1e4235(0x170)]=_0x2c5b50;}async['getDocsTask']({id:_0x35d1d9,userId:_0xb82778}){const _0xb69583=_0x13b238,_0x4c250f=await this[_0xb69583(0x15b)][_0xb69583(0x187)]({'where':{'id':_0x35d1d9,'userId':_0xb82778}});return _0x4c250f;}async[_0x13b238(0x18b)]({id:_0x4f26ad,userId:_0xc33ed2}){const _0x568ac6=_0x13b238,_0x4252e8=await this[_0x568ac6(0x15b)][_0x568ac6(0x187)]({'where':{'id':_0x4f26ad,'userId':_0xc33ed2}});_0x4252e8&&(_0x4252e8[_0x568ac6(0x165)]=0x1,await this[_0x568ac6(0x15b)][_0x568ac6(0x161)](_0x4252e8));}async[_0x13b238(0x180)](_0x59a2e3,_0x5e47fd,_0x36ecd6){const _0xde8a81=_0x13b238;_0x5e47fd==0x1?_0x5e47fd=0x1:_0x5e47fd=0x0;const _0x4ee8ea=await this[_0xde8a81(0x15b)][_0xde8a81(0x187)]({'where':{'id':_0x59a2e3,'isTop':_0x5e47fd,'userId':_0x36ecd6[_0xde8a81(0x18a)]['id']}});_0x4ee8ea&&(_0x4ee8ea['isTop']=0x1,await this[_0xde8a81(0x15b)][_0xde8a81(0x161)](_0x4ee8ea));}async[_0x13b238(0x178)](_0x426c54,_0x12640e){const _0x553cb1=_0x13b238;let _0x3e5513={'userId':_0x12640e['user']['id']};_0x426c54[_0x553cb1(0x182)]&&(_0x3e5513[_0x553cb1(0x182)]=_0x426c54[_0x553cb1(0x182)]);_0x426c54[_0x553cb1(0x17d)]&&(_0x3e5513[_0x553cb1(0x17d)]=_0x426c54[_0x553cb1(0x17d)]);if(!_0x426c54['id'])return await this['docsTaskEntity'][_0x553cb1(0x161)](_0x3e5513);const _0x24ff24=await this[_0x553cb1(0x15b)][_0x553cb1(0x187)]({'where':{'id':_0x426c54['id']}});if(_0x24ff24[_0x553cb1(0x181)]!=_0x12640e[_0x553cb1(0x18a)]['id'])throw new common_1[(_0x553cb1(0x186))](_0x553cb1(0x177),common_1[_0x553cb1(0x159)][_0x553cb1(0x185)]);return _0x24ff24&&(_0x3e5513=Object[_0x553cb1(0x16f)](_0x24ff24,_0x3e5513)),await this['docsTaskEntity'][_0x553cb1(0x161)](_0x3e5513);}async[_0x13b238(0x16e)](_0x2b86eb,_0x263b97){const _0x1526bd=_0x13b238,_0x51e377=(0x0,utils_1[_0x1526bd(0x174)])(this['clsService']),{page:page=0x1,size:size=0xa}=_0x2b86eb,_0x4f077b={};_0x4f077b[_0x1526bd(0x175)]=_0x51e377,_0x4f077b[_0x1526bd(0x165)]=0x0,_0x4f077b[_0x1526bd(0x181)]=_0x263b97['user']['id'];const [_0x23b110,_0x2e9788]=await this[_0x1526bd(0x15b)][_0x1526bd(0x160)]({'where':_0x4f077b,'take':size,'skip':(page-0x1)*size,'order':{'isTop':'DESC','updatedAt':'DESC'}});return{'rows':_0x23b110,'count':_0x2e9788};}async[_0x13b238(0x15e)](_0x574d1f){const _0x4c2f98=_0x13b238,_0x26f4aa=(0x0,utils_1[_0x4c2f98(0x174)])(this[_0x4c2f98(0x170)]),_0x426855={};_0x426855[_0x4c2f98(0x175)]=_0x26f4aa,_0x426855[_0x4c2f98(0x165)]=0x0,_0x426855[_0x4c2f98(0x181)]=_0x574d1f[_0x4c2f98(0x18a)]['id'];const _0x15aabd=await this[_0x4c2f98(0x15b)][_0x4c2f98(0x163)]({'where':_0x426855,'order':{'isTop':_0x4c2f98(0x184),'updatedAt':_0x4c2f98(0x184)}});return _0x15aabd;}};function _0x19c5(_0x5d1307,_0x51dada){const _0x53dbfa=_0x53db();return _0x19c5=function(_0x19c56d,_0x4bb293){_0x19c56d=_0x19c56d-0x157;let _0x2f2a08=_0x53dbfa[_0x19c56d];return _0x2f2a08;},_0x19c5(_0x5d1307,_0x51dada);}DocsTaskService=__decorate([(0x0,common_1[_0x13b238(0x15f)])(),__param(0x0,(0x0,typeorm_1[_0x13b238(0x162)])(docsTask_entity_1['DocsTaskEntity'])),__metadata(_0x13b238(0x172),[typeorm_2[_0x13b238(0x17a)],nestjs_cls_1[_0x13b238(0x167)]])],DocsTaskService),exports[_0x13b238(0x15c)]=DocsTaskService;