'use strict';const _0x5b2250=_0x1871;(function(_0x173adf,_0x4e1846){const _0x3c5261=_0x1871,_0x453979=_0x173adf();while(!![]){try{const _0x16a6b3=-parseInt(_0x3c5261(0x95))/0x1*(parseInt(_0x3c5261(0x8a))/0x2)+-parseInt(_0x3c5261(0xb1))/0x3*(-parseInt(_0x3c5261(0x83))/0x4)+parseInt(_0x3c5261(0xac))/0x5*(-parseInt(_0x3c5261(0x91))/0x6)+-parseInt(_0x3c5261(0x8b))/0x7+-parseInt(_0x3c5261(0x9c))/0x8*(-parseInt(_0x3c5261(0xa1))/0x9)+parseInt(_0x3c5261(0xaf))/0xa+parseInt(_0x3c5261(0xb0))/0xb*(parseInt(_0x3c5261(0x8c))/0xc);if(_0x16a6b3===_0x4e1846)break;else _0x453979['push'](_0x453979['shift']());}catch(_0x5816a5){_0x453979['push'](_0x453979['shift']());}}}(_0x1625,0xc210e));function _0x1871(_0x2c4480,_0x1bb66e){const _0x1625c4=_0x1625();return _0x1871=function(_0x1871ab,_0x6890bb){_0x1871ab=_0x1871ab-0x82;let _0x39f452=_0x1625c4[_0x1871ab];return _0x39f452;},_0x1871(_0x2c4480,_0x1bb66e);}var __decorate=this&&this['__decorate']||function(_0x38c41c,_0x4924f1,_0x7452e0,_0x468625){const _0x562699=_0x1871;var _0x2862b6=arguments[_0x562699(0x93)],_0x23936a=_0x2862b6<0x3?_0x4924f1:_0x468625===null?_0x468625=Object[_0x562699(0xb3)](_0x4924f1,_0x7452e0):_0x468625,_0x209ae5;if(typeof Reflect==='object'&&typeof Reflect[_0x562699(0xb5)]==='function')_0x23936a=Reflect['decorate'](_0x38c41c,_0x4924f1,_0x7452e0,_0x468625);else{for(var _0xa42dbe=_0x38c41c[_0x562699(0x93)]-0x1;_0xa42dbe>=0x0;_0xa42dbe--)if(_0x209ae5=_0x38c41c[_0xa42dbe])_0x23936a=(_0x2862b6<0x3?_0x209ae5(_0x23936a):_0x2862b6>0x3?_0x209ae5(_0x4924f1,_0x7452e0,_0x23936a):_0x209ae5(_0x4924f1,_0x7452e0))||_0x23936a;}return _0x2862b6>0x3&&_0x23936a&&Object[_0x562699(0xb4)](_0x4924f1,_0x7452e0,_0x23936a),_0x23936a;},__metadata=this&&this[_0x5b2250(0x88)]||function(_0x440614,_0x501f54){const _0x8f0a7b=_0x5b2250;if(typeof Reflect===_0x8f0a7b(0xa2)&&typeof Reflect[_0x8f0a7b(0xa6)]===_0x8f0a7b(0x87))return Reflect[_0x8f0a7b(0xa6)](_0x440614,_0x501f54);},__param=this&&this[_0x5b2250(0xa3)]||function(_0x15dfa4,_0x4ae9d7){return function(_0x3d6cf7,_0x21b05f){_0x4ae9d7(_0x3d6cf7,_0x21b05f,_0x15dfa4);};};Object[_0x5b2250(0xb4)](exports,_0x5b2250(0xaa),{'value':!![]}),exports[_0x5b2250(0x98)]=void 0x0;const common_1=require(_0x5b2250(0x8f)),typeorm_1=require(_0x5b2250(0xa7)),typeorm_2=require(_0x5b2250(0x9f)),docsTask_entity_1=require(_0x5b2250(0x9e)),nestjs_cls_1=require(_0x5b2250(0x99)),utils_1=require('../../common/utils');let DocsTaskService=class DocsTaskService{constructor(_0x4f63bf,_0x9ac093){const _0x3f1917=_0x5b2250;this[_0x3f1917(0xa8)]=_0x4f63bf,this['clsService']=_0x9ac093;}async[_0x5b2250(0x9b)]({id:_0x3c8286,userId:_0x3fb787}){const _0x277fa8=_0x5b2250,_0x26fc89=await this[_0x277fa8(0xa8)][_0x277fa8(0x84)]({'where':{'id':_0x3c8286,'userId':_0x3fb787}});return _0x26fc89;}async[_0x5b2250(0x94)]({id:_0x5783f4,userId:_0x2643f1}){const _0x5d066c=_0x5b2250,_0x179bf8=await this[_0x5d066c(0xa8)][_0x5d066c(0x84)]({'where':{'id':_0x5783f4,'userId':_0x2643f1}});_0x179bf8&&(_0x179bf8[_0x5d066c(0xa4)]=0x1,await this[_0x5d066c(0xa8)][_0x5d066c(0xb2)](_0x179bf8));}async[_0x5b2250(0xab)](_0x5d0ba5,_0x1efb38){const _0x622e12=_0x5b2250;let _0x76bda9={'userId':_0x1efb38[_0x622e12(0x92)]['id']};_0x5d0ba5['name']&&(_0x76bda9[_0x622e12(0x97)]=_0x5d0ba5[_0x622e12(0x97)]);_0x5d0ba5['content']&&(_0x76bda9['content']=_0x5d0ba5['content']);if(!_0x5d0ba5['id'])return await this[_0x622e12(0xa8)][_0x622e12(0xb2)](_0x76bda9);const _0x51e4bd=await this[_0x622e12(0xa8)][_0x622e12(0x84)]({'where':{'id':_0x5d0ba5['id']}});if(_0x51e4bd[_0x622e12(0x90)]!=_0x1efb38[_0x622e12(0x92)]['id'])throw new common_1[(_0x622e12(0x8d))]('文档不存在',common_1[_0x622e12(0xae)]['BAD_REQUEST']);return _0x51e4bd&&(_0x76bda9=Object[_0x622e12(0xa5)](_0x51e4bd,_0x76bda9)),await this[_0x622e12(0xa8)][_0x622e12(0xb2)](_0x76bda9);}async[_0x5b2250(0xa0)](_0x4cb26b,_0xe26f20){const _0x32ab7c=_0x5b2250,_0x1d3b0e=(0x0,utils_1['getReqSaasId'])(this['clsService']),{page:page=0x1,size:size=0xa}=_0x4cb26b,_0xd96207={};_0xd96207[_0x32ab7c(0x82)]=_0x1d3b0e,_0xd96207['deleteFlag']=0x0,_0xd96207['userId']=_0xe26f20[_0x32ab7c(0x92)]['id'];const [_0x4b4c4c,_0x20f497]=await this['docsTaskEntity'][_0x32ab7c(0x9a)]({'where':_0xd96207,'take':size,'skip':(page-0x1)*size,'order':{'updatedAt':'DESC'}});return{'rows':_0x4b4c4c,'count':_0x20f497};}async['getList'](_0x49902c){const _0x70834d=_0x5b2250,_0xa41471=(0x0,utils_1[_0x70834d(0x96)])(this[_0x70834d(0x9d)]),_0x330fe7={};_0x330fe7[_0x70834d(0x82)]=_0xa41471,_0x330fe7[_0x70834d(0xa4)]=0x0,_0x330fe7['userId']=_0x49902c[_0x70834d(0x92)]['id'];const _0x48cdaf=await this[_0x70834d(0xa8)][_0x70834d(0x85)]({'where':_0x330fe7,'order':{'updatedAt':_0x70834d(0x86)}});return _0x48cdaf;}};DocsTaskService=__decorate([(0x0,common_1[_0x5b2250(0xa9)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(docsTask_entity_1['DocsTaskEntity'])),__metadata(_0x5b2250(0xad),[typeorm_2[_0x5b2250(0x8e)],nestjs_cls_1[_0x5b2250(0x89)]])],DocsTaskService),exports[_0x5b2250(0x98)]=DocsTaskService;function _0x1625(){const _0x1903cc=['getPage','25227jdjxFA','object','__param','deleteFlag','assign','metadata','@nestjs/typeorm','docsTaskEntity','Injectable','__esModule','saveDocsTask','10iInybW','design:paramtypes','HttpStatus','8049460CRWphN','33Wewhkn','1788735SNDTCt','save','getOwnPropertyDescriptor','defineProperty','decorate','saasId','4jMjLGS','findOne','find','DESC','function','__metadata','ClsService','8878fPgpPW','590184obhCyv','2290956lEHeoR','HttpException','Repository','@nestjs/common','userId','3143994LHaCDc','user','length','delDocsTask','265FAnhWd','getReqSaasId','name','DocsTaskService','nestjs-cls','findAndCount','getDocsTask','3224LAkMjV','clsService','./entity/docsTask.entity','typeorm'];_0x1625=function(){return _0x1903cc;};return _0x1625();}