'use strict';const _0x2b694c=_0x1bbd;(function(_0x35491e,_0x2a335f){const _0x1a1687=_0x1bbd,_0x31b93c=_0x35491e();while(!![]){try{const _0x192861=-parseInt(_0x1a1687(0x186))/0x1+parseInt(_0x1a1687(0x1ae))/0x2+parseInt(_0x1a1687(0x192))/0x3*(parseInt(_0x1a1687(0x1a4))/0x4)+parseInt(_0x1a1687(0x19c))/0x5*(parseInt(_0x1a1687(0x1a5))/0x6)+parseInt(_0x1a1687(0x198))/0x7+-parseInt(_0x1a1687(0x197))/0x8+-parseInt(_0x1a1687(0x18d))/0x9;if(_0x192861===_0x2a335f)break;else _0x31b93c['push'](_0x31b93c['shift']());}catch(_0x203d5d){_0x31b93c['push'](_0x31b93c['shift']());}}}(_0x19a1,0xa6a35));function _0x19a1(){const _0x12378c=['BAD_REQUEST','getOwnPropertyDescriptor','defineProperty','object','417965pjaULb','clsService','delDocsTask','文档不存在','save','getPage','decorate','9571320SPKwAd','Injectable','../../common/utils','getReqSaasId','HttpStatus','56622rQjyGI','userId','find','user','assign','6454744QwyfwA','5897864QQrMhM','__esModule','findOne','@nestjs/common','5SKVTZk','nestjs-cls','InjectRepository','isTop','__decorate','topDocs','Repository','design:paramtypes','8HwpeTu','7955214GYpEtq','__param','saasId','saveDocsTask','name','deleteFlag','metadata','docsTaskEntity','DESC','1529336UAZFyN','getList','function','ClsService','@nestjs/typeorm','./entity/docsTask.entity','content','HttpException','typeorm','DocsTaskService'];_0x19a1=function(){return _0x12378c;};return _0x19a1();}function _0x1bbd(_0x2998b8,_0x4404de){const _0x19a11e=_0x19a1();return _0x1bbd=function(_0x1bbdcd,_0x2e4edf){_0x1bbdcd=_0x1bbdcd-0x182;let _0x345ebe=_0x19a11e[_0x1bbdcd];return _0x345ebe;},_0x1bbd(_0x2998b8,_0x4404de);}var __decorate=this&&this[_0x2b694c(0x1a0)]||function(_0x597ef7,_0x28b242,_0x126f5b,_0x4cb0c1){const _0x13424f=_0x2b694c;var _0x17f4f2=arguments['length'],_0x5c0101=_0x17f4f2<0x3?_0x28b242:_0x4cb0c1===null?_0x4cb0c1=Object[_0x13424f(0x183)](_0x28b242,_0x126f5b):_0x4cb0c1,_0x295542;if(typeof Reflect===_0x13424f(0x185)&&typeof Reflect[_0x13424f(0x18c)]===_0x13424f(0x1b0))_0x5c0101=Reflect[_0x13424f(0x18c)](_0x597ef7,_0x28b242,_0x126f5b,_0x4cb0c1);else{for(var _0x1ba203=_0x597ef7['length']-0x1;_0x1ba203>=0x0;_0x1ba203--)if(_0x295542=_0x597ef7[_0x1ba203])_0x5c0101=(_0x17f4f2<0x3?_0x295542(_0x5c0101):_0x17f4f2>0x3?_0x295542(_0x28b242,_0x126f5b,_0x5c0101):_0x295542(_0x28b242,_0x126f5b))||_0x5c0101;}return _0x17f4f2>0x3&&_0x5c0101&&Object[_0x13424f(0x184)](_0x28b242,_0x126f5b,_0x5c0101),_0x5c0101;},__metadata=this&&this['__metadata']||function(_0x51a986,_0x490a68){const _0x1ba723=_0x2b694c;if(typeof Reflect===_0x1ba723(0x185)&&typeof Reflect[_0x1ba723(0x1ab)]==='function')return Reflect[_0x1ba723(0x1ab)](_0x51a986,_0x490a68);},__param=this&&this[_0x2b694c(0x1a6)]||function(_0x5a3f0f,_0x48d8ca){return function(_0x160f86,_0x44b006){_0x48d8ca(_0x160f86,_0x44b006,_0x5a3f0f);};};Object['defineProperty'](exports,_0x2b694c(0x199),{'value':!![]}),exports[_0x2b694c(0x1b7)]=void 0x0;const common_1=require(_0x2b694c(0x19b)),typeorm_1=require(_0x2b694c(0x1b2)),typeorm_2=require(_0x2b694c(0x1b6)),docsTask_entity_1=require(_0x2b694c(0x1b3)),nestjs_cls_1=require(_0x2b694c(0x19d)),utils_1=require(_0x2b694c(0x18f));let DocsTaskService=class DocsTaskService{constructor(_0x54f39c,_0x4a7d76){const _0x7360=_0x2b694c;this[_0x7360(0x1ac)]=_0x54f39c,this[_0x7360(0x187)]=_0x4a7d76;}async['getDocsTask']({id:_0x30b1f4,userId:_0x46891a}){const _0xd03a0b=_0x2b694c,_0x2d94a5=await this[_0xd03a0b(0x1ac)]['findOne']({'where':{'id':_0x30b1f4,'userId':_0x46891a}});return _0x2d94a5;}async[_0x2b694c(0x188)]({id:_0x4bf79d,userId:_0x4ba45f}){const _0x375bd3=_0x2b694c,_0x416022=await this[_0x375bd3(0x1ac)][_0x375bd3(0x19a)]({'where':{'id':_0x4bf79d,'userId':_0x4ba45f}});_0x416022&&(_0x416022[_0x375bd3(0x1aa)]=0x1,await this[_0x375bd3(0x1ac)][_0x375bd3(0x18a)](_0x416022));}async[_0x2b694c(0x1a1)](_0xa51f77,_0x4f3a37,_0x5a46e4){const _0x1d29d9=_0x2b694c;_0x4f3a37==0x1?_0x4f3a37=0x1:_0x4f3a37=0x0;const _0x5c8b82=await this[_0x1d29d9(0x1ac)]['findOne']({'where':{'id':_0xa51f77,'isTop':_0x4f3a37,'userId':_0x5a46e4[_0x1d29d9(0x195)]['id']}});_0x5c8b82&&(_0x5c8b82[_0x1d29d9(0x19f)]=0x1,await this[_0x1d29d9(0x1ac)][_0x1d29d9(0x18a)](_0x5c8b82));}async[_0x2b694c(0x1a8)](_0x271a99,_0x5a357f){const _0x2b2a5f=_0x2b694c;let _0x4b1012={'userId':_0x5a357f[_0x2b2a5f(0x195)]['id']};_0x271a99['name']&&(_0x4b1012[_0x2b2a5f(0x1a9)]=_0x271a99['name']);_0x271a99[_0x2b2a5f(0x1b4)]&&(_0x4b1012[_0x2b2a5f(0x1b4)]=_0x271a99['content']);if(!_0x271a99['id'])return await this[_0x2b2a5f(0x1ac)][_0x2b2a5f(0x18a)](_0x4b1012);const _0x38dca8=await this[_0x2b2a5f(0x1ac)][_0x2b2a5f(0x19a)]({'where':{'id':_0x271a99['id']}});if(_0x38dca8[_0x2b2a5f(0x193)]!=_0x5a357f['user']['id'])throw new common_1[(_0x2b2a5f(0x1b5))](_0x2b2a5f(0x189),common_1[_0x2b2a5f(0x191)][_0x2b2a5f(0x182)]);return _0x38dca8&&(_0x4b1012=Object[_0x2b2a5f(0x196)](_0x38dca8,_0x4b1012)),await this['docsTaskEntity'][_0x2b2a5f(0x18a)](_0x4b1012);}async[_0x2b694c(0x18b)](_0x5af8c3,_0x2788ce){const _0x49a5ce=_0x2b694c,_0x5100fe=(0x0,utils_1[_0x49a5ce(0x190)])(this[_0x49a5ce(0x187)]),{page:page=0x1,size:size=0xa}=_0x5af8c3,_0x2e8160={};_0x2e8160[_0x49a5ce(0x1a7)]=_0x5100fe,_0x2e8160[_0x49a5ce(0x1aa)]=0x0,_0x2e8160[_0x49a5ce(0x193)]=_0x2788ce[_0x49a5ce(0x195)]['id'];const [_0x213b22,_0xb7e714]=await this[_0x49a5ce(0x1ac)]['findAndCount']({'where':_0x2e8160,'take':size,'skip':(page-0x1)*size,'order':{'isTop':_0x49a5ce(0x1ad),'updatedAt':_0x49a5ce(0x1ad)}});return{'rows':_0x213b22,'count':_0xb7e714};}async[_0x2b694c(0x1af)](_0x42a680){const _0x3ba967=_0x2b694c,_0x554819=(0x0,utils_1[_0x3ba967(0x190)])(this[_0x3ba967(0x187)]),_0x58f3b3={};_0x58f3b3[_0x3ba967(0x1a7)]=_0x554819,_0x58f3b3['deleteFlag']=0x0,_0x58f3b3[_0x3ba967(0x193)]=_0x42a680[_0x3ba967(0x195)]['id'];const _0x16d2cf=await this[_0x3ba967(0x1ac)][_0x3ba967(0x194)]({'where':_0x58f3b3,'order':{'isTop':'DESC','updatedAt':_0x3ba967(0x1ad)}});return _0x16d2cf;}};DocsTaskService=__decorate([(0x0,common_1[_0x2b694c(0x18e)])(),__param(0x0,(0x0,typeorm_1[_0x2b694c(0x19e)])(docsTask_entity_1['DocsTaskEntity'])),__metadata(_0x2b694c(0x1a3),[typeorm_2[_0x2b694c(0x1a2)],nestjs_cls_1[_0x2b694c(0x1b1)]])],DocsTaskService),exports[_0x2b694c(0x1b7)]=DocsTaskService;