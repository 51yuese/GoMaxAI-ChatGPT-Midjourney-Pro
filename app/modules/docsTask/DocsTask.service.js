'use strict';const _0x308f14=_0x2652;function _0x2652(_0x5cec54,_0x2daef6){const _0xcc4b50=_0xcc4b();return _0x2652=function(_0x26521e,_0x2b5ff6){_0x26521e=_0x26521e-0xe9;let _0x46cd70=_0xcc4b50[_0x26521e];return _0x46cd70;},_0x2652(_0x5cec54,_0x2daef6);}(function(_0x913a33,_0xfc47de){const _0x5350b1=_0x2652,_0x17967c=_0x913a33();while(!![]){try{const _0x423603=-parseInt(_0x5350b1(0x103))/0x1*(-parseInt(_0x5350b1(0x107))/0x2)+parseInt(_0x5350b1(0x111))/0x3+parseInt(_0x5350b1(0xfe))/0x4+parseInt(_0x5350b1(0xf0))/0x5*(-parseInt(_0x5350b1(0x105))/0x6)+-parseInt(_0x5350b1(0xf6))/0x7+-parseInt(_0x5350b1(0xf8))/0x8+parseInt(_0x5350b1(0x11a))/0x9*(parseInt(_0x5350b1(0xeb))/0xa);if(_0x423603===_0xfc47de)break;else _0x17967c['push'](_0x17967c['shift']());}catch(_0x35d7c1){_0x17967c['push'](_0x17967c['shift']());}}}(_0xcc4b,0xafc8a));var __decorate=this&&this[_0x308f14(0xee)]||function(_0x8ba14e,_0x171498,_0x14943d,_0x448df4){const _0x5e6c20=_0x308f14;var _0x5b6ba6=arguments[_0x5e6c20(0x114)],_0x189df4=_0x5b6ba6<0x3?_0x171498:_0x448df4===null?_0x448df4=Object[_0x5e6c20(0x101)](_0x171498,_0x14943d):_0x448df4,_0x5d2ced;if(typeof Reflect===_0x5e6c20(0x112)&&typeof Reflect[_0x5e6c20(0x118)]===_0x5e6c20(0x110))_0x189df4=Reflect[_0x5e6c20(0x118)](_0x8ba14e,_0x171498,_0x14943d,_0x448df4);else{for(var _0x2892b9=_0x8ba14e[_0x5e6c20(0x114)]-0x1;_0x2892b9>=0x0;_0x2892b9--)if(_0x5d2ced=_0x8ba14e[_0x2892b9])_0x189df4=(_0x5b6ba6<0x3?_0x5d2ced(_0x189df4):_0x5b6ba6>0x3?_0x5d2ced(_0x171498,_0x14943d,_0x189df4):_0x5d2ced(_0x171498,_0x14943d))||_0x189df4;}return _0x5b6ba6>0x3&&_0x189df4&&Object['defineProperty'](_0x171498,_0x14943d,_0x189df4),_0x189df4;},__metadata=this&&this[_0x308f14(0x115)]||function(_0x49c223,_0xbf8182){const _0x4f8d93=_0x308f14;if(typeof Reflect==='object'&&typeof Reflect[_0x4f8d93(0xea)]==='function')return Reflect['metadata'](_0x49c223,_0xbf8182);},__param=this&&this['__param']||function(_0x126060,_0x22fce5){return function(_0x286c5a,_0x518d63){_0x22fce5(_0x286c5a,_0x518d63,_0x126060);};};Object[_0x308f14(0x116)](exports,_0x308f14(0xfc),{'value':!![]}),exports['DocsTaskService']=void 0x0;function _0xcc4b(){const _0x3f9f73=['content','__esModule','文档不存在','4839584kOPMoj','docsTaskEntity','getList','getOwnPropertyDescriptor','assign','357211VMZbFX','typeorm','2198634TYcAaK','InjectRepository','2MTsQMl','ClsService','userId','@nestjs/common','Repository','saveDocsTask','save','BAD_REQUEST','findOne','function','2643708vxCJUg','object','design:paramtypes','length','__metadata','defineProperty','saasId','decorate','nestjs-cls','2420433CfmmCN','clsService','metadata','20PcqkVu','./entity/docsTask.entity','HttpStatus','__decorate','@nestjs/typeorm','5xqhYVT','DocsTaskEntity','findAndCount','Injectable','getReqSaasId','../../common/utils','6965735PdPTSZ','name','7237304lvbjhN','deleteFlag','user'];_0xcc4b=function(){return _0x3f9f73;};return _0xcc4b();}const common_1=require(_0x308f14(0x10a)),typeorm_1=require(_0x308f14(0xef)),typeorm_2=require(_0x308f14(0x104)),docsTask_entity_1=require(_0x308f14(0xec)),nestjs_cls_1=require(_0x308f14(0x119)),utils_1=require(_0x308f14(0xf5));let DocsTaskService=class DocsTaskService{constructor(_0x6b65ef,_0x5252c1){const _0x2ef2d2=_0x308f14;this[_0x2ef2d2(0xff)]=_0x6b65ef,this['clsService']=_0x5252c1;}async['getDocsTask']({id:_0x5c67e6,userId:_0x1dbb79}){const _0x279415=_0x308f14,_0x80a69=await this[_0x279415(0xff)][_0x279415(0x10f)]({'where':{'id':_0x5c67e6,'userId':_0x1dbb79}});return _0x80a69;}async['delDocsTask']({id:_0x36b641,userId:_0x5a1138}){const _0x5aa9c2=_0x308f14,_0x35315b=await this[_0x5aa9c2(0xff)][_0x5aa9c2(0x10f)]({'where':{'id':_0x36b641,'userId':_0x5a1138}});_0x35315b&&(_0x35315b[_0x5aa9c2(0xf9)]=0x1,await this[_0x5aa9c2(0xff)]['save'](_0x35315b));}async[_0x308f14(0x10c)](_0x41347e,_0x1c9f20){const _0x122936=_0x308f14;let _0x52398e={'userId':_0x1c9f20[_0x122936(0xfa)]['id']};_0x41347e[_0x122936(0xf7)]&&(_0x52398e[_0x122936(0xf7)]=_0x41347e[_0x122936(0xf7)]);_0x41347e[_0x122936(0xfb)]&&(_0x52398e[_0x122936(0xfb)]=_0x41347e[_0x122936(0xfb)]);if(!_0x41347e['id'])return await this[_0x122936(0xff)][_0x122936(0x10d)](_0x52398e);const _0x282c6e=await this[_0x122936(0xff)][_0x122936(0x10f)]({'where':{'id':_0x41347e['id']}});if(_0x282c6e['userId']!=_0x1c9f20[_0x122936(0xfa)]['id'])throw new common_1['HttpException'](_0x122936(0xfd),common_1[_0x122936(0xed)][_0x122936(0x10e)]);return _0x282c6e&&(_0x52398e=Object[_0x122936(0x102)](_0x282c6e,_0x52398e)),await this['docsTaskEntity']['save'](_0x52398e);}async['getPage'](_0x267f1b,_0x3c8c83){const _0x1c6872=_0x308f14,_0x5ebb27=(0x0,utils_1['getReqSaasId'])(this[_0x1c6872(0xe9)]),{page:page=0x1,size:size=0xa}=_0x267f1b,_0x1671a0={};_0x1671a0[_0x1c6872(0x117)]=_0x5ebb27,_0x1671a0['deleteFlag']=0x0,_0x1671a0[_0x1c6872(0x109)]=_0x3c8c83['user']['id'];const [_0x40ddcd,_0x3a8dbd]=await this[_0x1c6872(0xff)][_0x1c6872(0xf2)]({'where':_0x1671a0,'take':size,'skip':(page-0x1)*size,'order':{'updatedAt':'DESC'}});return{'rows':_0x40ddcd,'count':_0x3a8dbd};}async[_0x308f14(0x100)](_0x1f3487){const _0x59f894=_0x308f14,_0x2d5cc4=(0x0,utils_1[_0x59f894(0xf4)])(this[_0x59f894(0xe9)]),_0x444d43={};_0x444d43['saasId']=_0x2d5cc4,_0x444d43[_0x59f894(0xf9)]=0x0,_0x444d43['userId']=_0x1f3487[_0x59f894(0xfa)]['id'];const _0x576f1e=await this[_0x59f894(0xff)]['find']({'where':_0x444d43,'order':{'updatedAt':'DESC'}});return _0x576f1e;}};DocsTaskService=__decorate([(0x0,common_1[_0x308f14(0xf3)])(),__param(0x0,(0x0,typeorm_1[_0x308f14(0x106)])(docsTask_entity_1[_0x308f14(0xf1)])),__metadata(_0x308f14(0x113),[typeorm_2[_0x308f14(0x10b)],nestjs_cls_1[_0x308f14(0x108)]])],DocsTaskService),exports['DocsTaskService']=DocsTaskService;