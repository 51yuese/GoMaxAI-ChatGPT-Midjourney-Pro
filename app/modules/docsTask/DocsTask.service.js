'use strict';function _0x3e80(){const _0x5dfad0=['userId','getReqSaasId','36903492nulRIN','DESC','Repository','__esModule','user','getOwnPropertyDescriptor','getPage','deleteFlag','length','save','../../common/utils','design:paramtypes','decorate','@nestjs/common','clsService','HttpException','find','3fPXuHG','./entity/docsTask.entity','20imbfyN','DocsTaskService','delDocsTask','24AFOboK','metadata','7870198jpOluF','defineProperty','__decorate','5349260YvocpD','function','BAD_REQUEST','77902jnuGHn','saveDocsTask','35dueLdE','docsTaskEntity','文档不存在','HttpStatus','getDocsTask','DocsTaskEntity','content','typeorm','5971614MdMnyP','385NGlOuc','2980449ejfxkS','__metadata','@nestjs/typeorm','2736OfyoYk','name','findOne','object','InjectRepository','isTop'];_0x3e80=function(){return _0x5dfad0;};return _0x3e80();}const _0xa184a6=_0x2425;(function(_0xbabee0,_0x4969bd){const _0x1465f0=_0x2425,_0x5978c2=_0xbabee0();while(!![]){try{const _0x3066e8=parseInt(_0x1465f0(0x200))/0x1*(parseInt(_0x1465f0(0x1fe))/0x2)+parseInt(_0x1465f0(0x1f1))/0x3*(parseInt(_0x1465f0(0x1fb))/0x4)+-parseInt(_0x1465f0(0x1d4))/0x5*(-parseInt(_0x1465f0(0x1d8))/0x6)+parseInt(_0x1465f0(0x1f8))/0x7+parseInt(_0x1465f0(0x1f6))/0x8*(-parseInt(_0x1465f0(0x1d5))/0x9)+-parseInt(_0x1465f0(0x1f3))/0xa*(-parseInt(_0x1465f0(0x1d3))/0xb)+-parseInt(_0x1465f0(0x1e0))/0xc;if(_0x3066e8===_0x4969bd)break;else _0x5978c2['push'](_0x5978c2['shift']());}catch(_0x55cb29){_0x5978c2['push'](_0x5978c2['shift']());}}}(_0x3e80,0xd61c8));var __decorate=this&&this[_0xa184a6(0x1fa)]||function(_0x5e08b4,_0xa51c75,_0x5eac4a,_0x426ef7){const _0x22faf9=_0xa184a6;var _0x256f35=arguments[_0x22faf9(0x1e8)],_0x11589b=_0x256f35<0x3?_0xa51c75:_0x426ef7===null?_0x426ef7=Object[_0x22faf9(0x1e5)](_0xa51c75,_0x5eac4a):_0x426ef7,_0x18f02b;if(typeof Reflect===_0x22faf9(0x1db)&&typeof Reflect[_0x22faf9(0x1ec)]==='function')_0x11589b=Reflect['decorate'](_0x5e08b4,_0xa51c75,_0x5eac4a,_0x426ef7);else{for(var _0x22f653=_0x5e08b4[_0x22faf9(0x1e8)]-0x1;_0x22f653>=0x0;_0x22f653--)if(_0x18f02b=_0x5e08b4[_0x22f653])_0x11589b=(_0x256f35<0x3?_0x18f02b(_0x11589b):_0x256f35>0x3?_0x18f02b(_0xa51c75,_0x5eac4a,_0x11589b):_0x18f02b(_0xa51c75,_0x5eac4a))||_0x11589b;}return _0x256f35>0x3&&_0x11589b&&Object['defineProperty'](_0xa51c75,_0x5eac4a,_0x11589b),_0x11589b;},__metadata=this&&this[_0xa184a6(0x1d6)]||function(_0x3bdb91,_0x126256){const _0x74caa6=_0xa184a6;if(typeof Reflect===_0x74caa6(0x1db)&&typeof Reflect[_0x74caa6(0x1f7)]===_0x74caa6(0x1fc))return Reflect['metadata'](_0x3bdb91,_0x126256);},__param=this&&this['__param']||function(_0x2bafa6,_0xa31d0a){return function(_0x1d53b2,_0x587edf){_0xa31d0a(_0x1d53b2,_0x587edf,_0x2bafa6);};};Object[_0xa184a6(0x1f9)](exports,_0xa184a6(0x1e3),{'value':!![]}),exports['DocsTaskService']=void 0x0;const common_1=require(_0xa184a6(0x1ed)),typeorm_1=require(_0xa184a6(0x1d7)),typeorm_2=require(_0xa184a6(0x1d2)),docsTask_entity_1=require(_0xa184a6(0x1f2)),nestjs_cls_1=require('nestjs-cls'),utils_1=require(_0xa184a6(0x1ea));let DocsTaskService=class DocsTaskService{constructor(_0x3718c2,_0x3ae7bd){const _0x176c53=_0xa184a6;this['docsTaskEntity']=_0x3718c2,this[_0x176c53(0x1ee)]=_0x3ae7bd;}async[_0xa184a6(0x204)]({id:_0x5ef820,userId:_0x4df577}){const _0x416437=_0xa184a6,_0xa3733c=await this[_0x416437(0x201)][_0x416437(0x1da)]({'where':{'id':_0x5ef820,'userId':_0x4df577}});return _0xa3733c;}async[_0xa184a6(0x1f5)]({id:_0x1521a9,userId:_0x2c68ff}){const _0x5290e=_0xa184a6,_0x383174=await this[_0x5290e(0x201)][_0x5290e(0x1da)]({'where':{'id':_0x1521a9,'userId':_0x2c68ff}});_0x383174&&(_0x383174[_0x5290e(0x1e7)]=0x1,await this['docsTaskEntity'][_0x5290e(0x1e9)](_0x383174));}async['topDocs'](_0x11b532,_0x21bd49,_0x1d6477){const _0x2e8f7f=_0xa184a6;_0x21bd49==0x1?_0x21bd49=0x1:_0x21bd49=0x0;const _0x3fd748=await this[_0x2e8f7f(0x201)][_0x2e8f7f(0x1da)]({'where':{'id':_0x11b532,'isTop':_0x21bd49,'userId':_0x1d6477[_0x2e8f7f(0x1e4)]['id']}});_0x3fd748&&(_0x3fd748[_0x2e8f7f(0x1dd)]=0x1,await this[_0x2e8f7f(0x201)][_0x2e8f7f(0x1e9)](_0x3fd748));}async[_0xa184a6(0x1ff)](_0x3af866,_0x10378c){const _0x5cb9dc=_0xa184a6;let _0x4ee750={'userId':_0x10378c[_0x5cb9dc(0x1e4)]['id']};_0x3af866[_0x5cb9dc(0x1d9)]&&(_0x4ee750[_0x5cb9dc(0x1d9)]=_0x3af866[_0x5cb9dc(0x1d9)]);_0x3af866[_0x5cb9dc(0x1d1)]&&(_0x4ee750[_0x5cb9dc(0x1d1)]=_0x3af866[_0x5cb9dc(0x1d1)]);if(!_0x3af866['id'])return await this[_0x5cb9dc(0x201)][_0x5cb9dc(0x1e9)](_0x4ee750);const _0x5518ce=await this[_0x5cb9dc(0x201)][_0x5cb9dc(0x1da)]({'where':{'id':_0x3af866['id']}});if(_0x5518ce[_0x5cb9dc(0x1de)]!=_0x10378c[_0x5cb9dc(0x1e4)]['id'])throw new common_1[(_0x5cb9dc(0x1ef))](_0x5cb9dc(0x202),common_1[_0x5cb9dc(0x203)][_0x5cb9dc(0x1fd)]);return _0x5518ce&&(_0x4ee750=Object['assign'](_0x5518ce,_0x4ee750)),await this[_0x5cb9dc(0x201)][_0x5cb9dc(0x1e9)](_0x4ee750);}async[_0xa184a6(0x1e6)](_0x156dee,_0x468fa6){const _0x52cf66=_0xa184a6,_0x5b7260=(0x0,utils_1[_0x52cf66(0x1df)])(this['clsService']),{page:page=0x1,size:size=0xa}=_0x156dee,_0x2aec8c={};_0x2aec8c['saasId']=_0x5b7260,_0x2aec8c[_0x52cf66(0x1e7)]=0x0,_0x2aec8c[_0x52cf66(0x1de)]=_0x468fa6[_0x52cf66(0x1e4)]['id'];const [_0x532c2a,_0x10c029]=await this['docsTaskEntity']['findAndCount']({'where':_0x2aec8c,'take':size,'skip':(page-0x1)*size,'order':{'isTop':_0x52cf66(0x1e1),'updatedAt':_0x52cf66(0x1e1)}});return{'rows':_0x532c2a,'count':_0x10c029};}async['getList'](_0x2c7e9d){const _0x28bd56=_0xa184a6,_0x59b635=(0x0,utils_1['getReqSaasId'])(this['clsService']),_0x42782a={};_0x42782a['saasId']=_0x59b635,_0x42782a[_0x28bd56(0x1e7)]=0x0,_0x42782a['userId']=_0x2c7e9d[_0x28bd56(0x1e4)]['id'];const _0x3aeba2=await this[_0x28bd56(0x201)][_0x28bd56(0x1f0)]({'where':_0x42782a,'order':{'isTop':'DESC','updatedAt':'DESC'}});return _0x3aeba2;}};function _0x2425(_0x4e0c3b,_0x1bbe46){const _0x3e8023=_0x3e80();return _0x2425=function(_0x242546,_0x227c5d){_0x242546=_0x242546-0x1d0;let _0x159505=_0x3e8023[_0x242546];return _0x159505;},_0x2425(_0x4e0c3b,_0x1bbe46);}DocsTaskService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0xa184a6(0x1dc)])(docsTask_entity_1[_0xa184a6(0x1d0)])),__metadata(_0xa184a6(0x1eb),[typeorm_2[_0xa184a6(0x1e2)],nestjs_cls_1['ClsService']])],DocsTaskService),exports[_0xa184a6(0x1f4)]=DocsTaskService;