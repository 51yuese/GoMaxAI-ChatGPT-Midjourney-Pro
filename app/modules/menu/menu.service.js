'use strict';function _0x1804(_0x1d3621,_0x30d7b3){const _0x296ee8=_0x296e();return _0x1804=function(_0x1804f7,_0x1502b6){_0x1804f7=_0x1804f7-0xc6;let _0x3e5a44=_0x296ee8[_0x1804f7];return _0x3e5a44;},_0x1804(_0x1d3621,_0x30d7b3);}const _0x5ab9f7=_0x1804;(function(_0x254fce,_0x1c9598){const _0x391482=_0x1804,_0x34c499=_0x254fce();while(!![]){try{const _0xc6c98f=parseInt(_0x391482(0xd9))/0x1+-parseInt(_0x391482(0xd6))/0x2+parseInt(_0x391482(0xca))/0x3*(-parseInt(_0x391482(0xec))/0x4)+-parseInt(_0x391482(0xc7))/0x5+-parseInt(_0x391482(0xc8))/0x6*(parseInt(_0x391482(0xf5))/0x7)+-parseInt(_0x391482(0xd3))/0x8*(-parseInt(_0x391482(0xe9))/0x9)+-parseInt(_0x391482(0xfe))/0xa*(-parseInt(_0x391482(0xd0))/0xb);if(_0xc6c98f===_0x1c9598)break;else _0x34c499['push'](_0x34c499['shift']());}catch(_0x46d754){_0x34c499['push'](_0x34c499['shift']());}}}(_0x296e,0x65e21));var __decorate=this&&this[_0x5ab9f7(0xe4)]||function(_0x2d3afe,_0x5822e1,_0x45b54f,_0x52db1a){const _0x1cf07d=_0x5ab9f7;var _0x27e466=arguments[_0x1cf07d(0xf0)],_0x4df8c2=_0x27e466<0x3?_0x5822e1:_0x52db1a===null?_0x52db1a=Object['getOwnPropertyDescriptor'](_0x5822e1,_0x45b54f):_0x52db1a,_0x2b0d74;if(typeof Reflect===_0x1cf07d(0xc9)&&typeof Reflect['decorate']===_0x1cf07d(0xf2))_0x4df8c2=Reflect[_0x1cf07d(0xdd)](_0x2d3afe,_0x5822e1,_0x45b54f,_0x52db1a);else{for(var _0x231fdd=_0x2d3afe[_0x1cf07d(0xf0)]-0x1;_0x231fdd>=0x0;_0x231fdd--)if(_0x2b0d74=_0x2d3afe[_0x231fdd])_0x4df8c2=(_0x27e466<0x3?_0x2b0d74(_0x4df8c2):_0x27e466>0x3?_0x2b0d74(_0x5822e1,_0x45b54f,_0x4df8c2):_0x2b0d74(_0x5822e1,_0x45b54f))||_0x4df8c2;}return _0x27e466>0x3&&_0x4df8c2&&Object[_0x1cf07d(0xed)](_0x5822e1,_0x45b54f,_0x4df8c2),_0x4df8c2;},__metadata=this&&this[_0x5ab9f7(0xef)]||function(_0x4c7de3,_0x75b1d8){const _0x2f3e1e=_0x5ab9f7;if(typeof Reflect===_0x2f3e1e(0xc9)&&typeof Reflect[_0x2f3e1e(0xd4)]===_0x2f3e1e(0xf2))return Reflect[_0x2f3e1e(0xd4)](_0x4c7de3,_0x75b1d8);},__param=this&&this[_0x5ab9f7(0xe3)]||function(_0x320bcb,_0x3209b8){return function(_0x5b160f,_0x335999){_0x3209b8(_0x5b160f,_0x335999,_0x320bcb);};};Object[_0x5ab9f7(0xed)](exports,_0x5ab9f7(0xde),{'value':!![]}),exports[_0x5ab9f7(0xd2)]=void 0x0;function _0x296e(){const _0x158240=['3700232KjLrdK','metadata','save','516730BViUCI','@nestjs/typeorm','保存菜单失败error','623927tNHvJM','ClsService','BAD_REQUEST','affected','decorate','__esModule','updateIcon','findOne','../../common/utils','MenuEntity','__param','__decorate','menuPath','setMenu','./menu.entity','typeorm','9ScPDyj','HttpException','onModuleInit','148fJwjyl','defineProperty','HttpStatus','__metadata','length','getReqSaasId','function','menuEntity','@nestjs/common','1572354NRimph','Injectable','menuPlatform','InjectRepository','ASC','saasId','操作菜单失败!','menuListFront','queryMenu','360TWuXkH','visibleMenu','缺失必要参数!','concat','Repository','1943275lgKZyH','18XnyMbv','object','5511kmQOKD','initMenu','clsService','delMenu','find','update','219912iDCZas','design:paramtypes','MenuService'];_0x296e=function(){return _0x158240;};return _0x296e();}const common_1=require(_0x5ab9f7(0xf4)),typeorm_1=require(_0x5ab9f7(0xd7)),typeorm_2=require(_0x5ab9f7(0xe8)),menu_entity_1=require(_0x5ab9f7(0xe7)),utils_1=require(_0x5ab9f7(0xe1)),nestjs_cls_1=require('nestjs-cls');let MenuService=class MenuService{constructor(_0x21d1f0,_0x564d8a){const _0x43e58e=_0x5ab9f7;this[_0x43e58e(0xf3)]=_0x21d1f0,this[_0x43e58e(0xcc)]=_0x564d8a;}async[_0x5ab9f7(0xeb)](){const _0x1e000d=_0x5ab9f7;await this[_0x1e000d(0xcb)]();}async[_0x5ab9f7(0xcb)](){const _0x2722a5=_0x5ab9f7,_0x6daf84=[],_0x4d16a9=[],_0x3811d9=_0x6daf84[_0x2722a5(0x101)](_0x4d16a9),_0x574068=await this[_0x2722a5(0xf3)][_0x2722a5(0xce)]({'where':{'menuType':0x0}});for(let _0x5e7523=0x0;_0x5e7523<_0x3811d9[_0x2722a5(0xf0)];_0x5e7523++){const _0x32e367=_0x3811d9[_0x5e7523],_0x3d8cfb=_0x574068[_0x2722a5(0xce)](_0x2ee33c=>_0x2ee33c[_0x2722a5(0xe5)]===_0x32e367['menuPath']&&_0x2ee33c[_0x2722a5(0xf7)]===_0x32e367[_0x2722a5(0xf7)]);!_0x3d8cfb&&await this[_0x2722a5(0xf3)][_0x2722a5(0xd5)](_0x32e367);}}async[_0x5ab9f7(0xfd)](_0x258d1c){const _0x17a7f4=_0x5ab9f7,{menuPlatform:_0x1e30a4,saasId:_0x4efa0e}=_0x258d1c,_0x3ed837=(0x0,utils_1[_0x17a7f4(0xf1)])(this[_0x17a7f4(0xcc)]);let _0x4fc1cd={};return _0x1e30a4&&(_0x4fc1cd['menuPlatform']=_0x1e30a4),_0x3ed837&&(_0x4fc1cd[_0x17a7f4(0xfa)]=_0x3ed837),_0x4efa0e&&(_0x4fc1cd['saasId']=_0x4efa0e),await this[_0x17a7f4(0xf3)][_0x17a7f4(0xce)]({'where':_0x4fc1cd,'order':{'order':_0x17a7f4(0xf9)}});}async[_0x5ab9f7(0xfc)](_0x1d21b9){const _0x102382=_0x5ab9f7,{menuPlatform:_0x31017c,saasId:_0x1ad425}=_0x1d21b9;let _0x141b16={'isShow':!![]};const _0x98fbdb=(0x0,utils_1[_0x102382(0xf1)])(this[_0x102382(0xcc)]);return _0x31017c&&(_0x141b16[_0x102382(0xf7)]=_0x31017c),_0x98fbdb!=undefined&&_0x98fbdb!==-0x1&&(_0x141b16[_0x102382(0xfa)]=_0x98fbdb),_0x1ad425&&(_0x141b16[_0x102382(0xfa)]=_0x1ad425),await this[_0x102382(0xf3)][_0x102382(0xce)]({'where':_0x141b16,'order':{'order':_0x102382(0xf9)}});}async[_0x5ab9f7(0xff)](_0x5c2602){const _0x2f5940=_0x5ab9f7,{id:_0x4b597e}=_0x5c2602;if(!_0x4b597e)return;const _0x6af652=await this[_0x2f5940(0xf3)][_0x2f5940(0xe0)]({'where':{'id':_0x4b597e}});if(!_0x6af652)return;const {isShow:_0x47c407}=_0x6af652,_0x5974ff=await this[_0x2f5940(0xf3)][_0x2f5940(0xcf)]({'id':_0x4b597e},{'isShow':!_0x47c407});return _0x5974ff[_0x2f5940(0xdc)]>0x0;}async[_0x5ab9f7(0xe6)](_0x3d75aa){const _0x2ec577=_0x5ab9f7,{id:_0x1f9eb0}=_0x3d75aa,_0x1aa5c4=(0x0,utils_1['getReqSaasId'])(this['clsService']);(!_0x3d75aa[_0x2ec577(0xfa)]||_0x3d75aa[_0x2ec577(0xfa)]==-0x1)&&(_0x3d75aa[_0x2ec577(0xfa)]=_0x1aa5c4);delete _0x3d75aa['isSystem'];try{if(_0x1f9eb0){const _0x2760c3=await this[_0x2ec577(0xf3)][_0x2ec577(0xcf)]({'id':_0x1f9eb0},_0x3d75aa);return _0x2760c3[_0x2ec577(0xdc)]>0x0;}else{const _0x1e7ba0=await this[_0x2ec577(0xf3)]['save'](_0x3d75aa);return _0x1e7ba0;}}catch(_0x35e4ff){console['log'](_0x2ec577(0xd8),_0x35e4ff);throw new common_1[(_0x2ec577(0xea))](_0x2ec577(0xfb),common_1[_0x2ec577(0xee)][_0x2ec577(0xdb)]);}}async[_0x5ab9f7(0xcd)](_0xa28498){const _0x498af9=_0x5ab9f7,{id:_0x156c48}=_0xa28498;if(!_0x156c48)throw new common_1['HttpException'](_0x498af9(0x100),common_1[_0x498af9(0xee)]['BAD_REQUEST']);const _0x165b03=await this[_0x498af9(0xf3)]['delete']({'id':_0x156c48});return _0x165b03;}async[_0x5ab9f7(0xdf)](_0x1f2168){const _0x120442=_0x5ab9f7,{id:_0x7c3915,menuIcon:_0x1d31db,menuName:_0x548d41,order:_0x3e7f95}=_0x1f2168;if(!_0x7c3915||!_0x1d31db||!_0x548d41||!_0x3e7f95)throw new common_1[(_0x120442(0xea))](_0x120442(0x100),common_1['HttpStatus'][_0x120442(0xdb)]);const _0x59e987=await this[_0x120442(0xf3)]['update']({'id':_0x7c3915},{'menuIcon':_0x1d31db,'menuName':_0x548d41,'order':_0x3e7f95});return _0x59e987[_0x120442(0xdc)]>0x0;}};MenuService=__decorate([(0x0,common_1[_0x5ab9f7(0xf6)])(),__param(0x0,(0x0,typeorm_1[_0x5ab9f7(0xf8)])(menu_entity_1[_0x5ab9f7(0xe2)])),__metadata(_0x5ab9f7(0xd1),[typeorm_2[_0x5ab9f7(0xc6)],nestjs_cls_1[_0x5ab9f7(0xda)]])],MenuService),exports[_0x5ab9f7(0xd2)]=MenuService;