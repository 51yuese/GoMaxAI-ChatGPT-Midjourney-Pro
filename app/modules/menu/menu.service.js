'use strict';const _0x1e6acc=_0x7091;function _0xa7a0(){const _0x13b0da=['find','menuEntity','defineProperty','menuListFront','__param','208628tYVTjt','updateIcon','对话聊天','/midjourney','6CBtYBt','setMenu','1136mTFhdG','GPTS','onModuleInit','affected','menuPath','/share','12ZQkvss','AI音乐','728NYRPCR','tdesign:letters-g','/gpts','delMenu','BAD_REQUEST','fluent:chat-16-regular','思维导图','13049BPkioQ','mdi:paint-outline','delete','/music','initMenu','object','./menu.entity','ant-design:appstore-outlined','length','function','InjectRepository','isSystem','2261545JXReam','902595xsStKo','@nestjs/typeorm','metadata','ASC','queryMenu','getOwnPropertyDescriptor','__metadata','MenuEntity','3483vtlLYN','2789900MdgtYf','decorate','design:paramtypes','__esModule','MenuService','/chat','update','1420WvdsIT','menuPlatform','__decorate','pajamas:bullhorn','HttpStatus','/user-center','ri:account-pin-box-line','HttpException'];_0xa7a0=function(){return _0x13b0da;};return _0xa7a0();}(function(_0x148d7a,_0x3ae82a){const _0x3bc0be=_0x7091,_0x4930a4=_0x148d7a();while(!![]){try{const _0x4565ef=parseInt(_0x3bc0be(0x1e4))/0x1*(parseInt(_0x3bc0be(0x1d3))/0x2)+-parseInt(_0x3bc0be(0x1f1))/0x3+-parseInt(_0x3bc0be(0x1d5))/0x4*(-parseInt(_0x3bc0be(0x201))/0x5)+parseInt(_0x3bc0be(0x1db))/0x6*(-parseInt(_0x3bc0be(0x20e))/0x7)+-parseInt(_0x3bc0be(0x1dd))/0x8*(parseInt(_0x3bc0be(0x1f9))/0x9)+parseInt(_0x3bc0be(0x1fa))/0xa+parseInt(_0x3bc0be(0x1f0))/0xb;if(_0x4565ef===_0x3ae82a)break;else _0x4930a4['push'](_0x4930a4['shift']());}catch(_0x50b501){_0x4930a4['push'](_0x4930a4['shift']());}}}(_0xa7a0,0x32f3a));var __decorate=this&&this[_0x1e6acc(0x203)]||function(_0x2c05b3,_0x4f7006,_0x1c3ce9,_0x17c056){const _0x10ad7e=_0x1e6acc;var _0x6e157b=arguments[_0x10ad7e(0x1ec)],_0x32b052=_0x6e157b<0x3?_0x4f7006:_0x17c056===null?_0x17c056=Object[_0x10ad7e(0x1f6)](_0x4f7006,_0x1c3ce9):_0x17c056,_0x358c3c;if(typeof Reflect===_0x10ad7e(0x1e9)&&typeof Reflect[_0x10ad7e(0x1fb)]==='function')_0x32b052=Reflect['decorate'](_0x2c05b3,_0x4f7006,_0x1c3ce9,_0x17c056);else{for(var _0x5f4e53=_0x2c05b3[_0x10ad7e(0x1ec)]-0x1;_0x5f4e53>=0x0;_0x5f4e53--)if(_0x358c3c=_0x2c05b3[_0x5f4e53])_0x32b052=(_0x6e157b<0x3?_0x358c3c(_0x32b052):_0x6e157b>0x3?_0x358c3c(_0x4f7006,_0x1c3ce9,_0x32b052):_0x358c3c(_0x4f7006,_0x1c3ce9))||_0x32b052;}return _0x6e157b>0x3&&_0x32b052&&Object['defineProperty'](_0x4f7006,_0x1c3ce9,_0x32b052),_0x32b052;},__metadata=this&&this[_0x1e6acc(0x1f7)]||function(_0x35109b,_0x46281f){const _0x449de7=_0x1e6acc;if(typeof Reflect==='object'&&typeof Reflect[_0x449de7(0x1f3)]===_0x449de7(0x1ed))return Reflect[_0x449de7(0x1f3)](_0x35109b,_0x46281f);},__param=this&&this[_0x1e6acc(0x20d)]||function(_0x35484f,_0x3f6e53){return function(_0x5c26b3,_0x21f7cb){_0x3f6e53(_0x5c26b3,_0x21f7cb,_0x35484f);};};function _0x7091(_0x1ce7ae,_0xfbd280){const _0xa7a0d=_0xa7a0();return _0x7091=function(_0x709116,_0x3fdb0c){_0x709116=_0x709116-0x1d2;let _0x1227ef=_0xa7a0d[_0x709116];return _0x1227ef;},_0x7091(_0x1ce7ae,_0xfbd280);}Object[_0x1e6acc(0x20b)](exports,_0x1e6acc(0x1fd),{'value':!![]}),exports[_0x1e6acc(0x1fe)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x1e6acc(0x1f2)),typeorm_2=require('typeorm'),menu_entity_1=require(_0x1e6acc(0x1ea));let MenuService=class MenuService{constructor(_0x5960a5){const _0x447167=_0x1e6acc;this[_0x447167(0x20a)]=_0x5960a5;}async[_0x1e6acc(0x1d7)](){await this['initMenu']();}async[_0x1e6acc(0x1e8)](){const _0x450cc5=_0x1e6acc,_0x2df798=[{'menuTipText':_0x450cc5(0x210),'menuIcon':_0x450cc5(0x1e2),'menuName':'聊天','menuPath':_0x450cc5(0x1ff),'menuType':0x0,'menuPlatform':0x1,'order':0x64},{'menuTipText':'专业绘画','menuIcon':_0x450cc5(0x1e5),'menuName':'绘画','menuPath':_0x450cc5(0x1d2),'menuType':0x0,'menuPlatform':0x1,'order':0xc8},{'menuTipText':'GPTS','menuIcon':'tdesign:letters-g','menuName':_0x450cc5(0x1d6),'menuPath':_0x450cc5(0x1df),'menuType':0x0,'menuPlatform':0x1,'order':0x12c},{'menuTipText':_0x450cc5(0x1e3),'menuIcon':'icon-park-outline:mindmap-map','menuName':'导图','menuPath':'/mind','menuType':0x0,'menuPlatform':0x1,'order':0x190},{'menuTipText':'推广计划','menuIcon':_0x450cc5(0x204),'menuName':'推广','menuPath':_0x450cc5(0x1da),'menuType':0x0,'menuPlatform':0x1,'order':0x1f4},{'menuTipText':_0x450cc5(0x1dc),'menuIcon':'mingcute:music-line','menuName':_0x450cc5(0x1dc),'menuPath':_0x450cc5(0x1e7),'menuType':0x0,'menuPlatform':0x1,'order':0x258}],_0x512860=[{'menuTipText':'聊天','menuIcon':'fluent:chat-16-regular','menuName':'聊天','menuPath':'/chat','menuType':0x0,'menuPlatform':0x0,'order':0x64},{'menuTipText':'绘画','menuIcon':_0x450cc5(0x1e5),'menuName':'绘画','menuPath':_0x450cc5(0x1d2),'menuType':0x0,'menuPlatform':0x0,'order':0xc8},{'menuTipText':'应用','menuIcon':_0x450cc5(0x1eb),'menuName':'应用','menuPath':'/app-store','menuType':0x0,'menuPlatform':0x0,'order':0x12c},{'menuTipText':'GPTS','menuIcon':_0x450cc5(0x1de),'menuName':_0x450cc5(0x1d6),'menuPath':_0x450cc5(0x1df),'menuType':0x0,'menuPlatform':0x0,'order':0x190},{'menuTipText':'我的','menuIcon':_0x450cc5(0x207),'menuName':'我的','menuPath':_0x450cc5(0x206),'menuType':0x0,'menuPlatform':0x0,'order':0x1f4}],_0x3553a2=_0x2df798['concat'](_0x512860),_0xd868b6=await this[_0x450cc5(0x20a)]['find']({'where':{'menuType':0x0}});for(let _0xb5ae98=0x0;_0xb5ae98<_0x3553a2[_0x450cc5(0x1ec)];_0xb5ae98++){const _0x418f8f=_0x3553a2[_0xb5ae98],_0x1a2e53=_0xd868b6['find'](_0x2c0f13=>_0x2c0f13[_0x450cc5(0x1d9)]===_0x418f8f[_0x450cc5(0x1d9)]&&_0x2c0f13['menuPlatform']===_0x418f8f['menuPlatform']);!_0x1a2e53&&await this[_0x450cc5(0x20a)]['save'](_0x418f8f);}}async[_0x1e6acc(0x1f5)](_0x406774){const _0x59750d=_0x1e6acc,{menuPlatform:_0x48fad2}=_0x406774;let _0x1d0393={};return _0x48fad2&&(_0x1d0393['menuPlatform']=_0x48fad2),await this[_0x59750d(0x20a)][_0x59750d(0x209)]({'where':_0x1d0393,'order':{'order':_0x59750d(0x1f4)}});}async[_0x1e6acc(0x20c)](_0x4369a0){const _0x2173b7=_0x1e6acc,{menuPlatform:_0x232afc}=_0x4369a0;let _0x16857c={'isShow':!![]};return _0x232afc&&(_0x16857c[_0x2173b7(0x202)]=_0x232afc),await this[_0x2173b7(0x20a)][_0x2173b7(0x209)]({'where':_0x16857c,'order':{'order':'ASC'}});}async['visibleMenu'](_0x1badc2){const _0x40fa32=_0x1e6acc,{id:_0x225810}=_0x1badc2;if(!_0x225810)return;const _0x40c3f4=await this[_0x40fa32(0x20a)]['findOne']({'where':{'id':_0x225810}});if(!_0x40c3f4)return;const {isShow:_0xa649a1}=_0x40c3f4,_0x4fb817=await this['menuEntity'][_0x40fa32(0x200)]({'id':_0x225810},{'isShow':!_0xa649a1});return _0x4fb817['affected']>0x0;}async[_0x1e6acc(0x1d4)](_0x26f86a){const _0x5af0fe=_0x1e6acc,{id:_0x339c17}=_0x26f86a;delete _0x26f86a[_0x5af0fe(0x1ef)];try{if(_0x339c17){const _0x103fca=await this['menuEntity'][_0x5af0fe(0x200)]({'id':_0x339c17},_0x26f86a);return _0x103fca[_0x5af0fe(0x1d8)]>0x0;}else{const _0x5082a8=await this[_0x5af0fe(0x20a)]['save'](_0x26f86a);return _0x5082a8;}}catch(_0x3e9135){throw new common_1[(_0x5af0fe(0x208))]('操作菜单失败!',common_1[_0x5af0fe(0x205)][_0x5af0fe(0x1e1)]);}}async[_0x1e6acc(0x1e0)](_0x15d1b5){const _0x4f841c=_0x1e6acc,{id:_0x5d2c75}=_0x15d1b5;if(!_0x5d2c75)throw new common_1[(_0x4f841c(0x208))]('缺失必要参数!',common_1['HttpStatus']['BAD_REQUEST']);const _0x4a7143=await this[_0x4f841c(0x20a)][_0x4f841c(0x1e6)]({'id':_0x5d2c75});return _0x4a7143;}async[_0x1e6acc(0x20f)](_0xfe6b8c){const _0x52858b=_0x1e6acc,{id:_0x118955,menuIcon:_0x564106,menuName:_0xdaf708,order:_0x111227}=_0xfe6b8c;if(!_0x118955||!_0x564106||!_0xdaf708||!_0x111227)throw new common_1[(_0x52858b(0x208))]('缺失必要参数!',common_1['HttpStatus'][_0x52858b(0x1e1)]);const _0x393696=await this[_0x52858b(0x20a)][_0x52858b(0x200)]({'id':_0x118955},{'menuIcon':_0x564106,'menuName':_0xdaf708,'order':_0x111227});return _0x393696[_0x52858b(0x1d8)]>0x0;}};MenuService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x1e6acc(0x1ee)])(menu_entity_1[_0x1e6acc(0x1f8)])),__metadata(_0x1e6acc(0x1fc),[typeorm_2['Repository']])],MenuService),exports['MenuService']=MenuService;