'use strict';function _0x470a(){const _0xd8b3b5=['__esModule','426858BsFOVW','concat','7000688PRONPS','__metadata','15650QhmOET','__decorate','MenuEntity','decorate','menuPath','queryMenu','58912pxowAz','MenuService','save','__param','design:paramtypes','Repository','BAD_REQUEST','setMenu','initMenu','85WnTdnW','153QdrgAE','@nestjs/typeorm','delete','menuEntity','onModuleInit','432HNQrtE','@nestjs/common','log','Injectable','HttpException','typeorm','length','4245650rFnAcl','保存菜单失败error','menuPlatform','36374KcQTwA','isSystem','update','HttpStatus','3516660qxofYt','findOne','metadata','操作菜单失败!','./menu.entity','updateIcon','InjectRepository','object','defineProperty','find','function','缺失必要参数!','visibleMenu'];_0x470a=function(){return _0xd8b3b5;};return _0x470a();}const _0x1c04a6=_0x519f;(function(_0x1d80cc,_0x2f2f1c){const _0x455946=_0x519f,_0x13f09b=_0x1d80cc();while(!![]){try{const _0x46d60c=parseInt(_0x455946(0x1e4))/0x1*(-parseInt(_0x455946(0x1f4))/0x2)+parseInt(_0x455946(0x1f8))/0x3+parseInt(_0x455946(0x208))/0x4+-parseInt(_0x455946(0x1f1))/0x5+-parseInt(_0x455946(0x206))/0x6+-parseInt(_0x455946(0x1db))/0x7*(-parseInt(_0x455946(0x1ea))/0x8)+-parseInt(_0x455946(0x1e5))/0x9*(parseInt(_0x455946(0x20a))/0xa);if(_0x46d60c===_0x2f2f1c)break;else _0x13f09b['push'](_0x13f09b['shift']());}catch(_0x211eaa){_0x13f09b['push'](_0x13f09b['shift']());}}}(_0x470a,0xd7d73));var __decorate=this&&this[_0x1c04a6(0x20b)]||function(_0x4a76f0,_0x3e601e,_0x44fc97,_0x12f55b){const _0x1b08e5=_0x1c04a6;var _0x52e031=arguments[_0x1b08e5(0x1f0)],_0x120a92=_0x52e031<0x3?_0x3e601e:_0x12f55b===null?_0x12f55b=Object['getOwnPropertyDescriptor'](_0x3e601e,_0x44fc97):_0x12f55b,_0x41e1db;if(typeof Reflect===_0x1b08e5(0x1ff)&&typeof Reflect[_0x1b08e5(0x1d8)]===_0x1b08e5(0x202))_0x120a92=Reflect[_0x1b08e5(0x1d8)](_0x4a76f0,_0x3e601e,_0x44fc97,_0x12f55b);else{for(var _0x34f10e=_0x4a76f0[_0x1b08e5(0x1f0)]-0x1;_0x34f10e>=0x0;_0x34f10e--)if(_0x41e1db=_0x4a76f0[_0x34f10e])_0x120a92=(_0x52e031<0x3?_0x41e1db(_0x120a92):_0x52e031>0x3?_0x41e1db(_0x3e601e,_0x44fc97,_0x120a92):_0x41e1db(_0x3e601e,_0x44fc97))||_0x120a92;}return _0x52e031>0x3&&_0x120a92&&Object[_0x1b08e5(0x200)](_0x3e601e,_0x44fc97,_0x120a92),_0x120a92;},__metadata=this&&this[_0x1c04a6(0x209)]||function(_0x2ad149,_0x278e20){const _0x5613c2=_0x1c04a6;if(typeof Reflect==='object'&&typeof Reflect[_0x5613c2(0x1fa)]===_0x5613c2(0x202))return Reflect[_0x5613c2(0x1fa)](_0x2ad149,_0x278e20);},__param=this&&this[_0x1c04a6(0x1de)]||function(_0x9e1250,_0x41cccc){return function(_0xb40f96,_0x3ba969){_0x41cccc(_0xb40f96,_0x3ba969,_0x9e1250);};};Object['defineProperty'](exports,_0x1c04a6(0x205),{'value':!![]}),exports[_0x1c04a6(0x1dc)]=void 0x0;const common_1=require(_0x1c04a6(0x1eb)),typeorm_1=require(_0x1c04a6(0x1e6)),typeorm_2=require(_0x1c04a6(0x1ef)),menu_entity_1=require(_0x1c04a6(0x1fc));let MenuService=class MenuService{constructor(_0xc91a29){this['menuEntity']=_0xc91a29;}async[_0x1c04a6(0x1e9)](){const _0x30aad5=_0x1c04a6;await this[_0x30aad5(0x1e3)]();}async[_0x1c04a6(0x1e3)](){const _0x466dd1=_0x1c04a6,_0x2fc12b=[],_0x24b786=[],_0x4e085e=_0x2fc12b[_0x466dd1(0x207)](_0x24b786),_0x58e01d=await this[_0x466dd1(0x1e8)]['find']({'where':{'menuType':0x0}});for(let _0x3f7a87=0x0;_0x3f7a87<_0x4e085e[_0x466dd1(0x1f0)];_0x3f7a87++){const _0x104025=_0x4e085e[_0x3f7a87],_0x5a4947=_0x58e01d['find'](_0x47cde1=>_0x47cde1[_0x466dd1(0x1d9)]===_0x104025[_0x466dd1(0x1d9)]&&_0x47cde1[_0x466dd1(0x1f3)]===_0x104025[_0x466dd1(0x1f3)]);!_0x5a4947&&await this[_0x466dd1(0x1e8)][_0x466dd1(0x1dd)](_0x104025);}}async[_0x1c04a6(0x1da)](_0x22a1ea){const _0x27e7b5=_0x1c04a6,{menuPlatform:_0x3e11e4,saasId:_0x3e2776}=_0x22a1ea;let _0x50dd37={};return _0x3e11e4&&(_0x50dd37['menuPlatform']=_0x3e11e4),_0x3e2776&&(_0x50dd37['saasId']=_0x3e2776),await this[_0x27e7b5(0x1e8)][_0x27e7b5(0x201)]({'where':_0x50dd37,'order':{'order':'ASC'}});}async['menuListFront'](_0x37c4c0){const _0x30482a=_0x1c04a6,{menuPlatform:_0x4ecd1c,saasId:_0x444241}=_0x37c4c0;let _0x820629={'isShow':!![]};return _0x4ecd1c&&(_0x820629[_0x30482a(0x1f3)]=_0x4ecd1c),_0x444241&&(_0x820629['saasId']=_0x444241),await this['menuEntity'][_0x30482a(0x201)]({'where':_0x820629,'order':{'order':'ASC'}});}async[_0x1c04a6(0x204)](_0x1204c1){const _0x200cc0=_0x1c04a6,{id:_0xf50891}=_0x1204c1;if(!_0xf50891)return;const _0x448f35=await this[_0x200cc0(0x1e8)][_0x200cc0(0x1f9)]({'where':{'id':_0xf50891}});if(!_0x448f35)return;const {isShow:_0x546af1}=_0x448f35,_0x438975=await this[_0x200cc0(0x1e8)][_0x200cc0(0x1f6)]({'id':_0xf50891},{'isShow':!_0x546af1});return _0x438975['affected']>0x0;}async[_0x1c04a6(0x1e2)](_0x1b8c6f){const _0x249831=_0x1c04a6,{id:_0x1c360f}=_0x1b8c6f;delete _0x1b8c6f[_0x249831(0x1f5)];try{if(_0x1c360f){const _0x4e8ac8=await this[_0x249831(0x1e8)][_0x249831(0x1f6)]({'id':_0x1c360f},_0x1b8c6f);return _0x4e8ac8['affected']>0x0;}else{const _0x1a0989=await this['menuEntity'][_0x249831(0x1dd)](_0x1b8c6f);return _0x1a0989;}}catch(_0x435d8f){console[_0x249831(0x1ec)](_0x249831(0x1f2),_0x435d8f);throw new common_1['HttpException'](_0x249831(0x1fb),common_1[_0x249831(0x1f7)][_0x249831(0x1e1)]);}}async['delMenu'](_0x198b92){const _0x383e2e=_0x1c04a6,{id:_0x10b3a2}=_0x198b92;if(!_0x10b3a2)throw new common_1[(_0x383e2e(0x1ee))](_0x383e2e(0x203),common_1[_0x383e2e(0x1f7)][_0x383e2e(0x1e1)]);const _0x24e19c=await this[_0x383e2e(0x1e8)][_0x383e2e(0x1e7)]({'id':_0x10b3a2});return _0x24e19c;}async[_0x1c04a6(0x1fd)](_0x3468a9){const _0x30180c=_0x1c04a6,{id:_0xa9c20,menuIcon:_0x25bdfd,menuName:_0xe97578,order:_0x3f8463}=_0x3468a9;if(!_0xa9c20||!_0x25bdfd||!_0xe97578||!_0x3f8463)throw new common_1[(_0x30180c(0x1ee))](_0x30180c(0x203),common_1[_0x30180c(0x1f7)]['BAD_REQUEST']);const _0x326253=await this['menuEntity'][_0x30180c(0x1f6)]({'id':_0xa9c20},{'menuIcon':_0x25bdfd,'menuName':_0xe97578,'order':_0x3f8463});return _0x326253['affected']>0x0;}};function _0x519f(_0x3a62b3,_0x3fa742){const _0x470a1d=_0x470a();return _0x519f=function(_0x519f48,_0x4d13d7){_0x519f48=_0x519f48-0x1d8;let _0x1990ee=_0x470a1d[_0x519f48];return _0x1990ee;},_0x519f(_0x3a62b3,_0x3fa742);}MenuService=__decorate([(0x0,common_1[_0x1c04a6(0x1ed)])(),__param(0x0,(0x0,typeorm_1[_0x1c04a6(0x1fe)])(menu_entity_1[_0x1c04a6(0x20c)])),__metadata(_0x1c04a6(0x1df),[typeorm_2[_0x1c04a6(0x1e0)]])],MenuService),exports[_0x1c04a6(0x1dc)]=MenuService;