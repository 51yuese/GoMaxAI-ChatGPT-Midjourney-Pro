'use strict';const _0x4e742c=_0x1377;(function(_0x2b42e1,_0xbf7a2b){const _0x296aa1=_0x1377,_0x499031=_0x2b42e1();while(!![]){try{const _0x1c62fc=parseInt(_0x296aa1(0x175))/0x1*(parseInt(_0x296aa1(0x19b))/0x2)+-parseInt(_0x296aa1(0x17f))/0x3+parseInt(_0x296aa1(0x18f))/0x4+-parseInt(_0x296aa1(0x1a4))/0x5+parseInt(_0x296aa1(0x19f))/0x6*(-parseInt(_0x296aa1(0x180))/0x7)+parseInt(_0x296aa1(0x18b))/0x8+parseInt(_0x296aa1(0x183))/0x9;if(_0x1c62fc===_0xbf7a2b)break;else _0x499031['push'](_0x499031['shift']());}catch(_0x36d4bd){_0x499031['push'](_0x499031['shift']());}}}(_0x1df5,0xbffc5));function _0x1377(_0x5973b3,_0x199296){const _0x1df594=_0x1df5();return _0x1377=function(_0x137772,_0x56f076){_0x137772=_0x137772-0x175;let _0x1039d4=_0x1df594[_0x137772];return _0x1039d4;},_0x1377(_0x5973b3,_0x199296);}var __decorate=this&&this[_0x4e742c(0x1a5)]||function(_0x4f8eb3,_0xa90c58,_0x34e2d4,_0x4447d7){const _0x113158=_0x4e742c;var _0x48ed01=arguments[_0x113158(0x17e)],_0x303880=_0x48ed01<0x3?_0xa90c58:_0x4447d7===null?_0x4447d7=Object['getOwnPropertyDescriptor'](_0xa90c58,_0x34e2d4):_0x4447d7,_0x422916;if(typeof Reflect===_0x113158(0x1a9)&&typeof Reflect[_0x113158(0x1a2)]==='function')_0x303880=Reflect[_0x113158(0x1a2)](_0x4f8eb3,_0xa90c58,_0x34e2d4,_0x4447d7);else{for(var _0x251452=_0x4f8eb3[_0x113158(0x17e)]-0x1;_0x251452>=0x0;_0x251452--)if(_0x422916=_0x4f8eb3[_0x251452])_0x303880=(_0x48ed01<0x3?_0x422916(_0x303880):_0x48ed01>0x3?_0x422916(_0xa90c58,_0x34e2d4,_0x303880):_0x422916(_0xa90c58,_0x34e2d4))||_0x303880;}return _0x48ed01>0x3&&_0x303880&&Object[_0x113158(0x184)](_0xa90c58,_0x34e2d4,_0x303880),_0x303880;},__metadata=this&&this['__metadata']||function(_0x3e800f,_0x28c83d){const _0x3d7302=_0x4e742c;if(typeof Reflect==='object'&&typeof Reflect[_0x3d7302(0x1a0)]==='function')return Reflect[_0x3d7302(0x1a0)](_0x3e800f,_0x28c83d);},__param=this&&this[_0x4e742c(0x18c)]||function(_0x2c266e,_0x8c8704){return function(_0x121d84,_0x235aaa){_0x8c8704(_0x121d84,_0x235aaa,_0x2c266e);};};Object[_0x4e742c(0x184)](exports,_0x4e742c(0x181),{'value':!![]}),exports[_0x4e742c(0x17b)]=void 0x0;function _0x1df5(){const _0x2ac53d=['HttpStatus','saasId','./menu.entity','object','menuPath','Injectable','129CcxbSy','affected','updateIcon','menuEntity','save','typeorm','MenuService','delMenu','保存菜单失败error','length','1536963CFIyVm','22687lXrLrR','__esModule','nestjs-cls','5653854TBvIeG','defineProperty','ASC','ClsService','design:paramtypes','isSystem','操作菜单失败!','onModuleInit','2705696VpieOc','__param','menuListFront','findOne','3519756uIOBIB','BAD_REQUEST','@nestjs/common','update','initMenu','缺失必要参数!','clsService','delete','MenuEntity','setMenu','visibleMenu','InjectRepository','21794BDGoqU','find','HttpException','Repository','996ypXMHm','metadata','menuPlatform','decorate','getReqSaasId','7076850XrQKgm','__decorate'];_0x1df5=function(){return _0x2ac53d;};return _0x1df5();}const common_1=require(_0x4e742c(0x191)),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x4e742c(0x17a)),menu_entity_1=require(_0x4e742c(0x1a8)),utils_1=require('../../common/utils'),nestjs_cls_1=require(_0x4e742c(0x182));let MenuService=class MenuService{constructor(_0x18f609,_0x5d4eca){const _0x411511=_0x4e742c;this[_0x411511(0x178)]=_0x18f609,this[_0x411511(0x195)]=_0x5d4eca;}async[_0x4e742c(0x18a)](){const _0x504820=_0x4e742c;await this[_0x504820(0x193)]();}async[_0x4e742c(0x193)](){const _0x21d825=_0x4e742c,_0x545164=[],_0x4d5d0a=[],_0x307277=_0x545164['concat'](_0x4d5d0a),_0xa6fd23=await this[_0x21d825(0x178)][_0x21d825(0x19c)]({'where':{'menuType':0x0}});for(let _0x8cba3=0x0;_0x8cba3<_0x307277[_0x21d825(0x17e)];_0x8cba3++){const _0x15f9c8=_0x307277[_0x8cba3],_0x1ad392=_0xa6fd23[_0x21d825(0x19c)](_0x2d87a4=>_0x2d87a4[_0x21d825(0x1aa)]===_0x15f9c8[_0x21d825(0x1aa)]&&_0x2d87a4[_0x21d825(0x1a1)]===_0x15f9c8['menuPlatform']);!_0x1ad392&&await this['menuEntity'][_0x21d825(0x179)](_0x15f9c8);}}async['queryMenu'](_0x275768){const _0x22d622=_0x4e742c,{menuPlatform:_0x3054ab,saasId:_0x5e9df0}=_0x275768,_0x397097=(0x0,utils_1[_0x22d622(0x1a3)])(this['clsService']);let _0x545811={};return _0x3054ab&&(_0x545811[_0x22d622(0x1a1)]=_0x3054ab),_0x397097&&(_0x545811['saasId']=_0x397097),_0x5e9df0&&(_0x545811['saasId']=_0x5e9df0),await this[_0x22d622(0x178)][_0x22d622(0x19c)]({'where':_0x545811,'order':{'order':_0x22d622(0x185)}});}async[_0x4e742c(0x18d)](_0x5f3ae2){const _0x51d99d=_0x4e742c,{menuPlatform:_0x596e73,saasId:_0x94874f}=_0x5f3ae2;let _0x16a4dc={'isShow':!![]};const _0x43e6cd=(0x0,utils_1[_0x51d99d(0x1a3)])(this[_0x51d99d(0x195)]);return _0x596e73&&(_0x16a4dc[_0x51d99d(0x1a1)]=_0x596e73),_0x43e6cd!=undefined&&_0x43e6cd!==-0x1&&(_0x16a4dc[_0x51d99d(0x1a7)]=_0x43e6cd),_0x94874f&&(_0x16a4dc[_0x51d99d(0x1a7)]=_0x94874f),await this[_0x51d99d(0x178)]['find']({'where':_0x16a4dc,'order':{'order':_0x51d99d(0x185)}});}async[_0x4e742c(0x199)](_0x3cce50){const _0x4b54df=_0x4e742c,{id:_0x53205b}=_0x3cce50;if(!_0x53205b)return;const _0x394be0=await this[_0x4b54df(0x178)][_0x4b54df(0x18e)]({'where':{'id':_0x53205b}});if(!_0x394be0)return;const {isShow:_0xd2079}=_0x394be0,_0x5901ec=await this['menuEntity'][_0x4b54df(0x192)]({'id':_0x53205b},{'isShow':!_0xd2079});return _0x5901ec[_0x4b54df(0x176)]>0x0;}async[_0x4e742c(0x198)](_0x22d0c8){const _0x502b48=_0x4e742c,{id:_0x2c369d}=_0x22d0c8,_0x4989b1=(0x0,utils_1[_0x502b48(0x1a3)])(this['clsService']);(!_0x22d0c8[_0x502b48(0x1a7)]||_0x22d0c8[_0x502b48(0x1a7)]==-0x1)&&(_0x22d0c8[_0x502b48(0x1a7)]=_0x4989b1);delete _0x22d0c8[_0x502b48(0x188)];try{if(_0x2c369d){const _0x1c28fe=await this['menuEntity'][_0x502b48(0x192)]({'id':_0x2c369d},_0x22d0c8);return _0x1c28fe[_0x502b48(0x176)]>0x0;}else{const _0x344cac=await this['menuEntity'][_0x502b48(0x179)](_0x22d0c8);return _0x344cac;}}catch(_0x549e4e){console['log'](_0x502b48(0x17d),_0x549e4e);throw new common_1[(_0x502b48(0x19d))](_0x502b48(0x189),common_1['HttpStatus'][_0x502b48(0x190)]);}}async[_0x4e742c(0x17c)](_0x335910){const _0x20d206=_0x4e742c,{id:_0x586c8b}=_0x335910;if(!_0x586c8b)throw new common_1[(_0x20d206(0x19d))]('缺失必要参数!',common_1[_0x20d206(0x1a6)][_0x20d206(0x190)]);const _0x39a008=await this['menuEntity'][_0x20d206(0x196)]({'id':_0x586c8b});return _0x39a008;}async[_0x4e742c(0x177)](_0x396987){const _0x31c739=_0x4e742c,{id:_0x49497f,menuIcon:_0x5ddad7,menuName:_0x57818c,order:_0x38d066}=_0x396987;if(!_0x49497f||!_0x5ddad7||!_0x57818c||!_0x38d066)throw new common_1[(_0x31c739(0x19d))](_0x31c739(0x194),common_1[_0x31c739(0x1a6)]['BAD_REQUEST']);const _0x48d788=await this[_0x31c739(0x178)][_0x31c739(0x192)]({'id':_0x49497f},{'menuIcon':_0x5ddad7,'menuName':_0x57818c,'order':_0x38d066});return _0x48d788[_0x31c739(0x176)]>0x0;}};MenuService=__decorate([(0x0,common_1[_0x4e742c(0x1ab)])(),__param(0x0,(0x0,typeorm_1[_0x4e742c(0x19a)])(menu_entity_1[_0x4e742c(0x197)])),__metadata(_0x4e742c(0x187),[typeorm_2[_0x4e742c(0x19e)],nestjs_cls_1[_0x4e742c(0x186)]])],MenuService),exports[_0x4e742c(0x17b)]=MenuService;