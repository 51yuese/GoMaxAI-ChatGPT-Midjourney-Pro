'use strict';const _0x2c79b2=_0x1114;(function(_0x1da288,_0x51a496){const _0x5c6ed3=_0x1114,_0x385400=_0x1da288();while(!![]){try{const _0x3843eb=-parseInt(_0x5c6ed3(0x1f6))/0x1+parseInt(_0x5c6ed3(0x1ee))/0x2+parseInt(_0x5c6ed3(0x1f0))/0x3+parseInt(_0x5c6ed3(0x215))/0x4*(parseInt(_0x5c6ed3(0x1fa))/0x5)+parseInt(_0x5c6ed3(0x1f2))/0x6*(-parseInt(_0x5c6ed3(0x21e))/0x7)+-parseInt(_0x5c6ed3(0x21b))/0x8*(parseInt(_0x5c6ed3(0x217))/0x9)+parseInt(_0x5c6ed3(0x208))/0xa;if(_0x3843eb===_0x51a496)break;else _0x385400['push'](_0x385400['shift']());}catch(_0x459289){_0x385400['push'](_0x385400['shift']());}}}(_0x2136,0xe6c65));var __decorate=this&&this['__decorate']||function(_0x1fb6b4,_0x44e8c9,_0xd98579,_0x43283b){const _0x2b33b7=_0x1114;var _0x299e5a=arguments[_0x2b33b7(0x1eb)],_0x276113=_0x299e5a<0x3?_0x44e8c9:_0x43283b===null?_0x43283b=Object[_0x2b33b7(0x216)](_0x44e8c9,_0xd98579):_0x43283b,_0xcb7a23;if(typeof Reflect===_0x2b33b7(0x1f9)&&typeof Reflect[_0x2b33b7(0x1fb)]===_0x2b33b7(0x20e))_0x276113=Reflect[_0x2b33b7(0x1fb)](_0x1fb6b4,_0x44e8c9,_0xd98579,_0x43283b);else{for(var _0x5b91a3=_0x1fb6b4[_0x2b33b7(0x1eb)]-0x1;_0x5b91a3>=0x0;_0x5b91a3--)if(_0xcb7a23=_0x1fb6b4[_0x5b91a3])_0x276113=(_0x299e5a<0x3?_0xcb7a23(_0x276113):_0x299e5a>0x3?_0xcb7a23(_0x44e8c9,_0xd98579,_0x276113):_0xcb7a23(_0x44e8c9,_0xd98579))||_0x276113;}return _0x299e5a>0x3&&_0x276113&&Object['defineProperty'](_0x44e8c9,_0xd98579,_0x276113),_0x276113;},__metadata=this&&this[_0x2c79b2(0x21c)]||function(_0x17bbfc,_0x11cfc3){const _0xd7c320=_0x2c79b2;if(typeof Reflect===_0xd7c320(0x1f9)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x17bbfc,_0x11cfc3);},__param=this&&this['__param']||function(_0x579d3e,_0x128b27){return function(_0x15f7e0,_0x15158e){_0x128b27(_0x15f7e0,_0x15158e,_0x579d3e);};};function _0x1114(_0xb8fb47,_0x46e05b){const _0x2136c4=_0x2136();return _0x1114=function(_0x111424,_0x2247d3){_0x111424=_0x111424-0x1eb;let _0x368436=_0x2136c4[_0x111424];return _0x368436;},_0x1114(_0xb8fb47,_0x46e05b);}Object[_0x2c79b2(0x20c)](exports,_0x2c79b2(0x1fc),{'value':!![]}),exports[_0x2c79b2(0x205)]=void 0x0;function _0x2136(){const _0x10c84a=['delMenu','48pQzeRb','__metadata','find','87437OdnSpw','InjectRepository','update','length','isSystem','queryMenu','2875568NzttCM','BAD_REQUEST','2269209NswwqT','./menu.entity','822wrhgOc','Injectable','ASC','保存菜单失败error','620579dYQysm','affected','操作菜单失败!','object','125875sXwalY','decorate','__esModule','menuEntity','saasId','delete','getReqSaasId','concat','Repository','menuPlatform','findOne','MenuService','@nestjs/typeorm','menuPath','2305350krvLki','nestjs-cls','clsService','HttpStatus','defineProperty','HttpException','function','../../common/utils','updateIcon','setMenu','typeorm','缺失必要参数!','design:paramtypes','148pslqhZ','getOwnPropertyDescriptor','118647tkgoNX','MenuEntity','initMenu'];_0x2136=function(){return _0x10c84a;};return _0x2136();}const common_1=require('@nestjs/common'),typeorm_1=require(_0x2c79b2(0x206)),typeorm_2=require(_0x2c79b2(0x212)),menu_entity_1=require(_0x2c79b2(0x1f1)),utils_1=require(_0x2c79b2(0x20f)),nestjs_cls_1=require(_0x2c79b2(0x209));let MenuService=class MenuService{constructor(_0x304152,_0xa26eb1){const _0x118f63=_0x2c79b2;this['menuEntity']=_0x304152,this[_0x118f63(0x20a)]=_0xa26eb1;}async['onModuleInit'](){const _0x1a348f=_0x2c79b2;await this[_0x1a348f(0x219)]();}async[_0x2c79b2(0x219)](){const _0x455cf3=_0x2c79b2,_0x3671c7=[],_0x223a46=[],_0xa8d10b=_0x3671c7[_0x455cf3(0x201)](_0x223a46),_0x573e08=await this[_0x455cf3(0x1fd)][_0x455cf3(0x21d)]({'where':{'menuType':0x0}});for(let _0x8ccad9=0x0;_0x8ccad9<_0xa8d10b['length'];_0x8ccad9++){const _0xab2a3e=_0xa8d10b[_0x8ccad9],_0x1ff1a5=_0x573e08[_0x455cf3(0x21d)](_0x3d51d7=>_0x3d51d7[_0x455cf3(0x207)]===_0xab2a3e['menuPath']&&_0x3d51d7[_0x455cf3(0x203)]===_0xab2a3e[_0x455cf3(0x203)]);!_0x1ff1a5&&await this[_0x455cf3(0x1fd)]['save'](_0xab2a3e);}}async[_0x2c79b2(0x1ed)](_0x2a2bc6){const _0x117521=_0x2c79b2,{menuPlatform:_0x337de2,saasId:_0x54c232}=_0x2a2bc6,_0x13cbb7=(0x0,utils_1[_0x117521(0x200)])(this[_0x117521(0x20a)]);let _0x2cdd44={};return _0x337de2&&(_0x2cdd44['menuPlatform']=_0x337de2),_0x13cbb7&&(_0x2cdd44[_0x117521(0x1fe)]=_0x13cbb7),_0x54c232&&(_0x2cdd44['saasId']=_0x54c232),await this['menuEntity'][_0x117521(0x21d)]({'where':_0x2cdd44,'order':{'order':_0x117521(0x1f4)}});}async['menuListFront'](_0x282801){const _0x271e5a=_0x2c79b2,{menuPlatform:_0x1e878d,saasId:_0x3f85e3}=_0x282801;let _0x17d416={'isShow':!![]};const _0x23fb9f=(0x0,utils_1[_0x271e5a(0x200)])(this[_0x271e5a(0x20a)]);return _0x1e878d&&(_0x17d416['menuPlatform']=_0x1e878d),_0x23fb9f!=undefined&&_0x23fb9f!==-0x1&&(_0x17d416[_0x271e5a(0x1fe)]=_0x23fb9f),_0x3f85e3&&(_0x17d416['saasId']=_0x3f85e3),await this[_0x271e5a(0x1fd)][_0x271e5a(0x21d)]({'where':_0x17d416,'order':{'order':_0x271e5a(0x1f4)}});}async['visibleMenu'](_0x46def3){const _0x4a523c=_0x2c79b2,{id:_0x483529}=_0x46def3;if(!_0x483529)return;const _0x1779bd=await this[_0x4a523c(0x1fd)][_0x4a523c(0x204)]({'where':{'id':_0x483529}});if(!_0x1779bd)return;const {isShow:_0x375fb0}=_0x1779bd,_0x196003=await this[_0x4a523c(0x1fd)][_0x4a523c(0x220)]({'id':_0x483529},{'isShow':!_0x375fb0});return _0x196003['affected']>0x0;}async[_0x2c79b2(0x211)](_0x3e1fee){const _0x5680a0=_0x2c79b2,{id:_0x205b5d}=_0x3e1fee,_0x46464a=(0x0,utils_1['getReqSaasId'])(this[_0x5680a0(0x20a)]);(!_0x3e1fee[_0x5680a0(0x1fe)]||_0x3e1fee[_0x5680a0(0x1fe)]==-0x1)&&(_0x3e1fee['saasId']=_0x46464a);delete _0x3e1fee[_0x5680a0(0x1ec)];try{if(_0x205b5d){const _0x20b3ec=await this[_0x5680a0(0x1fd)][_0x5680a0(0x220)]({'id':_0x205b5d},_0x3e1fee);return _0x20b3ec[_0x5680a0(0x1f7)]>0x0;}else{const _0x5594bf=await this[_0x5680a0(0x1fd)]['save'](_0x3e1fee);return _0x5594bf;}}catch(_0xa8c5bc){console['log'](_0x5680a0(0x1f5),_0xa8c5bc);throw new common_1['HttpException'](_0x5680a0(0x1f8),common_1['HttpStatus'][_0x5680a0(0x1ef)]);}}async[_0x2c79b2(0x21a)](_0x12d6f1){const _0x1b8343=_0x2c79b2,{id:_0x5303de}=_0x12d6f1;if(!_0x5303de)throw new common_1[(_0x1b8343(0x20d))](_0x1b8343(0x213),common_1[_0x1b8343(0x20b)][_0x1b8343(0x1ef)]);const _0x37624f=await this[_0x1b8343(0x1fd)][_0x1b8343(0x1ff)]({'id':_0x5303de});return _0x37624f;}async[_0x2c79b2(0x210)](_0x4576a8){const _0x25f336=_0x2c79b2,{id:_0x2732fd,menuIcon:_0x2b289c,menuName:_0x5a330b,order:_0xd54c85}=_0x4576a8;if(!_0x2732fd||!_0x2b289c||!_0x5a330b||!_0xd54c85)throw new common_1['HttpException'](_0x25f336(0x213),common_1[_0x25f336(0x20b)][_0x25f336(0x1ef)]);const _0x157f7c=await this['menuEntity']['update']({'id':_0x2732fd},{'menuIcon':_0x2b289c,'menuName':_0x5a330b,'order':_0xd54c85});return _0x157f7c[_0x25f336(0x1f7)]>0x0;}};MenuService=__decorate([(0x0,common_1[_0x2c79b2(0x1f3)])(),__param(0x0,(0x0,typeorm_1[_0x2c79b2(0x21f)])(menu_entity_1[_0x2c79b2(0x218)])),__metadata(_0x2c79b2(0x214),[typeorm_2[_0x2c79b2(0x202)],nestjs_cls_1['ClsService']])],MenuService),exports[_0x2c79b2(0x205)]=MenuService;