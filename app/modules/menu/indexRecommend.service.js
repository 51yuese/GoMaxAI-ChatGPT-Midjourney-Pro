'use strict';const _0x5f3e0c=_0xd8ea;function _0xd8ea(_0x378ede,_0x43b269){const _0x5e284c=_0x5e28();return _0xd8ea=function(_0xd8ea3a,_0xc82273){_0xd8ea3a=_0xd8ea3a-0x79;let _0x34a1a3=_0x5e284c[_0xd8ea3a];return _0x34a1a3;},_0xd8ea(_0x378ede,_0x43b269);}(function(_0x2e64de,_0x55787a){const _0x4621d3=_0xd8ea,_0x352c91=_0x2e64de();while(!![]){try{const _0x4f7c1f=-parseInt(_0x4621d3(0x82))/0x1+-parseInt(_0x4621d3(0x8c))/0x2+-parseInt(_0x4621d3(0xa6))/0x3+-parseInt(_0x4621d3(0x80))/0x4+-parseInt(_0x4621d3(0x92))/0x5+-parseInt(_0x4621d3(0x81))/0x6+parseInt(_0x4621d3(0x8d))/0x7*(parseInt(_0x4621d3(0x96))/0x8);if(_0x4f7c1f===_0x55787a)break;else _0x352c91['push'](_0x352c91['shift']());}catch(_0x31cf28){_0x352c91['push'](_0x352c91['shift']());}}}(_0x5e28,0x590b2));var __decorate=this&&this['__decorate']||function(_0x237115,_0x106606,_0x9def9b,_0x236fbd){const _0x34a7ea=_0xd8ea;var _0x3747d7=arguments[_0x34a7ea(0xa0)],_0x7b508a=_0x3747d7<0x3?_0x106606:_0x236fbd===null?_0x236fbd=Object['getOwnPropertyDescriptor'](_0x106606,_0x9def9b):_0x236fbd,_0x2de6f8;if(typeof Reflect===_0x34a7ea(0xa7)&&typeof Reflect['decorate']===_0x34a7ea(0xa3))_0x7b508a=Reflect[_0x34a7ea(0xa2)](_0x237115,_0x106606,_0x9def9b,_0x236fbd);else{for(var _0x5bfdda=_0x237115[_0x34a7ea(0xa0)]-0x1;_0x5bfdda>=0x0;_0x5bfdda--)if(_0x2de6f8=_0x237115[_0x5bfdda])_0x7b508a=(_0x3747d7<0x3?_0x2de6f8(_0x7b508a):_0x3747d7>0x3?_0x2de6f8(_0x106606,_0x9def9b,_0x7b508a):_0x2de6f8(_0x106606,_0x9def9b))||_0x7b508a;}return _0x3747d7>0x3&&_0x7b508a&&Object[_0x34a7ea(0xae)](_0x106606,_0x9def9b,_0x7b508a),_0x7b508a;},__metadata=this&&this[_0x5f3e0c(0xa5)]||function(_0x448ed0,_0x893a9a){const _0x1ab5ea=_0x5f3e0c;if(typeof Reflect===_0x1ab5ea(0xa7)&&typeof Reflect[_0x1ab5ea(0x95)]===_0x1ab5ea(0xa3))return Reflect[_0x1ab5ea(0x95)](_0x448ed0,_0x893a9a);},__param=this&&this[_0x5f3e0c(0x7f)]||function(_0x4afedf,_0x489a57){return function(_0x56593f,_0x2375f8){_0x489a57(_0x56593f,_0x2375f8,_0x4afedf);};};function _0x5e28(){const _0x9e6993=['clsService','entity','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','length','__esModule','decorate','function','../../common/utils','__metadata','1719387XWuDuj','object','\x20AND\x20i.name\x20LIKE\x20\x27%','getReqSaasId','page','connection','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.tag_id\x20AS\x20tagId,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20AS\x20delFlag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s.`name`\x20AS\x20saasName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20d.dict_name\x20AS\x20tagName\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20saas\x20s\x20ON\x20i.saasId\x20=\x20s.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20ai_dict\x20d\x20ON\x20i.tag_id\x20=\x20d.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20AND\x20i.saasId\x20=\x20','defineProperty','Injectable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','saasId','query','save','__param','214724JOflMx','1550622myyVQf','27533lgxSKI','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.sort\x20ASC,\x20i.createdAt\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','design:paramtypes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20=\x200\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','typeorm','@nestjs/common','log','@nestjs/typeorm','ids','\x20AND\x20i.tag_id\x20=\x20','1256186WgCgFR','7617568paMSVf','InjectRepository','isPlatform','\x20OFFSET\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','1354265NxxphG','Connection','IndexRecommendEntity','metadata','16mczGeH','./IndexRecommend.entity','delete','IndexRecommendService','isDefined','\x20AND\x20i.type\x20=\x20\x27','update'];_0x5e28=function(){return _0x9e6993;};return _0x5e28();}Object[_0x5f3e0c(0xae)](exports,_0x5f3e0c(0xa1),{'value':!![]}),exports[_0x5f3e0c(0x99)]=void 0x0;const common_1=require(_0x5f3e0c(0x87)),typeorm_1=require(_0x5f3e0c(0x89)),typeorm_2=require(_0x5f3e0c(0x86)),IndexRecommend_entity_1=require(_0x5f3e0c(0x97)),utils_1=require(_0x5f3e0c(0xa4)),nestjs_cls_1=require('nestjs-cls');let IndexRecommendService=class IndexRecommendService{constructor(_0x10ac57,_0xb2ef62,_0x58d8d2){const _0x1f0012=_0x5f3e0c;this[_0x1f0012(0x9e)]=_0x10ac57,this[_0x1f0012(0x9d)]=_0xb2ef62,this[_0x1f0012(0xab)]=_0x58d8d2;}async[_0x5f3e0c(0xaa)](_0x170b1b){const _0x4f68e5=_0x5f3e0c,{page:page=0x1,size:size=0x14,type:_0x4db10b,tagId:_0x4b3488,notInTagId:_0x3c4310,keyword:_0x43d9fb,saasId:_0x36cf88}=_0x170b1b,_0x1e8d7e=(0x0,utils_1['getReqSaasId'])(this[_0x4f68e5(0x9d)]);let _0x101b12=_0x4f68e5(0x85)+(_0x4db10b?_0x4f68e5(0x9b)+_0x4db10b+'\x27':'')+_0x4f68e5(0x7b)+(_0x4b3488?_0x4f68e5(0x8b)+_0x4b3488:'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3c4310?'AND\x20i.tag_id\x20not\x20in\x20('+_0x3c4310+')':'')+_0x4f68e5(0x7b)+(_0x43d9fb?_0x4f68e5(0xa8)+_0x43d9fb+'%\x27':'')+_0x4f68e5(0x91);(0x0,utils_1[_0x4f68e5(0x8f)])(this[_0x4f68e5(0x9d)])?(0x0,utils_1[_0x4f68e5(0x9a)])(_0x36cf88)&&(_0x101b12=_0x101b12+(_0x4f68e5(0xad)+_0x36cf88)):_0x101b12=_0x101b12+(_0x4f68e5(0xad)+_0x1e8d7e);const [_0x30f48f]=await this[_0x4f68e5(0xab)][_0x4f68e5(0x7d)](_0x4f68e5(0x7a)+_0x101b12+_0x4f68e5(0x9f)),_0x21ba1b=await this[_0x4f68e5(0xab)][_0x4f68e5(0x7d)](_0x4f68e5(0xac)+_0x101b12+_0x4f68e5(0x83)+size+_0x4f68e5(0x90)+(page-0x1)*size+_0x4f68e5(0x91));return{'rows':_0x21ba1b,'count':_0x30f48f['count']};}async['save'](_0x55ad23){const _0x48c369=_0x5f3e0c;try{const _0x21be57={..._0x55ad23};if(!_0x55ad23['id']){const _0x142f48=(0x0,utils_1[_0x48c369(0xa9)])(this[_0x48c369(0x9d)]);_0x21be57[_0x48c369(0x7c)]=_0x142f48;}return await this['entity'][_0x48c369(0x7e)](_0x21be57),!![];}catch(_0x2e3234){console[_0x48c369(0x88)](_0x2e3234);}}async[_0x5f3e0c(0x98)](_0xad0ccf){const _0x497c4a=_0x5f3e0c;if(!_0xad0ccf['ids']||!_0xad0ccf[_0x497c4a(0x8a)])return!![];return await this[_0x497c4a(0x9e)][_0x497c4a(0x9c)]({'id':(0x0,typeorm_2['In'])(_0xad0ccf[_0x497c4a(0x8a)])},{'delFlag':0x1}),!![];}};IndexRecommendService=__decorate([(0x0,common_1[_0x5f3e0c(0x79)])(),__param(0x0,(0x0,typeorm_1[_0x5f3e0c(0x8e)])(IndexRecommend_entity_1[_0x5f3e0c(0x94)])),__metadata(_0x5f3e0c(0x84),[typeorm_2['Repository'],nestjs_cls_1['ClsService'],typeorm_2[_0x5f3e0c(0x93)]])],IndexRecommendService),exports['IndexRecommendService']=IndexRecommendService;