'use strict';const _0x5b536c=_0x1f31;(function(_0x281c49,_0x48d662){const _0x583fc9=_0x1f31,_0x27454d=_0x281c49();while(!![]){try{const _0x4d8dfa=parseInt(_0x583fc9(0x188))/0x1+-parseInt(_0x583fc9(0x19e))/0x2+parseInt(_0x583fc9(0x18b))/0x3*(-parseInt(_0x583fc9(0x175))/0x4)+parseInt(_0x583fc9(0x183))/0x5+-parseInt(_0x583fc9(0x193))/0x6+parseInt(_0x583fc9(0x197))/0x7+parseInt(_0x583fc9(0x173))/0x8;if(_0x4d8dfa===_0x48d662)break;else _0x27454d['push'](_0x27454d['shift']());}catch(_0x32a20d){_0x27454d['push'](_0x27454d['shift']());}}}(_0x1ab1,0xe7b5f));var __decorate=this&&this[_0x5b536c(0x181)]||function(_0xd61a16,_0x2dcd2e,_0x5a5305,_0x58c3d0){const _0x101210=_0x5b536c;var _0x4db5c0=arguments[_0x101210(0x1a1)],_0x35392e=_0x4db5c0<0x3?_0x2dcd2e:_0x58c3d0===null?_0x58c3d0=Object[_0x101210(0x191)](_0x2dcd2e,_0x5a5305):_0x58c3d0,_0xdaa138;if(typeof Reflect===_0x101210(0x17f)&&typeof Reflect[_0x101210(0x1a5)]===_0x101210(0x17e))_0x35392e=Reflect[_0x101210(0x1a5)](_0xd61a16,_0x2dcd2e,_0x5a5305,_0x58c3d0);else{for(var _0x474d5f=_0xd61a16[_0x101210(0x1a1)]-0x1;_0x474d5f>=0x0;_0x474d5f--)if(_0xdaa138=_0xd61a16[_0x474d5f])_0x35392e=(_0x4db5c0<0x3?_0xdaa138(_0x35392e):_0x4db5c0>0x3?_0xdaa138(_0x2dcd2e,_0x5a5305,_0x35392e):_0xdaa138(_0x2dcd2e,_0x5a5305))||_0x35392e;}return _0x4db5c0>0x3&&_0x35392e&&Object['defineProperty'](_0x2dcd2e,_0x5a5305,_0x35392e),_0x35392e;},__metadata=this&&this[_0x5b536c(0x18e)]||function(_0x6eeb69,_0x594150){const _0xcce2fa=_0x5b536c;if(typeof Reflect===_0xcce2fa(0x17f)&&typeof Reflect[_0xcce2fa(0x185)]===_0xcce2fa(0x17e))return Reflect['metadata'](_0x6eeb69,_0x594150);},__param=this&&this[_0x5b536c(0x1a2)]||function(_0x26b2b1,_0x301943){return function(_0x2713d8,_0x4d2fff){_0x301943(_0x2713d8,_0x4d2fff,_0x26b2b1);};};Object['defineProperty'](exports,_0x5b536c(0x18d),{'value':!![]}),exports[_0x5b536c(0x17c)]=void 0x0;function _0x1ab1(){const _0x96db88=['__esModule','__metadata','isDefined','query','getOwnPropertyDescriptor','entity','4340994TmGPYs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','clsService','\x20AND\x20i.name\x20LIKE\x20\x27%','9155314EIevmf','\x20AND\x20i.tag_id\x20=\x20','./IndexRecommend.entity','log','\x20AND\x20i.type\x20=\x20\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.tag_id\x20AS\x20tagId,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20AS\x20delFlag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s.`name`\x20AS\x20saasName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20d.dict_name\x20AS\x20tagName\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20saas\x20s\x20ON\x20i.saasId\x20=\x20s.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20ai_dict\x20d\x20ON\x20i.tag_id\x20=\x20d.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','2853890kSOiiN','ClsService','\x20AND\x20i.saasId\x20=\x20','length','__param','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20=\x200\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20OFFSET\x20','decorate','18210792lzZCKQ','@nestjs/common','6478760KUQxOh','../../common/utils','count','InjectRepository','IndexRecommendEntity','connection','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.sort\x20ASC,\x20i.createdAt\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','IndexRecommendService','save','function','object','getReqSaasId','__decorate','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','4856630aybEUO','Injectable','metadata','saasId','typeorm','163644lCfQTb','update','delete','3YhzRmP','ids'];_0x1ab1=function(){return _0x96db88;};return _0x1ab1();}const common_1=require(_0x5b536c(0x174)),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x5b536c(0x187)),IndexRecommend_entity_1=require(_0x5b536c(0x199)),utils_1=require(_0x5b536c(0x176)),nestjs_cls_1=require('nestjs-cls');function _0x1f31(_0x413b4f,_0x3e3c2d){const _0x1ab1ab=_0x1ab1();return _0x1f31=function(_0x1f31fa,_0x479658){_0x1f31fa=_0x1f31fa-0x173;let _0x565927=_0x1ab1ab[_0x1f31fa];return _0x565927;},_0x1f31(_0x413b4f,_0x3e3c2d);}let IndexRecommendService=class IndexRecommendService{constructor(_0x48989a,_0x68597f,_0x3f758a){const _0x9d545b=_0x5b536c;this[_0x9d545b(0x192)]=_0x48989a,this['clsService']=_0x68597f,this['connection']=_0x3f758a;}async['page'](_0x37e147){const _0x107377=_0x5b536c,{page:page=0x1,size:size=0x14,type:_0x2d7d12,tagId:_0x1d3034,keyword:_0x31491b,saasId:_0x476d71}=_0x37e147,_0x58ec3f=(0x0,utils_1[_0x107377(0x180)])(this[_0x107377(0x195)]);let _0x15fe9a=_0x107377(0x1a3)+(_0x2d7d12?_0x107377(0x19b)+_0x2d7d12+'\x27':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1d3034?_0x107377(0x198)+_0x1d3034:'')+_0x107377(0x19c)+(_0x31491b?_0x107377(0x196)+_0x31491b+'%\x27':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';(0x0,utils_1['isPlatform'])(this['clsService'])?(0x0,utils_1[_0x107377(0x18f)])(_0x476d71)&&(_0x15fe9a=_0x15fe9a+(_0x107377(0x1a0)+_0x476d71)):_0x15fe9a=_0x15fe9a+(_0x107377(0x1a0)+_0x58ec3f);const [_0x124c19]=await this[_0x107377(0x17a)][_0x107377(0x190)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x15fe9a+_0x107377(0x182)),_0x467b76=await this[_0x107377(0x17a)]['query'](_0x107377(0x19d)+_0x15fe9a+_0x107377(0x17b)+size+_0x107377(0x1a4)+(page-0x1)*size+_0x107377(0x194));return{'rows':_0x467b76,'count':_0x124c19[_0x107377(0x177)]};}async['save'](_0x5e0e67){const _0x4e3191=_0x5b536c;try{const _0x1ca6c7={..._0x5e0e67};if(!_0x5e0e67['id']){const _0xca073d=(0x0,utils_1['getReqSaasId'])(this['clsService']);_0x1ca6c7[_0x4e3191(0x186)]=_0xca073d;}return await this[_0x4e3191(0x192)][_0x4e3191(0x17d)](_0x1ca6c7),!![];}catch(_0x1e61eb){console[_0x4e3191(0x19a)](_0x1e61eb);}}async[_0x5b536c(0x18a)](_0x406fa0){const _0x4941a9=_0x5b536c;if(!_0x406fa0['ids']||!_0x406fa0['ids'])return!![];return await this['entity'][_0x4941a9(0x189)]({'id':(0x0,typeorm_2['In'])(_0x406fa0[_0x4941a9(0x18c)])},{'delFlag':0x1}),!![];}};IndexRecommendService=__decorate([(0x0,common_1[_0x5b536c(0x184)])(),__param(0x0,(0x0,typeorm_1[_0x5b536c(0x178)])(IndexRecommend_entity_1[_0x5b536c(0x179)])),__metadata('design:paramtypes',[typeorm_2['Repository'],nestjs_cls_1[_0x5b536c(0x19f)],typeorm_2['Connection']])],IndexRecommendService),exports[_0x5b536c(0x17c)]=IndexRecommendService;