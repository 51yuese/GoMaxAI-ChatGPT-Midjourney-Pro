'use strict';const _0x5a7d32=_0x1f2d;(function(_0xd94ef9,_0x3f4ec8){const _0x3f9362=_0x1f2d,_0x278312=_0xd94ef9();while(!![]){try{const _0x5be74c=-parseInt(_0x3f9362(0xdb))/0x1+-parseInt(_0x3f9362(0xb2))/0x2+parseInt(_0x3f9362(0xd8))/0x3*(parseInt(_0x3f9362(0xbf))/0x4)+parseInt(_0x3f9362(0xb0))/0x5*(parseInt(_0x3f9362(0xd1))/0x6)+parseInt(_0x3f9362(0xd0))/0x7+-parseInt(_0x3f9362(0xb4))/0x8+parseInt(_0x3f9362(0xbe))/0x9;if(_0x5be74c===_0x3f4ec8)break;else _0x278312['push'](_0x278312['shift']());}catch(_0x31f431){_0x278312['push'](_0x278312['shift']());}}}(_0x4f51,0xb80a4));var __decorate=this&&this[_0x5a7d32(0xcb)]||function(_0x12fde5,_0x2cb339,_0x2a1296,_0x22d19a){const _0x1e7a87=_0x5a7d32;var _0x28a233=arguments[_0x1e7a87(0xcd)],_0x17c83b=_0x28a233<0x3?_0x2cb339:_0x22d19a===null?_0x22d19a=Object[_0x1e7a87(0xbb)](_0x2cb339,_0x2a1296):_0x22d19a,_0x8eb061;if(typeof Reflect===_0x1e7a87(0xc5)&&typeof Reflect[_0x1e7a87(0xdd)]===_0x1e7a87(0xb3))_0x17c83b=Reflect['decorate'](_0x12fde5,_0x2cb339,_0x2a1296,_0x22d19a);else{for(var _0x4a1c6a=_0x12fde5[_0x1e7a87(0xcd)]-0x1;_0x4a1c6a>=0x0;_0x4a1c6a--)if(_0x8eb061=_0x12fde5[_0x4a1c6a])_0x17c83b=(_0x28a233<0x3?_0x8eb061(_0x17c83b):_0x28a233>0x3?_0x8eb061(_0x2cb339,_0x2a1296,_0x17c83b):_0x8eb061(_0x2cb339,_0x2a1296))||_0x17c83b;}return _0x28a233>0x3&&_0x17c83b&&Object[_0x1e7a87(0xd9)](_0x2cb339,_0x2a1296,_0x17c83b),_0x17c83b;},__metadata=this&&this[_0x5a7d32(0xbd)]||function(_0x2b0021,_0x57b1a9){const _0x3a85d4=_0x5a7d32;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x3a85d4(0xaa)](_0x2b0021,_0x57b1a9);},__param=this&&this['__param']||function(_0x59c522,_0x4f91f1){return function(_0x1fa4e1,_0x47527e){_0x4f91f1(_0x1fa4e1,_0x47527e,_0x59c522);};};Object['defineProperty'](exports,_0x5a7d32(0xc2),{'value':!![]}),exports[_0x5a7d32(0xda)]=void 0x0;function _0x4f51(){const _0x26f8b2=['update','Injectable','object','count','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ClsService','connection','\x20AND\x20i.saasId\x20=\x20','__decorate','Connection','length','typeorm','Repository','4763549aRzLpQ','4422PFXHWW','IndexRecommendEntity','isDefined','entity','AND\x20i.tag_id\x20not\x20in\x20(','isPlatform','./IndexRecommend.entity','21RYeqLH','defineProperty','IndexRecommendService','988230zruXCh','log','decorate','getReqSaasId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','metadata','\x20OFFSET\x20','query','ids','clsService','delete','3585yUCxHC','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20=\x200\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','2961894nMnvDW','function','11675120cIpfrz','@nestjs/typeorm','\x20AND\x20i.type\x20=\x20\x27','save','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.tag_id\x20AS\x20tagId,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20AS\x20delFlag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s.`name`\x20AS\x20saasName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20d.dict_name\x20AS\x20tagName\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20saas\x20s\x20ON\x20i.saasId\x20=\x20s.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20ai_dict\x20d\x20ON\x20i.tag_id\x20=\x20d.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','nestjs-cls','getOwnPropertyDescriptor','page','__metadata','30230766klTzTu','65420HLzTZH','\x20AND\x20i.name\x20LIKE\x20\x27%','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','__esModule'];_0x4f51=function(){return _0x26f8b2;};return _0x4f51();}const common_1=require('@nestjs/common'),typeorm_1=require(_0x5a7d32(0xb5)),typeorm_2=require(_0x5a7d32(0xce)),IndexRecommend_entity_1=require(_0x5a7d32(0xd7)),utils_1=require('../../common/utils'),nestjs_cls_1=require(_0x5a7d32(0xba));function _0x1f2d(_0x331295,_0x53e5fe){const _0x4f5196=_0x4f51();return _0x1f2d=function(_0x1f2da3,_0x2be9b6){_0x1f2da3=_0x1f2da3-0xa8;let _0x41fdae=_0x4f5196[_0x1f2da3];return _0x41fdae;},_0x1f2d(_0x331295,_0x53e5fe);}let IndexRecommendService=class IndexRecommendService{constructor(_0x1e9d0c,_0x291278,_0x3c5db6){const _0x4c5cc8=_0x5a7d32;this[_0x4c5cc8(0xd4)]=_0x1e9d0c,this[_0x4c5cc8(0xae)]=_0x291278,this['connection']=_0x3c5db6;}async[_0x5a7d32(0xbc)](_0x2f5043){const _0x60222b=_0x5a7d32,{page:page=0x1,size:size=0x14,type:_0x8e19aa,tagId:_0x2f38ea,notInTagId:_0x1187a4,keyword:_0x19b204,saasId:_0x117259}=_0x2f5043,_0x54091a=(0x0,utils_1['getReqSaasId'])(this[_0x60222b(0xae)]);let _0x538c1e=_0x60222b(0xb1)+(_0x8e19aa?_0x60222b(0xb6)+_0x8e19aa+'\x27':'')+_0x60222b(0xc7)+(_0x2f38ea?'\x20AND\x20i.tag_id\x20=\x20'+_0x2f38ea:'')+_0x60222b(0xc7)+(_0x1187a4?_0x60222b(0xd5)+_0x1187a4+')':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x19b204?_0x60222b(0xc0)+_0x19b204+'%\x27':'')+_0x60222b(0xa9);(0x0,utils_1[_0x60222b(0xd6)])(this['clsService'])?(0x0,utils_1[_0x60222b(0xd3)])(_0x117259)&&(_0x538c1e=_0x538c1e+(_0x60222b(0xca)+_0x117259)):_0x538c1e=_0x538c1e+(_0x60222b(0xca)+_0x54091a);const [_0x3b44df]=await this[_0x60222b(0xc9)][_0x60222b(0xac)](_0x60222b(0xb8)+_0x538c1e+_0x60222b(0xc1)),_0x396547=await this['connection'][_0x60222b(0xac)](_0x60222b(0xb9)+_0x538c1e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.sort\x20ASC,\x20i.createdAt\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20'+size+_0x60222b(0xab)+(page-0x1)*size+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20');return{'rows':_0x396547,'count':_0x3b44df[_0x60222b(0xc6)]};}async['save'](_0x469ab9){const _0x2c19fb=_0x5a7d32;try{const _0x3b0a95={..._0x469ab9};if(!_0x469ab9['id']){const _0x9e1efb=(0x0,utils_1[_0x2c19fb(0xa8)])(this[_0x2c19fb(0xae)]);_0x3b0a95['saasId']=_0x9e1efb;}return await this['entity'][_0x2c19fb(0xb7)](_0x3b0a95),!![];}catch(_0x12682c){console[_0x2c19fb(0xdc)](_0x12682c);}}async[_0x5a7d32(0xaf)](_0x181615){const _0x5d6be7=_0x5a7d32;if(!_0x181615['ids']||!_0x181615[_0x5d6be7(0xad)])return!![];return await this[_0x5d6be7(0xd4)][_0x5d6be7(0xc3)]({'id':(0x0,typeorm_2['In'])(_0x181615[_0x5d6be7(0xad)])},{'delFlag':0x1}),!![];}};IndexRecommendService=__decorate([(0x0,common_1[_0x5a7d32(0xc4)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(IndexRecommend_entity_1[_0x5a7d32(0xd2)])),__metadata('design:paramtypes',[typeorm_2[_0x5a7d32(0xcf)],nestjs_cls_1[_0x5a7d32(0xc8)],typeorm_2[_0x5a7d32(0xcc)]])],IndexRecommendService),exports['IndexRecommendService']=IndexRecommendService;