'use strict';const _0x2a5712=_0x1341;function _0x29f1(){const _0x37d3de=['__esModule','1376390NQkQUC','IndexRecommendService','../../common/utils','@nestjs/typeorm','defineProperty','\x20AND\x20i.saasId\x20=\x20','Injectable','clsService','count','./IndexRecommend.entity','isDefined','connection','665442PhUwui','metadata','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','1690168CZnSGq','24268jlThDZ','6695KhxTXB','save','function','object','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20=\x200\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.tag_id\x20AS\x20tagId,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20AS\x20delFlag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s.`name`\x20AS\x20saasName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20d.dict_name\x20AS\x20tagName\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20saas\x20s\x20ON\x20i.saasId\x20=\x20s.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20ai_dict\x20d\x20ON\x20i.tag_id\x20=\x20d.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','22hbPhOg','@nestjs/common','__metadata','29bivJTR','10IPGwPH','decorate','IndexRecommendEntity','\x20AND\x20i.type\x20=\x20\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.sort\x20ASC,\x20i.createdAt\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','AND\x20i.tag_id\x20not\x20in\x20(','typeorm','saasId','length','9sBpPyh','log','2457245sXGGHd','240148hrCUmZ','18WUeynZ','__decorate','__param','isPlatform','\x20OFFSET\x20','ids','\x20AND\x20i.tag_id\x20=\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','design:paramtypes','delete','22692LjBhjx','Repository','entity'];_0x29f1=function(){return _0x37d3de;};return _0x29f1();}(function(_0x388aee,_0x287483){const _0xe2f056=_0x1341,_0x472396=_0x388aee();while(!![]){try{const _0x5d338f=parseInt(_0xe2f056(0x1ae))/0x1*(-parseInt(_0xe2f056(0x1a4))/0x2)+parseInt(_0xe2f056(0x1bc))/0x3*(-parseInt(_0xe2f056(0x1bb))/0x4)+-parseInt(_0xe2f056(0x1af))/0x5*(-parseInt(_0xe2f056(0x19f))/0x6)+-parseInt(_0xe2f056(0x1ba))/0x7+-parseInt(_0xe2f056(0x1a3))/0x8*(parseInt(_0xe2f056(0x1b8))/0x9)+-parseInt(_0xe2f056(0x193))/0xa*(-parseInt(_0xe2f056(0x1ab))/0xb)+parseInt(_0xe2f056(0x18f))/0xc*(parseInt(_0xe2f056(0x1a5))/0xd);if(_0x5d338f===_0x287483)break;else _0x472396['push'](_0x472396['shift']());}catch(_0x4c9675){_0x472396['push'](_0x472396['shift']());}}}(_0x29f1,0x2ffbf));function _0x1341(_0x1061e6,_0x3c97f8){const _0x29f1f4=_0x29f1();return _0x1341=function(_0x1341d7,_0x7c924f){_0x1341d7=_0x1341d7-0x18a;let _0x18418e=_0x29f1f4[_0x1341d7];return _0x18418e;},_0x1341(_0x1061e6,_0x3c97f8);}var __decorate=this&&this[_0x2a5712(0x1bd)]||function(_0x4913e4,_0x3ef3b9,_0x2dc156,_0xfea566){const _0x58701d=_0x2a5712;var _0x3730e8=arguments[_0x58701d(0x1b7)],_0x5839aa=_0x3730e8<0x3?_0x3ef3b9:_0xfea566===null?_0xfea566=Object['getOwnPropertyDescriptor'](_0x3ef3b9,_0x2dc156):_0xfea566,_0xe9713e;if(typeof Reflect===_0x58701d(0x1a8)&&typeof Reflect[_0x58701d(0x1b0)]===_0x58701d(0x1a7))_0x5839aa=Reflect['decorate'](_0x4913e4,_0x3ef3b9,_0x2dc156,_0xfea566);else{for(var _0x554f4c=_0x4913e4[_0x58701d(0x1b7)]-0x1;_0x554f4c>=0x0;_0x554f4c--)if(_0xe9713e=_0x4913e4[_0x554f4c])_0x5839aa=(_0x3730e8<0x3?_0xe9713e(_0x5839aa):_0x3730e8>0x3?_0xe9713e(_0x3ef3b9,_0x2dc156,_0x5839aa):_0xe9713e(_0x3ef3b9,_0x2dc156))||_0x5839aa;}return _0x3730e8>0x3&&_0x5839aa&&Object['defineProperty'](_0x3ef3b9,_0x2dc156,_0x5839aa),_0x5839aa;},__metadata=this&&this[_0x2a5712(0x1ad)]||function(_0xb4cd4,_0x16ab19){const _0x53ae01=_0x2a5712;if(typeof Reflect==='object'&&typeof Reflect[_0x53ae01(0x1a0)]===_0x53ae01(0x1a7))return Reflect[_0x53ae01(0x1a0)](_0xb4cd4,_0x16ab19);},__param=this&&this[_0x2a5712(0x1be)]||function(_0x545312,_0x379a74){return function(_0x407301,_0x15a5d4){_0x379a74(_0x407301,_0x15a5d4,_0x545312);};};Object[_0x2a5712(0x197)](exports,_0x2a5712(0x192),{'value':!![]}),exports[_0x2a5712(0x194)]=void 0x0;const common_1=require(_0x2a5712(0x1ac)),typeorm_1=require(_0x2a5712(0x196)),typeorm_2=require(_0x2a5712(0x1b5)),IndexRecommend_entity_1=require(_0x2a5712(0x19c)),utils_1=require(_0x2a5712(0x195)),nestjs_cls_1=require('nestjs-cls');let IndexRecommendService=class IndexRecommendService{constructor(_0x4b9c36,_0x1230f2,_0x6b3b36){const _0x244189=_0x2a5712;this['entity']=_0x4b9c36,this['clsService']=_0x1230f2,this[_0x244189(0x19e)]=_0x6b3b36;}async['page'](_0x496b87){const _0x3a272c=_0x2a5712,{page:page=0x1,size:size=0x14,type:_0x5a0f40,tagId:_0x1b281c,notInTagId:_0x1cdc33,keyword:_0x17c683,saasId:_0x14ec7b}=_0x496b87,_0x1be718=(0x0,utils_1['getReqSaasId'])(this[_0x3a272c(0x19a)]);let _0x50d892=_0x3a272c(0x1a9)+(_0x5a0f40?_0x3a272c(0x1b2)+_0x5a0f40+'\x27':'')+_0x3a272c(0x18c)+(_0x1b281c?_0x3a272c(0x18b)+_0x1b281c:'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1cdc33?_0x3a272c(0x1b4)+_0x1cdc33+')':'')+_0x3a272c(0x18c)+(_0x17c683?'\x20AND\x20i.name\x20LIKE\x20\x27%'+_0x17c683+'%\x27':'')+_0x3a272c(0x1a2);(0x0,utils_1[_0x3a272c(0x1bf)])(this[_0x3a272c(0x19a)])?(0x0,utils_1[_0x3a272c(0x19d)])(_0x14ec7b)&&(_0x50d892=_0x50d892+(_0x3a272c(0x198)+_0x14ec7b)):_0x50d892=_0x50d892+(_0x3a272c(0x198)+_0x1be718);const [_0x832043]=await this[_0x3a272c(0x19e)]['query'](_0x3a272c(0x1a1)+_0x50d892+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),_0xee656=await this[_0x3a272c(0x19e)]['query'](_0x3a272c(0x1aa)+_0x50d892+_0x3a272c(0x1b3)+size+_0x3a272c(0x1c0)+(page-0x1)*size+_0x3a272c(0x1a2));return{'rows':_0xee656,'count':_0x832043[_0x3a272c(0x19b)]};}async[_0x2a5712(0x1a6)](_0x3516ef){const _0x280b48=_0x2a5712;try{const _0x5da5e8={..._0x3516ef};if(!_0x3516ef['id']){const _0x38a202=(0x0,utils_1['getReqSaasId'])(this[_0x280b48(0x19a)]);_0x5da5e8[_0x280b48(0x1b6)]=_0x38a202;}return await this[_0x280b48(0x191)][_0x280b48(0x1a6)](_0x5da5e8),!![];}catch(_0x27d64e){console[_0x280b48(0x1b9)](_0x27d64e);}}async[_0x2a5712(0x18e)](_0xff2b37){const _0x54713a=_0x2a5712;if(!_0xff2b37['ids']||!_0xff2b37[_0x54713a(0x18a)])return!![];return await this[_0x54713a(0x191)]['update']({'id':(0x0,typeorm_2['In'])(_0xff2b37[_0x54713a(0x18a)])},{'delFlag':0x1}),!![];}};IndexRecommendService=__decorate([(0x0,common_1[_0x2a5712(0x199)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(IndexRecommend_entity_1[_0x2a5712(0x1b1)])),__metadata(_0x2a5712(0x18d),[typeorm_2[_0x2a5712(0x190)],nestjs_cls_1['ClsService'],typeorm_2['Connection']])],IndexRecommendService),exports['IndexRecommendService']=IndexRecommendService;