'use strict';const _0x2697ea=_0x1467;(function(_0x10ac73,_0x478670){const _0x1e355a=_0x1467,_0x24bce6=_0x10ac73();while(!![]){try{const _0x534454=parseInt(_0x1e355a(0x149))/0x1+-parseInt(_0x1e355a(0x135))/0x2*(-parseInt(_0x1e355a(0x13e))/0x3)+parseInt(_0x1e355a(0x140))/0x4+parseInt(_0x1e355a(0x143))/0x5*(-parseInt(_0x1e355a(0x124))/0x6)+-parseInt(_0x1e355a(0x129))/0x7*(-parseInt(_0x1e355a(0x13d))/0x8)+-parseInt(_0x1e355a(0x134))/0x9+-parseInt(_0x1e355a(0x127))/0xa;if(_0x534454===_0x478670)break;else _0x24bce6['push'](_0x24bce6['shift']());}catch(_0x2bc293){_0x24bce6['push'](_0x24bce6['shift']());}}}(_0x341c,0xdd631));function _0x1467(_0x40e539,_0x3f59c7){const _0x341c14=_0x341c();return _0x1467=function(_0x1467dd,_0x18ef25){_0x1467dd=_0x1467dd-0x11c;let _0x1f6b98=_0x341c14[_0x1467dd];return _0x1f6b98;},_0x1467(_0x40e539,_0x3f59c7);}var __decorate=this&&this['__decorate']||function(_0x404618,_0x1642f4,_0x44ca78,_0x2e6c9a){const _0x133ee9=_0x1467;var _0x18f06a=arguments['length'],_0x541115=_0x18f06a<0x3?_0x1642f4:_0x2e6c9a===null?_0x2e6c9a=Object[_0x133ee9(0x142)](_0x1642f4,_0x44ca78):_0x2e6c9a,_0x1ea222;if(typeof Reflect===_0x133ee9(0x14c)&&typeof Reflect[_0x133ee9(0x126)]===_0x133ee9(0x11e))_0x541115=Reflect[_0x133ee9(0x126)](_0x404618,_0x1642f4,_0x44ca78,_0x2e6c9a);else{for(var _0x3235cf=_0x404618[_0x133ee9(0x12b)]-0x1;_0x3235cf>=0x0;_0x3235cf--)if(_0x1ea222=_0x404618[_0x3235cf])_0x541115=(_0x18f06a<0x3?_0x1ea222(_0x541115):_0x18f06a>0x3?_0x1ea222(_0x1642f4,_0x44ca78,_0x541115):_0x1ea222(_0x1642f4,_0x44ca78))||_0x541115;}return _0x18f06a>0x3&&_0x541115&&Object['defineProperty'](_0x1642f4,_0x44ca78,_0x541115),_0x541115;},__metadata=this&&this[_0x2697ea(0x120)]||function(_0x544218,_0x59093c){const _0x1512a2=_0x2697ea;if(typeof Reflect===_0x1512a2(0x14c)&&typeof Reflect[_0x1512a2(0x123)]==='function')return Reflect[_0x1512a2(0x123)](_0x544218,_0x59093c);},__param=this&&this[_0x2697ea(0x138)]||function(_0x3d81ef,_0x179818){return function(_0x75fed8,_0x1fddce){_0x179818(_0x75fed8,_0x1fddce,_0x3d81ef);};};Object[_0x2697ea(0x133)](exports,_0x2697ea(0x12d),{'value':!![]}),exports['IndexRecommendService']=void 0x0;const common_1=require(_0x2697ea(0x148)),typeorm_1=require(_0x2697ea(0x13f)),typeorm_2=require(_0x2697ea(0x14f)),IndexRecommend_entity_1=require(_0x2697ea(0x136)),utils_1=require('../../common/utils'),nestjs_cls_1=require(_0x2697ea(0x144));let IndexRecommendService=class IndexRecommendService{constructor(_0xfccfd4,_0x2bec04,_0x38e70f){const _0x319453=_0x2697ea;this[_0x319453(0x137)]=_0xfccfd4,this[_0x319453(0x14a)]=_0x2bec04,this['connection']=_0x38e70f;}async[_0x2697ea(0x11f)](_0xc2faa8){const _0x2a80ea=_0x2697ea,{page:page=0x1,size:size=0x14,type:_0x2ec002,tagId:_0x4df5a3,notInTagId:_0x55869f,keyword:_0x529cf1,saasId:_0x45306d}=_0xc2faa8,_0x290475=(0x0,utils_1[_0x2a80ea(0x14d)])(this[_0x2a80ea(0x14a)]);let _0x1d4504='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20=\x200\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2ec002?'\x20AND\x20i.type\x20=\x20\x27'+_0x2ec002+'\x27':'')+_0x2a80ea(0x150)+(_0x4df5a3?_0x2a80ea(0x146)+_0x4df5a3:'')+_0x2a80ea(0x150)+(_0x55869f?_0x2a80ea(0x141)+_0x55869f+')':'')+_0x2a80ea(0x150)+(_0x529cf1?_0x2a80ea(0x13c)+_0x529cf1+'%\x27':'')+_0x2a80ea(0x12c);(0x0,utils_1[_0x2a80ea(0x131)])(this[_0x2a80ea(0x14a)])?(0x0,utils_1[_0x2a80ea(0x128)])(_0x45306d)&&(_0x1d4504=_0x1d4504+(_0x2a80ea(0x125)+_0x45306d)):_0x1d4504=_0x1d4504+(_0x2a80ea(0x125)+_0x290475);const [_0x5b99c7]=await this[_0x2a80ea(0x11c)][_0x2a80ea(0x121)](_0x2a80ea(0x139)+_0x1d4504+_0x2a80ea(0x11d)),_0x1c6a2d=await this['connection'][_0x2a80ea(0x121)](_0x2a80ea(0x12a)+_0x1d4504+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.sort\x20ASC,\x20i.createdAt\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20'+size+_0x2a80ea(0x147)+(page-0x1)*size+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20');return{'rows':_0x1c6a2d,'count':_0x5b99c7['count']};}async[_0x2697ea(0x13b)](_0x2f03ce){const _0x53a4b3=_0x2697ea;try{const _0x353b97={..._0x2f03ce};if(!_0x2f03ce['id']){const _0x5a5ff1=(0x0,utils_1[_0x53a4b3(0x14d)])(this[_0x53a4b3(0x14a)]);_0x353b97['saasId']=_0x5a5ff1;}return await this[_0x53a4b3(0x137)][_0x53a4b3(0x13b)](_0x353b97),!![];}catch(_0x7bce8d){console[_0x53a4b3(0x145)](_0x7bce8d);}}async[_0x2697ea(0x14b)](_0x575596){const _0x4d1cd2=_0x2697ea;if(!_0x575596['ids']||!_0x575596[_0x4d1cd2(0x132)])return!![];return await this[_0x4d1cd2(0x137)][_0x4d1cd2(0x12e)]({'id':(0x0,typeorm_2['In'])(_0x575596[_0x4d1cd2(0x132)])},{'delFlag':0x1}),!![];}};function _0x341c(){const _0x154c8c=['@nestjs/common','974803UsqLrb','clsService','delete','object','getReqSaasId','ClsService','typeorm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','connection','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','function','page','__metadata','query','Connection','metadata','12Cntukx','\x20AND\x20i.saasId\x20=\x20','decorate','35355590fbMMWU','isDefined','48356itQOBK','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.tag_id\x20AS\x20tagId,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20AS\x20delFlag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s.`name`\x20AS\x20saasName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20d.dict_name\x20AS\x20tagName\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20saas\x20s\x20ON\x20i.saasId\x20=\x20s.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20ai_dict\x20d\x20ON\x20i.tag_id\x20=\x20d.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','__esModule','update','IndexRecommendService','Injectable','isPlatform','ids','defineProperty','4242510FjrTSf','143758ILEffa','./IndexRecommend.entity','entity','__param','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','IndexRecommendEntity','save','\x20AND\x20i.name\x20LIKE\x20\x27%','1960LfHSWc','69uhqAAT','@nestjs/typeorm','4363704cKFbPE','AND\x20i.tag_id\x20not\x20in\x20(','getOwnPropertyDescriptor','1244140WzokTE','nestjs-cls','log','\x20AND\x20i.tag_id\x20=\x20','\x20OFFSET\x20'];_0x341c=function(){return _0x154c8c;};return _0x341c();}IndexRecommendService=__decorate([(0x0,common_1[_0x2697ea(0x130)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(IndexRecommend_entity_1[_0x2697ea(0x13a)])),__metadata('design:paramtypes',[typeorm_2['Repository'],nestjs_cls_1[_0x2697ea(0x14e)],typeorm_2[_0x2697ea(0x122)]])],IndexRecommendService),exports[_0x2697ea(0x12f)]=IndexRecommendService;