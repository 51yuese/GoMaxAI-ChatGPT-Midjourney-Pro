'use strict';const _0x184e93=_0x37ee;(function(_0x661b6e,_0x5b1ce6){const _0x4d2f11=_0x37ee,_0x3ef955=_0x661b6e();while(!![]){try{const _0x4e6961=parseInt(_0x4d2f11(0x1a2))/0x1*(parseInt(_0x4d2f11(0x1ad))/0x2)+-parseInt(_0x4d2f11(0x1cb))/0x3+parseInt(_0x4d2f11(0x190))/0x4*(-parseInt(_0x4d2f11(0x1b4))/0x5)+parseInt(_0x4d2f11(0x182))/0x6*(parseInt(_0x4d2f11(0x172))/0x7)+parseInt(_0x4d2f11(0x1bd))/0x8+-parseInt(_0x4d2f11(0x185))/0x9*(-parseInt(_0x4d2f11(0x1e2))/0xa)+-parseInt(_0x4d2f11(0x180))/0xb*(parseInt(_0x4d2f11(0x1d8))/0xc);if(_0x4e6961===_0x5b1ce6)break;else _0x3ef955['push'](_0x3ef955['shift']());}catch(_0x261fe5){_0x3ef955['push'](_0x3ef955['shift']());}}}(_0x261d,0xbc7df));var __decorate=this&&this[_0x184e93(0x19f)]||function(_0x5729eb,_0x268b02,_0x40aa43,_0x111553){const _0x342aa5=_0x184e93;var _0x40ecfc=arguments[_0x342aa5(0x1ba)],_0x2d29b8=_0x40ecfc<0x3?_0x268b02:_0x111553===null?_0x111553=Object[_0x342aa5(0x161)](_0x268b02,_0x40aa43):_0x111553,_0x20b68e;if(typeof Reflect==='object'&&typeof Reflect[_0x342aa5(0x159)]===_0x342aa5(0x1bf))_0x2d29b8=Reflect[_0x342aa5(0x159)](_0x5729eb,_0x268b02,_0x40aa43,_0x111553);else{for(var _0x414ab4=_0x5729eb[_0x342aa5(0x1ba)]-0x1;_0x414ab4>=0x0;_0x414ab4--)if(_0x20b68e=_0x5729eb[_0x414ab4])_0x2d29b8=(_0x40ecfc<0x3?_0x20b68e(_0x2d29b8):_0x40ecfc>0x3?_0x20b68e(_0x268b02,_0x40aa43,_0x2d29b8):_0x20b68e(_0x268b02,_0x40aa43))||_0x2d29b8;}return _0x40ecfc>0x3&&_0x2d29b8&&Object['defineProperty'](_0x268b02,_0x40aa43,_0x2d29b8),_0x2d29b8;},__metadata=this&&this[_0x184e93(0x1b0)]||function(_0x3f0857,_0x3ce631){const _0x5c8df6=_0x184e93;if(typeof Reflect==='object'&&typeof Reflect[_0x5c8df6(0x1c3)]==='function')return Reflect['metadata'](_0x3f0857,_0x3ce631);},__param=this&&this[_0x184e93(0x15c)]||function(_0xf8cb94,_0x2d4da5){return function(_0x3c47f2,_0x465035){_0x2d4da5(_0x3c47f2,_0x465035,_0xf8cb94);};};function _0x37ee(_0x3f92c6,_0x5717c6){const _0x261dba=_0x261d();return _0x37ee=function(_0x37ee68,_0xbac797){_0x37ee68=_0x37ee68-0x14f;let _0x48aa2d=_0x261dba[_0x37ee68];return _0x48aa2d;},_0x37ee(_0x3f92c6,_0x5717c6);}Object[_0x184e93(0x15e)](exports,_0x184e93(0x153),{'value':!![]}),exports[_0x184e93(0x1cf)]=void 0x0;const common_1=require(_0x184e93(0x171)),TENCENTCOS=require('cos-nodejs-sdk-v5'),ALIOSS=require('ali-oss'),axios_1=require(_0x184e93(0x18a)),image_size_1=require(_0x184e93(0x17a)),utils_1=require(_0x184e93(0x17b)),globalConfig_service_1=require(_0x184e93(0x1d1)),FormData=require(_0x184e93(0x1b3)),midjourney_entity_1=require(_0x184e93(0x17d)),typeorm_1=require(_0x184e93(0x157)),typeorm_2=require('typeorm'),redisKey_constant_1=require('../../common/constants/redisKey.constant'),redisCache_service_1=require('../redisCache/redisCache.service'),MjConfig_1=require(_0x184e93(0x1c7)),path_1=require(_0x184e93(0x170)),promises_1=require(_0x184e93(0x1a1)),fs_1=require('fs'),child_process_1=require(_0x184e93(0x181));let FileService=class FileService{constructor(_0x2caa8b,_0x507836,_0x53c889){const _0x164179=_0x184e93;this[_0x164179(0x1c9)]=_0x2caa8b,this[_0x164179(0x15a)]=_0x507836,this[_0x164179(0x14f)]=_0x53c889;}async[_0x184e93(0x192)](){const _0x195c2f=_0x184e93,{tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x195c2f(0x15a)][_0x195c2f(0x1b1)]([_0x195c2f(0x18b),_0x195c2f(0x167),_0x195c2f(0x1a9)]);!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus)&&common_1[_0x195c2f(0x154)][_0x195c2f(0x173)](_0x195c2f(0x197));if(Number(tencentCosStatus)===0x1){const {SecretId:_0xc3cc16,SecretKey:_0x2ade9f}=await this['getUploadConfig'](_0x195c2f(0x1c4));this[_0x195c2f(0x198)]=new TENCENTCOS({'SecretId':_0xc3cc16,'SecretKey':_0x2ade9f,'FileParallelLimit':0xa});}if(Number(aliOssStatus)===0x1){const {region:_0x22d8e4,bucket:_0x5be73c,accessKeyId:_0x44645b,accessKeySecret:_0x11cfcb}=await this[_0x195c2f(0x19d)](_0x195c2f(0x1b8));this['aliCos']=new ALIOSS({'region':(0x0,utils_1[_0x195c2f(0x158)])(_0x22d8e4),'accessKeyId':_0x44645b,'accessKeySecret':_0x11cfcb,'bucket':(0x0,utils_1[_0x195c2f(0x158)])(_0x5be73c)});}}async[_0x184e93(0x19d)](_0x3a4f9c){const _0x13e125=_0x184e93;if(_0x3a4f9c===_0x13e125(0x1b8)){const {aliOssRegion:_0x48d4f1,aliOssBucket:_0x3651ac,aliOssAccessKeyId:_0x34997a,aliOssAccessKeySecret:_0x107426}=await this['globalConfigService']['getConfigs']([_0x13e125(0x1be),_0x13e125(0x19a),_0x13e125(0x195),_0x13e125(0x1da)]);return{'region':_0x48d4f1,'bucket':_0x3651ac,'accessKeyId':_0x34997a,'accessKeySecret':_0x107426};}if(_0x3a4f9c===_0x13e125(0x1c4)){const {cosBucket:_0x132696,cosRegion:_0x23a539,cosSecretId:_0x58f73a,cosSecretKey:_0x263b39,tencentCosAcceleratedDomain:_0x42441e}=await this[_0x13e125(0x15a)][_0x13e125(0x1b1)](['cosBucket',_0x13e125(0x1d9),_0x13e125(0x184),_0x13e125(0x1b9),'tencentCosAcceleratedDomain']);return{'Bucket':_0x132696,'Region':_0x23a539,'SecretId':_0x58f73a,'SecretKey':_0x263b39,'acceleratedDomain':_0x42441e};}if(_0x3a4f9c===_0x13e125(0x178)){const {cheveretoKey:_0xc6cc36,cheveretoUploadPath:_0x377ff1}=await this['globalConfigService'][_0x13e125(0x1b1)]([_0x13e125(0x1d3),_0x13e125(0x1df)]);return{'key':_0xc6cc36,'uploadPath':_0x377ff1};}}async['uploadFile'](_0x57932d){const _0x409dc0=_0x184e93,{filename:_0x3759d6,buffer:_0x387cc3,dir:dir='ai'}=_0x57932d,{aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0,tencentCosStatus:tencentCosStatus=0x0}=await this['globalConfigService'][_0x409dc0(0x1b1)]([_0x409dc0(0x18b),'aliOssStatus',_0x409dc0(0x1a9)]);if(Number(tencentCosStatus)===0x1)return this[_0x409dc0(0x1cd)]({'filename':_0x3759d6,'buffer':_0x387cc3,'dir':dir});if(Number(aliOssStatus)===0x1)return this[_0x409dc0(0x15d)]({'filename':_0x3759d6,'buffer':_0x387cc3,'dir':dir});if(Number(cheveretoStatus)){const {filename:_0x19f250,buffer:_0x21da50,dir:_0x509142}=_0x57932d;return this[_0x409dc0(0x164)]({'filename':_0x19f250,'buffer':_0x21da50[_0x409dc0(0x1ab)]('base64'),'dir':_0x509142});}const [_0x124f88,_0x17fbe9]=await this[_0x409dc0(0x1c0)]({'filename':_0x3759d6,'buffer':_0x387cc3,'dir':dir});return _0x124f88;}async['uploadFileByTencentCos']({filename:_0x1e193d,buffer:_0xcf4755,dir:_0x5a8e29}){const _0x8efd48=_0x184e93;try{const {Bucket:_0x536bc9,Region:_0x18835a,SecretId:_0x3dbc7b,SecretKey:_0x4a8971}=await this['getUploadConfig'](_0x8efd48(0x1c4));!this['tencentCos']&&(this[_0x8efd48(0x198)]=new TENCENTCOS({'SecretId':_0x3dbc7b,'SecretKey':_0x4a8971,'FileParallelLimit':0xa}));const _0x1fb485=await this['tencentCos']['putObject']({'Bucket':(0x0,utils_1[_0x8efd48(0x158)])(_0x536bc9),'Region':(0x0,utils_1[_0x8efd48(0x158)])(_0x18835a),'Key':_0x5a8e29+'/'+(_0x1e193d||(0x0,utils_1[_0x8efd48(0x1de)])()+_0x8efd48(0x1c1)),'StorageClass':_0x8efd48(0x1ae),'Body':_0xcf4755});let _0x2ea29f=_0x1fb485[_0x8efd48(0x179)][_0x8efd48(0x188)](/^(http:\/\/|https:\/\/|\/\/|)(.*)/,_0x8efd48(0x1dc));const {acceleratedDomain:_0x3d39c4}=await this[_0x8efd48(0x19d)](_0x8efd48(0x1c4));return _0x3d39c4&&(_0x2ea29f=_0x2ea29f[_0x8efd48(0x188)](/^(https:\/\/[^/]+)(\/.*)$/,_0x8efd48(0x19b)+_0x3d39c4+'$2'),console[_0x8efd48(0x16a)]('当前已开启全球加速----------------->',_0x2ea29f)),_0x2ea29f;}catch(_0x145961){console['log']('error:\x20',_0x145961);throw new common_1[(_0x8efd48(0x169))](_0x8efd48(0x16b),common_1[_0x8efd48(0x1c2)][_0x8efd48(0x196)]);}}async[_0x184e93(0x15d)]({filename:_0x3b5104,buffer:_0x441e02,dir:_0x20973d}){const _0x279cd1=_0x184e93;if(!this[_0x279cd1(0x1b7)]){const {region:_0x1eef57,bucket:_0x2ed209,accessKeyId:_0x31545a,accessKeySecret:_0x551872}=await this[_0x279cd1(0x19d)](_0x279cd1(0x1b8));this['aliCos']=new ALIOSS({'region':(0x0,utils_1[_0x279cd1(0x158)])(_0x1eef57),'accessKeyId':_0x31545a,'accessKeySecret':_0x551872,'bucket':(0x0,utils_1[_0x279cd1(0x158)])(_0x2ed209)});}try{console[_0x279cd1(0x16a)](_0x279cd1(0x1a4));const _0x5639a1=await this['aliCos'][_0x279cd1(0x1d0)](_0x20973d+'/'+(_0x3b5104||(0x0,utils_1['createRandomUid'])()+_0x279cd1(0x1c1)),_0x441e02);return _0x5639a1[_0x279cd1(0x186)];}catch(_0x34010f){throw new common_1[(_0x279cd1(0x169))](_0x279cd1(0x1db),common_1[_0x279cd1(0x1c2)][_0x279cd1(0x196)]);}}async[_0x184e93(0x164)]({filename:filename='',buffer:_0x3f468e,dir:dir='ai'}){const _0x71933f=_0x184e93,{key:_0x28f00f,uploadPath:_0x58c8b3}=await this['getUploadConfig'](_0x71933f(0x178)),_0x4250dd=new FormData();_0x4250dd[_0x71933f(0x16e)](_0x71933f(0x19c),_0x3f468e[_0x71933f(0x1ab)](_0x71933f(0x191))),_0x4250dd['append'](_0x71933f(0x16d),_0x28f00f);try{const _0x474acf=await axios_1[_0x71933f(0x1cc)][_0x71933f(0x1af)](_0x58c8b3,_0x4250dd,{'headers':{'X-API-Key':_0x28f00f},'timeout':0xa*0x3c*0x3e8});if(_0x474acf?.[_0x71933f(0x1c5)]===0xc8)return _0x474acf[_0x71933f(0x18f)][_0x71933f(0x174)][_0x71933f(0x186)];else{common_1[_0x71933f(0x154)][_0x71933f(0x173)](_0x71933f(0x1bc),JSON[_0x71933f(0x1d5)](_0x474acf['data']));throw new Error('上传图片失败[Chevereto]');}}catch(_0xc14538){console[_0x71933f(0x16a)]('error:\x20',_0xc14538[_0x71933f(0x1a7)]);throw new common_1[(_0x71933f(0x169))](_0x71933f(0x1e0)+_0xc14538[_0x71933f(0x1a7)]?.[_0x71933f(0x18f)][_0x71933f(0x173)]['message'],common_1['HttpStatus'][_0x71933f(0x196)]);}}async[_0x184e93(0x1c0)]({filename:_0x5c557e,buffer:_0x2df12f,dir:_0x56cc55}){const _0x493c8f=_0x184e93;let _0x184ad5=(0x0,path_1[_0x493c8f(0x193)])(process[_0x493c8f(0x177)](),'webroot',_0x493c8f(0x19e)),_0x53aa41='/upload',_0x11959d='';_0x56cc55&&(_0x184ad5=(0x0,path_1['join'])(_0x184ad5,_0x56cc55),_0x53aa41=_0x493c8f(0x152)+_0x56cc55);_0x53aa41=_0x53aa41+'/'+_0x5c557e;!(0x0,fs_1['existsSync'])(_0x184ad5)&&(0x0,fs_1[_0x493c8f(0x1ce)])(_0x184ad5,{'recursive':!![]});_0x184ad5=(0x0,path_1['join'])(_0x184ad5,_0x5c557e),await(0x0,promises_1[_0x493c8f(0x1aa)])(_0x184ad5,_0x2df12f);let _0x5c96fb=process[_0x493c8f(0x1c6)][_0x493c8f(0x16c)];return _0x5c96fb['startsWith'](_0x493c8f(0x162))?_0x11959d=_0x5c96fb+_0x53aa41:_0x11959d=_0x493c8f(0x19b)+_0x5c96fb+_0x53aa41,[_0x11959d,_0x184ad5];}async[_0x184e93(0x18d)](_0x474671,_0x2229b2,_0x3b9563){const _0x471d74=_0x184e93;try{const _0x29966e=_0x474671[_0x471d74(0x1d4)]('/')['pop'](),_0x5b1180=await(0x0,axios_1['default'])(_0x474671,{'headers':{'Content-Type':_0x471d74(0x1a6)},'responseType':_0x471d74(0x1a8),'timeout':0x493e0});_0x3b9563['writeHead'](0xc8,{'Content-Type':_0x5b1180['headers'][_0x471d74(0x1ca)],'Content-Disposition':_0x29966e}),_0x3b9563[_0x471d74(0x15f)](_0x5b1180[_0x471d74(0x18f)],_0x471d74(0x17c));}catch(_0x51aed5){throw new common_1['HttpException'](_0x51aed5[_0x471d74(0x155)],common_1[_0x471d74(0x1c2)][_0x471d74(0x196)]);}}async[_0x184e93(0x1e1)](_0x353924){const _0x262186=_0x184e93,_0xcd5d8b=await this[_0x262186(0x1c9)][_0x262186(0x1bb)]({'where':{'id':Number(_0x353924[_0x262186(0x18e)]['taskId'])}});let _0x1e57c7;if(_0xcd5d8b[_0x262186(0x16f)])_0x1e57c7=_0xcd5d8b[_0x262186(0x16f)];else{const _0x3fbcce=await this[_0x262186(0x1c9)][_0x262186(0x1bb)]({'where':{'id':Number(_0xcd5d8b[_0x262186(0x163)])}});_0x1e57c7=_0x3fbcce[_0x262186(0x16f)];}if(!_0x1e57c7)throw new common_1[(_0x262186(0x169))](_0x262186(0x199),common_1[_0x262186(0x1c2)][_0x262186(0x196)]);const _0x506cc7=await axios_1[_0x262186(0x1cc)][_0x262186(0x1b5)](_0x1e57c7,{'responseType':'arraybuffer'}),_0x1cbb1e=Buffer['from'](_0x506cc7[_0x262186(0x18f)])[_0x262186(0x1ab)](_0x262186(0x191));return _0x262186(0x194)+_0x1cbb1e;}async[_0x184e93(0x165)](_0x309957){const _0xff520e=_0x184e93;try{const _0x101859=await axios_1['default'][_0xff520e(0x1b5)](_0x309957,{'responseType':'arraybuffer'}),_0x4f3826=_0x309957[_0xff520e(0x1d4)]('/')[_0xff520e(0x189)](),_0x2819cb=await this[_0xff520e(0x1ac)]({'filename':_0x4f3826,'buffer':_0x101859['data']});return _0x2819cb;}catch(_0x42221a){return common_1[_0xff520e(0x154)][_0xff520e(0x173)](_0xff520e(0x160),_0x42221a),null;}}async[_0x184e93(0x151)](_0x1187e6){return new Promise((_0x3a3f55,_0x696641)=>{const _0x54e7c1=_0x37ee,_0x52bc65=_0x1187e6[_0x54e7c1(0x188)](_0x54e7c1(0x1b6),'.jpg');(0x0,child_process_1[_0x54e7c1(0x1d6)])(_0x54e7c1(0x15b)+_0x1187e6+_0x54e7c1(0x166)+_0x52bc65+_0x54e7c1(0x17e),function(_0x346896,_0x405427,_0x50a467){_0x346896?_0x696641(_0x346896):_0x3a3f55(_0x52bc65);});});}async[_0x184e93(0x1a5)](_0x51ebb9){const _0x402bfb=_0x184e93;let _0x5308f9=null,_0xa1f081=null;try{const _0x26b92e=await axios_1[_0x402bfb(0x1cc)][_0x402bfb(0x1b5)](_0x51ebb9,{'responseType':_0x402bfb(0x1a8)}),_0x2414a3=_0x51ebb9[_0x402bfb(0x1d4)]('/')[_0x402bfb(0x189)](),[_0x1da14b,_0x53257d]=await this[_0x402bfb(0x1c0)]({'filename':_0x2414a3,'buffer':_0x26b92e['data'],'dir':'ai'}),_0x5ab957=await this[_0x402bfb(0x151)](_0x53257d);let {aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0,tencentCosStatus:tencentCosStatus=0x0}=await this['globalConfigService'][_0x402bfb(0x1b1)]([_0x402bfb(0x18b),_0x402bfb(0x167),_0x402bfb(0x1a9)]);aliOssStatus=Number(aliOssStatus),cheveretoStatus=Number(cheveretoStatus),tencentCosStatus=Number(tencentCosStatus);if(aliOssStatus||cheveretoStatus||tencentCosStatus){console[_0x402bfb(0x16a)](_0x402bfb(0x176)),_0x5308f9=await this[_0x402bfb(0x1ac)]({'filename':_0x2414a3,'buffer':_0x26b92e[_0x402bfb(0x18f)]});const _0x5ded6a=(0x0,fs_1[_0x402bfb(0x1d7)])(_0x5ab957);_0xa1f081=await this['uploadFile']({'filename':_0x2414a3[_0x402bfb(0x188)]('.mp4',_0x402bfb(0x150)),'buffer':_0x5ded6a}),(0x0,fs_1['rmSync'])(_0x53257d),(0x0,fs_1[_0x402bfb(0x1a0)])(_0x5ab957);}else _0x5308f9=_0x1da14b,_0xa1f081=_0x1da14b[_0x402bfb(0x188)](_0x402bfb(0x1b6),_0x402bfb(0x150));return[_0x5308f9,_0xa1f081];}catch(_0x2ca9a4){return common_1[_0x402bfb(0x154)][_0x402bfb(0x173)](_0x402bfb(0x1a3),_0x2ca9a4),[null,null];}}async[_0x184e93(0x1dd)](_0x38337f,_0x16fc69){const _0x142fbb=_0x184e93,_0x4398e3=redisKey_constant_1[_0x142fbb(0x183)]+_0x38337f;try{const _0x5f82fc=await this['redisCacheService'][_0x142fbb(0x1b5)]({'key':_0x4398e3});if(_0x5f82fc)return;this[_0x142fbb(0x14f)][_0x142fbb(0x168)]({'key':_0x4398e3,'val':_0x142fbb(0x18c)});const _0x3e2b0c=await axios_1['default']['get'](_0x16fc69,{'responseType':_0x142fbb(0x1a8)}),{width:_0x4e8449,height:_0x1a6f2e}=await(0x0,image_size_1['default'])(_0x3e2b0c[_0x142fbb(0x18f)]);!MjConfig_1[_0x142fbb(0x1cc)][_0x142fbb(0x187)]&&(_0x16fc69=await this[_0x142fbb(0x1ac)]({'filename':'mj-'+_0x38337f+_0x142fbb(0x1c1),'buffer':_0x3e2b0c[_0x142fbb(0x18f)]})),await this[_0x142fbb(0x1c9)]['save']({'id':_0x38337f,'imageUrl':_0x16fc69,'fileInfo':JSON['stringify']({'width':_0x4e8449,'height':_0x1a6f2e})});}catch(_0x2ad321){common_1[_0x142fbb(0x154)][_0x142fbb(0x173)](_0x4398e3,'：',_0x2ad321);}finally{this['redisCacheService'][_0x142fbb(0x156)]({'key':_0x4398e3});}}};function _0x261d(){const _0xc6633d=['onModuleInit','join','data:image/jpeg;base64,','aliOssAccessKeyId','BAD_REQUEST','请先前往后台配置上传图片的方式','tencentCos','任务原始图片获取失败','aliOssBucket','https://','source','getUploadConfig','upload','__decorate','rmSync','fs/promises','7LuIzYA','transferAndCover\x20error:\x20','ali\x20开始上传','transferAndCover','application/json;charset=UTF-8','response','arraybuffer','cheveretoStatus','writeFile','toString','uploadFile','140134KyprjN','STANDARD','post','__metadata','getConfigs','Repository','form-data','10kAhuql','get','.mp4','aliCos','ali','cosSecretKey','length','findOne','上传图片失败[Chevereto]','9748936yQXLKK','aliOssRegion','function','uploadFileByLocal','.png','HttpStatus','metadata','tencent','status','env','../../config/MjConfig','InjectRepository','midjourneyEntity','content-type','1598487yVrUXf','default','uploadFileByTencentCos','mkdirSync','FileService','put','../globalConfig/globalConfig.service','Injectable','cheveretoKey','split','stringify','exec','readFileSync','36VajICv','cosRegion','aliOssAccessKeySecret','上传图片失败[ali]','https://$2','transferImg','createRandomUid','cheveretoUploadPath','上传图片失败[Chevereto|buffer]\x20-->\x20','getModalImgById','10znghfn','redisCacheService','.jpg','getCover','/upload/','__esModule','Logger','message','del','@nestjs/typeorm','removeSpecialCharacters','decorate','globalConfigService','\x0a\x20\x20\x20\x20\x20\x20\x20\x20ffmpeg\x20-i\x20','__param','uploadFileByAliOss','defineProperty','end','transferFile\x20error:\x20','getOwnPropertyDescriptor','http','originTaskId','uploadFileByChevereto','transferFile','\x20-y\x20-f\x20image2\x20-ss\x202\x20-frames:v\x201\x20-update\x20true\x20','aliOssStatus','set','HttpException','log','上传图片失败[ten]','GOMAXAI_HOST','key','append','imageUrl','path','@nestjs/common','462uwZDaR','error','image','GlobalConfigService','需要转存到云','cwd','chevereto','Location','image-size','../../common/utils','binary','../midjourney/midjourney.entity','\x0a\x20\x20\x20\x20\x20\x20','design:paramtypes','4898795rlpDRF','child_process','67752iDEDhL','MJ_IMG_TRANSFER','cosSecretId','4712049OgxsaY','url','mjNotSaveImg','replace','pop','axios','tencentCosStatus','lock','downFile','query','data','673984cCADMy','base64'];_0x261d=function(){return _0xc6633d;};return _0x261d();}FileService=__decorate([(0x0,common_1[_0x184e93(0x1d2)])(),__param(0x0,(0x0,typeorm_1[_0x184e93(0x1c8)])(midjourney_entity_1['MidjourneyEntity'])),__metadata(_0x184e93(0x17f),[typeorm_2[_0x184e93(0x1b2)],globalConfig_service_1[_0x184e93(0x175)],redisCache_service_1['RedisCacheService']])],FileService),exports[_0x184e93(0x1cf)]=FileService;