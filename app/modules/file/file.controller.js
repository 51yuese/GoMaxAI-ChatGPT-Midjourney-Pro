'use strict';const _0x28c503=_0x3b84;function _0x3b84(_0x5d9b93,_0x5e5e1a){const _0x125bd4=_0x125b();return _0x3b84=function(_0x3b84db,_0x5a1dcf){_0x3b84db=_0x3b84db-0x92;let _0x395996=_0x125bd4[_0x3b84db];return _0x395996;},_0x3b84(_0x5d9b93,_0x5e5e1a);}(function(_0x41bbf6,_0x42ef7d){const _0x17ea5e=_0x3b84,_0x1e7911=_0x41bbf6();while(!![]){try{const _0x36ef5b=parseInt(_0x17ea5e(0xa5))/0x1+-parseInt(_0x17ea5e(0xd1))/0x2+parseInt(_0x17ea5e(0xc0))/0x3+-parseInt(_0x17ea5e(0x92))/0x4*(-parseInt(_0x17ea5e(0xd2))/0x5)+parseInt(_0x17ea5e(0xcc))/0x6+-parseInt(_0x17ea5e(0xa4))/0x7+-parseInt(_0x17ea5e(0xc9))/0x8*(parseInt(_0x17ea5e(0xbf))/0x9);if(_0x36ef5b===_0x42ef7d)break;else _0x1e7911['push'](_0x1e7911['shift']());}catch(_0x536799){_0x1e7911['push'](_0x1e7911['shift']());}}}(_0x125b,0xa4dc2));var __decorate=this&&this[_0x28c503(0xb4)]||function(_0x16a42a,_0x5d3d14,_0x3f8f4c,_0x2077ca){const _0x261805=_0x28c503;var _0x4763cc=arguments[_0x261805(0xbb)],_0x1d30af=_0x4763cc<0x3?_0x5d3d14:_0x2077ca===null?_0x2077ca=Object[_0x261805(0xb5)](_0x5d3d14,_0x3f8f4c):_0x2077ca,_0x92e4f8;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x261805(0xb3))_0x1d30af=Reflect[_0x261805(0xb7)](_0x16a42a,_0x5d3d14,_0x3f8f4c,_0x2077ca);else{for(var _0xd4d74d=_0x16a42a[_0x261805(0xbb)]-0x1;_0xd4d74d>=0x0;_0xd4d74d--)if(_0x92e4f8=_0x16a42a[_0xd4d74d])_0x1d30af=(_0x4763cc<0x3?_0x92e4f8(_0x1d30af):_0x4763cc>0x3?_0x92e4f8(_0x5d3d14,_0x3f8f4c,_0x1d30af):_0x92e4f8(_0x5d3d14,_0x3f8f4c))||_0x1d30af;}return _0x4763cc>0x3&&_0x1d30af&&Object[_0x261805(0xa8)](_0x5d3d14,_0x3f8f4c,_0x1d30af),_0x1d30af;},__metadata=this&&this[_0x28c503(0xa0)]||function(_0x319a6c,_0x598221){const _0x2a7b0d=_0x28c503;if(typeof Reflect===_0x2a7b0d(0xbc)&&typeof Reflect[_0x2a7b0d(0xb2)]===_0x2a7b0d(0xb3))return Reflect[_0x2a7b0d(0xb2)](_0x319a6c,_0x598221);},__param=this&&this['__param']||function(_0x237535,_0x53532d){return function(_0x29f447,_0xd6a95e){_0x53532d(_0x29f447,_0xd6a95e,_0x237535);};};Object[_0x28c503(0xa8)](exports,_0x28c503(0x9a),{'value':!![]}),exports['FileController']=void 0x0;function _0x125b(){const _0x36fb4c=['./file.service','富文本上传文件','design:returntype','replace','ApiBearerAuth','__metadata','split','downFile','FileInterceptor','4368756TyuFTW','1224505wgBDpb','originalname','file','defineProperty','FileService','uploadFileNext','@nestjs/swagger','Post','getModalImgById','from','ApiTags','wangeditor-uploaded-image','getProxyRequest','metadata','function','__decorate','getOwnPropertyDescriptor','prototype','decorate','FileController','通过任务id获取原始任务的图片base64，并解决跨域问题','duration','length','object','toString','design:paramtypes','5823VneZuo','651519KSIoDm','upload','uploadWang','Get','binary','pop','uploadNext','utf-8','fileService','11320barlSm','@nestjs/platform-express','@nestjs/common','6548010yyJdnf','url','uploadFileWang','UseInterceptors','buffer','1411224jrIhpD','21290VSUiux','Req','上传文件到本地服务器','uploadFile','UploaderDto','上传文件','364nOJpvU','Body','Res','ApiOperation','Controller','design:type','UploadedFile','upload2Local','__esModule'];_0x125b=function(){return _0x36fb4c;};return _0x125b();}const file_service_1=require(_0x28c503(0x9b)),common_1=require(_0x28c503(0xcb)),swagger_1=require(_0x28c503(0xab)),platform_express_1=require(_0x28c503(0xca)),uploder_dto_1=require('./dto/uploder.dto'),uuid_1=require('uuid');let FileController=class FileController{constructor(_0xdc5c8b){const _0x5bdc89=_0x28c503;this[_0x5bdc89(0xc8)]=_0xdc5c8b;}async[_0x28c503(0xd5)](_0x5b6172,_0x17d45f){const _0x21a274=_0x28c503,_0x2702ef=Buffer['from'](_0x17d45f[_0x21a274(0xa6)],_0x21a274(0xc4))[_0x21a274(0xbd)]('utf-8');return this[_0x21a274(0xc8)][_0x21a274(0xd5)]({'filename':_0x2702ef,'buffer':_0x17d45f[_0x21a274(0xd0)],..._0x5b6172});}async[_0x28c503(0x99)](_0x56f1b9,_0x2b522f){const _0x555324=_0x28c503;let _0x53cc0e=(0x0,uuid_1['v4'])();_0x53cc0e=_0x53cc0e[_0x555324(0x9e)](/-/g,'');const _0x28a173=_0x2b522f[_0x555324(0xa6)][_0x555324(0xa1)]('.')[_0x555324(0xc5)](),_0x4a02b9=_0x53cc0e+'.'+_0x28a173;return this[_0x555324(0xc8)][_0x555324(0x99)]({'filename':_0x4a02b9,'buffer':_0x2b522f['buffer'],..._0x56f1b9});}async[_0x28c503(0xb1)](_0x52266c,_0x2633f2,_0x26780d){const _0x2d9601=_0x28c503;return this['fileService'][_0x2d9601(0xa2)](_0x52266c,_0x2633f2,_0x26780d);}async[_0x28c503(0xad)](_0x5f20f0){const _0x1e3b1f=_0x28c503;return this[_0x1e3b1f(0xc8)][_0x1e3b1f(0xad)](_0x5f20f0);}async[_0x28c503(0xaa)](_0x127451,_0x1186f9){const _0x159368=_0x28c503,_0x32b96a=Buffer[_0x159368(0xae)](_0x1186f9[_0x159368(0xa6)],'binary')[_0x159368(0xbd)](_0x159368(0xc7)),_0x42b218=await this[_0x159368(0xc8)][_0x159368(0xd5)]({'filename':_0x32b96a,'buffer':_0x1186f9['buffer'],..._0x127451});if(_0x127451['returnDuration'])return{'data':{'dataPath':_0x42b218[_0x159368(0xcd)],'md5':'','duration':_0x42b218[_0x159368(0xba)]}};return{'data':{'dataPath':_0x42b218,'md5':''}};}async[_0x28c503(0xce)](_0x3353a3,_0x2b24eb){const _0x4ac1cf=_0x28c503,_0x171a32=Buffer[_0x4ac1cf(0xae)](_0x2b24eb[_0x4ac1cf(0xa6)],_0x4ac1cf(0xc4))[_0x4ac1cf(0xbd)](_0x4ac1cf(0xc7));return{'data':{'dataPath':await this['fileService'][_0x4ac1cf(0xd5)]({'filename':_0x171a32,'buffer':_0x2b24eb['buffer'],..._0x3353a3}),'md5':''}};}};__decorate([(0x0,common_1['Post'])(_0x28c503(0xc1)),(0x0,swagger_1['ApiOperation'])({'summary':_0x28c503(0xd7)}),(0x0,common_1[_0x28c503(0xcf)])((0x0,platform_express_1[_0x28c503(0xa3)])(_0x28c503(0xa7),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x28c503(0x98)])()),__metadata(_0x28c503(0x97),Function),__metadata(_0x28c503(0xbe),[uploder_dto_1['UploaderDto'],Object]),__metadata(_0x28c503(0x9d),Promise)],FileController[_0x28c503(0xb6)],'uploadFile',null),__decorate([(0x0,common_1['Post'])('upload2Local'),(0x0,swagger_1['ApiOperation'])({'summary':_0x28c503(0xd4)}),(0x0,common_1['UseInterceptors'])((0x0,platform_express_1[_0x28c503(0xa3)])(_0x28c503(0xa7),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x28c503(0x93)])()),__param(0x1,(0x0,common_1[_0x28c503(0x98)])()),__metadata(_0x28c503(0x97),Function),__metadata(_0x28c503(0xbe),[uploder_dto_1[_0x28c503(0xd6)],Object]),__metadata(_0x28c503(0x9d),Promise)],FileController['prototype'],_0x28c503(0x99),null),__decorate([(0x0,common_1[_0x28c503(0xc3)])('down'),(0x0,swagger_1[_0x28c503(0x95)])({'summary':'通过url下载文件，解决跨域问题'}),__param(0x0,(0x0,common_1['Query'])('url')),__param(0x1,(0x0,common_1[_0x28c503(0xd3)])()),__param(0x2,(0x0,common_1[_0x28c503(0x94)])()),__metadata(_0x28c503(0x97),Function),__metadata(_0x28c503(0xbe),[String,Object,Object]),__metadata(_0x28c503(0x9d),Promise)],FileController[_0x28c503(0xb6)],'getProxyRequest',null),__decorate([(0x0,common_1[_0x28c503(0xc3)])('getModalImgById'),(0x0,swagger_1['ApiOperation'])({'summary':_0x28c503(0xb9)}),(0x0,swagger_1[_0x28c503(0x9f)])(),__param(0x0,(0x0,common_1[_0x28c503(0xd3)])()),__metadata(_0x28c503(0x97),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x28c503(0x9d),Promise)],FileController[_0x28c503(0xb6)],_0x28c503(0xad),null),__decorate([(0x0,common_1[_0x28c503(0xac)])(_0x28c503(0xc6)),(0x0,swagger_1[_0x28c503(0x95)])({'summary':'上传文件'}),(0x0,common_1['UseInterceptors'])((0x0,platform_express_1[_0x28c503(0xa3)])(_0x28c503(0xa7),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x28c503(0x93)])()),__param(0x1,(0x0,common_1[_0x28c503(0x98)])()),__metadata(_0x28c503(0x97),Function),__metadata(_0x28c503(0xbe),[uploder_dto_1[_0x28c503(0xd6)],Object]),__metadata(_0x28c503(0x9d),Promise)],FileController[_0x28c503(0xb6)],_0x28c503(0xaa),null),__decorate([(0x0,common_1[_0x28c503(0xac)])(_0x28c503(0xc2)),(0x0,swagger_1['ApiOperation'])({'summary':_0x28c503(0x9c)}),(0x0,common_1[_0x28c503(0xcf)])((0x0,platform_express_1[_0x28c503(0xa3)])(_0x28c503(0xb0),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x28c503(0x93)])()),__param(0x1,(0x0,common_1[_0x28c503(0x98)])()),__metadata(_0x28c503(0x97),Function),__metadata(_0x28c503(0xbe),[uploder_dto_1['UploaderDto'],Object]),__metadata(_0x28c503(0x9d),Promise)],FileController[_0x28c503(0xb6)],_0x28c503(0xce),null),FileController=__decorate([(0x0,swagger_1[_0x28c503(0xaf)])(_0x28c503(0xa7)),(0x0,common_1[_0x28c503(0x96)])(_0x28c503(0xa7)),__metadata(_0x28c503(0xbe),[file_service_1[_0x28c503(0xa9)]])],FileController),exports[_0x28c503(0xb8)]=FileController;