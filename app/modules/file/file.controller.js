'use strict';const _0x22799c=_0x1c96;(function(_0x1cc840,_0x1cbd00){const _0x3341a9=_0x1c96,_0x9acdeb=_0x1cc840();while(!![]){try{const _0x47c3d1=parseInt(_0x3341a9(0x194))/0x1+-parseInt(_0x3341a9(0x1b0))/0x2*(-parseInt(_0x3341a9(0x1bd))/0x3)+-parseInt(_0x3341a9(0x1bb))/0x4*(-parseInt(_0x3341a9(0x1a4))/0x5)+-parseInt(_0x3341a9(0x193))/0x6*(-parseInt(_0x3341a9(0x197))/0x7)+-parseInt(_0x3341a9(0x1b9))/0x8+parseInt(_0x3341a9(0x1b7))/0x9*(-parseInt(_0x3341a9(0x19c))/0xa)+-parseInt(_0x3341a9(0x18a))/0xb*(parseInt(_0x3341a9(0x19f))/0xc);if(_0x47c3d1===_0x1cbd00)break;else _0x9acdeb['push'](_0x9acdeb['shift']());}catch(_0x276d63){_0x9acdeb['push'](_0x9acdeb['shift']());}}}(_0x529b,0x85bd8));var __decorate=this&&this[_0x22799c(0x1a2)]||function(_0x320cac,_0x35ff29,_0x3cab6c,_0x51d238){const _0x415ecf=_0x22799c;var _0x5d65b4=arguments['length'],_0x4b9a84=_0x5d65b4<0x3?_0x35ff29:_0x51d238===null?_0x51d238=Object[_0x415ecf(0x1c6)](_0x35ff29,_0x3cab6c):_0x51d238,_0x11357a;if(typeof Reflect===_0x415ecf(0x18f)&&typeof Reflect[_0x415ecf(0x1af)]===_0x415ecf(0x1aa))_0x4b9a84=Reflect[_0x415ecf(0x1af)](_0x320cac,_0x35ff29,_0x3cab6c,_0x51d238);else{for(var _0x5da936=_0x320cac[_0x415ecf(0x1ba)]-0x1;_0x5da936>=0x0;_0x5da936--)if(_0x11357a=_0x320cac[_0x5da936])_0x4b9a84=(_0x5d65b4<0x3?_0x11357a(_0x4b9a84):_0x5d65b4>0x3?_0x11357a(_0x35ff29,_0x3cab6c,_0x4b9a84):_0x11357a(_0x35ff29,_0x3cab6c))||_0x4b9a84;}return _0x5d65b4>0x3&&_0x4b9a84&&Object[_0x415ecf(0x1c5)](_0x35ff29,_0x3cab6c,_0x4b9a84),_0x4b9a84;},__metadata=this&&this[_0x22799c(0x195)]||function(_0x37f73,_0x406a81){const _0x4e7846=_0x22799c;if(typeof Reflect===_0x4e7846(0x18f)&&typeof Reflect[_0x4e7846(0x1c2)]===_0x4e7846(0x1aa))return Reflect[_0x4e7846(0x1c2)](_0x37f73,_0x406a81);},__param=this&&this[_0x22799c(0x1bf)]||function(_0x9f8baa,_0x5aa84d){return function(_0x3a48f8,_0x362c81){_0x5aa84d(_0x3a48f8,_0x362c81,_0x9f8baa);};};function _0x1c96(_0x1ec61c,_0x13e9a5){const _0x529b90=_0x529b();return _0x1c96=function(_0x1c9693,_0x2875dc){_0x1c9693=_0x1c9693-0x18a;let _0x59557b=_0x529b90[_0x1c9693];return _0x59557b;},_0x1c96(_0x1ec61c,_0x13e9a5);}Object[_0x22799c(0x1c5)](exports,_0x22799c(0x1a6),{'value':!![]}),exports[_0x22799c(0x1a8)]=void 0x0;const file_service_1=require(_0x22799c(0x1c9)),common_1=require(_0x22799c(0x19b)),swagger_1=require(_0x22799c(0x1b3)),platform_express_1=require('@nestjs/platform-express'),uploder_dto_1=require(_0x22799c(0x190));function _0x529b(){const _0x3b52ae=['__esModule','design:type','FileController','Get','function','binary','ApiTags','Res','上传文件','decorate','2SbErOM','Body','down','@nestjs/swagger','Req','upload2Local','Post','3671253SqlCMh','buffer','2864072awpwXO','length','1819908sCmjHk','FileInterceptor','981075LRVenq','uploadFile','__param','ApiBearerAuth','prototype','metadata','from','FileService','defineProperty','getOwnPropertyDescriptor','fileService','url','./file.service','UploaderDto','297giYLTB','getModalImgById','上传文件到本地服务器','upload','design:returntype','object','./dto/uploder.dto','ApiOperation','toString','6iKojER','895943mLDauA','__metadata','originalname','4186245LDjfji','UploadedFile','getProxyRequest','file','@nestjs/common','20YCEval','design:paramtypes','utf-8','448584HPIhck','UseInterceptors','Query','__decorate','uploadFileNext','10MbZjNq','通过任务id获取原始任务的图片base64，并解决跨域问题'];_0x529b=function(){return _0x3b52ae;};return _0x529b();}let FileController=class FileController{constructor(_0xe9016a){const _0x49affb=_0x22799c;this[_0x49affb(0x1c7)]=_0xe9016a;}async[_0x22799c(0x1be)](_0x42fd7b,_0x408e5a){const _0x4bfc33=_0x22799c,_0x3d2da9=Buffer[_0x4bfc33(0x1c3)](_0x408e5a[_0x4bfc33(0x196)],'binary')['toString']('utf-8');return this['fileService'][_0x4bfc33(0x1be)]({'filename':_0x3d2da9,'buffer':_0x408e5a[_0x4bfc33(0x1b8)],..._0x42fd7b});}async[_0x22799c(0x1b5)](_0x486b33,_0x53b682){const _0x2d2e06=_0x22799c,_0x4efa4a=Buffer[_0x2d2e06(0x1c3)](_0x53b682['originalname'],_0x2d2e06(0x1ab))[_0x2d2e06(0x192)]('utf-8');return this[_0x2d2e06(0x1c7)][_0x2d2e06(0x1b5)]({'filename':_0x4efa4a,'buffer':_0x53b682[_0x2d2e06(0x1b8)],..._0x486b33});}async[_0x22799c(0x199)](_0xa1cd05,_0x587675,_0x36850f){return this['fileService']['downFile'](_0xa1cd05,_0x587675,_0x36850f);}async[_0x22799c(0x18b)](_0x3f34eb){const _0x380102=_0x22799c;return this[_0x380102(0x1c7)][_0x380102(0x18b)](_0x3f34eb);}async[_0x22799c(0x1a3)](_0x886ce1,_0x48a735){const _0x12d981=_0x22799c,_0x34d578=Buffer[_0x12d981(0x1c3)](_0x48a735[_0x12d981(0x196)],_0x12d981(0x1ab))['toString'](_0x12d981(0x19e));return{'data':{'dataPath':await this[_0x12d981(0x1c7)]['uploadFile']({'filename':_0x34d578,'buffer':_0x48a735[_0x12d981(0x1b8)],..._0x886ce1}),'md5':''}};}};__decorate([(0x0,common_1['Post'])(_0x22799c(0x18d)),(0x0,swagger_1[_0x22799c(0x191)])({'summary':'上传文件'}),(0x0,common_1[_0x22799c(0x1a0)])((0x0,platform_express_1[_0x22799c(0x1bc)])('file',{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x22799c(0x1b1)])()),__param(0x1,(0x0,common_1[_0x22799c(0x198)])()),__metadata(_0x22799c(0x1a7),Function),__metadata(_0x22799c(0x19d),[uploder_dto_1[_0x22799c(0x1ca)],Object]),__metadata('design:returntype',Promise)],FileController[_0x22799c(0x1c1)],'uploadFile',null),__decorate([(0x0,common_1['Post'])(_0x22799c(0x1b5)),(0x0,swagger_1[_0x22799c(0x191)])({'summary':_0x22799c(0x18c)}),(0x0,common_1[_0x22799c(0x1a0)])((0x0,platform_express_1[_0x22799c(0x1bc)])('file',{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x22799c(0x1b1)])()),__param(0x1,(0x0,common_1['UploadedFile'])()),__metadata(_0x22799c(0x1a7),Function),__metadata(_0x22799c(0x19d),[uploder_dto_1[_0x22799c(0x1ca)],Object]),__metadata(_0x22799c(0x18e),Promise)],FileController[_0x22799c(0x1c1)],_0x22799c(0x1b5),null),__decorate([(0x0,common_1[_0x22799c(0x1a9)])(_0x22799c(0x1b2)),(0x0,swagger_1[_0x22799c(0x191)])({'summary':'通过url下载文件，解决跨域问题'}),__param(0x0,(0x0,common_1[_0x22799c(0x1a1)])(_0x22799c(0x1c8))),__param(0x1,(0x0,common_1[_0x22799c(0x1b4)])()),__param(0x2,(0x0,common_1[_0x22799c(0x1ad)])()),__metadata(_0x22799c(0x1a7),Function),__metadata('design:paramtypes',[String,Object,Object]),__metadata(_0x22799c(0x18e),Promise)],FileController['prototype'],_0x22799c(0x199),null),__decorate([(0x0,common_1[_0x22799c(0x1a9)])('getModalImgById'),(0x0,swagger_1[_0x22799c(0x191)])({'summary':_0x22799c(0x1a5)}),(0x0,swagger_1[_0x22799c(0x1c0)])(),__param(0x0,(0x0,common_1[_0x22799c(0x1b4)])()),__metadata(_0x22799c(0x1a7),Function),__metadata(_0x22799c(0x19d),[Object]),__metadata(_0x22799c(0x18e),Promise)],FileController[_0x22799c(0x1c1)],'getModalImgById',null),__decorate([(0x0,common_1[_0x22799c(0x1b6)])('uploadNext'),(0x0,swagger_1[_0x22799c(0x191)])({'summary':_0x22799c(0x1ae)}),(0x0,common_1['UseInterceptors'])((0x0,platform_express_1[_0x22799c(0x1bc)])('file',{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x22799c(0x1b1)])()),__param(0x1,(0x0,common_1[_0x22799c(0x198)])()),__metadata(_0x22799c(0x1a7),Function),__metadata(_0x22799c(0x19d),[uploder_dto_1[_0x22799c(0x1ca)],Object]),__metadata('design:returntype',Promise)],FileController[_0x22799c(0x1c1)],'uploadFileNext',null),FileController=__decorate([(0x0,swagger_1[_0x22799c(0x1ac)])(_0x22799c(0x19a)),(0x0,common_1['Controller'])(_0x22799c(0x19a)),__metadata(_0x22799c(0x19d),[file_service_1[_0x22799c(0x1c4)]])],FileController),exports[_0x22799c(0x1a8)]=FileController;