'use strict';const _0x3df21d=_0x55c4;function _0x512d(){const _0x6194f3=['@nestjs/platform-express','metadata','UploaderDto','url','3344156NAhGTn','上传文件到本地服务器','@nestjs/swagger','ApiTags','通过任务id获取原始任务的图片base64，并解决跨域问题','Query','通过url下载文件，解决跨域问题','design:paramtypes','__param','Body','getModalImgById','getOwnPropertyDescriptor','ApiOperation','23550930xRwCQN','FileService','upload2Local','down','FileInterceptor','./file.service','上传文件','function','uploadFile','Req','utf-8','1831966wNMtMx','52335cbwLAq','1331965MFwMsX','object','uploadFileNext','prototype','file','getProxyRequest','binary','decorate','8746720kOoJWu','FileController','Post','fileService','split','design:type','buffer','replace','UploadedFile','./dto/uploder.dto','defineProperty','ApiBearerAuth','from','uuid','toString','design:returntype','downFile','6tcsGLf','3VnHgyj','pop','uploadNext','upload','Get','__metadata','Res','UseInterceptors','length','930643UUExzm','originalname'];_0x512d=function(){return _0x6194f3;};return _0x512d();}(function(_0x168864,_0xcdb292){const _0x59aefb=_0x55c4,_0x3ecfc5=_0x168864();while(!![]){try{const _0x2821a0=parseInt(_0x59aefb(0xb8))/0x1+parseInt(_0x59aefb(0xb7))/0x2+parseInt(_0x59aefb(0xd3))/0x3*(parseInt(_0x59aefb(0x9f))/0x4)+parseInt(_0x59aefb(0xb9))/0x5+parseInt(_0x59aefb(0xd2))/0x6*(parseInt(_0x59aefb(0x99))/0x7)+parseInt(_0x59aefb(0xc1))/0x8+-parseInt(_0x59aefb(0xac))/0x9;if(_0x2821a0===_0xcdb292)break;else _0x3ecfc5['push'](_0x3ecfc5['shift']());}catch(_0x10af63){_0x3ecfc5['push'](_0x3ecfc5['shift']());}}}(_0x512d,0xa614d));var __decorate=this&&this['__decorate']||function(_0x196637,_0x350166,_0x5073c6,_0x2b899b){const _0x44721c=_0x55c4;var _0x59cc9b=arguments[_0x44721c(0x98)],_0x34b784=_0x59cc9b<0x3?_0x350166:_0x2b899b===null?_0x2b899b=Object[_0x44721c(0xaa)](_0x350166,_0x5073c6):_0x2b899b,_0x1f2285;if(typeof Reflect===_0x44721c(0xba)&&typeof Reflect[_0x44721c(0xc0)]===_0x44721c(0xb3))_0x34b784=Reflect[_0x44721c(0xc0)](_0x196637,_0x350166,_0x5073c6,_0x2b899b);else{for(var _0x25ecdf=_0x196637[_0x44721c(0x98)]-0x1;_0x25ecdf>=0x0;_0x25ecdf--)if(_0x1f2285=_0x196637[_0x25ecdf])_0x34b784=(_0x59cc9b<0x3?_0x1f2285(_0x34b784):_0x59cc9b>0x3?_0x1f2285(_0x350166,_0x5073c6,_0x34b784):_0x1f2285(_0x350166,_0x5073c6))||_0x34b784;}return _0x59cc9b>0x3&&_0x34b784&&Object[_0x44721c(0xcb)](_0x350166,_0x5073c6,_0x34b784),_0x34b784;},__metadata=this&&this[_0x3df21d(0x95)]||function(_0x197eaf,_0x1c27a5){const _0x393dee=_0x3df21d;if(typeof Reflect==='object'&&typeof Reflect[_0x393dee(0x9c)]===_0x393dee(0xb3))return Reflect[_0x393dee(0x9c)](_0x197eaf,_0x1c27a5);},__param=this&&this[_0x3df21d(0xa7)]||function(_0x4a8764,_0x7f2929){return function(_0x51cdcb,_0x5d7621){_0x7f2929(_0x51cdcb,_0x5d7621,_0x4a8764);};};function _0x55c4(_0x1c359c,_0x5bd91e){const _0x512d21=_0x512d();return _0x55c4=function(_0x55c4ea,_0x47cc0e){_0x55c4ea=_0x55c4ea-0x91;let _0x2a5a86=_0x512d21[_0x55c4ea];return _0x2a5a86;},_0x55c4(_0x1c359c,_0x5bd91e);}Object[_0x3df21d(0xcb)](exports,'__esModule',{'value':!![]}),exports[_0x3df21d(0xc2)]=void 0x0;const file_service_1=require(_0x3df21d(0xb1)),common_1=require('@nestjs/common'),swagger_1=require(_0x3df21d(0xa1)),platform_express_1=require(_0x3df21d(0x9b)),uploder_dto_1=require(_0x3df21d(0xca)),uuid_1=require(_0x3df21d(0xce));let FileController=class FileController{constructor(_0x5c6e57){const _0x50b2e5=_0x3df21d;this[_0x50b2e5(0xc4)]=_0x5c6e57;}async['uploadFile'](_0x4c8c9b,_0x52532a){const _0x9386dc=_0x3df21d,_0x5aa045=Buffer[_0x9386dc(0xcd)](_0x52532a[_0x9386dc(0x9a)],_0x9386dc(0xbf))[_0x9386dc(0xcf)](_0x9386dc(0xb6));return this['fileService']['uploadFile']({'filename':_0x5aa045,'buffer':_0x52532a[_0x9386dc(0xc7)],..._0x4c8c9b});}async['upload2Local'](_0xc04e,_0x55610e){const _0x5bb719=_0x3df21d;let _0x39ba5b=(0x0,uuid_1['v4'])();_0x39ba5b=_0x39ba5b[_0x5bb719(0xc8)](/-/g,'');const _0x39075a=_0x55610e[_0x5bb719(0x9a)][_0x5bb719(0xc5)]('.')[_0x5bb719(0x91)](),_0x25d60c=_0x39ba5b+'.'+_0x39075a;return this[_0x5bb719(0xc4)][_0x5bb719(0xae)]({'filename':_0x25d60c,'buffer':_0x55610e[_0x5bb719(0xc7)],..._0xc04e});}async[_0x3df21d(0xbe)](_0x3424b6,_0x1b9811,_0x52ab17){const _0x1d513f=_0x3df21d;return this['fileService'][_0x1d513f(0xd1)](_0x3424b6,_0x1b9811,_0x52ab17);}async['getModalImgById'](_0x3d26b5){const _0x5327cf=_0x3df21d;return this[_0x5327cf(0xc4)][_0x5327cf(0xa9)](_0x3d26b5);}async[_0x3df21d(0xbb)](_0x32a361,_0x443533){const _0x35e3e9=_0x3df21d,_0x386d63=Buffer['from'](_0x443533[_0x35e3e9(0x9a)],_0x35e3e9(0xbf))[_0x35e3e9(0xcf)](_0x35e3e9(0xb6));return{'data':{'dataPath':await this[_0x35e3e9(0xc4)][_0x35e3e9(0xb4)]({'filename':_0x386d63,'buffer':_0x443533['buffer'],..._0x32a361}),'md5':''}};}};__decorate([(0x0,common_1[_0x3df21d(0xc3)])(_0x3df21d(0x93)),(0x0,swagger_1[_0x3df21d(0xab)])({'summary':_0x3df21d(0xb2)}),(0x0,common_1[_0x3df21d(0x97)])((0x0,platform_express_1[_0x3df21d(0xb0)])(_0x3df21d(0xbd),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x3df21d(0xa8)])()),__param(0x1,(0x0,common_1[_0x3df21d(0xc9)])()),__metadata(_0x3df21d(0xc6),Function),__metadata(_0x3df21d(0xa6),[uploder_dto_1[_0x3df21d(0x9d)],Object]),__metadata(_0x3df21d(0xd0),Promise)],FileController[_0x3df21d(0xbc)],_0x3df21d(0xb4),null),__decorate([(0x0,common_1[_0x3df21d(0xc3)])(_0x3df21d(0xae)),(0x0,swagger_1[_0x3df21d(0xab)])({'summary':_0x3df21d(0xa0)}),(0x0,common_1[_0x3df21d(0x97)])((0x0,platform_express_1[_0x3df21d(0xb0)])('file',{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x3df21d(0xa8)])()),__param(0x1,(0x0,common_1[_0x3df21d(0xc9)])()),__metadata(_0x3df21d(0xc6),Function),__metadata(_0x3df21d(0xa6),[uploder_dto_1['UploaderDto'],Object]),__metadata('design:returntype',Promise)],FileController['prototype'],_0x3df21d(0xae),null),__decorate([(0x0,common_1[_0x3df21d(0x94)])(_0x3df21d(0xaf)),(0x0,swagger_1[_0x3df21d(0xab)])({'summary':_0x3df21d(0xa5)}),__param(0x0,(0x0,common_1[_0x3df21d(0xa4)])(_0x3df21d(0x9e))),__param(0x1,(0x0,common_1[_0x3df21d(0xb5)])()),__param(0x2,(0x0,common_1[_0x3df21d(0x96)])()),__metadata(_0x3df21d(0xc6),Function),__metadata(_0x3df21d(0xa6),[String,Object,Object]),__metadata(_0x3df21d(0xd0),Promise)],FileController['prototype'],_0x3df21d(0xbe),null),__decorate([(0x0,common_1[_0x3df21d(0x94)])('getModalImgById'),(0x0,swagger_1[_0x3df21d(0xab)])({'summary':_0x3df21d(0xa3)}),(0x0,swagger_1[_0x3df21d(0xcc)])(),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x3df21d(0xc6),Function),__metadata(_0x3df21d(0xa6),[Object]),__metadata(_0x3df21d(0xd0),Promise)],FileController[_0x3df21d(0xbc)],_0x3df21d(0xa9),null),__decorate([(0x0,common_1[_0x3df21d(0xc3)])(_0x3df21d(0x92)),(0x0,swagger_1[_0x3df21d(0xab)])({'summary':_0x3df21d(0xb2)}),(0x0,common_1[_0x3df21d(0x97)])((0x0,platform_express_1[_0x3df21d(0xb0)])(_0x3df21d(0xbd),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x3df21d(0xa8)])()),__param(0x1,(0x0,common_1['UploadedFile'])()),__metadata(_0x3df21d(0xc6),Function),__metadata(_0x3df21d(0xa6),[uploder_dto_1[_0x3df21d(0x9d)],Object]),__metadata('design:returntype',Promise)],FileController[_0x3df21d(0xbc)],_0x3df21d(0xbb),null),FileController=__decorate([(0x0,swagger_1[_0x3df21d(0xa2)])(_0x3df21d(0xbd)),(0x0,common_1['Controller'])('file'),__metadata(_0x3df21d(0xa6),[file_service_1[_0x3df21d(0xad)]])],FileController),exports[_0x3df21d(0xc2)]=FileController;