'use strict';const _0x53ecfc=_0x508e;function _0x5b26(){const _0x59bc9e=['UseInterceptors','getOwnPropertyDescriptor','UploaderDto','./dto/uploder.dto','url','1089291YrjNPL','Body','buffer','length','上传文件','ApiTags','112MhBmSJ','@nestjs/platform-express','8boWvTo','upload2Local','Req','8814924RhXBDL','defineProperty','from','uploadFile','5714303ZIVPip','4vMzZuJ','@nestjs/swagger','@nestjs/common','FileInterceptor','object','UploadedFile','getModalImgById','function','1234611pINLup','pop','utf-8','FileController','Query','__decorate','__metadata','downFile','通过任务id获取原始任务的图片base64，并解决跨域问题','design:paramtypes','9404965KNIhsR','FileService','Get','通过url下载文件，解决跨域问题','toString','6369060mYWwEH','Res','design:returntype','Post','上传文件到本地服务器','99zIBKtu','fileService','design:type','prototype','./file.service','uploadFileNext','upload','file','replace','originalname','getProxyRequest','__esModule','ApiOperation','binary','1783236XTmzwK','Controller'];_0x5b26=function(){return _0x59bc9e;};return _0x5b26();}(function(_0x48ecf8,_0x2facfa){const _0x2e6baf=_0x508e,_0x42dd79=_0x48ecf8();while(!![]){try{const _0x567f32=-parseInt(_0x2e6baf(0x209))/0x1+-parseInt(_0x2e6baf(0x218))/0x2*(parseInt(_0x2e6baf(0x210))/0x3)+-parseInt(_0x2e6baf(0x220))/0x4*(parseInt(_0x2e6baf(0x1f1))/0x5)+parseInt(_0x2e6baf(0x21b))/0x6+parseInt(_0x2e6baf(0x21f))/0x7+parseInt(_0x2e6baf(0x216))/0x8*(-parseInt(_0x2e6baf(0x1e7))/0x9)+parseInt(_0x2e6baf(0x1f6))/0xa*(parseInt(_0x2e6baf(0x1fb))/0xb);if(_0x567f32===_0x2facfa)break;else _0x42dd79['push'](_0x42dd79['shift']());}catch(_0x5171ef){_0x42dd79['push'](_0x42dd79['shift']());}}}(_0x5b26,0xef622));var __decorate=this&&this[_0x53ecfc(0x1ec)]||function(_0x39a632,_0x3a3ce6,_0x570346,_0x396406){const _0x46aebc=_0x53ecfc;var _0x5a7b07=arguments[_0x46aebc(0x213)],_0x319fcc=_0x5a7b07<0x3?_0x3a3ce6:_0x396406===null?_0x396406=Object[_0x46aebc(0x20c)](_0x3a3ce6,_0x570346):_0x396406,_0x39e6b5;if(typeof Reflect===_0x46aebc(0x1e3)&&typeof Reflect['decorate']===_0x46aebc(0x1e6))_0x319fcc=Reflect['decorate'](_0x39a632,_0x3a3ce6,_0x570346,_0x396406);else{for(var _0x968189=_0x39a632[_0x46aebc(0x213)]-0x1;_0x968189>=0x0;_0x968189--)if(_0x39e6b5=_0x39a632[_0x968189])_0x319fcc=(_0x5a7b07<0x3?_0x39e6b5(_0x319fcc):_0x5a7b07>0x3?_0x39e6b5(_0x3a3ce6,_0x570346,_0x319fcc):_0x39e6b5(_0x3a3ce6,_0x570346))||_0x319fcc;}return _0x5a7b07>0x3&&_0x319fcc&&Object[_0x46aebc(0x21c)](_0x3a3ce6,_0x570346,_0x319fcc),_0x319fcc;},__metadata=this&&this[_0x53ecfc(0x1ed)]||function(_0x4ff95d,_0xe517df){const _0x36caf8=_0x53ecfc;if(typeof Reflect===_0x36caf8(0x1e3)&&typeof Reflect['metadata']===_0x36caf8(0x1e6))return Reflect['metadata'](_0x4ff95d,_0xe517df);},__param=this&&this['__param']||function(_0x3fc8c2,_0x50fc24){return function(_0x66b74a,_0x2f3ff8){_0x50fc24(_0x66b74a,_0x2f3ff8,_0x3fc8c2);};};function _0x508e(_0x35c03f,_0x293b01){const _0x5b266a=_0x5b26();return _0x508e=function(_0x508ea3,_0x31f077){_0x508ea3=_0x508ea3-0x1e2;let _0x1ab755=_0x5b266a[_0x508ea3];return _0x1ab755;},_0x508e(_0x35c03f,_0x293b01);}Object[_0x53ecfc(0x21c)](exports,_0x53ecfc(0x206),{'value':!![]}),exports[_0x53ecfc(0x1ea)]=void 0x0;const file_service_1=require(_0x53ecfc(0x1ff)),common_1=require(_0x53ecfc(0x222)),swagger_1=require(_0x53ecfc(0x221)),platform_express_1=require(_0x53ecfc(0x217)),uploder_dto_1=require(_0x53ecfc(0x20e)),uuid_1=require('uuid');let FileController=class FileController{constructor(_0x37722a){const _0x4483ae=_0x53ecfc;this[_0x4483ae(0x1fc)]=_0x37722a;}async[_0x53ecfc(0x21e)](_0x37f903,_0x813e3e){const _0xaec8c1=_0x53ecfc,_0x5bcef7=Buffer[_0xaec8c1(0x21d)](_0x813e3e['originalname'],_0xaec8c1(0x208))['toString'](_0xaec8c1(0x1e9));return this[_0xaec8c1(0x1fc)]['uploadFile']({'filename':_0x5bcef7,'buffer':_0x813e3e[_0xaec8c1(0x212)],..._0x37f903});}async[_0x53ecfc(0x219)](_0x4c37cd,_0x1b642b){const _0x349564=_0x53ecfc;let _0x2b3e64=(0x0,uuid_1['v4'])();_0x2b3e64=_0x2b3e64[_0x349564(0x203)](/-/g,'');const _0x43e1e4=_0x1b642b[_0x349564(0x204)]['split']('.')[_0x349564(0x1e8)](),_0x47daa8=_0x2b3e64+'.'+_0x43e1e4;return this[_0x349564(0x1fc)][_0x349564(0x219)]({'filename':_0x47daa8,'buffer':_0x1b642b[_0x349564(0x212)],..._0x4c37cd});}async[_0x53ecfc(0x205)](_0x581a48,_0x3980d0,_0x1b3d86){const _0x1e4bf2=_0x53ecfc;return this[_0x1e4bf2(0x1fc)][_0x1e4bf2(0x1ee)](_0x581a48,_0x3980d0,_0x1b3d86);}async[_0x53ecfc(0x1e5)](_0x380c5e){const _0xaf8a8e=_0x53ecfc;return this[_0xaf8a8e(0x1fc)][_0xaf8a8e(0x1e5)](_0x380c5e);}async[_0x53ecfc(0x200)](_0xfee269,_0x29ba4e){const _0x17a2e1=_0x53ecfc,_0x247da9=Buffer[_0x17a2e1(0x21d)](_0x29ba4e['originalname'],'binary')[_0x17a2e1(0x1f5)](_0x17a2e1(0x1e9));return{'data':{'dataPath':await this['fileService'][_0x17a2e1(0x21e)]({'filename':_0x247da9,'buffer':_0x29ba4e[_0x17a2e1(0x212)],..._0xfee269}),'md5':''}};}};__decorate([(0x0,common_1[_0x53ecfc(0x1f9)])(_0x53ecfc(0x201)),(0x0,swagger_1[_0x53ecfc(0x207)])({'summary':'上传文件'}),(0x0,common_1[_0x53ecfc(0x20b)])((0x0,platform_express_1[_0x53ecfc(0x1e2)])('file',{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x53ecfc(0x211)])()),__param(0x1,(0x0,common_1[_0x53ecfc(0x1e4)])()),__metadata('design:type',Function),__metadata(_0x53ecfc(0x1f0),[uploder_dto_1[_0x53ecfc(0x20d)],Object]),__metadata(_0x53ecfc(0x1f8),Promise)],FileController[_0x53ecfc(0x1fe)],_0x53ecfc(0x21e),null),__decorate([(0x0,common_1[_0x53ecfc(0x1f9)])('upload2Local'),(0x0,swagger_1[_0x53ecfc(0x207)])({'summary':_0x53ecfc(0x1fa)}),(0x0,common_1['UseInterceptors'])((0x0,platform_express_1[_0x53ecfc(0x1e2)])(_0x53ecfc(0x202),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x53ecfc(0x211)])()),__param(0x1,(0x0,common_1[_0x53ecfc(0x1e4)])()),__metadata(_0x53ecfc(0x1fd),Function),__metadata(_0x53ecfc(0x1f0),[uploder_dto_1[_0x53ecfc(0x20d)],Object]),__metadata(_0x53ecfc(0x1f8),Promise)],FileController[_0x53ecfc(0x1fe)],_0x53ecfc(0x219),null),__decorate([(0x0,common_1['Get'])('down'),(0x0,swagger_1[_0x53ecfc(0x207)])({'summary':_0x53ecfc(0x1f4)}),__param(0x0,(0x0,common_1[_0x53ecfc(0x1eb)])(_0x53ecfc(0x20f))),__param(0x1,(0x0,common_1[_0x53ecfc(0x21a)])()),__param(0x2,(0x0,common_1[_0x53ecfc(0x1f7)])()),__metadata(_0x53ecfc(0x1fd),Function),__metadata(_0x53ecfc(0x1f0),[String,Object,Object]),__metadata('design:returntype',Promise)],FileController[_0x53ecfc(0x1fe)],_0x53ecfc(0x205),null),__decorate([(0x0,common_1[_0x53ecfc(0x1f3)])('getModalImgById'),(0x0,swagger_1[_0x53ecfc(0x207)])({'summary':_0x53ecfc(0x1ef)}),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x53ecfc(0x21a)])()),__metadata(_0x53ecfc(0x1fd),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x53ecfc(0x1f8),Promise)],FileController['prototype'],_0x53ecfc(0x1e5),null),__decorate([(0x0,common_1[_0x53ecfc(0x1f9)])('uploadNext'),(0x0,swagger_1['ApiOperation'])({'summary':_0x53ecfc(0x214)}),(0x0,common_1[_0x53ecfc(0x20b)])((0x0,platform_express_1[_0x53ecfc(0x1e2)])(_0x53ecfc(0x202),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x53ecfc(0x211)])()),__param(0x1,(0x0,common_1[_0x53ecfc(0x1e4)])()),__metadata('design:type',Function),__metadata(_0x53ecfc(0x1f0),[uploder_dto_1[_0x53ecfc(0x20d)],Object]),__metadata('design:returntype',Promise)],FileController[_0x53ecfc(0x1fe)],_0x53ecfc(0x200),null),FileController=__decorate([(0x0,swagger_1[_0x53ecfc(0x215)])(_0x53ecfc(0x202)),(0x0,common_1[_0x53ecfc(0x20a)])(_0x53ecfc(0x202)),__metadata(_0x53ecfc(0x1f0),[file_service_1[_0x53ecfc(0x1f2)]])],FileController),exports['FileController']=FileController;