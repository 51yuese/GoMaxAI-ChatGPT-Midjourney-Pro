'use strict';const _0x69ca40=_0x3c58;function _0x3c58(_0x279944,_0x3fc5b2){const _0x76b197=_0x76b1();return _0x3c58=function(_0x3c5837,_0x295d9d){_0x3c5837=_0x3c5837-0xa1;let _0x2d7dfb=_0x76b197[_0x3c5837];return _0x2d7dfb;},_0x3c58(_0x279944,_0x3fc5b2);}(function(_0x1cab23,_0x11f5b4){const _0x29e5cc=_0x3c58,_0x5e89c6=_0x1cab23();while(!![]){try{const _0x1a6c0d=parseInt(_0x29e5cc(0xb9))/0x1+-parseInt(_0x29e5cc(0xdb))/0x2+parseInt(_0x29e5cc(0xcb))/0x3+-parseInt(_0x29e5cc(0xd9))/0x4+parseInt(_0x29e5cc(0xdf))/0x5*(-parseInt(_0x29e5cc(0xc3))/0x6)+parseInt(_0x29e5cc(0xc1))/0x7+-parseInt(_0x29e5cc(0xcc))/0x8*(-parseInt(_0x29e5cc(0xa3))/0x9);if(_0x1a6c0d===_0x11f5b4)break;else _0x5e89c6['push'](_0x5e89c6['shift']());}catch(_0x175f26){_0x5e89c6['push'](_0x5e89c6['shift']());}}}(_0x76b1,0x2f97b));var __decorate=this&&this[_0x69ca40(0xe0)]||function(_0x343755,_0x37579c,_0x36fe79,_0x1b2832){const _0x4e7274=_0x69ca40;var _0x25eade=arguments[_0x4e7274(0xb1)],_0x3d9e54=_0x25eade<0x3?_0x37579c:_0x1b2832===null?_0x1b2832=Object['getOwnPropertyDescriptor'](_0x37579c,_0x36fe79):_0x1b2832,_0x11d8bb;if(typeof Reflect===_0x4e7274(0xd8)&&typeof Reflect[_0x4e7274(0xd5)]===_0x4e7274(0xa2))_0x3d9e54=Reflect['decorate'](_0x343755,_0x37579c,_0x36fe79,_0x1b2832);else{for(var _0x2dc0f3=_0x343755[_0x4e7274(0xb1)]-0x1;_0x2dc0f3>=0x0;_0x2dc0f3--)if(_0x11d8bb=_0x343755[_0x2dc0f3])_0x3d9e54=(_0x25eade<0x3?_0x11d8bb(_0x3d9e54):_0x25eade>0x3?_0x11d8bb(_0x37579c,_0x36fe79,_0x3d9e54):_0x11d8bb(_0x37579c,_0x36fe79))||_0x3d9e54;}return _0x25eade>0x3&&_0x3d9e54&&Object[_0x4e7274(0xd6)](_0x37579c,_0x36fe79,_0x3d9e54),_0x3d9e54;},__metadata=this&&this[_0x69ca40(0xc0)]||function(_0x3f3266,_0x155e61){const _0x44128a=_0x69ca40;if(typeof Reflect===_0x44128a(0xd8)&&typeof Reflect['metadata']==='function')return Reflect[_0x44128a(0xb0)](_0x3f3266,_0x155e61);},__param=this&&this[_0x69ca40(0xc2)]||function(_0x49f737,_0x52fb56){return function(_0x5e980c,_0x556772){_0x52fb56(_0x5e980c,_0x556772,_0x49f737);};};Object[_0x69ca40(0xd6)](exports,_0x69ca40(0xa5),{'value':!![]}),exports['FileController']=void 0x0;const file_service_1=require(_0x69ca40(0xcf)),common_1=require(_0x69ca40(0xce)),swagger_1=require(_0x69ca40(0xda)),platform_express_1=require('@nestjs/platform-express'),uploder_dto_1=require('./dto/uploder.dto'),uuid_1=require('uuid');let FileController=class FileController{constructor(_0x1ebac1){const _0x1f4b97=_0x69ca40;this[_0x1f4b97(0xd7)]=_0x1ebac1;}async[_0x69ca40(0xe3)](_0x1680f1,_0x14a437){const _0x43856c=_0x69ca40,_0x220030=Buffer[_0x43856c(0xc8)](_0x14a437[_0x43856c(0xd3)],_0x43856c(0xab))[_0x43856c(0xa4)]('utf-8');return this[_0x43856c(0xd7)][_0x43856c(0xe3)]({'filename':_0x220030,'buffer':_0x14a437['buffer'],..._0x1680f1});}async[_0x69ca40(0xbd)](_0x47b0ef,_0xd795ae){const _0x2e848b=_0x69ca40;let _0xb7ab2d=(0x0,uuid_1['v4'])();_0xb7ab2d=_0xb7ab2d[_0x2e848b(0xe1)](/-/g,'');const _0x5de8ae=_0xd795ae[_0x2e848b(0xd3)][_0x2e848b(0xba)]('.')['pop'](),_0x369180=_0xb7ab2d+'.'+_0x5de8ae;return this[_0x2e848b(0xd7)][_0x2e848b(0xbd)]({'filename':_0x369180,'buffer':_0xd795ae['buffer'],..._0x47b0ef});}async[_0x69ca40(0xc4)](_0x38af46,_0x4e9a8b,_0xf2764d){const _0xfdedee=_0x69ca40;return this[_0xfdedee(0xd7)][_0xfdedee(0xa1)](_0x38af46,_0x4e9a8b,_0xf2764d);}async[_0x69ca40(0xb2)](_0x372b9d){const _0x1fc422=_0x69ca40;return this[_0x1fc422(0xd7)][_0x1fc422(0xb2)](_0x372b9d);}async[_0x69ca40(0xe2)](_0x4e3f83,_0x13a869){const _0x5aee9e=_0x69ca40,_0xe11895=Buffer[_0x5aee9e(0xc8)](_0x13a869[_0x5aee9e(0xd3)],_0x5aee9e(0xab))[_0x5aee9e(0xa4)](_0x5aee9e(0xbf)),_0x361122=await this[_0x5aee9e(0xd7)][_0x5aee9e(0xe3)]({'filename':_0xe11895,'buffer':_0x13a869['buffer'],..._0x4e3f83});if(_0x4e3f83[_0x5aee9e(0xa9)])return{'data':{'dataPath':_0x361122['url'],'md5':'','duration':_0x361122[_0x5aee9e(0xaa)]}};return{'data':{'dataPath':_0x361122,'md5':''}};}async[_0x69ca40(0xc9)](_0x20ac77,_0x39ac82){const _0x1a3394=_0x69ca40,_0x5dde0c=Buffer['from'](_0x39ac82[_0x1a3394(0xd3)],'binary')[_0x1a3394(0xa4)](_0x1a3394(0xbf));return{'data':{'dataPath':await this[_0x1a3394(0xd7)][_0x1a3394(0xe3)]({'filename':_0x5dde0c,'buffer':_0x39ac82[_0x1a3394(0xbb)],..._0x20ac77}),'md5':''}};}};function _0x76b1(){const _0xeee9b=['duration','binary','ApiTags','上传文件','Res','design:paramtypes','metadata','length','getModalImgById','uploadWang','UseInterceptors','file','ApiOperation','FileController','Post','71037KmHUCW','split','buffer','ApiBearerAuth','upload2Local','design:type','utf-8','__metadata','2291898vsstBr','__param','12816OjtSAK','getProxyRequest','Query','Body','uploadNext','from','uploadFileWang','FileService','34671pAmMRP','111376jLNSHM','prototype','@nestjs/common','./file.service','通过任务id获取原始任务的图片base64，并解决跨域问题','UploadedFile','wangeditor-uploaded-image','originalname','富文本上传文件','decorate','defineProperty','fileService','object','970080QBRxAk','@nestjs/swagger','26874IDfCkn','Controller','UploaderDto','upload','165EWFpAE','__decorate','replace','uploadFileNext','uploadFile','downFile','function','72kqErCL','toString','__esModule','FileInterceptor','design:returntype','通过url下载文件，解决跨域问题','returnDuration'];_0x76b1=function(){return _0xeee9b;};return _0x76b1();}__decorate([(0x0,common_1[_0x69ca40(0xb8)])(_0x69ca40(0xde)),(0x0,swagger_1[_0x69ca40(0xb6)])({'summary':_0x69ca40(0xad)}),(0x0,common_1['UseInterceptors'])((0x0,platform_express_1[_0x69ca40(0xa6)])(_0x69ca40(0xb5),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x69ca40(0xc6)])()),__param(0x1,(0x0,common_1[_0x69ca40(0xd1)])()),__metadata('design:type',Function),__metadata(_0x69ca40(0xaf),[uploder_dto_1[_0x69ca40(0xdd)],Object]),__metadata('design:returntype',Promise)],FileController[_0x69ca40(0xcd)],_0x69ca40(0xe3),null),__decorate([(0x0,common_1[_0x69ca40(0xb8)])(_0x69ca40(0xbd)),(0x0,swagger_1[_0x69ca40(0xb6)])({'summary':'上传文件到本地服务器'}),(0x0,common_1[_0x69ca40(0xb4)])((0x0,platform_express_1[_0x69ca40(0xa6)])(_0x69ca40(0xb5),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x69ca40(0xc6)])()),__param(0x1,(0x0,common_1[_0x69ca40(0xd1)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[uploder_dto_1[_0x69ca40(0xdd)],Object]),__metadata(_0x69ca40(0xa7),Promise)],FileController['prototype'],_0x69ca40(0xbd),null),__decorate([(0x0,common_1['Get'])('down'),(0x0,swagger_1[_0x69ca40(0xb6)])({'summary':_0x69ca40(0xa8)}),__param(0x0,(0x0,common_1[_0x69ca40(0xc5)])('url')),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1[_0x69ca40(0xae)])()),__metadata(_0x69ca40(0xbe),Function),__metadata(_0x69ca40(0xaf),[String,Object,Object]),__metadata(_0x69ca40(0xa7),Promise)],FileController['prototype'],'getProxyRequest',null),__decorate([(0x0,common_1['Get'])(_0x69ca40(0xb2)),(0x0,swagger_1[_0x69ca40(0xb6)])({'summary':_0x69ca40(0xd0)}),(0x0,swagger_1[_0x69ca40(0xbc)])(),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x69ca40(0xbe),Function),__metadata(_0x69ca40(0xaf),[Object]),__metadata(_0x69ca40(0xa7),Promise)],FileController[_0x69ca40(0xcd)],_0x69ca40(0xb2),null),__decorate([(0x0,common_1['Post'])(_0x69ca40(0xc7)),(0x0,swagger_1[_0x69ca40(0xb6)])({'summary':_0x69ca40(0xad)}),(0x0,common_1[_0x69ca40(0xb4)])((0x0,platform_express_1['FileInterceptor'])(_0x69ca40(0xb5),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x69ca40(0xd1)])()),__metadata('design:type',Function),__metadata(_0x69ca40(0xaf),[uploder_dto_1[_0x69ca40(0xdd)],Object]),__metadata(_0x69ca40(0xa7),Promise)],FileController['prototype'],_0x69ca40(0xe2),null),__decorate([(0x0,common_1[_0x69ca40(0xb8)])(_0x69ca40(0xb3)),(0x0,swagger_1['ApiOperation'])({'summary':_0x69ca40(0xd4)}),(0x0,common_1['UseInterceptors'])((0x0,platform_express_1[_0x69ca40(0xa6)])(_0x69ca40(0xd2),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x69ca40(0xc6)])()),__param(0x1,(0x0,common_1['UploadedFile'])()),__metadata(_0x69ca40(0xbe),Function),__metadata(_0x69ca40(0xaf),[uploder_dto_1[_0x69ca40(0xdd)],Object]),__metadata(_0x69ca40(0xa7),Promise)],FileController[_0x69ca40(0xcd)],'uploadFileWang',null),FileController=__decorate([(0x0,swagger_1[_0x69ca40(0xac)])(_0x69ca40(0xb5)),(0x0,common_1[_0x69ca40(0xdc)])(_0x69ca40(0xb5)),__metadata(_0x69ca40(0xaf),[file_service_1[_0x69ca40(0xca)]])],FileController),exports[_0x69ca40(0xb7)]=FileController;