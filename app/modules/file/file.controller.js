'use strict';function _0xc050(_0x578980,_0x561c38){const _0x14c9d8=_0x14c9();return _0xc050=function(_0xc050f,_0x125fdf){_0xc050f=_0xc050f-0x19b;let _0x4bc85d=_0x14c9d8[_0xc050f];return _0x4bc85d;},_0xc050(_0x578980,_0x561c38);}const _0x508e9c=_0xc050;(function(_0x244309,_0x244dc6){const _0x1a64d6=_0xc050,_0x1629ef=_0x244309();while(!![]){try{const _0x4c6bf5=-parseInt(_0x1a64d6(0x1a3))/0x1+-parseInt(_0x1a64d6(0x1d5))/0x2*(-parseInt(_0x1a64d6(0x1c5))/0x3)+-parseInt(_0x1a64d6(0x19c))/0x4+parseInt(_0x1a64d6(0x1d0))/0x5+-parseInt(_0x1a64d6(0x19b))/0x6+parseInt(_0x1a64d6(0x1a1))/0x7*(-parseInt(_0x1a64d6(0x1bb))/0x8)+parseInt(_0x1a64d6(0x1bc))/0x9;if(_0x4c6bf5===_0x244dc6)break;else _0x1629ef['push'](_0x1629ef['shift']());}catch(_0x4e6412){_0x1629ef['push'](_0x1629ef['shift']());}}}(_0x14c9,0x8a5dc));var __decorate=this&&this['__decorate']||function(_0x3e57b1,_0x4245d0,_0x2cbce6,_0x337399){const _0x173379=_0xc050;var _0x1985de=arguments[_0x173379(0x1c3)],_0x312f18=_0x1985de<0x3?_0x4245d0:_0x337399===null?_0x337399=Object[_0x173379(0x1b5)](_0x4245d0,_0x2cbce6):_0x337399,_0x477ede;if(typeof Reflect==='object'&&typeof Reflect[_0x173379(0x1c2)]===_0x173379(0x1a5))_0x312f18=Reflect[_0x173379(0x1c2)](_0x3e57b1,_0x4245d0,_0x2cbce6,_0x337399);else{for(var _0x1ce6f8=_0x3e57b1[_0x173379(0x1c3)]-0x1;_0x1ce6f8>=0x0;_0x1ce6f8--)if(_0x477ede=_0x3e57b1[_0x1ce6f8])_0x312f18=(_0x1985de<0x3?_0x477ede(_0x312f18):_0x1985de>0x3?_0x477ede(_0x4245d0,_0x2cbce6,_0x312f18):_0x477ede(_0x4245d0,_0x2cbce6))||_0x312f18;}return _0x1985de>0x3&&_0x312f18&&Object[_0x173379(0x1ca)](_0x4245d0,_0x2cbce6,_0x312f18),_0x312f18;},__metadata=this&&this[_0x508e9c(0x1d1)]||function(_0x440bb1,_0x2bed11){const _0x476079=_0x508e9c;if(typeof Reflect===_0x476079(0x1a0)&&typeof Reflect[_0x476079(0x1a7)]===_0x476079(0x1a5))return Reflect[_0x476079(0x1a7)](_0x440bb1,_0x2bed11);},__param=this&&this[_0x508e9c(0x1ac)]||function(_0x500624,_0x4ce4d2){return function(_0x3030d2,_0xa1a9c6){_0x4ce4d2(_0x3030d2,_0xa1a9c6,_0x500624);};};Object[_0x508e9c(0x1ca)](exports,'__esModule',{'value':!![]}),exports['FileController']=void 0x0;const file_service_1=require(_0x508e9c(0x1b9)),common_1=require('@nestjs/common'),swagger_1=require(_0x508e9c(0x1d4)),platform_express_1=require(_0x508e9c(0x1b8)),uploder_dto_1=require(_0x508e9c(0x1c4)),uuid_1=require(_0x508e9c(0x1cc));let FileController=class FileController{constructor(_0x2ad7d8){const _0x39e981=_0x508e9c;this[_0x39e981(0x1ce)]=_0x2ad7d8;}async[_0x508e9c(0x1d7)](_0x4c65f2,_0x507efe){const _0x2ae887=_0x508e9c,_0x337213=Buffer[_0x2ae887(0x1bd)](_0x507efe[_0x2ae887(0x1d8)],_0x2ae887(0x1aa))[_0x2ae887(0x1be)]('utf-8');return this['fileService']['uploadFile']({'filename':_0x337213,'buffer':_0x507efe[_0x2ae887(0x1cd)],..._0x4c65f2});}async[_0x508e9c(0x1a4)](_0x434154,_0x5d44d1){const _0x3c10a1=_0x508e9c;let _0xa14f9c=(0x0,uuid_1['v4'])();_0xa14f9c=_0xa14f9c[_0x3c10a1(0x1cf)](/-/g,'');const _0x363f11=_0x5d44d1[_0x3c10a1(0x1d8)][_0x3c10a1(0x1ae)]('.')['pop'](),_0x3c848f=_0xa14f9c+'.'+_0x363f11;return this[_0x3c10a1(0x1ce)][_0x3c10a1(0x1a4)]({'filename':_0x3c848f,'buffer':_0x5d44d1[_0x3c10a1(0x1cd)],..._0x434154});}async[_0x508e9c(0x1af)](_0x67b8d4,_0x13f485,_0x345b40){const _0x2c0351=_0x508e9c;return this[_0x2c0351(0x1ce)][_0x2c0351(0x1a6)](_0x67b8d4,_0x13f485,_0x345b40);}async[_0x508e9c(0x1b2)](_0x3de0e3){const _0x487c31=_0x508e9c;return this[_0x487c31(0x1ce)][_0x487c31(0x1b2)](_0x3de0e3);}async['uploadFileNext'](_0xfea5a6,_0x52f1fc){const _0x3dd7c7=_0x508e9c,_0x286d96=Buffer['from'](_0x52f1fc['originalname'],_0x3dd7c7(0x1aa))[_0x3dd7c7(0x1be)](_0x3dd7c7(0x1ad));return{'data':{'dataPath':await this[_0x3dd7c7(0x1ce)][_0x3dd7c7(0x1d7)]({'filename':_0x286d96,'buffer':_0x52f1fc[_0x3dd7c7(0x1cd)],..._0xfea5a6}),'md5':''}};}};__decorate([(0x0,common_1['Post'])('upload'),(0x0,swagger_1[_0x508e9c(0x19e)])({'summary':_0x508e9c(0x1c9)}),(0x0,common_1[_0x508e9c(0x1d6)])((0x0,platform_express_1[_0x508e9c(0x1b4)])(_0x508e9c(0x1b0),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x508e9c(0x1d9)])()),__param(0x1,(0x0,common_1[_0x508e9c(0x1c6)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[uploder_dto_1['UploaderDto'],Object]),__metadata(_0x508e9c(0x1ab),Promise)],FileController[_0x508e9c(0x19d)],_0x508e9c(0x1d7),null),__decorate([(0x0,common_1[_0x508e9c(0x1c8)])(_0x508e9c(0x1a4)),(0x0,swagger_1[_0x508e9c(0x19e)])({'summary':_0x508e9c(0x19f)}),(0x0,common_1['UseInterceptors'])((0x0,platform_express_1[_0x508e9c(0x1b4)])(_0x508e9c(0x1b0),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1[_0x508e9c(0x1d9)])()),__param(0x1,(0x0,common_1[_0x508e9c(0x1c6)])()),__metadata(_0x508e9c(0x1c0),Function),__metadata(_0x508e9c(0x1b3),[uploder_dto_1['UploaderDto'],Object]),__metadata(_0x508e9c(0x1ab),Promise)],FileController[_0x508e9c(0x19d)],'upload2Local',null),__decorate([(0x0,common_1[_0x508e9c(0x1cb)])(_0x508e9c(0x1b1)),(0x0,swagger_1[_0x508e9c(0x19e)])({'summary':_0x508e9c(0x1a8)}),__param(0x0,(0x0,common_1['Query'])(_0x508e9c(0x1b7))),__param(0x1,(0x0,common_1[_0x508e9c(0x1b6)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x508e9c(0x1c0),Function),__metadata('design:paramtypes',[String,Object,Object]),__metadata(_0x508e9c(0x1ab),Promise)],FileController[_0x508e9c(0x19d)],_0x508e9c(0x1af),null),__decorate([(0x0,common_1['Get'])(_0x508e9c(0x1b2)),(0x0,swagger_1['ApiOperation'])({'summary':_0x508e9c(0x1c1)}),(0x0,swagger_1[_0x508e9c(0x1a9)])(),__param(0x0,(0x0,common_1[_0x508e9c(0x1b6)])()),__metadata(_0x508e9c(0x1c0),Function),__metadata(_0x508e9c(0x1b3),[Object]),__metadata('design:returntype',Promise)],FileController[_0x508e9c(0x19d)],_0x508e9c(0x1b2),null),__decorate([(0x0,common_1[_0x508e9c(0x1c8)])(_0x508e9c(0x1c7)),(0x0,swagger_1[_0x508e9c(0x19e)])({'summary':_0x508e9c(0x1c9)}),(0x0,common_1[_0x508e9c(0x1d6)])((0x0,platform_express_1[_0x508e9c(0x1b4)])(_0x508e9c(0x1b0),{'preservePath':!![],'limits':{'fileSize':0x200*0x400*0x400}})),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x508e9c(0x1c6)])()),__metadata(_0x508e9c(0x1c0),Function),__metadata(_0x508e9c(0x1b3),[uploder_dto_1[_0x508e9c(0x1d3)],Object]),__metadata(_0x508e9c(0x1ab),Promise)],FileController[_0x508e9c(0x19d)],_0x508e9c(0x1ba),null),FileController=__decorate([(0x0,swagger_1[_0x508e9c(0x1a2)])(_0x508e9c(0x1b0)),(0x0,common_1[_0x508e9c(0x1bf)])(_0x508e9c(0x1b0)),__metadata(_0x508e9c(0x1b3),[file_service_1['FileService']])],FileController),exports[_0x508e9c(0x1d2)]=FileController;function _0x14c9(){const _0x506333=['downFile','metadata','通过url下载文件，解决跨域问题','ApiBearerAuth','binary','design:returntype','__param','utf-8','split','getProxyRequest','file','down','getModalImgById','design:paramtypes','FileInterceptor','getOwnPropertyDescriptor','Req','url','@nestjs/platform-express','./file.service','uploadFileNext','3490328heYlJY','16908453TOAaMW','from','toString','Controller','design:type','通过任务id获取原始任务的图片base64，并解决跨域问题','decorate','length','./dto/uploder.dto','75jqoaYv','UploadedFile','uploadNext','Post','上传文件','defineProperty','Get','uuid','buffer','fileService','replace','2613105wgrnWU','__metadata','FileController','UploaderDto','@nestjs/swagger','22658IdNiNa','UseInterceptors','uploadFile','originalname','Body','6687744haRCmY','86260SLGHmr','prototype','ApiOperation','上传文件到本地服务器','object','7Fhwgqi','ApiTags','545335ijtyhG','upload2Local','function'];_0x14c9=function(){return _0x506333;};return _0x14c9();}