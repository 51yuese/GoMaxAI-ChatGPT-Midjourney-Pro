'use strict';const _0x166248=_0x3e7f;(function(_0x1a9579,_0x1a552e){const _0x31af59=_0x3e7f,_0x3a5ed3=_0x1a9579();while(!![]){try{const _0x3db292=parseInt(_0x31af59(0x111))/0x1+parseInt(_0x31af59(0x14d))/0x2+-parseInt(_0x31af59(0x164))/0x3*(-parseInt(_0x31af59(0x152))/0x4)+-parseInt(_0x31af59(0x143))/0x5+-parseInt(_0x31af59(0x119))/0x6*(parseInt(_0x31af59(0x144))/0x7)+-parseInt(_0x31af59(0x15a))/0x8+-parseInt(_0x31af59(0x15d))/0x9*(-parseInt(_0x31af59(0x10d))/0xa);if(_0x3db292===_0x1a552e)break;else _0x3a5ed3['push'](_0x3a5ed3['shift']());}catch(_0x4ba1e7){_0x3a5ed3['push'](_0x3a5ed3['shift']());}}}(_0x27d2,0x5b67e));var __decorate=this&&this[_0x166248(0x147)]||function(_0x181bc5,_0x1fc929,_0xe0bfbe,_0x48b79b){const _0x28c6af=_0x166248;var _0x1b0089=arguments[_0x28c6af(0x120)],_0x2f0a6c=_0x1b0089<0x3?_0x1fc929:_0x48b79b===null?_0x48b79b=Object[_0x28c6af(0x12f)](_0x1fc929,_0xe0bfbe):_0x48b79b,_0x447a7d;if(typeof Reflect===_0x28c6af(0x136)&&typeof Reflect[_0x28c6af(0x137)]===_0x28c6af(0x138))_0x2f0a6c=Reflect[_0x28c6af(0x137)](_0x181bc5,_0x1fc929,_0xe0bfbe,_0x48b79b);else{for(var _0x2d2e66=_0x181bc5[_0x28c6af(0x120)]-0x1;_0x2d2e66>=0x0;_0x2d2e66--)if(_0x447a7d=_0x181bc5[_0x2d2e66])_0x2f0a6c=(_0x1b0089<0x3?_0x447a7d(_0x2f0a6c):_0x1b0089>0x3?_0x447a7d(_0x1fc929,_0xe0bfbe,_0x2f0a6c):_0x447a7d(_0x1fc929,_0xe0bfbe))||_0x2f0a6c;}return _0x1b0089>0x3&&_0x2f0a6c&&Object[_0x28c6af(0x13e)](_0x1fc929,_0xe0bfbe,_0x2f0a6c),_0x2f0a6c;},__metadata=this&&this[_0x166248(0x127)]||function(_0x4728cd,_0x301222){const _0x596c4c=_0x166248;if(typeof Reflect===_0x596c4c(0x136)&&typeof Reflect['metadata']===_0x596c4c(0x138))return Reflect[_0x596c4c(0x133)](_0x4728cd,_0x301222);};Object['defineProperty'](exports,_0x166248(0x11f),{'value':!![]}),exports['TaskService']=void 0x0;const globalConfig_service_1=require(_0x166248(0x130)),common_1=require(_0x166248(0x11e)),schedule_1=require(_0x166248(0x12e)),models_service_1=require(_0x166248(0x168)),auth_service_1=require(_0x166248(0x13d)),midjourney_service_1=require(_0x166248(0x13c)),chatLog_service_1=require(_0x166248(0x142)),user_service_1=require(_0x166248(0x167)),chatgpt_service_1=require(_0x166248(0x126)),linkFox_service_1=require('../linkFox/linkFox.service'),coze_service_1=require('../coze/coze.service'),human_service_1=require(_0x166248(0x14a));function _0x3e7f(_0x16f752,_0x59f2fe){const _0x27d20c=_0x27d2();return _0x3e7f=function(_0x3e7f89,_0x57fbcb){_0x3e7f89=_0x3e7f89-0x10a;let _0x3b0029=_0x27d20c[_0x3e7f89];return _0x3b0029;},_0x3e7f(_0x16f752,_0x59f2fe);}let TaskService=class TaskService{constructor(_0xddf0da,_0x2a1019,_0x448905,_0x16ba73,_0x2ad90c,_0x310293,_0x51195d,_0x57fa47,_0x152d95,_0x17d997){const _0x551293=_0x166248;this[_0x551293(0x115)]=_0xddf0da,this[_0x551293(0x12a)]=_0x2a1019,this['chatgptService']=_0x448905,this[_0x551293(0x163)]=_0x16ba73,this['modelsService']=_0x2ad90c,this[_0x551293(0x11a)]=_0x310293,this[_0x551293(0x154)]=_0x51195d,this[_0x551293(0x110)]=_0x57fa47,this[_0x551293(0x124)]=_0x152d95,this['humanService']=_0x17d997;}['onModuleInit'](){const _0x863397=_0x166248;this[_0x863397(0x11a)][_0x863397(0x156)](),this['midjourneyService'][_0x863397(0x14c)](),this[_0x863397(0x12a)][_0x863397(0x14e)](),this[_0x863397(0x12a)][_0x863397(0x15e)](),this['chatgptService'][_0x863397(0x10b)](),this[_0x863397(0x163)][_0x863397(0x128)](),this[_0x863397(0x12a)]['syncWorkFlowDict'](),this[_0x863397(0x12a)][_0x863397(0x12c)](),this[_0x863397(0x124)][_0x863397(0x116)]();}[_0x166248(0x16e)](){const _0x4340db=_0x166248;common_1[_0x4340db(0x129)]['debug'](_0x4340db(0x158),'TaskService'),this[_0x4340db(0x115)][_0x4340db(0x141)]();}async['WeMiniAKUpdateJob'](){const _0x940fae=_0x166248;try{await this['authService'][_0x940fae(0x156)]();}catch(_0x4efea7){common_1[_0x940fae(0x129)][_0x940fae(0x165)](_0x940fae(0x10a),_0x4efea7);}}async[_0x166248(0x13a)](){const _0x389828=_0x166248;await this[_0x389828(0x115)][_0x389828(0x134)]();}async[_0x166248(0x151)](){const _0x16f8a4=_0x166248;await this[_0x16f8a4(0x115)][_0x16f8a4(0x14b)]();}[_0x166248(0x11b)](){const _0x59175e=_0x166248;this['modelsService'][_0x59175e(0x155)]();}async['syncMjpAccountAutomatic'](){const _0x684da7=_0x166248;this[_0x684da7(0x12a)][_0x684da7(0x14c)]();}async[_0x166248(0x145)](){const _0x16cfe9=_0x166248;this['midjourneyService'][_0x16cfe9(0x14e)]();}async[_0x166248(0x10b)](){const _0x3e05cb=_0x166248;this[_0x3e05cb(0x114)][_0x3e05cb(0x10b)]();}async[_0x166248(0x15e)](){const _0x177fd5=_0x166248;this[_0x177fd5(0x12a)][_0x177fd5(0x15e)]();}async['syncMusic'](){const _0x5ae712=_0x166248;this[_0x5ae712(0x163)]['syncAssets']();}async[_0x166248(0x139)](){const _0x431bbd=_0x166248;this[_0x431bbd(0x154)][_0x431bbd(0x139)]();}async[_0x166248(0x11c)](){const _0x1aa1b8=_0x166248;this[_0x1aa1b8(0x12a)][_0x1aa1b8(0x11c)]();}async[_0x166248(0x12c)](){const _0x3e5a45=_0x166248;this['midjourneyService'][_0x3e5a45(0x12c)]();}async[_0x166248(0x169)](){const _0x4ce96b=_0x166248;this[_0x4ce96b(0x110)][_0x4ce96b(0x117)]();}async[_0x166248(0x14f)](){const _0x5f17e4=_0x166248;this[_0x5f17e4(0x110)]['batchMakeInfo']();}async[_0x166248(0x10e)](){const _0x24d409=_0x166248;this['chatgptService'][_0x24d409(0x123)]();}async['syncMjTask'](){const _0x3e2609=_0x166248;this[_0x3e2609(0x12a)]['batchTaskResult']();}async['syncMusicTask'](){const _0x4a3da8=_0x166248;this['chatLogService'][_0x4a3da8(0x15c)]();}async[_0x166248(0x140)](){const _0x29e6c5=_0x166248;this['chatLogService'][_0x29e6c5(0x122)]();}async[_0x166248(0x13f)](){const _0x2ba760=_0x166248;this[_0x2ba760(0x163)][_0x2ba760(0x13f)]();}async[_0x166248(0x148)](){const _0x570079=_0x166248;this[_0x570079(0x124)][_0x570079(0x160)]();}async[_0x166248(0x116)](){const _0x580430=_0x166248;this[_0x580430(0x124)][_0x580430(0x116)]();}async[_0x166248(0x146)](){const _0x15f9c9=_0x166248;this[_0x15f9c9(0x124)][_0x15f9c9(0x162)]();}async[_0x166248(0x15f)](){const _0xc7f41=_0x166248;this[_0xc7f41(0x16a)]['musetalkTask'](),this['humanService'][_0xc7f41(0x112)]();}async[_0x166248(0x10f)](){this['chatLogService']['syncJMengTask']();}};function _0x27d2(){const _0x40c3b2=['../midjourney/midjourney.service','../auth/auth.service','defineProperty','syncVeoTask','syncRunwayTask','getWechatAccessToken','../chatLog/chatLog.service','1603640NyXJuO','14980nOsmcn','syncMjpTask','syncKnowledgeProgressTask','__decorate','syncKnowledgeTask','MidjourneyService','../human/human.service','pushLog','syncMjpAccountAutomatic','198114LHhadK','syncTask','syncLinxFoxTask','syncMjTask','pushAuthLogs','3548ReGoJj','EVERY_5_MINUTES','userService','refreshBaiduAccesstoken','renewMiniAccessToken','prototype','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','EVERY_5_SECONDS','5386952CPWMGR','Cron','batchMusicResult','63yVYvGh','syncMjImg','musetalkTaskProgressTask','batchKnowledgeResult','CronExpression','batchKnowledgeProgressResult','chatLogService','57XpbnNA','error','design:type','../user/user.service','../models/models.service','syncLinxFoxGallery','humanService','ChatgptService','CozeService','WeMiniAKUpdateJob','handleCron','WeMiniAKUpdateJobï¼š','syncLumaTask','EVERY_HOUR','1843530jQBUji','syncPPTTask','syncJMengTask','linkFoxService','178254JTycgb','voiceResult','0\x20*/25\x20*\x20*\x20*\x20*','chatgptService','globalConfigService','batchBotProgressResult','gallery','design:paramtypes','606uwCvps','authService','refreshBaiduAccessToken','syncWorkFlowDict','EVERY_30_SECONDS','@nestjs/common','__esModule','length','EVERY_DAY_AT_MIDNIGHT','batchRunwayVideoResult','batchPPTResult','cozeService','LinkFoxService','../chatgpt/chatgpt.service','__metadata','syncAssets','Logger','midjourneyService','HumanService','syncModels','EVERY_10_SECONDS','@nestjs/schedule','getOwnPropertyDescriptor','./../globalConfig/globalConfig.service','UserService','EVERY_2_HOURS','metadata','checkAiAuth','AuthService','object','decorate','function','updateVipExpire2Redis','checkAuth','design:returntype'];_0x27d2=function(){return _0x40c3b2;};return _0x27d2();}__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x166248(0x161)]['EVERY_HOUR']),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),void 0x0)],TaskService[_0x166248(0x157)],_0x166248(0x16e),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1['CronExpression'][_0x166248(0x153)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x16d),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(_0x166248(0x113)),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],'checkAuth',null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)]['EVERY_2_HOURS']),__metadata(_0x166248(0x166),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TaskService[_0x166248(0x157)],_0x166248(0x151),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1['CronExpression'][_0x166248(0x10c)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),void 0x0)],TaskService[_0x166248(0x157)],_0x166248(0x11b),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x121)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata('design:returntype',Promise)],TaskService[_0x166248(0x157)],_0x166248(0x14c),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x166248(0x161)][_0x166248(0x153)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x145),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x153)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],'syncLumaTask',null),__decorate([(0x0,schedule_1['Cron'])(schedule_1['CronExpression']['EVERY_5_MINUTES']),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x15e),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)]['EVERY_5_MINUTES']),__metadata(_0x166248(0x166),Function),__metadata('design:paramtypes',[]),__metadata(_0x166248(0x13b),Promise)],TaskService['prototype'],'syncMusic',null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)]['EVERY_DAY_AT_MIDNIGHT']),__metadata('design:type',Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],'updateVipExpire2Redis',null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x121)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata('design:returntype',Promise)],TaskService[_0x166248(0x157)],'syncWorkFlowDict',null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x166248(0x161)][_0x166248(0x121)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x12c),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1['CronExpression']['EVERY_12_HOURS']),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata('design:returntype',Promise)],TaskService[_0x166248(0x157)],_0x166248(0x169),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1['CronExpression'][_0x166248(0x159)]),__metadata(_0x166248(0x166),Function),__metadata('design:paramtypes',[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x14f),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x159)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x10e),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x11d)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService['prototype'],_0x166248(0x150),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x166248(0x161)][_0x166248(0x159)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],'syncMusicTask',null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1['CronExpression'][_0x166248(0x12d)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata('design:returntype',Promise)],TaskService[_0x166248(0x157)],_0x166248(0x140),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1['CronExpression'][_0x166248(0x12d)]),__metadata(_0x166248(0x166),Function),__metadata('design:paramtypes',[]),__metadata(_0x166248(0x13b),Promise)],TaskService['prototype'],_0x166248(0x13f),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)]['EVERY_30_SECONDS']),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x148),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x132)]),__metadata('design:type',Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],'batchBotProgressResult',null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1['CronExpression']['EVERY_10_SECONDS']),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],'syncKnowledgeProgressTask',null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x12d)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata('design:returntype',Promise)],TaskService[_0x166248(0x157)],_0x166248(0x15f),null),__decorate([(0x0,schedule_1[_0x166248(0x15b)])(schedule_1[_0x166248(0x161)][_0x166248(0x11d)]),__metadata(_0x166248(0x166),Function),__metadata(_0x166248(0x118),[]),__metadata(_0x166248(0x13b),Promise)],TaskService[_0x166248(0x157)],_0x166248(0x10f),null),TaskService=__decorate([(0x0,common_1['Injectable'])(),__metadata('design:paramtypes',[globalConfig_service_1['GlobalConfigService'],midjourney_service_1[_0x166248(0x149)],chatgpt_service_1[_0x166248(0x16b)],chatLog_service_1['ChatLogService'],models_service_1['ModelsService'],auth_service_1[_0x166248(0x135)],user_service_1[_0x166248(0x131)],linkFox_service_1[_0x166248(0x125)],coze_service_1[_0x166248(0x16c)],human_service_1[_0x166248(0x12b)]])],TaskService),exports['TaskService']=TaskService;