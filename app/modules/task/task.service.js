'use strict';const _0x53af55=_0x123f;(function(_0x4a7c61,_0x4c6260){const _0xcd3a5=_0x123f,_0xdaef01=_0x4a7c61();while(!![]){try{const _0x1e96e2=-parseInt(_0xcd3a5(0x200))/0x1*(parseInt(_0xcd3a5(0x207))/0x2)+parseInt(_0xcd3a5(0x206))/0x3*(-parseInt(_0xcd3a5(0x224))/0x4)+-parseInt(_0xcd3a5(0x204))/0x5+parseInt(_0xcd3a5(0x20d))/0x6+-parseInt(_0xcd3a5(0x1ee))/0x7*(parseInt(_0xcd3a5(0x1eb))/0x8)+parseInt(_0xcd3a5(0x20c))/0x9+parseInt(_0xcd3a5(0x211))/0xa;if(_0x1e96e2===_0x4c6260)break;else _0xdaef01['push'](_0xdaef01['shift']());}catch(_0x1dc05c){_0xdaef01['push'](_0xdaef01['shift']());}}}(_0x5e68,0x7e04b));var __decorate=this&&this['__decorate']||function(_0x4df0c3,_0x38efdb,_0x2c9917,_0x3c46ad){const _0x1308ee=_0x123f;var _0x5319ea=arguments['length'],_0x595b5d=_0x5319ea<0x3?_0x38efdb:_0x3c46ad===null?_0x3c46ad=Object[_0x1308ee(0x1fc)](_0x38efdb,_0x2c9917):_0x3c46ad,_0x1aa825;if(typeof Reflect===_0x1308ee(0x1fa)&&typeof Reflect['decorate']===_0x1308ee(0x220))_0x595b5d=Reflect['decorate'](_0x4df0c3,_0x38efdb,_0x2c9917,_0x3c46ad);else{for(var _0x326c11=_0x4df0c3[_0x1308ee(0x1ea)]-0x1;_0x326c11>=0x0;_0x326c11--)if(_0x1aa825=_0x4df0c3[_0x326c11])_0x595b5d=(_0x5319ea<0x3?_0x1aa825(_0x595b5d):_0x5319ea>0x3?_0x1aa825(_0x38efdb,_0x2c9917,_0x595b5d):_0x1aa825(_0x38efdb,_0x2c9917))||_0x595b5d;}return _0x5319ea>0x3&&_0x595b5d&&Object[_0x1308ee(0x1e7)](_0x38efdb,_0x2c9917,_0x595b5d),_0x595b5d;},__metadata=this&&this[_0x53af55(0x1e1)]||function(_0x455130,_0xcaaf06){const _0x758d97=_0x53af55;if(typeof Reflect===_0x758d97(0x1fa)&&typeof Reflect[_0x758d97(0x209)]==='function')return Reflect[_0x758d97(0x209)](_0x455130,_0xcaaf06);};Object[_0x53af55(0x1e7)](exports,'__esModule',{'value':!![]}),exports[_0x53af55(0x1fd)]=void 0x0;const globalConfig_service_1=require('./../globalConfig/globalConfig.service'),common_1=require(_0x53af55(0x1e0)),schedule_1=require(_0x53af55(0x210)),models_service_1=require(_0x53af55(0x214)),auth_service_1=require(_0x53af55(0x201)),midjourney_service_1=require(_0x53af55(0x1f2)),chatLog_service_1=require('../chatLog/chatLog.service'),user_service_1=require(_0x53af55(0x1e3)),chatgpt_service_1=require('../chatgpt/chatgpt.service');function _0x5e68(){const _0x129638=['0\x20*/25\x20*\x20*\x20*\x20*','GlobalConfigService','object','syncMjpTask','getOwnPropertyDescriptor','TaskService','chatgptService','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','7731PEwYZL','../auth/auth.service','userService','error','146900VoyIGH','handleCron','234FilAXg','92kvIBUI','EVERY_DAY_AT_MIDNIGHT','metadata','getWechatAccessToken','design:paramtypes','81639RGtRPQ','5171400QhNfUg','prototype','WeMiniAKUpdateJob','@nestjs/schedule','5463120WZfDQw','design:returntype','design:type','../models/models.service','Injectable','onModuleInit','AuthService','authService','ChatgptService','modelsService','checkAuth','EVERY_30_MINUTES','goMaxAiAuth','syncAssets','renewMiniAccessToken','function','syncMusic','updateVipExpire2Redis','EVERY_HOUR','23272UvnoVT','pushAuthLogs','@nestjs/common','__metadata','ChatLogService','../user/user.service','refreshBaiduAccesstoken','syncLumaTask','debug','defineProperty','EVERY_5_MINUTES','ModelsService','length','8XUYADg','globalConfigService','pushLog','436114GtCdev','Cron','midjourneyService','chatLogService','../midjourney/midjourney.service','refreshBaiduAccessToken','Logger','syncMjImg','CronExpression','syncMjpAccountAutomatic'];_0x5e68=function(){return _0x129638;};return _0x5e68();}function _0x123f(_0x27386e,_0x44d7d6){const _0x5e6844=_0x5e68();return _0x123f=function(_0x123f15,_0x2ac77d){_0x123f15=_0x123f15-0x1df;let _0x7d1020=_0x5e6844[_0x123f15];return _0x7d1020;},_0x123f(_0x27386e,_0x44d7d6);}let TaskService=class TaskService{constructor(_0x129ddb,_0xa57dbb,_0x26afff,_0x2102c1,_0xf1fca,_0x14be54,_0x5490f2){const _0x5f296d=_0x53af55;this[_0x5f296d(0x1ec)]=_0x129ddb,this[_0x5f296d(0x1f0)]=_0xa57dbb,this['chatgptService']=_0x26afff,this[_0x5f296d(0x1f1)]=_0x2102c1,this[_0x5f296d(0x21a)]=_0xf1fca,this[_0x5f296d(0x218)]=_0x14be54,this[_0x5f296d(0x202)]=_0x5490f2;}[_0x53af55(0x216)](){const _0x1faf6f=_0x53af55;this[_0x1faf6f(0x218)][_0x1faf6f(0x21f)](),this[_0x1faf6f(0x1f0)][_0x1faf6f(0x1f7)](),this[_0x1faf6f(0x1f0)][_0x1faf6f(0x1fb)](),this[_0x1faf6f(0x1f0)]['syncMjImg'](),this[_0x1faf6f(0x1fe)]['syncLumaTask'](),this[_0x1faf6f(0x1f1)][_0x1faf6f(0x21e)]();}['handleCron'](){const _0x36dda9=_0x53af55;common_1[_0x36dda9(0x1f4)][_0x36dda9(0x1e6)](_0x36dda9(0x1ff),_0x36dda9(0x1fd)),this[_0x36dda9(0x1ec)][_0x36dda9(0x20a)]();}async[_0x53af55(0x20f)](){const _0x572fca=_0x53af55;try{await this[_0x572fca(0x218)]['renewMiniAccessToken']();}catch(_0x400dad){common_1['Logger'][_0x572fca(0x203)]('WeMiniAKUpdateJobï¼š',_0x400dad);}}async[_0x53af55(0x21b)](){const _0x34def3=_0x53af55;await this[_0x34def3(0x1ec)][_0x34def3(0x21d)]();}async[_0x53af55(0x1df)](){const _0x5eff31=_0x53af55;await this[_0x5eff31(0x1ec)][_0x5eff31(0x1ed)]();}[_0x53af55(0x1f3)](){const _0x5d87db=_0x53af55;this[_0x5d87db(0x21a)][_0x5d87db(0x1e4)]();}async[_0x53af55(0x1f7)](){const _0x4a878e=_0x53af55;this[_0x4a878e(0x1f0)][_0x4a878e(0x1f7)]();}async[_0x53af55(0x1fb)](){const _0x4b883d=_0x53af55;this['midjourneyService'][_0x4b883d(0x1fb)]();}async[_0x53af55(0x1e5)](){this['chatgptService']['syncLumaTask']();}async[_0x53af55(0x1f5)](){this['midjourneyService']['syncMjImg']();}async[_0x53af55(0x221)](){const _0x12dd39=_0x53af55;this[_0x12dd39(0x1f1)]['syncAssets']();}async[_0x53af55(0x222)](){const _0x249e1a=_0x53af55;this['userService'][_0x249e1a(0x222)]();}};__decorate([(0x0,schedule_1[_0x53af55(0x1ef)])(schedule_1['CronExpression'][_0x53af55(0x223)]),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata(_0x53af55(0x212),void 0x0)],TaskService[_0x53af55(0x20e)],_0x53af55(0x205),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x53af55(0x1f6)][_0x53af55(0x1e8)]),__metadata(_0x53af55(0x213),Function),__metadata(_0x53af55(0x20b),[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],_0x53af55(0x20f),null),__decorate([(0x0,schedule_1['Cron'])(_0x53af55(0x1f8)),__metadata(_0x53af55(0x213),Function),__metadata(_0x53af55(0x20b),[]),__metadata('design:returntype',Promise)],TaskService[_0x53af55(0x20e)],'checkAuth',null),__decorate([(0x0,schedule_1[_0x53af55(0x1ef)])(schedule_1[_0x53af55(0x1f6)]['EVERY_2_HOURS']),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],_0x53af55(0x1df),null),__decorate([(0x0,schedule_1[_0x53af55(0x1ef)])(schedule_1[_0x53af55(0x1f6)][_0x53af55(0x223)]),__metadata('design:type',Function),__metadata(_0x53af55(0x20b),[]),__metadata('design:returntype',void 0x0)],TaskService['prototype'],_0x53af55(0x1f3),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x53af55(0x1f6)][_0x53af55(0x208)]),__metadata(_0x53af55(0x213),Function),__metadata(_0x53af55(0x20b),[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],_0x53af55(0x1f7),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x53af55(0x1f6)]['EVERY_30_MINUTES']),__metadata('design:type',Function),__metadata(_0x53af55(0x20b),[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],'syncMjpTask',null),__decorate([(0x0,schedule_1[_0x53af55(0x1ef)])(schedule_1[_0x53af55(0x1f6)][_0x53af55(0x21c)]),__metadata(_0x53af55(0x213),Function),__metadata(_0x53af55(0x20b),[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],_0x53af55(0x1e5),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1['CronExpression'][_0x53af55(0x21c)]),__metadata(_0x53af55(0x213),Function),__metadata(_0x53af55(0x20b),[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],_0x53af55(0x1f5),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1['CronExpression'][_0x53af55(0x21c)]),__metadata('design:type',Function),__metadata(_0x53af55(0x20b),[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],_0x53af55(0x221),null),__decorate([(0x0,schedule_1[_0x53af55(0x1ef)])(schedule_1['CronExpression'][_0x53af55(0x208)]),__metadata(_0x53af55(0x213),Function),__metadata('design:paramtypes',[]),__metadata(_0x53af55(0x212),Promise)],TaskService[_0x53af55(0x20e)],_0x53af55(0x222),null),TaskService=__decorate([(0x0,common_1[_0x53af55(0x215)])(),__metadata('design:paramtypes',[globalConfig_service_1[_0x53af55(0x1f9)],midjourney_service_1['MidjourneyService'],chatgpt_service_1[_0x53af55(0x219)],chatLog_service_1[_0x53af55(0x1e2)],models_service_1[_0x53af55(0x1e9)],auth_service_1[_0x53af55(0x217)],user_service_1['UserService']])],TaskService),exports['TaskService']=TaskService;