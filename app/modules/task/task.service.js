'use strict';const _0x408150=_0x1401;function _0xb7bb(){const _0x448091=['onModuleInit','CronExpression','1969000cdmtrT','syncModels','syncMusic','pushAuthLogs','globalConfigService','EVERY_DAY_AT_MIDNIGHT','16346007IOmJcS','EVERY_HOUR','refreshBaiduAccessToken','syncMjpTask','midjourneyService','object','./../globalConfig/globalConfig.service','checkAiAuth','syncAssets','EVERY_2_HOURS','@nestjs/schedule','TaskService','defineProperty','__decorate','design:paramtypes','ModelsService','checkAuth','chatgptService','697952iXuWHT','metadata','../chatLog/chatLog.service','../auth/auth.service','getOwnPropertyDescriptor','Injectable','48aACQUA','WeMiniAKUpdateJob','function','handleCron','3597368UfvhxS','AuthService','ChatLogService','EVERY_5_MINUTES','refreshBaiduAccesstoken','length','syncWorkFlowDict','prototype','getWechatAccessToken','../models/models.service','pushLog','chatLogService','syncLumaTask','design:type','modelsService','__metadata','Cron','1574361LjLvfb','error','7brvvBZ','syncMjImg','debug','662580vGbrPb','decorate','updateVipExpire2Redis','@nestjs/common','syncMjpAccountAutomatic','ChatgptService','authService','design:returntype','GlobalConfigService','25502rlywQL','renewMiniAccessToken'];_0xb7bb=function(){return _0x448091;};return _0xb7bb();}(function(_0x4219b5,_0x1210c4){const _0x252632=_0x1401,_0x2dd1b4=_0x4219b5();while(!![]){try{const _0x5a1b35=-parseInt(_0x252632(0x206))/0x1*(parseInt(_0x252632(0x1e3))/0x2)+-parseInt(_0x252632(0x1f8))/0x3+-parseInt(_0x252632(0x1dd))/0x4+parseInt(_0x252632(0x20a))/0x5+-parseInt(_0x252632(0x1fd))/0x6+-parseInt(_0x252632(0x1fa))/0x7*(parseInt(_0x252632(0x1e7))/0x8)+parseInt(_0x252632(0x210))/0x9;if(_0x5a1b35===_0x1210c4)break;else _0x2dd1b4['push'](_0x2dd1b4['shift']());}catch(_0x144765){_0x2dd1b4['push'](_0x2dd1b4['shift']());}}}(_0xb7bb,0x52aa7));var __decorate=this&&this[_0x408150(0x1d8)]||function(_0x27a4d7,_0x165707,_0x1c4a67,_0x2f7491){const _0x258f2e=_0x408150;var _0x1065d2=arguments[_0x258f2e(0x1ec)],_0x22e3e7=_0x1065d2<0x3?_0x165707:_0x2f7491===null?_0x2f7491=Object[_0x258f2e(0x1e1)](_0x165707,_0x1c4a67):_0x2f7491,_0x21f654;if(typeof Reflect===_0x258f2e(0x215)&&typeof Reflect[_0x258f2e(0x1fe)]==='function')_0x22e3e7=Reflect[_0x258f2e(0x1fe)](_0x27a4d7,_0x165707,_0x1c4a67,_0x2f7491);else{for(var _0x4c93da=_0x27a4d7['length']-0x1;_0x4c93da>=0x0;_0x4c93da--)if(_0x21f654=_0x27a4d7[_0x4c93da])_0x22e3e7=(_0x1065d2<0x3?_0x21f654(_0x22e3e7):_0x1065d2>0x3?_0x21f654(_0x165707,_0x1c4a67,_0x22e3e7):_0x21f654(_0x165707,_0x1c4a67))||_0x22e3e7;}return _0x1065d2>0x3&&_0x22e3e7&&Object[_0x258f2e(0x21c)](_0x165707,_0x1c4a67,_0x22e3e7),_0x22e3e7;},__metadata=this&&this[_0x408150(0x1f6)]||function(_0x562e99,_0x310a52){const _0x3dd7f3=_0x408150;if(typeof Reflect===_0x3dd7f3(0x215)&&typeof Reflect[_0x3dd7f3(0x1de)]===_0x3dd7f3(0x1e5))return Reflect[_0x3dd7f3(0x1de)](_0x562e99,_0x310a52);};function _0x1401(_0x2ff3de,_0x156ce3){const _0xb7bb86=_0xb7bb();return _0x1401=function(_0x1401d3,_0x57ecda){_0x1401d3=_0x1401d3-0x1d8;let _0x581a9d=_0xb7bb86[_0x1401d3];return _0x581a9d;},_0x1401(_0x2ff3de,_0x156ce3);}Object[_0x408150(0x21c)](exports,'__esModule',{'value':!![]}),exports[_0x408150(0x21b)]=void 0x0;const globalConfig_service_1=require(_0x408150(0x216)),common_1=require(_0x408150(0x200)),schedule_1=require(_0x408150(0x21a)),models_service_1=require(_0x408150(0x1f0)),auth_service_1=require(_0x408150(0x1e0)),midjourney_service_1=require('../midjourney/midjourney.service'),chatLog_service_1=require(_0x408150(0x1df)),user_service_1=require('../user/user.service'),chatgpt_service_1=require('../chatgpt/chatgpt.service');let TaskService=class TaskService{constructor(_0x3b73f3,_0x25b3bd,_0x57603c,_0x1acc02,_0x388394,_0x5a2863,_0xa10158){const _0x3b9801=_0x408150;this[_0x3b9801(0x20e)]=_0x3b73f3,this[_0x3b9801(0x214)]=_0x25b3bd,this[_0x3b9801(0x1dc)]=_0x57603c,this['chatLogService']=_0x1acc02,this[_0x3b9801(0x1f5)]=_0x388394,this[_0x3b9801(0x203)]=_0x5a2863,this['userService']=_0xa10158;}[_0x408150(0x208)](){const _0xbd3229=_0x408150;this[_0xbd3229(0x203)][_0xbd3229(0x207)](),this[_0xbd3229(0x214)][_0xbd3229(0x201)](),this['midjourneyService']['syncTask'](),this['midjourneyService']['syncMjImg'](),this[_0xbd3229(0x1dc)][_0xbd3229(0x1f3)](),this[_0xbd3229(0x1f2)]['syncAssets'](),this[_0xbd3229(0x214)][_0xbd3229(0x1ed)](),this['midjourneyService'][_0xbd3229(0x20b)]();}[_0x408150(0x1e6)](){const _0x2eef4d=_0x408150;common_1['Logger'][_0x2eef4d(0x1fc)]('Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token',_0x2eef4d(0x21b)),this[_0x2eef4d(0x20e)][_0x2eef4d(0x1ef)]();}async[_0x408150(0x1e4)](){const _0x31f1c6=_0x408150;try{await this[_0x31f1c6(0x203)][_0x31f1c6(0x207)]();}catch(_0x31f206){common_1['Logger'][_0x31f1c6(0x1f9)]('WeMiniAKUpdateJobï¼š',_0x31f206);}}async[_0x408150(0x1db)](){const _0x551478=_0x408150;await this[_0x551478(0x20e)][_0x551478(0x217)]();}async[_0x408150(0x20d)](){const _0x4cc1b6=_0x408150;await this[_0x4cc1b6(0x20e)][_0x4cc1b6(0x1f1)]();}[_0x408150(0x212)](){const _0x14619e=_0x408150;this[_0x14619e(0x1f5)][_0x14619e(0x1eb)]();}async['syncMjpAccountAutomatic'](){const _0x3e022f=_0x408150;this[_0x3e022f(0x214)][_0x3e022f(0x201)]();}async[_0x408150(0x213)](){this['midjourneyService']['syncTask']();}async[_0x408150(0x1f3)](){const _0x4d08af=_0x408150;this[_0x4d08af(0x1dc)][_0x4d08af(0x1f3)]();}async[_0x408150(0x1fb)](){const _0x1f5e83=_0x408150;this[_0x1f5e83(0x214)][_0x1f5e83(0x1fb)]();}async['syncMusic'](){const _0xaed83c=_0x408150;this[_0xaed83c(0x1f2)][_0xaed83c(0x218)]();}async[_0x408150(0x1ff)](){const _0x4567df=_0x408150;this['userService'][_0x4567df(0x1ff)]();}async['syncWorkFlowDict'](){const _0x1a0b82=_0x408150;this[_0x1a0b82(0x214)][_0x1a0b82(0x1ed)]();}async[_0x408150(0x20b)](){const _0x179c9b=_0x408150;this[_0x179c9b(0x214)]['syncModels']();}};__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)][_0x408150(0x211)]),__metadata(_0x408150(0x1f4),Function),__metadata(_0x408150(0x1d9),[]),__metadata(_0x408150(0x204),void 0x0)],TaskService[_0x408150(0x1ee)],_0x408150(0x1e6),null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)][_0x408150(0x1ea)]),__metadata(_0x408150(0x1f4),Function),__metadata('design:paramtypes',[]),__metadata(_0x408150(0x204),Promise)],TaskService[_0x408150(0x1ee)],'WeMiniAKUpdateJob',null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])('0\x20*/25\x20*\x20*\x20*\x20*'),__metadata(_0x408150(0x1f4),Function),__metadata(_0x408150(0x1d9),[]),__metadata(_0x408150(0x204),Promise)],TaskService['prototype'],_0x408150(0x1db),null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)][_0x408150(0x219)]),__metadata(_0x408150(0x1f4),Function),__metadata(_0x408150(0x1d9),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],'pushAuthLogs',null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)]['EVERY_HOUR']),__metadata(_0x408150(0x1f4),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',void 0x0)],TaskService['prototype'],_0x408150(0x212),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x408150(0x209)][_0x408150(0x20f)]),__metadata('design:type',Function),__metadata(_0x408150(0x1d9),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0x408150(0x201),null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1['CronExpression'][_0x408150(0x1ea)]),__metadata(_0x408150(0x1f4),Function),__metadata(_0x408150(0x1d9),[]),__metadata(_0x408150(0x204),Promise)],TaskService[_0x408150(0x1ee)],'syncMjpTask',null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)][_0x408150(0x1ea)]),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata(_0x408150(0x204),Promise)],TaskService[_0x408150(0x1ee)],_0x408150(0x1f3),null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)][_0x408150(0x1ea)]),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata(_0x408150(0x204),Promise)],TaskService['prototype'],_0x408150(0x1fb),null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)][_0x408150(0x1ea)]),__metadata('design:type',Function),__metadata(_0x408150(0x1d9),[]),__metadata(_0x408150(0x204),Promise)],TaskService['prototype'],_0x408150(0x20c),null),__decorate([(0x0,schedule_1[_0x408150(0x1f7)])(schedule_1[_0x408150(0x209)][_0x408150(0x20f)]),__metadata(_0x408150(0x1f4),Function),__metadata(_0x408150(0x1d9),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0x408150(0x1ff),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x408150(0x209)][_0x408150(0x20f)]),__metadata(_0x408150(0x1f4),Function),__metadata(_0x408150(0x1d9),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0x408150(0x1ed),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x408150(0x209)][_0x408150(0x20f)]),__metadata(_0x408150(0x1f4),Function),__metadata(_0x408150(0x1d9),[]),__metadata(_0x408150(0x204),Promise)],TaskService['prototype'],'syncModels',null),TaskService=__decorate([(0x0,common_1[_0x408150(0x1e2)])(),__metadata(_0x408150(0x1d9),[globalConfig_service_1[_0x408150(0x205)],midjourney_service_1['MidjourneyService'],chatgpt_service_1[_0x408150(0x202)],chatLog_service_1[_0x408150(0x1e9)],models_service_1[_0x408150(0x1da)],auth_service_1[_0x408150(0x1e8)],user_service_1['UserService']])],TaskService),exports['TaskService']=TaskService;