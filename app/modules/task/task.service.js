'use strict';const _0xff7462=_0x2e4c;function _0x2e4c(_0x3574c6,_0x2693bb){const _0x403721=_0x4037();return _0x2e4c=function(_0x2e4c24,_0x340587){_0x2e4c24=_0x2e4c24-0xcd;let _0x428642=_0x403721[_0x2e4c24];return _0x428642;},_0x2e4c(_0x3574c6,_0x2693bb);}(function(_0x25d985,_0x1e3f00){const _0x490910=_0x2e4c,_0x257b5c=_0x25d985();while(!![]){try{const _0x4dfe49=parseInt(_0x490910(0x102))/0x1+parseInt(_0x490910(0x109))/0x2*(parseInt(_0x490910(0xdf))/0x3)+-parseInt(_0x490910(0xe2))/0x4*(-parseInt(_0x490910(0x101))/0x5)+-parseInt(_0x490910(0x12c))/0x6*(parseInt(_0x490910(0xda))/0x7)+-parseInt(_0x490910(0x10f))/0x8+-parseInt(_0x490910(0x11e))/0x9+parseInt(_0x490910(0x105))/0xa;if(_0x4dfe49===_0x1e3f00)break;else _0x257b5c['push'](_0x257b5c['shift']());}catch(_0x17ef47){_0x257b5c['push'](_0x257b5c['shift']());}}}(_0x4037,0x190b8));function _0x4037(){const _0x3a4684=['pushLog','../midjourney/midjourney.service','batchKnowledgeResult','batchKnowledgeProgressResult','metadata','design:returntype','syncLumaTask','length','defineProperty','renewMiniAccessToken','syncTask','syncPPTTask','MidjourneyService','syncKnowledgeProgressTask','@nestjs/common','prototype','refreshBaiduAccessToken','modelsService','syncMjpTask','685wfHNxH','153861MnhzXV','WeMiniAKUpdateJobï¼š','syncMjpAccountAutomatic','589080Fvduxf','EVERY_5_MINUTES','EVERY_2_HOURS','cozeService','2alUuzW','Injectable','EVERY_HOUR','refreshBaiduAccesstoken','gallery','CronExpression','932552HNAZMl','decorate','function','__decorate','syncWorkFlowDict','../user/user.service','syncMjImg','chatgptService','updateVipExpire2Redis','object','Logger','batchMusicResult','./../globalConfig/globalConfig.service','syncKnowledgeTask','design:paramtypes','602676aRhLkL','syncJMengTask','UserService','__esModule','syncLinxFoxGallery','checkAuth','syncMusicTask','batchPPTResult','../linkFox/linkFox.service','syncAssets','LinkFoxService','../models/models.service','../auth/auth.service','WeMiniAKUpdateJob','458394bmCGZY','syncMusic','EVERY_5_SECONDS','syncModels','syncMjTask','chatLogService','../chatLog/chatLog.service','authService','error','../coze/coze.service','@nestjs/schedule','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','midjourneyService','design:type','batchTaskResult','ChatLogService','EVERY_12_HOURS','7woFzZU','ModelsService','batchBotProgressResult','GlobalConfigService','TaskService','327585tDzMvk','checkAiAuth','userService','1184kWDdVG','__metadata','debug','syncLinxFoxTask','EVERY_30_SECONDS','0\x20*/25\x20*\x20*\x20*\x20*','AuthService','Cron','onModuleInit','ChatgptService','linkFoxService','EVERY_DAY_AT_MIDNIGHT'];_0x4037=function(){return _0x3a4684;};return _0x4037();}var __decorate=this&&this[_0xff7462(0x112)]||function(_0xaedf8f,_0x1ae028,_0x7943e9,_0x2f5bce){const _0x20e17a=_0xff7462;var _0x1a4d89=arguments[_0x20e17a(0xf5)],_0x277277=_0x1a4d89<0x3?_0x1ae028:_0x2f5bce===null?_0x2f5bce=Object['getOwnPropertyDescriptor'](_0x1ae028,_0x7943e9):_0x2f5bce,_0xbf60be;if(typeof Reflect===_0x20e17a(0x118)&&typeof Reflect[_0x20e17a(0x110)]===_0x20e17a(0x111))_0x277277=Reflect[_0x20e17a(0x110)](_0xaedf8f,_0x1ae028,_0x7943e9,_0x2f5bce);else{for(var _0xfe31=_0xaedf8f[_0x20e17a(0xf5)]-0x1;_0xfe31>=0x0;_0xfe31--)if(_0xbf60be=_0xaedf8f[_0xfe31])_0x277277=(_0x1a4d89<0x3?_0xbf60be(_0x277277):_0x1a4d89>0x3?_0xbf60be(_0x1ae028,_0x7943e9,_0x277277):_0xbf60be(_0x1ae028,_0x7943e9))||_0x277277;}return _0x1a4d89>0x3&&_0x277277&&Object['defineProperty'](_0x1ae028,_0x7943e9,_0x277277),_0x277277;},__metadata=this&&this[_0xff7462(0xe3)]||function(_0x1ef0ce,_0xf01608){const _0x21a496=_0xff7462;if(typeof Reflect===_0x21a496(0x118)&&typeof Reflect[_0x21a496(0xf2)]==='function')return Reflect[_0x21a496(0xf2)](_0x1ef0ce,_0xf01608);};Object[_0xff7462(0xf6)](exports,_0xff7462(0x121),{'value':!![]}),exports['TaskService']=void 0x0;const globalConfig_service_1=require(_0xff7462(0x11b)),common_1=require(_0xff7462(0xfc)),schedule_1=require(_0xff7462(0xd3)),models_service_1=require(_0xff7462(0x129)),auth_service_1=require(_0xff7462(0x12a)),midjourney_service_1=require(_0xff7462(0xef)),chatLog_service_1=require(_0xff7462(0xcf)),user_service_1=require(_0xff7462(0x114)),chatgpt_service_1=require('../chatgpt/chatgpt.service'),linkFox_service_1=require(_0xff7462(0x126)),coze_service_1=require(_0xff7462(0xd2));let TaskService=class TaskService{constructor(_0x208917,_0x53f4a4,_0x3f4748,_0x4e46e6,_0x2864ba,_0x389c52,_0x58f309,_0x1449f5,_0x23bf64){const _0x762722=_0xff7462;this['globalConfigService']=_0x208917,this[_0x762722(0xd5)]=_0x53f4a4,this[_0x762722(0x116)]=_0x3f4748,this[_0x762722(0xce)]=_0x4e46e6,this[_0x762722(0xff)]=_0x2864ba,this['authService']=_0x389c52,this[_0x762722(0xe1)]=_0x58f309,this[_0x762722(0xec)]=_0x1449f5,this[_0x762722(0x108)]=_0x23bf64;}[_0xff7462(0xea)](){const _0x1e78c3=_0xff7462;this[_0x1e78c3(0xd0)][_0x1e78c3(0xf7)](),this[_0x1e78c3(0xd5)][_0x1e78c3(0x104)](),this['midjourneyService']['syncTask'](),this['midjourneyService'][_0x1e78c3(0x115)](),this['chatgptService'][_0x1e78c3(0xf4)](),this[_0x1e78c3(0xce)][_0x1e78c3(0x127)](),this['midjourneyService'][_0x1e78c3(0x113)](),this[_0x1e78c3(0xd5)]['syncModels']();}['handleCron'](){const _0x1d52ac=_0xff7462;common_1[_0x1d52ac(0x119)][_0x1d52ac(0xe4)](_0x1d52ac(0xd4),'TaskService'),this['globalConfigService']['getWechatAccessToken']();}async[_0xff7462(0x12b)](){const _0x5bc229=_0xff7462;try{await this[_0x5bc229(0xd0)][_0x5bc229(0xf7)]();}catch(_0x38fcaa){common_1['Logger'][_0x5bc229(0xd1)](_0x5bc229(0x103),_0x38fcaa);}}async[_0xff7462(0x123)](){const _0x2aae74=_0xff7462;await this['globalConfigService'][_0x2aae74(0xe0)]();}async['pushAuthLogs'](){const _0x5dbe5f=_0xff7462;await this['globalConfigService'][_0x5dbe5f(0xee)]();}[_0xff7462(0xfe)](){const _0x1fd194=_0xff7462;this[_0x1fd194(0xff)][_0x1fd194(0x10c)]();}async['syncMjpAccountAutomatic'](){const _0x203da6=_0xff7462;this[_0x203da6(0xd5)][_0x203da6(0x104)]();}async[_0xff7462(0x100)](){const _0x5c436a=_0xff7462;this[_0x5c436a(0xd5)][_0x5c436a(0xf8)]();}async[_0xff7462(0xf4)](){const _0x5c474b=_0xff7462;this[_0x5c474b(0x116)][_0x5c474b(0xf4)]();}async[_0xff7462(0x115)](){const _0xe5cd2a=_0xff7462;this[_0xe5cd2a(0xd5)][_0xe5cd2a(0x115)]();}async[_0xff7462(0x12d)](){const _0x720e27=_0xff7462;this['chatLogService'][_0x720e27(0x127)]();}async[_0xff7462(0x117)](){const _0x502541=_0xff7462;this[_0x502541(0xe1)][_0x502541(0x117)]();}async[_0xff7462(0x113)](){this['midjourneyService']['syncWorkFlowDict']();}async[_0xff7462(0x12f)](){const _0x62bf53=_0xff7462;this[_0x62bf53(0xd5)]['syncModels']();}async[_0xff7462(0x122)](){const _0x3f5b9b=_0xff7462;this[_0x3f5b9b(0xec)][_0x3f5b9b(0x10d)]();}async[_0xff7462(0xe5)](){this['linkFoxService']['batchMakeInfo']();}async[_0xff7462(0xf9)](){const _0x2c5f76=_0xff7462;this[_0x2c5f76(0x116)][_0x2c5f76(0x125)]();}async[_0xff7462(0xcd)](){const _0x3c1c16=_0xff7462;this[_0x3c1c16(0xd5)][_0x3c1c16(0xd7)]();}async[_0xff7462(0x124)](){const _0x19cad9=_0xff7462;this[_0x19cad9(0xce)][_0x19cad9(0x11a)]();}async['syncKnowledgeTask'](){const _0x32cfb2=_0xff7462;this[_0x32cfb2(0x108)][_0x32cfb2(0xf0)]();}async[_0xff7462(0xdc)](){const _0x5da413=_0xff7462;this[_0x5da413(0x108)][_0x5da413(0xdc)]();}async[_0xff7462(0xfb)](){const _0x41b0c3=_0xff7462;this['cozeService'][_0x41b0c3(0xf1)]();}async[_0xff7462(0x11f)](){const _0x115877=_0xff7462;this[_0x115877(0xce)]['syncJMengTask']();}};__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1['CronExpression'][_0xff7462(0x10b)]),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata(_0xff7462(0xf3),void 0x0)],TaskService[_0xff7462(0xfd)],'handleCron',null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)]['EVERY_5_MINUTES']),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TaskService[_0xff7462(0xfd)],'WeMiniAKUpdateJob',null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(_0xff7462(0xe7)),__metadata('design:type',Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService['prototype'],_0xff7462(0x123),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1['CronExpression'][_0xff7462(0x107)]),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],'pushAuthLogs',null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1['CronExpression'][_0xff7462(0x10b)]),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),void 0x0)],TaskService[_0xff7462(0xfd)],_0xff7462(0xfe),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0xed)]),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService['prototype'],'syncMjpAccountAutomatic',null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0x106)]),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata('design:returntype',Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0x100),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0x106)]),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0xf4),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1['CronExpression'][_0xff7462(0x106)]),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TaskService[_0xff7462(0xfd)],'syncMjImg',null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0xff7462(0x10e)]['EVERY_5_MINUTES']),__metadata('design:type',Function),__metadata(_0xff7462(0x11d),[]),__metadata('design:returntype',Promise)],TaskService[_0xff7462(0xfd)],'syncMusic',null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0xff7462(0x10e)][_0xff7462(0xed)]),__metadata('design:type',Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0x117),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)]['EVERY_DAY_AT_MIDNIGHT']),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0x113),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1['CronExpression'][_0xff7462(0xed)]),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0xff7462(0x12f),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0xff7462(0x10e)][_0xff7462(0xd9)]),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata('design:returntype',Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0x122),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0x12e)]),__metadata('design:type',Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0xe5),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0x12e)]),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0xf9),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0xe6)]),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService['prototype'],_0xff7462(0xcd),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1['CronExpression'][_0xff7462(0x12e)]),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],'syncMusicTask',null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0xe6)]),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0xff7462(0x11c),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1['CronExpression'][_0xff7462(0x107)]),__metadata('design:type',Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0xdc),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)]['EVERY_10_SECONDS']),__metadata(_0xff7462(0xd6),Function),__metadata(_0xff7462(0x11d),[]),__metadata(_0xff7462(0xf3),Promise)],TaskService[_0xff7462(0xfd)],_0xff7462(0xfb),null),__decorate([(0x0,schedule_1[_0xff7462(0xe9)])(schedule_1[_0xff7462(0x10e)][_0xff7462(0xe6)]),__metadata(_0xff7462(0xd6),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0xff7462(0x11f),null),TaskService=__decorate([(0x0,common_1[_0xff7462(0x10a)])(),__metadata(_0xff7462(0x11d),[globalConfig_service_1[_0xff7462(0xdd)],midjourney_service_1[_0xff7462(0xfa)],chatgpt_service_1[_0xff7462(0xeb)],chatLog_service_1[_0xff7462(0xd8)],models_service_1[_0xff7462(0xdb)],auth_service_1[_0xff7462(0xe8)],user_service_1[_0xff7462(0x120)],linkFox_service_1[_0xff7462(0x128)],coze_service_1['CozeService']])],TaskService),exports[_0xff7462(0xde)]=TaskService;