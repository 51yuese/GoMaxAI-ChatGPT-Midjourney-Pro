'use strict';const _0x107466=_0x2ec9;(function(_0x4e2133,_0x385d25){const _0xab889f=_0x2ec9,_0x59e70a=_0x4e2133();while(!![]){try{const _0x287097=parseInt(_0xab889f(0x16c))/0x1+-parseInt(_0xab889f(0x180))/0x2*(parseInt(_0xab889f(0x172))/0x3)+-parseInt(_0xab889f(0x1b9))/0x4*(parseInt(_0xab889f(0x19a))/0x5)+parseInt(_0xab889f(0x173))/0x6*(parseInt(_0xab889f(0x1ae))/0x7)+parseInt(_0xab889f(0x1c3))/0x8+parseInt(_0xab889f(0x18f))/0x9*(parseInt(_0xab889f(0x18b))/0xa)+-parseInt(_0xab889f(0x178))/0xb*(-parseInt(_0xab889f(0x1c9))/0xc);if(_0x287097===_0x385d25)break;else _0x59e70a['push'](_0x59e70a['shift']());}catch(_0x5804f1){_0x59e70a['push'](_0x59e70a['shift']());}}}(_0x7e67,0xece86));var __decorate=this&&this['__decorate']||function(_0x29c71b,_0x1b02ee,_0x19e15b,_0x374027){const _0x4cdc2b=_0x2ec9;var _0x81b92d=arguments[_0x4cdc2b(0x1b7)],_0x4e6d5d=_0x81b92d<0x3?_0x1b02ee:_0x374027===null?_0x374027=Object[_0x4cdc2b(0x1ba)](_0x1b02ee,_0x19e15b):_0x374027,_0x174edd;if(typeof Reflect===_0x4cdc2b(0x15b)&&typeof Reflect[_0x4cdc2b(0x160)]===_0x4cdc2b(0x191))_0x4e6d5d=Reflect[_0x4cdc2b(0x160)](_0x29c71b,_0x1b02ee,_0x19e15b,_0x374027);else{for(var _0x3b82a4=_0x29c71b[_0x4cdc2b(0x1b7)]-0x1;_0x3b82a4>=0x0;_0x3b82a4--)if(_0x174edd=_0x29c71b[_0x3b82a4])_0x4e6d5d=(_0x81b92d<0x3?_0x174edd(_0x4e6d5d):_0x81b92d>0x3?_0x174edd(_0x1b02ee,_0x19e15b,_0x4e6d5d):_0x174edd(_0x1b02ee,_0x19e15b))||_0x4e6d5d;}return _0x81b92d>0x3&&_0x4e6d5d&&Object['defineProperty'](_0x1b02ee,_0x19e15b,_0x4e6d5d),_0x4e6d5d;},__metadata=this&&this['__metadata']||function(_0x52b01b,_0x5e1fbc){const _0x4e675f=_0x2ec9;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x4e675f(0x1cf)](_0x52b01b,_0x5e1fbc);},__param=this&&this['__param']||function(_0x2f6e4f,_0x55e956){return function(_0x3227b1,_0x24d92d){_0x55e956(_0x3227b1,_0x24d92d,_0x2f6e4f);};};Object['defineProperty'](exports,_0x107466(0x19d),{'value':!![]}),exports[_0x107466(0x168)]=void 0x0;const common_1=require(_0x107466(0x1d5)),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x107466(0x1ad)),models_entity_1=require('./models.entity'),status_constant_1=require(_0x107466(0x158)),baidu_1=require(_0x107466(0x1a9)),utils_1=require('../../common/utils'),model_constant_1=require(_0x107466(0x188)),redisCache_service_1=require(_0x107466(0x1a2)),user_service_1=require(_0x107466(0x1d3)),redisKey_constant_1=require('../../common/constants/redisKey.constant'),nestjs_cls_1=require('nestjs-cls');function _0x2ec9(_0x772f08,_0x5560de){const _0x7e67c1=_0x7e67();return _0x2ec9=function(_0x2ec942,_0x2d8d23){_0x2ec942=_0x2ec942-0x158;let _0x1a67e6=_0x7e67c1[_0x2ec942];return _0x1a67e6;},_0x2ec9(_0x772f08,_0x5560de);}let ModelsService=class ModelsService{constructor(_0x25ad51,_0x420d28,_0x537a0d,_0x5d9c65){const _0x26ee3c=_0x107466;this[_0x26ee3c(0x1a8)]=_0x25ad51,this[_0x26ee3c(0x1c0)]=_0x420d28,this['userService']=_0x537a0d,this[_0x26ee3c(0x1d2)]=_0x5d9c65,this[_0x26ee3c(0x196)]=[],this[_0x26ee3c(0x161)]={},this[_0x26ee3c(0x16e)]={},this['keyPoolMap']={},this['keyPoolIndexMap']={};}async['onModuleInit'](){const _0x4e2f97=_0x107466;await this[_0x4e2f97(0x1be)](),await this[_0x4e2f97(0x17a)]();}async['getOfficialModels'](){const _0x181f8b=_0x107466,_0xf6341a=_0x181f8b(0x1bf),_0x54a642=_0xf6341a+_0x181f8b(0x17e);return await fetch(_0x54a642,{'method':'get','headers':{'Authorization':_0x181f8b(0x174)}})[_0x181f8b(0x1c7)](async _0x53c2e5=>{const _0x4685e0=_0x181f8b,_0x398c3e=await _0x53c2e5[_0x4685e0(0x1bd)]();return _0x398c3e['data'];});}async['initCalcKey'](){const _0x981ab9=_0x107466;this['keyPoolMap']={},this[_0x981ab9(0x1a1)]={},this[_0x981ab9(0x16e)]={},this[_0x981ab9(0x161)]={},this['modelTypes']=[];const _0x124af2=await this[_0x981ab9(0x1a8)]['find']({'where':{'status':!![]}}),_0x2209d6=_0x124af2['reduce']((_0x13b4fd,_0x2d24a8)=>{const _0x30eae7=_0x981ab9;return!_0x13b4fd[_0x2d24a8[_0x30eae7(0x181)]]?_0x13b4fd[_0x2d24a8[_0x30eae7(0x181)]]=[_0x2d24a8]:_0x13b4fd[_0x2d24a8[_0x30eae7(0x181)]][_0x30eae7(0x192)](_0x2d24a8),_0x13b4fd;},{});this[_0x981ab9(0x196)]=Object[_0x981ab9(0x197)](_0x2209d6)[_0x981ab9(0x187)](_0x53c9d0=>{return{'label':status_constant_1['ModelsMapCn'][_0x53c9d0],'val':_0x53c9d0};}),this[_0x981ab9(0x161)]=_0x2209d6,this[_0x981ab9(0x16e)]={},_0x124af2[_0x981ab9(0x19b)](_0x468483=>{const _0x271fd4=_0x981ab9,{keyType:_0x2eb2de,model:_0x3c1394,keyWeight:_0x25f7df}=_0x468483;if(!this[_0x271fd4(0x16d)][_0x3c1394])this['keyPoolMap'][_0x3c1394]=[];for(let _0x152f62=0x0;_0x152f62<_0x25f7df;_0x152f62++){this[_0x271fd4(0x16d)][_0x3c1394][_0x271fd4(0x192)](_0x468483);}if(!this[_0x271fd4(0x1a1)][_0x3c1394])this[_0x271fd4(0x1a1)][_0x3c1394]=0x0;if(!this[_0x271fd4(0x16e)][_0x2eb2de])this[_0x271fd4(0x16e)][_0x2eb2de]={};if(!this[_0x271fd4(0x16e)][_0x2eb2de][_0x3c1394])this[_0x271fd4(0x16e)][_0x2eb2de][_0x3c1394]=[];this['keyList'][_0x2eb2de][_0x3c1394]['push'](_0x468483);});}async[_0x107466(0x17b)](_0x5b5069,_0x39529d,_0x4c936c=-0x1){const _0x309f10=_0x107466,_0x14ecbb=await this[_0x309f10(0x1a8)][_0x309f10(0x1b4)]({'id':_0x5b5069},{'status':![],'keyStatus':_0x4c936c,'remark':_0x39529d});common_1[_0x309f10(0x1a0)]['error']('key:\x20'+_0x5b5069+_0x309f10(0x1a5)),await this[_0x309f10(0x1be)]();}async[_0x107466(0x166)](_0x46a4b2){const _0x410adc=_0x107466;return this[_0x410adc(0x1a8)]['findOne']({'where':{'modelName':_0x46a4b2}});}async[_0x107466(0x18a)](_0xaa0d77){const _0x1f2e7a=_0x107466;return this[_0x1f2e7a(0x1a8)]['findOne']({'where':{'model':_0xaa0d77}});}async[_0x107466(0x15c)](_0x1bdcd6,_0x2ae85b){const _0x1f3b6f=_0x107466;return this[_0x1f3b6f(0x1a8)][_0x1f3b6f(0x175)]({'where':{'modelType':_0x1bdcd6,'keyType':_0x2ae85b}});}async[_0x107466(0x16b)](_0xf4de55){const _0x2e7c1b=_0x107466;if(!this['keyPoolMap'][_0xf4de55])throw new common_1['HttpException'](_0x2e7c1b(0x163),common_1['HttpStatus'][_0x2e7c1b(0x1d4)]);this[_0x2e7c1b(0x1a1)][_0xf4de55]++;const _0x161fe5=this[_0x2e7c1b(0x1a1)][_0xf4de55];if(_0x161fe5>=this['keyPoolMap'][_0xf4de55][_0x2e7c1b(0x1b7)])this[_0x2e7c1b(0x1a1)][_0xf4de55]=0x0;return this[_0x2e7c1b(0x16d)][_0xf4de55][this['keyPoolIndexMap'][_0xf4de55]];}async[_0x107466(0x17d)](_0x534b47,_0x55d14b){const _0x2ad079=_0x107466,_0x2a90b7={'modelType':_0x534b47,'status':!![],'keyStatus':0x1};_0x55d14b&&(_0x2a90b7[_0x2ad079(0x181)]=parseInt(_0x55d14b));const _0x210203=await this[_0x2ad079(0x1a8)][_0x2ad079(0x16a)]({'where':_0x2a90b7,'order':{'displaySort':_0x2ad079(0x1a6)}});if(!_0x210203[_0x2ad079(0x1b7)])throw new Error(_0x2ad079(0x182));const _0x720bb9=_0x210203[0x0],_0x28a12e=this['modelTypes'][_0x2ad079(0x16a)](_0x331af8=>Number(_0x331af8['val'])===_0x720bb9[_0x2ad079(0x181)]);return{'modelTypeInfo':_0x28a12e,'modelInfo':{..._0x720bb9,'topN':0.8,'systemMessage':'','rounds':0x8}};}async[_0x107466(0x1bc)](_0x364e50,_0x2618b9){const _0x409ac9=_0x107466,_0x41947c={'modelType':_0x364e50,'status':!![],'keyStatus':0x1};_0x2618b9&&(_0x41947c[_0x409ac9(0x19e)]=_0x2618b9);const _0xb8c35d=await this[_0x409ac9(0x1a8)][_0x409ac9(0x16a)]({'where':_0x41947c,'order':{'displaySort':_0x409ac9(0x1a6)}});if(!_0xb8c35d['length'])throw new Error('暂未配置相关模型，请联系管理员！');const _0x38f634=_0xb8c35d[0x0],_0x23ab07=this['modelTypes']['find'](_0x99a031=>Number(_0x99a031['val'])===_0x38f634[_0x409ac9(0x181)]);return{'modelTypeInfo':_0x23ab07,'modelInfo':{..._0x38f634,'topN':0.8,'systemMessage':'','rounds':0x8}};}async[_0x107466(0x176)](_0xfde79d){const _0x41e164=_0x107466;try{return await this['modelSave'](_0xfde79d),await this[_0x41e164(0x1be)](),_0xfde79d[_0x41e164(0x181)]===0x2&&this[_0x41e164(0x17a)](),!![];}catch(_0x4fdc64){console[_0x41e164(0x169)](_0x41e164(0x1af),_0x4fdc64);throw new common_1[(_0x41e164(0x186))](_0x4fdc64[_0x41e164(0x189)],common_1['HttpStatus'][_0x41e164(0x1d4)]);}}async['modelSave'](_0xb85174){const _0x1494b6=_0x107466;_0xb85174[_0x1494b6(0x1bb)]&&(_0xb85174[_0x1494b6(0x167)]=0x1);if(_0xb85174['id']){const _0x1f680f=await this[_0x1494b6(0x1a8)][_0x1494b6(0x175)]({'where':{'id':(0x0,typeorm_2[_0x1494b6(0x1b0)])(_0xb85174['id']),'modelName':_0xb85174[_0x1494b6(0x198)],'modelType':_0xb85174['modelType']}});if(_0x1f680f)throw new Error(_0x1494b6(0x183));await this[_0x1494b6(0x1a8)][_0x1494b6(0x1b4)]({'id':_0xb85174['id']},_0xb85174);}else{const _0x15a0e9=await this[_0x1494b6(0x1a8)][_0x1494b6(0x175)]({'where':{'modelName':_0xb85174[_0x1494b6(0x198)],'modelType':_0xb85174[_0x1494b6(0x17f)]}});if(_0x15a0e9)throw new Error(_0x1494b6(0x183));await this[_0x1494b6(0x1a8)][_0x1494b6(0x1b3)](_0xb85174);}}async['delModel']({id:_0x956d56}){const _0x1b3c3b=_0x107466;if(!_0x956d56)throw new common_1[(_0x1b3c3b(0x186))](_0x1b3c3b(0x1ab),common_1[_0x1b3c3b(0x184)][_0x1b3c3b(0x1d4)]);return await this[_0x1b3c3b(0x1a3)]([_0x956d56]),await this[_0x1b3c3b(0x1be)](),!![];}async[_0x107466(0x1a3)](_0x723ef3){const _0x14c447=_0x107466;if(!_0x723ef3||!_0x723ef3[_0x14c447(0x1b7)])return!![];return await this['modelsEntity'][_0x14c447(0x1b1)]({'id':(0x0,typeorm_2['In'])(_0x723ef3)}),!![];}async[_0x107466(0x1aa)](_0x18da53,_0x296f5a){const _0x39b713=_0x107466,_0x5f5278=(0x0,utils_1[_0x39b713(0x1d0)])(this[_0x39b713(0x1c0)]),_0x3396fb=(0x0,utils_1[_0x39b713(0x15a)])(this['clsService']),{keyType:_0x43dacc,key:_0x40a787,status:_0x4f9ef0,model:_0x38b4b1,modelName:_0x2b94f8,modelType:_0x2c0c0b,page:page=0x1,size:size=0xa,upload:_0xb986ce}=_0x296f5a;let _0x227a13={};_0x38b4b1&&(_0x227a13[_0x39b713(0x19e)]=_0x38b4b1);_0x40a787&&(_0x227a13[_0x39b713(0x16f)]=(0x0,typeorm_2['Like'])('%'+_0x40a787+'%'));_0x43dacc&&(_0x227a13[_0x39b713(0x181)]=_0x43dacc);_0x2c0c0b&&(_0x227a13[_0x39b713(0x17f)]=_0x2c0c0b);_0x4f9ef0!==undefined?_0x227a13[_0x39b713(0x1bb)]=_0x4f9ef0:_0x227a13[_0x39b713(0x1bb)]=!![];_0x2b94f8&&(_0x227a13[_0x39b713(0x198)]=(0x0,typeorm_2[_0x39b713(0x1a4)])('%'+_0x2b94f8+'%'));_0xb986ce!==undefined&&(_0x227a13['canUpload']=Boolean(_0xb986ce));!(0x0,utils_1[_0x39b713(0x1b6)])(this[_0x39b713(0x1c0)])&&(_0x227a13[_0x39b713(0x1cc)]=!![],_0x227a13[_0x39b713(0x1bb)]=!![]);const [_0x1b7d84,_0x575de0]=await this['modelsEntity'][_0x39b713(0x18e)]({'where':_0x227a13,'skip':(page-0x1)*size,'take':size,'order':{'displaySort':_0x39b713(0x1a6),'createdAt':'DESC'}});!(0x0,utils_1[_0x39b713(0x1b6)])(this['clsService'])&&_0x1b7d84['forEach'](_0x444f20=>{const _0x465859=_0x39b713;_0x444f20[_0x465859(0x16f)]=(0x0,utils_1[_0x465859(0x185)])(_0x444f20[_0x465859(0x16f)]),_0x444f20[_0x465859(0x159)]=(0x0,utils_1['hideString'])(_0x444f20[_0x465859(0x159)]),_0x444f20['proxyUrl']=(0x0,utils_1[_0x465859(0x185)])(_0x444f20['proxyUrl']);});if(_0x3396fb){const _0x5c4574=await this[_0x39b713(0x17c)][_0x39b713(0x162)](_0x3396fb);if(_0x5c4574[_0x39b713(0x19c)]||_0x5c4574[_0x39b713(0x1c2)]){const _0x74cd4d=[];for(let _0x442943=0x0;_0x442943<_0x1b7d84[_0x39b713(0x1b7)];_0x442943++){const _0x2325ad=_0x1b7d84[_0x442943],_0x254365=redisKey_constant_1[_0x39b713(0x1a7)]+'-'+_0x3396fb+'-'+_0x2325ad['id'],_0x2db6d6=await await this[_0x39b713(0x1d2)][_0x39b713(0x199)]({'key':_0x254365});_0x74cd4d[_0x39b713(0x192)](Object[_0x39b713(0x1c1)]({},_0x2325ad,{'used':_0x2db6d6||0x0}));}return{'rows':_0x74cd4d,'count':_0x575de0};}}return{'rows':_0x1b7d84,'count':_0x575de0};}[_0x107466(0x15e)](_0x433dad){const _0x3e1e24=_0x107466;return this[_0x3e1e24(0x1a8)][_0x3e1e24(0x175)]({'where':{'id':_0x433dad}});}[_0x107466(0x1b8)](_0x52be3e){const _0x1096e5=_0x107466;return this[_0x1096e5(0x1a8)][_0x1096e5(0x16a)]({'where':{'id':(0x0,typeorm_2['In'])(_0x52be3e)}});}['getModelsByModelType'](_0x58e7e4){const _0x4d108a=_0x107466;return this[_0x4d108a(0x1a8)][_0x4d108a(0x16a)]({'where':{'modelType':_0x58e7e4}});}async['modelsList'](_0x197478=0x0){const _0x25c442=_0x107466,_0x2ad7cb=(0x0,utils_1[_0x25c442(0x1b5)])(this[_0x25c442(0x161)]);return Object[_0x25c442(0x197)](_0x2ad7cb)[_0x25c442(0x19b)](_0x10aaa0=>{const _0x4a4d11=_0x25c442;let _0x181784=_0x2ad7cb[_0x10aaa0];if(_0x197478===0x0)_0x181784=_0x181784['filter'](_0x7bc8ed=>Boolean(_0x7bc8ed[_0x4a4d11(0x1cc)]))[_0x4a4d11(0x15f)]((_0x2c7c50,_0x188999)=>_0x188999['displaySort']-_0x2c7c50[_0x4a4d11(0x18c)]);else _0x197478===0x2&&(_0x181784=_0x181784[_0x4a4d11(0x171)](_0x5a9250=>!Boolean(_0x5a9250[_0x4a4d11(0x1cc)]))[_0x4a4d11(0x15f)]((_0x51f8bb,_0x4dfaac)=>_0x4dfaac[_0x4a4d11(0x18c)]-_0x51f8bb['displaySort']));_0x2ad7cb[_0x10aaa0]=_0x181784['map'](_0x18f1a7=>{const _0x14f990=_0x4a4d11;return Object[_0x14f990(0x1c1)]({},_0x18f1a7);});}),{'modelTypeList':this[_0x25c442(0x196)],'modelMaps':_0x2ad7cb};}async['saveUseLog'](_0x153b70,_0x2b7c06){const _0x30720e=_0x107466;await this['modelsEntity'][_0x30720e(0x1c5)]()['update'](models_entity_1[_0x30720e(0x1ca)])[_0x30720e(0x1cb)]({'useCount':()=>_0x30720e(0x1c8),'useToken':()=>_0x30720e(0x15d)+_0x2b7c06})[_0x30720e(0x190)](_0x30720e(0x179),{'id':_0x153b70})['execute']();}async[_0x107466(0x17a)](){const _0xbb7885=_0x107466,_0x73f7c7=await this['modelsEntity'][_0xbb7885(0x16a)]({'where':{'keyType':0x2}}),_0x20924a={};_0x73f7c7[_0xbb7885(0x19b)](_0xc924de=>{const _0x5d9649=_0xbb7885,{key:_0x47472c,secret:_0x211f00}=_0xc924de;!_0x20924a['key']?_0x20924a[_0x47472c]=[{'keyInfo':_0xc924de}]:_0x20924a[_0x47472c][_0x5d9649(0x192)](_0xc924de);}),Object[_0xbb7885(0x197)](_0x20924a)[_0xbb7885(0x19b)](async _0x2e4e5f=>{const _0x1789f1=_0xbb7885,{secret:_0x37d1cc,id:_0x55e3e8}=_0x20924a[_0x2e4e5f][0x0][_0x1789f1(0x165)],_0x482998=await(0x0,baidu_1[_0x1789f1(0x177)])(_0x2e4e5f,_0x37d1cc);await this[_0x1789f1(0x1a8)][_0x1789f1(0x1b4)]({'key':_0x2e4e5f},{'accessToken':_0x482998});}),setTimeout(()=>{this['initCalcKey']();},0x3e8);}async['getRandomKey'](_0x3d8ab5,_0x3961be=''){const _0x52a296=_0x107466;let _0x316e62;_0x3961be?_0x316e62=await this[_0x52a296(0x1a8)][_0x52a296(0x16a)]({'where':{'status':!![],'keyStatus':0x1,'modelType':_0x3d8ab5,'model':_0x3961be},'order':{'displaySort':_0x52a296(0x1a6)}}):_0x316e62=await this[_0x52a296(0x1a8)][_0x52a296(0x16a)]({'where':{'status':!![],'keyStatus':0x1,'modelType':_0x3d8ab5},'order':{'displaySort':_0x52a296(0x1a6)}});if(!_0x316e62[_0x52a296(0x1b7)])throw new common_1['HttpException'](_0x52a296(0x1ac),common_1[_0x52a296(0x184)][_0x52a296(0x1d4)]);return _0x316e62[0x0];}async[_0x107466(0x1c6)](_0x581ad9,_0x5887c){const _0x4e134f=_0x107466;let _0x56d510=await this[_0x4e134f(0x1a8)][_0x4e134f(0x16a)]({'where':{'status':!![],'keyStatus':0x1,'modelType':_0x581ad9,'keyType':_0x5887c},'order':{'displaySort':'DESC'}});if(!_0x56d510[_0x4e134f(0x1b7)])throw new common_1['HttpException'](_0x4e134f(0x1ac),common_1[_0x4e134f(0x184)][_0x4e134f(0x1d4)]);return _0x56d510[0x0];}async[_0x107466(0x1b2)](){const _0x2c38d6=_0x107466,_0x579e23=await this[_0x2c38d6(0x1a8)][_0x2c38d6(0x16a)]({'where':{'status':!![],'keyStatus':0x1,'canAudio':!![]}});if(!_0x579e23[_0x2c38d6(0x1b7)])throw new common_1[(_0x2c38d6(0x186))](_0x2c38d6(0x164),common_1[_0x2c38d6(0x184)]['BAD_REQUEST']);return _0x579e23[0x0];}async[_0x107466(0x193)](){const _0x32bf5f=_0x107466;return await this[_0x32bf5f(0x1a8)][_0x32bf5f(0x16a)]();}async['getMusicModel'](){const _0x5ba5b6=_0x107466;try{const _0x5a67b9=await this[_0x5ba5b6(0x1a8)][_0x5ba5b6(0x16a)]({'where':{'status':!![],'keyStatus':0x1,'modelType':model_constant_1['EModelType'][_0x5ba5b6(0x1cd)]}});if(_0x5a67b9['length']===0x0)throw new Error('暂未配置音乐模型，请联系管理员');return _0x5a67b9[Math['floor'](Math[_0x5ba5b6(0x1d1)]()*_0x5a67b9[_0x5ba5b6(0x1b7)])];}catch(_0x518144){throw new common_1[(_0x5ba5b6(0x186))](_0x518144[_0x5ba5b6(0x189)],common_1[_0x5ba5b6(0x184)][_0x5ba5b6(0x1d4)]);}}};function _0x7e67(){const _0x452c15=['getUserById','当前调用模型已经被移除、请重新选择模型！','当前未指定语音对话模型KEY、前往后台设置把！','keyInfo','getModelByName','keyStatus','ModelsService','log','find','getCurrentModelKeyInfo','1199904hhJBgy','keyPoolMap','keyList','key','RedisCacheService','filter','61749akuxmL','126CoREqJ','Bearer\x20sk-bSm3FROxNJ1oIkmd5dDc9b582d3d48E09d12E86eF7FfC0C4','findOne','setModel','getAccessToken','44011lEijKY','id\x20=\x20:id','refreshBaiduAccesstoken','lockKey','userService','getModelInfoByKeyType','/v1/models','modelType','146BlGGHL','keyType','暂未配置相关模型，请联系管理员！','名称已存在，请修改名称','HttpStatus','hideString','HttpException','map','../../common/constants/model.constant','message','getModelByModel','6763710CZThMZ','displaySort','design:paramtypes','findAndCount','9uFmqqu','where','function','push','getAllKey','InjectRepository','ClsService','modelTypes','keys','modelName','get','2698460qWUCji','forEach','vipExpire','__esModule','model','UserService','Logger','keyPoolIndexMap','../redisCache/redisCache.service','modelDel','Like','\x20欠费或被官方封禁导致不可用，已被系统自动锁定','DESC','VIP_FREE','modelsEntity','../chatgpt/baidu','queryModels','缺失必要参数！','当前未指定特殊模型KEY、前往后台设置！','typeorm','190589HfqrMg','error:\x20','Not','delete','getRandomAudioKey','save','update','deepClone','isSuper','length','getModelByIds','12rlRoyI','getOwnPropertyDescriptor','status','getModelByType','json','initCalcKey','https://apiv.chatgpt-3.vip','clsService','assign','lifetimeVip','9918928uqmJDZ','Repository','createQueryBuilder','getRandomKeyForKeyType','then','useCount\x20+\x201','1212mcUjkW','ModelsEntity','set','front','MUSIC','Injectable','metadata','getRole','random','redisCacheService','../user/user.service','BAD_REQUEST','@nestjs/common','../../common/constants/status.constant','secret','getUserId','object','getModelByKeyType','useToken\x20+\x20','getModelById','sort','decorate','modelMaps'];_0x7e67=function(){return _0x452c15;};return _0x7e67();}ModelsService=__decorate([(0x0,common_1[_0x107466(0x1ce)])(),__param(0x0,(0x0,typeorm_1[_0x107466(0x194)])(models_entity_1[_0x107466(0x1ca)])),__metadata(_0x107466(0x18d),[typeorm_2[_0x107466(0x1c4)],nestjs_cls_1[_0x107466(0x195)],user_service_1[_0x107466(0x19f)],redisCache_service_1[_0x107466(0x170)]])],ModelsService),exports['ModelsService']=ModelsService;