'use strict';const _0x2af277=_0x4827;(function(_0x35d35e,_0x431efa){const _0x113314=_0x4827,_0x9c7013=_0x35d35e();while(!![]){try{const _0x59f5ea=-parseInt(_0x113314(0x203))/0x1+parseInt(_0x113314(0x1e1))/0x2*(-parseInt(_0x113314(0x1dd))/0x3)+-parseInt(_0x113314(0x1d9))/0x4*(-parseInt(_0x113314(0x1d2))/0x5)+parseInt(_0x113314(0x1ea))/0x6*(parseInt(_0x113314(0x1ef))/0x7)+-parseInt(_0x113314(0x1e2))/0x8*(parseInt(_0x113314(0x1de))/0x9)+-parseInt(_0x113314(0x1f6))/0xa*(parseInt(_0x113314(0x1eb))/0xb)+parseInt(_0x113314(0x1f3))/0xc;if(_0x59f5ea===_0x431efa)break;else _0x9c7013['push'](_0x9c7013['shift']());}catch(_0x331016){_0x9c7013['push'](_0x9c7013['shift']());}}}(_0x47dd,0x8128f));var __decorate=this&&this[_0x2af277(0x1ed)]||function(_0x3e7f82,_0x11ce6a,_0x590c45,_0x3d9df8){const _0x3d5929=_0x2af277;var _0x40b895=arguments['length'],_0x30d502=_0x40b895<0x3?_0x11ce6a:_0x3d9df8===null?_0x3d9df8=Object['getOwnPropertyDescriptor'](_0x11ce6a,_0x590c45):_0x3d9df8,_0x46c2d4;if(typeof Reflect===_0x3d5929(0x1f1)&&typeof Reflect['decorate']===_0x3d5929(0x1da))_0x30d502=Reflect[_0x3d5929(0x1f8)](_0x3e7f82,_0x11ce6a,_0x590c45,_0x3d9df8);else{for(var _0x574eaf=_0x3e7f82['length']-0x1;_0x574eaf>=0x0;_0x574eaf--)if(_0x46c2d4=_0x3e7f82[_0x574eaf])_0x30d502=(_0x40b895<0x3?_0x46c2d4(_0x30d502):_0x40b895>0x3?_0x46c2d4(_0x11ce6a,_0x590c45,_0x30d502):_0x46c2d4(_0x11ce6a,_0x590c45))||_0x30d502;}return _0x40b895>0x3&&_0x30d502&&Object[_0x3d5929(0x1f0)](_0x11ce6a,_0x590c45,_0x30d502),_0x30d502;},__metadata=this&&this['__metadata']||function(_0x451058,_0x56eb15){const _0x4f07ac=_0x2af277;if(typeof Reflect===_0x4f07ac(0x1f1)&&typeof Reflect[_0x4f07ac(0x1e9)]==='function')return Reflect[_0x4f07ac(0x1e9)](_0x451058,_0x56eb15);},__param=this&&this['__param']||function(_0x55777b,_0x324399){return function(_0x4c811d,_0x354159){_0x324399(_0x4c811d,_0x354159,_0x55777b);};};Object[_0x2af277(0x1f0)](exports,_0x2af277(0x1fe),{'value':!![]}),exports[_0x2af277(0x1e6)]=void 0x0;function _0x4827(_0x5a08d5,_0x5e18f3){const _0x47dd1a=_0x47dd();return _0x4827=function(_0x4827ba,_0x543694){_0x4827ba=_0x4827ba-0x1d2;let _0x445b8e=_0x47dd1a[_0x4827ba];return _0x445b8e;},_0x4827(_0x5a08d5,_0x5e18f3);}const common_1=require(_0x2af277(0x1e5)),nestjs_cls_1=require(_0x2af277(0x205)),typeorm_1=require(_0x2af277(0x1db)),baseService_1=require(_0x2af277(0x1d8)),typeorm_2=require('typeorm'),chatLog_entity_1=require(_0x2af277(0x1d7));let ChatLogService=class ChatLogService extends baseService_1['BaseService']{constructor(_0x1c1bb8,_0x247c46){const _0x207c78=_0x2af277;super(_0x247c46,_0x1c1bb8),this[_0x207c78(0x1e0)]=_0x1c1bb8,this[_0x207c78(0x1fc)]=_0x247c46;}async[_0x2af277(0x1d5)](_0x118555){const _0x378f9a=_0x2af277;try{const {condition:_0x4e1c8d,sort:_0x4e9ec9,page:_0x5ab33b,size:_0x5e574c}=this[_0x378f9a(0x1f2)](_0x118555),_0x164b0d=await this['chatLogEntity']['query']('select\x20count(0)\x20as\x20count\x20from\x20chatlog\x20log\x20left\x20join\x20ai_assets\x20assets\x20on\x20log.id=assets.chat_log_id\x20'+_0x4e1c8d),_0x1d441d=await this['chatLogEntity'][_0x378f9a(0x207)](_0x378f9a(0x1d4)+_0x4e1c8d+'\x20\x20'+_0x4e9ec9+_0x378f9a(0x1e8)+_0x5ab33b*_0x5e574c+','+_0x5e574c);return{'rows':_0x1d441d,'size':_0x5e574c,'page':_0x5ab33b,'count':parseInt(_0x164b0d[0x0]['count']),'totalPage':Math[_0x378f9a(0x1fa)](_0x164b0d[0x0][_0x378f9a(0x1ff)]/_0x5e574c)};}catch(_0x3e3e8d){throw new common_1['HttpException'](_0x3e3e8d[_0x378f9a(0x1f7)],common_1['HttpStatus'][_0x378f9a(0x202)]);}}async[_0x2af277(0x1d6)](_0x21f562,_0x13ea9c,_0x2daaf7){const _0x1ecf18=_0x2af277;return _0x2daaf7?await this[_0x1ecf18(0x1fc)]['query'](_0x1ecf18(0x201)+_0x13ea9c+_0x1ecf18(0x200)+_0x2daaf7+_0x1ecf18(0x1e3)+_0x21f562):await this[_0x1ecf18(0x1fc)][_0x1ecf18(0x207)](_0x1ecf18(0x201)+_0x13ea9c+_0x1ecf18(0x204)+_0x21f562),!![];}async[_0x2af277(0x206)](_0x57abdd,_0x3f1de2){const _0x6927f3=_0x2af277;return await this[_0x6927f3(0x1fc)][_0x6927f3(0x207)](_0x6927f3(0x201)+_0x3f1de2+_0x6927f3(0x1dc)+_0x57abdd),!![];}async[_0x2af277(0x1df)](_0x10409c,_0x553982){const _0x28a548=_0x2af277;return await this['chatLogEntity']['query'](_0x28a548(0x1fd)+_0x553982+_0x28a548(0x1dc)+_0x10409c),!![];}async[_0x2af277(0x1ec)](_0x31735d,_0x4d46cc){const _0xbd1ba=_0x2af277;await this[_0xbd1ba(0x1fc)][_0xbd1ba(0x207)](_0xbd1ba(0x1e7)+_0x4d46cc);const _0x1bde6d=await this[_0xbd1ba(0x1fc)]['query'](_0xbd1ba(0x1d3)+_0x31735d);return _0x1bde6d[0x0][_0xbd1ba(0x1ff)]=='0'&&await this[_0xbd1ba(0x1fc)][_0xbd1ba(0x1f9)](_0x31735d),!![];}async['delete'](_0x14de99){const _0x2b8500=_0x2af277;return await this[_0x2b8500(0x1fc)]['delete'](_0x14de99),await this[_0x2b8500(0x1fc)][_0x2b8500(0x207)]('delete\x20from\x20ai_assets\x20where\x20chat_log_id='+_0x14de99),!![];}};function _0x47dd(){const _0xf5cb75=['16WdmGHh','function','@nestjs/typeorm','\x20where\x20id=','2229MqpSZQ','369aScDqI','recLog','clsService','204tTTtDV','40208RrZXhQ','\x27\x20where\x20chat_log_id=','design:paramtypes','@nestjs/common','ChatLogService','delete\x20from\x20ai_assets\x20where\x20id=','\x20limit\x20','metadata','1074XnzIos','623227quCBbf','delForAssets','__decorate','InjectRepository','5663tftnTH','defineProperty','object','getCondition','14015484jBTFFM','ChatLogEntity','Injectable','110XbHUaP','message','decorate','delete','ceil','ClsService','chatLogEntity','update\x20chatlog\x20set\x20rec=','__esModule','count',',classify=\x27','update\x20ai_assets\x20set\x20publish_flag=','BAD_REQUEST','90314zGczQO','\x20where\x20chat_log_id=','nestjs-cls','recForAssets','query','264580jSbdQj','select\x20count(0)\x20as\x20count\x20from\x20ai_assets\x20where\x20chat_log_id=','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20select\x20log.*,assets.id\x20as\x20assetsId,assets.title\x20as\x20title,assets.intro\x20as\x20intro,assets.cover\x20as\x20assets_cover,assets.mp3\x20as\x20assets_mp3,assets.publish_flag,classify\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20from\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatlog\x20log\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20join\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ai_assets\x20assets\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20on\x20log.id=assets.chat_log_id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','assetsList','rec','../entity/chatLog.entity','../../../common/admin/baseService'];_0x47dd=function(){return _0xf5cb75;};return _0x47dd();}ChatLogService=__decorate([(0x0,common_1[_0x2af277(0x1f5)])(),__param(0x1,(0x0,typeorm_1[_0x2af277(0x1ee)])(chatLog_entity_1[_0x2af277(0x1f4)])),__metadata(_0x2af277(0x1e4),[nestjs_cls_1[_0x2af277(0x1fb)],typeorm_2['Repository']])],ChatLogService),exports[_0x2af277(0x1e6)]=ChatLogService;