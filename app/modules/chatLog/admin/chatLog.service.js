'use strict';function _0x1227(){const _0x3db5f8=['function','\x20where\x20id=','object','ChatLogEntity','getCondition','12uCFHYx','__metadata','@nestjs/common','70899zmOPIE','__esModule','typeorm','update\x20ai_assets\x20set\x20publish_flag=','clsService','@nestjs/typeorm','118TvZkHP','../entity/chatLog.entity','delForAssets','delete','query','161HlGqbg','3291AqAjdF','count','\x20where\x20chat_log_id=','select\x20count(0)\x20as\x20count\x20from\x20chatlog\x20log\x20left\x20join\x20ai_assets\x20assets\x20on\x20log.id=assets.chat_log_id\x20','recForAssets','HttpException','37576caEKdt','getOwnPropertyDescriptor','ChatLogService','delete\x20from\x20ai_assets\x20where\x20chat_log_id=','HttpStatus','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20select\x20log.*,assets.id\x20as\x20assetsId,assets.title\x20as\x20title,assets.intro\x20as\x20intro,assets.cover\x20as\x20assets_cover,assets.mp3\x20as\x20assets_mp3,assets.publish_flag\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20from\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatlog\x20log\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20join\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ai_assets\x20assets\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20on\x20log.id=assets.chat_log_id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','decorate','BaseService','BAD_REQUEST','InjectRepository','nestjs-cls','222VYsZXY','select\x20count(0)\x20as\x20count\x20from\x20ai_assets\x20where\x20chat_log_id=','assetsList','35935PbhEGf','2482964rtqxJo','defineProperty','7531199OrtnEU','design:paramtypes','message','__decorate','10TjZWDS','Injectable','chatLogEntity','28YpEQDW','1244916ZIzBDB','metadata'];_0x1227=function(){return _0x3db5f8;};return _0x1227();}const _0x1e0682=_0x2c34;(function(_0x521bca,_0x7d845){const _0x177ba3=_0x2c34,_0x21836d=_0x521bca();while(!![]){try{const _0x2ebb13=-parseInt(_0x177ba3(0x99))/0x1*(-parseInt(_0x177ba3(0x93))/0x2)+-parseInt(_0x177ba3(0x8d))/0x3*(-parseInt(_0x177ba3(0x82))/0x4)+parseInt(_0x177ba3(0x78))/0x5*(-parseInt(_0x177ba3(0x75))/0x6)+parseInt(_0x177ba3(0x98))/0x7*(-parseInt(_0x177ba3(0x9f))/0x8)+parseInt(_0x177ba3(0x83))/0x9*(parseInt(_0x177ba3(0x7f))/0xa)+-parseInt(_0x177ba3(0x79))/0xb*(parseInt(_0x177ba3(0x8a))/0xc)+parseInt(_0x177ba3(0x7b))/0xd;if(_0x2ebb13===_0x7d845)break;else _0x21836d['push'](_0x21836d['shift']());}catch(_0x2d1311){_0x21836d['push'](_0x21836d['shift']());}}}(_0x1227,0x74985));var __decorate=this&&this[_0x1e0682(0x7e)]||function(_0x46df23,_0x5cfac3,_0x841056,_0x1462d1){const _0x183b5a=_0x1e0682;var _0x568574=arguments[_0x183b5a(0x6e)],_0x1df0af=_0x568574<0x3?_0x5cfac3:_0x1462d1===null?_0x1462d1=Object[_0x183b5a(0x6a)](_0x5cfac3,_0x841056):_0x1462d1,_0x3b2733;if(typeof Reflect===_0x183b5a(0x87)&&typeof Reflect[_0x183b5a(0x70)]===_0x183b5a(0x85))_0x1df0af=Reflect[_0x183b5a(0x70)](_0x46df23,_0x5cfac3,_0x841056,_0x1462d1);else{for(var _0x4a9f48=_0x46df23[_0x183b5a(0x6e)]-0x1;_0x4a9f48>=0x0;_0x4a9f48--)if(_0x3b2733=_0x46df23[_0x4a9f48])_0x1df0af=(_0x568574<0x3?_0x3b2733(_0x1df0af):_0x568574>0x3?_0x3b2733(_0x5cfac3,_0x841056,_0x1df0af):_0x3b2733(_0x5cfac3,_0x841056))||_0x1df0af;}return _0x568574>0x3&&_0x1df0af&&Object[_0x183b5a(0x7a)](_0x5cfac3,_0x841056,_0x1df0af),_0x1df0af;},__metadata=this&&this[_0x1e0682(0x8b)]||function(_0x129309,_0x24a018){const _0xe17c25=_0x1e0682;if(typeof Reflect===_0xe17c25(0x87)&&typeof Reflect[_0xe17c25(0x84)]==='function')return Reflect[_0xe17c25(0x84)](_0x129309,_0x24a018);},__param=this&&this['__param']||function(_0x180ac3,_0x138eb1){return function(_0x57757b,_0x28b395){_0x138eb1(_0x57757b,_0x28b395,_0x180ac3);};};function _0x2c34(_0x1b882a,_0x3c2aa0){const _0x1227ff=_0x1227();return _0x2c34=function(_0x2c347a,_0xe2cf7){_0x2c347a=_0x2c347a-0x6a;let _0x56edde=_0x1227ff[_0x2c347a];return _0x56edde;},_0x2c34(_0x1b882a,_0x3c2aa0);}Object[_0x1e0682(0x7a)](exports,_0x1e0682(0x8e),{'value':!![]}),exports[_0x1e0682(0x6b)]=void 0x0;const common_1=require(_0x1e0682(0x8c)),nestjs_cls_1=require(_0x1e0682(0x74)),typeorm_1=require(_0x1e0682(0x92)),baseService_1=require('../../../common/admin/baseService'),typeorm_2=require(_0x1e0682(0x8f)),chatLog_entity_1=require(_0x1e0682(0x94));let ChatLogService=class ChatLogService extends baseService_1[_0x1e0682(0x71)]{constructor(_0xca1125,_0x22fbbf){const _0x21b3bd=_0x1e0682;super(_0x22fbbf,_0xca1125),this[_0x21b3bd(0x91)]=_0xca1125,this[_0x21b3bd(0x81)]=_0x22fbbf;}async[_0x1e0682(0x77)](_0x3a74bf){const _0x204dbe=_0x1e0682;try{const {condition:_0x125967,sort:_0x5991ff,page:_0x264cd4,size:_0x10b002}=this[_0x204dbe(0x89)](_0x3a74bf),_0xe13961=await this[_0x204dbe(0x81)][_0x204dbe(0x97)](_0x204dbe(0x9c)+_0x125967),_0x55639e=await this[_0x204dbe(0x81)][_0x204dbe(0x97)](_0x204dbe(0x6f)+_0x125967+'\x20\x20'+_0x5991ff+'\x20limit\x20'+_0x264cd4*_0x10b002+','+_0x10b002);return{'rows':_0x55639e,'size':_0x10b002,'page':_0x264cd4,'count':parseInt(_0xe13961[0x0][_0x204dbe(0x9a)]),'totalPage':Math['ceil'](_0xe13961[0x0]['count']/_0x10b002)};}catch(_0x588752){throw new common_1[(_0x204dbe(0x9e))](_0x588752[_0x204dbe(0x7d)],common_1[_0x204dbe(0x6d)][_0x204dbe(0x72)]);}}async['rec'](_0xea816d,_0x5675c6){const _0x116e00=_0x1e0682;return await this[_0x116e00(0x81)][_0x116e00(0x97)](_0x116e00(0x90)+_0x5675c6+_0x116e00(0x9b)+_0xea816d),!![];}async[_0x1e0682(0x9d)](_0x2179dc,_0x4c23dc){const _0x3b19c5=_0x1e0682;return await this[_0x3b19c5(0x81)][_0x3b19c5(0x97)](_0x3b19c5(0x90)+_0x4c23dc+_0x3b19c5(0x86)+_0x2179dc),!![];}async[_0x1e0682(0x95)](_0xfac36b,_0x565bcd){const _0xe30410=_0x1e0682;await this[_0xe30410(0x81)][_0xe30410(0x97)]('delete\x20from\x20ai_assets\x20where\x20id='+_0x565bcd);const _0x4f44b6=await this[_0xe30410(0x81)][_0xe30410(0x97)](_0xe30410(0x76)+_0xfac36b);return _0x4f44b6[0x0][_0xe30410(0x9a)]=='0'&&await this[_0xe30410(0x81)][_0xe30410(0x96)](_0xfac36b),!![];}async[_0x1e0682(0x96)](_0x5b5b8e){const _0x468998=_0x1e0682;return await this[_0x468998(0x81)][_0x468998(0x96)](_0x5b5b8e),await this['chatLogEntity'][_0x468998(0x97)](_0x468998(0x6c)+_0x5b5b8e),!![];}};ChatLogService=__decorate([(0x0,common_1[_0x1e0682(0x80)])(),__param(0x1,(0x0,typeorm_1[_0x1e0682(0x73)])(chatLog_entity_1[_0x1e0682(0x88)])),__metadata(_0x1e0682(0x7c),[nestjs_cls_1['ClsService'],typeorm_2['Repository']])],ChatLogService),exports[_0x1e0682(0x6b)]=ChatLogService;