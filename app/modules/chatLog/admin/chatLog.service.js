'use strict';function _0x5e2c(_0x32fea4,_0x5cc7cd){const _0x1f4d86=_0x1f4d();return _0x5e2c=function(_0x5e2c0f,_0x5e595b){_0x5e2c0f=_0x5e2c0f-0xe4;let _0x5c904e=_0x1f4d86[_0x5e2c0f];return _0x5c904e;},_0x5e2c(_0x32fea4,_0x5cc7cd);}const _0x381664=_0x5e2c;(function(_0x8239a6,_0x328452){const _0xf396e1=_0x5e2c,_0x487b55=_0x8239a6();while(!![]){try{const _0x2b389d=parseInt(_0xf396e1(0x117))/0x1+parseInt(_0xf396e1(0xeb))/0x2+parseInt(_0xf396e1(0xfc))/0x3*(parseInt(_0xf396e1(0x114))/0x4)+parseInt(_0xf396e1(0x113))/0x5*(parseInt(_0xf396e1(0xea))/0x6)+-parseInt(_0xf396e1(0xe7))/0x7*(parseInt(_0xf396e1(0x119))/0x8)+-parseInt(_0xf396e1(0x10d))/0x9+-parseInt(_0xf396e1(0xfb))/0xa*(parseInt(_0xf396e1(0xef))/0xb);if(_0x2b389d===_0x328452)break;else _0x487b55['push'](_0x487b55['shift']());}catch(_0x3680ce){_0x487b55['push'](_0x487b55['shift']());}}}(_0x1f4d,0x5e2da));var __decorate=this&&this[_0x381664(0xfe)]||function(_0x517f41,_0xecd8bc,_0x53d785,_0x3a18bd){const _0x5d42b8=_0x381664;var _0x11730c=arguments[_0x5d42b8(0xe5)],_0x1b9809=_0x11730c<0x3?_0xecd8bc:_0x3a18bd===null?_0x3a18bd=Object['getOwnPropertyDescriptor'](_0xecd8bc,_0x53d785):_0x3a18bd,_0xe61719;if(typeof Reflect===_0x5d42b8(0x101)&&typeof Reflect[_0x5d42b8(0xf7)]==='function')_0x1b9809=Reflect[_0x5d42b8(0xf7)](_0x517f41,_0xecd8bc,_0x53d785,_0x3a18bd);else{for(var _0x3ffd7b=_0x517f41[_0x5d42b8(0xe5)]-0x1;_0x3ffd7b>=0x0;_0x3ffd7b--)if(_0xe61719=_0x517f41[_0x3ffd7b])_0x1b9809=(_0x11730c<0x3?_0xe61719(_0x1b9809):_0x11730c>0x3?_0xe61719(_0xecd8bc,_0x53d785,_0x1b9809):_0xe61719(_0xecd8bc,_0x53d785))||_0x1b9809;}return _0x11730c>0x3&&_0x1b9809&&Object['defineProperty'](_0xecd8bc,_0x53d785,_0x1b9809),_0x1b9809;},__metadata=this&&this[_0x381664(0xf8)]||function(_0xa885b9,_0x4f202b){const _0x1f3adb=_0x381664;if(typeof Reflect===_0x1f3adb(0x101)&&typeof Reflect['metadata']===_0x1f3adb(0x106))return Reflect[_0x1f3adb(0x104)](_0xa885b9,_0x4f202b);},__param=this&&this[_0x381664(0x103)]||function(_0x264099,_0x1b821d){return function(_0xae3f61,_0x2660cd){_0x1b821d(_0xae3f61,_0x2660cd,_0x264099);};};function _0x1f4d(){const _0x5a84c7=['2660091IcnIqM','ClsService','BAD_REQUEST','2154QwVstZ','1406952whjYhh','ChatLogEntity','BaseService','ceil','678579lqpmuu','select\x20count(0)\x20as\x20count\x20from\x20chatlog\x20log\x20left\x20join\x20ai_assets\x20assets\x20on\x20log.id=assets.chat_log_id\x20','HttpException','count','\x27\x20where\x20chat_log_id=','@nestjs/common','delete\x20from\x20ai_assets\x20where\x20id=','__esModule','decorate','__metadata','Repository','delete','60ktYsmI','1314822ZFMjMs','rec','__decorate','recForAssets','message','object','query','__param','metadata','select\x20count(0)\x20as\x20count\x20from\x20ai_assets\x20where\x20chat_log_id=','function','assetsList','HttpStatus','recLog','update\x20chatlog\x20set\x20rec=','delete\x20from\x20ai_assets\x20where\x20chat_log_id=',',classify=\x27','5561343tTgKub','clsService','ChatLogService','delForAssets','typeorm','chatLogEntity','1885XmMYBR','4BzyGbt','InjectRepository','getCondition','476735ANAcgr','Injectable','8OMAEqq','../../../common/admin/baseService','\x20where\x20id=','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20select\x20log.*,assets.id\x20as\x20assetsId,assets.title\x20as\x20title,assets.intro\x20as\x20intro,assets.cover\x20as\x20assets_cover,assets.mp3\x20as\x20assets_mp3,assets.publish_flag,classify\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20from\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chatlog\x20log\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20join\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ai_assets\x20assets\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20on\x20log.id=assets.chat_log_id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','length','update\x20ai_assets\x20set\x20publish_flag='];_0x1f4d=function(){return _0x5a84c7;};return _0x1f4d();}Object['defineProperty'](exports,_0x381664(0xf6),{'value':!![]}),exports[_0x381664(0x10f)]=void 0x0;const common_1=require(_0x381664(0xf4)),nestjs_cls_1=require('nestjs-cls'),typeorm_1=require('@nestjs/typeorm'),baseService_1=require(_0x381664(0x11a)),typeorm_2=require(_0x381664(0x111)),chatLog_entity_1=require('../entity/chatLog.entity');let ChatLogService=class ChatLogService extends baseService_1[_0x381664(0xed)]{constructor(_0x4f7a90,_0x34a0d5){const _0x2d69b5=_0x381664;super(_0x34a0d5,_0x4f7a90),this[_0x2d69b5(0x10e)]=_0x4f7a90,this[_0x2d69b5(0x112)]=_0x34a0d5;}async[_0x381664(0x107)](_0xa1af8d){const _0x209604=_0x381664;try{const {condition:_0x4bce51,sort:_0x2d3b28,page:_0x415d74,size:_0x69b190}=this[_0x209604(0x116)](_0xa1af8d),_0x310fc0=await this[_0x209604(0x112)]['query'](_0x209604(0xf0)+_0x4bce51),_0x56e381=await this[_0x209604(0x112)][_0x209604(0x102)](_0x209604(0xe4)+_0x4bce51+'\x20\x20'+_0x2d3b28+'\x20limit\x20'+_0x415d74*_0x69b190+','+_0x69b190);return{'rows':_0x56e381,'size':_0x69b190,'page':_0x415d74,'count':parseInt(_0x310fc0[0x0][_0x209604(0xf2)]),'totalPage':Math[_0x209604(0xee)](_0x310fc0[0x0][_0x209604(0xf2)]/_0x69b190)};}catch(_0x393581){throw new common_1[(_0x209604(0xf1))](_0x393581[_0x209604(0x100)],common_1[_0x209604(0x108)][_0x209604(0xe9)]);}}async[_0x381664(0xfd)](_0x59e982,_0x45feb2,_0x1090db){const _0x429ca0=_0x381664;return _0x1090db?await this['chatLogEntity'][_0x429ca0(0x102)](_0x429ca0(0xe6)+_0x45feb2+_0x429ca0(0x10c)+_0x1090db+_0x429ca0(0xf3)+_0x59e982):await this[_0x429ca0(0x112)]['query']('update\x20ai_assets\x20set\x20publish_flag='+_0x45feb2+'\x20where\x20chat_log_id='+_0x59e982),!![];}async[_0x381664(0xff)](_0x3dffbf,_0x1eabec){const _0x3c709a=_0x381664;return await this['chatLogEntity'][_0x3c709a(0x102)]('update\x20ai_assets\x20set\x20publish_flag='+_0x1eabec+_0x3c709a(0x11b)+_0x3dffbf),!![];}async[_0x381664(0x109)](_0x476d91,_0x80f50a){const _0x39350b=_0x381664;return await this[_0x39350b(0x112)][_0x39350b(0x102)](_0x39350b(0x10a)+_0x80f50a+_0x39350b(0x11b)+_0x476d91),!![];}async[_0x381664(0x110)](_0x5c7aef,_0xe3679d){const _0x2bf856=_0x381664;await this[_0x2bf856(0x112)][_0x2bf856(0x102)](_0x2bf856(0xf5)+_0xe3679d);const _0x535f29=await this[_0x2bf856(0x112)][_0x2bf856(0x102)](_0x2bf856(0x105)+_0x5c7aef);return _0x535f29[0x0][_0x2bf856(0xf2)]=='0'&&await this[_0x2bf856(0x112)][_0x2bf856(0xfa)](_0x5c7aef),!![];}async['delete'](_0x14600d){const _0x4806b6=_0x381664;return await this['chatLogEntity'][_0x4806b6(0xfa)](_0x14600d),await this[_0x4806b6(0x112)][_0x4806b6(0x102)](_0x4806b6(0x10b)+_0x14600d),!![];}};ChatLogService=__decorate([(0x0,common_1[_0x381664(0x118)])(),__param(0x1,(0x0,typeorm_1[_0x381664(0x115)])(chatLog_entity_1[_0x381664(0xec)])),__metadata('design:paramtypes',[nestjs_cls_1[_0x381664(0xe8)],typeorm_2[_0x381664(0xf9)]])],ChatLogService),exports[_0x381664(0x10f)]=ChatLogService;