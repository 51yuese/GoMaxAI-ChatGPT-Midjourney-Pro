'use strict';const _0x1f0604=_0x2a7c;function _0x2a7c(_0x6005bf,_0x228fff){const _0x4ffb77=_0x4ffb();return _0x2a7c=function(_0x2a7c03,_0x271258){_0x2a7c03=_0x2a7c03-0x10c;let _0x22cd2e=_0x4ffb77[_0x2a7c03];return _0x22cd2e;},_0x2a7c(_0x6005bf,_0x228fff);}(function(_0x139049,_0x16438c){const _0x1be7bb=_0x2a7c,_0x58f3d6=_0x139049();while(!![]){try{const _0x579e6e=-parseInt(_0x1be7bb(0x112))/0x1+parseInt(_0x1be7bb(0x128))/0x2*(-parseInt(_0x1be7bb(0x11a))/0x3)+parseInt(_0x1be7bb(0x10d))/0x4*(-parseInt(_0x1be7bb(0x139))/0x5)+-parseInt(_0x1be7bb(0x12a))/0x6+-parseInt(_0x1be7bb(0x129))/0x7*(parseInt(_0x1be7bb(0x127))/0x8)+parseInt(_0x1be7bb(0x124))/0x9*(-parseInt(_0x1be7bb(0x114))/0xa)+parseInt(_0x1be7bb(0x115))/0xb*(parseInt(_0x1be7bb(0x125))/0xc);if(_0x579e6e===_0x16438c)break;else _0x58f3d6['push'](_0x58f3d6['shift']());}catch(_0x521366){_0x58f3d6['push'](_0x58f3d6['shift']());}}}(_0x4ffb,0x9a205));var __decorate=this&&this[_0x1f0604(0x118)]||function(_0x5dbad1,_0x5c86e2,_0x523e3a,_0xfcd0aa){const _0x534aac=_0x1f0604;var _0x426daa=arguments[_0x534aac(0x126)],_0xd5fd25=_0x426daa<0x3?_0x5c86e2:_0xfcd0aa===null?_0xfcd0aa=Object['getOwnPropertyDescriptor'](_0x5c86e2,_0x523e3a):_0xfcd0aa,_0x41cf37;if(typeof Reflect===_0x534aac(0x120)&&typeof Reflect[_0x534aac(0x12b)]==='function')_0xd5fd25=Reflect['decorate'](_0x5dbad1,_0x5c86e2,_0x523e3a,_0xfcd0aa);else{for(var _0xe66b81=_0x5dbad1[_0x534aac(0x126)]-0x1;_0xe66b81>=0x0;_0xe66b81--)if(_0x41cf37=_0x5dbad1[_0xe66b81])_0xd5fd25=(_0x426daa<0x3?_0x41cf37(_0xd5fd25):_0x426daa>0x3?_0x41cf37(_0x5c86e2,_0x523e3a,_0xd5fd25):_0x41cf37(_0x5c86e2,_0x523e3a))||_0xd5fd25;}return _0x426daa>0x3&&_0xd5fd25&&Object[_0x534aac(0x10e)](_0x5c86e2,_0x523e3a,_0xd5fd25),_0xd5fd25;},__metadata=this&&this['__metadata']||function(_0x4f9f7d,_0x411d08){const _0x2cd31b=_0x1f0604;if(typeof Reflect===_0x2cd31b(0x120)&&typeof Reflect[_0x2cd31b(0x136)]===_0x2cd31b(0x111))return Reflect[_0x2cd31b(0x136)](_0x4f9f7d,_0x411d08);},__param=this&&this[_0x1f0604(0x11c)]||function(_0x2e2fff,_0x1cc3d3){return function(_0x5089d2,_0x4af7cd){_0x1cc3d3(_0x5089d2,_0x4af7cd,_0x2e2fff);};};Object[_0x1f0604(0x10e)](exports,_0x1f0604(0x11e),{'value':!![]}),exports[_0x1f0604(0x12f)]=void 0x0;function _0x4ffb(){const _0x3d4da6=['3djRuOc','typeorm','__param','saveMindTask','__esModule','mindTaskEntity','object','userId','getMindTask','nestjs-cls','847809GxynLE','17644092aNByFG','length','8nqgnld','294592Kmioss','4155823sStqJB','1779126aEehYU','decorate','name','findAndCount','DESC','MindTaskService','ClsService','@nestjs/typeorm','setDate','result','design:paramtypes','Injectable','metadata','findOne','../../common/utils','3085270oEPqlZ','save','4IFAJIO','defineProperty','getPage','clsService','function','1183152sPWQaC','InjectRepository','100DOBkEI','33tliPQb','getDate','Repository','__decorate','updatedAt'];_0x4ffb=function(){return _0x3d4da6;};return _0x4ffb();}const common_1=require('@nestjs/common'),typeorm_1=require(_0x1f0604(0x131)),typeorm_2=require(_0x1f0604(0x11b)),mindTask_entity_1=require('./entity/mindTask.entity'),nestjs_cls_1=require(_0x1f0604(0x123)),utils_1=require(_0x1f0604(0x138));let MindTaskService=class MindTaskService{constructor(_0x59d1c7,_0x3de966){const _0x5bf93a=_0x1f0604;this['mindTaskEntity']=_0x59d1c7,this[_0x5bf93a(0x110)]=_0x3de966;}async[_0x1f0604(0x122)]({id:_0xb73332,userId:_0x157755}){const _0x2537b6=_0x1f0604,_0x168e18=await this[_0x2537b6(0x11f)][_0x2537b6(0x137)]({'where':{'id':_0xb73332,'userId':_0x157755}});return _0x168e18;}async['delMindTask']({id:_0x350c4a,userId:_0x383561}){const _0x4068b3=_0x1f0604,_0x464759=await this['mindTaskEntity'][_0x4068b3(0x137)]({'where':{'id':_0x350c4a,'userId':_0x383561}});_0x464759&&(_0x464759['deleteFlag']=0x1,await this[_0x4068b3(0x11f)][_0x4068b3(0x10c)](_0x464759));}async['setMindTask']({id:_0x4b17e1,userId:_0x469845,name:_0xf017d7,result:_0x1cb85f}){const _0x427505=_0x1f0604,_0x23e7ac=await this['mindTaskEntity']['findOne']({'where':{'id':_0x4b17e1,'userId':_0x469845}});if(_0x23e7ac)return _0x23e7ac[_0x427505(0x12c)]=_0xf017d7,_0x1cb85f&&(_0x23e7ac[_0x427505(0x133)]=_0x1cb85f),await this[_0x427505(0x11f)][_0x427505(0x10c)](_0x23e7ac);}async[_0x1f0604(0x11d)]({id:_0xbc85e2,userId:_0x3dd5d9,chatLogId:_0x4b7ab0,result:_0x785cdb,status:_0x5c4893,prompt:_0x1911db}){const _0x1a1b1d=_0x1f0604;let _0x1ec8b8={'userId':_0x3dd5d9,'result':_0x785cdb,'status':_0x5c4893,'prompt':_0x1911db,'chatLogId':_0x4b7ab0};if(_0xbc85e2){const _0x16500e=await this[_0x1a1b1d(0x11f)]['findOne']({'where':{'id':_0xbc85e2}});_0x16500e&&(_0x1ec8b8=Object['assign'](_0x16500e,_0x1ec8b8));}return await this[_0x1a1b1d(0x11f)][_0x1a1b1d(0x10c)](_0x1ec8b8);}async[_0x1f0604(0x10f)](_0x4603e1,_0xa16a4c){const _0x20e483=_0x1f0604,_0x4f9c10=(0x0,utils_1['getReqSaasId'])(this[_0x20e483(0x110)]),{page:page=0x1,size:size=0xa,day:_0xc3a2bf}=_0x4603e1,_0x5782d5={};_0x5782d5['saasId']=_0x4f9c10,_0x5782d5['deleteFlag']=0x0,_0x5782d5[_0x20e483(0x121)]=_0xa16a4c['user']['id'];if(_0xc3a2bf>0x0){const _0x373e0a=new Date(),_0x4926fa=new Date(_0x373e0a[_0x20e483(0x132)](_0x373e0a[_0x20e483(0x116)]()-_0xc3a2bf));_0x5782d5[_0x20e483(0x119)]=(0x0,typeorm_2['MoreThan'])(_0x4926fa);}const [_0x162eb1,_0x19b91f]=await this['mindTaskEntity'][_0x20e483(0x12d)]({'where':_0x5782d5,'take':size,'skip':(page-0x1)*size,'order':{'updatedAt':_0x20e483(0x12e)}});return{'rows':_0x162eb1,'count':_0x19b91f};}};MindTaskService=__decorate([(0x0,common_1[_0x1f0604(0x135)])(),__param(0x0,(0x0,typeorm_1[_0x1f0604(0x113)])(mindTask_entity_1['MindTaskEntity'])),__metadata(_0x1f0604(0x134),[typeorm_2[_0x1f0604(0x117)],nestjs_cls_1[_0x1f0604(0x130)]])],MindTaskService),exports['MindTaskService']=MindTaskService;