'use strict';const _0x174adb=_0x57d1;(function(_0x4b0ecb,_0x37e0d3){const _0xcd5f24=_0x57d1,_0x1cc038=_0x4b0ecb();while(!![]){try{const _0x344e80=parseInt(_0xcd5f24(0xf3))/0x1*(-parseInt(_0xcd5f24(0xe7))/0x2)+parseInt(_0xcd5f24(0xe6))/0x3*(-parseInt(_0xcd5f24(0xe0))/0x4)+parseInt(_0xcd5f24(0xed))/0x5*(parseInt(_0xcd5f24(0xdf))/0x6)+parseInt(_0xcd5f24(0xe9))/0x7+parseInt(_0xcd5f24(0xea))/0x8+parseInt(_0xcd5f24(0xdc))/0x9+parseInt(_0xcd5f24(0xee))/0xa;if(_0x344e80===_0x37e0d3)break;else _0x1cc038['push'](_0x1cc038['shift']());}catch(_0x394bbc){_0x1cc038['push'](_0x1cc038['shift']());}}}(_0x31cf,0x4024c));function _0x57d1(_0x281cc7,_0x244ca4){const _0x31cfff=_0x31cf();return _0x57d1=function(_0x57d14f,_0x36902){_0x57d14f=_0x57d14f-0xd4;let _0x2da5a2=_0x31cfff[_0x57d14f];return _0x2da5a2;},_0x57d1(_0x281cc7,_0x244ca4);}var __decorate=this&&this['__decorate']||function(_0x57c5d1,_0x1af387,_0x4ce0ea,_0x271177){const _0x314702=_0x57d1;var _0x5845d6=arguments[_0x314702(0xf9)],_0x535a56=_0x5845d6<0x3?_0x1af387:_0x271177===null?_0x271177=Object[_0x314702(0xe3)](_0x1af387,_0x4ce0ea):_0x271177,_0x34020b;if(typeof Reflect===_0x314702(0xe4)&&typeof Reflect['decorate']===_0x314702(0x109))_0x535a56=Reflect[_0x314702(0xff)](_0x57c5d1,_0x1af387,_0x4ce0ea,_0x271177);else{for(var _0x581daa=_0x57c5d1['length']-0x1;_0x581daa>=0x0;_0x581daa--)if(_0x34020b=_0x57c5d1[_0x581daa])_0x535a56=(_0x5845d6<0x3?_0x34020b(_0x535a56):_0x5845d6>0x3?_0x34020b(_0x1af387,_0x4ce0ea,_0x535a56):_0x34020b(_0x1af387,_0x4ce0ea))||_0x535a56;}return _0x5845d6>0x3&&_0x535a56&&Object[_0x314702(0xe5)](_0x1af387,_0x4ce0ea,_0x535a56),_0x535a56;},__metadata=this&&this['__metadata']||function(_0x5ed0d0,_0x394a96){const _0x536ee5=_0x57d1;if(typeof Reflect===_0x536ee5(0xe4)&&typeof Reflect[_0x536ee5(0xf1)]===_0x536ee5(0x109))return Reflect['metadata'](_0x5ed0d0,_0x394a96);},__param=this&&this[_0x174adb(0xf8)]||function(_0x1799e8,_0x342757){return function(_0x52b1e2,_0x5d666){_0x342757(_0x52b1e2,_0x5d666,_0x1799e8);};};Object[_0x174adb(0xe5)](exports,_0x174adb(0x104),{'value':!![]}),exports[_0x174adb(0xf5)]=void 0x0;const common_1=require(_0x174adb(0xfb)),typeorm_1=require(_0x174adb(0xde)),typeorm_2=require('typeorm'),mindTask_entity_1=require(_0x174adb(0xfe)),nestjs_cls_1=require('nestjs-cls'),utils_1=require(_0x174adb(0xf0));function _0x31cf(){const _0x57ed12=['mindTaskEntity','InjectRepository','userId','954045jfOJzF','ClsService','@nestjs/typeorm','476142rNnRhT','4voLYTd','getPage','Injectable','getOwnPropertyDescriptor','object','defineProperty','1259031plhylF','128fcyTDr','deleteFlag','1406069lZAwZW','2242448Xczdqd','updatedAt','MindTaskEntity','25ewtvtj','1296780WTLwDS','setDate','../../common/utils','metadata','clear','6738pBwjaJ','saasId','MindTaskService','getReqSaasId','find','__param','length','findOne','@nestjs/common','user','result','./entity/mindTask.entity','decorate','clsService','save','DESC','delMindTask','__esModule','design:paramtypes','update','findAndCount','name','function','getMindTask','getList','setMindTask','MoreThan','saveMindTask'];_0x31cf=function(){return _0x57ed12;};return _0x31cf();}let MindTaskService=class MindTaskService{constructor(_0x22f16f,_0x207c44){const _0x8368b0=_0x174adb;this['mindTaskEntity']=_0x22f16f,this[_0x8368b0(0x100)]=_0x207c44;}async[_0x174adb(0xd4)]({id:_0x4d4976,userId:_0x2c3848}){const _0x12c203=await this['mindTaskEntity']['findOne']({'where':{'id':_0x4d4976,'userId':_0x2c3848}});return _0x12c203;}async[_0x174adb(0x103)]({id:_0x41c4fd,userId:_0x3cbc4b}){const _0x25cc70=_0x174adb,_0x12be96=await this[_0x25cc70(0xd9)][_0x25cc70(0xfa)]({'where':{'id':_0x41c4fd,'userId':_0x3cbc4b}});_0x12be96&&(_0x12be96[_0x25cc70(0xe8)]=0x1,await this[_0x25cc70(0xd9)][_0x25cc70(0x101)](_0x12be96));}async[_0x174adb(0xd6)]({id:_0x5dfb8c,userId:_0x6b0934,name:_0x3e63b0,result:_0x544f56}){const _0x1df4e5=_0x174adb,_0x189230=await this['mindTaskEntity'][_0x1df4e5(0xfa)]({'where':{'id':_0x5dfb8c,'userId':_0x6b0934}});if(_0x189230)return _0x189230[_0x1df4e5(0x108)]=_0x3e63b0,_0x544f56&&(_0x189230[_0x1df4e5(0xfd)]=_0x544f56),await this[_0x1df4e5(0xd9)][_0x1df4e5(0x101)](_0x189230);}async[_0x174adb(0xd8)]({id:_0x5b269b,userId:_0x351e8f,chatLogId:_0x501d21,result:_0x56ac4f,status:_0x1de384,prompt:_0x361a69}){const _0x5c47d9=_0x174adb;let _0x254b48={'userId':_0x351e8f,'result':_0x56ac4f,'status':_0x1de384,'prompt':_0x361a69,'chatLogId':_0x501d21};if(_0x5b269b){const _0x4acd87=await this[_0x5c47d9(0xd9)][_0x5c47d9(0xfa)]({'where':{'id':_0x5b269b}});_0x4acd87&&(_0x254b48=Object['assign'](_0x4acd87,_0x254b48));}return await this[_0x5c47d9(0xd9)]['save'](_0x254b48);}async[_0x174adb(0xe1)](_0x515e43,_0xc38150){const _0x41a446=_0x174adb,_0x45787a=(0x0,utils_1[_0x41a446(0xf6)])(this[_0x41a446(0x100)]),{page:page=0x1,size:size=0xa,day:_0x274d5e}=_0x515e43,_0x14cf51={};_0x14cf51[_0x41a446(0xf4)]=_0x45787a,_0x14cf51['deleteFlag']=0x0,_0x14cf51[_0x41a446(0xdb)]=_0xc38150['user']['id'];if(_0x274d5e>0x0){const _0x56668e=new Date(),_0x3c3945=new Date(_0x56668e[_0x41a446(0xef)](_0x56668e['getDate']()-_0x274d5e));_0x14cf51[_0x41a446(0xeb)]=(0x0,typeorm_2[_0x41a446(0xd7)])(_0x3c3945);}const [_0x4f0f45,_0x3140a8]=await this[_0x41a446(0xd9)][_0x41a446(0x107)]({'where':_0x14cf51,'take':size,'skip':(page-0x1)*size,'order':{'updatedAt':'DESC'}});return{'rows':_0x4f0f45,'count':_0x3140a8};}async[_0x174adb(0xd5)](_0x5b0536){const _0x5f16db=_0x174adb,_0x4d45b3=(0x0,utils_1[_0x5f16db(0xf6)])(this['clsService']),_0x5b7dbf={};_0x5b7dbf[_0x5f16db(0xf4)]=_0x4d45b3,_0x5b7dbf[_0x5f16db(0xe8)]=0x0,_0x5b7dbf['userId']=_0x5b0536['user']['id'];const _0x125bb6=await this[_0x5f16db(0xd9)][_0x5f16db(0xf7)]({'where':_0x5b7dbf,'order':{'updatedAt':_0x5f16db(0x102)}});return _0x125bb6;}async[_0x174adb(0xf2)](_0x356f8e){const _0x7e54fc=_0x174adb,_0x3b2902=(0x0,utils_1[_0x7e54fc(0xf6)])(this[_0x7e54fc(0x100)]),_0x4a68a2={};_0x4a68a2[_0x7e54fc(0xf4)]=_0x3b2902,_0x4a68a2[_0x7e54fc(0xe8)]=0x0,_0x4a68a2['userId']=_0x356f8e[_0x7e54fc(0xfc)]['id'];const _0x360d4a=await this[_0x7e54fc(0xd9)][_0x7e54fc(0x106)](_0x4a68a2,{'deleteFlag':0x1});return _0x360d4a;}};MindTaskService=__decorate([(0x0,common_1[_0x174adb(0xe2)])(),__param(0x0,(0x0,typeorm_1[_0x174adb(0xda)])(mindTask_entity_1[_0x174adb(0xec)])),__metadata(_0x174adb(0x105),[typeorm_2['Repository'],nestjs_cls_1[_0x174adb(0xdd)]])],MindTaskService),exports['MindTaskService']=MindTaskService;