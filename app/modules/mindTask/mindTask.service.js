'use strict';const _0x3fc0bf=_0x55e9;(function(_0x4abb46,_0xd0a0de){const _0x4e9184=_0x55e9,_0x335c41=_0x4abb46();while(!![]){try{const _0xdd0723=-parseInt(_0x4e9184(0x210))/0x1*(parseInt(_0x4e9184(0x1e0))/0x2)+-parseInt(_0x4e9184(0x1e4))/0x3*(-parseInt(_0x4e9184(0x1f7))/0x4)+-parseInt(_0x4e9184(0x1dc))/0x5+-parseInt(_0x4e9184(0x1fb))/0x6+parseInt(_0x4e9184(0x1e7))/0x7*(-parseInt(_0x4e9184(0x200))/0x8)+-parseInt(_0x4e9184(0x206))/0x9+parseInt(_0x4e9184(0x1ed))/0xa*(parseInt(_0x4e9184(0x208))/0xb);if(_0xdd0723===_0xd0a0de)break;else _0x335c41['push'](_0x335c41['shift']());}catch(_0x138d5e){_0x335c41['push'](_0x335c41['shift']());}}}(_0x3e1d,0xf223d));function _0x55e9(_0x131470,_0x5c2c70){const _0x3e1d59=_0x3e1d();return _0x55e9=function(_0x55e9d0,_0x51ae31){_0x55e9d0=_0x55e9d0-0x1d9;let _0x43c297=_0x3e1d59[_0x55e9d0];return _0x43c297;},_0x55e9(_0x131470,_0x5c2c70);}var __decorate=this&&this[_0x3fc0bf(0x1f2)]||function(_0x4fbe18,_0x4dc08d,_0x18fd81,_0x2274ee){const _0x5c1978=_0x3fc0bf;var _0x42470a=arguments['length'],_0x529808=_0x42470a<0x3?_0x4dc08d:_0x2274ee===null?_0x2274ee=Object[_0x5c1978(0x1fe)](_0x4dc08d,_0x18fd81):_0x2274ee,_0x181d06;if(typeof Reflect==='object'&&typeof Reflect[_0x5c1978(0x204)]===_0x5c1978(0x1e3))_0x529808=Reflect['decorate'](_0x4fbe18,_0x4dc08d,_0x18fd81,_0x2274ee);else{for(var _0x5274f8=_0x4fbe18[_0x5c1978(0x1f9)]-0x1;_0x5274f8>=0x0;_0x5274f8--)if(_0x181d06=_0x4fbe18[_0x5274f8])_0x529808=(_0x42470a<0x3?_0x181d06(_0x529808):_0x42470a>0x3?_0x181d06(_0x4dc08d,_0x18fd81,_0x529808):_0x181d06(_0x4dc08d,_0x18fd81))||_0x529808;}return _0x42470a>0x3&&_0x529808&&Object['defineProperty'](_0x4dc08d,_0x18fd81,_0x529808),_0x529808;},__metadata=this&&this['__metadata']||function(_0xe6f25d,_0x4ff1d6){const _0x1b86a3=_0x3fc0bf;if(typeof Reflect===_0x1b86a3(0x1fa)&&typeof Reflect[_0x1b86a3(0x1ef)]===_0x1b86a3(0x1e3))return Reflect[_0x1b86a3(0x1ef)](_0xe6f25d,_0x4ff1d6);},__param=this&&this[_0x3fc0bf(0x20f)]||function(_0x471dbb,_0x34d265){return function(_0x5e8d45,_0x366245){_0x34d265(_0x5e8d45,_0x366245,_0x471dbb);};};function _0x3e1d(){const _0x330d60=['userId','ClsService','save','clear','@nestjs/common','name','__param','1308139RAxmDE','getReqSaasId','getDate','../../common/utils','Injectable','872415fFkQqZ','MindTaskEntity','findOne','result','2isYaut','saasId','typeorm','function','171573EXTbAy','setDate','updatedAt','34559CaoUhH','./entity/mindTask.entity','InjectRepository','mindTaskEntity','design:paramtypes','find','6835420JsCiyH','__esModule','metadata','MindTaskService','assign','__decorate','defineProperty','DESC','user','deleteFlag','8KDQHZz','clsService','length','object','3091296OrDdsJ','Repository','nestjs-cls','getOwnPropertyDescriptor','update','1832nLxyxU','getMindTask','@nestjs/typeorm','saveMindTask','decorate','findAndCount','7010640OWJFuA','getList','77CqQzCe'];_0x3e1d=function(){return _0x330d60;};return _0x3e1d();}Object[_0x3fc0bf(0x1f3)](exports,_0x3fc0bf(0x1ee),{'value':!![]}),exports[_0x3fc0bf(0x1f0)]=void 0x0;const common_1=require(_0x3fc0bf(0x20d)),typeorm_1=require(_0x3fc0bf(0x202)),typeorm_2=require(_0x3fc0bf(0x1e2)),mindTask_entity_1=require(_0x3fc0bf(0x1e8)),nestjs_cls_1=require(_0x3fc0bf(0x1fd)),utils_1=require(_0x3fc0bf(0x1da));let MindTaskService=class MindTaskService{constructor(_0x1232c2,_0x4a7849){const _0x4bd983=_0x3fc0bf;this[_0x4bd983(0x1ea)]=_0x1232c2,this['clsService']=_0x4a7849;}async[_0x3fc0bf(0x201)]({id:_0x2b08b4,userId:_0xbe5766}){const _0x366f27=_0x3fc0bf,_0xb79329=await this[_0x366f27(0x1ea)]['findOne']({'where':{'id':_0x2b08b4,'userId':_0xbe5766}});return _0xb79329;}async['delMindTask']({id:_0x184f27,userId:_0x4afe2c}){const _0x2595f8=_0x3fc0bf,_0x3e1448=await this[_0x2595f8(0x1ea)][_0x2595f8(0x1de)]({'where':{'id':_0x184f27,'userId':_0x4afe2c}});_0x3e1448&&(_0x3e1448[_0x2595f8(0x1f6)]=0x1,await this[_0x2595f8(0x1ea)]['save'](_0x3e1448));}async['setMindTask']({id:_0x24e518,userId:_0x258806,name:_0x51c3c5,result:_0x1d518f}){const _0x5461d6=_0x3fc0bf,_0x283011=await this[_0x5461d6(0x1ea)]['findOne']({'where':{'id':_0x24e518,'userId':_0x258806}});if(_0x283011)return _0x283011[_0x5461d6(0x20e)]=_0x51c3c5,_0x1d518f&&(_0x283011[_0x5461d6(0x1df)]=_0x1d518f),await this[_0x5461d6(0x1ea)][_0x5461d6(0x20b)](_0x283011);}async[_0x3fc0bf(0x203)]({id:_0x1b38b3,userId:_0x344174,chatLogId:_0x234c7f,result:_0x3d3544,status:_0x1dc5f3,prompt:_0xdba145}){const _0x3c0be5=_0x3fc0bf;let _0x487b69={'userId':_0x344174,'result':_0x3d3544,'status':_0x1dc5f3,'prompt':_0xdba145,'chatLogId':_0x234c7f};if(_0x1b38b3){const _0x38eedf=await this[_0x3c0be5(0x1ea)][_0x3c0be5(0x1de)]({'where':{'id':_0x1b38b3}});_0x38eedf&&(_0x487b69=Object[_0x3c0be5(0x1f1)](_0x38eedf,_0x487b69));}return await this[_0x3c0be5(0x1ea)][_0x3c0be5(0x20b)](_0x487b69);}async['getPage'](_0x15221e,_0x46865d){const _0x3b5610=_0x3fc0bf,_0x555671=(0x0,utils_1[_0x3b5610(0x211)])(this[_0x3b5610(0x1f8)]),{page:page=0x1,size:size=0xa,day:_0x21fea9}=_0x15221e,_0x5a93f8={};_0x5a93f8[_0x3b5610(0x1e1)]=_0x555671,_0x5a93f8['deleteFlag']=0x0,_0x5a93f8[_0x3b5610(0x209)]=_0x46865d[_0x3b5610(0x1f5)]['id'];if(_0x21fea9>0x0){const _0x1c5a23=new Date(),_0x1a773d=new Date(_0x1c5a23[_0x3b5610(0x1e5)](_0x1c5a23[_0x3b5610(0x1d9)]()-_0x21fea9));_0x5a93f8[_0x3b5610(0x1e6)]=(0x0,typeorm_2['MoreThan'])(_0x1a773d);}const [_0x561481,_0x1a0104]=await this['mindTaskEntity'][_0x3b5610(0x205)]({'where':_0x5a93f8,'take':size,'skip':(page-0x1)*size,'order':{'updatedAt':_0x3b5610(0x1f4)}});return{'rows':_0x561481,'count':_0x1a0104};}async[_0x3fc0bf(0x207)](_0x2470fa){const _0x545b2c=_0x3fc0bf,_0x448d5b=(0x0,utils_1['getReqSaasId'])(this[_0x545b2c(0x1f8)]),_0x1e5781={};_0x1e5781['saasId']=_0x448d5b,_0x1e5781[_0x545b2c(0x1f6)]=0x0,_0x1e5781[_0x545b2c(0x209)]=_0x2470fa[_0x545b2c(0x1f5)]['id'];const _0x3fa41a=await this['mindTaskEntity'][_0x545b2c(0x1ec)]({'where':_0x1e5781,'order':{'updatedAt':_0x545b2c(0x1f4)}});return _0x3fa41a;}async[_0x3fc0bf(0x20c)](_0x3c7a54){const _0x4cdf86=_0x3fc0bf,_0x1fc059=(0x0,utils_1[_0x4cdf86(0x211)])(this[_0x4cdf86(0x1f8)]),_0x2c6c8a={};_0x2c6c8a[_0x4cdf86(0x1e1)]=_0x1fc059,_0x2c6c8a[_0x4cdf86(0x1f6)]=0x0,_0x2c6c8a[_0x4cdf86(0x209)]=_0x3c7a54[_0x4cdf86(0x1f5)]['id'];const _0x510caf=await this[_0x4cdf86(0x1ea)][_0x4cdf86(0x1ff)](_0x2c6c8a,{'deleteFlag':0x1});return _0x510caf;}};MindTaskService=__decorate([(0x0,common_1[_0x3fc0bf(0x1db)])(),__param(0x0,(0x0,typeorm_1[_0x3fc0bf(0x1e9)])(mindTask_entity_1[_0x3fc0bf(0x1dd)])),__metadata(_0x3fc0bf(0x1eb),[typeorm_2[_0x3fc0bf(0x1fc)],nestjs_cls_1[_0x3fc0bf(0x20a)]])],MindTaskService),exports[_0x3fc0bf(0x1f0)]=MindTaskService;