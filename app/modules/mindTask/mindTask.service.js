'use strict';function _0x10f5(_0xea6455,_0x2ebe7c){const _0x540256=_0x5402();return _0x10f5=function(_0x10f5e3,_0x4f54ea){_0x10f5e3=_0x10f5e3-0x188;let _0x58859e=_0x540256[_0x10f5e3];return _0x58859e;},_0x10f5(_0xea6455,_0x2ebe7c);}const _0xd0c140=_0x10f5;(function(_0x146548,_0x1b7738){const _0x1657c9=_0x10f5,_0x1fc76d=_0x146548();while(!![]){try{const _0x92c2cb=parseInt(_0x1657c9(0x1a1))/0x1+parseInt(_0x1657c9(0x19e))/0x2*(parseInt(_0x1657c9(0x1bd))/0x3)+-parseInt(_0x1657c9(0x1a6))/0x4*(-parseInt(_0x1657c9(0x19b))/0x5)+-parseInt(_0x1657c9(0x1b4))/0x6*(parseInt(_0x1657c9(0x1ab))/0x7)+parseInt(_0x1657c9(0x199))/0x8+parseInt(_0x1657c9(0x1c1))/0x9*(-parseInt(_0x1657c9(0x192))/0xa)+parseInt(_0x1657c9(0x1bb))/0xb;if(_0x92c2cb===_0x1b7738)break;else _0x1fc76d['push'](_0x1fc76d['shift']());}catch(_0x2496a4){_0x1fc76d['push'](_0x1fc76d['shift']());}}}(_0x5402,0xac41d));var __decorate=this&&this[_0xd0c140(0x194)]||function(_0x3e30e6,_0x5ce4c5,_0x1868f7,_0x374f51){const _0x66b5ec=_0xd0c140;var _0x1f9542=arguments[_0x66b5ec(0x18a)],_0x53c2a4=_0x1f9542<0x3?_0x5ce4c5:_0x374f51===null?_0x374f51=Object[_0x66b5ec(0x18e)](_0x5ce4c5,_0x1868f7):_0x374f51,_0x36d503;if(typeof Reflect==='object'&&typeof Reflect[_0x66b5ec(0x19c)]===_0x66b5ec(0x1a3))_0x53c2a4=Reflect[_0x66b5ec(0x19c)](_0x3e30e6,_0x5ce4c5,_0x1868f7,_0x374f51);else{for(var _0x51d24c=_0x3e30e6[_0x66b5ec(0x18a)]-0x1;_0x51d24c>=0x0;_0x51d24c--)if(_0x36d503=_0x3e30e6[_0x51d24c])_0x53c2a4=(_0x1f9542<0x3?_0x36d503(_0x53c2a4):_0x1f9542>0x3?_0x36d503(_0x5ce4c5,_0x1868f7,_0x53c2a4):_0x36d503(_0x5ce4c5,_0x1868f7))||_0x53c2a4;}return _0x1f9542>0x3&&_0x53c2a4&&Object[_0x66b5ec(0x197)](_0x5ce4c5,_0x1868f7,_0x53c2a4),_0x53c2a4;},__metadata=this&&this[_0xd0c140(0x1bf)]||function(_0x50db3b,_0x1740fc){const _0x2632e2=_0xd0c140;if(typeof Reflect===_0x2632e2(0x1b5)&&typeof Reflect[_0x2632e2(0x1a2)]===_0x2632e2(0x1a3))return Reflect[_0x2632e2(0x1a2)](_0x50db3b,_0x1740fc);},__param=this&&this[_0xd0c140(0x1ac)]||function(_0xa4cff2,_0x1a848b){return function(_0x11312e,_0x22632e){_0x1a848b(_0x11312e,_0x22632e,_0xa4cff2);};};function _0x5402(){const _0x26e701=['__metadata','saasId','4600764kJBzfa','updatedAt','./entity/mindTask.entity','length','update','isTop','getPage','getOwnPropertyDescriptor','getMindTask','typeorm','save','20gfFlUf','MindTaskEntity','__decorate','saveMindTask','setDate','defineProperty','MindTaskService','537584ElNOQq','getReqSaasId','6817505TlATqG','decorate','setMindTask','1345326jvdZbG','InjectRepository','find','125719NitdZp','metadata','function','@nestjs/typeorm','getDate','4EUYhsD','findOne','@nestjs/common','user','clsService','3017zollMv','__param','clear','findAndCount','name','DESC','assign','userId','ClsService','16434YmozIV','object','mindTaskEntity','nestjs-cls','result','getList','../../common/utils','7473235JnYGUu','deleteFlag','3NIeEKy','design:paramtypes'];_0x5402=function(){return _0x26e701;};return _0x5402();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0xd0c140(0x198)]=void 0x0;const common_1=require(_0xd0c140(0x1a8)),typeorm_1=require(_0xd0c140(0x1a4)),typeorm_2=require(_0xd0c140(0x190)),mindTask_entity_1=require(_0xd0c140(0x189)),nestjs_cls_1=require(_0xd0c140(0x1b7)),utils_1=require(_0xd0c140(0x1ba));let MindTaskService=class MindTaskService{constructor(_0x4fd19a,_0x825415){const _0x27325c=_0xd0c140;this[_0x27325c(0x1b6)]=_0x4fd19a,this['clsService']=_0x825415;}async[_0xd0c140(0x18f)]({id:_0x2a8db5,userId:_0x5da1ec}){const _0x2732e4=_0xd0c140,_0x201933=await this[_0x2732e4(0x1b6)][_0x2732e4(0x1a7)]({'where':{'id':_0x2a8db5,'userId':_0x5da1ec}});return _0x201933;}async['delMindTask']({id:_0x421945,userId:_0x1c7464}){const _0x3c152f=_0xd0c140,_0xf93483=await this['mindTaskEntity'][_0x3c152f(0x1a7)]({'where':{'id':_0x421945,'userId':_0x1c7464}});_0xf93483&&(_0xf93483[_0x3c152f(0x1bc)]=0x1,await this[_0x3c152f(0x1b6)]['save'](_0xf93483));}async[_0xd0c140(0x19d)]({id:_0x431b9e,userId:_0x46d29f,name:_0x4b68b8,result:_0x3b47f2}){const _0x4319e6=_0xd0c140,_0x1388b2=await this[_0x4319e6(0x1b6)][_0x4319e6(0x1a7)]({'where':{'id':_0x431b9e,'userId':_0x46d29f}});if(_0x1388b2)return _0x1388b2[_0x4319e6(0x1af)]=_0x4b68b8,_0x3b47f2&&(_0x1388b2[_0x4319e6(0x1b8)]=_0x3b47f2),await this[_0x4319e6(0x1b6)][_0x4319e6(0x191)](_0x1388b2);}async['topMind'](_0x1a5558,_0xe7a6d0,_0x49e0c3){const _0x499e8a=_0xd0c140;_0xe7a6d0==0x1?_0xe7a6d0=0x1:_0xe7a6d0=0x0;const _0x26561b=await this[_0x499e8a(0x1b6)]['findOne']({'where':{'id':_0x1a5558,'isTop':_0xe7a6d0,'userId':_0x49e0c3[_0x499e8a(0x1a9)]['id']}});_0x26561b&&(_0x26561b[_0x499e8a(0x18c)]=0x1,await this[_0x499e8a(0x1b6)][_0x499e8a(0x191)](_0x26561b));}async[_0xd0c140(0x195)]({id:_0x10f9c9,userId:_0xae2a45,chatLogId:_0x2fe8c9,result:_0x5421db,status:_0x53d9b1,prompt:_0x2f0d04}){const _0xf0cbb2=_0xd0c140;let _0x36541b={'userId':_0xae2a45,'result':_0x5421db,'status':_0x53d9b1,'prompt':_0x2f0d04,'chatLogId':_0x2fe8c9};if(_0x10f9c9){const _0x6d6187=await this[_0xf0cbb2(0x1b6)][_0xf0cbb2(0x1a7)]({'where':{'id':_0x10f9c9}});_0x6d6187&&(_0x36541b=Object[_0xf0cbb2(0x1b1)](_0x6d6187,_0x36541b));}return await this[_0xf0cbb2(0x1b6)]['save'](_0x36541b);}async[_0xd0c140(0x18d)](_0x57906d,_0x3db49e){const _0x4b0c0a=_0xd0c140,_0x3df20d=(0x0,utils_1['getReqSaasId'])(this[_0x4b0c0a(0x1aa)]),{page:page=0x1,size:size=0xa,day:_0x23d684}=_0x57906d,_0x9d932a={};_0x9d932a[_0x4b0c0a(0x1c0)]=_0x3df20d,_0x9d932a[_0x4b0c0a(0x1bc)]=0x0,_0x9d932a[_0x4b0c0a(0x1b2)]=_0x3db49e['user']['id'];if(_0x23d684>0x0){const _0x527840=new Date(),_0x4ce108=new Date(_0x527840[_0x4b0c0a(0x196)](_0x527840[_0x4b0c0a(0x1a5)]()-_0x23d684));_0x9d932a[_0x4b0c0a(0x188)]=(0x0,typeorm_2['MoreThan'])(_0x4ce108);}const [_0x1d8d2e,_0x1b2ccd]=await this[_0x4b0c0a(0x1b6)][_0x4b0c0a(0x1ae)]({'where':_0x9d932a,'take':size,'skip':(page-0x1)*size,'order':{'isTop':'DESC','updatedAt':'DESC'}});return{'rows':_0x1d8d2e,'count':_0x1b2ccd};}async[_0xd0c140(0x1b9)](_0x415e89){const _0x41f5d5=_0xd0c140,_0x35bc8b=(0x0,utils_1[_0x41f5d5(0x19a)])(this[_0x41f5d5(0x1aa)]),_0x3d9a61={};_0x3d9a61['saasId']=_0x35bc8b,_0x3d9a61['deleteFlag']=0x0,_0x3d9a61['userId']=_0x415e89[_0x41f5d5(0x1a9)]['id'];const _0x27f3da=await this['mindTaskEntity'][_0x41f5d5(0x1a0)]({'where':_0x3d9a61,'order':{'isTop':_0x41f5d5(0x1b0),'updatedAt':'DESC'}});return _0x27f3da;}async[_0xd0c140(0x1ad)](_0x20c5d4){const _0x441fab=_0xd0c140,_0x1146da=(0x0,utils_1[_0x441fab(0x19a)])(this[_0x441fab(0x1aa)]),_0x39dcbf={};_0x39dcbf[_0x441fab(0x1c0)]=_0x1146da,_0x39dcbf['deleteFlag']=0x0,_0x39dcbf[_0x441fab(0x1b2)]=_0x20c5d4[_0x441fab(0x1a9)]['id'];const _0x1200ef=await this[_0x441fab(0x1b6)][_0x441fab(0x18b)](_0x39dcbf,{'deleteFlag':0x1});return _0x1200ef;}};MindTaskService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0xd0c140(0x19f)])(mindTask_entity_1[_0xd0c140(0x193)])),__metadata(_0xd0c140(0x1be),[typeorm_2['Repository'],nestjs_cls_1[_0xd0c140(0x1b3)]])],MindTaskService),exports[_0xd0c140(0x198)]=MindTaskService;