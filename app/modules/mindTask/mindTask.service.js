'use strict';const _0x34a144=_0x20f8;(function(_0x480cb5,_0x4fa573){const _0x10c2b1=_0x20f8,_0x5d7a62=_0x480cb5();while(!![]){try{const _0x35beea=parseInt(_0x10c2b1(0x94))/0x1*(-parseInt(_0x10c2b1(0x90))/0x2)+parseInt(_0x10c2b1(0xc2))/0x3*(-parseInt(_0x10c2b1(0xab))/0x4)+-parseInt(_0x10c2b1(0xad))/0x5+parseInt(_0x10c2b1(0x9c))/0x6+-parseInt(_0x10c2b1(0xb8))/0x7*(-parseInt(_0x10c2b1(0xba))/0x8)+-parseInt(_0x10c2b1(0xbc))/0x9+parseInt(_0x10c2b1(0xbf))/0xa;if(_0x35beea===_0x4fa573)break;else _0x5d7a62['push'](_0x5d7a62['shift']());}catch(_0x57913d){_0x5d7a62['push'](_0x5d7a62['shift']());}}}(_0x405c,0xa19b4));var __decorate=this&&this['__decorate']||function(_0x3e462a,_0x1bd190,_0x4576de,_0x5a5e17){const _0x2623cb=_0x20f8;var _0x443f48=arguments['length'],_0x11a893=_0x443f48<0x3?_0x1bd190:_0x5a5e17===null?_0x5a5e17=Object['getOwnPropertyDescriptor'](_0x1bd190,_0x4576de):_0x5a5e17,_0xa9628e;if(typeof Reflect===_0x2623cb(0x98)&&typeof Reflect[_0x2623cb(0xb4)]===_0x2623cb(0xaa))_0x11a893=Reflect[_0x2623cb(0xb4)](_0x3e462a,_0x1bd190,_0x4576de,_0x5a5e17);else{for(var _0x3469fe=_0x3e462a[_0x2623cb(0xc3)]-0x1;_0x3469fe>=0x0;_0x3469fe--)if(_0xa9628e=_0x3e462a[_0x3469fe])_0x11a893=(_0x443f48<0x3?_0xa9628e(_0x11a893):_0x443f48>0x3?_0xa9628e(_0x1bd190,_0x4576de,_0x11a893):_0xa9628e(_0x1bd190,_0x4576de))||_0x11a893;}return _0x443f48>0x3&&_0x11a893&&Object[_0x2623cb(0xc1)](_0x1bd190,_0x4576de,_0x11a893),_0x11a893;},__metadata=this&&this[_0x34a144(0xb0)]||function(_0x217e24,_0x5e9fb3){const _0x18a925=_0x34a144;if(typeof Reflect===_0x18a925(0x98)&&typeof Reflect[_0x18a925(0xbe)]===_0x18a925(0xaa))return Reflect[_0x18a925(0xbe)](_0x217e24,_0x5e9fb3);},__param=this&&this[_0x34a144(0xa1)]||function(_0x446ea7,_0x4ab8b7){return function(_0x149955,_0x49c73a){_0x4ab8b7(_0x149955,_0x49c73a,_0x446ea7);};};Object[_0x34a144(0xc1)](exports,_0x34a144(0xa6),{'value':!![]}),exports['MindTaskService']=void 0x0;function _0x20f8(_0xca8dd,_0x212768){const _0x405c77=_0x405c();return _0x20f8=function(_0x20f8d0,_0x4f4531){_0x20f8d0=_0x20f8d0-0x8e;let _0x582e5d=_0x405c77[_0x20f8d0];return _0x582e5d;},_0x20f8(_0xca8dd,_0x212768);}const common_1=require(_0x34a144(0x91)),typeorm_1=require(_0x34a144(0xb6)),typeorm_2=require(_0x34a144(0x9a)),mindTask_entity_1=require(_0x34a144(0xb1)),nestjs_cls_1=require(_0x34a144(0x9b)),utils_1=require(_0x34a144(0x8e));let MindTaskService=class MindTaskService{constructor(_0x1efdf6,_0x4b4414){const _0x4d14b9=_0x34a144;this[_0x4d14b9(0xa7)]=_0x1efdf6,this[_0x4d14b9(0xa0)]=_0x4b4414;}async[_0x34a144(0xa4)]({id:_0x34e430,userId:_0x45af1e}){const _0x2f0554=_0x34a144,_0x589199=await this[_0x2f0554(0xa7)][_0x2f0554(0xa5)]({'where':{'id':_0x34e430,'userId':_0x45af1e}});return _0x589199;}async['delMindTask']({id:_0x2cce6d,userId:_0x5edd15}){const _0x598f24=_0x34a144,_0x315375=await this['mindTaskEntity']['findOne']({'where':{'id':_0x2cce6d,'userId':_0x5edd15}});_0x315375&&(_0x315375[_0x598f24(0xbd)]=0x1,await this['mindTaskEntity'][_0x598f24(0xb3)](_0x315375));}async[_0x34a144(0xa9)]({id:_0x38d62e,userId:_0x2df2b5,name:_0x1a6e05,result:_0x84a214}){const _0x3151ff=_0x34a144,_0x3af875=await this[_0x3151ff(0xa7)][_0x3151ff(0xa5)]({'where':{'id':_0x38d62e,'userId':_0x2df2b5}});if(_0x3af875)return _0x3af875['name']=_0x1a6e05,_0x84a214&&(_0x3af875[_0x3151ff(0x9d)]=_0x84a214),await this[_0x3151ff(0xa7)][_0x3151ff(0xb3)](_0x3af875);}async['topMind'](_0x2a8e0a,_0x2b18e0,_0xb8ddc2){const _0x459053=_0x34a144;_0x2b18e0==0x1?_0x2b18e0=0x1:_0x2b18e0=0x0;const _0x2b235f=await this['mindTaskEntity']['findOne']({'where':{'id':_0x2a8e0a,'isTop':_0x2b18e0,'userId':_0xb8ddc2[_0x459053(0xb5)]['id']}});_0x2b235f&&(_0x2b235f[_0x459053(0xa2)]=0x1,await this[_0x459053(0xa7)][_0x459053(0xb3)](_0x2b235f));}async[_0x34a144(0x96)]({id:_0x68ea9,userId:_0x218799,chatLogId:_0x7ed48c,result:_0x5406ed,status:_0x4ee8ab,prompt:_0x2f1545}){const _0x187d5a=_0x34a144;let _0x29f9cf={'userId':_0x218799,'result':_0x5406ed,'status':_0x4ee8ab,'prompt':_0x2f1545,'chatLogId':_0x7ed48c};if(_0x68ea9){const _0x376c1e=await this[_0x187d5a(0xa7)][_0x187d5a(0xa5)]({'where':{'id':_0x68ea9}});_0x376c1e&&(_0x29f9cf=Object[_0x187d5a(0xac)](_0x376c1e,_0x29f9cf));}return await this['mindTaskEntity'][_0x187d5a(0xb3)](_0x29f9cf);}async[_0x34a144(0x93)](_0x5c9d61,_0x35ed49){const _0x5e87c4=_0x34a144,_0x59a7bc=(0x0,utils_1[_0x5e87c4(0xb7)])(this['clsService']),{page:page=0x1,size:size=0xa,day:_0x1e6a3f}=_0x5c9d61,_0x538d9b={};_0x538d9b[_0x5e87c4(0xb2)]=_0x59a7bc,_0x538d9b[_0x5e87c4(0xbd)]=0x0,_0x538d9b[_0x5e87c4(0xa3)]=_0x35ed49[_0x5e87c4(0xb5)]['id'];if(_0x1e6a3f>0x0){const _0x32159e=new Date(),_0x34346d=new Date(_0x32159e[_0x5e87c4(0x99)](_0x32159e['getDate']()-_0x1e6a3f));_0x538d9b['updatedAt']=(0x0,typeorm_2[_0x5e87c4(0x9f)])(_0x34346d);}const [_0x45ce53,_0x1a2215]=await this[_0x5e87c4(0xa7)][_0x5e87c4(0xc0)]({'where':_0x538d9b,'take':size,'skip':(page-0x1)*size,'order':{'isTop':_0x5e87c4(0xa8),'updatedAt':_0x5e87c4(0xa8)}});return{'rows':_0x45ce53,'count':_0x1a2215};}async[_0x34a144(0xb9)](_0x17967a){const _0x55771e=_0x34a144,_0x148839=(0x0,utils_1[_0x55771e(0xb7)])(this[_0x55771e(0xa0)]),_0x2bd7aa={};_0x2bd7aa[_0x55771e(0xb2)]=_0x148839,_0x2bd7aa['deleteFlag']=0x0,_0x2bd7aa[_0x55771e(0xa3)]=_0x17967a['user']['id'];const _0x5dc5b6=await this['mindTaskEntity']['find']({'where':_0x2bd7aa,'order':{'isTop':_0x55771e(0xa8),'updatedAt':'DESC'}});return _0x5dc5b6;}async[_0x34a144(0x92)](_0x565f69){const _0x533a51=_0x34a144,_0x17ae82=(0x0,utils_1[_0x533a51(0xb7)])(this[_0x533a51(0xa0)]),_0x2ec927={};_0x2ec927[_0x533a51(0xb2)]=_0x17ae82,_0x2ec927[_0x533a51(0xbd)]=0x0,_0x2ec927[_0x533a51(0xa3)]=_0x565f69[_0x533a51(0xb5)]['id'];const _0x514792=await this[_0x533a51(0xa7)][_0x533a51(0x9e)](_0x2ec927,{'deleteFlag':0x1});return _0x514792;}};function _0x405c(){const _0x1d53ad=['@nestjs/typeorm','getReqSaasId','7JuQOAR','getList','4169032mSIiEn','MindTaskEntity','11758950szdLdu','deleteFlag','metadata','25324000MXSLfu','findAndCount','defineProperty','22209TvbFRF','length','../../common/utils','design:paramtypes','54524dYMxrw','@nestjs/common','clear','getPage','17ZnKgff','Repository','saveMindTask','Injectable','object','setDate','typeorm','nestjs-cls','3094812qNenFM','result','update','MoreThan','clsService','__param','isTop','userId','getMindTask','findOne','__esModule','mindTaskEntity','DESC','setMindTask','function','4Vihpqt','assign','5649920ooQAbD','MindTaskService','InjectRepository','__metadata','./entity/mindTask.entity','saasId','save','decorate','user'];_0x405c=function(){return _0x1d53ad;};return _0x405c();}MindTaskService=__decorate([(0x0,common_1[_0x34a144(0x97)])(),__param(0x0,(0x0,typeorm_1[_0x34a144(0xaf)])(mindTask_entity_1[_0x34a144(0xbb)])),__metadata(_0x34a144(0x8f),[typeorm_2[_0x34a144(0x95)],nestjs_cls_1['ClsService']])],MindTaskService),exports[_0x34a144(0xae)]=MindTaskService;