'use strict';const _0x210acd=_0x5c41;(function(_0x3f65d0,_0x33d354){const _0x54bf35=_0x5c41,_0x4953c7=_0x3f65d0();while(!![]){try{const _0x690711=-parseInt(_0x54bf35(0x142))/0x1*(parseInt(_0x54bf35(0x11a))/0x2)+-parseInt(_0x54bf35(0x123))/0x3*(parseInt(_0x54bf35(0x11d))/0x4)+parseInt(_0x54bf35(0x117))/0x5+parseInt(_0x54bf35(0x110))/0x6+-parseInt(_0x54bf35(0x121))/0x7+-parseInt(_0x54bf35(0x129))/0x8*(parseInt(_0x54bf35(0x144))/0x9)+parseInt(_0x54bf35(0x113))/0xa;if(_0x690711===_0x33d354)break;else _0x4953c7['push'](_0x4953c7['shift']());}catch(_0x288b1c){_0x4953c7['push'](_0x4953c7['shift']());}}}(_0x4fd7,0x43c2a));var __decorate=this&&this[_0x210acd(0x133)]||function(_0x2aa363,_0x2915d1,_0xa551ff,_0x219d94){const _0x43ec2f=_0x210acd;var _0x4b760c=arguments['length'],_0x56c2f1=_0x4b760c<0x3?_0x2915d1:_0x219d94===null?_0x219d94=Object['getOwnPropertyDescriptor'](_0x2915d1,_0xa551ff):_0x219d94,_0xbe48b6;if(typeof Reflect===_0x43ec2f(0x116)&&typeof Reflect[_0x43ec2f(0x13d)]===_0x43ec2f(0x115))_0x56c2f1=Reflect[_0x43ec2f(0x13d)](_0x2aa363,_0x2915d1,_0xa551ff,_0x219d94);else{for(var _0x45bad0=_0x2aa363[_0x43ec2f(0x143)]-0x1;_0x45bad0>=0x0;_0x45bad0--)if(_0xbe48b6=_0x2aa363[_0x45bad0])_0x56c2f1=(_0x4b760c<0x3?_0xbe48b6(_0x56c2f1):_0x4b760c>0x3?_0xbe48b6(_0x2915d1,_0xa551ff,_0x56c2f1):_0xbe48b6(_0x2915d1,_0xa551ff))||_0x56c2f1;}return _0x4b760c>0x3&&_0x56c2f1&&Object['defineProperty'](_0x2915d1,_0xa551ff,_0x56c2f1),_0x56c2f1;},__metadata=this&&this[_0x210acd(0x122)]||function(_0x3c8710,_0x2e663f){const _0x4d4b72=_0x210acd;if(typeof Reflect===_0x4d4b72(0x116)&&typeof Reflect[_0x4d4b72(0x140)]===_0x4d4b72(0x115))return Reflect['metadata'](_0x3c8710,_0x2e663f);},__param=this&&this[_0x210acd(0x11f)]||function(_0x338ad4,_0x1d0269){return function(_0x12342d,_0x40e95a){_0x1d0269(_0x12342d,_0x40e95a,_0x338ad4);};};Object[_0x210acd(0x147)](exports,_0x210acd(0x141),{'value':!![]}),exports[_0x210acd(0x139)]=void 0x0;function _0x5c41(_0x24e2b0,_0x1ecced){const _0x4fd749=_0x4fd7();return _0x5c41=function(_0x5c4197,_0x944769){_0x5c4197=_0x5c4197-0x10f;let _0x5f5c8f=_0x4fd749[_0x5c4197];return _0x5f5c8f;},_0x5c41(_0x24e2b0,_0x1ecced);}const common_1=require(_0x210acd(0x12e)),typeorm_1=require(_0x210acd(0x145)),typeorm_2=require(_0x210acd(0x148)),mindTask_entity_1=require(_0x210acd(0x118)),nestjs_cls_1=require(_0x210acd(0x132)),utils_1=require(_0x210acd(0x10f));let MindTaskService=class MindTaskService{constructor(_0x1f2455,_0x443949){const _0x311204=_0x210acd;this[_0x311204(0x138)]=_0x1f2455,this['clsService']=_0x443949;}async[_0x210acd(0x12f)]({id:_0x14cae4,userId:_0x5a5b8f}){const _0x1cbfb4=_0x210acd,_0x4c7525=await this[_0x1cbfb4(0x138)][_0x1cbfb4(0x12b)]({'where':{'id':_0x14cae4,'userId':_0x5a5b8f}});return _0x4c7525;}async[_0x210acd(0x112)]({id:_0x39c6db,userId:_0x1f3a2a}){const _0x255891=_0x210acd,_0x59d9bb=await this[_0x255891(0x138)][_0x255891(0x12b)]({'where':{'id':_0x39c6db,'userId':_0x1f3a2a}});_0x59d9bb&&(_0x59d9bb['deleteFlag']=0x1,await this[_0x255891(0x138)][_0x255891(0x114)](_0x59d9bb));}async[_0x210acd(0x12d)]({id:_0x138fb9,userId:_0x3d3375,name:_0x3d8b6b,result:_0x5d6e1d}){const _0x588d1c=_0x210acd,_0x51142c=await this[_0x588d1c(0x138)]['findOne']({'where':{'id':_0x138fb9,'userId':_0x3d3375}});if(_0x51142c)return _0x51142c[_0x588d1c(0x134)]=_0x3d8b6b,_0x5d6e1d&&(_0x51142c[_0x588d1c(0x131)]=_0x5d6e1d),await this[_0x588d1c(0x138)]['save'](_0x51142c);}async['topMind'](_0x2882ab,_0x53243c,_0x332b9e){const _0x148e92=_0x210acd;_0x53243c==0x1?_0x53243c=0x1:_0x53243c=0x0;const _0x241c2f=await this[_0x148e92(0x138)][_0x148e92(0x12b)]({'where':{'id':_0x2882ab,'isTop':_0x53243c,'userId':_0x332b9e[_0x148e92(0x127)]['id']}});_0x241c2f&&(_0x241c2f[_0x148e92(0x11b)]=0x1,await this['mindTaskEntity'][_0x148e92(0x114)](_0x241c2f));}async[_0x210acd(0x135)]({id:_0x142b3e,userId:_0x52ed0f,chatLogId:_0x4e7925,result:_0x3525c0,status:_0x242d97,prompt:_0xc0bd29}){const _0x3a3032=_0x210acd;let _0x64f966={'userId':_0x52ed0f,'result':_0x3525c0,'status':_0x242d97,'prompt':_0xc0bd29,'chatLogId':_0x4e7925};if(_0x142b3e){const _0x2c1124=await this[_0x3a3032(0x138)]['findOne']({'where':{'id':_0x142b3e}});_0x2c1124&&(_0x64f966=Object[_0x3a3032(0x149)](_0x2c1124,_0x64f966));}return await this[_0x3a3032(0x138)]['save'](_0x64f966);}async[_0x210acd(0x146)](_0x1da0bf,_0x5bca1f){const _0x5eb745=_0x210acd,_0x4838d1=(0x0,utils_1[_0x5eb745(0x12a)])(this[_0x5eb745(0x13a)]),{page:page=0x1,size:size=0xa,day:_0x10e858}=_0x1da0bf,_0x3a314f={};_0x3a314f[_0x5eb745(0x13c)]=_0x4838d1,_0x3a314f[_0x5eb745(0x11e)]=0x0,_0x3a314f['userId']=_0x5bca1f[_0x5eb745(0x127)]['id'];if(_0x10e858>0x0){const _0x535f52=new Date(),_0x4a9c12=new Date(_0x535f52[_0x5eb745(0x11c)](_0x535f52[_0x5eb745(0x130)]()-_0x10e858));_0x3a314f[_0x5eb745(0x111)]=(0x0,typeorm_2['MoreThan'])(_0x4a9c12);}const [_0x4a11fb,_0x4b07c5]=await this[_0x5eb745(0x138)][_0x5eb745(0x13e)]({'where':_0x3a314f,'take':size,'skip':(page-0x1)*size,'order':{'isTop':_0x5eb745(0x125),'updatedAt':'DESC'}});return{'rows':_0x4a11fb,'count':_0x4b07c5};}async[_0x210acd(0x128)](_0x2c5e71){const _0x4f630e=_0x210acd,_0x5a1c60=(0x0,utils_1[_0x4f630e(0x12a)])(this[_0x4f630e(0x13a)]),_0x161776={};_0x161776['saasId']=_0x5a1c60,_0x161776[_0x4f630e(0x11e)]=0x0,_0x161776['userId']=_0x2c5e71[_0x4f630e(0x127)]['id'];const _0x3eedca=await this[_0x4f630e(0x138)][_0x4f630e(0x120)]({'where':_0x161776,'order':{'isTop':_0x4f630e(0x125),'updatedAt':_0x4f630e(0x125)}});return _0x3eedca;}async['clear'](_0x1b5b78){const _0x4c8b0d=_0x210acd,_0x1ccb7d=(0x0,utils_1[_0x4c8b0d(0x12a)])(this[_0x4c8b0d(0x13a)]),_0x430cba={};_0x430cba[_0x4c8b0d(0x13c)]=_0x1ccb7d,_0x430cba[_0x4c8b0d(0x11e)]=0x0,_0x430cba[_0x4c8b0d(0x137)]=_0x1b5b78['user']['id'];const _0x2667d6=await this['mindTaskEntity'][_0x4c8b0d(0x119)](_0x430cba,{'deleteFlag':0x1});return _0x2667d6;}};MindTaskService=__decorate([(0x0,common_1[_0x210acd(0x13b)])(),__param(0x0,(0x0,typeorm_1[_0x210acd(0x13f)])(mindTask_entity_1[_0x210acd(0x12c)])),__metadata(_0x210acd(0x124),[typeorm_2[_0x210acd(0x126)],nestjs_cls_1[_0x210acd(0x136)]])],MindTaskService),exports[_0x210acd(0x139)]=MindTaskService;function _0x4fd7(){const _0x524c06=['__esModule','1EPArDf','length','207513hCljWT','@nestjs/typeorm','getPage','defineProperty','typeorm','assign','../../common/utils','2232336NwXsHD','updatedAt','delMindTask','1888430faDVai','save','function','object','1086975diPXEe','./entity/mindTask.entity','update','108546YAqBCQ','isTop','setDate','4RWpDrO','deleteFlag','__param','find','413854yJgNji','__metadata','816204vwmncQ','design:paramtypes','DESC','Repository','user','getList','40HKUiHG','getReqSaasId','findOne','MindTaskEntity','setMindTask','@nestjs/common','getMindTask','getDate','result','nestjs-cls','__decorate','name','saveMindTask','ClsService','userId','mindTaskEntity','MindTaskService','clsService','Injectable','saasId','decorate','findAndCount','InjectRepository','metadata'];_0x4fd7=function(){return _0x524c06;};return _0x4fd7();}