'use strict';const _0x33ff03=_0x2f7a;(function(_0x31654c,_0x14c5af){const _0x5e14ed=_0x2f7a,_0x5e5176=_0x31654c();while(!![]){try{const _0x3e62af=parseInt(_0x5e14ed(0x1c5))/0x1*(-parseInt(_0x5e14ed(0x1d0))/0x2)+-parseInt(_0x5e14ed(0x1d2))/0x3*(parseInt(_0x5e14ed(0x1bc))/0x4)+-parseInt(_0x5e14ed(0x1ba))/0x5*(-parseInt(_0x5e14ed(0x1b6))/0x6)+-parseInt(_0x5e14ed(0x1cb))/0x7*(parseInt(_0x5e14ed(0x1b9))/0x8)+-parseInt(_0x5e14ed(0x1c9))/0x9+-parseInt(_0x5e14ed(0x1cc))/0xa*(-parseInt(_0x5e14ed(0x1d7))/0xb)+parseInt(_0x5e14ed(0x1c2))/0xc;if(_0x3e62af===_0x14c5af)break;else _0x5e5176['push'](_0x5e5176['shift']());}catch(_0x294ddf){_0x5e5176['push'](_0x5e5176['shift']());}}}(_0x15d3,0x581c0));Object[_0x33ff03(0x1d1)](exports,'__esModule',{'value':!![]}),exports[_0x33ff03(0x1d8)]=exports[_0x33ff03(0x1bb)]=void 0x0;const common_1=require(_0x33ff03(0x1d5)),axios=require('axios'),getApiModelMaps=()=>{const _0x451c1f=_0x33ff03;let _0x5275b0={};const _0x249700={'ERNIE-Bot':_0x451c1f(0x1cf),'ERNIE-Bot-turbo':'eb-instant','ERNIE-Bot-4.0':_0x451c1f(0x1c6),'BLOOMZ-7B':_0x451c1f(0x1c8),'Llama-2-7b-chat':'llama_2_7b','Llama-2-13b-chat':'llama_2_13b','ChatGLM2-6B-32K':_0x451c1f(0x1c3),'Qianfan-Chinese-Llama-2-7B':_0x451c1f(0x1b7)};return Object[_0x451c1f(0x1db)](_0x249700)[_0x451c1f(0x1d4)](_0x2b24a5=>{const _0xc378ca=_0x451c1f;_0x5275b0[''+_0x2b24a5[_0xc378ca(0x1de)]()]=_0x249700[_0x2b24a5];}),_0x5275b0;};function getAccessToken(_0x2fd313,_0x819c30){const _0x3a6fd=_0x33ff03;let _0x3fbb58='https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id='+_0x2fd313+_0x3a6fd(0x1c7)+_0x819c30;return new Promise((_0xb8e5f6,_0x4af74c)=>{const _0xe66a84=_0x3a6fd;axios['post'](_0x3fbb58)[_0xe66a84(0x1cd)](_0x2a95ae=>{const _0x384d94=_0xe66a84;_0xb8e5f6(_0x2a95ae[_0x384d94(0x1c4)][_0x384d94(0x1dd)]);})[_0xe66a84(0x1c0)](_0xfb865c=>{const _0x3d07fe=_0xe66a84;common_1[_0x3d07fe(0x1be)][_0x3d07fe(0x1d3)](_0xfb865c['message'],'[百度签名校验失败]');});});}function _0x15d3(){const _0x3aa0d6=['stream','completions','377906rGmMAO','defineProperty','7197RRzmQl','error','map','@nestjs/common','log','546491CxqfqW','sendMessageFromBaidu','text','trim','keys','application/json','access_token','toLowerCase','POST','1128rrvuCk','qianfan_chinese_llama_2_7b','data:\x20','38032BirPJy','14755yIZMeP','getAccessToken','1064ITCHXT','toString','Logger','parse','catch','split','14902524FsziAG','chatglm2_6b_32k','data','1rHHKRw','completions_pro','&client_secret=','bloomz_7b1','1914156lCXyEm','https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/','1022PjBMev','60RyaDGK','then'];_0x15d3=function(){return _0x3aa0d6;};return _0x15d3();}exports['getAccessToken']=getAccessToken;function _0x2f7a(_0x47ec6d,_0x17d40b){const _0x15d31d=_0x15d3();return _0x2f7a=function(_0x2f7a04,_0x2d064b){_0x2f7a04=_0x2f7a04-0x1b6;let _0x2f3498=_0x15d31d[_0x2f7a04];return _0x2f3498;},_0x2f7a(_0x47ec6d,_0x17d40b);}function sendMessageFromBaidu(_0x4bedd6,{onProgress:_0x4af574,accessToken:_0x3a8cd8,model:_0x2ce43e,temperature:temperature=0.95}){const _0x31a361=_0x33ff03,_0x59f4f2=getApiModelMaps()[_0x2ce43e['trim']()[_0x31a361(0x1de)]()];return new Promise((_0x2db5fd,_0x5d9bc8)=>{const _0x94d934=_0x31a361,_0x3b4cdd=_0x94d934(0x1ca)+_0x59f4f2+'?access_token='+_0x3a8cd8,_0x542c0b={'method':_0x94d934(0x1df),'url':_0x3b4cdd,'responseType':_0x94d934(0x1ce),'headers':{'Content-Type':_0x94d934(0x1dc)},'data':{'stream':!![],'messages':_0x4bedd6}};axios(_0x542c0b)[_0x94d934(0x1cd)](_0x2784c3=>{const _0x49e9fa=_0x94d934,_0x5e436a=_0x2784c3[_0x49e9fa(0x1c4)];let _0x2534bb={},_0x126908='',_0x3762af='';_0x5e436a['on'](_0x49e9fa(0x1c4),_0x1add70=>{const _0x52354f=_0x49e9fa,_0x26f9e9=_0x1add70[_0x52354f(0x1bd)]()[_0x52354f(0x1c1)]('\x0a\x0a')['filter'](_0x5c2252=>_0x5c2252[_0x52354f(0x1da)]()!=='');for(const _0x2b1aa8 of _0x26f9e9){const _0x418637=_0x2b1aa8['replace'](_0x52354f(0x1b8),'');try{const _0x1b96a7=_0x126908+_0x418637,_0xa2957a=JSON[_0x52354f(0x1bf)](_0x1b96a7);_0x126908='';const {is_end:_0x2bc2f6,result:_0x296d95}=_0xa2957a;_0x296d95&&(_0x3762af+=_0x296d95),_0x2bc2f6&&(_0x2534bb=_0xa2957a,_0x2534bb[_0x52354f(0x1d9)]=_0x3762af),_0x4af574(_0xa2957a);}catch(_0x247ff0){_0x126908=_0x418637;}}}),_0x5e436a['on']('end',()=>{_0x3762af='',_0x126908='',_0x2db5fd(_0x2534bb);});})[_0x94d934(0x1c0)](_0x349940=>{const _0x585408=_0x94d934;console[_0x585408(0x1d6)](_0x349940),_0x5d9bc8(new Error(_0x349940));});});}exports['sendMessageFromBaidu']=sendMessageFromBaidu;