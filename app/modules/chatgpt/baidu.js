'use strict';const _0x1ee2e2=_0xb800;(function(_0x3fb54a,_0x441140){const _0x15531b=_0xb800,_0xc3fed2=_0x3fb54a();while(!![]){try{const _0x3306ac=parseInt(_0x15531b(0x11c))/0x1+-parseInt(_0x15531b(0x129))/0x2+parseInt(_0x15531b(0x12f))/0x3*(parseInt(_0x15531b(0x149))/0x4)+-parseInt(_0x15531b(0x134))/0x5*(parseInt(_0x15531b(0x145))/0x6)+-parseInt(_0x15531b(0x13b))/0x7*(-parseInt(_0x15531b(0x11b))/0x8)+-parseInt(_0x15531b(0x13f))/0x9*(parseInt(_0x15531b(0x14d))/0xa)+parseInt(_0x15531b(0x137))/0xb*(parseInt(_0x15531b(0x132))/0xc);if(_0x3306ac===_0x441140)break;else _0xc3fed2['push'](_0xc3fed2['shift']());}catch(_0x47bcb5){_0xc3fed2['push'](_0xc3fed2['shift']());}}}(_0x2716,0x7317c));Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['sendMessageFromBaidu']=exports[_0x1ee2e2(0x143)]=void 0x0;const common_1=require(_0x1ee2e2(0x12c)),axios=require('axios'),getApiModelMaps=()=>{const _0x1cdc54=_0x1ee2e2;let _0xc320a9={};const _0x35b2be={'ERNIE-4.0-8K':_0x1cdc54(0x118),'ERNIE-4.0-8K-Latest':_0x1cdc54(0x14b),'ERNIE-4.0-8K-Preview':_0x1cdc54(0x15e),'ERNIE-4.0-8K-Preview-0518':_0x1cdc54(0x158),'ERNIE-4.0-8K-0613':_0x1cdc54(0x13c),'ERNIE-4.0-8K-0329':_0x1cdc54(0x157),'ERNIE-4.0-Turbo-8K':_0x1cdc54(0x127),'ERNIE-3.5-128K':_0x1cdc54(0x14a),'ERNIE-3.5-8K':_0x1cdc54(0x14c),'ERNIE-3.5-8K-Preview':_0x1cdc54(0x131),'ERNIE-3.5-8K-0613':_0x1cdc54(0x11e),'ERNIE-3.5-8K-0329':'ernie-3.5-8k-0329','ERNIE-Speed-128K':'ernie-speed-128k','ERNIE-Speed-8K':_0x1cdc54(0x140),'ERNIE\x20Speed-AppBuilder':_0x1cdc54(0x128),'ERNIE-Character-8K':_0x1cdc54(0x138),'ERNIE-Functions-8K':'ernie-func-8k','ERNIE-Lite-8K':_0x1cdc54(0x139),'ERNIE-Lite-8K-0922（原ERNIE-Bot-turbo-0922）':_0x1cdc54(0x133),'ERNIE-Lite-AppBuilder-8K':'ai_apaas_lite','ERNIE-Tiny-8K':_0x1cdc54(0x156),'ERNIE-Novel-8K':'ernie-novel-8k','Qianfan-Chinese-Llama-2-7B':_0x1cdc54(0x11d),'Qianfan-Chinese-Llama-2-13B':_0x1cdc54(0x126),'Qianfan-Chinese-Llama-2-70B':_0x1cdc54(0x163),'Meta-Llama-3-8B':'llama_3_8b','Meta-Llama-3-70B':_0x1cdc54(0x154),'Llama-2-7B-Chat':_0x1cdc54(0x164),'Llama-2-13B-Chat':'llama_2_13b','Llama-2-70B-Chat':_0x1cdc54(0x15b),'ChatGLM2-6B-32K':_0x1cdc54(0x142),'XuanYuan-70B-Chat-4bit':_0x1cdc54(0x13a),'Gemma-7B-It':_0x1cdc54(0x121),'Yi-34B-Chat':'yi_34b_chat','Mixtral-8x7B-Instruct':_0x1cdc54(0x153),'SQLCoder-7B':_0x1cdc54(0x14e),'CodeLlama-7B-Instruct':_0x1cdc54(0x130),'ChatLaw':_0x1cdc54(0x155),'Qianfan-BLOOMZ-7B-compressed':_0x1cdc54(0x13e),'BLOOMZ-7B':_0x1cdc54(0x12b),'AquilaChat-7B':'aquilachat_7b','Stable-Diffusion-XL':'sd_xl','Fuyu-8B':_0x1cdc54(0x15c),'bge-large-en':_0x1cdc54(0x151),'bge-large-zh':_0x1cdc54(0x15d),'tao-8k':'tao_8k','Embedding-V1':_0x1cdc54(0x15f),'bce-reranker-base':_0x1cdc54(0x15a),'tokenizer':_0x1cdc54(0x147),'Prompt模板':_0x1cdc54(0x150),'ERNIE-Character-Fiction-8K':'ernie-char-fiction-8k','ERNIE-4.0-Turbo-8K-Preview':_0x1cdc54(0x119),'ERNIE-3.5-8K-0701':_0x1cdc54(0x124),'Qianfan-Dynamic-8k':'qianfan-dynamic-8k'};return Object[_0x1cdc54(0x161)](_0x35b2be)[_0x1cdc54(0x144)](_0x2efecb=>{const _0x162d5a=_0x1cdc54;_0xc320a9[''+_0x2efecb[_0x162d5a(0x162)]()]=_0x35b2be[_0x2efecb];}),_0xc320a9;};function _0xb800(_0x1aba9b,_0x46c683){const _0x2716e0=_0x2716();return _0xb800=function(_0xb8000e,_0x28395c){_0xb8000e=_0xb8000e-0x118;let _0x4b1bc1=_0x2716e0[_0xb8000e];return _0x4b1bc1;},_0xb800(_0x1aba9b,_0x46c683);}function getAccessToken(_0x4b8cb1,_0x29ef56){const _0xf41f6=_0x1ee2e2;let _0x21ed57='https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id='+_0x4b8cb1+_0xf41f6(0x136)+_0x29ef56;return new Promise((_0x1a4e4c,_0x3ff64a)=>{const _0x286900=_0xf41f6;axios[_0x286900(0x160)](_0x21ed57)[_0x286900(0x148)](_0x509ea0=>{const _0x39ba2b=_0x286900;_0x1a4e4c(_0x509ea0[_0x39ba2b(0x146)][_0x39ba2b(0x11f)]);})[_0x286900(0x122)](_0x3ce3bd=>{const _0xdb8c17=_0x286900;common_1[_0xdb8c17(0x12a)][_0xdb8c17(0x152)](_0x3ce3bd[_0xdb8c17(0x141)],'[百度签名校验失败]');});});}exports[_0x1ee2e2(0x143)]=getAccessToken;function _0x2716(){const _0x28a2fe=['ernie_speed','message','chatglm2_6b_32k','getAccessToken','map','443646QjtQck','data','erniebot','then','20laDlhq','ernie-3.5-128k','ernie-4.0-8k-latest','completions','40cDvPiI','sqlcoder_7b','POST','info','bge_large_en','error','mixtral_8x7b_instruct','llama_3_70b','chatlaw','ernie-tiny-8k','ernie-4.0-8k-0329','completions_adv_pro','toString','bce_reranker_base','llama_2_70b','fuyu_8b','bge_large_zh','ernie-4.0-8k-preview','embedding-v1','post','keys','toLowerCase','qianfan_chinese_llama_2_70b','llama_2_7b','completions_pro','ernie-4.0-turbo-8k-preview','trim','692544uUKlWR','924695DaPrFZ','qianfan_chinese_llama_2_7b','ernie-3.5-8k-0613','access_token','split','gemma_7b_it','catch','log','ernie-3.5-8k-0701','?access_token=','qianfan_chinese_llama_2_13b','ernie-4.0-turbo-8k','ai_apaas','1394840dQMuLp','Logger','bloomz_7b1','@nestjs/common','stream','sendMessageFromBaidu','266673CoLdeg','codellama_7b_instruct','ernie-3.5-8k-preview','2145948bnfsjg','eb-instant','15RApfSE','text','&client_secret=','11CBLuNu','ernie-char-8k','ernie-lite-8k','xuanyuan_70b_chat','14hgdmKw','ernie-4.0-8k-0613','application/json','qianfan_bloomz_7b_compressed','743517swjKkc'];_0x2716=function(){return _0x28a2fe;};return _0x2716();}function sendMessageFromBaidu(_0x3f7bbd,{onProgress:_0x59f13a,accessToken:_0x124c10,model:_0x1a5af1,temperature:temperature=0.95}){const _0x4e11dc=_0x1ee2e2,_0x1f2b4c=getApiModelMaps()[_0x1a5af1['trim']()[_0x4e11dc(0x162)]()];return new Promise((_0x5cae06,_0x1fb66b)=>{const _0x543335=_0x4e11dc,_0x153e72='https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/'+_0x1f2b4c+_0x543335(0x125)+_0x124c10,_0x528cc8={'method':_0x543335(0x14f),'url':_0x153e72,'responseType':_0x543335(0x12d),'headers':{'Content-Type':_0x543335(0x13d)},'data':{'stream':!![],'messages':_0x3f7bbd}};axios(_0x528cc8)[_0x543335(0x148)](_0x4bddbd=>{const _0x508d90=_0x543335,_0x213f05=_0x4bddbd[_0x508d90(0x146)];let _0xd48e9a={},_0x585da9='',_0x3a25e1='';_0x213f05['on'](_0x508d90(0x146),_0x67ea45=>{const _0x5283fa=_0x508d90,_0x2731bf=_0x67ea45[_0x5283fa(0x159)]()[_0x5283fa(0x120)]('\x0a\x0a')['filter'](_0x2ab050=>_0x2ab050[_0x5283fa(0x11a)]()!=='');for(const _0x1bb712 of _0x2731bf){const _0x19acfd=_0x1bb712['replace']('data:\x20','');try{const _0x148f0c=_0x585da9+_0x19acfd,_0x1ce520=JSON['parse'](_0x148f0c);_0x585da9='';const {is_end:_0x592b0b,result:_0x3a1cb2}=_0x1ce520;_0x3a1cb2&&(_0x3a25e1+=_0x3a1cb2),_0x592b0b&&(_0xd48e9a=_0x1ce520,_0xd48e9a[_0x5283fa(0x135)]=_0x3a25e1),_0x59f13a(_0x1ce520);}catch(_0x17a872){_0x585da9=_0x19acfd;}}}),_0x213f05['on']('end',()=>{_0x3a25e1='',_0x585da9='',_0x5cae06(_0xd48e9a);});})[_0x543335(0x122)](_0x69ec3a=>{const _0x4c7521=_0x543335;console[_0x4c7521(0x123)](_0x69ec3a),_0x1fb66b(new Error(_0x69ec3a));});});}exports[_0x1ee2e2(0x12e)]=sendMessageFromBaidu;