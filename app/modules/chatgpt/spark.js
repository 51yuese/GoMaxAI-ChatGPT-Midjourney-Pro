'use strict';const _0x5406e9=_0x3c1c;(function(_0x2daf5e,_0x32ec4d){const _0x1b55f5=_0x3c1c,_0x2d29d7=_0x2daf5e();while(!![]){try{const _0x2a5506=-parseInt(_0x1b55f5(0x17a))/0x1*(-parseInt(_0x1b55f5(0x18b))/0x2)+parseInt(_0x1b55f5(0x17e))/0x3*(parseInt(_0x1b55f5(0x189))/0x4)+parseInt(_0x1b55f5(0x187))/0x5+-parseInt(_0x1b55f5(0x183))/0x6*(-parseInt(_0x1b55f5(0x198))/0x7)+parseInt(_0x1b55f5(0x17c))/0x8*(parseInt(_0x1b55f5(0x18d))/0x9)+-parseInt(_0x1b55f5(0x177))/0xa*(parseInt(_0x1b55f5(0x194))/0xb)+-parseInt(_0x1b55f5(0x185))/0xc;if(_0x2a5506===_0x32ec4d)break;else _0x2d29d7['push'](_0x2d29d7['shift']());}catch(_0x1cf26c){_0x2d29d7['push'](_0x2d29d7['shift']());}}}(_0x42a8,0x2b465));function _0x42a8(){const _0x3273ab=['then','716geCWAG','chat.completion.chunk','74259DHaxOj','forEach','filter','assistant','[DONE]','https://spark-api-open.xf-yun.com/v1/chat/completions','delta','2343hiFyRe','end','axios','created','1253kJnETc','data:\x20','parse','log','split','usage','model','data','1810oOfxEr','trim','indexOf','797cMSqUq','sendMessageFromSpark','296YUGtWA','text','2163OVZBtj','toString','Bearer\x20','__esModule','content','7626yiXaCs','defineProperty','14755692qfucCY','choices','1492745RrCVvY','stream','1824iwjZVd'];_0x42a8=function(){return _0x3273ab;};return _0x42a8();}function _0x3c1c(_0x528549,_0x4975c9){const _0x42a8df=_0x42a8();return _0x3c1c=function(_0x3c1cf4,_0x3c28cd){_0x3c1cf4=_0x3c1cf4-0x176;let _0x5ad125=_0x42a8df[_0x3c1cf4];return _0x5ad125;},_0x3c1c(_0x528549,_0x4975c9);}Object[_0x5406e9(0x184)](exports,_0x5406e9(0x181),{'value':!![]}),exports[_0x5406e9(0x17b)]=void 0x0;const axios=require(_0x5406e9(0x196));async function sendMessageFromSpark(_0xd6dfdb,{onProgress:_0x36c0a3,key:_0x9a57c3,model:_0x20cecd,temperature:temperature=0.95}){return new Promise((_0x503394,_0x2a1090)=>{const _0x5787ec=_0x3c1c,_0x38a4fe=_0x5787ec(0x192),_0x1cfe48={'method':'POST','url':_0x38a4fe,'responseType':_0x5787ec(0x188),'headers':{'Content-Type':'application/json','Authorization':_0x5787ec(0x180)+_0x9a57c3},'data':{'model':_0x20cecd,'messages':_0xd6dfdb,'temperature':temperature,'stream':!![]}};axios(_0x1cfe48)[_0x5787ec(0x18a)](_0x1fda6d=>{const _0x3b33d2=_0x5787ec,_0x6432d1=_0x1fda6d[_0x3b33d2(0x176)];let _0x1b8aee,_0x1872a3='';_0x6432d1['on'](_0x3b33d2(0x176),_0x10fb7d=>{const _0x45091a=_0x3b33d2,_0x1f33e2=_0x10fb7d[_0x45091a(0x17f)]()[_0x45091a(0x19c)]('\x0a')[_0x45091a(0x18f)](_0x27ecef=>_0x27ecef[_0x45091a(0x178)]()!==''),_0x455b85=_0x1f33e2;console[_0x45091a(0x19b)](_0x455b85);if(!_0x455b85)return;let _0x42565c=![],_0x421391='',_0x525525='',_0x346056='',_0x1070c6=null;_0x455b85[_0x45091a(0x18e)](_0x5e839a=>{const _0x2f805d=_0x45091a;if(_0x5e839a[_0x2f805d(0x179)](_0x2f805d(0x191))>-0x1)_0x42565c=!![];else{const _0x5444d2=JSON[_0x2f805d(0x19a)](_0x5e839a['replace'](_0x2f805d(0x199),''));_0x421391=_0x5444d2['id'],_0x525525=_0x5444d2[_0x2f805d(0x197)],_0x346056=_0x5444d2[_0x2f805d(0x19e)],_0x5444d2[_0x2f805d(0x19d)]&&(_0x1070c6=_0x5444d2['usage']),_0x5444d2[_0x2f805d(0x186)][_0x2f805d(0x18e)](_0x14fea5=>{const _0x57f065=_0x2f805d;_0x1872a3+=_0x14fea5[_0x57f065(0x193)][_0x57f065(0x182)];});}});let _0x3b40ec={'role':_0x45091a(0x190),'id':_0x421391,'text':_0x1872a3,'delta':_0x1872a3,'detail':{'choices':[{'delta':{'content':_0x1872a3,'role':_0x45091a(0x190)},'index':0x0}],'created':_0x525525,'id':_0x421391,'model':_0x346056,'object':_0x45091a(0x18c),'usage':_0x1070c6}};_0x42565c&&(_0x3b40ec['is_end']=![],_0x1b8aee=_0x3b40ec,_0x1b8aee[_0x45091a(0x17d)]=_0x1872a3),_0x36c0a3(_0x3b40ec);}),_0x6432d1['on'](_0x3b33d2(0x195),()=>{_0x503394(_0x1b8aee),_0x1872a3='';});})['catch'](_0x5812e5=>{const _0x6dc0ef=_0x5787ec;console[_0x6dc0ef(0x19b)]('error:\x20',_0x5812e5);});});}exports['sendMessageFromSpark']=sendMessageFromSpark;