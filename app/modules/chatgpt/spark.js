'use strict';const _0x53144e=_0x30b0;(function(_0x239c2b,_0x13cf46){const _0x47171b=_0x30b0,_0x746735=_0x239c2b();while(!![]){try{const _0x9c6b79=-parseInt(_0x47171b(0x1da))/0x1+-parseInt(_0x47171b(0x1eb))/0x2+-parseInt(_0x47171b(0x1e4))/0x3*(parseInt(_0x47171b(0x1f3))/0x4)+-parseInt(_0x47171b(0x1e6))/0x5+parseInt(_0x47171b(0x1d6))/0x6*(parseInt(_0x47171b(0x1db))/0x7)+-parseInt(_0x47171b(0x1e7))/0x8+parseInt(_0x47171b(0x1df))/0x9;if(_0x9c6b79===_0x13cf46)break;else _0x746735['push'](_0x746735['shift']());}catch(_0x51c0ff){_0x746735['push'](_0x746735['shift']());}}}(_0x1de3,0x2f9c0));function _0x30b0(_0x3fdef7,_0x24af56){const _0x1de3cf=_0x1de3();return _0x30b0=function(_0x30b0d9,_0x241352){_0x30b0d9=_0x30b0d9-0x1cf;let _0x163b3e=_0x1de3cf[_0x30b0d9];return _0x163b3e;},_0x30b0(_0x3fdef7,_0x24af56);}Object[_0x53144e(0x1d2)](exports,_0x53144e(0x1cf),{'value':!![]}),exports[_0x53144e(0x1e0)]=void 0x0;const axios=require(_0x53144e(0x1ed));function _0x1de3(){const _0x491e3e=['137562ljSGAi','1335572qAuiUJ','Bearer\x20','stream','choices','6924654oXvCKJ','sendMessageFromSpark','log','end','then','21UiLfWb','POST','1274950AzVjVP','322400mXWtrQ','chat.completion.chunk','application/json','https://spark-api-open.xf-yun.com/v1/chat/completions','28286GzaEUf','replace','axios','data','text','usage','is_end','split','181828sRsuiK','__esModule','assistant','[DONE]','defineProperty','forEach','trim','toString','6zfRBRZ','filter','indexOf','model'];_0x1de3=function(){return _0x491e3e;};return _0x1de3();}async function sendMessageFromSpark(_0x5c145a,{onProgress:_0x3fc483,key:_0x536e11,model:_0x54f11f,temperature:temperature=0.95}){return new Promise((_0xeaac25,_0x3eab8b)=>{const _0xaf220a=_0x30b0,_0x26cb5c=_0xaf220a(0x1ea),_0x2870e3={'method':_0xaf220a(0x1e5),'url':_0x26cb5c,'responseType':_0xaf220a(0x1dd),'headers':{'Content-Type':_0xaf220a(0x1e9),'Authorization':_0xaf220a(0x1dc)+_0x536e11},'data':{'model':_0x54f11f,'messages':_0x5c145a,'temperature':temperature,'stream':!![]}};axios(_0x2870e3)[_0xaf220a(0x1e3)](_0x14ccde=>{const _0x51cde0=_0xaf220a,_0x2e0a5f=_0x14ccde['data'];let _0x41bf1a,_0x19f6c8='';_0x2e0a5f['on'](_0x51cde0(0x1ee),_0x3ed755=>{const _0x2cf1e8=_0x51cde0,_0x13e75d=_0x3ed755[_0x2cf1e8(0x1d5)]()[_0x2cf1e8(0x1f2)]('\x0a')[_0x2cf1e8(0x1d7)](_0x55a094=>_0x55a094[_0x2cf1e8(0x1d4)]()!==''),_0x3935e4=_0x13e75d;console[_0x2cf1e8(0x1e1)](_0x3935e4);if(!_0x3935e4)return;let _0x238a54=![],_0x4b55ca='',_0x1cbdc5='',_0xbf43dd='',_0x14ac4b=null;_0x3935e4[_0x2cf1e8(0x1d3)](_0xad5bd1=>{const _0x3d83d1=_0x2cf1e8;if(_0xad5bd1[_0x3d83d1(0x1d8)](_0x3d83d1(0x1d1))>-0x1)_0x238a54=!![];else{const _0x64cc19=JSON['parse'](_0xad5bd1[_0x3d83d1(0x1ec)]('data:\x20',''));_0x4b55ca=_0x64cc19['id'],_0x1cbdc5=_0x64cc19['created'],_0xbf43dd=_0x64cc19[_0x3d83d1(0x1d9)],_0x64cc19[_0x3d83d1(0x1f0)]&&(_0x14ac4b=_0x64cc19[_0x3d83d1(0x1f0)]),_0x64cc19[_0x3d83d1(0x1de)][_0x3d83d1(0x1d3)](_0x21d404=>{_0x19f6c8+=_0x21d404['delta']['content'];});}});let _0xd3a680={'role':_0x2cf1e8(0x1d0),'id':_0x4b55ca,'text':_0x19f6c8,'delta':_0x19f6c8,'detail':{'choices':[{'delta':{'content':_0x19f6c8,'role':_0x2cf1e8(0x1d0)},'index':0x0}],'created':_0x1cbdc5,'id':_0x4b55ca,'model':_0xbf43dd,'object':_0x2cf1e8(0x1e8),'usage':_0x14ac4b}};_0x238a54&&(_0xd3a680[_0x2cf1e8(0x1f1)]=![],_0x41bf1a=_0xd3a680,_0x41bf1a[_0x2cf1e8(0x1ef)]=_0x19f6c8),_0x3fc483(_0xd3a680);}),_0x2e0a5f['on'](_0x51cde0(0x1e2),()=>{_0xeaac25(_0x41bf1a),_0x19f6c8='';});})['catch'](_0x416a8=>{const _0x26cff2=_0xaf220a;console[_0x26cff2(0x1e1)]('error:\x20',_0x416a8);});});}exports[_0x53144e(0x1e0)]=sendMessageFromSpark;