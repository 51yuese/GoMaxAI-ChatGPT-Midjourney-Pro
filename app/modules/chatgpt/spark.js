'use strict';const _0x23ab23=_0x286e;(function(_0x313587,_0x330e2c){const _0x4d0e23=_0x286e,_0x1e88e8=_0x313587();while(!![]){try{const _0xdca1e9=parseInt(_0x4d0e23(0xf9))/0x1*(parseInt(_0x4d0e23(0x106))/0x2)+parseInt(_0x4d0e23(0xf8))/0x3*(parseInt(_0x4d0e23(0x103))/0x4)+-parseInt(_0x4d0e23(0xf3))/0x5*(parseInt(_0x4d0e23(0x104))/0x6)+parseInt(_0x4d0e23(0xf5))/0x7+-parseInt(_0x4d0e23(0xf2))/0x8*(-parseInt(_0x4d0e23(0x101))/0x9)+parseInt(_0x4d0e23(0xf1))/0xa*(parseInt(_0x4d0e23(0xfb))/0xb)+-parseInt(_0x4d0e23(0x10d))/0xc;if(_0xdca1e9===_0x330e2c)break;else _0x1e88e8['push'](_0x1e88e8['shift']());}catch(_0x222782){_0x1e88e8['push'](_0x1e88e8['shift']());}}}(_0x283d,0x268c0));function _0x283d(){const _0x29fa02=['usage','1440341QVfkYl','SparkClient','includes','303819FgJSaU','477JXNOak','sendMessageFromXunFei','121hTBBpX','chatAsync','ChatMessage','V1_5','string','content','963sjpUOK','ModelVersion','8FFlwKZ','914568uyiDmG','spark','1078HVtakg','log','map','V1.5','getModel','spark-node-sdk','text','7382916tFOcds','uasge','__esModule','137960oVBsfU','8104loiDrf','5YzKehI'];_0x283d=function(){return _0x29fa02;};return _0x283d();}Object['defineProperty'](exports,_0x23ab23(0xf0),{'value':!![]}),exports['XunFeiSpark']=void 0x0;const spark_node_sdk_1=require(_0x23ab23(0x10b));function _0x286e(_0x1ea601,_0x5842e1){const _0x283dfe=_0x283d();return _0x286e=function(_0x286e96,_0x3f62c4){_0x286e96=_0x286e96-0xf0;let _0x4adf09=_0x283dfe[_0x286e96];return _0x4adf09;},_0x286e(_0x1ea601,_0x5842e1);}class XunFeiSpark{constructor(_0x5144e4){const _0xbf4936=_0x23ab23;this['message']={},this['getModel']=_0x5bb2f8=>{const _0x27acb9=_0x286e;return _0x5bb2f8[_0x27acb9(0xf7)](_0x27acb9(0x109))?spark_node_sdk_1[_0x27acb9(0x102)][_0x27acb9(0xfe)]:_0x5bb2f8[_0x27acb9(0xf7)]('V2.0')?spark_node_sdk_1[_0x27acb9(0x102)]['V2']:spark_node_sdk_1['ModelVersion']['V3'];};const {appid:_0x4fddab,secret:_0xf55d7,key:_0x10ee4e}=_0x5144e4;this[_0xbf4936(0x105)]=new spark_node_sdk_1[(_0xbf4936(0xf6))](_0x4fddab,_0x10ee4e,_0xf55d7);}async[_0x23ab23(0xfa)](_0x23f6a4,_0x1f9e2a){const _0x52fb39=_0x23ab23;let _0x4d2dac={'usage':{'completion_tokens':0x0,'prompt_tokens':0x0,'question_tokens':0x0,'total_tokens':0x0},'text':''},_0xf01211='';const {temperature:_0x39577f,chatId:_0x529a89,model:_0x5d25ae,onProgress:_0x1f74f,abortController:_0x114d4a}=_0x1f9e2a,_0x555564=this[_0x52fb39(0x10a)](_0x5d25ae);let _0x46dc94=typeof _0x23f6a4===_0x52fb39(0xff)?[spark_node_sdk_1[_0x52fb39(0xfd)]['fromUser'](_0x23f6a4)]:_0x23f6a4[_0x52fb39(0x108)](_0x409efc=>spark_node_sdk_1[_0x52fb39(0xfd)]['fromUser'](_0x409efc[_0x52fb39(0x100)]));return await this[_0x52fb39(0x105)][_0x52fb39(0xfc)](_0x555564,_0x46dc94,_0x2f227a=>{const _0x2a0eef=_0x52fb39;try{_0x2f227a&&(_0xf01211+=_0x2f227a[_0x2a0eef(0x10c)]),_0x4d2dac[_0x2a0eef(0xf4)]=_0x2f227a[_0x2a0eef(0x10e)],_0x4d2dac['text']=_0xf01211,_0x1f74f(_0x4d2dac);}catch(_0x268e5b){console[_0x2a0eef(0x107)](_0x268e5b),_0x1f74f(_0x4d2dac);}},{'temperature':_0x39577f||0.5,'max_tokens':0x800,'top_k':0x4,'chat_id':null},_0x529a89,_0x114d4a),{'text':_0xf01211,'usage':_0x4d2dac[_0x52fb39(0xf4)]};}}exports['XunFeiSpark']=XunFeiSpark;