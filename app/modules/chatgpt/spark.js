'use strict';function _0x38c1(){const _0x5c8404=['4152900KmiDqc','map','text','spark-node-sdk','3806133mAQfiA','V1.5','V2.0','string','usage','includes','949948vEPPgM','fromUser','1557656pDYmsc','message','7SqscRO','chatAsync','XunFeiSpark','ModelVersion','getModel','6CrYddJ','__esModule','4717345IPoQsz','85770mMVqyC','737140lzRtzy','ChatMessage','V1_5','spark','396Ifhcgk'];_0x38c1=function(){return _0x5c8404;};return _0x38c1();}const _0x2e4f25=_0xd44a;(function(_0x51e386,_0x555db2){const _0x4b6257=_0xd44a,_0x440cc1=_0x51e386();while(!![]){try{const _0xa6f07e=parseInt(_0x4b6257(0x127))/0x1+parseInt(_0x4b6257(0x133))/0x2+parseInt(_0x4b6257(0x121))/0x3+parseInt(_0x4b6257(0x11d))/0x4+parseInt(_0x4b6257(0x132))/0x5*(parseInt(_0x4b6257(0x130))/0x6)+parseInt(_0x4b6257(0x12b))/0x7*(-parseInt(_0x4b6257(0x129))/0x8)+parseInt(_0x4b6257(0x11c))/0x9*(-parseInt(_0x4b6257(0x134))/0xa);if(_0xa6f07e===_0x555db2)break;else _0x440cc1['push'](_0x440cc1['shift']());}catch(_0x1b577b){_0x440cc1['push'](_0x440cc1['shift']());}}}(_0x38c1,0xc48fb));Object['defineProperty'](exports,_0x2e4f25(0x131),{'value':!![]}),exports[_0x2e4f25(0x12d)]=void 0x0;const spark_node_sdk_1=require(_0x2e4f25(0x120));function _0xd44a(_0x4dc40e,_0x489213){const _0x38c134=_0x38c1();return _0xd44a=function(_0xd44a0d,_0xbf48a2){_0xd44a0d=_0xd44a0d-0x11b;let _0x58df42=_0x38c134[_0xd44a0d];return _0x58df42;},_0xd44a(_0x4dc40e,_0x489213);}class XunFeiSpark{constructor(_0x4ab118){const _0x722ce1=_0x2e4f25;this[_0x722ce1(0x12a)]={},this[_0x722ce1(0x12f)]=_0x5b2b69=>{const _0x42ac7c=_0x722ce1;return _0x5b2b69[_0x42ac7c(0x126)](_0x42ac7c(0x122))?spark_node_sdk_1[_0x42ac7c(0x12e)][_0x42ac7c(0x136)]:_0x5b2b69[_0x42ac7c(0x126)](_0x42ac7c(0x123))?spark_node_sdk_1[_0x42ac7c(0x12e)]['V2']:spark_node_sdk_1[_0x42ac7c(0x12e)]['V3'];};const {appid:_0xebf9e0,secret:_0x3d8199,key:_0x519c1a}=_0x4ab118;this[_0x722ce1(0x11b)]=new spark_node_sdk_1['SparkClient'](_0xebf9e0,_0x519c1a,_0x3d8199);}async['sendMessageFromXunFei'](_0x4ddb3e,_0x462078){const _0x155b07=_0x2e4f25;let _0x2be326={'usage':{'completion_tokens':0x0,'prompt_tokens':0x0,'question_tokens':0x0,'total_tokens':0x0},'text':''},_0x3a8617='';const {temperature:_0x1f6210,chatId:_0x4897fb,model:_0x46c0cd,onProgress:_0x48e9f4,abortController:_0x4401a1}=_0x462078,_0x573c87=this[_0x155b07(0x12f)](_0x46c0cd);let _0x39e586=typeof _0x4ddb3e===_0x155b07(0x124)?[spark_node_sdk_1[_0x155b07(0x135)][_0x155b07(0x128)](_0x4ddb3e)]:_0x4ddb3e[_0x155b07(0x11e)](_0x2713af=>spark_node_sdk_1[_0x155b07(0x135)]['fromUser'](_0x2713af['content']));return await this[_0x155b07(0x11b)][_0x155b07(0x12c)](_0x573c87,_0x39e586,_0x21f2a9=>{const _0x336df2=_0x155b07;try{_0x21f2a9&&(_0x3a8617+=_0x21f2a9[_0x336df2(0x11f)]),_0x2be326[_0x336df2(0x125)]=_0x21f2a9['uasge'],_0x2be326['text']=_0x3a8617,_0x48e9f4(_0x2be326);}catch(_0x24637b){console['log'](_0x24637b),_0x48e9f4(_0x2be326);}},{'temperature':_0x1f6210||0.5,'max_tokens':0x800,'top_k':0x4,'chat_id':null},_0x4897fb,_0x4401a1),{'text':_0x3a8617,'usage':_0x2be326[_0x155b07(0x125)]};}}exports['XunFeiSpark']=XunFeiSpark;