'use strict';const _0x56b3a2=_0x4093;(function(_0x192ae3,_0x91fdf3){const _0x5cab4c=_0x4093,_0x15bb15=_0x192ae3();while(!![]){try{const _0x244651=-parseInt(_0x5cab4c(0x1a7))/0x1*(-parseInt(_0x5cab4c(0x1b4))/0x2)+parseInt(_0x5cab4c(0x198))/0x3*(-parseInt(_0x5cab4c(0x19c))/0x4)+-parseInt(_0x5cab4c(0x19e))/0x5*(parseInt(_0x5cab4c(0x19b))/0x6)+-parseInt(_0x5cab4c(0x193))/0x7*(parseInt(_0x5cab4c(0x195))/0x8)+-parseInt(_0x5cab4c(0x191))/0x9+-parseInt(_0x5cab4c(0x1a2))/0xa*(parseInt(_0x5cab4c(0x19f))/0xb)+parseInt(_0x5cab4c(0x1ad))/0xc;if(_0x244651===_0x91fdf3)break;else _0x15bb15['push'](_0x15bb15['shift']());}catch(_0x461995){_0x15bb15['push'](_0x15bb15['shift']());}}}(_0x3e4b,0x56323));function _0x3e4b(){const _0x9dfea9=['data','end','defineProperty','filter','691202lttIFN','model','then','1489464fBYGuo','error:\x20','7QHiYPJ','text','918664nZpNlD','stream','choices','26913JJYLpj','data:\x20','created','3638946vcdgpM','300kKilUW','parse','5DvCaIQ','132nytiqU','chat.completion.chunk','catch','264580BNAKoN','assistant','log','sendMessageFromSpark','is_end','1mUmgSA','delta','usage','replace','[DONE]','content','22615188YJeSZy','axios','forEach'];_0x3e4b=function(){return _0x9dfea9;};return _0x3e4b();}Object[_0x56b3a2(0x1b2)](exports,'__esModule',{'value':!![]}),exports[_0x56b3a2(0x1a5)]=void 0x0;const axios=require(_0x56b3a2(0x1ae));function _0x4093(_0x5aa79b,_0x41cc28){const _0x3e4b80=_0x3e4b();return _0x4093=function(_0x4093be,_0x2d2229){_0x4093be=_0x4093be-0x18f;let _0x1e0f32=_0x3e4b80[_0x4093be];return _0x1e0f32;},_0x4093(_0x5aa79b,_0x41cc28);}async function sendMessageFromSpark(_0xa216ab,{onProgress:_0x981f71,key:_0x56924e,model:_0x3f6399,temperature:temperature=0.95}){return new Promise((_0xdfb37d,_0x21a271)=>{const _0xd64b57=_0x4093,_0x40b707='https://spark-api-open.xf-yun.com/v1/chat/completions',_0x3102d9={'method':'POST','url':_0x40b707,'responseType':_0xd64b57(0x196),'headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+_0x56924e},'data':{'model':_0x3f6399,'messages':_0xa216ab,'temperature':temperature,'stream':!![]}};axios(_0x3102d9)[_0xd64b57(0x190)](_0x2ca378=>{const _0x14e495=_0xd64b57,_0x401084=_0x2ca378[_0x14e495(0x1b0)];let _0x3e4668,_0xe0bf71='';_0x401084['on'](_0x14e495(0x1b0),_0x1fb3ff=>{const _0x3eb305=_0x14e495,_0x4133f3=_0x1fb3ff['toString']()['split']('\x0a')[_0x3eb305(0x1b3)](_0x19d051=>_0x19d051['trim']()!==''),_0x446cb0=_0x4133f3;console[_0x3eb305(0x1a4)](_0x446cb0);if(!_0x446cb0)return;let _0x98b977=![],_0x2b0165='',_0x212afb='',_0x2b036a='',_0x325d99=null;_0x446cb0['forEach'](_0x2eab9b=>{const _0x2470e4=_0x3eb305;if(_0x2eab9b['indexOf'](_0x2470e4(0x1ab))>-0x1)_0x98b977=!![];else{const _0x31c636=JSON[_0x2470e4(0x19d)](_0x2eab9b[_0x2470e4(0x1aa)](_0x2470e4(0x199),''));_0x2b0165=_0x31c636['id'],_0x212afb=_0x31c636[_0x2470e4(0x19a)],_0x2b036a=_0x31c636[_0x2470e4(0x18f)],_0x31c636['usage']&&(_0x325d99=_0x31c636[_0x2470e4(0x1a9)]),_0x31c636[_0x2470e4(0x197)][_0x2470e4(0x1af)](_0x4b560c=>{const _0x2bdce4=_0x2470e4;_0xe0bf71+=_0x4b560c[_0x2bdce4(0x1a8)][_0x2bdce4(0x1ac)];});}});let _0x2b0305={'role':_0x3eb305(0x1a3),'id':_0x2b0165,'text':_0xe0bf71,'delta':_0xe0bf71,'detail':{'choices':[{'delta':{'content':_0xe0bf71,'role':_0x3eb305(0x1a3)},'index':0x0}],'created':_0x212afb,'id':_0x2b0165,'model':_0x2b036a,'object':_0x3eb305(0x1a0),'usage':_0x325d99}};_0x98b977&&(_0x2b0305[_0x3eb305(0x1a6)]=![],_0x3e4668=_0x2b0305,_0x3e4668[_0x3eb305(0x194)]=_0xe0bf71),_0x981f71(_0x2b0305);}),_0x401084['on'](_0x14e495(0x1b1),()=>{_0xdfb37d(_0x3e4668),_0xe0bf71='';});})[_0xd64b57(0x1a1)](_0x30d273=>{const _0x1a548b=_0xd64b57;console[_0x1a548b(0x1a4)](_0x1a548b(0x192),_0x30d273);});});}exports['sendMessageFromSpark']=sendMessageFromSpark;