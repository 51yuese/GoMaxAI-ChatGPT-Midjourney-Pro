'use strict';const _0x1dfd02=_0x3bc3;(function(_0x89fbdb,_0x1437c4){const _0x5b9a5d=_0x3bc3,_0xd7b3cb=_0x89fbdb();while(!![]){try{const _0x5fd88c=-parseInt(_0x5b9a5d(0x138))/0x1*(parseInt(_0x5b9a5d(0x139))/0x2)+parseInt(_0x5b9a5d(0x12a))/0x3+parseInt(_0x5b9a5d(0x121))/0x4*(parseInt(_0x5b9a5d(0x130))/0x5)+-parseInt(_0x5b9a5d(0x12c))/0x6+parseInt(_0x5b9a5d(0x13b))/0x7+parseInt(_0x5b9a5d(0x11b))/0x8+-parseInt(_0x5b9a5d(0x136))/0x9*(parseInt(_0x5b9a5d(0x11d))/0xa);if(_0x5fd88c===_0x1437c4)break;else _0xd7b3cb['push'](_0xd7b3cb['shift']());}catch(_0x39db8f){_0xd7b3cb['push'](_0xd7b3cb['shift']());}}}(_0x3f17,0xde87e));function _0x3bc3(_0x12c2a7,_0x57f19c){const _0x3f1720=_0x3f17();return _0x3bc3=function(_0x3bc365,_0x101e1c){_0x3bc365=_0x3bc365-0x115;let _0x2426a6=_0x3f1720[_0x3bc365];return _0x2426a6;},_0x3bc3(_0x12c2a7,_0x57f19c);}function _0x3f17(){const _0x504985=['1772079nRpHsT','usage','8012220bqXnqi','[DONE]','defineProperty','is_end','1479850iBBNmE','data:\x20','https://spark-api-open.xf-yun.com/v1/chat/completions','sendMessageFromSpark','catch','delta','3123rWbuRb','filter','35zSusQw','840cWpggC','model','7817117NMwzXh','assistant','content','created','replace','Bearer\x20','chat.completion.chunk','3461624QSUnBr','POST','5030hPaLqt','parse','split','trim','4KsVinL','forEach','indexOf','log','end','text','application/json','choices','data'];_0x3f17=function(){return _0x504985;};return _0x3f17();}Object[_0x1dfd02(0x12e)](exports,'__esModule',{'value':!![]}),exports[_0x1dfd02(0x133)]=void 0x0;const axios=require('axios');async function sendMessageFromSpark(_0x1ddf5e,{onProgress:_0x530363,key:_0x122ed0,model:_0x4c6113,temperature:temperature=0.95}){return new Promise((_0x20b1c9,_0x42ff99)=>{const _0x48be32=_0x3bc3,_0x2774fb=_0x48be32(0x132),_0x267a8d={'method':_0x48be32(0x11c),'url':_0x2774fb,'responseType':'stream','headers':{'Content-Type':_0x48be32(0x127),'Authorization':_0x48be32(0x119)+_0x122ed0},'data':{'model':_0x4c6113,'messages':_0x1ddf5e,'temperature':temperature,'stream':!![]}};axios(_0x267a8d)['then'](_0x2d684c=>{const _0x370279=_0x48be32,_0x4afbf5=_0x2d684c[_0x370279(0x129)];let _0x1b8f15,_0x2959e7='';_0x4afbf5['on'](_0x370279(0x129),_0x32aa73=>{const _0x3b1a08=_0x370279,_0x8c1fc8=_0x32aa73['toString']()[_0x3b1a08(0x11f)]('\x0a')[_0x3b1a08(0x137)](_0x2e7831=>_0x2e7831[_0x3b1a08(0x120)]()!==''),_0x38ef5a=_0x8c1fc8;console[_0x3b1a08(0x124)](_0x38ef5a);if(!_0x38ef5a)return;let _0x1cbc02=![],_0x19d84e='',_0x55bcc5='',_0x2ea899='',_0x253d72=null;_0x38ef5a[_0x3b1a08(0x122)](_0xcd2508=>{const _0x2f57de=_0x3b1a08;if(_0xcd2508[_0x2f57de(0x123)](_0x2f57de(0x12d))>-0x1)_0x1cbc02=!![];else{const _0x4f5f5c=JSON[_0x2f57de(0x11e)](_0xcd2508[_0x2f57de(0x118)](_0x2f57de(0x131),''));_0x19d84e=_0x4f5f5c['id'],_0x55bcc5=_0x4f5f5c[_0x2f57de(0x117)],_0x2ea899=_0x4f5f5c[_0x2f57de(0x13a)],_0x4f5f5c['usage']&&(_0x253d72=_0x4f5f5c[_0x2f57de(0x12b)]),_0x4f5f5c[_0x2f57de(0x128)]['forEach'](_0x1bc328=>{const _0x337947=_0x2f57de;_0x2959e7+=_0x1bc328[_0x337947(0x135)][_0x337947(0x116)];});}});let _0x16f3fb={'role':_0x3b1a08(0x115),'id':_0x19d84e,'text':_0x2959e7,'delta':_0x2959e7,'detail':{'choices':[{'delta':{'content':_0x2959e7,'role':_0x3b1a08(0x115)},'index':0x0}],'created':_0x55bcc5,'id':_0x19d84e,'model':_0x2ea899,'object':_0x3b1a08(0x11a),'usage':_0x253d72}};_0x1cbc02&&(_0x16f3fb[_0x3b1a08(0x12f)]=![],_0x1b8f15=_0x16f3fb,_0x1b8f15[_0x3b1a08(0x126)]=_0x2959e7),_0x530363(_0x16f3fb);}),_0x4afbf5['on'](_0x370279(0x125),()=>{_0x20b1c9(_0x1b8f15),_0x2959e7='';});})[_0x48be32(0x134)](_0x25774f=>{const _0x27acab=_0x48be32;console[_0x27acab(0x124)]('error:\x20',_0x25774f);});});}exports[_0x1dfd02(0x133)]=sendMessageFromSpark;