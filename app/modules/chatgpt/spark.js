'use strict';function _0x21ff(_0x3ba7a0,_0x15f9ca){const _0x3f2458=_0x3f24();return _0x21ff=function(_0x21ff5c,_0x1077fe){_0x21ff5c=_0x21ff5c-0x1bb;let _0x1bc2c6=_0x3f2458[_0x21ff5c];return _0x1bc2c6;},_0x21ff(_0x3ba7a0,_0x15f9ca);}function _0x3f24(){const _0x4602e7=['application/json','sendMessageFromSpark','indexOf','58dEWmnB','5149900WNqoIP','6244784uIaTwI','data','delta','then','split','1343889lFFFXY','Bearer\x20','stream','assistant','POST','filter','forEach','catch','[DONE]','text','chat.completion.chunk','3VGwCIn','data:\x20','5449zAdLSb','4601784uYcjFg','content','parse','is_end','end','choices','3099228zqjDsL','axios','__esModule','error:\x20','https://spark-api-open.xf-yun.com/v1/chat/completions','log','usage','4114719jIPhRa'];_0x3f24=function(){return _0x4602e7;};return _0x3f24();}const _0x58502e=_0x21ff;(function(_0x581363,_0x45dbbe){const _0x2c52ec=_0x21ff,_0x417f1e=_0x581363();while(!![]){try{const _0x342bbb=parseInt(_0x2c52ec(0x1dd))/0x1*(-parseInt(_0x2c52ec(0x1c9))/0x2)+parseInt(_0x2c52ec(0x1db))/0x3*(-parseInt(_0x2c52ec(0x1be))/0x4)+parseInt(_0x2c52ec(0x1ca))/0x5+parseInt(_0x2c52ec(0x1de))/0x6+parseInt(_0x2c52ec(0x1c5))/0x7+-parseInt(_0x2c52ec(0x1cb))/0x8+-parseInt(_0x2c52ec(0x1d0))/0x9;if(_0x342bbb===_0x45dbbe)break;else _0x417f1e['push'](_0x417f1e['shift']());}catch(_0x503e8c){_0x417f1e['push'](_0x417f1e['shift']());}}}(_0x3f24,0x7f71e));Object['defineProperty'](exports,_0x58502e(0x1c0),{'value':!![]}),exports['sendMessageFromSpark']=void 0x0;const axios=require(_0x58502e(0x1bf));async function sendMessageFromSpark(_0x295f2d,{onProgress:_0x22269d,key:_0x52f7a4,model:_0x15e503,temperature:temperature=0.95}){return new Promise((_0x432554,_0x29929d)=>{const _0x389f56=_0x21ff,_0x438b7d=_0x389f56(0x1c2),_0x4b9009={'method':_0x389f56(0x1d4),'url':_0x438b7d,'responseType':_0x389f56(0x1d2),'headers':{'Content-Type':_0x389f56(0x1c6),'Authorization':_0x389f56(0x1d1)+_0x52f7a4},'data':{'model':_0x15e503,'messages':_0x295f2d,'temperature':temperature,'stream':!![]}};axios(_0x4b9009)[_0x389f56(0x1ce)](_0x5e8be9=>{const _0x5b2bbc=_0x389f56,_0x4e2f15=_0x5e8be9['data'];let _0x50c219,_0x2cd0ed='';_0x4e2f15['on'](_0x5b2bbc(0x1cc),_0x273f40=>{const _0x4b1e68=_0x5b2bbc,_0x5b07d7=_0x273f40['toString']()[_0x4b1e68(0x1cf)]('\x0a')[_0x4b1e68(0x1d5)](_0x141eb3=>_0x141eb3['trim']()!==''),_0x2ef972=_0x5b07d7;console[_0x4b1e68(0x1c3)](_0x2ef972);if(!_0x2ef972)return;let _0x11d6fb=![],_0x5f1b6c='',_0x357e06='',_0x4d4489='',_0xf440b3=null;_0x2ef972[_0x4b1e68(0x1d6)](_0x5c6cd5=>{const _0x22e139=_0x4b1e68;if(_0x5c6cd5[_0x22e139(0x1c8)](_0x22e139(0x1d8))>-0x1)_0x11d6fb=!![];else{const _0x1fdc8a=JSON[_0x22e139(0x1e0)](_0x5c6cd5['replace'](_0x22e139(0x1dc),''));_0x5f1b6c=_0x1fdc8a['id'],_0x357e06=_0x1fdc8a['created'],_0x4d4489=_0x1fdc8a['model'],_0x1fdc8a[_0x22e139(0x1c4)]&&(_0xf440b3=_0x1fdc8a['usage']),_0x1fdc8a[_0x22e139(0x1bd)][_0x22e139(0x1d6)](_0x130ef0=>{const _0x2adf14=_0x22e139;_0x2cd0ed+=_0x130ef0[_0x2adf14(0x1cd)][_0x2adf14(0x1df)];});}});let _0x4f15cd={'role':_0x4b1e68(0x1d3),'id':_0x5f1b6c,'text':_0x2cd0ed,'delta':_0x2cd0ed,'detail':{'choices':[{'delta':{'content':_0x2cd0ed,'role':_0x4b1e68(0x1d3)},'index':0x0}],'created':_0x357e06,'id':_0x5f1b6c,'model':_0x4d4489,'object':_0x4b1e68(0x1da),'usage':_0xf440b3}};_0x11d6fb&&(_0x4f15cd[_0x4b1e68(0x1bb)]=![],_0x50c219=_0x4f15cd,_0x50c219[_0x4b1e68(0x1d9)]=_0x2cd0ed),_0x22269d(_0x4f15cd);}),_0x4e2f15['on'](_0x5b2bbc(0x1bc),()=>{_0x432554(_0x50c219),_0x2cd0ed='';});})[_0x389f56(0x1d7)](_0x591d04=>{const _0x298b74=_0x389f56;console[_0x298b74(0x1c3)](_0x298b74(0x1c1),_0x591d04);});});}exports[_0x58502e(0x1c7)]=sendMessageFromSpark;