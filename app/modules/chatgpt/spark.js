'use strict';const _0x25cf6b=_0xb6be;(function(_0x5322b0,_0x17bd9f){const _0xd10f0c=_0xb6be,_0x4e4f7a=_0x5322b0();while(!![]){try{const _0x5a27e7=-parseInt(_0xd10f0c(0x15f))/0x1*(parseInt(_0xd10f0c(0x165))/0x2)+-parseInt(_0xd10f0c(0x169))/0x3*(parseInt(_0xd10f0c(0x151))/0x4)+-parseInt(_0xd10f0c(0x160))/0x5*(-parseInt(_0xd10f0c(0x166))/0x6)+-parseInt(_0xd10f0c(0x158))/0x7+parseInt(_0xd10f0c(0x150))/0x8*(parseInt(_0xd10f0c(0x156))/0x9)+parseInt(_0xd10f0c(0x153))/0xa*(-parseInt(_0xd10f0c(0x15d))/0xb)+parseInt(_0xd10f0c(0x157))/0xc*(parseInt(_0xd10f0c(0x159))/0xd);if(_0x5a27e7===_0x17bd9f)break;else _0x4e4f7a['push'](_0x4e4f7a['shift']());}catch(_0x3f91a0){_0x4e4f7a['push'](_0x4e4f7a['shift']());}}}(_0x4625,0x2001e));function _0xb6be(_0x384c30,_0x52266c){const _0x462596=_0x4625();return _0xb6be=function(_0xb6be45,_0x4fd520){_0xb6be45=_0xb6be45-0x150;let _0x57333c=_0x462596[_0xb6be45];return _0x57333c;},_0xb6be(_0x384c30,_0x52266c);}function _0x4625(){const _0x45c717=['ChatMessage','string','V1.5','usage','53386xBaKIL','126798bXEScU','V2.0','includes','213cMXBvw','text','uasge','getModel','map','XunFeiSpark','__esModule','fromUser','sendMessageFromXunFei','chatAsync','197032HVxSyb','2004OvYbxY','content','122880aCifXe','defineProperty','V1_5','18xUtXeH','975876WMizoB','1810704kosjvu','52uvPYFV','spark','ModelVersion','spark-node-sdk','77FRdZuy','SparkClient','2OZlLZn','45lRXsbd'];_0x4625=function(){return _0x45c717;};return _0x4625();}Object[_0x25cf6b(0x154)](exports,_0x25cf6b(0x16f),{'value':!![]}),exports[_0x25cf6b(0x16e)]=void 0x0;const spark_node_sdk_1=require(_0x25cf6b(0x15c));class XunFeiSpark{constructor(_0x2ad5ab){const _0x258e1b=_0x25cf6b;this['message']={},this[_0x258e1b(0x16c)]=_0x1f4166=>{const _0x90e452=_0x258e1b;return _0x1f4166[_0x90e452(0x168)](_0x90e452(0x163))?spark_node_sdk_1[_0x90e452(0x15b)][_0x90e452(0x155)]:_0x1f4166[_0x90e452(0x168)](_0x90e452(0x167))?spark_node_sdk_1[_0x90e452(0x15b)]['V2']:spark_node_sdk_1['ModelVersion']['V3'];};const {appid:_0x325f63,secret:_0x1657e5,key:_0x3b9db6}=_0x2ad5ab;this['spark']=new spark_node_sdk_1[(_0x258e1b(0x15e))](_0x325f63,_0x3b9db6,_0x1657e5);}async[_0x25cf6b(0x171)](_0xecaee8,_0x1d6cbc){const _0x53865e=_0x25cf6b;let _0x89340={'usage':{'completion_tokens':0x0,'prompt_tokens':0x0,'question_tokens':0x0,'total_tokens':0x0},'text':''},_0x450d55='';const {temperature:_0x3bed18,chatId:_0x13b2f3,model:_0x10fff7,onProgress:_0x295d9d,abortController:_0x45e406}=_0x1d6cbc,_0x357ba1=this[_0x53865e(0x16c)](_0x10fff7);let _0x372359=typeof _0xecaee8===_0x53865e(0x162)?[spark_node_sdk_1[_0x53865e(0x161)][_0x53865e(0x170)](_0xecaee8)]:_0xecaee8[_0x53865e(0x16d)](_0x4e9968=>spark_node_sdk_1[_0x53865e(0x161)][_0x53865e(0x170)](_0x4e9968[_0x53865e(0x152)]));return await this[_0x53865e(0x15a)][_0x53865e(0x172)](_0x357ba1,_0x372359,_0x136e5a=>{const _0x43ed31=_0x53865e;try{_0x136e5a&&(_0x450d55+=_0x136e5a['text']),_0x89340[_0x43ed31(0x164)]=_0x136e5a[_0x43ed31(0x16b)],_0x89340[_0x43ed31(0x16a)]=_0x450d55,_0x295d9d(_0x89340);}catch(_0x209659){console['log'](_0x209659),_0x295d9d(_0x89340);}},{'temperature':_0x3bed18||0.5,'max_tokens':0x800,'top_k':0x4,'chat_id':null},_0x13b2f3,_0x45e406),{'text':_0x450d55,'usage':_0x89340[_0x53865e(0x164)]};}}exports[_0x25cf6b(0x16e)]=XunFeiSpark;