'use strict';const _0x42af02=_0x4616;(function(_0x264e03,_0x5d250f){const _0x3064d3=_0x4616,_0xae8648=_0x264e03();while(!![]){try{const _0x4465a1=-parseInt(_0x3064d3(0xc4))/0x1*(parseInt(_0x3064d3(0xa9))/0x2)+parseInt(_0x3064d3(0x97))/0x3*(parseInt(_0x3064d3(0xbd))/0x4)+-parseInt(_0x3064d3(0x8c))/0x5+-parseInt(_0x3064d3(0xb9))/0x6*(parseInt(_0x3064d3(0x9b))/0x7)+parseInt(_0x3064d3(0x9c))/0x8*(parseInt(_0x3064d3(0x8e))/0x9)+parseInt(_0x3064d3(0x96))/0xa+-parseInt(_0x3064d3(0xb2))/0xb*(-parseInt(_0x3064d3(0xb0))/0xc);if(_0x4465a1===_0x5d250f)break;else _0xae8648['push'](_0xae8648['shift']());}catch(_0x4a1ac5){_0xae8648['push'](_0xae8648['shift']());}}}(_0x8c3f,0x53bf7));function _0x4616(_0xf0b143,_0x3bb518){const _0x8c3fc4=_0x8c3f();return _0x4616=function(_0x461634,_0x4abe9b){_0x461634=_0x461634-0x89;let _0x716a65=_0x8c3fc4[_0x461634];return _0x716a65;},_0x4616(_0xf0b143,_0x3bb518);}var __decorate=this&&this[_0x42af02(0x91)]||function(_0x16adf4,_0x24b906,_0x3901cf,_0x32c136){const _0xb078c2=_0x42af02;var _0x176218=arguments[_0xb078c2(0xbf)],_0x4ec658=_0x176218<0x3?_0x24b906:_0x32c136===null?_0x32c136=Object[_0xb078c2(0x99)](_0x24b906,_0x3901cf):_0x32c136,_0x83bf33;if(typeof Reflect===_0xb078c2(0xc1)&&typeof Reflect[_0xb078c2(0xbc)]===_0xb078c2(0xc2))_0x4ec658=Reflect[_0xb078c2(0xbc)](_0x16adf4,_0x24b906,_0x3901cf,_0x32c136);else{for(var _0x2fd009=_0x16adf4['length']-0x1;_0x2fd009>=0x0;_0x2fd009--)if(_0x83bf33=_0x16adf4[_0x2fd009])_0x4ec658=(_0x176218<0x3?_0x83bf33(_0x4ec658):_0x176218>0x3?_0x83bf33(_0x24b906,_0x3901cf,_0x4ec658):_0x83bf33(_0x24b906,_0x3901cf))||_0x4ec658;}return _0x176218>0x3&&_0x4ec658&&Object[_0xb078c2(0xaf)](_0x24b906,_0x3901cf,_0x4ec658),_0x4ec658;},__metadata=this&&this[_0x42af02(0xc3)]||function(_0x1fd2c0,_0x234498){const _0x5e6547=_0x42af02;if(typeof Reflect==='object'&&typeof Reflect[_0x5e6547(0xab)]==='function')return Reflect[_0x5e6547(0xab)](_0x1fd2c0,_0x234498);},__param=this&&this['__param']||function(_0x4470d1,_0x2947ea){return function(_0x4586f9,_0x4a8c00){_0x2947ea(_0x4586f9,_0x4a8c00,_0x4470d1);};};function _0x8c3f(){const _0x37432d=['\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20DESC\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','length','user','object','function','__metadata','82UBZQtq','\x0a\x20\x20\x20\x20\x20\x20','affected','Logger','458295vHBdBK','BAD_REQUEST','13023LAmZUP','collect','query','__decorate','design:paramtypes','save','catch','gptsModelEntity','386180LbqTrm','3RllCVs','Connection','getOwnPropertyDescriptor','userAppsEntity','1442AODZbf','2424uVwGuL','collectCount','\x20OFFSET\x20','UserAppsEntity','typeorm','groupId','../gpts/gpts.model.entity','round','@nestjs/typeorm','@nestjs/common','Repository','connection','操作失败！','6374LkMneX','count','metadata','取消移除我的应用失败！','system','findOne','defineProperty','194364siCyBs','HttpException','253RpDxLb','random','delete','message','log','已将应用移除我的应用!','HttpStatus','12438wSWpWm','已将应用添加到我的应用！','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','decorate','1093888vVHrfw'];_0x8c3f=function(){return _0x37432d;};return _0x8c3f();}Object[_0x42af02(0xaf)](exports,'__esModule',{'value':!![]}),exports['AppService']=void 0x0;const common_1=require(_0x42af02(0xa5)),typeorm_1=require(_0x42af02(0xa0)),typeorm_2=require(_0x42af02(0xa4)),userApps_entity_1=require('./userApps.entity'),gpts_model_entity_1=require(_0x42af02(0xa2));let AppService=class AppService{constructor(_0x3dc40f,_0x12eb07,_0x431759){const _0x153d81=_0x42af02;this['gptsModelEntity']=_0x3dc40f,this[_0x153d81(0x9a)]=_0x12eb07,this[_0x153d81(0xa7)]=_0x431759;}async[_0x42af02(0x8f)](_0x57b6e8,_0x19c0ef){const _0x191483=_0x42af02,{appId:_0x3582ba}=_0x57b6e8,{id:_0x23e9bc}=_0x19c0ef[_0x191483(0xc0)];try{const _0x52c00e=await this[_0x191483(0x9a)][_0x191483(0xae)]({'where':{'appId':_0x3582ba,'userId':_0x23e9bc}})['catch'](_0x11416e=>{const _0x19171f=_0x191483;common_1[_0x19171f(0x8b)][_0x19171f(0xb6)](_0x11416e);});if(_0x52c00e){const _0xb680a8=await this[_0x191483(0x9a)][_0x191483(0xb4)]({'appId':_0x3582ba,'userId':_0x23e9bc})[_0x191483(0x94)](_0x479aec=>{const _0x22eb42=_0x191483;common_1[_0x22eb42(0x8b)][_0x22eb42(0xb6)](_0x479aec);});if(!_0xb680a8||_0xb680a8[_0x191483(0x8a)]<=0x0)throw new common_1[(_0x191483(0xb1))](_0x191483(0xac),common_1[_0x191483(0xb8)][_0x191483(0x8d)]);return _0x191483(0xb7);}const _0xac10a9=await this[_0x191483(0x95)][_0x191483(0xae)]({'where':{'id':_0x3582ba}})[_0x191483(0x94)](_0x125bc2=>{const _0x3cfa6f=_0x191483;common_1[_0x3cfa6f(0x8b)][_0x3cfa6f(0xb6)](_0x125bc2);});if(!_0xac10a9)throw new common_1[(_0x191483(0xb1))](_0x191483(0xa8),common_1['HttpStatus'][_0x191483(0x8d)]);const _0xb92e0a={'userId':_0x23e9bc,'appId':_0xac10a9['id'],'catId':_0xac10a9[_0x191483(0xa1)],'appRole':_0x191483(0xad),'public':!![],'status':0x1};return await this[_0x191483(0x9a)]['save'](_0xb92e0a)['catch'](_0x3c5255=>{const _0x502ab0=_0x191483;common_1[_0x502ab0(0x8b)][_0x502ab0(0xb6)](_0x3c5255);}),_0xac10a9[_0x191483(0x9d)]=_0xac10a9[_0x191483(0x9d)]+Math[_0x191483(0xa3)](Math[_0x191483(0xb3)]()*0xa),await this[_0x191483(0x95)][_0x191483(0x93)](_0xac10a9),_0x191483(0xba);}catch(_0x24c39d){console[_0x191483(0xb6)](_0x24c39d);}}async['mineAppsV3'](_0x39c25b,_0xb3b0b4={'page':0x1,'size':0x1e}){const _0x4bd34f=_0x42af02,{id:_0x4c6f7b}=_0x39c25b['user'],{page:page=0x1,size:size=0x1e}=_0xb3b0b4;try{const _0x139d55=await this[_0x4bd34f(0xa7)][_0x4bd34f(0x90)](_0x4bd34f(0xbb)+_0x4c6f7b+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20'),_0x2e9000=await this[_0x4bd34f(0xa7)]['query']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gm.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gg.groupName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20AS\x20collectTime\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20'+_0x4c6f7b+_0x4bd34f(0xbe)+size+_0x4bd34f(0x9e)+(page-0x1)*size+_0x4bd34f(0x89));return{'rows':_0x2e9000,'count':Number(_0x139d55[0x0]?.[_0x4bd34f(0xaa)]||0x0)};}catch(_0x12f263){console['log'](_0x12f263[_0x4bd34f(0xb5)]);}}};AppService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_2['InjectRepository'])(gpts_model_entity_1['GptsModelEntity'])),__param(0x1,(0x0,typeorm_2['InjectRepository'])(userApps_entity_1[_0x42af02(0x9f)])),__metadata(_0x42af02(0x92),[typeorm_1['Repository'],typeorm_1[_0x42af02(0xa6)],typeorm_1[_0x42af02(0x98)]])],AppService),exports['AppService']=AppService;