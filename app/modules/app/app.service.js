'use strict';const _0xa2d373=_0x174d;(function(_0x18270c,_0xe70267){const _0x28c55a=_0x174d,_0x5cd21a=_0x18270c();while(!![]){try{const _0xfd09bb=parseInt(_0x28c55a(0x16f))/0x1+parseInt(_0x28c55a(0x161))/0x2*(-parseInt(_0x28c55a(0x16b))/0x3)+-parseInt(_0x28c55a(0x143))/0x4*(-parseInt(_0x28c55a(0x17e))/0x5)+parseInt(_0x28c55a(0x16d))/0x6*(-parseInt(_0x28c55a(0x145))/0x7)+parseInt(_0x28c55a(0x148))/0x8+-parseInt(_0x28c55a(0x149))/0x9*(parseInt(_0x28c55a(0x151))/0xa)+-parseInt(_0x28c55a(0x147))/0xb*(parseInt(_0x28c55a(0x16c))/0xc);if(_0xfd09bb===_0xe70267)break;else _0x5cd21a['push'](_0x5cd21a['shift']());}catch(_0x3f07f9){_0x5cd21a['push'](_0x5cd21a['shift']());}}}(_0x14f5,0x4e2a9));function _0x174d(_0x204bf2,_0x447d13){const _0x14f5a8=_0x14f5();return _0x174d=function(_0x174d71,_0x13478d){_0x174d71=_0x174d71-0x141;let _0x253d7f=_0x14f5a8[_0x174d71];return _0x253d7f;},_0x174d(_0x204bf2,_0x447d13);}var __decorate=this&&this[_0xa2d373(0x168)]||function(_0x207239,_0x25e5da,_0xfa714c,_0x33d695){const _0x2e3115=_0xa2d373;var _0x243463=arguments[_0x2e3115(0x15b)],_0x1569e7=_0x243463<0x3?_0x25e5da:_0x33d695===null?_0x33d695=Object[_0x2e3115(0x153)](_0x25e5da,_0xfa714c):_0x33d695,_0x303183;if(typeof Reflect===_0x2e3115(0x14f)&&typeof Reflect[_0x2e3115(0x17c)]==='function')_0x1569e7=Reflect[_0x2e3115(0x17c)](_0x207239,_0x25e5da,_0xfa714c,_0x33d695);else{for(var _0x221a74=_0x207239[_0x2e3115(0x15b)]-0x1;_0x221a74>=0x0;_0x221a74--)if(_0x303183=_0x207239[_0x221a74])_0x1569e7=(_0x243463<0x3?_0x303183(_0x1569e7):_0x243463>0x3?_0x303183(_0x25e5da,_0xfa714c,_0x1569e7):_0x303183(_0x25e5da,_0xfa714c))||_0x1569e7;}return _0x243463>0x3&&_0x1569e7&&Object[_0x2e3115(0x179)](_0x25e5da,_0xfa714c,_0x1569e7),_0x1569e7;},__metadata=this&&this[_0xa2d373(0x174)]||function(_0x2116f1,_0x41515a){const _0x136806=_0xa2d373;if(typeof Reflect==='object'&&typeof Reflect[_0x136806(0x16a)]===_0x136806(0x15c))return Reflect[_0x136806(0x16a)](_0x2116f1,_0x41515a);},__param=this&&this[_0xa2d373(0x15a)]||function(_0xfe3c4a,_0x242645){return function(_0x26de76,_0x1a351e){_0x242645(_0x26de76,_0x1a351e,_0xfe3c4a);};};Object[_0xa2d373(0x179)](exports,'__esModule',{'value':!![]}),exports[_0xa2d373(0x144)]=void 0x0;function _0x14f5(){const _0x585a8b=['操作失败！','Logger','defineProperty','affected','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gm.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gg.groupName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20AS\x20collectTime\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','decorate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','167395MTDpnW','InjectRepository','user','56fzXSBR','AppService','5201qUNZsC','./userApps.entity','3597nJPXqN','3050160AUZdta','36kbLsCZ','\x20OFFSET\x20','UserAppsEntity','Injectable','save','system','object','@nestjs/common','304710orhIoh','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20','getOwnPropertyDescriptor','count','collect','../gpts/gpts.model.entity','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20DESC\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','已将应用添加到我的应用！','HttpStatus','__param','length','function','typeorm','log','BAD_REQUEST','gptsModelEntity','28fzTvFa','HttpException','message','groupId','已将应用移除我的应用!','query','collectCount','__decorate','\x0a\x20\x20\x20\x20\x20\x20','metadata','76503qFfcQc','9948aiAhPU','858aMoOpU','round','326423eaqWfM','connection','userAppsEntity','findOne','mineAppsV3','__metadata','catch','Repository'];_0x14f5=function(){return _0x585a8b;};return _0x14f5();}const common_1=require(_0xa2d373(0x150)),typeorm_1=require(_0xa2d373(0x15d)),typeorm_2=require('@nestjs/typeorm'),userApps_entity_1=require(_0xa2d373(0x146)),gpts_model_entity_1=require(_0xa2d373(0x156));let AppService=class AppService{constructor(_0x4dd760,_0x222e22,_0x4814e4){const _0x1cb02d=_0xa2d373;this[_0x1cb02d(0x160)]=_0x4dd760,this[_0x1cb02d(0x171)]=_0x222e22,this[_0x1cb02d(0x170)]=_0x4814e4;}async[_0xa2d373(0x155)](_0x15387e,_0x39e12b){const _0x36cf0d=_0xa2d373,{appId:_0x2a3557}=_0x15387e,{id:_0x35dfa1}=_0x39e12b[_0x36cf0d(0x142)];try{const _0x240071=await this[_0x36cf0d(0x171)][_0x36cf0d(0x172)]({'where':{'appId':_0x2a3557,'userId':_0x35dfa1}})['catch'](_0x3c959d=>{const _0x45328a=_0x36cf0d;common_1[_0x45328a(0x178)]['log'](_0x3c959d);});if(_0x240071){const _0x5d0e20=await this[_0x36cf0d(0x171)]['delete']({'appId':_0x2a3557,'userId':_0x35dfa1})[_0x36cf0d(0x175)](_0x397e84=>{const _0x1752c4=_0x36cf0d;common_1[_0x1752c4(0x178)]['log'](_0x397e84);});if(!_0x5d0e20||_0x5d0e20[_0x36cf0d(0x17a)]<=0x0)throw new common_1[(_0x36cf0d(0x162))]('取消移除我的应用失败！',common_1[_0x36cf0d(0x159)][_0x36cf0d(0x15f)]);return _0x36cf0d(0x165);}const _0x4c3c17=await this['gptsModelEntity'][_0x36cf0d(0x172)]({'where':{'id':_0x2a3557}})[_0x36cf0d(0x175)](_0xd77f94=>{const _0x12ba6d=_0x36cf0d;common_1[_0x12ba6d(0x178)]['log'](_0xd77f94);});if(!_0x4c3c17)throw new common_1[(_0x36cf0d(0x162))](_0x36cf0d(0x177),common_1[_0x36cf0d(0x159)][_0x36cf0d(0x15f)]);const _0x361938={'userId':_0x35dfa1,'appId':_0x4c3c17['id'],'catId':_0x4c3c17[_0x36cf0d(0x164)],'appRole':_0x36cf0d(0x14e),'public':!![],'status':0x1};return await this[_0x36cf0d(0x171)][_0x36cf0d(0x14d)](_0x361938)[_0x36cf0d(0x175)](_0x2c1e9f=>{const _0x257ee4=_0x36cf0d;common_1[_0x257ee4(0x178)][_0x257ee4(0x15e)](_0x2c1e9f);}),_0x4c3c17['collectCount']=_0x4c3c17[_0x36cf0d(0x167)]+Math[_0x36cf0d(0x16e)](Math['random']()*0xa),await this[_0x36cf0d(0x160)][_0x36cf0d(0x14d)](_0x4c3c17),_0x36cf0d(0x158);}catch(_0x5001f1){console['log'](_0x5001f1);}}async[_0xa2d373(0x173)](_0x1a9da5,_0xe59d29={'page':0x1,'size':0x64}){const _0x15dde4=_0xa2d373,{id:_0x172bc4}=_0x1a9da5[_0x15dde4(0x142)],{page:page=0x1,size:size=0x64}=_0xe59d29;try{const _0x25ee61=await this[_0x15dde4(0x170)]['query'](_0x15dde4(0x17d)+_0x172bc4+_0x15dde4(0x152)),_0x9532d5=await this[_0x15dde4(0x170)][_0x15dde4(0x166)](_0x15dde4(0x17b)+_0x172bc4+_0x15dde4(0x157)+size+_0x15dde4(0x14a)+(page-0x1)*size+_0x15dde4(0x169));return{'rows':_0x9532d5,'count':Number(_0x25ee61[0x0]?.[_0x15dde4(0x154)]||0x0)};}catch(_0x14c05a){console['log'](_0x14c05a[_0x15dde4(0x163)]);}}};AppService=__decorate([(0x0,common_1[_0xa2d373(0x14c)])(),__param(0x0,(0x0,typeorm_2[_0xa2d373(0x141)])(gpts_model_entity_1['GptsModelEntity'])),__param(0x1,(0x0,typeorm_2[_0xa2d373(0x141)])(userApps_entity_1[_0xa2d373(0x14b)])),__metadata('design:paramtypes',[typeorm_1[_0xa2d373(0x176)],typeorm_1[_0xa2d373(0x176)],typeorm_1['Connection']])],AppService),exports['AppService']=AppService;