'use strict';function _0x5ab3(){const _0x106bbb=['AppService','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gm.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gg.groupName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20AS\x20collectTime\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','2538810lbadSG','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20DESC\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','catch','collect','random','UserAppsEntity','query','round','@nestjs/common','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','connection','log','取消移除我的应用失败！','\x0a\x20\x20\x20\x20\x20\x20','Connection','GptsModelEntity','518474AkkUZi','decorate','Repository','BAD_REQUEST','HttpException','8OzVUrm','已将应用移除我的应用!','__decorate','findOne','Injectable','2536052wCTIKm','mineAppsV3','typeorm','count','design:paramtypes','__metadata','system','object','delete','已将应用添加到我的应用！','save','InjectRepository','./userApps.entity','groupId','function','defineProperty','user','HttpStatus','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20','8782659QtGPrS','length','Logger','1108362KAmCvG','2029610uJqnHF','userAppsEntity','__esModule','3206539GItxll','2LdwaRx','collectCount','gptsModelEntity'];_0x5ab3=function(){return _0x106bbb;};return _0x5ab3();}const _0xbed546=_0x2130;(function(_0x367e66,_0x261c8d){const _0x5a04a6=_0x2130,_0x2436b7=_0x367e66();while(!![]){try{const _0xb00cd0=parseInt(_0x5a04a6(0x1a3))/0x1*(-parseInt(_0x5a04a6(0x1b8))/0x2)+-parseInt(_0x5a04a6(0x19e))/0x3+parseInt(_0x5a04a6(0x1c2))/0x4+-parseInt(_0x5a04a6(0x19f))/0x5+-parseInt(_0x5a04a6(0x1a8))/0x6+parseInt(_0x5a04a6(0x1a2))/0x7*(parseInt(_0x5a04a6(0x1bd))/0x8)+parseInt(_0x5a04a6(0x19b))/0x9;if(_0xb00cd0===_0x261c8d)break;else _0x2436b7['push'](_0x2436b7['shift']());}catch(_0x2a7fd7){_0x2436b7['push'](_0x2436b7['shift']());}}}(_0x5ab3,0x55aec));var __decorate=this&&this[_0xbed546(0x1bf)]||function(_0x1912d8,_0x32006a,_0x20e38e,_0x570307){const _0xb0a2dc=_0xbed546;var _0x536040=arguments['length'],_0x27e921=_0x536040<0x3?_0x32006a:_0x570307===null?_0x570307=Object['getOwnPropertyDescriptor'](_0x32006a,_0x20e38e):_0x570307,_0x46bf99;if(typeof Reflect===_0xb0a2dc(0x1c9)&&typeof Reflect[_0xb0a2dc(0x1b9)]===_0xb0a2dc(0x196))_0x27e921=Reflect[_0xb0a2dc(0x1b9)](_0x1912d8,_0x32006a,_0x20e38e,_0x570307);else{for(var _0x3ac82b=_0x1912d8[_0xb0a2dc(0x19c)]-0x1;_0x3ac82b>=0x0;_0x3ac82b--)if(_0x46bf99=_0x1912d8[_0x3ac82b])_0x27e921=(_0x536040<0x3?_0x46bf99(_0x27e921):_0x536040>0x3?_0x46bf99(_0x32006a,_0x20e38e,_0x27e921):_0x46bf99(_0x32006a,_0x20e38e))||_0x27e921;}return _0x536040>0x3&&_0x27e921&&Object[_0xb0a2dc(0x197)](_0x32006a,_0x20e38e,_0x27e921),_0x27e921;},__metadata=this&&this[_0xbed546(0x1c7)]||function(_0x3174ed,_0x1ccced){const _0x25a0a5=_0xbed546;if(typeof Reflect===_0x25a0a5(0x1c9)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x3174ed,_0x1ccced);},__param=this&&this['__param']||function(_0x1a4814,_0x3983cd){return function(_0x42f971,_0x3e2b0c){_0x3983cd(_0x42f971,_0x3e2b0c,_0x1a4814);};};Object[_0xbed546(0x197)](exports,_0xbed546(0x1a1),{'value':!![]}),exports[_0xbed546(0x1a6)]=void 0x0;function _0x2130(_0x4e4c21,_0x12f43e){const _0x5ab3fc=_0x5ab3();return _0x2130=function(_0x2130f2,_0x5580fb){_0x2130f2=_0x2130f2-0x196;let _0xeaf930=_0x5ab3fc[_0x2130f2];return _0xeaf930;},_0x2130(_0x4e4c21,_0x12f43e);}const common_1=require(_0xbed546(0x1b0)),typeorm_1=require(_0xbed546(0x1c4)),typeorm_2=require('@nestjs/typeorm'),userApps_entity_1=require(_0xbed546(0x1ce)),gpts_model_entity_1=require('../gpts/gpts.model.entity');let AppService=class AppService{constructor(_0x52d601,_0x20811a,_0xcb4976){const _0x59a05d=_0xbed546;this[_0x59a05d(0x1a5)]=_0x52d601,this[_0x59a05d(0x1a0)]=_0x20811a,this[_0x59a05d(0x1b2)]=_0xcb4976;}async[_0xbed546(0x1ab)](_0x52337e,_0x1ec0b3){const _0x593b10=_0xbed546,{appId:_0x3d2d9f}=_0x52337e,{id:_0x18c6ea}=_0x1ec0b3[_0x593b10(0x198)];try{const _0x2cef99=await this[_0x593b10(0x1a0)][_0x593b10(0x1c0)]({'where':{'appId':_0x3d2d9f,'userId':_0x18c6ea}})[_0x593b10(0x1aa)](_0x1a9d79=>{const _0x2543b1=_0x593b10;common_1[_0x2543b1(0x19d)][_0x2543b1(0x1b3)](_0x1a9d79);});if(_0x2cef99){const _0x4a2968=await this[_0x593b10(0x1a0)][_0x593b10(0x1ca)]({'appId':_0x3d2d9f,'userId':_0x18c6ea})[_0x593b10(0x1aa)](_0x44b856=>{const _0x598470=_0x593b10;common_1['Logger'][_0x598470(0x1b3)](_0x44b856);});if(!_0x4a2968||_0x4a2968['affected']<=0x0)throw new common_1[(_0x593b10(0x1bc))](_0x593b10(0x1b4),common_1[_0x593b10(0x199)][_0x593b10(0x1bb)]);return _0x593b10(0x1be);}const _0x59d726=await this[_0x593b10(0x1a5)][_0x593b10(0x1c0)]({'where':{'id':_0x3d2d9f}})[_0x593b10(0x1aa)](_0x53c890=>{const _0x365871=_0x593b10;common_1['Logger'][_0x365871(0x1b3)](_0x53c890);});if(!_0x59d726)throw new common_1[(_0x593b10(0x1bc))]('操作失败！',common_1[_0x593b10(0x199)][_0x593b10(0x1bb)]);const _0x360579={'userId':_0x18c6ea,'appId':_0x59d726['id'],'catId':_0x59d726[_0x593b10(0x1cf)],'appRole':_0x593b10(0x1c8),'public':!![],'status':0x1};return await this[_0x593b10(0x1a0)][_0x593b10(0x1cc)](_0x360579)[_0x593b10(0x1aa)](_0x43ba70=>{const _0x4f80a4=_0x593b10;common_1[_0x4f80a4(0x19d)][_0x4f80a4(0x1b3)](_0x43ba70);}),_0x59d726['collectCount']=_0x59d726[_0x593b10(0x1a4)]+Math[_0x593b10(0x1af)](Math[_0x593b10(0x1ac)]()*0xa),await this['gptsModelEntity'][_0x593b10(0x1cc)](_0x59d726),_0x593b10(0x1cb);}catch(_0x5b354b){console[_0x593b10(0x1b3)](_0x5b354b);}}async[_0xbed546(0x1c3)](_0xfff9f2,_0x50305e={'page':0x1,'size':0x64}){const _0x41bd53=_0xbed546,{id:_0xc1f827}=_0xfff9f2['user'],{page:page=0x1,size:size=0x64}=_0x50305e;try{const _0x14aa30=await this[_0x41bd53(0x1b2)][_0x41bd53(0x1ae)](_0x41bd53(0x1b1)+_0xc1f827+_0x41bd53(0x19a)),_0x253412=await this['connection'][_0x41bd53(0x1ae)](_0x41bd53(0x1a7)+_0xc1f827+_0x41bd53(0x1a9)+size+'\x20OFFSET\x20'+(page-0x1)*size+_0x41bd53(0x1b5));return{'rows':_0x253412,'count':Number(_0x14aa30[0x0]?.[_0x41bd53(0x1c5)]||0x0)};}catch(_0x4babae){console[_0x41bd53(0x1b3)](_0x4babae['message']);}}};AppService=__decorate([(0x0,common_1[_0xbed546(0x1c1)])(),__param(0x0,(0x0,typeorm_2[_0xbed546(0x1cd)])(gpts_model_entity_1[_0xbed546(0x1b7)])),__param(0x1,(0x0,typeorm_2[_0xbed546(0x1cd)])(userApps_entity_1[_0xbed546(0x1ad)])),__metadata(_0xbed546(0x1c6),[typeorm_1[_0xbed546(0x1ba)],typeorm_1[_0xbed546(0x1ba)],typeorm_1[_0xbed546(0x1b6)]])],AppService),exports['AppService']=AppService;