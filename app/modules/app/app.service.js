'use strict';function _0xc0a9(){const _0x24e7b3=['connection','catch','已将应用添加到我的应用！','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','log','__esModule','8wfnRRv','GptsModelEntity','round','../gpts/gpts.model.entity','./userApps.entity','random','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20DESC\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','229110JwKUzb','\x0a\x20\x20\x20\x20\x20\x20','Injectable','280196NlelNU','BAD_REQUEST','gptsModelEntity','groupId','14616KuJTKP','HttpStatus','@nestjs/typeorm','10263UyvUKV','__metadata','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20','typeorm','function','message','3fpWsrh','count','mineAppsV3','length','design:paramtypes','__decorate','3EjeMHd','InjectRepository','collectCount','getOwnPropertyDescriptor','AppService','506356oHwICV','defineProperty','affected','userAppsEntity','已将应用移除我的应用!','object','130iSvMGq','query','findOne','\x20OFFSET\x20','9251160JxhRaP','1334780zPRSKP','操作失败！','decorate','system','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gm.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gg.groupName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20AS\x20collectTime\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','8684577GSrOwt','Repository','delete','__param','user','Connection','Logger'];_0xc0a9=function(){return _0x24e7b3;};return _0xc0a9();}function _0x4c20(_0x3c0c31,_0x1b8518){const _0xc0a98a=_0xc0a9();return _0x4c20=function(_0x4c2093,_0x40c123){_0x4c2093=_0x4c2093-0x123;let _0x9a847b=_0xc0a98a[_0x4c2093];return _0x9a847b;},_0x4c20(_0x3c0c31,_0x1b8518);}const _0x5f38ae=_0x4c20;(function(_0x451471,_0x2e9578){const _0x203cef=_0x4c20,_0x37f6b3=_0x451471();while(!![]){try{const _0x2bfc95=-parseInt(_0x203cef(0x14b))/0x1*(-parseInt(_0x203cef(0x156))/0x2)+parseInt(_0x203cef(0x151))/0x3*(-parseInt(_0x203cef(0x161))/0x4)+parseInt(_0x203cef(0x15c))/0x5*(parseInt(_0x203cef(0x13b))/0x6)+-parseInt(_0x203cef(0x13e))/0x7*(parseInt(_0x203cef(0x134))/0x8)+-parseInt(_0x203cef(0x127))/0x9+-parseInt(_0x203cef(0x160))/0xa+-parseInt(_0x203cef(0x145))/0xb*(-parseInt(_0x203cef(0x142))/0xc);if(_0x2bfc95===_0x2e9578)break;else _0x37f6b3['push'](_0x37f6b3['shift']());}catch(_0x500307){_0x37f6b3['push'](_0x37f6b3['shift']());}}}(_0xc0a9,0x98932));var __decorate=this&&this[_0x5f38ae(0x150)]||function(_0x54f437,_0x1ff1d2,_0x48fdbc,_0x517c51){const _0x408fcf=_0x5f38ae;var _0x3678f4=arguments[_0x408fcf(0x14e)],_0x52533a=_0x3678f4<0x3?_0x1ff1d2:_0x517c51===null?_0x517c51=Object[_0x408fcf(0x154)](_0x1ff1d2,_0x48fdbc):_0x517c51,_0x159c87;if(typeof Reflect===_0x408fcf(0x15b)&&typeof Reflect[_0x408fcf(0x124)]===_0x408fcf(0x149))_0x52533a=Reflect[_0x408fcf(0x124)](_0x54f437,_0x1ff1d2,_0x48fdbc,_0x517c51);else{for(var _0x51fc2d=_0x54f437['length']-0x1;_0x51fc2d>=0x0;_0x51fc2d--)if(_0x159c87=_0x54f437[_0x51fc2d])_0x52533a=(_0x3678f4<0x3?_0x159c87(_0x52533a):_0x3678f4>0x3?_0x159c87(_0x1ff1d2,_0x48fdbc,_0x52533a):_0x159c87(_0x1ff1d2,_0x48fdbc))||_0x52533a;}return _0x3678f4>0x3&&_0x52533a&&Object['defineProperty'](_0x1ff1d2,_0x48fdbc,_0x52533a),_0x52533a;},__metadata=this&&this[_0x5f38ae(0x146)]||function(_0x1ddfd1,_0x1a6298){const _0x5c12c6=_0x5f38ae;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x5c12c6(0x149))return Reflect['metadata'](_0x1ddfd1,_0x1a6298);},__param=this&&this[_0x5f38ae(0x12a)]||function(_0xba56a7,_0x38ecd3){return function(_0x4b2d5a,_0x221338){_0x38ecd3(_0x4b2d5a,_0x221338,_0xba56a7);};};Object[_0x5f38ae(0x157)](exports,_0x5f38ae(0x133),{'value':!![]}),exports[_0x5f38ae(0x155)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x5f38ae(0x148)),typeorm_2=require(_0x5f38ae(0x144)),userApps_entity_1=require(_0x5f38ae(0x138)),gpts_model_entity_1=require(_0x5f38ae(0x137));let AppService=class AppService{constructor(_0x40630b,_0x26955f,_0x356b2c){const _0x5aa2d4=_0x5f38ae;this[_0x5aa2d4(0x140)]=_0x40630b,this[_0x5aa2d4(0x159)]=_0x26955f,this[_0x5aa2d4(0x12e)]=_0x356b2c;}async['collect'](_0x2c4586,_0x487d82){const _0x531872=_0x5f38ae,{appId:_0x3448a5}=_0x2c4586,{id:_0x2109ca}=_0x487d82[_0x531872(0x12b)];try{const _0x3dab07=await this[_0x531872(0x159)]['findOne']({'where':{'appId':_0x3448a5,'userId':_0x2109ca}})[_0x531872(0x12f)](_0x3bc99b=>{const _0xd82930=_0x531872;common_1[_0xd82930(0x12d)][_0xd82930(0x132)](_0x3bc99b);});if(_0x3dab07){const _0x2d9f6b=await this[_0x531872(0x159)][_0x531872(0x129)]({'appId':_0x3448a5,'userId':_0x2109ca})['catch'](_0x519247=>{const _0x5c4890=_0x531872;common_1['Logger'][_0x5c4890(0x132)](_0x519247);});if(!_0x2d9f6b||_0x2d9f6b[_0x531872(0x158)]<=0x0)throw new common_1['HttpException']('取消移除我的应用失败！',common_1['HttpStatus'][_0x531872(0x13f)]);return _0x531872(0x15a);}const _0x57eb74=await this['gptsModelEntity'][_0x531872(0x15e)]({'where':{'id':_0x3448a5}})[_0x531872(0x12f)](_0xbd9587=>{const _0x3f0325=_0x531872;common_1[_0x3f0325(0x12d)][_0x3f0325(0x132)](_0xbd9587);});if(!_0x57eb74)throw new common_1['HttpException'](_0x531872(0x123),common_1[_0x531872(0x143)][_0x531872(0x13f)]);const _0x1d4aed={'userId':_0x2109ca,'appId':_0x57eb74['id'],'catId':_0x57eb74[_0x531872(0x141)],'appRole':_0x531872(0x125),'public':!![],'status':0x1};return await this[_0x531872(0x159)]['save'](_0x1d4aed)['catch'](_0x1d471b=>{const _0x3914ba=_0x531872;common_1[_0x3914ba(0x12d)][_0x3914ba(0x132)](_0x1d471b);}),_0x57eb74[_0x531872(0x153)]=_0x57eb74['collectCount']+Math[_0x531872(0x136)](Math[_0x531872(0x139)]()*0xa),await this[_0x531872(0x140)]['save'](_0x57eb74),_0x531872(0x130);}catch(_0x12cf98){console['log'](_0x12cf98);}}async[_0x5f38ae(0x14d)](_0x373e67,_0x23583d={'page':0x1,'size':0x64}){const _0x2bc346=_0x5f38ae,{id:_0x8363d2}=_0x373e67[_0x2bc346(0x12b)],{page:page=0x1,size:size=0x64}=_0x23583d;try{const _0x4d4e55=await this['connection'][_0x2bc346(0x15d)](_0x2bc346(0x131)+_0x8363d2+_0x2bc346(0x147)),_0x1cac99=await this[_0x2bc346(0x12e)][_0x2bc346(0x15d)](_0x2bc346(0x126)+_0x8363d2+_0x2bc346(0x13a)+size+_0x2bc346(0x15f)+(page-0x1)*size+_0x2bc346(0x13c));return{'rows':_0x1cac99,'count':Number(_0x4d4e55[0x0]?.[_0x2bc346(0x14c)]||0x0)};}catch(_0x5e0564){console[_0x2bc346(0x132)](_0x5e0564[_0x2bc346(0x14a)]);}}};AppService=__decorate([(0x0,common_1[_0x5f38ae(0x13d)])(),__param(0x0,(0x0,typeorm_2[_0x5f38ae(0x152)])(gpts_model_entity_1[_0x5f38ae(0x135)])),__param(0x1,(0x0,typeorm_2[_0x5f38ae(0x152)])(userApps_entity_1['UserAppsEntity'])),__metadata(_0x5f38ae(0x14f),[typeorm_1[_0x5f38ae(0x128)],typeorm_1['Repository'],typeorm_1[_0x5f38ae(0x12c)]])],AppService),exports[_0x5f38ae(0x155)]=AppService;