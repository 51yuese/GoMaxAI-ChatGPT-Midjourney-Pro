'use strict';const _0x56f478=_0x3900;(function(_0x11285a,_0x4839b7){const _0x19f343=_0x3900,_0x580e78=_0x11285a();while(!![]){try{const _0xb801a4=parseInt(_0x19f343(0xda))/0x1+parseInt(_0x19f343(0xf4))/0x2+parseInt(_0x19f343(0xf8))/0x3*(-parseInt(_0x19f343(0xdb))/0x4)+-parseInt(_0x19f343(0xdf))/0x5*(parseInt(_0x19f343(0xd6))/0x6)+parseInt(_0x19f343(0x108))/0x7+-parseInt(_0x19f343(0xe3))/0x8+parseInt(_0x19f343(0x101))/0x9;if(_0xb801a4===_0x4839b7)break;else _0x580e78['push'](_0x580e78['shift']());}catch(_0x506453){_0x580e78['push'](_0x580e78['shift']());}}}(_0x204a,0x39044));var __decorate=this&&this[_0x56f478(0xd8)]||function(_0x6d5c27,_0x366356,_0x7e8ef1,_0x5a4cae){const _0x38e18d=_0x56f478;var _0x4a3a45=arguments[_0x38e18d(0x10c)],_0x363b0e=_0x4a3a45<0x3?_0x366356:_0x5a4cae===null?_0x5a4cae=Object[_0x38e18d(0xf7)](_0x366356,_0x7e8ef1):_0x5a4cae,_0x3deac0;if(typeof Reflect===_0x38e18d(0xe1)&&typeof Reflect['decorate']===_0x38e18d(0x109))_0x363b0e=Reflect[_0x38e18d(0xf1)](_0x6d5c27,_0x366356,_0x7e8ef1,_0x5a4cae);else{for(var _0x66e558=_0x6d5c27[_0x38e18d(0x10c)]-0x1;_0x66e558>=0x0;_0x66e558--)if(_0x3deac0=_0x6d5c27[_0x66e558])_0x363b0e=(_0x4a3a45<0x3?_0x3deac0(_0x363b0e):_0x4a3a45>0x3?_0x3deac0(_0x366356,_0x7e8ef1,_0x363b0e):_0x3deac0(_0x366356,_0x7e8ef1))||_0x363b0e;}return _0x4a3a45>0x3&&_0x363b0e&&Object[_0x38e18d(0x106)](_0x366356,_0x7e8ef1,_0x363b0e),_0x363b0e;},__metadata=this&&this[_0x56f478(0xf5)]||function(_0x2f0c83,_0x18a759){const _0x18e8f7=_0x56f478;if(typeof Reflect===_0x18e8f7(0xe1)&&typeof Reflect[_0x18e8f7(0xfd)]===_0x18e8f7(0x109))return Reflect[_0x18e8f7(0xfd)](_0x2f0c83,_0x18a759);},__param=this&&this[_0x56f478(0xf9)]||function(_0x5973ca,_0x413558){return function(_0x69a1ad,_0x287f77){_0x413558(_0x69a1ad,_0x287f77,_0x5973ca);};};Object[_0x56f478(0x106)](exports,_0x56f478(0xff),{'value':!![]}),exports[_0x56f478(0xf6)]=void 0x0;function _0x3900(_0x5a10b0,_0x2cb795){const _0x204aec=_0x204a();return _0x3900=function(_0x3900b5,_0x22b8c7){_0x3900b5=_0x3900b5-0xd5;let _0x1e2656=_0x204aec[_0x3900b5];return _0x1e2656;},_0x3900(_0x5a10b0,_0x2cb795);}const common_1=require(_0x56f478(0xdc)),typeorm_1=require(_0x56f478(0xe6)),typeorm_2=require('@nestjs/typeorm'),userApps_entity_1=require('./userApps.entity'),gpts_model_entity_1=require('../gpts/gpts.model.entity');let AppService=class AppService{constructor(_0x394ce5,_0x144cbf,_0x7314c5){const _0x13b3c7=_0x56f478;this['gptsModelEntity']=_0x394ce5,this['userAppsEntity']=_0x144cbf,this[_0x13b3c7(0xeb)]=_0x7314c5;}async[_0x56f478(0x104)](_0x13cb88,_0x1f96d3){const _0x5a4392=_0x56f478,{appId:_0x30f456}=_0x13cb88,{id:_0x35fbfb}=_0x1f96d3[_0x5a4392(0xea)];try{const _0x49b5d4=await this['userAppsEntity'][_0x5a4392(0xf0)]({'where':{'appId':_0x30f456,'userId':_0x35fbfb}})[_0x5a4392(0x10d)](_0x4f0ad1=>{const _0x63dc8b=_0x5a4392;common_1['Logger'][_0x63dc8b(0xe0)](_0x4f0ad1);});if(_0x49b5d4){const _0x2e4127=await this['userAppsEntity'][_0x5a4392(0xfe)]({'appId':_0x30f456,'userId':_0x35fbfb})['catch'](_0x186f91=>{const _0x1ca9b7=_0x5a4392;common_1[_0x1ca9b7(0xed)][_0x1ca9b7(0xe0)](_0x186f91);});if(!_0x2e4127||_0x2e4127[_0x5a4392(0x107)]<=0x0)throw new common_1['HttpException'](_0x5a4392(0xf2),common_1[_0x5a4392(0xfc)][_0x5a4392(0xde)]);return'已将应用移除我的应用!';}const _0x4d6c5b=await this[_0x5a4392(0xe2)]['findOne']({'where':{'id':_0x30f456}})['catch'](_0x593405=>{common_1['Logger']['log'](_0x593405);});if(!_0x4d6c5b)throw new common_1[(_0x5a4392(0xec))](_0x5a4392(0xee),common_1[_0x5a4392(0xfc)][_0x5a4392(0xde)]);const _0x5b40e3={'userId':_0x35fbfb,'appId':_0x4d6c5b['id'],'catId':_0x4d6c5b[_0x5a4392(0xef)],'appRole':_0x5a4392(0x102),'public':!![],'status':0x1};return await this['userAppsEntity'][_0x5a4392(0x103)](_0x5b40e3)[_0x5a4392(0x10d)](_0x90305=>{const _0x3e8d75=_0x5a4392;common_1[_0x3e8d75(0xed)][_0x3e8d75(0xe0)](_0x90305);}),_0x4d6c5b[_0x5a4392(0x10e)]=_0x4d6c5b[_0x5a4392(0x10e)]+Math[_0x5a4392(0xe9)](Math['random']()*0xa),await this['gptsModelEntity'][_0x5a4392(0x103)](_0x4d6c5b),_0x5a4392(0xfa);}catch(_0x1024c4){console[_0x5a4392(0xe0)](_0x1024c4);}}async[_0x56f478(0x100)](_0x3721a6,_0x3f0ab5={'page':0x1,'size':0x64}){const _0xf7ae08=_0x56f478,{id:_0x55c762}=_0x3721a6['user'],{page:page=0x1,size:size=0x64}=_0x3f0ab5;try{const _0x2a6b9b=await this[_0xf7ae08(0xeb)][_0xf7ae08(0xe7)](_0xf7ae08(0xd9)+_0x55c762+_0xf7ae08(0xe4)),_0x3ab5eb=await this[_0xf7ae08(0xeb)][_0xf7ae08(0xe7)](_0xf7ae08(0x10b)+_0x55c762+_0xf7ae08(0xd5)+size+_0xf7ae08(0x105)+(page-0x1)*size+_0xf7ae08(0xfb));return{'rows':_0x3ab5eb,'count':Number(_0x2a6b9b[0x0]?.[_0xf7ae08(0xd7)]||0x0)};}catch(_0x2b719b){console['log'](_0x2b719b[_0xf7ae08(0xdd)]);}}};AppService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_2[_0x56f478(0xe8)])(gpts_model_entity_1[_0x56f478(0xe5)])),__param(0x1,(0x0,typeorm_2[_0x56f478(0xe8)])(userApps_entity_1['UserAppsEntity'])),__metadata(_0x56f478(0xf3),[typeorm_1['Repository'],typeorm_1[_0x56f478(0x10a)],typeorm_1['Connection']])],AppService),exports[_0x56f478(0xf6)]=AppService;function _0x204a(){const _0x1a96da=['save','collect','\x20OFFSET\x20','defineProperty','affected','2438541RXCfjs','function','Repository','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gm.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gg.groupName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20AS\x20collectTime\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','length','catch','collectCount','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.createdAt\x20DESC\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','3498uAqQqT','count','__decorate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_apps\x20ua\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_models\x20gm\x20ON\x20ua.appId\x20=\x20gm.id\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20gpts_group\x20gg\x20ON\x20gm.groupId\x20=\x20gg.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ua.userId\x20=\x20','326061rwlVDb','868KIbfUR','@nestjs/common','message','BAD_REQUEST','790hPYqWy','log','object','gptsModelEntity','2631536JnnXYy','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20gm.id\x20IS\x20NOT\x20NULL\x20\x0a\x20\x20\x20\x20\x20\x20','GptsModelEntity','typeorm','query','InjectRepository','round','user','connection','HttpException','Logger','操作失败！','groupId','findOne','decorate','取消移除我的应用失败！','design:paramtypes','182578svUBlo','__metadata','AppService','getOwnPropertyDescriptor','3207ELxvMT','__param','已将应用添加到我的应用！','\x0a\x20\x20\x20\x20\x20\x20','HttpStatus','metadata','delete','__esModule','mineAppsV3','1087704hrIzNt','system'];_0x204a=function(){return _0x1a96da;};return _0x204a();}