'use strict';function _0xf4e4(){const _0x2fc399=['79452CbuPxa','__esModule','CozeConversationService','getOwnPropertyDescriptor','95sYSZhA','function','../../entity/conversation.entity','Injectable','typeorm','BAD_REQUEST','select\x20count(0)\x20as\x20count\x20from\x20','3148488bCUZcR','configEntity','2814497JVXmIH','3006WZBjMK','alllist','defineProperty','object','HttpStatus','4CwvalD','length','__decorate','tableName','InjectRepository','@nestjs/common','decorate','@nestjs/typeorm','6106180rftbpv','nestjs-cls','design:paramtypes','ceil','3327984lfniYU','count','BaseService','HttpException','CozeConversationEntity','metadata','Repository','322WWqUFj','getCondition','382791KsIupB','query'];_0xf4e4=function(){return _0x2fc399;};return _0xf4e4();}const _0x40a3e8=_0x36ef;(function(_0x46abf2,_0x422ad5){const _0x152c7e=_0x36ef,_0x1ea9a5=_0x46abf2();while(!![]){try{const _0x528231=parseInt(_0x152c7e(0xea))/0x1*(parseInt(_0x152c7e(0xfc))/0x2)+parseInt(_0x152c7e(0xec))/0x3*(-parseInt(_0x152c7e(0xd7))/0x4)+-parseInt(_0x152c7e(0xf2))/0x5*(parseInt(_0x152c7e(0xee))/0x6)+-parseInt(_0x152c7e(0xfb))/0x7+-parseInt(_0x152c7e(0xf9))/0x8+parseInt(_0x152c7e(0xe3))/0x9+parseInt(_0x152c7e(0xdf))/0xa;if(_0x528231===_0x422ad5)break;else _0x1ea9a5['push'](_0x1ea9a5['shift']());}catch(_0x312a83){_0x1ea9a5['push'](_0x1ea9a5['shift']());}}}(_0xf4e4,0x46afd));function _0x36ef(_0x52e815,_0x5da9dd){const _0xf4e438=_0xf4e4();return _0x36ef=function(_0x36ef80,_0x57f74a){_0x36ef80=_0x36ef80-0xd6;let _0x209d01=_0xf4e438[_0x36ef80];return _0x209d01;},_0x36ef(_0x52e815,_0x5da9dd);}var __decorate=this&&this[_0x40a3e8(0xd9)]||function(_0x22ab3d,_0x2ad29f,_0x481a4d,_0xb972fb){const _0xafc337=_0x40a3e8;var _0x5c3e8e=arguments[_0xafc337(0xd8)],_0x26bf92=_0x5c3e8e<0x3?_0x2ad29f:_0xb972fb===null?_0xb972fb=Object[_0xafc337(0xf1)](_0x2ad29f,_0x481a4d):_0xb972fb,_0x5cd937;if(typeof Reflect===_0xafc337(0xff)&&typeof Reflect[_0xafc337(0xdd)]===_0xafc337(0xf3))_0x26bf92=Reflect[_0xafc337(0xdd)](_0x22ab3d,_0x2ad29f,_0x481a4d,_0xb972fb);else{for(var _0x1c91ea=_0x22ab3d[_0xafc337(0xd8)]-0x1;_0x1c91ea>=0x0;_0x1c91ea--)if(_0x5cd937=_0x22ab3d[_0x1c91ea])_0x26bf92=(_0x5c3e8e<0x3?_0x5cd937(_0x26bf92):_0x5c3e8e>0x3?_0x5cd937(_0x2ad29f,_0x481a4d,_0x26bf92):_0x5cd937(_0x2ad29f,_0x481a4d))||_0x26bf92;}return _0x5c3e8e>0x3&&_0x26bf92&&Object[_0xafc337(0xfe)](_0x2ad29f,_0x481a4d,_0x26bf92),_0x26bf92;},__metadata=this&&this['__metadata']||function(_0x1c820e,_0x2d7def){const _0x94fd0=_0x40a3e8;if(typeof Reflect===_0x94fd0(0xff)&&typeof Reflect['metadata']===_0x94fd0(0xf3))return Reflect['metadata'](_0x1c820e,_0x2d7def);},__param=this&&this['__param']||function(_0x3ad942,_0x3782e8){return function(_0x50e3b6,_0x168d21){_0x3782e8(_0x50e3b6,_0x168d21,_0x3ad942);};};Object[_0x40a3e8(0xfe)](exports,_0x40a3e8(0xef),{'value':!![]}),exports[_0x40a3e8(0xf0)]=void 0x0;const common_1=require(_0x40a3e8(0xdc)),nestjs_cls_1=require(_0x40a3e8(0xe0)),typeorm_1=require(_0x40a3e8(0xde)),baseService_1=require('../../../../common/admin/baseService'),typeorm_2=require(_0x40a3e8(0xf6)),conversation_entity_1=require(_0x40a3e8(0xf4));let CozeConversationService=class CozeConversationService extends baseService_1[_0x40a3e8(0xe5)]{constructor(_0x56faf4,_0x1bc1b3){const _0x30ab7b=_0x40a3e8;super(_0x1bc1b3,_0x56faf4),this['clsService']=_0x56faf4,this[_0x30ab7b(0xfa)]=_0x1bc1b3;}async[_0x40a3e8(0xfd)](_0x2d405d){const _0x5abc51=_0x40a3e8;try{const {condition:_0x17df66,sort:_0x578eda,page:_0x1df67f,size:_0x1670bd}=this[_0x5abc51(0xeb)](_0x2d405d),_0x4d0a3c=this[_0x5abc51(0xfa)][_0x5abc51(0xe8)],_0x4c9e7a=await this[_0x5abc51(0xfa)]['query'](_0x5abc51(0xf8)+_0x4d0a3c[_0x5abc51(0xda)]+'\x20'+_0x17df66),_0x493cd8=await this[_0x5abc51(0xfa)][_0x5abc51(0xed)]('select\x20chat.*,user.nickname,user.email,user.phone,user.username\x20from\x20coze_conversation_tb\x20chat\x20left\x20join\x20users\x20user\x20on\x20chat.userId=user.id\x20\x20'+_0x17df66+'\x20\x20'+_0x578eda+'\x20limit\x20'+_0x1df67f*_0x1670bd+','+_0x1670bd);return{'rows':_0x493cd8,'size':_0x1670bd,'page':_0x1df67f,'count':parseInt(_0x4c9e7a[0x0]['count']),'totalPage':Math[_0x5abc51(0xe2)](_0x4c9e7a[0x0][_0x5abc51(0xe4)]/_0x1670bd)};}catch(_0x26153f){throw new common_1[(_0x5abc51(0xe6))](_0x26153f['message'],common_1[_0x5abc51(0xd6)][_0x5abc51(0xf7)]);}}};CozeConversationService=__decorate([(0x0,common_1[_0x40a3e8(0xf5)])(),__param(0x1,(0x0,typeorm_1[_0x40a3e8(0xdb)])(conversation_entity_1[_0x40a3e8(0xe7)])),__metadata(_0x40a3e8(0xe1),[nestjs_cls_1['ClsService'],typeorm_2[_0x40a3e8(0xe9)]])],CozeConversationService),exports[_0x40a3e8(0xf0)]=CozeConversationService;