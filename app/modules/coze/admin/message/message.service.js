'use strict';const _0x1f29b5=_0x4e79;(function(_0x38680c,_0x1fda20){const _0x58d559=_0x4e79,_0x47922c=_0x38680c();while(!![]){try{const _0x1bf773=parseInt(_0x58d559(0xbf))/0x1+-parseInt(_0x58d559(0xb1))/0x2+parseInt(_0x58d559(0xd3))/0x3*(parseInt(_0x58d559(0xd0))/0x4)+parseInt(_0x58d559(0xae))/0x5*(parseInt(_0x58d559(0xaa))/0x6)+-parseInt(_0x58d559(0xd2))/0x7+-parseInt(_0x58d559(0xc1))/0x8+parseInt(_0x58d559(0xcc))/0x9*(parseInt(_0x58d559(0xb4))/0xa);if(_0x1bf773===_0x1fda20)break;else _0x47922c['push'](_0x47922c['shift']());}catch(_0x19faa8){_0x47922c['push'](_0x47922c['shift']());}}}(_0x588c,0x636d2));var __decorate=this&&this['__decorate']||function(_0x4a2381,_0x15bdda,_0x554549,_0x29f2cc){const _0x583bd1=_0x4e79;var _0x4bb882=arguments[_0x583bd1(0xac)],_0x432d45=_0x4bb882<0x3?_0x15bdda:_0x29f2cc===null?_0x29f2cc=Object[_0x583bd1(0xc5)](_0x15bdda,_0x554549):_0x29f2cc,_0x4338e5;if(typeof Reflect==='object'&&typeof Reflect[_0x583bd1(0xc9)]===_0x583bd1(0xc2))_0x432d45=Reflect[_0x583bd1(0xc9)](_0x4a2381,_0x15bdda,_0x554549,_0x29f2cc);else{for(var _0x364d15=_0x4a2381[_0x583bd1(0xac)]-0x1;_0x364d15>=0x0;_0x364d15--)if(_0x4338e5=_0x4a2381[_0x364d15])_0x432d45=(_0x4bb882<0x3?_0x4338e5(_0x432d45):_0x4bb882>0x3?_0x4338e5(_0x15bdda,_0x554549,_0x432d45):_0x4338e5(_0x15bdda,_0x554549))||_0x432d45;}return _0x4bb882>0x3&&_0x432d45&&Object[_0x583bd1(0xbd)](_0x15bdda,_0x554549,_0x432d45),_0x432d45;},__metadata=this&&this[_0x1f29b5(0xca)]||function(_0xeab0be,_0x9a272f){const _0x4e5585=_0x1f29b5;if(typeof Reflect==='object'&&typeof Reflect[_0x4e5585(0xce)]===_0x4e5585(0xc2))return Reflect['metadata'](_0xeab0be,_0x9a272f);},__param=this&&this[_0x1f29b5(0xc6)]||function(_0x1eb986,_0x340f91){return function(_0x420ed3,_0x2fccb5){_0x340f91(_0x420ed3,_0x2fccb5,_0x1eb986);};};Object['defineProperty'](exports,_0x1f29b5(0xa8),{'value':!![]}),exports[_0x1f29b5(0xc7)]=void 0x0;const common_1=require(_0x1f29b5(0xb5)),nestjs_cls_1=require(_0x1f29b5(0xcd)),typeorm_1=require(_0x1f29b5(0xba)),baseService_1=require(_0x1f29b5(0xaf)),typeorm_2=require(_0x1f29b5(0xb3)),message_entity_1=require(_0x1f29b5(0xb8));function _0x588c(){const _0x2e1e73=['45VDjzBc','CozeMessageEntity','\x20limit\x20','__esModule','HttpStatus','1031502OSQDxY','clsService','length','where\x20bot.id\x20is\x20not\x20null\x20','20EhyMyl','../../../../common/admin/baseService','query','661014uAgKGC','indexOf','typeorm','7130wRLFlr','@nestjs/common','design:paramtypes','Injectable','../../entity/message.entity','InjectRepository','@nestjs/typeorm','ceil','message','defineProperty','\x20and\x20bot.id\x20is\x20not\x20null\x20','686043KnOQtM','select\x20count(0)\x20as\x20count\x20from\x20coze_message_tb\x20chat\x20left\x20join\x20users\x20user\x20on\x20chat.userId=user.id\x20left\x20join\x20coze_bot_tb\x20bot\x20on\x20chat.botId=bot.botId\x20\x20','5464576QywFRU','function','BaseService','configEntity','getOwnPropertyDescriptor','__param','CozeMessageService','HttpException','decorate','__metadata','select\x20chat.*,user.nickname,user.email,user.phone,user.username,bot.name\x20as\x20botName\x20from\x20coze_message_tb\x20chat\x20left\x20join\x20users\x20user\x20on\x20chat.userId=user.id\x20left\x20join\x20coze_bot_tb\x20bot\x20on\x20chat.botId=bot.botId\x20\x20','333aCiocr','nestjs-cls','metadata','getCondition','34288VzqXWY','count','754901mLvWdr'];_0x588c=function(){return _0x2e1e73;};return _0x588c();}let CozeMessageService=class CozeMessageService extends baseService_1[_0x1f29b5(0xc3)]{constructor(_0x576260,_0x37f331){const _0x1fd955=_0x1f29b5;super(_0x37f331,_0x576260),this[_0x1fd955(0xab)]=_0x576260,this[_0x1fd955(0xc4)]=_0x37f331;}async['alllist'](_0x3d4897){const _0x468f27=_0x1f29b5;try{let {condition:_0xe30c27,sort:_0x572c8d,page:_0x1ccab7,size:_0x948dc7}=this[_0x468f27(0xcf)](_0x3d4897);_0xe30c27[_0x468f27(0xb2)]('where')==-0x1?_0xe30c27=_0x468f27(0xad):_0xe30c27+=_0x468f27(0xbe);const _0x148e10=this['configEntity']['metadata'],_0x4c4bd2=await this[_0x468f27(0xc4)][_0x468f27(0xb0)](_0x468f27(0xc0)+_0xe30c27),_0x4c71ec=await this[_0x468f27(0xc4)][_0x468f27(0xb0)](_0x468f27(0xcb)+_0xe30c27+'\x20\x20'+_0x572c8d+_0x468f27(0xa7)+_0x1ccab7*_0x948dc7+','+_0x948dc7);return{'rows':_0x4c71ec,'size':_0x948dc7,'page':_0x1ccab7,'count':parseInt(_0x4c4bd2[0x0][_0x468f27(0xd1)]),'totalPage':Math[_0x468f27(0xbb)](_0x4c4bd2[0x0]['count']/_0x948dc7)};}catch(_0x10805c){throw new common_1[(_0x468f27(0xc8))](_0x10805c[_0x468f27(0xbc)],common_1[_0x468f27(0xa9)]['BAD_REQUEST']);}}};function _0x4e79(_0x1aa380,_0x40078f){const _0x588ce9=_0x588c();return _0x4e79=function(_0x4e79e9,_0xe944c0){_0x4e79e9=_0x4e79e9-0xa6;let _0xdffbe5=_0x588ce9[_0x4e79e9];return _0xdffbe5;},_0x4e79(_0x1aa380,_0x40078f);}CozeMessageService=__decorate([(0x0,common_1[_0x1f29b5(0xb7)])(),__param(0x1,(0x0,typeorm_1[_0x1f29b5(0xb9)])(message_entity_1[_0x1f29b5(0xa6)])),__metadata(_0x1f29b5(0xb6),[nestjs_cls_1['ClsService'],typeorm_2['Repository']])],CozeMessageService),exports[_0x1f29b5(0xc7)]=CozeMessageService;