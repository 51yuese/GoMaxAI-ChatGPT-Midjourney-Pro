'use strict';const _0x7867da=_0x43a5;function _0x43a5(_0x109fff,_0x250ea7){const _0xec219b=_0xec21();return _0x43a5=function(_0x43a5fd,_0x52422a){_0x43a5fd=_0x43a5fd-0xb9;let _0x27c201=_0xec219b[_0x43a5fd];return _0x27c201;},_0x43a5(_0x109fff,_0x250ea7);}(function(_0x3ce032,_0x1f2fd8){const _0x1aca7b=_0x43a5,_0x11bb76=_0x3ce032();while(!![]){try{const _0x2df5fe=-parseInt(_0x1aca7b(0xe2))/0x1+-parseInt(_0x1aca7b(0xe0))/0x2*(-parseInt(_0x1aca7b(0xcf))/0x3)+parseInt(_0x1aca7b(0xb9))/0x4+-parseInt(_0x1aca7b(0xd8))/0x5+parseInt(_0x1aca7b(0xba))/0x6+parseInt(_0x1aca7b(0xbd))/0x7*(-parseInt(_0x1aca7b(0xc0))/0x8)+-parseInt(_0x1aca7b(0xc1))/0x9*(-parseInt(_0x1aca7b(0xc2))/0xa);if(_0x2df5fe===_0x1f2fd8)break;else _0x11bb76['push'](_0x11bb76['shift']());}catch(_0x5d0d62){_0x11bb76['push'](_0x11bb76['shift']());}}}(_0xec21,0x2f225));var __decorate=this&&this['__decorate']||function(_0x518350,_0x516583,_0x18e2ca,_0x301e52){const _0x2c5d5f=_0x43a5;var _0x2a80cb=arguments[_0x2c5d5f(0xdd)],_0x232e16=_0x2a80cb<0x3?_0x516583:_0x301e52===null?_0x301e52=Object[_0x2c5d5f(0xd6)](_0x516583,_0x18e2ca):_0x301e52,_0x4c277e;if(typeof Reflect===_0x2c5d5f(0xc3)&&typeof Reflect[_0x2c5d5f(0xe5)]==='function')_0x232e16=Reflect['decorate'](_0x518350,_0x516583,_0x18e2ca,_0x301e52);else{for(var _0x3275fe=_0x518350[_0x2c5d5f(0xdd)]-0x1;_0x3275fe>=0x0;_0x3275fe--)if(_0x4c277e=_0x518350[_0x3275fe])_0x232e16=(_0x2a80cb<0x3?_0x4c277e(_0x232e16):_0x2a80cb>0x3?_0x4c277e(_0x516583,_0x18e2ca,_0x232e16):_0x4c277e(_0x516583,_0x18e2ca))||_0x232e16;}return _0x2a80cb>0x3&&_0x232e16&&Object[_0x2c5d5f(0xc8)](_0x516583,_0x18e2ca,_0x232e16),_0x232e16;},__metadata=this&&this[_0x7867da(0xe4)]||function(_0x15d6f8,_0x210df0){const _0x1d8194=_0x7867da;if(typeof Reflect===_0x1d8194(0xc3)&&typeof Reflect[_0x1d8194(0xcb)]==='function')return Reflect[_0x1d8194(0xcb)](_0x15d6f8,_0x210df0);},__param=this&&this[_0x7867da(0xda)]||function(_0x53c7ca,_0x52976e){return function(_0x113b27,_0x95b503){_0x52976e(_0x113b27,_0x95b503,_0x53c7ca);};};Object[_0x7867da(0xc8)](exports,_0x7867da(0xe3),{'value':!![]}),exports[_0x7867da(0xd5)]=void 0x0;const common_1=require(_0x7867da(0xc9)),Role_constant_1=require(_0x7867da(0xc7));let RedisCacheService=class RedisCacheService{constructor(_0x403187){const _0x49cef4=_0x7867da;this[_0x49cef4(0xcc)]=_0x403187;}async[_0x7867da(0xc5)](_0x129256){const _0x4a7d5f=_0x7867da,{key:_0x37c426}=_0x129256;return await this[_0x4a7d5f(0xcc)][_0x4a7d5f(0xc5)](_0x37c426);}async[_0x7867da(0xdf)](_0x3890c6,_0x13549b){const _0xad6b=_0x7867da;try{const {key:_0x2fb717,val:_0x4fb7dd}=_0x3890c6;await this[_0xad6b(0xcc)][_0xad6b(0xdf)](_0x2fb717,_0x4fb7dd),_0x13549b&&await this[_0xad6b(0xcc)][_0xad6b(0xe6)](_0x2fb717,_0x13549b);return;}catch(_0x2541ad){throw new common_1['HttpException'](_0x2541ad,common_1[_0xad6b(0xc6)]['BAD_REQUEST']);}}[_0x7867da(0xbe)](_0x20e262){const _0x5bf60a=_0x7867da;return this[_0x5bf60a(0xcc)]['keys'](_0x20e262+'*');}async[_0x7867da(0xd4)](_0xedc0a7){const _0x30eda3=_0x7867da;return await this[_0x30eda3(0xcc)]['ttl'](_0xedc0a7);}async[_0x7867da(0xce)](_0x3d4aac){const _0x40a17c=_0x7867da,{key:_0xcdbfca}=_0x3d4aac;return await this[_0x40a17c(0xcc)][_0x40a17c(0xce)](_0xcdbfca);}async[_0x7867da(0xcd)](_0x2bbb0a,_0x5627e9){const _0x1db3fe=_0x7867da,_0x11596b=await this[_0x1db3fe(0xcc)][_0x1db3fe(0xdc)](_0x1db3fe(0xde)+_0x2bbb0a,0x0,-0x1);await this[_0x1db3fe(0xe8)](_0x2bbb0a,_0x11596b),await this[_0x1db3fe(0xcc)]['set']('token:'+_0x2bbb0a,_0x5627e9);}async[_0x7867da(0xe8)](_0x10d378,_0x24efce){const _0x4ae0be=_0x7867da;_0x24efce[_0x4ae0be(0xbf)](_0x44cfbb=>{const _0x2d1c24=_0x4ae0be;this[_0x2d1c24(0xcc)][_0x2d1c24(0xce)](_0x2d1c24(0xe1)+_0x10d378+':'+_0x44cfbb);});}async[_0x7867da(0xca)](_0x22cde7,_0x131190){const _0x6fc6dd=_0x7867da,{id:_0x115784,role:_0x1d2b5a}=_0x131190[_0x6fc6dd(0xd2)];if(_0x1d2b5a===_0x6fc6dd(0xc4))return!![];const _0x3e14f0=await this[_0x6fc6dd(0xcc)][_0x6fc6dd(0xc5)](_0x6fc6dd(0xe1)+_0x115784);if(_0x3e14f0===null)return await this[_0x6fc6dd(0xcc)][_0x6fc6dd(0xdf)](_0x6fc6dd(0xe1)+_0x115784,_0x22cde7),!![];if(_0x3e14f0!==_0x22cde7){if(_0x1d2b5a===Role_constant_1[_0x6fc6dd(0xd0)][_0x6fc6dd(0xd1)])return!![];throw new common_1[(_0x6fc6dd(0xe7))](_0x6fc6dd(0xbb),common_1[_0x6fc6dd(0xc6)][_0x6fc6dd(0xbc)]);}}};function _0xec21(){const _0x2aa86c=['3006FjQRma','100JjbqCd','object','visitor','get','HttpStatus','../../common/constants/Role.constant','defineProperty','@nestjs/common','checkTokenAuth','metadata','redisClient','saveToken','del','634503WRfdem','ERole','SUPER','user','design:paramtypes','ttl','RedisCacheService','getOwnPropertyDescriptor','REDIS_CLIENT','586785MHIyTi','Injectable','__param','Inject','zRange','length','tokens:','set','2LwuWFv','token:','266111BcHEVH','__esModule','__metadata','decorate','expire','HttpException','invalidateTokens','1305736qZIwbP','1027374jzDzgJ','您已在其他设备覆盖登录、请您重新登录！','UNAUTHORIZED','27195ABwjTy','fuzzy','forEach','280XcwNbr'];_0xec21=function(){return _0x2aa86c;};return _0xec21();}RedisCacheService=__decorate([(0x0,common_1[_0x7867da(0xd9)])(),__param(0x0,(0x0,common_1[_0x7867da(0xdb)])(_0x7867da(0xd7))),__metadata(_0x7867da(0xd3),[Object])],RedisCacheService),exports['RedisCacheService']=RedisCacheService;