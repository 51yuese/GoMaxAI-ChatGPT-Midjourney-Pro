import{_ as e,a,b as t}from"../KLingIcon3/KLingIcon3.6acffd30.js";import{e as s,p as l,g as i,K as o,r as n,w as r,O as d,D as c,C as u,a4 as p,z as v,y as g,aD as m,B as y,aI as k,ak as f,a9 as x,dQ as b,$ as h,ac as A,k as I,be as C,b3 as w,Z as E,L as P,q as B,aV as L,I as F,ah as D,x as O,X as V,a2 as q,F as T,E as j,A as J,aj as U,G as Q,a1 as H,bD as S,n as Y,ao as K,_ as R,ar as _,a7 as G,a8 as N}from"../main-b114ff11.js";import{u as Z}from"../index/index.5b75f753.js";import{N as M}from"../Popconfirm/Popconfirm.5446b9cc.js";const z="/static/svg/isVIP-fe47bc14.svg",X="/static/svg/videoIcon-6c52fa96.svg",W="/static/svg/copy-902b4ed2.svg",$="/static/svg/KLingIcon2-955f32cc.svg",ee={class:"my-8"},ae=s({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:a}){const t=l(),s=e,A=a,I=i((()=>Boolean(s.taskId))),C=o({squareType:""}),w=n([]),E=async()=>{const e=await x({page:1,size:100,dataType:1});w.value=e.data.rows,w.value.length&&(C.squareType=w.value[0].value)},P=async()=>{await b({id:s.taskId,classify:C.squareType,isRec:1})&&t.success(h("knowledge.releasePublishSucc")),A("close",!0)};return(e,a)=>(r(),d(g(f),{show:I.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",title:e.$t("draw.releasePublish"),onAfterEnter:E,onClose:a[2]||(a[2]=e=>A("close",!1))},{action:c((()=>[u(g(m),{round:"",onClick:a[1]||(a[1]=e=>A("close",!1))},{default:c((()=>[p(v(e.$t("common.cancel")),1)])),_:1}),u(g(m),{round:"",type:"primary",onClick:P},{default:c((()=>[p(v(e.$t("knowledge.release")),1)])),_:1})])),default:c((()=>[y("div",ee,[y("div",null,v(e.$t("draw.chosePublishType")),1),y("div",null,[u(g(k),{class:"dark:bg-[#010102]",value:C.squareType,"onUpdate:value":a[0]||(a[0]=e=>C.squareType=e),placeholder:e.$t("draw.chosePublishType"),"label-field":"name",options:w.value},null,8,["value","placeholder","options"])])])])),_:1},8,["show","title"]))}}),te={class:"video_list_box"},se={class:"topInfoBox"},le={class:"flexL"},ie={class:"p"},oe={key:0,class:"labeItem"},ne={key:1,class:"labeItem"},re={key:2,class:"labeItem"},de={key:3,class:"labeItem"},ce={key:0,class:"flexL"},ue={class:"iconBox"},pe=["onClick"],ve={style:{display:"flex","align-items":"center"}},ge={class:"iconBox"},me=["onClick"],ye={class:"promptBox"},ke=["onClick"],fe={style:{height:"450px"}},xe={style:{padding:"0 4px","margin-top":"18px"}},be={class:"video_desc text-[#8B8C8C] dark:text-[#d3d1d9]"},he={class:"flex items-center justify-between mb-3.5"},Ae={class:"flex gap-2 items-center"},Ie={class:"flex gap-1 items-center cursor-pointer"},Ce={key:0,class:"flex gap-4 items-center cursor-pointer bottmIconBox"},we=["onClick"],Ee={style:{padding:"0 4px","margin-top":"18px"}},Pe={class:"video_desc text-[#8B8C8C] dark:text-[#d3d1d9]"},Be={class:"flex items-center justify-between mb-3.5"},Le={class:"flex gap-2 items-center"},Fe={class:"flex gap-1 items-center cursor-pointer"},De={key:0,class:"flex gap-4 items-center cursor-pointer bottmIconBox"},Oe=["onClick"],Ve={class:"topInfoBox"},qe={class:"flexL"},Te={class:"p"},je={key:0,class:"labeItem"},Je={key:1,class:"labeItem"},Ue={key:2,class:"labeItem"},Qe={key:3,class:"labeItem"},He={key:0,class:"flexL"},Se={class:"iconBox"},Ye=["onClick"],Ke={style:{display:"flex","align-items":"center"}},Re={class:"iconBox"},_e=["onClick"],Ge={class:"promptBox"},Ne=["onClick"],Ze={style:{height:"450px"},class:"generateBox"},Me={class:"text1"},ze={class:"text2"},Xe={style:{padding:"0 4px","margin-top":"18px"}},We={class:"video_desc text-[#8B8C8C] dark:text-[#d3d1d9]"},$e={class:"flex items-center justify-between mb-3.5"},ea={class:"flex gap-2 items-center"},aa={class:"flex gap-1 items-center cursor-pointer"},ta={key:0,class:"flex gap-4 items-center cursor-pointer bottmIconBox"},sa=["onClick"],la={class:"dialog dark:bg-[#1E1F1F] bg-[#EEEEF0]"},ia={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},oa={class:"text-[17px] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{"font-weight":"bold"}},na={class:"input_card"},ra=["src"],da=R(s({__name:"VideoList",props:{title:{type:String,default:"匿名"},tabIndex:{type:Number,default:0}},emits:["updatePage"],setup(s,{expose:o,emit:m}){const k=A(),x=I(),b=C(),R=s,_=l(),G=w("videoBase"),N=E(),z=n(!1),ee=n(""),da=n("");n();const ca=i((()=>R.tabIndex||0)),ua=i((()=>"dark"===N.theme)),pa=n(i((()=>G.videoData.value)));P((()=>pa.value),(e=>{e&&console.log(e,"videoData")})),P((()=>G),(e=>{e&&console.log(e,"videoBase")}));const va=m,ga=n(),ma=()=>{da.value&&da.value.play()},ya=function(e){const a=e.target,{scrollTop:t,offsetHeight:s,scrollHeight:l}=a;l-s-t<=30&&(G.noMore||G.loading||va("updatePage"))},ka=e=>{G.remove((null==e?void 0:e.chatLogId)||e.id)};B((()=>{var e;null==(e=ga.value)||e.addEventListener("scroll",ya)})),L((()=>{var e;null==(e=ga.value)||e.removeEventListener("scroll",ya)})),o({scrollViewFn:(e=0)=>{Y((()=>{var a;console.log(e),null==(a=ga.value)||a.scrollTo({top:e||ga.value.scrollHeight,behavior:"smooth"})}))}});const fa=n(null),xa=n(!1);function ba(e){xa.value&&_.warning(h("ppt.DownloadingPwait")),xa.value=!0,fa.value=_.loading(h("ppt.DownloadingPwait"),{duration:0});const a=new XMLHttpRequest;a.open("get",e.mp4,!0),a.setRequestHeader("Content-Type","application/pdf"),a.responseType="blob",a.onload=function(){if(200===this.status){!function(e,a,t){const s=document.createElement("a"),l=window.URL.createObjectURL(e);s.href=l,s.download=`${a}.${t}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(l)}(this.response,e.prompt,"mp4"),fa.value.destroy()}xa.value=!1},a.onerror=function(){xa.value=!1,fa.value.destroy(),_.error(h("music2.downloadErro"))},a.send()}function ha(e){e?(K({text:e}),_.success(h("chat.copied"))):_.error(h("draw.noDataCopy"))}let Aa=e=>{F.emit("copyVideoData",e.requestParams)},Ia=e=>{var a;if((null==(a=null==x?void 0:x.userInfo)?void 0:a.score)>0){let a=function(){return e.requestParams};F.emit("generateVideo",a)}else _.error(h("common.noPoint"))},Ca=n(h("AIvideo.textToVideo"));F.on("changeTypeIndexName",(e=>{Ca.value=e}));const wa=n(0),Ea=function(e){wa.value=0};return(l,i)=>{const o=D("vue3-video-player");return r(),O("div",te,[pa.value.data&&pa.value.data.length?(r(),O("div",{key:1,ref_key:"scrollView",ref:ga,class:q(["video_card",{works_video_card:0==ca.value,my_video_card:1==ca.value}])},[(r(!0),O(T,null,j(pa.value.data,((s,n)=>{var m,f,x,h,A,I,C,w;return r(),O("div",{class:"video_item bg-white dark:bg-[#0e0f0f] relative",key:s.id},[s.mp4?(r(),O(T,{key:0},[y("div",se,[y("div",le,[i[2]||(i[2]=y("img",{src:X,alt:""},null,-1)),y("span",ie,v(g(Ca)),1),i[3]||(i[3]=y("div",{class:"shu"},null,-1)),-1!=g(k).path.indexOf("KLing")?(r(),O("div",oe,v(null==(m=s.requestParams)?void 0:m.duration)+"S",1)):J("",!0),-1==g(k).path.indexOf("JMeng")?(r(),O("div",ne,v(null==(f=s.requestParams)?void 0:f.model),1)):J("",!0),-1==g(k).path.indexOf("JMeng")&&-1==g(k).path.indexOf("Google")?(r(),O("div",re,v("std"==(null==(x=s.requestParams)?void 0:x.mode)?l.$t("homePage.heightXingNeng"):l.$t("homePage.heightPingZhi")),1)):J("",!0),-1!=g(k).path.indexOf("JMeng")?(r(),O("div",de,v(null==(h=s.requestParams)?void 0:h.aspect_ratio),1)):J("",!0)]),1===R.tabIndex?(r(),O("div",ce,[y("div",ue,[u(g(U),{trigger:"hover"},{trigger:c((()=>[y("img",{src:e,onClick:e=>g(Aa)(s),alt:""},null,8,pe)])),default:c((()=>[y("div",ve,[y("span",null,v(l.$t("AIvideo.useVideoParams")),1)])])),_:2},1024)]),y("div",ge,[y("img",{src:a,onClick:e=>g(Ia)(s),alt:""},null,8,me)])])):J("",!0)]),y("div",ye,[y("span",null,v(s.intro||s.prompt),1),y("img",{src:W,onClick:e=>ha(s.intro||s.prompt),alt:""},null,8,ke)]),y("div",fe,[u(o,{src:s.mp4,cover:s.cover},null,8,["src","cover"])]),y("div",xe,[y("div",be,[y("div",he,[y("div",Ae,[y("div",Ie,[y("span",null,v(l.$t("AIvideo.genTime"))+"：",1)]),y("div",null,v(g(Z)(s.createdAt)),1)]),1===R.tabIndex?(r(),O("div",Ce,[1===R.tabIndex?(r(),O("img",{key:0,src:$,alt:"",style:{width:"16px",height:"16px"},onClick:e=>ba(s)},null,8,we)):J("",!0),1==ca.value?(r(),d(g(M),{key:1,onPositiveClick:e=>ka(s),style:Q(ua.value?"background:#19191B":"background:#F8F9F9")},{trigger:c((()=>i[4]||(i[4]=[y("img",{src:t,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:c((()=>[p(" "+v(l.$t("draw.confirmDelWork")),1)])),_:2},1032,["onPositiveClick","style"])):J("",!0)])):J("",!0)])])])],64)):"error"===s.status?(r(),O(T,{key:1},[i[6]||(i[6]=y("div",{class:"errorResult"},[y("div",{class:"play"},[y("div",null,[y("img",{src:"/static/svg/gerror-f84649ad.svg",width:"80"})])])],-1)),y("div",Ee,[y("div",Pe,[y("div",Be,[y("div",Le,[y("div",Fe,[y("span",null,v(l.$t("AIvideo.genTime"))+"：",1)]),y("div",null,v(g(Z)(s.createdAt)),1)]),1===R.tabIndex?(r(),O("div",De,[1===R.tabIndex?(r(),O("img",{key:0,src:$,alt:"",style:{width:"16px",height:"16px"},onClick:e=>ba(s)},null,8,Oe)):J("",!0),1==ca.value?(r(),d(g(M),{key:1,onPositiveClick:e=>ka(s),style:Q(ua.value?"background:#19191B":"background:#F8F9F9")},{trigger:c((()=>i[5]||(i[5]=[y("img",{src:t,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:c((()=>[p(" "+v(l.$t("draw.confirmDelWork")),1)])),_:2},1032,["onPositiveClick","style"])):J("",!0)])):J("",!0)])])])],64)):(r(),O(T,{key:2},[y("div",Ve,[y("div",qe,[i[7]||(i[7]=y("img",{src:X,alt:""},null,-1)),y("span",Te,v(g(Ca)),1),i[8]||(i[8]=y("div",{class:"shu"},null,-1)),-1!=g(k).path.indexOf("KLing")?(r(),O("div",je,v(null==(A=s.requestParams)?void 0:A.duration)+"S",1)):J("",!0),-1==g(k).path.indexOf("JMeng")?(r(),O("div",Je,v(null==(I=s.requestParams)?void 0:I.model),1)):J("",!0),-1==g(k).path.indexOf("JMeng")&&-1==g(k).path.indexOf("Google")?(r(),O("div",Ue,v("std"==(null==(C=s.requestParams)?void 0:C.mode)?"高性能模式":"高品质模式"),1)):J("",!0),-1!=g(k).path.indexOf("JMeng")?(r(),O("div",Qe,v(null==(w=s.requestParams)?void 0:w.aspect_ratio),1)):J("",!0)]),1===R.tabIndex?(r(),O("div",He,[y("div",Se,[u(g(U),{trigger:"hover"},{trigger:c((()=>[y("img",{src:e,onClick:e=>g(Aa)(s),alt:""},null,8,Ye)])),default:c((()=>[y("div",Ke,[y("span",null,v(l.$t("AIvideo.useVideoParams")),1)])])),_:2},1024)]),y("div",Re,[y("img",{src:a,onClick:e=>g(Ia)(s),alt:""},null,8,_e)])])):J("",!0)]),y("div",Ge,[y("span",null,v(s.intro||s.prompt),1),y("img",{src:W,onClick:e=>ha(s.intro||s.prompt),alt:""},null,8,Ne)]),y("div",Ze,[i[9]||(i[9]=y("img",{src:"data:image/png;base64,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",alt:""},null,-1)),y("div",Me,v(l.$t("AIvideo.geningwait")),1),y("div",ze,v(l.$t("AIvideo.upVipText1")),1),u(g(H),{size:"small"}),y("div",{class:"btnBox",onClick:i[0]||(i[0]=e=>g(b).updateVipDialog(!0))},v(l.$t("AIvideo.lijiVip")),1)]),y("div",Xe,[y("div",We,[y("div",$e,[y("div",ea,[y("div",aa,[y("span",null,v(l.$t("AIvideo.genTime"))+"：",1)]),y("div",null,v(g(Z)(s.createdAt)),1)]),1===R.tabIndex?(r(),O("div",ta,[1===R.tabIndex?(r(),O("img",{key:0,src:$,alt:"",style:{width:"16px",height:"16px"},onClick:e=>ba(s)},null,8,sa)):J("",!0),1==ca.value?(r(),d(g(M),{key:1,onPositiveClick:e=>ka(s),style:Q(ua.value?"background:#19191B":"background:#F8F9F9")},{trigger:c((()=>i[10]||(i[10]=[y("img",{src:t,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:c((()=>[p(" "+v(l.$t("draw.confirmDelWork")),1)])),_:2},1032,["onPositiveClick","style"])):J("",!0)])):J("",!0)])])])],64))])})),128)),u(ae,{taskId:wa.value,onClose:Ea},null,8,["taskId"])],2)):(r(),d(g(V),{key:0,description:l.$t("AIvideo.noVideojilu")},null,8,["description"])),u(g(f),{show:z.value,"mask-closable":!1},{default:c((()=>[y("div",la,[y("div",ia,[y("div",oa,v(null==ee.value.title?s.title:ee.value.title),1),y("div",{class:"close_btn",onClick:i[1]||(i[1]=e=>z.value=!1)},i[11]||(i[11]=[y("img",{src:S},null,-1)]))]),y("div",na,[y("video",{controls:"",src:ee.value.mp4,preload:"auto",ref_key:"videoPlayer",ref:da,onLoadeddata:ma,autoplay:"",style:{width:"100%",height:"350px"}},null,40,ra)])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-f231b467"]]),ca={class:"video_content"},ua={style:{display:"flex","align-items":"center","justify-content":"center",padding:"0 12px"},class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},pa=R(s({__name:"VideoContentMain",props:{generateInfo:Array,succeedVideo:Array,subType:String,title:{type:String,default:"匿名"}},setup(e,{expose:a}){const t=I();C(),_(),i((()=>1===t.userInfo.lifetimeVip||t.userInfo.vipExpire&&new Date(t.userInfo.vipExpire)>new Date));const s=e,l=w("videoBase"),o=n(0),d=n();t.isLogin&&(o.value=1,Y((()=>{setTimeout((()=>{d.value.scrollViewFn()}),1e3)})));function p(e){e!=o.value?(o.value=e,l.list(o.value,s.subType,1).then((a=>{1===e?d.value.scrollViewFn():d.value.scrollViewFn(1)}))):1===e?d.value.scrollViewFn():d.value.scrollViewFn(1)}const v=(e=0)=>{e?l.list(o.value,s.subType,e):l.list(o.value,s.subType)};return B((()=>{l.list(o.value,s.subType,1)})),a({changeTypeIndex:p}),(a,t)=>(r(),O("div",ca,[y("div",ua,[u(g(N),{class:"card-tabs",style:{flex:"1"},"default-value":o.value,size:"large",animated:"","onUpdate:value":p},{default:c((()=>[u(g(G),{name:0,tab:a.$t("AIvideo.WorksSquare")},null,8,["tab"]),u(g(G),{name:1,tab:a.$t("ppt.myWork")},null,8,["tab"])])),_:1},8,["default-value"])]),u(da,{ref_key:"listRef",ref:d,tabIndex:o.value,generateInfo:e.generateInfo,title:e.title,onUpdatePage:v},null,8,["tabIndex","generateInfo","title"])]))}}),[["__scopeId","data-v-fbd342e0"]]);export{pa as V,z as _};
