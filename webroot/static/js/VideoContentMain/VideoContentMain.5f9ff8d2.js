import{_ as e,a,b as t}from"../KLingIcon3/KLingIcon3.6acffd30.js";import{e as l,p as s,g as i,K as o,r as n,w as r,O as d,D as c,C as u,a4 as v,z as p,y as g,aD as m,B as y,aI as f,ak as k,a9 as x,dO as b,$ as h,ac as A,k as I,bd as C,b2 as w,Z as E,L as P,q as B,aT as L,I as F,ah as D,x as O,X as T,a2 as V,F as q,E as j,A as J,aj as U,G as Q,a1 as H,bC as S,n as Y,ao as K,_ as R,ar as _,a7 as G,a8 as N}from"../main-a0b53047.js";import{u as Z}from"../index/index.5b75f753.js";import{N as z}from"../Popconfirm/Popconfirm.a6d67891.js";const X="/static/svg/isVIP-fe47bc14.svg",M="/static/svg/videoIcon-6c52fa96.svg",W="/static/svg/copy-902b4ed2.svg",$="/static/svg/KLingIcon2-955f32cc.svg",ee={class:"my-8"},ae=l({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:a}){const t=s(),l=e,A=a,I=i((()=>Boolean(l.taskId))),C=o({squareType:""}),w=n([]),E=async()=>{const e=await x({page:1,size:100,dataType:1});w.value=e.data.rows,w.value.length&&(C.squareType=w.value[0].value)},P=async()=>{await b({id:l.taskId,classify:C.squareType,isRec:1})&&t.success(h("knowledge.releasePublishSucc")),A("close",!0)};return(e,a)=>(r(),d(g(k),{show:I.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",title:e.$t("draw.releasePublish"),onAfterEnter:E,onClose:a[2]||(a[2]=e=>A("close",!1))},{action:c((()=>[u(g(m),{round:"",onClick:a[1]||(a[1]=e=>A("close",!1))},{default:c((()=>[v(p(e.$t("common.cancel")),1)])),_:1}),u(g(m),{round:"",type:"primary",onClick:P},{default:c((()=>[v(p(e.$t("knowledge.release")),1)])),_:1})])),default:c((()=>[y("div",ee,[y("div",null,p(e.$t("draw.chosePublishType")),1),y("div",null,[u(g(f),{class:"dark:bg-[#010102]",value:C.squareType,"onUpdate:value":a[0]||(a[0]=e=>C.squareType=e),placeholder:e.$t("draw.chosePublishType"),"label-field":"name",options:w.value},null,8,["value","placeholder","options"])])])])),_:1},8,["show","title"]))}}),te={class:"video_list_box"},le={class:"topInfoBox"},se={class:"flexL"},ie={class:"p"},oe={key:0,class:"labeItem"},ne={class:"labeItem"},re={key:1,class:"labeItem"},de={key:2,class:"labeItem"},ce={key:0,class:"flexL"},ue={class:"iconBox"},ve=["onClick"],pe={style:{display:"flex","align-items":"center"}},ge={class:"iconBox"},me=["onClick"],ye={class:"promptBox"},fe=["onClick"],ke={style:{height:"450px"}},xe={style:{padding:"0 4px","margin-top":"18px"}},be={class:"video_desc text-[#8B8C8C] dark:text-[#d3d1d9]"},he={class:"flex items-center justify-between mb-3.5"},Ae={class:"flex gap-2 items-center"},Ie={class:"flex gap-1 items-center cursor-pointer"},Ce={key:0,class:"flex gap-4 items-center cursor-pointer bottmIconBox"},we=["onClick"],Ee={style:{padding:"0 4px","margin-top":"18px"}},Pe={class:"video_desc text-[#8B8C8C] dark:text-[#d3d1d9]"},Be={class:"flex items-center justify-between mb-3.5"},Le={class:"flex gap-2 items-center"},Fe={class:"flex gap-1 items-center cursor-pointer"},De={key:0,class:"flex gap-4 items-center cursor-pointer bottmIconBox"},Oe=["onClick"],Te={class:"topInfoBox"},Ve={class:"flexL"},qe={class:"p"},je={key:0,class:"labeItem"},Je={class:"labeItem"},Ue={key:1,class:"labeItem"},Qe={key:2,class:"labeItem"},He={key:0,class:"flexL"},Se={class:"iconBox"},Ye=["onClick"],Ke={style:{display:"flex","align-items":"center"}},Re={class:"iconBox"},_e=["onClick"],Ge={class:"promptBox"},Ne=["onClick"],Ze={style:{height:"450px"},class:"generateBox"},ze={class:"text1"},Xe={class:"text2"},Me={style:{padding:"0 4px","margin-top":"18px"}},We={class:"video_desc text-[#8B8C8C] dark:text-[#d3d1d9]"},$e={class:"flex items-center justify-between mb-3.5"},ea={class:"flex gap-2 items-center"},aa={class:"flex gap-1 items-center cursor-pointer"},ta={key:0,class:"flex gap-4 items-center cursor-pointer bottmIconBox"},la=["onClick"],sa={class:"dialog dark:bg-[#1E1F1F] bg-[#EEEEF0]"},ia={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},oa={class:"text-[17px] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{"font-weight":"bold"}},na={class:"input_card"},ra=["src"],da=R(l({__name:"VideoList",props:{title:{type:String,default:"匿名"},tabIndex:{type:Number,default:0}},emits:["updatePage"],setup(l,{expose:o,emit:m}){const f=A(),x=I(),b=C(),R=l,_=s(),G=w("videoBase"),N=E(),X=n(!1),ee=n(""),da=n("");n();const ca=i((()=>R.tabIndex||0)),ua=i((()=>"dark"===N.theme)),va=n(i((()=>G.videoData.value)));P((()=>va.value),(e=>{e&&console.log(e,"videoData")})),P((()=>G),(e=>{e&&console.log(e,"videoBase")}));const pa=m,ga=n(),ma=()=>{da.value&&da.value.play()},ya=function(e){const a=e.target,{scrollTop:t,offsetHeight:l,scrollHeight:s}=a;s-l-t<=30&&(G.noMore||G.loading||pa("updatePage"))},fa=e=>{G.remove((null==e?void 0:e.chatLogId)||e.id)};B((()=>{var e;null==(e=ga.value)||e.addEventListener("scroll",ya)})),L((()=>{var e;null==(e=ga.value)||e.removeEventListener("scroll",ya)})),o({scrollViewFn:(e=0)=>{Y((()=>{var a;console.log(e),null==(a=ga.value)||a.scrollTo({top:e||ga.value.scrollHeight,behavior:"smooth"})}))}});const ka=n(null),xa=n(!1);function ba(e){xa.value&&_.warning(h("ppt.DownloadingPwait")),xa.value=!0,ka.value=_.loading(h("ppt.DownloadingPwait"),{duration:0});const a=new XMLHttpRequest;a.open("get",e.mp4,!0),a.setRequestHeader("Content-Type","application/pdf"),a.responseType="blob",a.onload=function(){if(200===this.status){!function(e,a,t){const l=document.createElement("a"),s=window.URL.createObjectURL(e);l.href=s,l.download=`${a}.${t}`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s)}(this.response,e.prompt,"mp4"),ka.value.destroy()}xa.value=!1},a.onerror=function(){xa.value=!1,ka.value.destroy(),_.error(h("music2.downloadErro"))},a.send()}function ha(e){e?(K({text:e}),_.success(h("chat.copied"))):_.error(h("draw.noDataCopy"))}let Aa=e=>{F.emit("copyVideoData",e.requestParams)},Ia=e=>{var a;if((null==(a=null==x?void 0:x.userInfo)?void 0:a.score)>0){let a=function(){return e.requestParams};F.emit("generateVideo",a)}else _.error(h("common.noPoint"))},Ca=n(h("AIvideo.textToVideo"));F.on("changeTypeIndexName",(e=>{Ca.value=e}));const wa=n(0),Ea=function(e){wa.value=0};let Pa=n(!1);return F.on("setBeginTime",(e=>{Pa.value=e})),(s,i)=>{const o=D("vue3-video-player");return r(),O("div",te,[!g(Pa)||va.value.data&&va.value.data.length?(r(),O("div",{key:1,ref_key:"scrollView",ref:ga,class:V(["video_card",{works_video_card:0==ca.value,my_video_card:1==ca.value}])},[(r(!0),O(q,null,j(va.value.data,((l,n)=>{var m,k,x,h,A,I,C,w;return r(),O("div",{class:"video_item bg-white dark:bg-[#0e0f0f] relative",key:l.id},[l.mp4?(r(),O(q,{key:0},[y("div",le,[y("div",se,[i[2]||(i[2]=y("img",{src:M,alt:""},null,-1)),y("span",ie,p(g(Ca)),1),i[3]||(i[3]=y("div",{class:"shu"},null,-1)),-1!=g(f).path.indexOf("KLing")?(r(),O("div",oe,p(null==(m=l.requestParams)?void 0:m.duration)+"S",1)):J("",!0),y("div",ne,p(null==(k=null==l?void 0:l.modelInfo)?void 0:k.label),1),-1==g(f).path.indexOf("JMeng")&&-1==g(f).path.indexOf("Google")?(r(),O("div",re,p("std"==(null==(x=l.requestParams)?void 0:x.mode)?s.$t("homePage.heightXingNeng"):s.$t("homePage.heightPingZhi")),1)):J("",!0),-1!=g(f).path.indexOf("JMeng")?(r(),O("div",de,p(null==(h=l.requestParams)?void 0:h.aspect_ratio),1)):J("",!0)]),1===R.tabIndex?(r(),O("div",ce,[y("div",ue,[u(g(U),{trigger:"hover"},{trigger:c((()=>[y("img",{src:e,onClick:e=>g(Aa)(l),alt:""},null,8,ve)])),default:c((()=>[y("div",pe,[y("span",null,p(s.$t("AIvideo.useVideoParams")),1)])])),_:2},1024)]),y("div",ge,[y("img",{src:a,onClick:e=>g(Ia)(l),alt:""},null,8,me)])])):J("",!0)]),y("div",ye,[y("span",null,p(l.intro||l.prompt),1),y("img",{src:W,onClick:e=>ha(l.intro||l.prompt),alt:""},null,8,fe)]),y("div",ke,[u(o,{preload:"metadata",src:l.mp4,cover:l.cover},null,8,["src","cover"])]),y("div",xe,[y("div",be,[y("div",he,[y("div",Ae,[y("div",Ie,[y("span",null,p(s.$t("AIvideo.genTime"))+"：",1)]),y("div",null,p(g(Z)(l.createdAt)),1)]),1===R.tabIndex?(r(),O("div",Ce,[1===R.tabIndex?(r(),O("img",{key:0,src:$,alt:"",style:{width:"16px",height:"16px"},onClick:e=>ba(l)},null,8,we)):J("",!0),1==ca.value?(r(),d(g(z),{key:1,onPositiveClick:e=>fa(l),style:Q(ua.value?"background:#19191B":"background:#F8F9F9")},{trigger:c((()=>i[4]||(i[4]=[y("img",{src:t,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:c((()=>[v(" "+p(s.$t("draw.confirmDelWork")),1)])),_:2},1032,["onPositiveClick","style"])):J("",!0)])):J("",!0)])])])],64)):"error"===l.status?(r(),O(q,{key:1},[i[6]||(i[6]=y("div",{class:"errorResult"},[y("div",{class:"play"},[y("div",null,[y("img",{src:"/static/svg/gerror-f84649ad.svg",width:"80"})])])],-1)),y("div",Ee,[y("div",Pe,[y("div",Be,[y("div",Le,[y("div",Fe,[y("span",null,p(s.$t("AIvideo.genTime"))+"：",1)]),y("div",null,p(g(Z)(l.createdAt)),1)]),1===R.tabIndex?(r(),O("div",De,[1===R.tabIndex?(r(),O("img",{key:0,src:$,alt:"",style:{width:"16px",height:"16px"},onClick:e=>ba(l)},null,8,Oe)):J("",!0),1==ca.value?(r(),d(g(z),{key:1,onPositiveClick:e=>fa(l),style:Q(ua.value?"background:#19191B":"background:#F8F9F9")},{trigger:c((()=>i[5]||(i[5]=[y("img",{src:t,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:c((()=>[v(" "+p(s.$t("draw.confirmDelWork")),1)])),_:2},1032,["onPositiveClick","style"])):J("",!0)])):J("",!0)])])])],64)):(r(),O(q,{key:2},[y("div",Te,[y("div",Ve,[i[7]||(i[7]=y("img",{src:M,alt:""},null,-1)),y("span",qe,p(g(Ca)),1),i[8]||(i[8]=y("div",{class:"shu"},null,-1)),-1!=g(f).path.indexOf("KLing")?(r(),O("div",je,p(null==(A=l.requestParams)?void 0:A.duration)+"S",1)):J("",!0),y("div",Je,p(null==(I=null==l?void 0:l.modelInfo)?void 0:I.label),1),-1==g(f).path.indexOf("JMeng")&&-1==g(f).path.indexOf("Google")?(r(),O("div",Ue,p("std"==(null==(C=l.requestParams)?void 0:C.mode)?"高性能模式":"高品质模式"),1)):J("",!0),-1!=g(f).path.indexOf("JMeng")?(r(),O("div",Qe,p(null==(w=l.requestParams)?void 0:w.aspect_ratio),1)):J("",!0)]),1===R.tabIndex?(r(),O("div",He,[y("div",Se,[u(g(U),{trigger:"hover"},{trigger:c((()=>[y("img",{src:e,onClick:e=>g(Aa)(l),alt:""},null,8,Ye)])),default:c((()=>[y("div",Ke,[y("span",null,p(s.$t("AIvideo.useVideoParams")),1)])])),_:2},1024)]),y("div",Re,[y("img",{src:a,onClick:e=>g(Ia)(l),alt:""},null,8,_e)])])):J("",!0)]),y("div",Ge,[y("span",null,p(l.intro||l.prompt),1),y("img",{src:W,onClick:e=>ha(l.intro||l.prompt),alt:""},null,8,Ne)]),y("div",Ze,[i[9]||(i[9]=y("img",{src:"data:image/png;base64,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",alt:""},null,-1)),y("div",ze,p(s.$t("AIvideo.geningwait")),1),y("div",Xe,p(s.$t("AIvideo.upVipText1")),1),u(g(H),{size:"small"}),y("div",{class:"btnBox",onClick:i[0]||(i[0]=e=>g(b).updateVipDialog(!0))},p(s.$t("AIvideo.lijiVip")),1)]),y("div",Me,[y("div",We,[y("div",$e,[y("div",ea,[y("div",aa,[y("span",null,p(s.$t("AIvideo.genTime"))+"：",1)]),y("div",null,p(g(Z)(l.createdAt)),1)]),1===R.tabIndex?(r(),O("div",ta,[1===R.tabIndex?(r(),O("img",{key:0,src:$,alt:"",style:{width:"16px",height:"16px"},onClick:e=>ba(l)},null,8,la)):J("",!0),1==ca.value?(r(),d(g(z),{key:1,onPositiveClick:e=>fa(l),style:Q(ua.value?"background:#19191B":"background:#F8F9F9")},{trigger:c((()=>i[10]||(i[10]=[y("img",{src:t,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:c((()=>[v(" "+p(s.$t("draw.confirmDelWork")),1)])),_:2},1032,["onPositiveClick","style"])):J("",!0)])):J("",!0)])])])],64))])})),128)),u(ae,{taskId:wa.value,onClose:Ea},null,8,["taskId"])],2)):(r(),d(g(T),{key:0,description:s.$t("AIvideo.noVideojilu")},null,8,["description"])),u(g(k),{show:X.value,"mask-closable":!1},{default:c((()=>[y("div",sa,[y("div",ia,[y("div",oa,p(null==ee.value.title?l.title:ee.value.title),1),y("div",{class:"close_btn",onClick:i[1]||(i[1]=e=>X.value=!1)},i[11]||(i[11]=[y("img",{src:S},null,-1)]))]),y("div",na,[y("video",{controls:"",src:ee.value.mp4,preload:"auto",ref_key:"videoPlayer",ref:da,onLoadeddata:ma,autoplay:"",style:{width:"100%",height:"350px"}},null,40,ra)])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-2f1b1e7a"]]),ca={class:"video_content"},ua={style:{display:"flex","align-items":"center","justify-content":"center",padding:"0 12px"},class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},va=R(l({__name:"VideoContentMain",props:{generateInfo:Array,succeedVideo:Array,subType:String,title:{type:String,default:"匿名"}},setup(e,{expose:a}){const t=I();C(),_(),i((()=>1===t.userInfo.lifetimeVip||t.userInfo.vipExpire&&new Date(t.userInfo.vipExpire)>new Date));const l=e,s=w("videoBase"),o=n(0),d=n();t.isLogin&&(o.value=1,Y((()=>{setTimeout((()=>{d.value.scrollViewFn()}),1e3)})));function v(e){e!=o.value?(o.value=e,s.list(o.value,l.subType,1).then((a=>{1===e?d.value.scrollViewFn():d.value.scrollViewFn(1)}))):1===e?d.value.scrollViewFn():d.value.scrollViewFn(1)}const p=(e=0)=>{e?s.list(o.value,l.subType,e):s.list(o.value,l.subType)};return B((()=>{s.list(o.value,l.subType,1)})),a({changeTypeIndex:v}),(a,t)=>(r(),O("div",ca,[y("div",ua,[u(g(N),{class:"card-tabs",style:{flex:"1"},"default-value":o.value,size:"large",animated:"","onUpdate:value":v},{default:c((()=>[u(g(G),{name:0,tab:a.$t("AIvideo.WorksSquare")},null,8,["tab"]),u(g(G),{name:1,tab:a.$t("ppt.myWork")},null,8,["tab"])])),_:1},8,["default-value"])]),u(da,{ref_key:"listRef",ref:d,tabIndex:o.value,generateInfo:e.generateInfo,title:e.title,onUpdatePage:p},null,8,["tabIndex","generateInfo","title"])]))}}),[["__scopeId","data-v-fbd342e0"]]);export{va as V,X as _};
