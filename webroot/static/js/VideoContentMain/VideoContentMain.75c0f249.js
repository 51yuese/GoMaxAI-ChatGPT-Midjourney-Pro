import{e,N as t,O as a,P as s,Q as l,W as i,i as o,av as r,r as n,j as d,k as c,aV as u,_ as p,ag as v,a5 as g,ah as A,a8 as m,a3 as x,a4 as k,a1 as y,$ as b,a0 as h,a2 as f,a6 as E,H as w,a7 as C,aq as F,bi as B,ar as N,K as R,ad as S}from"../main-33bcbc1f.js";import{C as L}from"../index/index.c042e923.js";import{u as D}from"../index/index.5b75f753.js";import{N as I}from"../Popconfirm/Popconfirm.372e0cee.js";const M={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},j=[s("path",{d:"M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),s("path",{d:"M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z",fill:"currentColor"},null,-1)],Y=e({name:"ReloadOutline",render:function(e,s){return t(),a("svg",M,j)}});function O(e){return l({url:"/cm/getConfig",data:e})}const U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABHNJREFUaAXtmk9oXUUUxmuq1ogttWKrooVshKIiKG7EhSDFgiiIm7pwobhSiYgg4kKzaauLIhVB3Eh0Z3Zu4p+KoSiPZ7h5d845M+/OmZuahLexEWJrjIuqvfa772XRvjyT6L3vJvACH4G58O58d86cMzO/2bFj8LdNv8DU1NS1cRzvbTT8HUR+pAq5yB2cpdn9tVpt+D9/RqLZ/ZaaR4XCKWE9bUm/7bfE6OdC6TtE6QObNpJl2TXOtfaJpI9a1nExmgrpJSHN+i02+quQ/shGX5OZcChN010bNoSQci69x7G+Yik0mHRRyC/1V2FJSH9jo39YDhfE+K9trC8nSXLLho1kWbZTZuQQUfIMm+RNIR2rQMfY+E/IJHUmvyKkP0usnxKld27GyFCzOX97k5r3VqWEkwcthWdhBiODkMb8RMLpaSTLsqEoiq6bm5u7odVqDUdRdKP3fvdcPLe3X8L7WrXWMOZAOpnuSuvpHpgR0mNCeZitb0REDjhz9hGR9Dkh/2r/FUYd+SMis3etTmaYQTS0Qxrz819GZGJiYufCwsLN1NDHrNETTDrJ5Gf6LSGNrNGPLelRF5096Jy7HoY2bMQ5d5NIOCwcPhCj82L0glBYqUKW9BchXxOjT4v8dABhtmEj09PuNiE9Lqwk5C/2u0as8b5Fa/RDiZuH/Q9+94aNIAMI6emqil23EUSDRpcn9yiSzKaMIKV1/2D/K3i7D2EF8xPJZmBka4zKYET8yNVzhI3+JZQv1JaY9FyJWhTW5c77OivrQkckrFjSeSatM+mXZUk4fCMcmsJ57cLHy1C/CpvsHRPjlvQlR7NHylP6lGU92e54nnaLNcKklih5yzb0/p6rzP/5YGxsbKheT/eISV8QCl/ZfFQKHhEmVTb+XZHk4XwlitVowYIJ7+dHnOjrYvR7IV0uPLTY+CU2WhfSz9iE98qRnhQKH4nR74RCi83q8qjAOVJtPRkY6a4jgxEp5KhoEFprhVY4z+SFSc9Y0smyhHMqYTX5Esj4PwtPv2J8oNi/z8Y/b03yeGmi5Mm8XlGoCenvxRshjS+fKI7aWB9KG+mtZQkHbUT6ouXwhZCeL9wIk/dskhMShyeSJLm7LDEn91kObzgOZ0qp7EIey4Umx8k4jkvLk74txk+1T2z07+JHpL0fWRYTUo79dFkS8lF+nntF2h6k37XSb1UnKOsu4y8BNq15iI3Gq7e67VityszaoZXzmRw2hVPAgF3boe1gBMkGsAnkDBgQTHNbGgFsAjkDBgTTBE3bVkbASwCbQM5yDOha+7oMrDZs5dACbAKAAgbEKADQrva76/9WNgJy1tXhXg2A8eDYHQTcqa5VZSzNwGcAm0DOgAF79burHTcKAOPBsS0DOIbOQVkVZvxFwCaQM2BAMM2uDvdqwLUI3CjIYTz2B0DAVywZ+mYIxY5AzoABwTQxP3r1u2c7bhQAxoNjo0D2Wx3YdBwYEEyzZ0fXe4ADONwoaO8Rqrk8AwwIpglAu15/B8+36hf4B6TN7ZNKtvosAAAAAElFTkSuQmCC",W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAABYJJREFUWAntmE2MFEUUxxdERUAiigEViB8hgWAigcSLHrjgATYBgolGxJgYNepBjeJFg+vBo0cPhqAGTdSNSFASTTSZoGhgbabqvdfVXa96ccDVFYjLh6ssyEfL6+mWpqdxZ9gdsiY7Sae6q6rf+9W/X72qmo6O8d//RIFKpTKJyC0kcssRebVcck973UJpG3PDMObwNMRoow+uSsC/yyX3qKON0jbmgJWq3YDafkjgThBwXL/cCamTtjEHjHhgBgFvvQCbQfNWaRsHHqkC4wqPVMHh3h9TCtcqtclENEupYD5ANGf37mh6HMcT8oNoBbirq2uiMX03GrNvnlLh7Yg4w/O8q/P2LvtejFerfA9q+xppuws1v0M67PQ8b0reaLPAcUc8we6y1wcUPWGAt/hguw1G6wS8KELeflP3MmrEcCmosIs0a9QsOXY/avsBkVspymSGmgWOqtHNBu06AvcFAv9K4A4SugoAP4vo7ozj+KrMZsslwMGpVA1fQmU9Aj6by7F9COH7WocPeB7PFMPNAJseM9ugXeWD3Y6aD2f2UPMZQv6MiNdUKrXJLYNmLyilZPV6l5CPE/C5zAGBO0PAh1Hze6h4BQBMDcPwpkstHNJmjJnmQ7jWJ/spgT1SEOAsAlcJ3Abpl/lvuezv75+CKniOtP2+4CAWVVDzIdJ2i9ZhZwTRnEsBe56Z5/tuLSF/4mOyz5ABp8t3Up4m4o8R962IoujalkGzFyqVeJLR0SKC8GUC+wNq+1fBkYDXBBrRrkPgb4vtBPydD/wYAX9EwD8X2335esg7kj7UO7e7u/vyYzgDR48XCDRoqwh4sOhUlEZlt4G2+4ttBPYAgt1OwIca2/goIe8ECB7WWt+W+RtxaYy5BsDeQWA3IPBuAj6Vj+lk0tQH8ncJlNQNpn2yMJD5METgvhJYop9mjfqeWaCV2jc/VXpXCp0BtFoOEfI2Il4fBPtvkdAbsaplBiSxBxDcLdCp0g3hUaJwcTBHRVmBlck44sWiDDRfJw7qStsNEtNlE/FS0OkES2JWlG07bAZ+Iabr2aOY8kqAz6WLw44LMdumMMggi6VAZ9mjnqfzR6OLcmxMyIM+uO2SuiQbjMoEk9VIKXsfkeskzWuklGepL8Lmn3N5+kcC/qNE3QEf+RtE9whR79z8u8X7IgMirwggWlJ6JhQ4n9znWE/uA1LKs9QXDeefZYbLpkVSHoEV6D/TDHKSNB8XWAkDY8zs4RaFIgMB9xK6zQKd95nci6ICmeVLKRN4cp0NnQsVSXgk0En2+JLAueS4j3azKCuwzYRBkYHASg7vFaULLjs6kjAAHih80gGpb+hcUvHvMq55jUH3tEH3OKlwmYTBcMpm5lpiaKlz5mGUy5YYyjvbIz64tXLqGGW2BnNxHE8EsA+mW8/8YlP+lcuAUfMxAvsMM89sZ5IX29WqvZWUfZ7AHWsqLEuBIdlObiIVrJTTQjMTp0G6YSpk/4vICxD5KcnV9U3RRXm8XGFUvFpOEfldGAGfJmBLwJtIBw8Z4xanxsXBqFxG870+ulcIeE+WoXIKy7HsIKJd1TBuOeqQ5ihNJVkMyTbwJIEdoPpe1xJyMJqXD8ykbX96wM38pqU7kaRH5ZY3AEsKQuCdhKWrVcHQRZ+sbW1yUAVtt4TYu7QBWOtoEWp+C4F/yX2StsE04WMIwe5FFT7Z00ONS3oUDUwnipYR8NdUX0CG0pjKnZbbrqz4knkzlIQK8NvkRXeV/iskq5FsMozm+w1Eb/rg9qTnMDkOXSGl7Skf+TfS3OPr8A35E6evr++6hnDIKiQf1mq1yc64xYaiR89vuF9M/qICfv089BW43Ks+RC+QjtaDFywR2Hbm/2zc4+W4AuMK/IcC/wBIAXfiq0b1ZAAAAABJRU5ErkJggg==",P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABFZJREFUWAntWF1oXFUQ3vpDrT95UPFF1Nqaqvj3IGgVhFoQURFaQVTwQevPe30zgg+tFOsvPhT64KNabFOKmgaLPwFJ0xVvcuebOXfPmXM3bprUGG2xraD9UVk5N9nkbnZbm03aIuzCcM/OmXvOd4c5Z76ZQqGFX5KUb5LYvSHQYSZ3UqDVZsLk/hDoPiF9SiO9uoWtWnsFSFcK9CuBPyLQf5qBCzom/Vvg9xvyGyRKl7e22xzfStN0sZCuFegBQQDQ3Hs5/RGO3UdmSO+a41atmUdRdCmzPmKgXwu5vacTA+0XdnsM+Y2W7IrWdsy9FUXRxdbaq0TS5dbaFc0EcDeLlO8XuBc41pdrYrj8UoNAXxRyzyaJW215+I5m6wVdHJc6kyi5vlhMO6rV6oU5SDPDarV6AbNfxqzrGX6fQN0phX0q0NEzEQMdEWjZQPWU65GSkOtmdk8C5WsKhcKiGWRTo3AyDaevMJwI9Hguhpqe0IWcnzxM7jdh3WsofbhSqVzSAJBZHxXSHoGeWMjN57IWk/7J5DaUSsOdjQBj+xxDWaB/zWXRBbY9zrH9JI7tqjbAFj37P/YgoE8L9NuQX4XcyPkQA+8F7gMMllY2xGACf6+IdhnRLUL6qZDuPKcC3WbIbw7Egn/gZQ0A+/r6LlLSa0usawTuLQPdck6F/EYZdHcmSXJ5SBoNAIOCB+3dhv12w36/gR6siZAeFOiEYR037Cdq+vxT4H8R0nGB+1mgv+bnwljgJ7L5zCYbT68/Oa8Ose2K48rSpuCC0rK9T9j1CXzgcfkMckxCOoL/cipd5eeqHFgN66iw9hjWb6Y+aNomZArDPmG43UL6hUBtY7Zyh0D6TsjNLQD0E0z6ukh5rcC/zdAfBX6GarEeZdYeIfsEAkGAxrM+8IRwiOt0HZN7nin7kN/rbeYFUMuBpPb29i6W2D8mrLsFM0yaoT8Z1veKxWLH0FDpBiG3p35zH1LYZqLkNqB0O8h9yNDD9TbzAMhQjSK+JbhexK4S0m2GZwiFgVYEuilwxTRNOwz85/WbZyHThe/djYGuMem7Aj1UbzMPgCHuarER8mTIl/kYYmgFsd00Nja2pL/fXSFwswBmtcmrcWyXhnVCrAlcG+A0Z2x7sHbvnOYebMdgODTzuKjbp7ja9mD7ov4PutW+ZtqH5LwektCZCkQztOckLj3EcNtn9XBGAiENhHVgILlyqsczTfknSwj/WmjrifhbEbv3F5YPko4TldZj0K025N/kye5qvvV7WOC6idyDzLrGwBfzZNSwHhNyWzFoH8+6s6Q7DevRvM0ZxWApHu6cKjlDFVfnASYtMrldDB/ac7m5bHxysk5x3Qbam1VwOZtQNDE5EdJdBu6zrDnQ2EUbNfDPhAZqjbw0PENNmkAfMPA7mFxldul4Nv4L/AEDbwz8xyLl6xpA5RXVQnURgMuyLgP7rQz97myLYb9DYLsS0nsGBgaW5PGE8b/XJSlWYvl2SgAAAABJRU5ErkJggg==",Q={class:"video_list_box"},T={style:{padding:"0 4px","margin-top":"18px"}},X={class:"video_desc text-[#8B8C8C] dark:text-[#d3d1d9]"},q={class:"flex items-center justify-between mb-3.5"},H={class:"flex gap-2 items-center"},V={class:"flex gap-4 items-center cursor-pointer"},Z=["onClick"],K={class:"line-clamp-2"},z={class:"errorResult"},G={class:"play"},J={class:"errorReload",style:{"justify-content":"center"}},_={style:{"margin-top":"12px",padding:"0 4px"}},$={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ee={class:"text-[#8B8C8C] dark:text-[#6C6E79] text-[12px]"},te={class:"video_desc text-[#8B8C8C] dark:text-[#6C6E79] text-[12px]"},ae={class:"flex items-center justify-between mb-3.5"},se={class:"flex gap-2 items-center"},le={class:"flex gap-4 items-center cursor-pointer"},ie=["onClick"],oe={style:{"margin-top":"12px","margin-bottom":"8px"}},re={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ne={class:"text-[#8B8C8C] dark:text-[#6C6E79] text-[12px]"},de={class:"video_desc text-[#8B8C8C] dark:text-[#6C6E79] text-[12px]"},ce={class:"task-delete"},ue={class:"dialog dark:bg-[#1E1F1F] bg-[#EEEEF0]"},pe={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},ve={class:"text-[17px] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{"font-weight":"bold"}},ge={class:"input_card"},Ae=["src"],me=S(e({__name:"VideoList",props:{title:{type:String,default:"匿名"},tabIndex:{type:Number,default:0}},emits:["updatePage"],setup(e,{expose:l,emit:S}){const L=e,M=i(),j=o("videoBase"),O=r(),me=n(!1),xe=n(""),ke=n("");n();const ye=d((()=>L.tabIndex||0)),be=d((()=>"dark"===O.theme)),he=d((()=>j.videoData.value)),fe=S,Ee=n(),we=()=>{ke.value&&ke.value.play()},Ce=function(e){const t=e.target,{scrollTop:a,offsetHeight:s,scrollHeight:l}=t;l-s-a<=30&&(j.noMore||j.loading||fe("updatePage"))},Fe=e=>{j.remove((null==e?void 0:e.chatLogId)||e.id)};c((()=>{var e;null==(e=Ee.value)||e.addEventListener("scroll",Ce)})),u((()=>{var e;null==(e=Ee.value)||e.removeEventListener("scroll",Ce)})),l({scrollViewFn:()=>{R((()=>{var e;null==(e=Ee.value)||e.scrollTo({top:Ee.value.scrollHeight,behavior:"smooth"})}))}});const Be=n(null),Ne=n(!1);function Re(e){Ne.value&&M.warning("正在下载中，请稍后"),Ne.value=!0,Be.value=M.loading("正在下载中，请稍后",{duration:0});const t=new XMLHttpRequest;t.open("get",e.mp4,!0),t.setRequestHeader("Content-Type","application/pdf"),t.responseType="blob",t.onload=function(){if(200===this.status){!function(e,t,a){const s=document.createElement("a"),l=window.URL.createObjectURL(e);s.href=l,s.download=`${t}.${a}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(l)}(this.response,e.prompt,"mp4"),Be.value.destroy()}Ne.value=!1},t.onerror=function(){Ne.value=!1,Be.value.destroy(),M.error("下载失败")},t.send()}return(l,i)=>{const o=p("vue3-video-player");return t(),a("div",Q,[he.value.data&&he.value.data.length?(t(),a("div",{key:1,ref_key:"scrollView",ref:Ee,class:m(["video_card",{works_video_card:0==ye.value,my_video_card:1==ye.value}])},[(t(!0),a(x,null,k(he.value.data,((e,l)=>(t(),a("div",{class:"video_item bg-white dark:bg-[#222325] relative",key:e.id},[e.mp4?(t(),a(x,{key:0},[s("div",null,[y(o,{src:e.mp4,cover:e.cover||g("/static/png/videoBg-fde5e17c.png")},null,8,["src","cover"])]),s("div",T,[s("div",X,[s("div",q,[s("div",H,[i[1]||(i[1]=s("div",{class:"flex gap-1 items-center cursor-pointer"},[s("img",{src:U,alt:"",style:{width:"20px",height:"20px"}}),s("span",null,"复制描述")],-1)),s("div",null,b(g(D)(e.createdAt)),1)]),s("div",V,[1===L.tabIndex?(t(),a("img",{key:0,src:W,alt:"",style:{width:"20px",height:"20px"},onClick:t=>Re(e)},null,8,Z)):h("",!0),1==ye.value?(t(),v(g(I),{key:1,onPositiveClick:t=>Fe(e),style:w(be.value?"background:#19191B":"background:#F8F9F9")},{trigger:f((()=>i[2]||(i[2]=[s("img",{src:P,alt:"",style:{width:"20px",height:"20px"}},null,-1)]))),default:f((()=>[i[3]||(i[3]=E(" 您确认要删除任务吗？ "))])),_:2},1032,["onPositiveClick","style"])):h("",!0)])]),s("div",K,b(e.intro||e.prompt),1)])])],64)):"error"===e.status?(t(),a(x,{key:1},[s("div",z,[s("div",G,[i[5]||(i[5]=s("div",null,[s("img",{src:"/static/svg/gerror-f84649ad.svg",width:"80"})],-1)),s("div",J,[y(g(C),{class:m({rotate:e.generateLoading})},{default:f((()=>[y(g(Y))])),_:2},1032,["class"]),i[4]||(i[4]=E("重新生成 "))])])]),s("div",_,[s("div",$,[i[6]||(i[6]=s("div",null,null,-1)),s("div",ee,b(g(D)(e.createdAt)),1)]),s("div",te,[s("div",ae,[s("div",se,[i[7]||(i[7]=s("div",{class:"flex gap-1 items-center cursor-pointer"},[s("img",{src:U,alt:"",style:{width:"20px",height:"20px"}}),s("span",null,"复制描述")],-1)),s("div",null,b(g(D)(e.createdAt)),1)]),s("div",le,[1===L.tabIndex?(t(),a("img",{key:0,src:W,alt:"",style:{width:"20px",height:"20px"},onClick:t=>Re(e)},null,8,ie)):h("",!0),1==ye.value?(t(),v(g(I),{key:1,onPositiveClick:t=>Fe(e),style:w(be.value?"background:#19191B":"background:#F8F9F9")},{trigger:f((()=>i[8]||(i[8]=[s("img",{src:P,alt:"",style:{width:"20px",height:"20px"}},null,-1)]))),default:f((()=>[i[9]||(i[9]=E(" 您确认要删除任务吗？ "))])),_:2},1032,["onPositiveClick","style"])):h("",!0)])])])])],64)):(t(),a(x,{key:2},[y(g(F),{style:{width:"100%",height:"230px","padding-top":"0 !important"}},{description:f((()=>i[10]||(i[10]=[E(" 视频生成中 ")]))),_:1}),s("div",oe,[s("div",re,[s("div",ne,b(g(D)(e.createdAt)),1)]),s("div",de,b(e.intro),1),1==ye.value?(t(),v(g(I),{key:0,onPositiveClick:t=>Fe(e),style:w(be.value?"background:#19191B":"background:#F8F9F9")},{trigger:f((()=>[s("div",ce,[s("div",{class:m(["delete-icon",be.value?"icon-delete-copy":"delete-icon"])},null,2),i[11]||(i[11]=s("span",null,"删除",-1))])])),default:f((()=>[i[12]||(i[12]=E(" 您确认要删除任务吗？ "))])),_:2},1032,["onPositiveClick","style"])):h("",!0)])],64))])))),128))],2)):(t(),v(g(A),{key:0,description:"暂无视频记录哦"})),y(g(N),{show:me.value,"mask-closable":!1},{default:f((()=>[s("div",ue,[s("div",pe,[s("div",ve,b(null==xe.value.title?e.title:xe.value.title),1),s("div",{class:"close_btn",onClick:i[0]||(i[0]=e=>me.value=!1)},i[13]||(i[13]=[s("img",{src:B},null,-1)]))]),s("div",ge,[s("video",{controls:"",src:xe.value.mp4,preload:"auto",ref_key:"videoPlayer",ref:ke,onLoadeddata:we,autoplay:"",style:{width:"100%",height:"350px"}},null,40,Ae)])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-70421708"]]),xe={class:"video_content"},ke={style:{display:"flex","align-items":"center","justify-content":"center",padding:"0 12px"}},ye={style:{display:"flex",width:"449px","align-items":"stretch",height:"40px",border:"1px solid rgb(70, 70, 70)","border-radius":"10px"}},be=S(e({__name:"VideoContentMain",props:{generateInfo:Array,succeedVideo:Array,subType:String,title:{type:String,default:"匿名"}},setup(e,{expose:l}){const i=e,r=o("videoBase"),d=n(0),u=n();function p(e){e!=d.value?(d.value=e,r.list(d.value,i.subType,1).then((t=>{1===e&&u.value.scrollViewFn()}))):u.value.scrollViewFn()}const v=()=>{r.list(d.value,i.subType)};return c((()=>{r.list(d.value,i.subType,1)})),l({changeTypeIndex:p}),(l,i)=>(t(),a("div",xe,[s("div",ke,[s("div",ye,[s("div",{class:m([0==d.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),style:{"flex-grow":"1"},onClick:i[0]||(i[0]=e=>p(0))},"作品广场 ",2),s("div",{class:m([1==d.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),style:{"flex-grow":"1"},onClick:i[1]||(i[1]=e=>p(1))},"我的作品 ",2)])]),y(me,{ref_key:"listRef",ref:u,tabIndex:d.value,generateInfo:e.generateInfo,title:e.title,onUpdatePage:v},null,8,["tabIndex","generateInfo","title"]),y(L,{class:"end bg-[#F8F9F9] dark:bg-[#19191B] text-[#A3A5A6] dark:text-[#76777A]"})]))}}),[["__scopeId","data-v-94e97471"]]);export{be as V,O as g};
