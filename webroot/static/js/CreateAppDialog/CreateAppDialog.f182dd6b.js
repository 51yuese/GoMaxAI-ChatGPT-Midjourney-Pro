import{e,p as l,k as a,r as t,g as o,aB as d,av as s,w as r,$ as u,D as i,y as p,B as n,x as v,C as g,bf as m,by as c,aS as f,T as h,U as b,A as k,bi as w,bg as y,Z as A,am as x,a1 as D,bR as _,cw as C,s as I,J as M,_ as F}from"../main-be2ae0f3.js";const N={class:"add_app_Dialog"},j={class:"title"},q={class:"add_main"},V={class:"item_form"},U={class:"item_form"},H={class:"item_form"},L={class:"botton_card"},T=F(e({__name:"CreateAppDialog",setup(e){const F=l(),T=a();t(!1);const B=o((()=>T.createAppDialog));!async function(){const e=await d({status:1});e.data.rows.forEach((e=>{var l={label:"",value:""};l.label=e.groupName,l.value=e.id,Z.value.push(l)}))}();const Z=t([]),z=t([]),S=["jpg","jpeg","png"];t([{label:"是",value:"true"},{label:"否",value:"false"}]);const E=t({groupId:"",modelName:"",desc:"",logo:"",demoData:"",gptsApp:!1,modelId:"",status:1,relModel:"",preset:""}),G={groupId:[{required:!0,message:"请选择应用所属分类"}],modelName:[{required:!0,message:"请填写您的应用名称",trigger:"blur"}],desc:[{required:!0,message:"请填写您的应用描述",trigger:"blur"}],logo:[{required:!0,message:"请上传应用的logo",trigger:"blur"}],demoData:[{required:!0,message:"请填写应用示例",trigger:"blur"}],gptsApp:[{required:!0,message:"请选择应用是否为gpts应用"}],modelId:[{required:!0,message:"请填写gpts模型id",trigger:"blur"}],preset:[{required:!0,message:"请填写预设信息",trigger:"blur"}]};function P(e){E.value.groupId=e}function R(e){E.value.relModel=e}const J=t([]);function $(e){if("finished"===e.file.status||"removed"===e.file.status)return;const l=e.file.type.split("/")[1];if("pending"===e.file.status&&S.includes(l)){let a=new FormData;a.append("filename",e.file.id+"."+l),a.append("file",e.file.file),a.append("dir","feedback-upload"),_(a).then((e=>{console.log(e),200==e.code?E.value.logo=e.data:F.error("图片上传失败")}))}}async function K(){var e,l,a,t,o,d,s,r,u,i,p,n,v,g,m,c,f,h;if(!E.value.groupId)return void F.error("请选择所属分类");if(!E.value.modelName)return void F.error("请输入应用名称");if(!E.value.desc)return void F.error("请输入应用描述");if(!E.value.relModel)return void F.error("请选择应用关联模型");if(!E.value.preset)return void F.error("请输入预设信息");if(!E.value.logo)return void F.error("请上传应用Logo");if(!E.value.demoData)return void F.error("请输入示例内容");var b={};1==(null==(e=E.value)?void 0:e.gptsApp)?(b.modelName=null==(l=E.value)?void 0:l.modelName,b.desc=null==(a=E.value)?void 0:a.desc,b.logo=null==(t=E.value)?void 0:t.logo,b.demoData=null==(o=E.value)?void 0:o.demoData,b.gptsApp=null==(d=E.value)?void 0:d.gptsApp,b.modelId=null==(s=E.value)?void 0:s.modelId,b.relModel=null==(r=E.value)?void 0:r.relModel,b.status=null==(u=E.value)?void 0:u.status):(b.groupId=null==(i=E.value)?void 0:i.groupId,b.modelName=null==(p=E.value)?void 0:p.modelName,b.desc=null==(n=E.value)?void 0:n.desc,b.logo=null==(v=E.value)?void 0:v.logo,b.demoData=null==(g=E.value)?void 0:g.demoData,b.gptsApp=null==(m=E.value)?void 0:m.gptsApp,b.relModel=null==(c=E.value)?void 0:c.relModel,b.status=null==(f=E.value)?void 0:f.status,b.preset=null==(h=E.value)?void 0:h.preset);const k=await C(b);T.updateCreateAppDialog(!1),I({type:"latest"}).then((e=>{let l=e.data[0];M.emit("ExploreApp",l)})),200==k.code?(F.success("应用添加成功"),T.updateCreateAppDialog(!1)):F.error(k.data)}return s({keyType:"",model:"",modelType:"chat",page:1,size:99}).then((e=>{var l;J.value=e.data.rows.map((e=>({...e,label:e.modelName,value:e.model}))),E.value.relModel=null==(l=J.value[0])?void 0:l.value})),(e,l)=>(r(),u(p(D),{show:B.value,style:{width:"30%","border-radius":"12px"},"mask-closable":!1,class:"dark:bg-[#1A1D21] bg-[#FFF]"},{default:i((()=>[n("div",N,[n("div",j,[l[9]||(l[9]=n("div",{style:{display:"flex","align-items":"center"}},[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[n("path",{d:"M6.7791 2.09329H3.73258C2.81211 2.09329 2.06592 2.83948 2.06592 3.75996V6.80648C2.06592 7.72695 2.81211 8.47314 3.73258 8.47314H6.7791C7.69958 8.47314 8.44577 7.72695 8.44577 6.80648V3.75996C8.44577 2.83948 7.69958 2.09329 6.7791 2.09329Z",stroke:"#3e6ae7","stroke-width":"1.67"}),n("path",{d:"M6.7791 11.3871H3.73258C2.81211 11.3871 2.06592 12.1333 2.06592 13.0538V16.1003C2.06592 17.0207 2.81211 17.7669 3.73258 17.7669H6.7791C7.69958 17.7669 8.44577 17.0207 8.44577 16.1003V13.0538C8.44577 12.1333 7.69958 11.3871 6.7791 11.3871Z",stroke:"#3e6ae7","stroke-width":"1.67"}),n("path",{d:"M16.1255 2.09329H13.079C12.1585 2.09329 11.4124 2.83948 11.4124 3.75996V6.80648C11.4124 7.72695 12.1585 8.47314 13.079 8.47314H16.1255C17.046 8.47314 17.7922 7.72695 17.7922 6.80648V3.75996C17.7922 2.83948 17.046 2.09329 16.1255 2.09329Z",stroke:"#3e6ae7","stroke-width":"1.67"}),n("path",{d:"M14.6023 11.7558V17.3982",stroke:"#3e6ae7","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}),n("path",{d:"M17.4236 14.577L11.7812 14.577",stroke:"#3e6ae7","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"})]),n("div",{style:{"margin-left":"10px","font-size":"15px"}},"新增应用")],-1)),n("div",null,[(r(),v("svg",{onClick:l[0]||(l[0]=e=>p(T).updateCreateAppDialog(!1)),xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},l[8]||(l[8]=[n("path",{d:"M5.83301 5.83334L14.1663 14.1667",stroke:"#A3A5A6","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),n("path",{d:"M5.83301 14.1667L14.1663 5.83334",stroke:"#A3A5A6","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))])]),n("div",q,[g(p(y),{model:E.value,rules:G,ref:"createFormRef","label-placement":"left","label-width":"auto"},{default:i((()=>[n("div",V,[g(p(m),{label:"所属分类",path:"groupId"},{default:i((()=>[g(p(c),{options:Z.value,placeholder:"请选择应用所属分类","on-update:value":P},null,8,["options"])])),_:1}),g(p(m),{label:"应用名称",path:"modelName"},{default:i((()=>[g(p(f),{value:E.value.modelName,"onUpdate:value":l[1]||(l[1]=e=>E.value.modelName=e),tabindex:"1",placeholder:"请输入应用的名称"},null,8,["value"])])),_:1}),g(p(m),{label:"应用描述",path:"desc"},{default:i((()=>[g(p(f),{value:E.value.desc,"onUpdate:value":l[2]||(l[2]=e=>E.value.desc=e),tabindex:"1",placeholder:"请输入应用的描述"},null,8,["value"])])),_:1}),0==E.value.gptsApp?(r(),u(p(m),{key:0,label:"使用模型",path:"groupId"},{default:i((()=>[h(n("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>E.value.relModel=e),style:{display:"none",position:"absolute",left:"2px","border-radius":"8px",width:"90%",height:"90%","z-index":"999","text-indent":"10px"},class:"dark:bg-[#1A1D21] bg-[#FFFFFF]"},null,512),[[b,E.value.relModel]]),g(p(c),{options:J.value,value:E.value.relModel,placeholder:"请选择使用模型","on-update:value":R},null,8,["options","value"])])),_:1})):k("",!0),0==E.value.gptsApp?(r(),u(p(m),{key:1,label:"预设信息",path:"preset"},{default:i((()=>[g(p(f),{type:"textarea",value:E.value.preset,"onUpdate:value":l[4]||(l[4]=e=>E.value.preset=e),tabindex:"1",placeholder:"请填写应用预设信息、用于给AI预设身份、系统预设信息、systemMessage..."},null,8,["value"])])),_:1})):k("",!0)]),n("div",U,[g(p(m),{label:"应用Logo",path:"logo"},{default:i((()=>[g(p(w),{accept:".jpg,.jpeg,.png",action:"",max:1,"default-file-list":z.value,"default-upload":!1,"on-change":$,"list-type":"image-card"},null,8,["default-file-list"])])),_:1}),g(p(m),{label:"示列内容",path:"demoData"},{default:i((()=>[g(p(f),{type:"textarea",value:E.value.demoData,"onUpdate:value":l[5]||(l[5]=e=>E.value.demoData=e),tabindex:"1",placeholder:"请填写应用的demo示例数据、每换行一次表示一个新的示例..."},null,8,["value"])])),_:1})]),n("div",H,[1==E.value.gptsApp?(r(),u(p(m),{key:0,label:"GPTS模型ID",path:"modelId"},{default:i((()=>[g(p(f),{value:E.value.modelId,"onUpdate:value":l[6]||(l[6]=e=>E.value.modelId=e),tabindex:"1",placeholder:"请填写GPTS模型ID号(官网创建后产生的ID)"},null,8,["value"])])),_:1})):k("",!0)])])),_:1},8,["model"]),n("div",L,[g(p(x),{strong:"",secondary:"",type:"tertiary",class:"cancel dark:bg-[#15171A] bg-[#F4F4F4] dark:text-[#F4F4F4] text-[#03060C]",style:{cursor:"pointer"},onClick:l[7]||(l[7]=e=>p(T).updateCreateAppDialog(!1))},{default:i((()=>l[10]||(l[10]=[A("取消 ")]))),_:1}),g(p(x),{class:"confirm",color:"#3e6ae7",style:{cursor:"pointer"},type:"primary",onClick:K},{default:i((()=>l[11]||(l[11]=[A("确认新增 ")]))),_:1})])])])])),_:1},8,["show"]))}}),[["__scopeId","data-v-26f82142"]]);export{T as C};
