import{e,p as a,k as l,r as t,g as o,aU as d,aQ as s,w as r,O as u,D as i,B as p,x as n,y as v,C as g,bG as m,aI as c,aJ as f,P as h,a0 as b,A as k,bJ as w,bH as y,a4 as A,aD as _,ak as x,ce as D,cz as C,s as I,I as M,_ as F}from"../main-4156cf5e.js";const N={class:"add_app_Dialog"},j={class:"title"},q={class:"add_main"},V={class:"item_form"},H={class:"item_form"},U={class:"item_form"},L={class:"botton_card"},z=F(e({__name:"CreateAppDialog",setup(e){const F=a(),z=l();t(!1);const T=o((()=>z.createAppDialog));!async function(){const e=await d({status:1});e.data.rows.forEach((e=>{var a={label:"",value:""};a.label=e.groupName,a.value=e.id,B.value.push(a)}))}();const B=t([]),G=t([]),P=["jpg","jpeg","png"];t([{label:"是",value:"true"},{label:"否",value:"false"}]);const Z=t({groupId:"",modelName:"",desc:"",logo:"",demoData:"",gptsApp:!1,modelId:"",status:1,relModel:"",preset:""}),E={groupId:[{required:!0,message:"请选择应用所属分类"}],modelName:[{required:!0,message:"请填写您的应用名称",trigger:"blur"}],desc:[{required:!0,message:"请填写您的应用描述",trigger:"blur"}],logo:[{required:!0,message:"请上传应用的logo",trigger:"blur"}],demoData:[{required:!0,message:"请填写应用示例",trigger:"blur"}],gptsApp:[{required:!0,message:"请选择应用是否为gpts应用"}],modelId:[{required:!0,message:"请填写gpts模型id",trigger:"blur"}],preset:[{required:!0,message:"请填写预设信息",trigger:"blur"}]};function J(e){Z.value.groupId=e}function S(e){Z.value.relModel=e}const O=t([]);function Q(e){if("finished"===e.file.status||"removed"===e.file.status)return;const a=e.file.type.split("/")[1];if("pending"===e.file.status&&P.includes(a)){let l=new FormData;l.append("filename",e.file.id+"."+a),l.append("file",e.file.file),l.append("dir","feedback-upload"),D(l).then((e=>{console.log(e),200==e.code?Z.value.logo=e.data:F.error("图片上传失败")}))}}async function R(){var e,a,l,t,o,d,s,r,u,i,p,n,v,g,m,c,f,h;if(!Z.value.groupId)return void F.error("请选择所属分类");if(!Z.value.modelName)return void F.error("请输入应用名称");if(!Z.value.desc)return void F.error("请输入应用描述");if(!Z.value.relModel)return void F.error("请选择应用关联模型");if(!Z.value.preset)return void F.error("请输入预设信息");if(!Z.value.logo)return void F.error("请上传应用Logo");if(!Z.value.demoData)return void F.error("请输入示例内容");var b={};1==(null==(e=Z.value)?void 0:e.gptsApp)?(b.modelName=null==(a=Z.value)?void 0:a.modelName,b.desc=null==(l=Z.value)?void 0:l.desc,b.logo=null==(t=Z.value)?void 0:t.logo,b.demoData=null==(o=Z.value)?void 0:o.demoData,b.gptsApp=null==(d=Z.value)?void 0:d.gptsApp,b.modelId=null==(s=Z.value)?void 0:s.modelId,b.relModel=null==(r=Z.value)?void 0:r.relModel,b.status=null==(u=Z.value)?void 0:u.status):(b.groupId=null==(i=Z.value)?void 0:i.groupId,b.modelName=null==(p=Z.value)?void 0:p.modelName,b.desc=null==(n=Z.value)?void 0:n.desc,b.logo=null==(v=Z.value)?void 0:v.logo,b.demoData=null==(g=Z.value)?void 0:g.demoData,b.gptsApp=null==(m=Z.value)?void 0:m.gptsApp,b.relModel=null==(c=Z.value)?void 0:c.relModel,b.status=null==(f=Z.value)?void 0:f.status,b.preset=null==(h=Z.value)?void 0:h.preset);const k=await C(b);z.updateCreateAppDialog(!1),I({type:"latest"}).then((e=>{let a=e.data[0];M.emit("ExploreApp",a)})),200==k.code?(F.success("应用添加成功"),z.updateCreateAppDialog(!1)):F.error(k.data)}return s({keyType:"",model:"",modelType:"chat",page:1,size:99}).then((e=>{var a;O.value=e.data.rows.map((e=>({...e,label:e.modelName,value:e.model}))),Z.value.relModel=null==(a=O.value[0])?void 0:a.value})),(e,a)=>(r(),u(v(x),{show:T.value,style:{width:"30%","border-radius":"12px"},"mask-closable":!1,class:"dark:bg-[#1A1D21] bg-[#FFF]"},{default:i((()=>[p("div",N,[p("div",j,[a[9]||(a[9]=p("div",{style:{display:"flex","align-items":"center"}},[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[p("path",{d:"M6.7791 2.09329H3.73258C2.81211 2.09329 2.06592 2.83948 2.06592 3.75996V6.80648C2.06592 7.72695 2.81211 8.47314 3.73258 8.47314H6.7791C7.69958 8.47314 8.44577 7.72695 8.44577 6.80648V3.75996C8.44577 2.83948 7.69958 2.09329 6.7791 2.09329Z",stroke:"#3e6ae7","stroke-width":"1.67"}),p("path",{d:"M6.7791 11.3871H3.73258C2.81211 11.3871 2.06592 12.1333 2.06592 13.0538V16.1003C2.06592 17.0207 2.81211 17.7669 3.73258 17.7669H6.7791C7.69958 17.7669 8.44577 17.0207 8.44577 16.1003V13.0538C8.44577 12.1333 7.69958 11.3871 6.7791 11.3871Z",stroke:"#3e6ae7","stroke-width":"1.67"}),p("path",{d:"M16.1255 2.09329H13.079C12.1585 2.09329 11.4124 2.83948 11.4124 3.75996V6.80648C11.4124 7.72695 12.1585 8.47314 13.079 8.47314H16.1255C17.046 8.47314 17.7922 7.72695 17.7922 6.80648V3.75996C17.7922 2.83948 17.046 2.09329 16.1255 2.09329Z",stroke:"#3e6ae7","stroke-width":"1.67"}),p("path",{d:"M14.6023 11.7558V17.3982",stroke:"#3e6ae7","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}),p("path",{d:"M17.4236 14.577L11.7812 14.577",stroke:"#3e6ae7","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"})]),p("div",{style:{"margin-left":"10px","font-size":"15px"}},"新增应用")],-1)),p("div",null,[(r(),n("svg",{onClick:a[0]||(a[0]=e=>v(z).updateCreateAppDialog(!1)),xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},a[8]||(a[8]=[p("path",{d:"M5.83301 5.83334L14.1663 14.1667",stroke:"#A3A5A6","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),p("path",{d:"M5.83301 14.1667L14.1663 5.83334",stroke:"#A3A5A6","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))])]),p("div",q,[g(v(y),{model:Z.value,rules:E,ref:"createFormRef","label-placement":"left","label-width":"auto"},{default:i((()=>[p("div",V,[g(v(m),{label:"所属分类",path:"groupId"},{default:i((()=>[g(v(c),{options:B.value,placeholder:"请选择应用所属分类","on-update:value":J},null,8,["options"])])),_:1}),g(v(m),{label:"应用名称",path:"modelName"},{default:i((()=>[g(v(f),{value:Z.value.modelName,"onUpdate:value":a[1]||(a[1]=e=>Z.value.modelName=e),tabindex:"1",placeholder:"请输入应用的名称"},null,8,["value"])])),_:1}),g(v(m),{label:"应用描述",path:"desc"},{default:i((()=>[g(v(f),{value:Z.value.desc,"onUpdate:value":a[2]||(a[2]=e=>Z.value.desc=e),tabindex:"1",placeholder:"请输入应用的描述"},null,8,["value"])])),_:1}),0==Z.value.gptsApp?(r(),u(v(m),{key:0,label:"使用模型",path:"groupId"},{default:i((()=>[h(p("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>Z.value.relModel=e),style:{display:"none",position:"absolute",left:"2px","border-radius":"8px",width:"90%",height:"90%","z-index":"999","text-indent":"10px"},class:"dark:bg-[#1A1D21] bg-[#FFFFFF]"},null,512),[[b,Z.value.relModel]]),g(v(c),{options:O.value,value:Z.value.relModel,placeholder:"请选择使用模型","on-update:value":S},null,8,["options","value"])])),_:1})):k("",!0),0==Z.value.gptsApp?(r(),u(v(m),{key:1,label:"预设信息",path:"preset"},{default:i((()=>[g(v(f),{type:"textarea",value:Z.value.preset,"onUpdate:value":a[4]||(a[4]=e=>Z.value.preset=e),tabindex:"1",placeholder:"请填写应用预设信息、用于给AI预设身份、系统预设信息、systemMessage..."},null,8,["value"])])),_:1})):k("",!0)]),p("div",H,[g(v(m),{label:"应用Logo",path:"logo"},{default:i((()=>[g(v(w),{accept:".jpg,.jpeg,.png",action:"",max:1,"default-file-list":G.value,"default-upload":!1,"on-change":Q,"list-type":"image-card"},null,8,["default-file-list"])])),_:1}),g(v(m),{label:"示列内容",path:"demoData"},{default:i((()=>[g(v(f),{type:"textarea",value:Z.value.demoData,"onUpdate:value":a[5]||(a[5]=e=>Z.value.demoData=e),tabindex:"1",placeholder:"请填写应用的demo示例数据、每换行一次表示一个新的示例..."},null,8,["value"])])),_:1})]),p("div",U,[1==Z.value.gptsApp?(r(),u(v(m),{key:0,label:"GPTS模型ID",path:"modelId"},{default:i((()=>[g(v(f),{value:Z.value.modelId,"onUpdate:value":a[6]||(a[6]=e=>Z.value.modelId=e),tabindex:"1",placeholder:"请填写GPTS模型ID号(官网创建后产生的ID)"},null,8,["value"])])),_:1})):k("",!0)])])),_:1},8,["model"]),p("div",L,[g(v(_),{strong:"",secondary:"",type:"tertiary",class:"cancel dark:bg-[#15171A] bg-[#F4F4F4] dark:text-[#F4F4F4] text-[#03060C]",style:{cursor:"pointer"},onClick:a[7]||(a[7]=e=>v(z).updateCreateAppDialog(!1))},{default:i((()=>a[10]||(a[10]=[A("取消 ")]))),_:1,__:[10]}),g(v(_),{class:"confirm",color:"#3e6ae7",style:{cursor:"pointer"},type:"primary",onClick:R},{default:i((()=>a[11]||(a[11]=[A("确认新增 ")]))),_:1,__:[11]})])])])])),_:1},8,["show"]))}}),[["__scopeId","data-v-26f82142"]]);export{z as C};
