import{e,l as a,k as s,g as l,aa as t,Z as n,J as o,r as i,L as c,p as d,bR as r,I as u,q as v,w as g,x as p,G as A,y as m,B as k,z as P,C as I,D as h,ai as b,F as y,E as T,a1 as w,al as f,aG as C,A as D,a3 as z,bE as x,bD as M,aI as R,bm as B,aC as S,aj as O,_ as J,a5 as H,ag as U,a$ as W}from"../main-bf8e7d49.js";import{_ as X}from"../nicknameIcon/nicknameIcon.d32dd917.js";import{N as j,_ as E,a as F}from"../startIcon2/startIcon2.f3fd8383.js";import{_ as Q}from"../drop3icon/drop3icon.8e32d6d7.js";import{g as V,a as N,b as Y,d as Z,t as q,c as L,e as K,f as G}from"./knowledge.4f347d65.js";import{N as _,a as $}from"../Col/Col.d7596a37.js";const ee={key:0,class:"type2"},ae={class:"topBox"},se=["src"],le={class:"AIname ellipsi"},te={class:"AItext ellipsi"},ne={class:"nicknameBox"},oe={class:"btnBox"},ie={class:"item"},ce={class:"item"},de={class:"item"},re={key:0,src:E,alt:""},ue={key:1,src:F,alt:""},ve={class:"list"},ge=["onClick"],pe={class:"y-pop"},Ae=["onClick"],me=["onClick"],ke={class:"t t1"},Pe=["onClick"],Ie={key:1,class:"type1"},he={class:"list"},be={key:0,class:"workMenu",src:"/static/svg/menu1-df788cf4.svg",alt:""},ye={key:1,class:"workMenu",src:"/static/svg/menu11-536f5723.svg",alt:""},Te={key:0,class:"workMenu",src:"/static/svg/menu2-d639c548.svg",alt:""},we={key:1,class:"workMenu",src:"/static/svg/menu22-145df08d.svg",alt:""},fe={key:2,class:"type1"},Ce={class:"list"},De=["onClick"],ze={class:"modalMain"},xe={style:{display:"flex","justify-content":"flex-end"}},Me=J(e({__name:"index",setup(e,{expose:J}){const H=a();a();const U=s();l((()=>U.userInfo.avatar));const W=l((()=>U.userInfo.nickname)),E=t(),F=n();l((()=>U.isLogin));const Me=l((()=>U.userInfo)),Re=o().appContext.config.globalProperties,Be=i(!0);Re.$mitt.on("expand",(e=>{Be.value=!!e}));const Se=l((()=>"dark"==F.theme?"2px solid  #36373E":"none"));c((()=>{var e;return null==(e=Me.value)?void 0:e.id}),(e=>{}));const Oe=d(),Je=r();let He=e=>{Je.warning({title:"警告",content:"删除后无法恢复，确认删除吗？",positiveText:"确定",negativeText:"取消",draggable:!0,onPositiveClick:()=>{Z({conversationId:e.conversationId}).then((e=>{Oe.success("删除成功"),Qe()}))}})},Ue=(e,a)=>{q({conversationId:e.conversationId,isTop:a}).then((e=>{a?Oe.success("置顶成功"):Oe.success("取消置顶成功"),Qe()}))},We=i(!1),Xe=i();const je=i({name:[{required:!0,message:"请输入会话名称"}]});let Ee=i({}),Fe=e=>{var a;e.preventDefault(),null==(a=Xe.value)||a.validate((a=>{a?(console.log(a),Oe.error("验证失败")):(console.log(e,"handleValidateButtonClick"),We.value&&L(Ee.value).then((e=>{200===e.code&&(Oe.success("重命名成功"),Qe(),We.value=!1)})))}))};u.on("getAgentChatLogList",(e=>{Qe()}));let Qe=()=>{V({botId:Ze.value.botId,page:1,size:999}).then((e=>{Ge.value=e.data.rows}))};v((async()=>{console.log(H.currentRoute.value,"routeroute"),E.editChatData({}),Le(),3==Ne.value&&V({botId:Ze.value.botId,page:1,size:999}).then((e=>{Ge.value=e.data.rows,Ge.value.length>0&&(E.editChatData(Ge.value[0]),ea(qe.value.conversationId))}))}));let Ve=i([{name:"发现智能体",id:1},{name:"全部",id:0}]),Ne=i(l((()=>E.cozePageType))),Ye=i(l((()=>E.cozeTypeActive))),Ze=i(l((()=>E.cozeEditData))),qe=i(l((()=>E.chatData)));c((()=>Ze.value),(e=>{3==Ne.value&&V({botId:Ze.value.botId,page:1,size:999}).then((e=>{Ge.value=e.data.rows,Ge.value.length>0&&(E.editChatData(Ge.value[0]),ea(qe.value.conversationId))}))}));let Le=()=>{N().then((e=>{Ve.value=[...Ve.value,...e.data]}))},Ke=e=>{E.editcozeTypeActive(e),E.editcozePageType(1)},Ge=i([]);i([{name:"我的智能体",id:1,src:"../../../../assets/images/workSpace/menu1.png"},{name:"我的知识库",id:3,src:"/src/assets/images/workSpace/menu2.png"}]);let _e=i(l((()=>E.workspacePageType))),$e=e=>{E.editworkspacePageType(e)};J({hideRight:function(){document.getElementById("chatRight").style.width="0px"},showRight:function(){document.getElementById("chatRight").style.width="298px"}});let ea=e=>{Y({conversationId:e,page:1,size:999}).then((e=>{let a=e.data.rows;a.reverse(),E.editChatData(a[0]),u.emit("chatLogList",a)}))},aa=()=>{Ze.value.isCollect?K({id:Ze.value.botId}).then((e=>{Oe.success("取消收藏"),E.editCozeEditData({...Ze.value,isCollect:!1})})):G({id:Ze.value.botId}).then((e=>{Oe.success("收藏成功"),E.editCozeEditData({...Ze.value,isCollect:!0})}))},sa=()=>{E.editworkspacePageType(1),"knowledgeWorkSpace"!=H.currentRoute.value.name&&H.push("/knowledge/workspace")};return(e,a)=>(g(),p(y,null,[Be.value?(g(),p("div",{key:0,class:"y-sidebar siderBarBox dark:bg-[#24252b] bg-[#fff]",id:"chatRight",style:A({"border-left":`${Se.value}`})},["knowledgeAgent"==m(H).currentRoute.value.name&&3==m(Ne)?(g(),p("div",ee,[k("div",ae,[k("img",{src:m(Ze).iconFileUrl,alt:"",class:"headImg"},null,8,se),k("div",le,P(m(Ze).name),1),k("div",te,P(m(Ze).description),1),k("div",ne,[a[10]||(a[10]=k("img",{src:X,alt:""},null,-1)),k("span",null,P(m(Ze).userId==Me.value.id?W.value:"官方"),1)]),k("div",oe,[k("div",ie,[I(m(b),{trigger:"hover"},{trigger:h((()=>a[11]||(a[11]=[k("div",{class:"btn"},[k("img",{src:"data:image/png;base64,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",alt:""})],-1)]))),default:h((()=>[a[12]||(a[12]=k("span",null,"开发中,敬请期待",-1))])),_:1,__:[12]}),a[13]||(a[13]=k("span",null,"分享链接",-1))]),k("div",ce,[I(m(b),{trigger:"hover"},{trigger:h((()=>a[14]||(a[14]=[k("div",{class:"btn"},[k("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHqSURBVDiN1ZWxixNREMZ/8/IWLVIccuUFJJWlxTUhPHh/gKBiihSXwsrWxvos/AMutYXFHcgVgaSxXtgELK6xsLM4yMGJhZxwhbD73lhkA7lk11NOQT/Y5s3M92Z25psnnU7nXpIkh6q6yyYKYNxoNJ6maXoJ4L1vhhDeAI8Aux4gIid5ng9sSXofOCqJVrEF9EIIp8ALgBDCPtADxsDFmr9V1X6SJIe2zPQoy7JBRcY45+bAajW7wFmWZY9r/FHVPbNSch2qbNf6m5843Aj/J3HBovsb8N5boFlhapa2KmwBhQUmwJOy+1eaEkJoAtsxxsnyLMY4Mcb4EMK5c+5yjdQCO8Co0W6338UYb4nIbRZzufp9iTEOZ7PZwTJyPp+/b7Va30TkToX/V1UdWWuf11TzD0NK7e/X7AqA8XQ6Hf4qoXPuLXBsy4XSE5EzNhXVBHy325Xlf/bebxdF8cxaO1wupjX0ge+WxZYaV2nfe29DCOfGmIfAAUAI4YGIvCqKYgakdZkbFiOyvqUASNO0AKqyunK5935j1m+svBDC6xhj9seJgbuquqHcv76E6nR/na0+SEROVLXvnIPqp2lHVY9/mzjP80H57u1V2AtgZK19uTyIMX4yxlxYaz8DqOoHEUlWYk5jjB9/AGDH0/oBWPQHAAAAAElFTkSuQmCC",alt:""})],-1)]))),default:h((()=>[a[15]||(a[15]=k("span",null,"开发中,敬请期待",-1))])),_:1,__:[15]}),a[16]||(a[16]=k("span",null,"下载名片",-1))]),k("div",de,[k("div",{class:"btn",onClick:a[0]||(a[0]=e=>m(aa)())},[m(Ze).isCollect?(g(),p("img",re)):(g(),p("img",ue))]),a[17]||(a[17]=k("span",null,"添加收藏",-1))])]),a[18]||(a[18]=k("div",{class:"rowLine"},null,-1))]),a[24]||(a[24]=k("div",{class:"title"},"对话历史",-1)),k("div",ve,[(g(!0),p(y,null,T(m(Ge),((e,s)=>{var l;return g(),p("div",{class:w(["item",(null==(l=m(qe))?void 0:l.conversationId)==e.conversationId?"action":""]),key:e.conversationId,onClick:a=>m(ea)(e.conversationId)},[k("span",null,P(e.name),1),I(m(b),{style:{"border-radius":"8px",width:"126px"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:h((()=>a[19]||(a[19]=[k("img",{src:Q,alt:"",class:"drop3icon"},null,-1)]))),default:h((()=>[k("div",pe,[k("div",{class:"blo",onClick:f((a=>{C(Ee)?Ee.value=JSON.parse(JSON.stringify(e)):Ee=JSON.parse(JSON.stringify(e)),C(We)?We.value=!0:We=!0}),["stop"])},a[20]||(a[20]=[k("div",{class:"edit"},null,-1),k("div",{class:"t t1"},"重命名",-1)]),8,Ae),k("div",{class:"blo",onClick:f((a=>m(Ue)(e,1==e.isTop?0:1)),["stop"])},[a[21]||(a[21]=k("div",{class:"ding"},null,-1)),k("div",ke,P(1==e.isTop?"取消置顶":"置顶"),1)],8,me),k("div",{class:"blo",onClick:f((a=>m(He)(e)),["stop"])},a[22]||(a[22]=[k("div",{class:"dele"},null,-1),k("div",{class:"t t2"},"删除",-1)]),8,Pe)])])),_:2},1024)],10,ge)})),128))]),k("div",{class:"bottomBtn",onClick:a[1]||(a[1]=e=>m(sa)())},a[23]||(a[23]=[k("div",{class:"rowLine"},null,-1),k("span",null,"我的智能体",-1)]))])):"knowledgeWorkSpace"==m(H).currentRoute.value.name?(g(),p("div",Ie,[a[28]||(a[28]=k("div",{class:"title"},"个人空间",-1)),k("div",he,[k("div",{class:w(["item",1==m(_e)?"action":""]),onClick:a[2]||(a[2]=e=>m($e)(1))},[1!=m(_e)?(g(),p("img",be)):D("",!0),1==m(_e)?(g(),p("img",ye)):D("",!0),a[25]||(a[25]=k("span",null,"我的智能体",-1))],2),k("div",{class:w(["item",1!=m(_e)?"action":""]),onClick:a[3]||(a[3]=e=>m($e)(3))},[3!=m(_e)&&4!=m(_e)&&5!=m(_e)?(g(),p("img",Te)):D("",!0),3==m(_e)||4==m(_e)||5==m(_e)?(g(),p("img",we)):D("",!0),a[26]||(a[26]=k("span",null,"我的知识库",-1))],2)]),k("div",{class:"bottomBtn",onClick:a[4]||(a[4]=e=>m(sa)())},a[27]||(a[27]=[k("div",{class:"rowLine"},null,-1),k("span",null,"我的智能体",-1)]))])):(g(),p("div",fe,[a[30]||(a[30]=k("div",{class:"title"},"智能体商店",-1)),k("div",Ce,[(g(!0),p(y,null,T(m(Ve),((e,a)=>(g(),p("div",{class:w(["item",m(Ye).id==e.id?"action":""]),key:a,onClick:a=>m(Ke)(e)},P(e.name),11,De)))),128))]),k("div",{class:"bottomBtn",onClick:a[5]||(a[5]=e=>m(sa)())},a[29]||(a[29]=[k("div",{class:"rowLine"},null,-1),k("span",null,"我的智能体",-1)]))]))],4)):D("",!0),I(m(O),{show:m(We),"onUpdate:show":a[9]||(a[9]=e=>C(We)?We.value=e:We=e)},{default:h((()=>[k("div",ze,[I(m(j),null,{default:h((()=>a[31]||(a[31]=[z(" 重命名 ")]))),_:1,__:[31]}),I(m(x),{ref_key:"formRef",ref:Xe,model:m(Ee),rules:je.value},{default:h((()=>[I(m(M),{path:"name",label:"会话名称"},{default:h((()=>[I(m(R),{value:m(Ee).name,"onUpdate:value":a[6]||(a[6]=e=>m(Ee).name=e),onKeydown:a[7]||(a[7]=B(f((()=>{}),["prevent"]),["enter"])),placeholder:"给会话取一个独一无二的名字"},null,8,["value"])])),_:1}),I(m(_),{gutter:[0,24]},{default:h((()=>[I(m($),{span:24},{default:h((()=>[k("div",xe,[I(m(S),{strong:"",secondary:"",onClick:a[8]||(a[8]=e=>C(We)?We.value=!1:We=!1),style:{"margin-right":"10px"}},{default:h((()=>a[32]||(a[32]=[z(" 取消 ")]))),_:1,__:[32]}),I(m(S),{type:"primary",onClick:m(Fe)},{default:h((()=>a[33]||(a[33]=[z(" 确认 ")]))),_:1,__:[33]},8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["show"])],64))}}),[["__scopeId","data-v-b14dda02"]]),Re={class:"knowledge-content"},Be={style:{width:"100%",background:"#fff","border-radius":"20px"},class:"dark:bg-[#24252B]"},Se=J(e({__name:"index",setup(e){const a=t();let s=i(l((()=>a.workspacePageType)));const{isMobile:n}=H(),o=i();function c(e){console.log("改变了"),o.value=JSON.parse(e)}v((()=>{u.emit("setSliderMenus")}));const d=l((()=>n.value?["rounded-none","shadow-none"]:["rounded-md","shadow-md","dark:border-neutral-800"]));return(e,a)=>{const l=U("RouterView");return g(),p("div",Re,[k("div",{class:w(["chat-class h-full overflow-hidden",d.value]),style:A(2==m(s)?"padding: 0;":"")},[I(m(W),{style:{"background-color":"transparent"},"content-style":"overflow-x: initial !important;",class:"dark:bg-[#010102] bg-[#F8F9F9] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:h((()=>[I(Me,{onModelType:c,ref:"right"},null,512),k("div",Be,[I(l)])])),_:1})],6)])}}}),[["__scopeId","data-v-70031a2c"]]);export{Se as default};
