import{e,l as a,k as s,g as l,cA as t,a7 as n,ar as i,r as o,Q as c,p as d,bA as r,J as u,q as v,w as g,x as A,G as p,y as m,B as P,z as k,C as I,D as h,Y as b,F as y,E as T,I as w,a3 as f,dC as D,A as C,Z as z,bg as x,bf as M,aS as B,b5 as R,am as S,a1 as O,_ as J,M as H,W as F,aM as W}from"../main-be2ae0f3.js";import{_ as Q,a as U}from"../drop3icon/drop3icon.298c80b6.js";import{N as X,a as E,b as V,_ as Y,c as j}from"../startIcon2/startIcon2.399b53c8.js";import{g as Z,a as q,b as N,d as K,t as L,c as G,e as _,f as $}from"./knowledge.6c8165df.js";const ee={key:0,class:"type2"},ae={class:"topBox"},se=["src"],le={class:"AIname ellipsi"},te={class:"AItext ellipsi"},ne={class:"nicknameBox"},ie={class:"btnBox"},oe={class:"item"},ce={class:"item"},de={class:"item"},re={key:0,src:Y,alt:""},ue={key:1,src:j,alt:""},ve={class:"list"},ge=["onClick"],Ae={class:"y-pop"},pe=["onClick"],me=["onClick"],Pe={class:"t t1"},ke=["onClick"],Ie={key:1,class:"type1"},he={class:"list"},be={key:0,class:"workMenu",src:"/static/svg/menu1-df788cf4.svg",alt:""},ye={key:1,class:"workMenu",src:"/static/svg/menu11-536f5723.svg",alt:""},Te={key:0,class:"workMenu",src:"/static/svg/menu2-d639c548.svg",alt:""},we={key:1,class:"workMenu",src:"/static/svg/menu22-145df08d.svg",alt:""},fe={key:2,class:"type1"},De={class:"list"},Ce=["onClick"],ze={class:"modalMain"},xe={style:{display:"flex","justify-content":"flex-end"}},Me=J(e({__name:"index",setup(e,{expose:J}){const H=a();a();const F=s();l((()=>F.userInfo.avatar));const W=l((()=>F.userInfo.nickname)),Y=t(),j=n();l((()=>F.isLogin));const Me=l((()=>F.userInfo)),Be=i().appContext.config.globalProperties,Re=o(!0);Be.$mitt.on("expand",(e=>{Re.value=!!e}));const Se=l((()=>"dark"==j.theme?"#36373E":"rgba(142, 145, 166, 0.15)"));c((()=>{var e;return null==(e=Me.value)?void 0:e.id}),(e=>{}));const Oe=d(),Je=r();let He=e=>{Je.warning({title:"警告",content:"删除后无法恢复，确认删除吗？",positiveText:"确定",negativeText:"取消",draggable:!0,onPositiveClick:()=>{K({conversationId:e.conversationId}).then((e=>{Oe.success("删除成功"),Ve()}))}})},Fe=(e,a)=>{L({conversationId:e.conversationId,isTop:a}).then((e=>{a?Oe.success("置顶成功"):Oe.success("取消置顶成功"),Ve()}))},We=o(!1),Qe=o();const Ue=o({name:[{required:!0,message:"请输入会话名称"}]});let Xe=o({}),Ee=e=>{var a;e.preventDefault(),null==(a=Qe.value)||a.validate((a=>{a?(console.log(a),Oe.error("验证失败")):(console.log(e,"handleValidateButtonClick"),We.value&&G(Xe.value).then((e=>{200===e.code&&(Oe.success("重命名成功"),Ve(),We.value=!1)})))}))};u.on("getAgentChatLogList",(e=>{Ve()}));let Ve=()=>{Z({botId:qe.value.botId,page:1,size:999}).then((e=>{Ge.value=e.data.rows}))};v((async()=>{console.log(H.currentRoute.value,"routeroute"),Y.editChatData({}),Ke(),3==je.value&&Z({botId:qe.value.botId,page:1,size:999}).then((e=>{Ge.value=e.data.rows,Ge.value.length>0&&(Y.editChatData(Ge.value[0]),ea(Ne.value.conversationId))}))}));let Ye=o([{name:"发现智能体",id:1},{name:"全部",id:0}]),je=o(l((()=>Y.cozePageType))),Ze=o(l((()=>Y.cozeTypeActive))),qe=o(l((()=>Y.cozeEditData))),Ne=o(l((()=>Y.chatData)));c((()=>qe.value),(e=>{3==je.value&&Z({botId:qe.value.botId,page:1,size:999}).then((e=>{Ge.value=e.data.rows,Ge.value.length>0&&(Y.editChatData(Ge.value[0]),ea(Ne.value.conversationId))}))}));let Ke=()=>{q().then((e=>{Ye.value=[...Ye.value,...e.data]}))},Le=e=>{Y.editcozeTypeActive(e),Y.editcozePageType(1)},Ge=o([]);o([{name:"我的智能体",id:1,src:"../../../../assets/images/workSpace/menu1.png"},{name:"我的知识库",id:3,src:"/src/assets/images/workSpace/menu2.png"}]);let _e=o(l((()=>Y.workspacePageType))),$e=e=>{Y.editworkspacePageType(e)};J({hideRight:function(){document.getElementById("chatRight").style.width="0px"},showRight:function(){document.getElementById("chatRight").style.width="298px"}});let ea=e=>{N({conversationId:e,page:1,size:999}).then((e=>{let a=e.data.rows;a.reverse(),Y.editChatData(a[0]),console.log(Ne.value,"chatDatachatData"),u.emit("chatLogList",a)}))},aa=()=>{qe.value.isCollect?_({id:qe.value.botId}).then((e=>{Oe.success("取消收藏"),Y.editCozeEditData({...qe.value,isCollect:!1})})):$({id:qe.value.botId}).then((e=>{Oe.success("收藏成功"),Y.editCozeEditData({...qe.value,isCollect:!0})}))},sa=()=>{Y.editworkspacePageType(1),"knowledgeWorkSpace"!=H.currentRoute.value.name&&H.push("/knowledge/workspace")};return(e,a)=>(g(),A(y,null,[Re.value?(g(),A("div",{key:0,class:"y-sidebar siderBarBox dark:bg-[#24252b] bg-[#fff]",id:"chatRight",style:p({"border-left":`2px solid ${Se.value}`})},["knowledgeAgent"==m(H).currentRoute.value.name&&3==m(je)?(g(),A("div",ee,[P("div",ae,[P("img",{src:m(qe).iconFileUrl,alt:"",class:"headImg"},null,8,se),P("div",le,k(m(qe).name),1),P("div",te,k(m(qe).description),1),P("div",ne,[a[10]||(a[10]=P("img",{src:Q,alt:""},null,-1)),P("span",null,k(m(qe).userId==Me.value.id?W.value:"官方"),1)]),P("div",ie,[P("div",oe,[I(m(b),{trigger:"hover"},{trigger:h((()=>a[11]||(a[11]=[P("div",{class:"btn"},[P("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAApVBMVEUAAAA8PDw9PT09PT09PT08PDw9PT09PT09PT09PT09PT0/Pz89PT09PT09PT08PDw+Pj49PT09PT08PDw9PT09PT09PT09PT09PT09PT08PDw9PT09PT09PT09PT09PT09PT08PDw9PT09PT09PT08PDw9PT09PT09PT09PT09PT09PT08PDw8PDw9PT09PT09PT0/Pz89PT08PDw9PT0/Pz89PT1u+65wAAAANnRSTlMAQL6OiYAXk5ytmAbx59xpHc1URDgo+eHFZU2pedW5sXQjoIR8cGxZMuzRtGBILsoSC6VdXBDA9+ZeAAAGMUlEQVR42u3d6XLaMBQF4IMBs++YfQnQsAdI0973f7TOdDqdjq9kKcSW5I6+v9k4sRVdyTcInud5nud5nud5nud5/7vwR6leC87j5qi1nFy2xf0GOVQo3YlZlt7ekSdv2zFJNGtT5MVxS4mCPvIgLI1IZT2A817HpGM7hNO6F9K1h8MKbdJXhLMO9Cm1n3BThT6pd4SL2vRpzRncQ88Yu1e10HNWDbiFnlWFU+h53+AQ+oofcAZ9SbMAR5DceVe4dd8bYTTsrEim58iAJ5lWeYh/dPc9EnuFC+QxQsRNxVHaD9hHEvUQIgsSKcM6kuhA4jAi7mR9gieJN8jdHSzpSaKABI82MaMjPsGNHMBg5Nj8rpmDuxITQJs7OYAyMV1ocimHaJhMocepHMALX8BDi2M50Diz0hE6XMsBvD71pe7lwJHiDlByMIdgz+UFKk7mQMV+lZJKDnQoZo5kjubAG8VMkMjVHIjY6gpJnM2BBiuAkcDdHAjZ4gpyDufAkGJ6kHI5Bz4o5gIZp3PwSr4OCbdzYKK7RnQ8x4PirhByPAf6go0XI5bp5kCV4t5hQi3lHG9kp0IppZwDKzv7Qde0c0yJGSJ7w2bKOY4nslIyrlLO0QiIbEyH15RzoELcAZlr9FLO8Y24CbK3MJDDxAXpttLNsSCBFbJXVOa4TYuX+n4A/b1SG+XJRpmj36TfqtHTOb4je3viOuLi5XTV2yi1MxmuiClLi5fFczl2yN5GkeM4on9VkGRvsT+I/w7vjaSPz5V7i5bKXj4Z9vGvOcUsFIUiF8KASHUfnLSntg6J3WACX5AOVQ2Zp6HiHrWyUn9R/cWfE9MLpd+IW8AIXqcO2O4UV9PPMYUhNVVN9FjqNJYsSKwPU3rKqatDAjNW7woNYEyLvULm0CJmzW4/kSPMGWn0WdyWyZdkQGIbGNTSehbDk6zVA+QBY/hLbEFsm3RJAhIYwSC+ZX6GWNhLuCQt4lowrKbZVFUYydd8TWKWMK2q2/jSkc8ldwv1brRR7PnetBdgZ/kAWiNbs/WJaPx9mlQ0TvV38W6yaWSLTPDyL3iXPwyvQabRlvbItI22nMzFS5259mxclnZbDkz2XE8kpeGHdgtPX/4E6sAW9dng66OOtD+htYFEN2Hz61H/c5UKyFZT3oSwZqPkqQKzO9i/HgbI1oMXEA22ZaC+yQO22DAsIu6W8GC/rxnkA2YVSCBiw109mQR2O5L7JNAEkqrXmVaQV5jUIZFAEXUDgbOVDRK+mpbPFhd+xR5gQrIYpEJCQQP/mhGzBnOw+H+Sc83d2IXOzVW01yIekO5jl63Gs7I7z6pgo9/nrnzniQHFNWDGSZZDq4jpKIfbCTqM95FtFJ/2PrbUNHpW5FAVAKFyPqrDhK0qB1dImrXDtp2N3RdFDlWStroxrQUDBjo5uGgs2946jqw8qg3PWjm4qBOMqVed6vRfzZC9qiRHmt+wjewN0s5RIq6C7F1SzlEmbnRD5n4YyEElZK5xTzfHjgRaXWTuxUAOE83IP8epj3Nu+ROZmxFXTjkH7ZG9UprtUkUSWsOAM/+xaefohchelGItUbTZt9RJ74JUrPZlXPgFSTlHB0ZQ3CTlHHMY8Uir8atOYgHM4M2vUS5z4Egx51RzrGAIX4pc8pmDbzR/T3GcX2AMn0Yq+czBH4fs8pmDL0aKaeVYw6grq3yfq6+sv4PRjL2AfObAkM1g+cwhqOLDJ3JYf4sZIPxKc3rJnRxoUNz6yzm+w4YJxR1zmUPQIFD/Wo4t7Bg+2Wq/cywHMH7qkuzce2PuKjH7PObAB3GR1n47V4dFXeJaOcwhLl+DYf5yIGoS15xCojsnsQps233mUJO3pbM5EI5JZNIH0y2SuznkbQ/zITs2yO1DaRpnkpgU3/BH97odO3+4zoEStFf10rx3ogQluOIbqeQjB1D9T3IAAT1rB6d02/9HDqBAKq4e5sCS3P+PHEBYy/NhOnwdru/k7sF/e/qESQh3zcZ5PTcr7lYlLcsOXFeokdJ4kYszZPsBJWqWusiJ652kWvUIOXJ7WY2Iu5cHjhz69Qnv/WqvRX81l7Vrbm4pge6wv198FKJcjG7P8zzP8zzP8zzP87yv+wUoXAPAy0WW7QAAAABJRU5ErkJggg==",alt:""})],-1)]))),default:h((()=>[a[12]||(a[12]=P("span",null,"开发中,敬请期待",-1))])),_:1}),a[13]||(a[13]=P("span",null,"分享链接",-1))]),P("div",ce,[I(m(b),{trigger:"hover"},{trigger:h((()=>a[14]||(a[14]=[P("div",{class:"btn"},[P("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHqSURBVDiN1ZWxixNREMZ/8/IWLVIccuUFJJWlxTUhPHh/gKBiihSXwsrWxvos/AMutYXFHcgVgaSxXtgELK6xsLM4yMGJhZxwhbD73lhkA7lk11NOQT/Y5s3M92Z25psnnU7nXpIkh6q6yyYKYNxoNJ6maXoJ4L1vhhDeAI8Aux4gIid5ng9sSXofOCqJVrEF9EIIp8ALgBDCPtADxsDFmr9V1X6SJIe2zPQoy7JBRcY45+bAajW7wFmWZY9r/FHVPbNSch2qbNf6m5843Aj/J3HBovsb8N5boFlhapa2KmwBhQUmwJOy+1eaEkJoAtsxxsnyLMY4Mcb4EMK5c+5yjdQCO8Co0W6338UYb4nIbRZzufp9iTEOZ7PZwTJyPp+/b7Va30TkToX/V1UdWWuf11TzD0NK7e/X7AqA8XQ6Hf4qoXPuLXBsy4XSE5EzNhXVBHy325Xlf/bebxdF8cxaO1wupjX0ge+WxZYaV2nfe29DCOfGmIfAAUAI4YGIvCqKYgakdZkbFiOyvqUASNO0AKqyunK5935j1m+svBDC6xhj9seJgbuquqHcv76E6nR/na0+SEROVLXvnIPqp2lHVY9/mzjP80H57u1V2AtgZK19uTyIMX4yxlxYaz8DqOoHEUlWYk5jjB9/AGDH0/oBWPQHAAAAAElFTkSuQmCC",alt:""})],-1)]))),default:h((()=>[a[15]||(a[15]=P("span",null,"开发中,敬请期待",-1))])),_:1}),a[16]||(a[16]=P("span",null,"下载名片",-1))]),P("div",de,[P("div",{class:"btn",onClick:a[0]||(a[0]=e=>m(aa)())},[m(qe).isCollect?(g(),A("img",re)):(g(),A("img",ue))]),a[17]||(a[17]=P("span",null,"添加收藏",-1))])]),a[18]||(a[18]=P("div",{class:"rowLine"},null,-1))]),a[24]||(a[24]=P("div",{class:"title"},"对话历史",-1)),P("div",ve,[(g(!0),A(y,null,T(m(Ge),((e,s)=>{var l;return g(),A("div",{class:w(["item",(null==(l=m(Ne))?void 0:l.conversationId)==e.conversationId?"action":""]),key:e.conversationId,onClick:a=>m(ea)(e.conversationId)},[P("span",null,k(e.name),1),I(m(b),{style:{"border-radius":"8px",width:"126px"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:h((()=>a[19]||(a[19]=[P("img",{src:U,alt:"",class:"drop3icon"},null,-1)]))),default:h((()=>[P("div",Ae,[P("div",{class:"blo",onClick:f((a=>{D(Xe)?Xe.value=JSON.parse(JSON.stringify(e)):Xe=JSON.parse(JSON.stringify(e)),D(We)?We.value=!0:We=!0}),["stop"])},a[20]||(a[20]=[P("div",{class:"edit"},null,-1),P("div",{class:"t t1"},"重命名",-1)]),8,pe),P("div",{class:"blo",onClick:f((a=>m(Fe)(e,1==e.isTop?0:1)),["stop"])},[a[21]||(a[21]=P("div",{class:"ding"},null,-1)),P("div",Pe,k(1==e.isTop?"取消置顶":"置顶"),1)],8,me),P("div",{class:"blo",onClick:f((a=>m(He)(e)),["stop"])},a[22]||(a[22]=[P("div",{class:"dele"},null,-1),P("div",{class:"t t2"},"删除",-1)]),8,ke)])])),_:2},1024)],10,ge)})),128))]),P("div",{class:"bottomBtn",onClick:a[1]||(a[1]=e=>m(sa)())},a[23]||(a[23]=[P("div",{class:"rowLine"},null,-1),P("span",null,"我的智能体",-1)]))])):"knowledgeWorkSpace"==m(H).currentRoute.value.name?(g(),A("div",Ie,[a[28]||(a[28]=P("div",{class:"title"},"个人空间",-1)),P("div",he,[P("div",{class:w(["item",1==m(_e)?"action":""]),onClick:a[2]||(a[2]=e=>m($e)(1))},[1!=m(_e)?(g(),A("img",be)):C("",!0),1==m(_e)?(g(),A("img",ye)):C("",!0),a[25]||(a[25]=P("span",null,"我的智能体",-1))],2),P("div",{class:w(["item",1!=m(_e)?"action":""]),onClick:a[3]||(a[3]=e=>m($e)(3))},[3!=m(_e)&&4!=m(_e)&&5!=m(_e)?(g(),A("img",Te)):C("",!0),3==m(_e)||4==m(_e)||5==m(_e)?(g(),A("img",we)):C("",!0),a[26]||(a[26]=P("span",null,"我的知识库",-1))],2)]),P("div",{class:"bottomBtn",onClick:a[4]||(a[4]=e=>m(sa)())},a[27]||(a[27]=[P("div",{class:"rowLine"},null,-1),P("span",null,"我的智能体",-1)]))])):(g(),A("div",fe,[a[30]||(a[30]=P("div",{class:"title"},"智能体商店",-1)),P("div",De,[(g(!0),A(y,null,T(m(Ye),((e,a)=>(g(),A("div",{class:w(["item",m(Ze).id==e.id?"action":""]),key:a,onClick:a=>m(Le)(e)},k(e.name),11,Ce)))),128))]),P("div",{class:"bottomBtn",onClick:a[5]||(a[5]=e=>m(sa)())},a[29]||(a[29]=[P("div",{class:"rowLine"},null,-1),P("span",null,"我的智能体",-1)]))]))],4)):C("",!0),I(m(O),{show:m(We),"onUpdate:show":a[9]||(a[9]=e=>D(We)?We.value=e:We=e)},{default:h((()=>[P("div",ze,[I(m(X),null,{default:h((()=>a[31]||(a[31]=[z(" 重命名 ")]))),_:1}),I(m(x),{ref_key:"formRef",ref:Qe,model:m(Xe),rules:Ue.value},{default:h((()=>[I(m(M),{path:"name",label:"会话名称"},{default:h((()=>[I(m(B),{value:m(Xe).name,"onUpdate:value":a[6]||(a[6]=e=>m(Xe).name=e),onKeydown:a[7]||(a[7]=R(f((()=>{}),["prevent"]),["enter"])),placeholder:"给会话取一个独一无二的名字"},null,8,["value"])])),_:1}),I(m(E),{gutter:[0,24]},{default:h((()=>[I(m(V),{span:24},{default:h((()=>[P("div",xe,[I(m(S),{strong:"",secondary:"",onClick:a[8]||(a[8]=e=>D(We)?We.value=!1:We=!1),style:{"margin-right":"10px"}},{default:h((()=>a[32]||(a[32]=[z(" 取消 ")]))),_:1}),I(m(S),{type:"primary",onClick:m(Ee)},{default:h((()=>a[33]||(a[33]=[z(" 确认 ")]))),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["show"])],64))}}),[["__scopeId","data-v-b76a3542"]]),Be={class:"knowledge-content"},Re={style:{width:"100%",background:"linear-gradient(180deg, #F5F6F7 0%, #E8EBF6 97%)"},class:"dark:bg-[#24252B]"},Se=J(e({__name:"index",setup(e){const{isMobile:a}=H(),s=o();function t(e){console.log("改变了"),s.value=JSON.parse(e)}const n=l((()=>a.value?["rounded-none","shadow-none"]:["rounded-md","shadow-md","dark:border-neutral-800"]));return(e,a)=>{const s=F("RouterView");return g(),A("div",Be,[P("div",{class:w(["chat-class h-full overflow-hidden",n.value])},[I(m(W),{style:{"background-color":"transparent"},"content-style":"overflow-x: initial !important;",class:"dark:bg-[#010102] bg-[#F8F9F9] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:h((()=>[I(Me,{onModelType:t,ref:"right"},null,512),P("div",Re,[I(s)])])),_:1})],2)])}}}),[["__scopeId","data-v-452fcab3"]]);export{Se as default};
