import{e,l as a,k as s,g as l,ab as t,Z as n,J as o,r as i,L as c,p as d,bV as r,$ as u,I as g,q as v,w as m,x as p,G as A,y as k,B as w,z as h,C as P,D as y,aj as I,F as b,E as T,a2 as f,am as C,A as D,a4 as z,bH as x,bG as S,aJ as B,bq as M,aD as R,aH as H,ak as O,_ as J,a6 as W,ah as U,b3 as X}from"../main-4156cf5e.js";import{_ as N}from"../nicknameIcon/nicknameIcon.d32dd917.js";import{N as V,_ as j,a as E}from"../startIcon2/startIcon2.86754964.js";import{_ as F}from"../drop3icon/drop3icon.8e32d6d7.js";import{g as Q,a as Z,b as q,c as Y,d as L,e as K,f as G,t as $}from"./knowledge.84729f8b.js";import{N as _,a as ee}from"../Col/Col.3d873762.js";const ae={key:0,class:"type2"},se={class:"topBox"},le=["src"],te={class:"AIname ellipsi"},ne={class:"AItext ellipsi"},oe={class:"nicknameBox"},ie={class:"btnBox"},ce={class:"item"},de={class:"item"},re={class:"item"},ue={key:0,src:j,alt:""},ge={key:1,src:E,alt:""},ve={class:"title"},me={class:"list"},pe=["onClick"],Ae={class:"ellipsi"},ke={class:"y-pop"},we=["onClick"],he={class:"t t1"},Pe=["onClick"],ye={class:"t t1"},Ie=["onClick"],be={class:"t t2"},Te={key:1,class:"type1"},fe={class:"title"},Ce={class:"list"},De={key:0,class:"workMenu",src:"/static/svg/menu1-df788cf4.svg",alt:""},ze={key:1,class:"workMenu",src:"/static/svg/menu11-536f5723.svg",alt:""},xe={key:0,class:"workMenu",src:"/static/svg/menu2-d639c548.svg",alt:""},Se={key:1,class:"workMenu",src:"/static/svg/menu22-145df08d.svg",alt:""},Be={key:2,class:"type1"},Me={class:"title"},Re={class:"list"},He=["onClick"],Oe={class:"modalMain"},Je={style:{display:"flex","justify-content":"flex-end"}},We=J(e({__name:"index",setup(e,{expose:J}){const W=a();a();const U=s();l((()=>U.userInfo.avatar));const X=l((()=>U.userInfo.nickname)),j=t(),E=n();l((()=>U.isLogin));const We=l((()=>U.userInfo)),Ue=o().appContext.config.globalProperties,Xe=i(!0);Ue.$mitt.on("expand",(e=>{Xe.value=!!e}));const Ne=l((()=>"dark"==E.theme?"2px solid  #36373E":"none"));c((()=>{var e;return null==(e=We.value)?void 0:e.id}),(e=>{}));const Ve=d(),je=r();let Ee=e=>{je.warning({title:u("common.warn"),content:u("common.deleteWarnText1"),positiveText:u("common.confirm"),negativeText:u("common.cancel"),draggable:!0,onPositiveClick:()=>{G({conversationId:e.conversationId}).then((e=>{Ve.success(u("common.deleteSuccess")),Ke()}))}})},Fe=(e,a)=>{$({conversationId:e.conversationId,isTop:a}).then((e=>{a?Ve.success(u("common.zhidinSucc")):Ve.success(u("common.nozhidinSucc")),Ke()}))},Qe=i(!1),Ze=i();const qe=i({name:[{required:!0,message:u("knowledge.PinputChatName")}]});let Ye=i({}),Le=e=>{var a;e.preventDefault(),null==(a=Ze.value)||a.validate((a=>{a?(console.log(a),Ve.error(u("knowledge.yanzhengErro"))):(console.log(e,"handleValidateButtonClick"),Qe.value&&Y(Ye.value).then((e=>{200===e.code&&(Ve.success(u("knowledge.rNameSucc")),Ke(),Qe.value=!1)})))}))};g.on("getAgentChatLogList",(e=>{Ke()}));let Ke=()=>{Q({botId:ea.value.botId,page:1,size:999}).then((e=>{ta.value=e.data.rows}))};v((async()=>{console.log(W.currentRoute.value,"routeroute"),j.editChatData({}),sa(),3==$e.value&&Q({botId:ea.value.botId,page:1,size:999}).then((e=>{ta.value=e.data.rows,ta.value.length>0&&(j.editChatData(ta.value[0]),ia(aa.value.conversationId))}))}));let Ge=i([{name:u("knowledge.faxianBot"),id:1},{name:u("common.all"),id:0}]),$e=i(l((()=>j.cozePageType))),_e=i(l((()=>j.cozeTypeActive))),ea=i(l((()=>j.cozeEditData))),aa=i(l((()=>j.chatData)));c((()=>ea.value),(e=>{3==$e.value&&Q({botId:ea.value.botId,page:1,size:999}).then((e=>{ta.value=e.data.rows,ta.value.length>0&&(j.editChatData(ta.value[0]),ia(aa.value.conversationId))}))}));let sa=()=>{Z().then((e=>{Ge.value=[...Ge.value,...e.data]}))},la=e=>{j.editcozeTypeActive(e),j.editcozePageType(1)},ta=i([]);i([{name:"我的智能体",id:1,src:"../../../../assets/images/workSpace/menu1.png"},{name:"我的知识库",id:3,src:"/src/assets/images/workSpace/menu2.png"}]);let na=i(l((()=>j.workspacePageType))),oa=e=>{j.editworkspacePageType(e)};J({hideRight:function(){document.getElementById("chatRight").style.width="0px"},showRight:function(){document.getElementById("chatRight").style.width="298px"}});let ia=e=>{q({conversationId:e,page:1,size:999}).then((e=>{let a=e.data.rows;a.reverse(),j.editChatData(a[0]),g.emit("chatLogList",a)}))},ca=()=>{ea.value.isCollect?L({id:ea.value.botId}).then((e=>{Ve.success(u("digitalMan.cancelCollect")),j.editCozeEditData({...ea.value,isCollect:!1})})):K({id:ea.value.botId}).then((e=>{Ve.success(u("knowledge.collectSucc")),j.editCozeEditData({...ea.value,isCollect:!0})}))},da=()=>{j.editworkspacePageType(1),"knowledgeWorkSpace"!=W.currentRoute.value.name&&W.push("/knowledge/workspace")};return(e,a)=>(m(),p(b,null,[Xe.value?(m(),p("div",{key:0,class:"y-sidebar siderBarBox dark:bg-[#24252b] bg-[#fff]",id:"chatRight",style:A({"border-left":`${Ne.value}`})},["knowledgeAgent"==k(W).currentRoute.value.name&&3==k($e)?(m(),p("div",ae,[w("div",se,[w("img",{src:k(ea).iconFileUrl,alt:"",class:"headImg"},null,8,le),w("div",te,h(k(ea).name),1),w("div",ne,h(k(ea).description),1),w("div",oe,[a[10]||(a[10]=w("img",{src:N,alt:""},null,-1)),w("span",null,h(k(ea).userId==We.value.id?X.value:k(u)("homePage.official")),1)]),w("div",ie,[w("div",ce,[P(k(I),{trigger:"hover"},{trigger:y((()=>a[11]||(a[11]=[w("div",{class:"btn"},[w("img",{src:"data:image/png;base64,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",alt:""})],-1)]))),default:y((()=>[w("span",null,h(e.$t("knowledge.stayTuned")),1)])),_:1}),w("span",null,h(e.$t("knowledge.shareLink")),1)]),w("div",de,[P(k(I),{trigger:"hover"},{trigger:y((()=>a[12]||(a[12]=[w("div",{class:"btn"},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHqSURBVDiN1ZWxixNREMZ/8/IWLVIccuUFJJWlxTUhPHh/gKBiihSXwsrWxvos/AMutYXFHcgVgaSxXtgELK6xsLM4yMGJhZxwhbD73lhkA7lk11NOQT/Y5s3M92Z25psnnU7nXpIkh6q6yyYKYNxoNJ6maXoJ4L1vhhDeAI8Aux4gIid5ng9sSXofOCqJVrEF9EIIp8ALgBDCPtADxsDFmr9V1X6SJIe2zPQoy7JBRcY45+bAajW7wFmWZY9r/FHVPbNSch2qbNf6m5843Aj/J3HBovsb8N5boFlhapa2KmwBhQUmwJOy+1eaEkJoAtsxxsnyLMY4Mcb4EMK5c+5yjdQCO8Co0W6338UYb4nIbRZzufp9iTEOZ7PZwTJyPp+/b7Va30TkToX/V1UdWWuf11TzD0NK7e/X7AqA8XQ6Hf4qoXPuLXBsy4XSE5EzNhXVBHy325Xlf/bebxdF8cxaO1wupjX0ge+WxZYaV2nfe29DCOfGmIfAAUAI4YGIvCqKYgakdZkbFiOyvqUASNO0AKqyunK5935j1m+svBDC6xhj9seJgbuquqHcv76E6nR/na0+SEROVLXvnIPqp2lHVY9/mzjP80H57u1V2AtgZK19uTyIMX4yxlxYaz8DqOoHEUlWYk5jjB9/AGDH0/oBWPQHAAAAAElFTkSuQmCC",alt:""})],-1)]))),default:y((()=>[w("span",null,h(e.$t("knowledge.stayTuned")),1)])),_:1}),w("span",null,h(e.$t("knowledge.downCard")),1)]),w("div",re,[w("div",{class:"btn",onClick:a[0]||(a[0]=e=>k(ca)())},[k(ea).isCollect?(m(),p("img",ue)):(m(),p("img",ge))]),w("span",null,h(e.$t("knowledge.addCollect")),1)])]),a[13]||(a[13]=w("div",{class:"rowLine"},null,-1))]),w("div",ve,h(e.$t("knowledge.charHistory")),1),w("div",me,[(m(!0),p(b,null,T(k(ta),((s,l)=>{var t;return m(),p("div",{class:f(["item",(null==(t=k(aa))?void 0:t.conversationId)==s.conversationId?"action":""]),key:s.conversationId,onClick:e=>k(ia)(s.conversationId)},[w("span",Ae,h(s.name),1),P(k(I),{style:{"border-radius":"8px",width:"126px",padding:"8px !important"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:y((()=>a[14]||(a[14]=[w("img",{src:F,alt:"",class:"drop3icon"},null,-1)]))),default:y((()=>[w("div",ke,[w("div",{class:"blo",onClick:C((e=>{H(Ye)?Ye.value=JSON.parse(JSON.stringify(s)):Ye=JSON.parse(JSON.stringify(s)),H(Qe)?Qe.value=!0:Qe=!0}),["stop"])},[a[15]||(a[15]=w("div",{class:"edit"},null,-1)),w("div",he,h(e.$t("digitalMan.rename")),1)],8,we),w("div",{class:"blo",onClick:C((e=>k(Fe)(s,1==s.isTop?0:1)),["stop"])},[a[16]||(a[16]=w("div",{class:"ding"},null,-1)),w("div",ye,h(1==s.isTop?e.$t("common.noZhidin"):e.$t("common.zhidin")),1)],8,Pe),w("div",{class:"blo",onClick:C((e=>k(Ee)(s)),["stop"])},[a[17]||(a[17]=w("div",{class:"dele"},null,-1)),w("div",be,h(e.$t("common.delete")),1)],8,Ie)])])),_:2},1024)],10,pe)})),128))]),w("div",{class:"bottomBtn",onClick:a[1]||(a[1]=e=>k(da)())},[a[18]||(a[18]=w("div",{class:"rowLine"},null,-1)),w("span",null,h(e.$t("knowledge.myBot")),1)])])):"knowledgeWorkSpace"==k(W).currentRoute.value.name?(m(),p("div",Te,[w("div",fe,h(e.$t("knowledge.personalSpace")),1),w("div",Ce,[w("div",{class:f(["item",1==k(na)?"action":""]),onClick:a[2]||(a[2]=e=>k(oa)(1))},[1!=k(na)?(m(),p("img",De)):D("",!0),1==k(na)?(m(),p("img",ze)):D("",!0),w("span",null,h(e.$t("knowledge.myBot")),1)],2),w("div",{class:f(["item",1!=k(na)?"action":""]),onClick:a[3]||(a[3]=e=>k(oa)(3))},[3!=k(na)&&4!=k(na)&&5!=k(na)?(m(),p("img",xe)):D("",!0),3==k(na)||4==k(na)||5==k(na)?(m(),p("img",Se)):D("",!0),w("span",null,h(e.$t("knowledge.myWorkSpace")),1)],2)]),w("div",{class:"bottomBtn",onClick:a[4]||(a[4]=e=>k(da)())},[a[19]||(a[19]=w("div",{class:"rowLine"},null,-1)),w("span",null,h(e.$t("knowledge.myBot")),1)])])):(m(),p("div",Be,[w("div",Me,h(e.$t("knowledge.knowledgeStore")),1),w("div",Re,[(m(!0),p(b,null,T(k(Ge),((e,a)=>(m(),p("div",{class:f(["item",k(_e).id==e.id?"action":""]),key:a,onClick:a=>k(la)(e)},h(e.name),11,He)))),128))]),w("div",{class:"bottomBtn",onClick:a[5]||(a[5]=e=>k(da)())},[a[20]||(a[20]=w("div",{class:"rowLine"},null,-1)),w("span",null,h(e.$t("knowledge.myBot")),1)])]))],4)):D("",!0),P(k(O),{show:k(Qe),"onUpdate:show":a[9]||(a[9]=e=>H(Qe)?Qe.value=e:Qe=e)},{default:y((()=>[w("div",Oe,[P(k(V),null,{default:y((()=>[z(h(e.$t("digitalMan.rename")),1)])),_:1}),P(k(x),{ref_key:"formRef",ref:Ze,model:k(Ye),rules:qe.value},{default:y((()=>[P(k(S),{path:"name",label:e.$t("knowledge.chatName")},{default:y((()=>[P(k(B),{value:k(Ye).name,"onUpdate:value":a[6]||(a[6]=e=>k(Ye).name=e),onKeydown:a[7]||(a[7]=M(C((()=>{}),["prevent"]),["enter"])),placeholder:e.$t("knowledge.chatInputName")},null,8,["value","placeholder"])])),_:1},8,["label"]),P(k(_),{gutter:[0,24]},{default:y((()=>[P(k(ee),{span:24},{default:y((()=>[w("div",Je,[P(k(R),{strong:"",secondary:"",onClick:a[8]||(a[8]=e=>H(Qe)?Qe.value=!1:Qe=!1),style:{"margin-right":"10px"}},{default:y((()=>[z(h(e.$t("common.cancel")),1)])),_:1}),P(k(R),{type:"primary",onClick:k(Le)},{default:y((()=>[z(h(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["show"])],64))}}),[["__scopeId","data-v-8a18f65f"]]),Ue={class:"knowledge-content"},Xe={style:{width:"100%",background:"#fff","border-radius":"20px"},class:"dark:bg-[#24252B]"},Ne=J(e({__name:"index",setup(e){const a=t();let s=i(l((()=>a.workspacePageType)));const{isMobile:n}=W(),o=i();function c(e){console.log("改变了"),o.value=JSON.parse(e)}v((()=>{g.emit("setSliderMenus")}));const d=l((()=>n.value?["rounded-none","shadow-none"]:["rounded-md","shadow-md","dark:border-neutral-800"]));return(e,a)=>{const l=U("RouterView");return m(),p("div",Ue,[w("div",{class:f(["chat-class h-full overflow-hidden",d.value]),style:A(2==k(s)?"padding: 0;":"")},[P(k(X),{style:{"background-color":"transparent"},"content-style":"overflow-x: initial !important;",class:"dark:bg-[#010102] bg-[#F8F9F9] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:y((()=>[P(We,{onModelType:c,ref:"right"},null,512),w("div",Xe,[P(l)])])),_:1})],6)])}}}),[["__scopeId","data-v-70031a2c"]]);export{Ne as default};
