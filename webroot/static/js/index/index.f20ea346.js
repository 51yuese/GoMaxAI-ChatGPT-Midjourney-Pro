import{e as a,Z as s,k as t,p as e,g as l,r as i,w as r,x as o,C as n,D as d,B as c,am as m,A as p,z as v,F as k,E as g,y as f,I as u,aj as y,G as x,a4 as w,a1 as h,ao as b,$ as I,bt as D,_ as C}from"../main-b114ff11.js";import{a as _}from"../draw-fail/draw-fail.ad8fd01b.js";import{_ as L,a as j,b as B}from"../KLingIcon3/KLingIcon3.6acffd30.js";import{N as P}from"../Popconfirm/Popconfirm.5446b9cc.js";const $={class:"dallTaskBox"},A=["src"],F={class:"dallTaskItem bg-[#fff] dark:bg-[#313338]",style:{padding:"12px 12px 12px 0","border-radius":"12px",display:"flex","margin-top":"12px"}},O={class:"content",style:{"margin-left":"12px",width:"100%"}},N={style:{display:"flex","justify-content":"space-between"}},E={style:{display:"flex","align-items":"center"}},G={class:"discord-en"},J={class:"discord-time"},K={key:0,class:"flexLabel"},S={key:0,class:"itemLabel"},T={key:1,class:"itemLabel"},z={key:1,class:"answerImgBox"},W=["onClick","src"],Z={key:2,style:{display:"flex","align-items":"center"}},q={key:0,style:{width:"20%",height:"246px",display:"flex","flex-direction":"column","align-items":"center"}},H={style:{"margin-top":"8px",color:"#D4237A"}},M={key:1,style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Q={class:"loader"},R={class:"btnBox"},U={class:"btnItem"},V={style:{display:"flex","align-items":"center"}},X={class:"btnItem"},Y={class:"btnItem"},aa=C(a({__name:"index",props:{task:{type:Object}},setup(a){const C=s(),aa=t(),sa=e(),ta=l((()=>"dark"===C.theme)),ea=a,la=i(!1),ia=i("");let ra=()=>{u.emit("copyDallData",ea.task)},oa=()=>{var a;(null==(a=null==aa?void 0:aa.userInfo)?void 0:a.score)>0?u.emit("generateDallDraw",ea.task):sa.error(I("common.noPoint"))},na=i(!1),da=()=>{na.value=!0,D({id:ea.task.id}).then((a=>{u.emit("dallDrawList"),na.value=!1}))};return(a,s)=>(r(),o("div",$,[n(f(h),{show:f(na)},{default:d((()=>[la.value?(r(),o("div",{key:0,onClick:s[1]||(s[1]=a=>{la.value=!1,ia.value=""}),class:"mask"},[c("img",{src:ia.value,style:{width:"auto",height:"90%"},alt:"",onClick:s[0]||(s[0]=m((()=>{}),["stop"]))},null,8,A)])):p("",!0),c("div",F,[s[8]||(s[8]=c("div",{class:"avator"},[c("div",{class:"discord-avatar"},[c("img",{src:"/static/svg/Discord-DALL-9df7c553.svg",alt:""})])],-1)),c("div",O,[c("div",N,[c("div",E,[c("span",G,v(a.$t("draw.imgGen")),1),c("div",J,v(ea.task.createdAt),1)])]),c("div",{class:"title",style:{"margin-top":"4px",cursor:"pointer"},onClick:s[2]||(s[2]=a=>{var s;(s=ea.task.prompt)?(b({text:s}),sa.success(I("chat.copied"))):sa.error(I("draw.noDataCopy"))})},v(ea.task.prompt),1),c("div",null,[ea.task?(r(),o("div",K,[ea.task.model?(r(),o("div",S,v(ea.task.model),1)):p("",!0),ea.task.fileInfo?(r(),o("div",T,v(JSON.parse(ea.task.fileInfo).width+"Ã—"+JSON.parse(ea.task.fileInfo).height),1)):p("",!0)])):p("",!0),ea.task.answer&&ea.task.answer.length>0?(r(),o("div",z,[(r(!0),o(k,null,g(ea.task.answer,(a=>(r(),o("img",{onClick:s=>function(a){la.value=!0,ia.value=a}(a),src:a,onLoad:s[3]||(s[3]=a=>f(u).emit("drawtoBottom")),alt:""},null,40,W)))),256))])):(r(),o("div",Z,[ea.task.fail?(r(),o("div",q,[s[6]||(s[6]=c("img",{src:_,alt:""},null,-1)),c("p",H,v(a.$t("draw.drawErro")),1)])):(r(),o("div",M,[(r(!0),o(k,null,g(ea.task.n,(a=>(r(),o("div",Q)))),256))]))]))]),c("div",R,[c("div",U,[n(f(y),{trigger:"hover"},{trigger:d((()=>[c("img",{src:L,onClick:s[4]||(s[4]=(...a)=>f(ra)&&f(ra)(...a)),alt:""})])),default:d((()=>[c("div",V,[c("span",null,v(a.$t("draw.useImgParams")),1)])])),_:1})]),c("div",X,[c("img",{src:j,onClick:s[5]||(s[5]=(...a)=>f(oa)&&f(oa)(...a)),alt:""})]),c("div",Y,[n(f(P),{onPositiveClick:f(da),style:x(ta.value?"background:#19191B":"background:#F8F9F9")},{trigger:d((()=>s[7]||(s[7]=[c("img",{src:B,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:d((()=>[w(" "+v(a.$t("draw.confirmDelWork")),1)])),_:1},8,["onPositiveClick","style"])])])])])])),_:1},8,["show"])]))}}),[["__scopeId","data-v-c35e82b9"]]);export{aa as D};
