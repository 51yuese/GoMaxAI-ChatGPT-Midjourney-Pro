import{_ as e,a as t}from"../draw-fail/draw-fail.ad8fd01b.js";import{e as a,w as s,x as l,B as i,a2 as r,p as o,r as n,g as c,Q as u,$ as d,D as p,y as k,C as v,a0 as g,A as f,E as m,I as y,F as x,aS as h,a1 as b,a$ as w,bp as C,Z as _,am as I,by as U,bz as A,bA as E,a7 as R,bB as T,z as j,G as S,bC as V,ag as O,bD as P,N,Y as M,b9 as B,al as L,P as D,bE as z,_ as F}from"../main-be2ae0f3.js";import{u as q}from"./index.5b75f753.js";import{S as G}from"./index.b33b5577.js";import{g as Z,M as Y}from"../draw/draw.e2c61f2b.js";import{M as X,b as H,c as $,d as Q,a as J}from"./index.27c727e8.js";import{H as K}from"../HeartOutline/HeartOutline.d9bdfc35.js";import{N as W}from"../Popconfirm/Popconfirm.294d06f3.js";const ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},te=[i("path",{d:"M256 448l-9-6c-42.78-28.57-96.91-60.86-137-108.32c-42.25-50-62.52-101.35-62-157C48.63 114.54 98.46 64 159.08 64c48.11 0 80.1 28 96.92 48.21C272.82 92 304.81 64 352.92 64c60.62 0 110.45 50.54 111.08 112.65c.56 55.68-19.71 107-62 157c-40.09 47.49-94.22 79.78-137 108.35z",fill:"currentColor"},null,-1)],ae=a({name:"HeartSharp",render:function(e,t){return s(),l("svg",ee,te)}}),se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},le=[r('<circle cx="128" cy="256" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="384" cy="112" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="384" cy="400" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M169.83 279.53l172.34 96.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M342.17 135.53l-172.34 96.94"></path>',5)],ie=a({name:"ShareSocialOutline",render:function(e,t){return s(),l("svg",se,le)}}),re={class:"relative"},oe={class:"flex-1 flex items-center justify-center relative h-full"},ne={key:0,class:"absolute top-0 h-[640px]"},ce={class:"w-full h-full justify-center items-center flex"},ue={class:"absolute left-0 top-0 flex justify-center items-center",id:"appbody"},de={class:"flex inset-x-0 bottom-0 w-full items-end justify-between p-3 gap-4"},pe=["onClick"],ke={class:"flex items-end flex-1 gap-4"},ve=["disabled"],ge=a({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:t}){const a=e,r=t,w=[{label:"rect",value:0,icon:"rect"},{label:"lasso",value:.5,icon:"lasso"}],C=o(),_=n(),I=n(0),U=n(),A=n(0),E=n(!0),R=n(""),T=c((()=>Boolean(a.taskId))),j=async function(){R.value="",A.value=0,E.value=!0;const e=await Z(a.taskId),t=await(s=e.data,new Promise((async e=>{const t=new Image;t.src=s,t.onload=()=>e(t)})));var s;E.value=!1,_.value=new Y(U.value,t)},S=()=>{var e;null==(e=_.value)||e.undo()},V=function(){var e;1!=I.value&&(I.value=1,null==(e=_.value)||e.submit().then((async e=>{r("close",{mask:e,taskId:a.taskId,prompt:R.value,action:X.VARY_REGION})})).catch((e=>{C.error(e),I.value=0})))};return u((()=>a.taskId),(e=>{var t;e?j():null==(t=_.value)||t.destroy()})),(e,t)=>(s(),d(k(b),{show:T.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",style:{width:"1200px",height:"800px"},title:"区域重绘",onClose:t[1]||(t[1]=e=>r("close"))},{default:p((()=>[i("div",re,[i("div",oe,[E.value?(s(),l("div",ne,[i("div",ce,[v(k(g),{size:"large"})])])):f("",!0),i("canvas",{ref_key:"canvasRef",ref:U,resize:"true",style:{padding:"0px",margin:"0px",width:"1024px",height:"640px"}},null,512)]),i("div",ue,[i("button",{onClick:S,class:"rounded-full bg-[#5a91fc] dark:bg-[#888] w-8 h-8"},[v(k(G),{name:"undo",class:"text-white"})])]),i("div",de,[(s(),l(x,null,m(w,(e=>i("div",{class:"flex gap-2",onClick:t=>(e=>{var t;A.value=e.value,null==(t=_.value)||t.updateTool(e.value)})(e)},[i("button",{class:y(["rounded-full w-8 h-8",[e.value===A.value?"bg-[#10A37F] dark:bg-[#10A37F]":"bg-[#5a91fc] dark:bg-[#888]"]])},[v(k(G),{name:e.icon,class:"text-white"},null,8,["name"])],2)],8,pe))),64)),i("div",ke,[v(k(h),{value:R.value,"onUpdate:value":t[0]||(t[0]=e=>R.value=e),rows:2,class:"resize-none overflow-hidden flex-1 !border-gray-200 rounded bg-[#f4f4f4] dark:bg-[#010102]",placeholder:"输入描述信息"},null,8,["value"]),i("button",{class:"rounded-full bg-[#10A37F] dark:bg-[#10A37F] w-8 h-8",disabled:!R.value,onClick:V},[I.value?(s(),d(k(g),{key:0,size:18,stroke:"#fff",style:{"margin-top":"5px"}})):(s(),d(k(G),{key:1,name:"send",class:"text-white"}))],8,ve)])])])])),_:1},8,["show"]))}}),fe={class:"my-8"},me=a({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:t}){const a=o(),l=e,r=t,u=c((()=>Boolean(l.taskId))),g=w({squareType:""}),f=n([]),m=async()=>{const e=await C({page:1,size:100});f.value=e.data.rows,f.value.length&&(g.squareType=f.value[0].value)},y=async()=>{await A({id:l.taskId,squareType:g.squareType,rec:1})&&a.success("发布到广场成功"),r("close",!0)};return(e,t)=>(s(),d(k(b),{show:u.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",title:"发布到广场",onAfterEnter:m,onClose:t[2]||(t[2]=e=>r("close",!1))},{action:p((()=>[v(k(I),{round:"",onClick:t[1]||(t[1]=e=>r("close",!1))},{default:p((()=>t[4]||(t[4]=[_("取消")]))),_:1}),v(k(I),{round:"",type:"primary",onClick:y},{default:p((()=>t[5]||(t[5]=[_("发布")]))),_:1})])),default:p((()=>[i("div",fe,[t[3]||(t[3]=i("div",null,"选择广场类型",-1)),i("div",null,[v(k(U),{class:"dark:bg-[#010102]",value:g.squareType,"onUpdate:value":t[0]||(t[0]=e=>g.squareType=e),placeholder:"选择广场类型","label-field":"name",options:f.value},null,8,["value","options"])])])])),_:1},8,["show"]))}}),ye={class:"my-8"},xe=a({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:t}){const a=o(),l=e,r=t,g=n(""),f=c((()=>Boolean(l.taskId)));u((()=>f),(e=>{e&&(g.value="")}));return(e,t)=>(s(),d(k(b),{show:f.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",title:"描述补充",onClose:t[3]||(t[3]=e=>r("close"))},{action:p((()=>[v(k(I),{round:"",onClick:t[1]||(t[1]=e=>r("close"))},{default:p((()=>t[5]||(t[5]=[_("取消")]))),_:1}),v(k(I),{round:"",type:"primary",onClick:t[2]||(t[2]=e=>{g.value?r("close",g.value):a.warning("描述补充不能为空！")})},{default:p((()=>t[6]||(t[6]=[_("确定")]))),_:1})])),default:p((()=>[i("div",ye,[t[4]||(t[4]=i("div",null,"输入新的绘图描述",-1)),v(k(h),{value:g.value,"onUpdate:value":t[0]||(t[0]=e=>g.value=e),placeholder:"输入新的绘图描述",type:"textarea",resizable:!1,rows:7},null,8,["value"])])])),_:1},8,["show"]))}}),he="/static/svg/amplify-426d4db7.svg",be="/static/svg/Redraw-8fd6761a.svg",we="/static/svg/tuning-bccd19c4.svg",Ce={key:0,style:{width:"100%"}},_e={class:"discord-avatar border border-[#E8E8E8] dark:border-[#2D2E33] dark:bg-[#fff]"},Ie={key:0,src:"/static/png/botAvatar-253a5030.png",style:{width:"26px",height:"26px"},alt:""},Ue={key:1,src:e,alt:""},Ae={style:{display:"flex","justify-content":"space-between"}},Ee={style:{display:"flex","align-items":"center"}},Re={style:{"margin-left":"10px"}},Te={class:"task-time"},je={class:"flex gap-4"},Se={class:"task-delete"},Ve={class:"origin-prompt dark:text-white text-[#333333]"},Oe={class:"en-prompt"},Pe={key:1,style:{width:"100%"}},Ne={style:{display:"flex","justify-content":"space-between"}},Me={class:"action-text"},Be={style:{flex:"1",display:"flex","align-items":"center","justify-content":"end"}},Le={class:"full-prompt"},De={key:0,class:"loader-box"},ze={key:0},Fe={key:1,class:"loader-box"},qe={key:3,src:t,alt:""},Ge={key:4,style:{height:"400px",width:"400px"}},Ze={class:"btn-desc"},Ye={class:"dark:text-[#DBD2CF] text-[#666666]",style:{"margin-right":"6px","font-size":"16px","white-space":"nowrap"}},Xe=["onClick"],He=["src"],$e={key:1},Qe={key:2},Je={key:1},Ke={key:2,style:{bottom:"16px",display:"flex","margin-top":"6px",position:"absolute",width:"calc(100% - 26px)","justify-content":"space-between"}},We={class:"task-mode"},et={class:"task-time"},tt=F(a({__name:"index",props:{type:{},task:{}},emits:["remove","addTask"],setup(e,{emit:t}){const a=n({"1:1":{width:"400px",height:"400px"},"1:2":{width:"350px",height:"700px"},"16:9":{width:"640px",height:"360px"},"9:16":{width:"360px",height:"640px"},"4:3":{width:"400px",height:"300px"},"3:4":{width:"300px",height:"400px"},"3:2":{width:"600px",height:"400px"},"2:3":{width:"400px",height:"600px"}}),r=e=>{let t={};for(let s in a.value)e.includes(s)&&(t=a.value[s]);return t},u=E(),g=R(),h=c((()=>"dark"===g.theme)),b=t,w=o(),{toClipboard:C}=T(),I=c((()=>H[e.task.mode]||"模式错误")),U=c((()=>$[e.task.action])),A=c((()=>Q[e.task.status]||"-"));let F="";const G=n(0),Z=new Map([["U1","选中1"],["U2","选中2"],["U3","选中3"],["U4","选中4"],["V1","变换1"],["V2","变换2"],["V3","变换3"],["V4","变换4"],["Vary (Subtle)","微调（弱）"],["Vary (Strong)","微调（强）"],["Vary (Region)","局部重绘"],["Zoom Out 2x","扩2倍"],["Zoom Out 1.5x","扩1.5倍"],["Upscale (Subtle)","放大（弱）"],["Upscale (Creative)","放大（强）",he],["Vary (Subtle)","变换（弱）"],["Vary (Strong)","变换（强）"],["Redo Upscale (Subtle)","重绘（弱）"],["Redo Upscale (Creative)","重绘（强）"],["Redo Upscale (2x)","重绘（2x）"],["Redo Upscale (4x)","重绘（4x）"]]),Y={"Upscale (Subtle)":he,"Upscale (Creative)":he,"Vary (Subtle)":we,"Vary (Strong)":we,"Redo Upscale (Subtle)":be,"Redo Upscale (Creative)":be,"Redo Upscale (2x)":be,"Redo Upscale (4x)":be,"Vary (Region)":be},ee=[{text:"编辑",reg:function(e){return/upsample:|reroll/.test(e.customId)},desc:"参数释义：选中并放大某张图片，放大后可进行下一步的绘画操作，局部重绘、平移、扩图等"},{text:"变化",reg:function(e){return/:variation:/.test(e.customId)},desc:"参数释义：以某张图片为基准重新生成 如 V1 则变换第一张图片，以此类推"},{text:"放大",reg:function(e){return/upsample_/.test(e.customId)},desc:"参数释义：对当前图片进行放大"},{text:"调整",reg:function(e){return/_variation|Inpaint:/.test(e.customId)},desc:"参数释义：Vary 以当前图片为基础调整图片"},{text:"扩图",reg:function(e){return/Outpaint:/.test(e.customId)},desc:"参数释义：ZoomOut ，对当前图片按照倍数进行扩大，周围自动AI填充，可无限重复无限扩大"},{text:"拉伸",reg:function(e){return/pan_/.test(e.customId)},desc:"参数释义：对当前图片进行各个方向的拓展"},{text:"描述",reg:function(e){return/PicReader|Picread:/.test(e.customId)},desc:""}],te=c((()=>{if(!e.task.buttons)return[];const t=[];return ee.forEach((a=>{const s=e.task.buttons.filter((e=>"string"==typeof a.reg?e.label.includes(a.reg):"function"==typeof a.reg?a.reg(e):void 0));s.forEach((e=>e.zhLabel=Z.get(e.label)||e.label)),s.length&&t.push({text:a.text,desc:a.desc,children:s})})),t}));function se(e,t){return e.replace(t,"").replace("--relax","").replace("--fast","").replace("--s 0","").replace("--c 0","")}const le=n(""),re=n(0),oe=function(){re.value=e.task.id},ne=function(t){t&&(e.task.favorite=Number(!e.task.favorite)),re.value=0},ce=async function(e){try{await C(e),w.success("复制成功")}catch(t){w.error("复制失败!!")}},ue=async function(){await O({id:e.task.id}),b("remove")},de=async()=>{await P({id:e.task.id,favorite:Number(!e.task.favorite)})&&w.success((0===e.task.favorite?"收藏":"取消收藏")+" 成功"),1==e.task.favorite&&b("remove"),e.task.favorite=Number(!e.task.favorite)},pe=e=>{if(["U1","U2","U3","U4"].includes(e.label))return X.U_SCALE;if(["V1","V2","V3","V4"].includes(e.label))return X.V_EXPAND;if(!e.label&&e.emoji){if("🔄"===e.emoji)return X.REGENERATE;if(["⬅️","➡️","⬆️","⬇️"].includes(e.emoji))return X.STRETCH;if(["1️⃣","2️⃣","3️⃣","4️⃣"].includes(e.emoji))return X.IMAGE_TO_TEXT_ACTION}return e.label.includes("Upscale (4x)")?X.UPSCALE_4X:e.label.includes("Upscale (2x)")?X.UPSCALE_2X:e.label.includes("Vary (Subtle)")?X.VARY_SUBTLE:e.label.includes("Vary (Strong)")?X.VARY_STRONG:e.label.includes("Vary (Region)")?X.VARY_REGION:e.label.includes("Make Square")?X.SQUARE:e.label.includes("Zoom Out 2x")?X.ZOOM2X:e.label.includes("Zoom Out 1.5x")?X.ZOOM1_5X:e.label.includes("Custom Zoom")?X.ZOOM_CUSTOM:e.label.includes("Redo Upscale (Subtle)")?X.REDO_UPSCALE_SUBTLE:e.label.includes("Redo Upscale (Creative)")?X.REDO_UPSCALE_CREATIVE:X.NONE},ke=n(0),ve=function(t){if(t){const a={type:J.IMAGE_ACTION,params:{prompt:t,taskId:e.task.id,action:X.VARY_REGION}};b("addTask",a,(e=>{e&&(ke.value=0)}))}else ke.value=0},fe=function(t){if(t){const a={type:J.IMAGE_ACTION,params:{...t,taskId:e.task.id,customId:F}};b("addTask",a,(e=>{e&&(F="",G.value=0)}))}else F="",G.value=0};return(t,a)=>{var o,n,c,g;return s(),l("div",{class:y([["mj-task",t.type],"dark:bg-[#D8B07419] bg-[#e0e5f7] border-l-2 border-[#3c69e7] dark:border-[#F0B132]"])},["chat"===t.type?(s(),l("div",Ce,[i("div",_e,[h.value?(s(),l("img",Ie)):(s(),l("img",Ue))]),i("div",null,[i("div",Ae,[i("div",Ee,[a[13]||(a[13]=i("span",{class:"discord-en text-[#333333] dark:text-[#D9D3D0]"},"Midjourney Bot",-1)),a[14]||(a[14]=i("span",{class:"discord-cn text-[#079F49] bg-[#c7dbe4] dark:text-[#26F37B] dark:bg-[#23A5592D]"},"AI机器人",-1)),le.value?(s(),l("span",{key:1,class:"task-seed",onClick:a[1]||(a[1]=e=>async function(){try{await C(le.value),w.success("复制成功")}catch(e){w.error("复制失败!!")}}())},j(le.value),1)):(s(),l("span",{key:0,class:"task-seed",onClick:a[0]||(a[0]=t=>async function(){const t=await V({jobId:e.task.jobId}).catch((()=>{w.error("获取失败!!")}));le.value=t.data}())},"获取seed值")),i("div",Re,[i("span",Te,j(t.task.createdAt),1)])]),i("div",je,[i("div",{class:"flex cursor-pointer items-center",onClick:a[2]||(a[2]=e=>de())},[v(k(N),null,{default:p((()=>[1===t.task.favorite?(s(),d(k(ae),{key:0})):(s(),d(k(K),{key:1}))])),_:1}),a[15]||(a[15]=i("span",null,"收藏",-1))]),_(" "+j(null==(o=t.task)?void 0:o.squareType)+" ",1),(null==(n=t.task)?void 0:n.squareType)?f("",!0):(s(),l("div",{key:0,class:"flex cursor-pointer items-center",onClick:a[3]||(a[3]=e=>oe())},[v(k(N),null,{default:p((()=>[v(k(ie))])),_:1}),a[16]||(a[16]=i("span",null,"发布",-1))])),t.task.status>=3?(s(),d(k(W),{key:1,onPositiveClick:a[4]||(a[4]=e=>ue()),style:S(h.value?"background:#19191B":"background:#F8F9F9")},{trigger:p((()=>[i("div",Se,[i("div",{class:y(["delete-icon",h.value?"icon-delete-copy":"delete-icon"])},null,2),a[17]||(a[17]=i("span",null,"删除",-1))])])),default:p((()=>[a[18]||(a[18]=_(" 您确认要删除任务吗？ "))])),_:1},8,["style"])):f("",!0)])])]),i("div",Ve,[i("p",{style:{display:"inline-block"},onClick:a[5]||(a[5]=e=>ce(t.task.originPrompt+" "+se(t.task.fullPrompt,t.task.prompt)))},[i("span",null,j(t.task.originPrompt),1)])]),a[20]||(a[20]=i("div",{style:{width:"100%","background-color":"#5A504A",height:"1px","margin-top":"8px"}},null,-1)),i("div",Oe,[i("p",{style:{display:"inline-block"},onClick:a[6]||(a[6]=e=>ce(t.task.prompt+" "+se(t.task.fullPrompt,t.task.prompt)))},[(s(!0),l(x,null,m((c=t.task.prompt+" "+t.task.fullPrompt,g=t.task.prompt,function(e){const t=/(https?:\/\/[^\s]+)/g,a=e.split(t),s=[];for(let l=0;l<a.length;l++)a[l]&&(t.test(a[l])?s.push({type:"link",value:a[l]}):s.push({type:"text",value:a[l].trim()}));return s}(c.replace(g,"").replace("--relax","").replace("--fast","").replace("--s 0","").replace("--c 0",""))),(e=>(s(),l("span",null,["link"===e.type?(s(),d(k(M),{key:0,placement:"bottom",trigger:"hover"},{trigger:p((()=>a[19]||(a[19]=[i("span",{class:"bg-[#000000] text-[13px] p-[5px] mx-1 cursor-pointer"},"图片链接",-1)]))),default:p((()=>[i("span",null,j(e.value),1)])),_:2},1024)):(s(),l(x,{key:1},[_(j(e.value),1)],64))])))),256))])])])):f("",!0),"task"===t.type?(s(),l("div",Pe,[i("div",Ne,[i("div",Me,[i("span",null,j(U.value)+"-"+j(A.value),1)]),i("div",Be,[v(k(B),{trigger:"hover"},{trigger:p((()=>[i("div",{class:y(["action-icon",h.value?"icon-share-copy":"icon-share"]),onClick:a[7]||(a[7]=e=>oe())},null,2)])),default:p((()=>[a[21]||(a[21]=_(" 发布到广场 "))])),_:1}),v(k(B),{trigger:"hover"},{trigger:p((()=>[i("div",{class:y(["action-icon",h.value?"icon-copy-copy":"icon-copy"]),onClick:a[8]||(a[8]=e=>ce())},null,2)])),default:p((()=>[a[22]||(a[22]=_(" 复制最终执行提示词 "))])),_:1}),v(k(B),{trigger:"hover"},{trigger:p((()=>[i("div",{class:y(["action-icon",h.value?"icon-down-copy":"icon-down"]),onClick:a[9]||(a[9]=t=>async function(){e.task.imageUrl?u.info({title:"下载图片",content:"是否确认下载当前图片",positiveText:"下载",negativeText:"取消",onPositiveClick:async()=>{const t=e.task.imageUrl.split("/");z(e.task.imageUrl,t[t.length-1])}}):w.warning("图片未生成完成暂不能下载")}())},null,2)])),default:p((()=>[a[23]||(a[23]=_(" 下载图片 "))])),_:1}),t.task.status>=3?(s(),d(k(B),{key:0,trigger:"hover"},{trigger:p((()=>[i("div",{class:y(["action-icon",h.value?"icon-delete-copy":"icon-delete"]),onClick:a[10]||(a[10]=t=>{u.create({type:"default",title:"确认删除",content:(e.task.favorite?"当前任务已被收藏，删除绘画任务会导致收藏失效且不可找回，确定删除":"删除绘画任务不可找回，确定删除")+"？",positiveText:"确定",negativeText:"取消",maskClosable:!1,onPositiveClick:()=>ue()})})},null,2)])),default:p((()=>[a[24]||(a[24]=_(" 删除任务 "))])),_:1})):f("",!0),v(k(B),{trigger:"hover"},{trigger:p((()=>[v(k(L),{onClick:a[11]||(a[11]=e=>de()),icon:0===t.task.favorite?"uit:favorite":"uis:favorite",class:"mx-1 cursor-pointer action-icon"},null,8,["icon"])])),default:p((()=>[a[25]||(a[25]=_(" 收藏此任务 "))])),_:1})])]),v(k(B),{trigger:"hover"},{trigger:p((()=>[i("div",Le,[i("div",null,j(t.task.fullPrompt),1)])])),default:p((()=>[_(" "+j(t.task.fullPrompt),1)])),_:1})])):f("",!0),i("div",{class:y(["task-img",t.type])},[2!==t.task.status&&6!==t.task.status||0==t.task.progress?f("",!0):(s(),l("div",De,[a[26]||(a[26]=i("div",{class:"loader"},null,-1)),t.task.progress&&100!==t.task.progress?(s(),l("span",ze,j(t.task.progress)+"%",1)):f("",!0)])),1!==t.task.status&&0!=t.task.progress||4==t.task.status||7==t.task.status?f("",!0):(s(),l("div",Fe,a[27]||(a[27]=[i("div",{class:"loader"},null,-1),i("span",null,"排队中",-1)]))),t.task.imageUrl&&3===t.task.status&&0!==t.task.progress?(s(),d(k(D),{key:2,"preview-src":t.task.imageUrl,style:S([{display:"flex","border-radius":"12px"},{...r(t.task.extraParam)}]),"fallback-src":k("/static/png/draw-fail-ce560894.png"),src:t.task.imageUrl+"?imageView2/0/w/300/q/85&format=webp&quality=lossless&width=300&height=300"},null,8,["preview-src","fallback-src","style","src"])):4===t.task.status?(s(),l("img",qe)):t.task.status<=3||6===t.task.status?(s(),l("div",Ge)):f("",!0)],2),i("div",null,[3===t.task.status?(s(!0),l(x,{key:0},m(te.value,((r,o)=>(s(),l("div",{class:"task-btns",key:t.task.id+"-"+o},[i("div",Ze,[i("span",Ye,j(r.text)+" :",1),r.desc?(s(),d(k(B),{key:0,trigger:"hover"},{trigger:p((()=>a[28]||(a[28]=[i("img",{src:"/static/svg/info-1f57612a.svg",alt:"",srcset:""},null,-1)]))),default:p((()=>[_(" "+j(r.desc),1)])),_:2},1024)):f("",!0)]),(s(!0),l(x,null,m(r.children,((r,n)=>(s(),l("div",{class:"btn-item",key:t.task.id+"-"+o+"-"+n,onClick:t=>async function(t){if(1==t.isLoding)return;if(t.isLoding=!0,pe(t)===X.VARY_REGION)G.value=e.task.id,F=t.customId;else{const a={type:J.IMAGE_ACTION,params:{taskId:e.task.id,action:pe(t),customId:t.customId,enableRemix:!1}};b("addTask",a,(e=>{console.log(e),t.isLoding=!1}))}}(r)},[Y[r.label]?(s(),l("img",{key:0,style:{width:"14px",height:"14px","margin-right":"7px"},src:Y[r.label],alt:""},null,8,He)):f("",!0),r.isLoding?f("",!0):(s(),l("div",$e,j(r.zhLabel||r.emoji),1)),r.isLoding?(s(),l("div",Qe,a[29]||(a[29]=[i("div",{class:"loader"},null,-1)]))):f("",!0)],8,Xe)))),128))])))),128)):f("",!0),4===t.task.status||7===t.task.status?(s(),l("div",Je,[a[30]||(a[30]=i("span",null,"任务失败:",-1)),i("span",null,j(t.task.failReason),1)])):f("",!0),6===t.task.status?(s(),l("div",{key:2,class:"modal-btn",onClick:a[12]||(a[12]=t=>{9===e.task.action?(F=e.task.customId,G.value=e.task.id):(ke.value=e.task.id,console.log(ke))})},"补充提示词")):f("",!0)]),"task"===t.type?(s(),l("div",Ke,[i("span",We,j(I.value),1),i("span",et,j(k(q)(t.task.createdAt)),1)])):f("",!0),v(ge,{taskId:G.value,onClose:fe},null,8,["taskId"]),v(me,{taskId:re.value,onClose:ne},null,8,["taskId"]),v(xe,{"task-id":ke.value,onClose:ve},null,8,["task-id"])],2)}}}),[["__scopeId","data-v-cf8f683a"]]);export{tt as M};
