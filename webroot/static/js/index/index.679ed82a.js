import{e as a,Z as s,k as t,p as e,g as l,r as i,w as r,x as o,C as n,D as d,B as c,am as m,A as p,z as v,F as k,E as u,y as g,I as f,aj as y,G as x,a4 as w,a1 as h,ao as b,$ as I,bs as D,_ as C}from"../main-a0b53047.js";import{a as _}from"../draw-fail/draw-fail.ad8fd01b.js";import{_ as L,a as j,b as B}from"../KLingIcon3/KLingIcon3.6acffd30.js";import{N as P}from"../Popconfirm/Popconfirm.a6d67891.js";const $={class:"dallTaskBox"},A=["src"],F={class:"dallTaskItem bg-[#fff] dark:bg-[#313338]",style:{padding:"12px 12px 12px 0","border-radius":"12px",display:"flex","margin-top":"12px"}},O={class:"content",style:{"margin-left":"12px",width:"100%"}},N={style:{display:"flex","justify-content":"space-between"}},R={style:{display:"flex","align-items":"center"}},E={class:"discord-en"},G={class:"discord-time"},J={key:0,class:"flexLabel"},K={key:0,class:"itemLabel"},S={key:1,class:"itemLabel"},T={key:1,class:"answerImgBox"},z=["onClick","src"],W={key:2,style:{display:"flex","align-items":"center"}},Z={key:0,style:{width:"20%",height:"246px",display:"flex","flex-direction":"column","align-items":"center"}},q={style:{"margin-top":"8px",color:"#D4237A"}},H={key:1,style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},M={class:"loader"},Q={class:"btnBox"},U={class:"btnItem"},V={style:{display:"flex","align-items":"center"}},X={class:"btnItem"},Y={class:"btnItem"},aa=C(a({__name:"index",props:{task:{type:Object}},setup(a){const C=s(),aa=t(),sa=e(),ta=l((()=>"dark"===C.theme)),ea=a,la=i(!1),ia=i("");let ra=()=>{f.emit("copyDallData",ea.task)},oa=()=>{var a;(null==(a=null==aa?void 0:aa.userInfo)?void 0:a.score)>0?f.emit("generateDallDraw",ea.task):sa.error(I("common.noPoint"))},na=i(!1),da=()=>{na.value=!0,D({id:ea.task.id}).then((a=>{f.emit("dallDrawList"),na.value=!1}))};return(a,s)=>(r(),o("div",$,[n(g(h),{show:g(na)},{default:d((()=>{var t;return[la.value?(r(),o("div",{key:0,onClick:s[1]||(s[1]=a=>{la.value=!1,ia.value=""}),class:"mask"},[c("img",{src:ia.value,style:{width:"auto",height:"90%"},alt:"",onClick:s[0]||(s[0]=m((()=>{}),["stop"]))},null,8,A)])):p("",!0),c("div",F,[s[8]||(s[8]=c("div",{class:"avator"},[c("div",{class:"discord-avatar"},[c("img",{src:"/static/svg/Discord-DALL-9df7c553.svg",alt:""})])],-1)),c("div",O,[c("div",N,[c("div",R,[c("span",E,v(a.$t("draw.imgGen")),1),c("div",G,v(ea.task.createdAt),1)])]),c("div",{class:"title",style:{"margin-top":"4px",cursor:"pointer"},onClick:s[2]||(s[2]=a=>{var s;(s=ea.task.prompt)?(b({text:s}),sa.success(I("chat.copied"))):sa.error(I("draw.noDataCopy"))})},v(ea.task.prompt),1),c("div",null,[ea.task?(r(),o("div",J,[(null==(t=ea.task)?void 0:t.modelInfo)?(r(),o("div",K,v(ea.task.modelInfo.label),1)):p("",!0),ea.task.fileInfo?(r(),o("div",S,v(JSON.parse(ea.task.fileInfo).width+"Ã—"+JSON.parse(ea.task.fileInfo).height),1)):p("",!0)])):p("",!0),10==ea.task.status&&ea.task.responseResult&&ea.task.responseResult.length>0?(r(),o("div",T,[(r(!0),o(k,null,u(ea.task.responseResult,(a=>(r(),o("img",{onClick:s=>function(a){la.value=!0,ia.value=a}(a.url),src:a.thumb,onLoad:s[3]||(s[3]=a=>g(f).emit("drawtoBottom")),alt:""},null,40,z)))),256))])):(r(),o("div",W,[4==ea.task.status?(r(),o("div",Z,[s[6]||(s[6]=c("img",{src:_,alt:""},null,-1)),c("p",q,v(a.$t("draw.drawErro")),1)])):(r(),o("div",H,[(r(!0),o(k,null,u(ea.task.n,(a=>(r(),o("div",M)))),256))]))]))]),c("div",Q,[c("div",U,[n(g(y),{trigger:"hover"},{trigger:d((()=>[c("img",{src:L,onClick:s[4]||(s[4]=(...a)=>g(ra)&&g(ra)(...a)),alt:""})])),default:d((()=>[c("div",V,[c("span",null,v(a.$t("draw.useImgParams")),1)])])),_:1})]),c("div",X,[c("img",{src:j,onClick:s[5]||(s[5]=(...a)=>g(oa)&&g(oa)(...a)),alt:""})]),c("div",Y,[n(g(P),{onPositiveClick:g(da),style:x(ta.value?"background:#19191B":"background:#F8F9F9")},{trigger:d((()=>s[7]||(s[7]=[c("img",{src:B,alt:"",style:{width:"16px",height:"16px"}},null,-1)]))),default:d((()=>[w(" "+v(a.$t("draw.confirmDelWork")),1)])),_:1},8,["onPositiveClick","style"])])])])])]})),_:1},8,["show"])]))}}),[["__scopeId","data-v-18326aec"]]);export{aa as D};
