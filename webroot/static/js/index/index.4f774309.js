import{_ as e,a as t}from"../draw-fail/draw-fail.ad8fd01b.js";import{e as a,w as s,x as l,B as r,al as o,p as i,r as n,g as c,L as d,O as u,D as p,C as k,y as v,a1 as m,A as g,E as f,a2 as y,F as w,aJ as x,ak as h,K as b,a4 as C,z as I,aD as _,aI as E,a9 as T,bU as U,$ as R,bV as A,Z as j,bW as S,N as O,G as V,aj as $,aK as P,a3 as F,I as D,ae as N,bX as L,bY as B,ay as M,W as q,_ as z}from"../main-4156cf5e.js";import{u as G}from"./index.5b75f753.js";import{S as Z}from"./index.745d5eac.js";import{g as X,M as Y}from"../draw/draw.a81c0f1a.js";import{M as H,b as W,c as K,d as J,a as Q}from"./index.27c727e8.js";import{H as ee}from"../HeartOutline/HeartOutline.79c6c696.js";import{N as te}from"../Popconfirm/Popconfirm.c9db7ff9.js";const ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},se=[r("path",{d:"M256 448l-9-6c-42.78-28.57-96.91-60.86-137-108.32c-42.25-50-62.52-101.35-62-157C48.63 114.54 98.46 64 159.08 64c48.11 0 80.1 28 96.92 48.21C272.82 92 304.81 64 352.92 64c60.62 0 110.45 50.54 111.08 112.65c.56 55.68-19.71 107-62 157c-40.09 47.49-94.22 79.78-137 108.35z",fill:"currentColor"},null,-1)],le=a({name:"HeartSharp",render:function(e,t){return s(),l("svg",ae,se)}}),re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oe=[o('<circle cx="128" cy="256" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="384" cy="112" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="384" cy="400" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M169.83 279.53l172.34 96.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M342.17 135.53l-172.34 96.94"></path>',5)],ie=a({name:"ShareSocialOutline",render:function(e,t){return s(),l("svg",re,oe)}}),ne={class:"relative"},ce={class:"flex-1 flex items-center justify-center relative h-full"},de={key:0,class:"absolute top-0 h-[640px]"},ue={class:"w-full h-full justify-center items-center flex"},pe={class:"absolute left-0 top-0 flex justify-center items-center",id:"appbody"},ke={class:"flex inset-x-0 bottom-0 w-full items-end justify-between p-3 gap-4"},ve=["onClick"],me={class:"flex items-end flex-1 gap-4"},ge=["disabled"],fe=a({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:t}){const a=e,o=t,b=[{label:"rect",value:0,icon:"rect"},{label:"lasso",value:.5,icon:"lasso"}],C=i(),I=n(),_=n(0),E=n(),T=n(0),U=n(!0),R=n(""),A=c((()=>Boolean(a.taskId))),j=async function(){R.value="",T.value=0,U.value=!0;const e=await X(a.taskId),t=await(s=e.data,new Promise((async e=>{const t=new Image;t.src=s,t.onload=()=>e(t)})));var s;U.value=!1,I.value=new Y(E.value,t)},S=()=>{var e;null==(e=I.value)||e.undo()},O=function(){var e;1!=_.value&&(_.value=1,null==(e=I.value)||e.submit().then((async e=>{o("close",{mask:e,taskId:a.taskId,prompt:R.value,action:H.VARY_REGION})})).catch((e=>{C.error(e),_.value=0})))};return d((()=>a.taskId),(e=>{var t;e?j():null==(t=I.value)||t.destroy()})),(e,t)=>(s(),u(v(h),{show:A.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",style:{width:"1200px",height:"800px"},title:"区域重绘",onClose:t[1]||(t[1]=e=>o("close"))},{default:p((()=>[r("div",ne,[r("div",ce,[U.value?(s(),l("div",de,[r("div",ue,[k(v(m),{size:"large"})])])):g("",!0),r("canvas",{ref_key:"canvasRef",ref:E,resize:"true",style:{padding:"0px",margin:"0px",width:"1024px",height:"640px"}},null,512)]),r("div",pe,[r("button",{onClick:S,class:"rounded-full bg-[#5a91fc] dark:bg-[#888] w-8 h-8"},[k(v(Z),{name:"undo",class:"text-white"})])]),r("div",ke,[(s(),l(w,null,f(b,(e=>r("div",{class:"flex gap-2",onClick:t=>(e=>{var t;T.value=e.value,null==(t=I.value)||t.updateTool(e.value)})(e)},[r("button",{class:y(["rounded-full w-8 h-8",[e.value===T.value?"bg-[#10A37F] dark:bg-[#10A37F]":"bg-[#5a91fc] dark:bg-[#888]"]])},[k(v(Z),{name:e.icon,class:"text-white"},null,8,["name"])],2)],8,ve))),64)),r("div",me,[k(v(x),{value:R.value,"onUpdate:value":t[0]||(t[0]=e=>R.value=e),rows:2,class:"resize-none overflow-hidden flex-1 !border-gray-200 rounded bg-[#f4f4f4] dark:bg-[#010102]",placeholder:e.$t("draw.inputDesc")},null,8,["value","placeholder"]),r("button",{class:"rounded-full bg-[#10A37F] dark:bg-[#10A37F] w-8 h-8",disabled:!R.value,onClick:O},[_.value?(s(),u(v(m),{key:0,size:18,stroke:"#fff",style:{"margin-top":"5px"}})):(s(),u(v(Z),{key:1,name:"send",class:"text-white"}))],8,ge)])])])])),_:1},8,["show"]))}}),ye={class:"my-8"},we=a({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:t}){const a=i(),l=e,o=t,d=c((()=>Boolean(l.taskId))),m=b({squareType:""}),g=n([]),f=async()=>{const e=await T({page:1,size:100});g.value=e.data.rows,g.value.length&&(m.squareType=g.value[0].value)},y=async()=>{await U({id:l.taskId,squareType:m.squareType,rec:1})&&a.success(R("draw.releasePublishSucc")),o("close",!0)};return(e,t)=>(s(),u(v(h),{show:d.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",title:e.$t("draw.releasePublish"),onAfterEnter:f,onClose:t[2]||(t[2]=e=>o("close",!1))},{action:p((()=>[k(v(_),{round:"",onClick:t[1]||(t[1]=e=>o("close",!1))},{default:p((()=>[C(I(e.$t("common.cancel")),1)])),_:1}),k(v(_),{round:"",type:"primary",onClick:y},{default:p((()=>[C(I(e.$t("knowledge.release")),1)])),_:1})])),default:p((()=>[r("div",ye,[r("div",null,I(e.$t("draw.chosePublishType")),1),r("div",null,[k(v(E),{class:"dark:bg-[#010102]",value:m.squareType,"onUpdate:value":t[0]||(t[0]=e=>m.squareType=e),placeholder:e.$t("draw.chosePublishType"),"label-field":"name",options:g.value},null,8,["value","placeholder","options"])])])])),_:1},8,["show","title"]))}}),xe={class:"my-8"},he=a({__name:"index",props:{taskId:{}},emits:["close"],setup(e,{emit:t}){const a=i(),l=e,o=t,m=n(""),g=c((()=>Boolean(l.taskId)));d((()=>g),(e=>{e&&(m.value="")}));return(e,t)=>(s(),u(v(h),{show:g.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",title:e.$t("draw.desSupp"),onClose:t[3]||(t[3]=e=>o("close"))},{action:p((()=>[k(v(_),{round:"",onClick:t[1]||(t[1]=e=>o("close"))},{default:p((()=>[C(I(e.$t("common.cancel")),1)])),_:1}),k(v(_),{round:"",type:"primary",onClick:t[2]||(t[2]=e=>{m.value?o("close",m.value):a.warning(R("draw.descDontEmpty"))})},{default:p((()=>[C(I(e.$t("common.confirm")),1)])),_:1})])),default:p((()=>[r("div",xe,[r("div",null,I(e.$t("draw.inputNewImgDesc")),1),k(v(x),{value:m.value,"onUpdate:value":t[0]||(t[0]=e=>m.value=e),placeholder:e.$t("draw.inputNewImgDesc"),type:"textarea",resizable:!1,rows:7},null,8,["value","placeholder"])])])),_:1},8,["show","title"]))}}),be="/static/svg/amplify-426d4db7.svg",Ce="/static/svg/Redraw-8fd6761a.svg",Ie="/static/svg/tuning-bccd19c4.svg",_e={key:0,style:{width:"100%"}},Ee={class:"discord-avatar border border-[#E8E8E8] dark:border-[#2D2E33] dark:bg-[#fff]"},Te={key:0,src:"/static/png/botAvatar-253a5030.png",style:{width:"26px",height:"26px"},alt:""},Ue={key:1,src:e,alt:""},Re={style:{display:"flex","justify-content":"space-between"}},Ae={style:{display:"flex","align-items":"center"}},je={class:"discord-cn text-[#574FFE] bg-[#ebeafb] dark:text-[#26F37B] dark:bg-[#23A5592D]"},Se={style:{"margin-left":"10px"}},Oe={class:"task-time"},Ve={class:"flex gap-4"},$e={class:"task-delete"},Pe={class:"origin-prompt dark:text-white text-[#767676]"},Fe={class:"en-prompt"},De={class:"bg-[#F2F3F7] text-[13px] p-[5px] mx-1 cursor-pointer",style:{"border-radius":"5px"}},Ne={style:{"white-space":"pre-line","line-height":"1.6"}},Le={key:1,style:{"white-space":"pre-line","line-height":"1.6"}},Be={key:1,style:{width:"100%"}},Me={style:{display:"flex","justify-content":"space-between"}},qe={class:"action-text"},ze={style:{flex:"1",display:"flex","align-items":"center","justify-content":"end"}},Ge={class:"full-prompt"},Ze={key:0,class:"loader-box"},Xe={key:0},Ye={key:1,class:"loader-box"},He={key:3,src:t,alt:""},We={key:4,style:{height:"400px",width:"400px"}},Ke={class:"btn-desc"},Je={class:"dark:text-[#DBD2CF] text-[#666666]",style:{"margin-right":"6px","font-size":"16px","white-space":"nowrap"}},Qe=["onClick"],et=["src"],tt={key:1},at={key:2},st={key:1},lt={key:2,style:{bottom:"16px",display:"flex","margin-top":"6px",position:"absolute",width:"calc(100% - 26px)","justify-content":"space-between"}},rt={class:"task-mode"},ot={class:"task-time"},it=z(a({__name:"index",props:{type:{},task:{}},emits:["remove","addTask"],setup(e,{emit:t}){const a=n({"1:1":{width:"400px",height:"400px"},"1:2":{width:"350px",height:"700px"},"16:9":{width:"640px",height:"360px"},"9:16":{width:"360px",height:"640px"},"4:3":{width:"400px",height:"300px"},"3:4":{width:"300px",height:"400px"},"3:2":{width:"600px",height:"400px"},"2:3":{width:"400px",height:"600px"}}),o=e=>{let t={};for(let s in a.value)e.includes(s)&&(t=a.value[s]);return t},d=A(),m=j(),x=c((()=>"dark"===m.theme)),h=t,b=i(),{toClipboard:_}=S(),E=c((()=>W[e.task.mode]||R("draw.modeError"))),T=c((()=>K[e.task.action])),U=c((()=>J[e.task.status]||"-"));let z="";const Z=n(0),X=new Map([["U1","选中1"],["U2","选中2"],["U3","选中3"],["U4","选中4"],["V1","变换1"],["V2","变换2"],["V3","变换3"],["V4","变换4"],["Vary (Subtle)","微调（弱）"],["Vary (Strong)","微调（强）"],["Vary (Region)","局部重绘"],["Zoom Out 2x","扩2倍"],["Zoom Out 1.5x","扩1.5倍"],["Upscale (Subtle)","放大（弱）"],["Upscale (Creative)","放大（强）",be],["Vary (Subtle)","变换（弱）"],["Vary (Strong)","变换（强）"],["Redo Upscale (Subtle)","重绘（弱）"],["Redo Upscale (Creative)","重绘（强）"],["Redo Upscale (2x)","重绘（2x）"],["Redo Upscale (4x)","重绘（4x）"]]),Y={"Upscale (Subtle)":be,"Upscale (Creative)":be,"Vary (Subtle)":Ie,"Vary (Strong)":Ie,"Redo Upscale (Subtle)":Ce,"Redo Upscale (Creative)":Ce,"Redo Upscale (2x)":Ce,"Redo Upscale (4x)":Ce,"Vary (Region)":Ce},ae=[{text:R("common.edit"),reg:function(e){return/upsample:|reroll/.test(e.customId)},desc:R("draw.paramsText1")},{text:R("draw.transfor"),reg:function(e){return/:variation:/.test(e.customId)},desc:R("draw.paramsText2")},{text:R("draw.amplify"),reg:function(e){return/upsample_/.test(e.customId)},desc:R("draw.paramsText3")},{text:R("draw.adjust"),reg:function(e){return/_variation|Inpaint:/.test(e.customId)},desc:R("draw.paramsText4")},{text:R("draw.imgExpansion"),reg:function(e){return/Outpaint:/.test(e.customId)},desc:R("draw.paramsText5")},{text:R("draw.stretch"),reg:function(e){return/pan_/.test(e.customId)},desc:R("draw.paramsText6")},{text:R("draw.description"),reg:function(e){return/PicReader|Picread:/.test(e.customId)},desc:""}],se=c((()=>{if(!e.task.buttons)return[];const t=[];return ae.forEach((a=>{const s=e.task.buttons.filter((e=>"string"==typeof a.reg?e.label.includes(a.reg):"function"==typeof a.reg?a.reg(e):void 0));s.forEach((e=>e.zhLabel=X.get(e.label)||e.label)),s.length&&t.push({text:a.text,desc:a.desc,children:s})})),t}));function re(e,t){return e.replace(t,"").replace("--relax","").replace("--fast","").replace("--s 0","").replace("--c 0","")}const oe=function(e,t){const a=e.replace(t,"").replace("--relax","").replace("--fast","").replace("--s 0","").replace("--c 0","");return console.log(a,"currPrompt"),function(e){const t=/(https?:\/\/[^\s]+)/g,a=e.split(t),s=[];for(let l=0;l<a.length;l++)a[l]&&(t.test(a[l])?s.push({type:"link",value:a[l]}):s.push({type:"text",value:a[l]}));return console.log(s[0].value,"result"),s}(a)},ne=n(""),ce=n(0),de=function(){ce.value=e.task.id},ue=function(t){t&&(e.task.favorite=Number(!e.task.favorite)),ce.value=0},pe=async function(e){try{await _(e),b.success(R("chat.copied"))}catch(t){b.error(R("setting.copyErro")+"!!")}},ke=async function(){await M({id:e.task.id}),h("remove")},ve=async()=>{await q({id:e.task.id,favorite:Number(!e.task.favorite)})&&b.success(`${0===e.task.favorite?R("gpt.collect"):R("digitalMan.cancelCollect")}`+R("common.succ")),1==e.task.favorite&&h("remove"),e.task.favorite=Number(!e.task.favorite)},me=e=>{if(["U1","U2","U3","U4"].includes(e.label))return H.U_SCALE;if(["V1","V2","V3","V4"].includes(e.label))return H.V_EXPAND;if(!e.label&&e.emoji){if("🔄"===e.emoji)return H.REGENERATE;if(["⬅️","➡️","⬆️","⬇️"].includes(e.emoji))return H.STRETCH;if(["1️⃣","2️⃣","3️⃣","4️⃣"].includes(e.emoji))return H.IMAGE_TO_TEXT_ACTION}return e.label.includes("Upscale (4x)")?H.UPSCALE_4X:e.label.includes("Upscale (2x)")?H.UPSCALE_2X:e.label.includes("Vary (Subtle)")?H.VARY_SUBTLE:e.label.includes("Vary (Strong)")?H.VARY_STRONG:e.label.includes("Vary (Region)")?H.VARY_REGION:e.label.includes("Make Square")?H.SQUARE:e.label.includes("Zoom Out 2x")?H.ZOOM2X:e.label.includes("Zoom Out 1.5x")?H.ZOOM1_5X:e.label.includes("Custom Zoom")?H.ZOOM_CUSTOM:e.label.includes("Redo Upscale (Subtle)")?H.REDO_UPSCALE_SUBTLE:e.label.includes("Redo Upscale (Creative)")?H.REDO_UPSCALE_CREATIVE:H.NONE},ge=n(0),ye=function(t){if(t){const a={type:Q.IMAGE_ACTION,params:{prompt:t,taskId:e.task.id,action:H.VARY_REGION}};h("addTask",a,(e=>{e&&(ge.value=0)}))}else ge.value=0},xe=function(t){if(t){const a={type:Q.IMAGE_ACTION,params:{...t,taskId:e.task.id,customId:z}};h("addTask",a,(e=>{e&&(z="",Z.value=0)}))}else z="",Z.value=0};return(t,a)=>{var i,n;return s(),l("div",{class:y([["mj-task",t.type],"dark:bg-[#D8B07419] bg-[#F9F9FB] border-l-2 border-[#F9F9FB] dark:border-[#F0B132]"])},["chat"===t.type?(s(),l("div",_e,[r("div",Ee,[x.value?(s(),l("img",Te)):(s(),l("img",Ue))]),r("div",null,[r("div",Re,[r("div",Ae,[a[14]||(a[14]=r("span",{class:"discord-en text-[#333333] dark:text-[#D9D3D0]"},"Midjourney Bot",-1)),r("span",je,I(t.$t("draw.AIbot")),1),ne.value?(s(),l("span",{key:1,class:"task-seed",onClick:a[1]||(a[1]=e=>async function(){try{await _(ne.value),b.success(R("chat.copied"))}catch(e){b.error(R("setting.copyErro")+"!!")}}())},I(ne.value),1)):(s(),l("span",{key:0,class:"task-seed",onClick:a[0]||(a[0]=t=>async function(){const t=await L({jobId:e.task.jobId}).catch((()=>{b.error(R("draw.getErro")+"!!")}));ne.value=t.data}())},I(t.$t("draw.getSeed")),1)),r("div",Se,[r("span",Oe,I(t.task.createdAt),1)])]),r("div",Ve,[r("div",{class:"flex cursor-pointer items-center",onClick:a[2]||(a[2]=e=>ve())},[k(v(O),null,{default:p((()=>[1===t.task.favorite?(s(),u(v(le),{key:0})):(s(),u(v(ee),{key:1}))])),_:1}),r("span",null,I(t.$t("gpt.collect")),1)]),C(" "+I(null==(i=t.task)?void 0:i.squareType)+" ",1),(null==(n=t.task)?void 0:n.squareType)?g("",!0):(s(),l("div",{key:0,class:"flex cursor-pointer items-center",onClick:a[3]||(a[3]=e=>de())},[k(v(O),null,{default:p((()=>[k(v(ie))])),_:1}),r("span",null,I(t.$t("knowledge.release")),1)])),t.task.status>=3?(s(),u(v(te),{key:1,onPositiveClick:a[4]||(a[4]=e=>ke()),style:V(x.value?"background:#19191B":"background:#F8F9F9")},{trigger:p((()=>[r("div",$e,[r("div",{class:y(["delete-icon",x.value?"icon-delete-copy":"delete-icon"])},null,2),r("span",null,I(t.$t("common.delete")),1)])])),default:p((()=>[C(" "+I(t.$t("draw.confirmDelWork")),1)])),_:1},8,["style"])):g("",!0)])])]),r("div",Pe,[r("p",{style:{display:"inline-block"},onClick:a[5]||(a[5]=e=>pe(t.task.originPrompt+" "+re(t.task.fullPrompt,t.task.prompt)))},[r("span",null,I(t.task.originPrompt),1)])]),a[15]||(a[15]=r("div",{style:{width:"100%","background-color":"#E0E2E9",height:"1px","margin-top":"8px"}},null,-1)),r("div",Fe,[r("p",{style:{display:"inline-block"},onClick:a[6]||(a[6]=e=>pe(t.task.prompt+" "+re(t.task.fullPrompt,t.task.prompt)))},[(s(!0),l(w,null,f(oe(t.task.prompt+" "+t.task.fullPrompt,t.task.prompt),(e=>(s(),l("span",null,["link"===e.type?(s(),u(v($),{key:0,placement:"bottom",trigger:"hover"},{trigger:p((()=>[r("span",De,I(t.$t("draw.imgLink")),1)])),default:p((()=>[r("span",Ne,I(e.value),1)])),_:2},1024)):(s(),l("span",Le,I(e.value),1))])))),256))])])])):g("",!0),"task"===t.type?(s(),l("div",Be,[r("div",Me,[r("div",qe,[r("span",null,I(T.value)+"-"+I(U.value),1)]),r("div",ze,[k(v(P),{trigger:"hover"},{trigger:p((()=>[r("div",{class:y(["action-icon",x.value?"icon-share-copy":"icon-share"]),onClick:a[7]||(a[7]=e=>de())},null,2)])),default:p((()=>[C(" "+I(t.$t("draw.releasePublish")),1)])),_:1}),k(v(P),{trigger:"hover"},{trigger:p((()=>[r("div",{class:y(["action-icon",x.value?"icon-copy-copy":"icon-copy"]),onClick:a[8]||(a[8]=e=>pe())},null,2)])),default:p((()=>[C(" "+I(t.$t("draw.copyEndTips")),1)])),_:1}),k(v(P),{trigger:"hover"},{trigger:p((()=>[r("div",{class:y(["action-icon",x.value?"icon-down-copy":"icon-down"]),onClick:a[9]||(a[9]=t=>async function(){e.task.imageUrl?d.info({title:R("draw.downloadImg"),content:R("draw.isDownImg"),positiveText:R("common.download"),negativeText:R("common.cancel"),onPositiveClick:async()=>{const t=e.task.imageUrl.split("/");B(e.task.imageUrl,t[t.length-1])}}):b.warning(R("draw.imgNoDotDown"))}())},null,2)])),default:p((()=>[C(" "+I(t.$t("draw.downloadImg")),1)])),_:1}),t.task.status>=3?(s(),u(v(P),{key:0,trigger:"hover"},{trigger:p((()=>[r("div",{class:y(["action-icon",x.value?"icon-delete-copy":"icon-delete"]),onClick:a[10]||(a[10]=t=>{d.create({type:"default",title:R("common.delete"),content:`${e.task.favorite?R("draw.delText1"):R("draw.delText2")}？`,positiveText:R("common.confirm"),negativeText:R("common.cancel"),maskClosable:!1,onPositiveClick:()=>ke()})})},null,2)])),default:p((()=>[C(" "+I(t.$t("draw.delWork")),1)])),_:1})):g("",!0),k(v(P),{trigger:"hover"},{trigger:p((()=>[k(v(F),{onClick:a[11]||(a[11]=e=>ve()),icon:0===t.task.favorite?"uit:favorite":"uis:favorite",class:"mx-1 cursor-pointer action-icon"},null,8,["icon"])])),default:p((()=>[C(" "+I(t.$t("draw.CollectThisTask")),1)])),_:1})])]),k(v(P),{trigger:"hover"},{trigger:p((()=>[r("div",Ge,[r("div",null,I(t.task.fullPrompt),1)])])),default:p((()=>[C(" "+I(t.task.fullPrompt),1)])),_:1})])):g("",!0),r("div",{class:y(["task-img",t.type])},[2!==t.task.status&&6!==t.task.status||0==t.task.progress?g("",!0):(s(),l("div",Ze,[a[16]||(a[16]=r("div",{class:"loader"},null,-1)),t.task.progress&&100!==t.task.progress?(s(),l("span",Xe,I(t.task.progress)+"%",1)):g("",!0)])),1!==t.task.status&&0!=t.task.progress||4==t.task.status||7==t.task.status?g("",!0):(s(),l("div",Ye,[a[17]||(a[17]=r("div",{class:"loader"},null,-1)),r("span",null,I(t.$t("draw.inLine")),1)])),t.task.imageUrl&&3===t.task.status&&0!==t.task.progress?(s(),u(v(N),{key:2,"preview-src":t.task.imageUrl,style:V([{display:"flex","border-radius":"12px","max-width":"400px","max-height":"700px"},{...o(t.task.extraParam)}]),"fallback-src":v("/static/png/draw-fail-ce560894.png"),onLoad:a[12]||(a[12]=e=>v(D).emit("drawtoBottom")),src:t.task.imageUrl+"?imageView2/0/w/700/q/85&format=webp&quality=lossless&width=300&height=300"},null,8,["preview-src","fallback-src","style","src"])):4===t.task.status?(s(),l("img",He)):t.task.status<=3||6===t.task.status?(s(),l("div",We)):g("",!0)],2),r("div",null,[3===t.task.status?(s(!0),l(w,{key:0},f(se.value,((o,i)=>(s(),l("div",{class:"task-btns",key:t.task.id+"-"+i},[r("div",Ke,[r("span",Je,I(o.text)+" :",1),o.desc?(s(),u(v(P),{key:0,trigger:"hover"},{trigger:p((()=>a[18]||(a[18]=[r("img",{src:"/static/svg/info-d3a23309.svg",alt:"",srcset:""},null,-1)]))),default:p((()=>[C(" "+I(o.desc),1)])),_:2},1024)):g("",!0)]),(s(!0),l(w,null,f(o.children,((o,n)=>(s(),l("div",{class:"btn-item",key:t.task.id+"-"+i+"-"+n,onClick:t=>async function(t){if(1==t.isLoding)return;if(t.isLoding=!0,me(t)===H.VARY_REGION)Z.value=e.task.id,z=t.customId;else{const a={type:Q.IMAGE_ACTION,params:{taskId:e.task.id,action:me(t),customId:t.customId,enableRemix:!1}};h("addTask",a,(e=>{console.log(e),t.isLoding=!1}))}}(o)},[Y[o.label]?(s(),l("img",{key:0,style:{width:"14px",height:"14px","margin-right":"7px"},src:Y[o.label],alt:""},null,8,et)):g("",!0),o.isLoding?g("",!0):(s(),l("div",tt,I(o.zhLabel||o.emoji),1)),o.isLoding?(s(),l("div",at,a[19]||(a[19]=[r("div",{class:"loader"},null,-1)]))):g("",!0)],8,Qe)))),128))])))),128)):g("",!0),4===t.task.status||7===t.task.status?(s(),l("div",st,[r("span",null,I(t.$t("draw.taskFail"))+":",1),r("span",null,I(t.task.failReason),1)])):g("",!0),6===t.task.status?(s(),l("div",{key:2,class:"modal-btn",onClick:a[13]||(a[13]=t=>{9===e.task.action?(z=e.task.customId,Z.value=e.task.id):(ge.value=e.task.id,console.log(ge))})},I(t.$t("draw.promptWords")),1)):g("",!0)]),"task"===t.type?(s(),l("div",lt,[r("span",rt,I(E.value),1),r("span",ot,I(v(G)(t.task.createdAt)),1)])):g("",!0),k(fe,{taskId:Z.value,onClose:xe},null,8,["taskId"]),k(we,{taskId:ce.value,onClose:ue},null,8,["taskId"]),k(he,{"task-id":ge.value,onClose:ye},null,8,["task-id"])],2)}}}),[["__scopeId","data-v-68e0eb49"]]);export{it as M};
