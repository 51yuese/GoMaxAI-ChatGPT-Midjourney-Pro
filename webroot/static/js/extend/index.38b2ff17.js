import{e as a,k as e,a8 as t,r as s,g as n,a6 as l,P as d,p as o,ao as i,v as r,w as c,H as u,A as m,a1 as p,z as v,dy as g}from"../main-da83e417.js";const f={class:"w-full h-full relative"},w={class:"loading"},h=["src"],x=a({__name:"index",setup(a){const x=e(),y=t(),k=s(!1),E=n((()=>y.iframeUrl)),b=l(),L=n((()=>"dark"===b.theme));const I=n((()=>b.theme));function B(a){const{type:e,data:t}=a.data;"theme"===e&&b.setTheme("dark"===t?"dark":"light")}function U(a){document.getElementById("iframe").contentWindow.postMessage(a,"*")}function _(){U({type:"theme",data:I.value});const a=g();a&&U({type:"token",data:a}),k.value=!1}return d(I,(a=>{U({type:"theme",data:a})})),o((()=>{if(!E.value)return x.push("/");k.value=!0,function(){const a=document.getElementById("iframe");(null==a?void 0:a.addEventListener)||null==a||a.attachEvent("onload",_),null==a||a.addEventListener("load",_,!0)}(),window.addEventListener("message",B)})),i((()=>{y.updateIframeUrl("");const a=document.getElementById("iframe");null==a||a.removeEventListener("load",_),window.removeEventListener("message",B)})),(a,e)=>(r(),c("div",f,[k.value?(r(),c("div",{key:0,class:u(["main-container absolute left-0 right-0 bottom-0 top-0 backdrop-blur",[L.value?"dark:bg-black/20":"bg-white/80"]])},[m("div",w,[m("div",{class:u(["loading-text ",L.value?"text-[#fff]":"text-[#000]"]),id:"loading-text"},e[0]||(e[0]=[p('<span class="loading-text-words">内</span><span class="loading-text-words">容</span><span class="loading-text-words">正</span><span class="loading-text-words">在</span><span class="loading-text-words">加</span><span class="loading-text-words">载</span><span class="loading-text-words">中</span>',7)]),2)])],2)):v("",!0),m("iframe",{id:"iframe",src:E.value,style:{width:"100%",height:"100%",border:"none"}},null,8,h)]))}});export{x as default};
