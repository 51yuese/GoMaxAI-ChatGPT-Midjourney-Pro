import{e as a,r as e,k as l,p as t,q as s,w as i,x as c,A as n,B as o,C as u,D as v,I as r,aM as d,bB as f,bC as p,a1 as g,F as m,E as y,y as A,bA as w,ad as h,_ as x}from"../main-23bab8dd.js";import{p as k}from"../item/item.2f8aadd1.js";import{b,c as C,e as _}from"../ppt/ppt.e06b6928.js";import{C as P}from"../creator_catalogs/creator_catalogs.8150ae6d.js";import"../HeartOutline/HeartOutline.fa43a712.js";const U={class:"my"},j={class:"my-quick"},q={class:"my-quick-left"},D={class:"url-box"},z={class:"my-quick-right"},B={class:"text-right"},H={class:"my-title flex",style:{margin:"24px 0",gap:"20px"}},R={class:"bg-white rounded-lg p-4"},T={key:0,class:"flex flex-wrap justify-between"},F={key:1,class:"h-full w-full flex items-center justify-center flex-col absolute"},L={style:{color:"#767676","font-size":"16px","font-weight":"normal"}},G=x(a({__name:"my",setup(a){const x=e("/api/file/upload2Local"),G=l(),I=t(),J=e(),Y=e(),E=e([]),Q=e(1),S=e(""),M=e("my"),N=e(!1),O=e(""),K={showFileList:!1,directoryDnd:!0,accept:".docx",customRequest:a=>{var e;if(N.value)return I.warning("PPT生成中，请稍后"),void(null==(e=J.value)||e.clear());!async function(a){N.value=!0;const e=new FormData;e.append("file",a.file),await h.post(x.value,e,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{O.value=a.data.data,async function(){await _({fileUrl:O.value}).catch((()=>{N.value=!1})),N.value=!1,X()}()})).catch((()=>{N.value=!1,I.error("上传失败")}))}(a.file)}};async function W(){switch(M.value){case"my":await async function(){const{data:a}=await b({page:Q.value,size:30});1===Q.value?E.value=a.rows:E.value=E.value.concat(a.rows)}();break;case"fav":await async function(){const{data:a}=await C({page:Q.value,size:30});1===Q.value?E.value=a.rows:E.value=E.value.concat(a.rows)}()}}async function X(){Q.value=1,await W()}function V(){if(!G.isLogin)return G.setLoginDialog(!0);S.value?Y.value.open(S.value):I.warning("输入您想要的PPT主题，就可以开始智能生成啦~")}function Z({target:a}){const{scrollTop:e,scrollHeight:l,clientHeight:t}=a;e+t>=l&&(Q.value++,W())}function $(a){Q.value=1,M.value=2===a?"fav":"my",W()}return s((()=>{$()})),(a,e)=>(i(),c("div",U,[e[10]||(e[10]=n("div",{class:"my-title active"}," 快速创建 ",-1)),n("div",j,[n("div",q,[e[3]||(e[3]=n("div",{style:{"font-size":"16px","font-weight":"500",color:"#1A1A1A","margin-bottom":"18px"}}," Hi～今天想要生成什么内容呢 ",-1)),n("div",D,[o(v(d),{value:S.value,"onUpdate:value":e[0]||(e[0]=a=>S.value=a),size:"large",placeholder:"输入您想要的PPT主题，就可以开始智能生成啦~",round:""},{suffix:u((()=>[n("div",{class:"upload-btn",onClick:V}," 智能生成 ")])),_:1},8,["value"])])]),o(v(g),{show:N.value},{description:u((()=>e[4]||(e[4]=[n("span",{class:"font-bold"},"生成中...",-1)]))),default:u((()=>[n("div",z,[e[8]||(e[8]=n("img",{src:"/static/png/upload-file-8103aabe.png",style:{width:"120px",height:"120px"}},null,-1)),n("div",B,[e[6]||(e[6]=n("div",{class:"my-quick-right-title"}," 上传文档 ",-1)),e[7]||(e[7]=n("div",{class:"my-quick-right-desc"}," 导入文档，让AI总结生成PPT ",-1)),o(v(f),p(K,{ref_key:"btnUploadRef",ref:J}),{default:u((()=>e[5]||(e[5]=[n("div",{class:"my-quick-right-action"},[n("span",null,"导入"),n("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAVCAYAAAA0GqweAAAAAXNSR0IArs4c6QAAAJBJREFUSA1jYKAzsMl4Xm+T+ew9iKaz1cRZZ535/L5N5vP/YDwYHWmd+awA7kCQQwejIyHRDA3FUUcSl/SwqhoNSazBQobg0A5JULk0WDBK8QPL3RiCsEJ0UNDP3jMMltBDqWFggTOYCvFBnVFGHUdG0QfWMhpywzLkBn170Cbz2Xl45TCYyjlYcoCHIJGOAwDAEesGZiPXCgAAAABJRU5ErkJggg==",style:{width:"19px","margin-left":"5px"}})],-1)]))),_:1},16)])])])),_:1},8,["show"])]),n("div",H,[n("div",{class:r("my"===M.value?"active":""),onClick:e[1]||(e[1]=a=>$(1))}," 我的作品 ",2),n("div",{class:r("fav"===M.value?"active":""),onClick:e[2]||(e[2]=a=>$(2))}," 我的收藏 ",2)]),n("div",R,[o(v(w),{style:{height:"calc(100vh - 330px)"},"on-scroll":Z},{default:u((()=>[E.value.length>0?(i(),c("div",T,[(i(!0),c(m,null,y(E.value,(a=>(i(),c("div",{key:a.id},[o(k,{item:a,"is-my":"my"===M.value,"is-fav":"fav"===M.value,onDeleted:X},null,8,["item","is-my","is-fav"])])))),128)),(i(!0),c(m,null,y(6-E.value.length%6,(a=>(i(),c("div",{key:a,class:"w-[293px]"})))),128))])):(i(),c("div",F,[e[9]||(e[9]=n("div",null,[n("img",{src:"/static/png/empty-1ebd415f.png",alt:"",style:{height:"108px"}})],-1)),n("div",L,A("my"===M.value?"您还没有作品，快去智能生成作品吧~":"您还没有收藏作品，快去广场关注自己喜欢的作品吧~"),1)]))])),_:1})]),o(P,{ref_key:"catalogsRef",ref:Y,onCreated:X},null,512)]))}}),[["__scopeId","data-v-a552780b"]]);export{G as default};
