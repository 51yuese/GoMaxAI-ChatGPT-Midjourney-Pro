import{s as e,p as a,a as l,r as t}from"../ppt/ppt.4ecfe3f1.js";import{e as s,R as i,W as n,r as o,j as u,ae as c,N as r,ag as p,a2 as v,P as d,a1 as m,a5 as f,bd as g,aL as b,a6 as h,$ as x,bc as y,be as k,bf as w,O as _,a3 as P,a4 as C,a0 as T,aq as I,ar as $,ac as j,ad as q,S as D,bb as L,k as U,af as z}from"../main-79c61161.js";import{p as A}from"../item/item.d1f91384.js";import"../HeartOutline/HeartOutline.d223fe12.js";const O={class:"bg-white rounded-[25px] dark:bg-[#15171A]"},R={class:"content-card"},E={key:0,class:"timeline relative"},H={class:"timeline-item"},V={class:"timeline-label"},W={class:"timeline-label-tag"},B={class:"timeline-content"},N={class:"timeline-content secondary"},S={class:"secondClass"},F=q(s({__name:"makeByTheme",setup(t,{expose:s}){const q=i(),D=n(),L=o([]),U=u((()=>L.value.find((e=>"pptOutline"===e.type)))),z=u((()=>L.value.find((e=>"pptCreate"===e.type)))),A=o(!1),F=o(!0),G=o(!0),J=o(),K=o(""),M=c({title:"",subTitle:"",text:"",catalogs:[],contents:[],complex:2,author:"",originTaskId:0}),Q=u((()=>1===q.userInfo.lifetimeVip||q.userInfo.vipExpire&&new Date(q.userInfo.vipExpire)>new Date));async function X(){if(!q.isLogin)return q.setLoginDialog(!0);if(""===K.value)return D.error("请输入PPT主题");F.value=!0,G.value=!1,J.value=new AbortController;const{data:a}=await e({theme:K.value,title:M.value,text:M.value},J.value.signal).catch((e=>{ee(),D.error(e.message||"生成超时")}));ae(),M.catalogs=a.catalogs,M.contents=a.contents,M.title=a.title,F.value=!1,G.value=!0}async function Y(){if(!q.isLogin)return q.setLoginDialog(!0);if(!G.value)return D.error("请先生成大纲");F.value=!0;const e=await a(M).catch((()=>{ee(),D.error(e.message||"生成失败")}));ae(),200===e.code?j.emit("ppt-select-tab","my"):D.error(e.message)}function Z(){ee(),A.value=!1}function ee(){var e;F.value=!1,G.value=!1,null==(e=J.value)||e.abort()}async function ae(){const{data:e}=await l();L.value=e,q.getUserInfo()}return s({open:async function(){await ae(),A.value=!0,ee()}}),(e,a)=>(r(),p(f($),{show:A.value,"onUpdate:show":a[3]||(a[3]=e=>A.value=e),class:"p-[36px] max-w-[1280px] h-[68%] w-[40%]"},{default:v((()=>[d("div",O,[m(f(I),{show:F.value,stroke:"#000"},{description:v((()=>a[4]||(a[4]=[d("span",{style:{color:"#000"}},"正在生成中...",-1)]))),default:v((()=>[a[8]||(a[8]=d("div",{class:"card-title"}," PPT大纲生成 ",-1)),a[9]||(a[9]=d("div",{class:"card-desc"}," 请输入PPT标题及内容，我们会将您的内容生成PPT;内容若留空,AI将使用您的PPT主题进行联想，随机生成内容。 ",-1)),a[10]||(a[10]=d("div",{class:"card-sub-title"}," PPT主题 ",-1)),m(f(g),{value:K.value,"onUpdate:value":a[0]||(a[0]=e=>K.value=e),class:"h-[50px] !rounded-lg mb-[28px] themeInput"},{suffix:v((()=>[m(f(b),{round:"",color:"#333333",class:"!flex !items-center",onClick:X},{default:v((()=>[h(x(G.value?"重新生成":"生成大纲")+" ("+x(U.value.remainCount>0&&Q.value?`免费 ${U.value.remainCount}/${U.value.freeCount}`:`需${U.value.useIntegrate}积分`)+") ",1)])),_:1})])),_:1},8,["value"]),a[11]||(a[11]=d("div",{class:"card-sub-title"}," PPT内容（可选） ",-1)),d("div",R,[m(f(y),{style:{"max-height":"390px"}},{default:v((()=>[m(f(k),{ref:"formRef",model:M,"label-placement":"left","label-width":"54px","require-mark-placement":"right-hanging",size:"small",style:{maxWidth:"640px"}},{default:v((()=>[m(f(w),{label:"主标题"},{default:v((()=>[m(f(g),{value:M.title,"onUpdate:value":a[1]||(a[1]=e=>M.title=e),placeholder:"请输入标题",style:{width:"334px","border-radius":"4px","box-sizing":"border-box"}},null,8,["value"])])),_:1}),m(f(w),{label:"副标题"},{default:v((()=>[m(f(g),{value:M.subTitle,"onUpdate:value":a[2]||(a[2]=e=>M.subTitle=e),placeholder:"请输入标题",style:{width:"334px","border-radius":"4px","box-sizing":"border-box"}},null,8,["value"])])),_:1}),G.value?(r(),_("div",E,[(r(!0),_(P,null,C(M.catalogs,((e,l)=>(r(),_(P,{key:l},[d("div",H,[a[5]||(a[5]=d("div",{class:"timeline-line"},null,-1)),d("div",V,[d("div",W," 章节"+x(l+1),1)]),d("div",B,x(e.catalog),1)]),(r(!0),_(P,null,C(e.sub_catalog,((e,l)=>(r(),_("div",{key:l,class:"timeline-item"},[a[6]||(a[6]=d("div",{class:"timeline-line"},null,-1)),a[7]||(a[7]=d("div",{class:"timeline-label"},null,-1)),d("div",N,[d("div",null,x(e),1)])])))),128))],64)))),128))])):T("",!0)])),_:1},8,["model"])])),_:1})])])),_:1},8,["show"]),d("div",S,[G.value?(r(),_("div",{key:0,class:"secondClassItem",onClick:ee}," 上一步 ")):T("",!0),d("div",{class:"secondClassItem",onClick:Z}," 取消 "),d("div",{class:"secondClassItem selected",onClick:Y}," 生成PPT ("+x(z.value.remainCount>0&&Q.value?`免费 ${z.value.remainCount}/${z.value.freeCount}`:`需${z.value.useIntegrate}积分`)+") ",1)])])])),_:1},8,["show"]))}}),[["__scopeId","data-v-c35ae59a"]]),G={style:{margin:"0 25px"}},J={class:"operate"},K={class:"operate-item"},M={class:"operate-item"},Q={class:"operate-item"},X={class:"flex flex-wrap justify-between"},Y=q(s({__name:"square",setup(e){const a=D(),l=i(),s=L(),n=o(),u=o(1),c=o(30);o("全部");const p=o([]);async function v(){const{data:e}=await t({page:u.value,size:c.value});1===u.value?p.value=e.rows:p.value=p.value.concat(e.rows)}async function g(){l.checkAuth()&&s.updateVipDialog(!0)}return U((()=>{v(),j.on("ppt-scroll-bottom",(e=>{e?u.value=1:u.value++,v()}))})),z((()=>{j.off("ppt-scroll-bottom")})),(e,l)=>(r(),_("div",G,[l[4]||(l[4]=d("div",{class:"section"}," PPT一键生成 ",-1)),d("div",J,[d("div",K,[d("img",{src:"/static/png/make_help-8b1a3cc7.png",alt:"",onClick:l[0]||(l[0]=e=>f(a).push({path:"/ppt/creator",query:{type:1}}))})]),d("div",M,[d("img",{src:"/static/png/make_upload-33e0c926.png",alt:"",onClick:l[1]||(l[1]=e=>f(a).push({path:"/ppt/creator",query:{type:2}}))})]),d("div",Q,[d("img",{src:"/static/png/make_text-293431cc.png",alt:"",onClick:l[2]||(l[2]=e=>f(a).push({path:"/ppt/creator",query:{type:2,mode:2}}))})]),d("div",{class:"operate-item",onClick:g},l[3]||(l[3]=[d("img",{src:"/static/png/make_vip-36cf8907.png",alt:""},null,-1)]))]),l[5]||(l[5]=d("div",{class:"section"}," PPT广场 ",-1)),d("div",X,[(r(!0),_(P,null,C(p.value,((e,a)=>(r(),_("div",{key:a,class:"mb-6"},[m(A,{item:e},null,8,["item"])])))),128)),(r(!0),_(P,null,C(6-p.value.length%6,(e=>(r(),_("div",{key:e,class:"w-[293px]"})))),128))]),m(F,{ref_key:"themeRef",ref:n},null,512)]))}}),[["__scopeId","data-v-89a7a616"]]);export{Y as default};
