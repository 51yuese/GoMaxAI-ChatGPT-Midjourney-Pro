import{e as a,r as e,j as l,o as s,p as t,v as i,w as c,A as n,B as o,C as u,x as v,H as r,b2 as d,br as f,bs as p,$ as g,F as m,D as y,y as A,bq as w,a3 as h,_ as x}from"../main-da83e417.js";import{p as b}from"../item/item.881c32d3.js";import{b as k,c as C,e as _}from"../ppt/ppt.68f8a116.js";import{C as j}from"../creator_catalogs/creator_catalogs.484fd2d9.js";import"../HeartOutline/HeartOutline.60c91342.js";const q={class:"my"},P={class:"my-quick"},U={class:"my-quick-left"},D={class:"url-box"},z={class:"my-quick-right"},H={class:"text-right"},R={class:"my-title flex",style:{margin:"24px 0",gap:"20px"}},B={class:"bg-white rounded-lg p-4"},T={key:0,class:"flex flex-wrap justify-between"},F={key:1,class:"h-full w-full flex items-center justify-center flex-col absolute"},L={style:{color:"#767676","font-size":"16px","font-weight":"normal"}},J=x(a({__name:"my",setup(a){const x=e("/api/file/upload2Local"),J=l(),Y=s(),G=e(),Q=e(),S=e([]),E=e(1),I=e(""),N=e("my"),O=e(!1),K=e(""),M={showFileList:!1,directoryDnd:!0,accept:".docx",customRequest:a=>{var e;if(O.value)return Y.warning("PPT生成中，请稍后"),void(null==(e=G.value)||e.clear());!async function(a){O.value=!0;const e=new FormData;e.append("file",a.file),await h.post(x.value,e,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{K.value=a.data.data,async function(){await _({fileUrl:K.value}).catch((()=>{O.value=!1})),O.value=!1,X()}()})).catch((()=>{O.value=!1,Y.error("上传失败")}))}(a.file)}};async function W(){switch(N.value){case"my":await async function(){const{data:a}=await k({page:E.value,size:30});1===E.value?S.value=a.rows:S.value=S.value.concat(a.rows)}();break;case"fav":await async function(){const{data:a}=await C({page:E.value,size:30});1===E.value?S.value=a.rows:S.value=S.value.concat(a.rows)}()}}async function X(){E.value=1,await W()}function V(){if(!J.isLogin)return J.setLoginDialog(!0);I.value?Q.value.open(I.value):Y.warning("输入您想要的PPT主题，就可以开始智能生成啦~")}function Z({target:a}){const{scrollTop:e,scrollHeight:l,clientHeight:s}=a;e+s>=l&&(E.value++,W())}function $(a){E.value=1,N.value=2===a?"fav":"my",W()}return t((()=>{$()})),(a,e)=>(i(),c("div",q,[e[10]||(e[10]=n("div",{class:"my-title active"}," 快速创建 ",-1)),n("div",P,[n("div",U,[e[3]||(e[3]=n("div",{style:{"font-size":"16px","font-weight":"500",color:"#1A1A1A","margin-bottom":"18px"}}," Hi～今天想要生成什么内容呢 ",-1)),n("div",D,[o(v(d),{value:I.value,"onUpdate:value":e[0]||(e[0]=a=>I.value=a),size:"large",placeholder:"输入您想要的PPT主题，就可以开始智能生成啦~",round:""},{suffix:u((()=>[n("div",{class:"upload-btn",onClick:V}," 智能生成 ")])),_:1},8,["value"])])]),o(v(g),{show:O.value},{description:u((()=>e[4]||(e[4]=[n("span",{class:"font-bold"},"生成中...",-1)]))),default:u((()=>[n("div",z,[e[8]||(e[8]=n("img",{src:"/static/png/upload-file-8103aabe.png",style:{width:"120px",height:"120px"}},null,-1)),n("div",H,[e[6]||(e[6]=n("div",{class:"my-quick-right-title"}," 上传文档 ",-1)),e[7]||(e[7]=n("div",{class:"my-quick-right-desc"}," 导入文档，让AI总结生成PPT ",-1)),o(v(f),p(M,{ref_key:"btnUploadRef",ref:G}),{default:u((()=>e[5]||(e[5]=[n("div",{class:"my-quick-right-action"},[n("span",null,"导入"),n("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAVCAYAAAA0GqweAAAAAXNSR0IArs4c6QAAAJBJREFUSA1jYKAzsMl4Xm+T+ew9iKaz1cRZZ535/L5N5vP/YDwYHWmd+awA7kCQQwejIyHRDA3FUUcSl/SwqhoNSazBQobg0A5JULk0WDBK8QPL3RiCsEJ0UNDP3jMMltBDqWFggTOYCvFBnVFGHUdG0QfWMhpywzLkBn170Cbz2Xl45TCYyjlYcoCHIJGOAwDAEesGZiPXCgAAAABJRU5ErkJggg==",style:{width:"19px","margin-left":"5px"}})],-1)]))),_:1},16)])])])),_:1},8,["show"])]),n("div",R,[n("div",{class:r("my"===N.value?"active":""),onClick:e[1]||(e[1]=a=>$(1))}," 我的作品 ",2),n("div",{class:r("fav"===N.value?"active":""),onClick:e[2]||(e[2]=a=>$(2))}," 我的收藏 ",2)]),n("div",B,[o(v(w),{style:{height:"calc(100vh - 330px)"},"on-scroll":Z},{default:u((()=>[S.value.length>0?(i(),c("div",T,[(i(!0),c(m,null,y(S.value,(a=>(i(),c("div",{key:a.id},[o(b,{item:a,"is-my":"my"===N.value,"is-fav":"fav"===N.value,onDeleted:X},null,8,["item","is-my","is-fav"])])))),128)),(i(!0),c(m,null,y(6-S.value.length%6,(a=>(i(),c("div",{key:a,class:"w-[293px]"})))),128))])):(i(),c("div",F,[e[9]||(e[9]=n("div",null,[n("img",{src:"/static/png/empty-1ebd415f.png",alt:"",style:{height:"108px"}})],-1)),n("div",L,A("my"===N.value?"您还没有作品，快去智能生成作品吧~":"您还没有收藏作品，快去广场关注自己喜欢的作品吧~"),1)]))])),_:1})]),o(j,{ref_key:"catalogsRef",ref:Q,onCreated:X},null,512)]))}}),[["__scopeId","data-v-a552780b"]]);export{J as default};
