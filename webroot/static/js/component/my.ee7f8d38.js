import{e as a,r as e,k as l,p as t,q as s,w as i,x as c,B as n,C as o,D as u,y as v,I as r,aS as d,bi as f,bj as p,a0 as g,F as m,E as y,z as A,bh as w,a4 as h,_ as x}from"../main-be2ae0f3.js";import{p as k}from"../item/item.db99b495.js";import{b,c as C,e as _}from"../ppt/ppt.c87bceee.js";import{C as j}from"../creator_catalogs/creator_catalogs.e49ecf1f.js";import"../HeartOutline/HeartOutline.d9bdfc35.js";const P={class:"my"},U={class:"my-quick"},q={class:"my-quick-left"},z={class:"url-box"},D={class:"my-quick-right"},R={class:"text-right"},B={class:"my-title flex",style:{margin:"24px 0",gap:"20px"}},H={class:"bg-white rounded-lg p-4"},T={key:0,class:"flex flex-wrap justify-between"},F={key:1,class:"h-full w-full flex items-center justify-center flex-col absolute"},L={style:{color:"#767676","font-size":"16px","font-weight":"normal"}},J=x(a({__name:"my",setup(a){const x=e("/api/file/upload2Local"),J=l(),S=t(),Y=e(),E=e(),G=e([]),I=e(1),Q=e(""),N=e("my"),O=e(!1),K=e(""),M={showFileList:!1,directoryDnd:!0,accept:".docx",customRequest:a=>{var e;if(O.value)return S.warning("PPT生成中，请稍后"),void(null==(e=Y.value)||e.clear());!async function(a){O.value=!0;const e=new FormData;e.append("file",a.file),await h.post(x.value,e,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{K.value=a.data.data,async function(){await _({fileUrl:K.value}).catch((()=>{O.value=!1})),O.value=!1,X()}()})).catch((()=>{O.value=!1,S.error("上传失败")}))}(a.file)}};async function W(){switch(N.value){case"my":await async function(){const{data:a}=await b({page:I.value,size:30});1===I.value?G.value=a.rows:G.value=G.value.concat(a.rows)}();break;case"fav":await async function(){const{data:a}=await C({page:I.value,size:30});1===I.value?G.value=a.rows:G.value=G.value.concat(a.rows)}()}}async function X(){I.value=1,await W()}function V(){if(!J.isLogin)return J.setLoginDialog(!0);Q.value?E.value.open(Q.value):S.warning("输入您想要的PPT主题，就可以开始智能生成啦~")}function Z({target:a}){const{scrollTop:e,scrollHeight:l,clientHeight:t}=a;e+t>=l&&(I.value++,W())}function $(a){I.value=1,N.value=2===a?"fav":"my",W()}return s((()=>{$()})),(a,e)=>(i(),c("div",P,[e[10]||(e[10]=n("div",{class:"my-title active"}," 快速创建 ",-1)),n("div",U,[n("div",q,[e[3]||(e[3]=n("div",{style:{"font-size":"16px","font-weight":"500",color:"#1A1A1A","margin-bottom":"18px"}}," Hi～今天想要生成什么内容呢 ",-1)),n("div",z,[o(v(d),{value:Q.value,"onUpdate:value":e[0]||(e[0]=a=>Q.value=a),size:"large",placeholder:"输入您想要的PPT主题，就可以开始智能生成啦~",round:""},{suffix:u((()=>[n("div",{class:"upload-btn",onClick:V}," 智能生成 ")])),_:1},8,["value"])])]),o(v(g),{show:O.value},{description:u((()=>e[4]||(e[4]=[n("span",{class:"font-bold"},"生成中...",-1)]))),default:u((()=>[n("div",D,[e[8]||(e[8]=n("img",{src:"/static/png/upload-file-8103aabe.png",style:{width:"120px",height:"120px"}},null,-1)),n("div",R,[e[6]||(e[6]=n("div",{class:"my-quick-right-title"}," 上传文档 ",-1)),e[7]||(e[7]=n("div",{class:"my-quick-right-desc"}," 导入文档，让AI总结生成PPT ",-1)),o(v(f),p(M,{ref_key:"btnUploadRef",ref:Y}),{default:u((()=>e[5]||(e[5]=[n("div",{class:"my-quick-right-action"},[n("span",null,"导入"),n("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAVCAYAAAA0GqweAAAAAXNSR0IArs4c6QAAAJBJREFUSA1jYKAzsMl4Xm+T+ew9iKaz1cRZZ535/L5N5vP/YDwYHWmd+awA7kCQQwejIyHRDA3FUUcSl/SwqhoNSazBQobg0A5JULk0WDBK8QPL3RiCsEJ0UNDP3jMMltBDqWFggTOYCvFBnVFGHUdG0QfWMhpywzLkBn170Cbz2Xl45TCYyjlYcoCHIJGOAwDAEesGZiPXCgAAAABJRU5ErkJggg==",style:{width:"19px","margin-left":"5px"}})],-1)]))),_:1},16)])])])),_:1},8,["show"])]),n("div",B,[n("div",{class:r("my"===N.value?"active":""),onClick:e[1]||(e[1]=a=>$(1))}," 我的作品 ",2),n("div",{class:r("fav"===N.value?"active":""),onClick:e[2]||(e[2]=a=>$(2))}," 我的收藏 ",2)]),n("div",H,[o(v(w),{style:{height:"calc(100vh - 330px)"},"on-scroll":Z},{default:u((()=>[G.value.length>0?(i(),c("div",T,[(i(!0),c(m,null,y(G.value,(a=>(i(),c("div",{key:a.id},[o(k,{item:a,"is-my":"my"===N.value,"is-fav":"fav"===N.value,onDeleted:X},null,8,["item","is-my","is-fav"])])))),128)),(i(!0),c(m,null,y(6-G.value.length%6,(a=>(i(),c("div",{key:a,class:"w-[293px]"})))),128))])):(i(),c("div",F,[e[9]||(e[9]=n("div",null,[n("img",{src:"/static/png/empty-1ebd415f.png",alt:"",style:{height:"108px"}})],-1)),n("div",L,A("my"===N.value?"您还没有作品，快去智能生成作品吧~":"您还没有收藏作品，快去广场关注自己喜欢的作品吧~"),1)]))])),_:1})]),o(j,{ref_key:"catalogsRef",ref:E,onCreated:X},null,512)]))}}),[["__scopeId","data-v-a552780b"]]);export{J as default};
