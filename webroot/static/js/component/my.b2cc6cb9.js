import{e as a,r as e,R as l,W as s,k as t,O as i,P as c,a1 as n,a2 as o,a5 as u,a8 as v,N as r,bd as d,bg as f,bh as p,aq as g,a3 as m,a4 as y,$ as A,bc as w,as as h,ad as x}from"../main-79c61161.js";import{p as k}from"../item/item.d1f91384.js";import{m as b,c as C,b as P}from"../ppt/ppt.4ecfe3f1.js";import{C as U}from"../creator_catalogs/creator_catalogs.1b9ad788.js";import"../HeartOutline/HeartOutline.d223fe12.js";const _={class:"my"},j={class:"my-quick"},q={class:"my-quick-left"},R={class:"url-box"},z={class:"my-quick-right"},D={class:"text-right"},H={class:"my-title flex",style:{margin:"24px 0",gap:"20px"}},T={class:"bg-white rounded-lg p-4"},B={key:0,class:"flex flex-wrap justify-between"},L={key:1,class:"h-full w-full flex items-center justify-center flex-col absolute"},F={style:{color:"#767676","font-size":"16px","font-weight":"normal"}},J=x(a({__name:"my",setup(a){const x=e("/api/file/upload2Local"),J=l(),Y=s(),G=e(),N=e(),O=e([]),Q=e(1),S=e(""),E=e("my"),I=e(!1),W=e(""),K={showFileList:!1,directoryDnd:!0,accept:".docx",customRequest:a=>{var e;if(I.value)return Y.warning("PPT生成中，请稍后"),void(null==(e=G.value)||e.clear());!async function(a){I.value=!0;const e=new FormData;e.append("file",a.file),await h.post(x.value,e,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{W.value=a.data.data,async function(){await P({fileUrl:W.value}).catch((()=>{I.value=!1})),I.value=!1,X()}()})).catch((()=>{I.value=!1,Y.error("上传失败")}))}(a.file)}};async function M(){switch(E.value){case"my":await async function(){const{data:a}=await b({page:Q.value,size:30});1===Q.value?O.value=a.rows:O.value=O.value.concat(a.rows)}();break;case"fav":await async function(){const{data:a}=await C({page:Q.value,size:30});1===Q.value?O.value=a.rows:O.value=O.value.concat(a.rows)}()}}async function X(){Q.value=1,await M()}function V(){if(!J.isLogin)return J.setLoginDialog(!0);S.value?N.value.open(S.value):Y.warning("输入您想要的PPT主题，就可以开始智能生成啦~")}function Z({target:a}){const{scrollTop:e,scrollHeight:l,clientHeight:s}=a;e+s>=l&&(Q.value++,M())}function $(a){Q.value=1,E.value=2===a?"fav":"my",M()}return t((()=>{$()})),(a,e)=>(r(),i("div",_,[e[10]||(e[10]=c("div",{class:"my-title active"}," 快速创建 ",-1)),c("div",j,[c("div",q,[e[3]||(e[3]=c("div",{style:{"font-size":"16px","font-weight":"500",color:"#1A1A1A","margin-bottom":"18px"}}," Hi～今天想要生成什么内容呢 ",-1)),c("div",R,[n(u(d),{value:S.value,"onUpdate:value":e[0]||(e[0]=a=>S.value=a),size:"large",placeholder:"输入您想要的PPT主题，就可以开始智能生成啦~",round:""},{suffix:o((()=>[c("div",{class:"upload-btn",onClick:V}," 智能生成 ")])),_:1},8,["value"])])]),n(u(g),{show:I.value},{description:o((()=>e[4]||(e[4]=[c("span",{class:"font-bold"},"生成中...",-1)]))),default:o((()=>[c("div",z,[e[8]||(e[8]=c("img",{src:"/static/png/upload-file-8103aabe.png",style:{width:"120px",height:"120px"}},null,-1)),c("div",D,[e[6]||(e[6]=c("div",{class:"my-quick-right-title"}," 上传文档 ",-1)),e[7]||(e[7]=c("div",{class:"my-quick-right-desc"}," 导入文档，让AI总结生成PPT ",-1)),n(u(f),p(K,{ref_key:"btnUploadRef",ref:G}),{default:o((()=>e[5]||(e[5]=[c("div",{class:"my-quick-right-action"},[c("span",null,"导入"),c("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAVCAYAAAA0GqweAAAAAXNSR0IArs4c6QAAAJBJREFUSA1jYKAzsMl4Xm+T+ew9iKaz1cRZZ535/L5N5vP/YDwYHWmd+awA7kCQQwejIyHRDA3FUUcSl/SwqhoNSazBQobg0A5JULk0WDBK8QPL3RiCsEJ0UNDP3jMMltBDqWFggTOYCvFBnVFGHUdG0QfWMhpywzLkBn170Cbz2Xl45TCYyjlYcoCHIJGOAwDAEesGZiPXCgAAAABJRU5ErkJggg==",style:{width:"19px","margin-left":"5px"}})],-1)]))),_:1},16)])])])),_:1},8,["show"])]),c("div",H,[c("div",{class:v("my"===E.value?"active":""),onClick:e[1]||(e[1]=a=>$(1))}," 我的作品 ",2),c("div",{class:v("fav"===E.value?"active":""),onClick:e[2]||(e[2]=a=>$(2))}," 我的收藏 ",2)]),c("div",T,[n(u(w),{style:{height:"calc(100vh - 440px)"},"on-scroll":Z},{default:o((()=>[O.value.length>0?(r(),i("div",B,[(r(!0),i(m,null,y(O.value,(a=>(r(),i("div",{key:a.id},[n(k,{item:a,"is-my":"my"===E.value,"is-fav":"fav"===E.value,onDeleted:X},null,8,["item","is-my","is-fav"])])))),128)),(r(!0),i(m,null,y(6-O.value.length%6,(a=>(r(),i("div",{key:a,class:"w-[293px]"})))),128))])):(r(),i("div",L,[e[9]||(e[9]=c("div",null,[c("img",{src:"/static/png/empty-1ebd415f.png",alt:"",style:{height:"108px"}})],-1)),c("div",F,A("my"===E.value?"您还没有作品，快去智能生成作品吧~":"您还没有收藏作品，快去广场关注自己喜欢的作品吧~"),1)]))])),_:1})]),n(U,{ref_key:"catalogsRef",ref:N,onCreated:X},null,512)]))}}),[["__scopeId","data-v-00b7ff82"]]);export{J as default};
