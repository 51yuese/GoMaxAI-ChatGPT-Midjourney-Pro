import{e as a,r as e,k as t,p as l,g as i,aP as s,q as n,I as o,w as u,x as c,B as p,z as r,C as v,D as d,y as f,aJ as g,bA as m,bB as y,a1 as h,a2 as A,F as w,E as x,bz as k,$ as U,an as b,_ as C}from"../main-a0b53047.js";import{p as T}from"../item/item.3f7135b6.js";import{b as D,c as z,a as _,e as q}from"../ppt/ppt.f32a6456.js";import{C as $}from"../creator_catalogs/creator_catalogs.df0de429.js";import"../HeartOutline/HeartOutline.c4deac56.js";const j={class:"my",style:{height:"100%"}},P={class:"my-title active"},R={class:"my-quick"},B={class:"my-quick-left"},E={style:{"font-size":"16px","font-weight":"500",color:"#1A1A1A","margin-bottom":"18px"}},H={class:"url-box"},L={class:"font-bold"},F={class:"my-quick-right"},G={class:"text-right"},I={class:"my-quick-right-title"},J={class:"my-quick-right-desc"},M={class:"my-quick-right-action"},O={class:"my-title flex",style:{margin:"24px 0",gap:"20px"}},N={class:"bg-white rounded-lg",style:{height:"calc(100% - 310px)"}},Y={key:0,class:"flex flex-wrap justify-between"},Q={key:1,class:"h-full w-full flex items-center justify-center flex-col absolute"},S={style:{color:"#767676","font-size":"16px","font-weight":"normal"}},V=C(a({__name:"my",setup(a){const C=e("/api/file/upload2Local"),V=t(),W=l(),K=e([]);i((()=>K.value.find((a=>"pptOutline"===a.type))));const X=i((()=>K.value.find((a=>"pptCreate"===a.type)))),Z=i((()=>V.userInfo.vipLeavelId));let aa=e([]);s().then((a=>{aa.value=a.data}));const ea=e(),ta=e(),la=e([]),ia=e(1),sa=e(""),na=e("my"),oa=e(!1),ua=e(""),ca={showFileList:!1,directoryDnd:!0,accept:".docx",customRequest:a=>{var e;if(oa.value)return W.warning(U("ppt.PPTgening")),void(null==(e=ea.value)||e.clear());!async function(a){if(X.value&&X.value.isVipUsed&&-1===X.value.userType.indexOf(Z.value)){let a=X.value.userType.split(","),e="";return a.forEach(((t,l)=>{e+=aa.value.filter((a=>a.id==t))[0].dictName,l<a.length-1&&(e+=",")})),void W.error(U("digitalMan.vipUse1")+e+U("digitalMan.vipUse2"))}oa.value=!0;const e=new FormData;e.append("file",a.file),await b.post(C.value,e,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{ua.value=a.data.data,async function(){await q({fileUrl:ua.value}).catch((()=>{oa.value=!1})),oa.value=!1,ra()}()})).catch((()=>{oa.value=!1,W.error(U("ppt.uploadErro"))}))}(a.file)}};async function pa(){switch(na.value){case"my":await async function(){const{data:a}=await D({page:ia.value,size:30});1===ia.value?la.value=a.rows:la.value=la.value.concat(a.rows)}();break;case"fav":await async function(){const{data:a}=await z({page:ia.value,size:30});1===ia.value?la.value=a.rows:la.value=la.value.concat(a.rows)}()}}async function ra(){ia.value=1,await pa()}function va(){if(!V.isLogin)return V.setLoginDialog(!0);if(X.value&&X.value.isVipUsed&&-1===X.value.userType.indexOf(Z.value)){let a=X.value.userType.split(","),e="";return a.forEach(((t,l)=>{e+=aa.value.filter((a=>a.id==t))[0].dictName,l<a.length-1&&(e+=",")})),void W.error(U("digitalMan.vipUse1")+e+U("digitalMan.vipUse2"))}sa.value?ta.value.open(sa.value):W.warning(U("ppt.inputPPTtheme"))}function da({target:a}){const{scrollTop:e,scrollHeight:t,clientHeight:l}=a;e+l>=t&&(ia.value++,pa())}function fa(a=1){ia.value=1,na.value=2===a?"fav":"my",pa()}return n((()=>{fa(),async function(){const{data:a}=await _();K.value=a,V.getUserInfo()}(),o.on("ppt-scroll-bottom",(a=>{a?ia.value=1:ia.value++,pa()}))})),(a,e)=>(u(),c("div",j,[p("div",P,r(a.$t("ppt.quickCreat")),1),p("div",R,[p("div",B,[p("div",E," Hi～"+r(a.$t("ppt.dazhaohu")),1),p("div",H,[v(f(g),{value:sa.value,"onUpdate:value":e[0]||(e[0]=a=>sa.value=a),size:"large",placeholder:"输入您想要的PPT主题，就可以开始智能生成啦~",round:""},{suffix:d((()=>[p("div",{class:"upload-btn",onClick:va},r(a.$t("ppt.intellGen")),1)])),_:1},8,["value"])])]),v(f(h),{show:oa.value},{description:d((()=>[p("span",L,r(a.$t("ppt.Generating"))+"...",1)])),default:d((()=>[p("div",F,[e[4]||(e[4]=p("img",{src:"/static/png/upload-file-8103aabe.png",style:{width:"120px",height:"120px"}},null,-1)),p("div",G,[p("div",I,r(a.$t("ppt.documenUpload")),1),p("div",J,r(a.$t("ppt.importDocum")),1),v(f(m),y(ca,{ref_key:"btnUploadRef",ref:ea}),{default:d((()=>[p("div",M,[p("span",null,r(a.$t("ppt.importRu")),1),e[3]||(e[3]=p("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAVCAYAAAA0GqweAAAAAXNSR0IArs4c6QAAAJBJREFUSA1jYKAzsMl4Xm+T+ew9iKaz1cRZZ535/L5N5vP/YDwYHWmd+awA7kCQQwejIyHRDA3FUUcSl/SwqhoNSazBQobg0A5JULk0WDBK8QPL3RiCsEJ0UNDP3jMMltBDqWFggTOYCvFBnVFGHUdG0QfWMhpywzLkBn170Cbz2Xl45TCYyjlYcoCHIJGOAwDAEesGZiPXCgAAAABJRU5ErkJggg==",style:{width:"19px","margin-left":"5px"}},null,-1))])])),_:1},16)])])])),_:1},8,["show"])]),p("div",O,[p("div",{class:A("my"===na.value?"active":""),onClick:e[1]||(e[1]=a=>fa(1))},r(a.$t("ppt.myWork")),3),p("div",{class:A("fav"===na.value?"active":""),onClick:e[2]||(e[2]=a=>fa(2))},r(a.$t("common.myCollection")),3)]),p("div",N,[v(f(k),{style:{height:"calc(100%)"},"on-scroll":da},{default:d((()=>[la.value.length>0?(u(),c("div",Y,[(u(!0),c(w,null,x(la.value,(a=>(u(),c("div",{key:a.id},[v(T,{item:a,"is-my":"my"===na.value,"is-fav":"fav"===na.value,onDeleted:ra},null,8,["item","is-my","is-fav"])])))),128)),(u(!0),c(w,null,x(6-la.value.length%6,(a=>(u(),c("div",{key:a,class:"w-[293px]"})))),128))])):(u(),c("div",Q,[e[5]||(e[5]=p("div",null,[p("img",{src:"/static/png/empty-1ebd415f.png",alt:"",style:{height:"108px"}})],-1)),p("div",S,r("my"===na.value?a.$t("ppt.noDataText1"):a.$t("ppt.noDataText2")),1)]))])),_:1})]),v($,{ref_key:"catalogsRef",ref:ta,onCreated:ra},null,512)]))}}),[["__scopeId","data-v-53e24e35"]]);export{V as default};
