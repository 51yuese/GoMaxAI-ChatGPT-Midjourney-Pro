import{e as a,r as e,k as t,p as l,g as i,aP as s,q as n,w as u,x as o,B as c,z as p,C as r,D as v,y as d,aJ as f,bJ as g,bK as m,a1 as y,a2 as h,F as A,E as w,bI as x,$ as k,an as U,_ as b}from"../main-4156cf5e.js";import{p as C}from"../item/item.a6dd66ef.js";import{a as D,b as T,e as _,c as q}from"../ppt/ppt.22762407.js";import{C as z}from"../creator_catalogs/creator_catalogs.f7053f63.js";import"../HeartOutline/HeartOutline.79c6c696.js";const R={class:"my",style:{height:"100%"}},$={class:"my-title active"},j={class:"my-quick"},P={class:"my-quick-left"},B={style:{"font-size":"16px","font-weight":"500",color:"#1A1A1A","margin-bottom":"18px"}},E={class:"url-box"},H={class:"font-bold"},J={class:"my-quick-right"},L={class:"text-right"},F={class:"my-quick-right-title"},G={class:"my-quick-right-desc"},I={class:"my-quick-right-action"},M={class:"my-title flex",style:{margin:"24px 0",gap:"20px"}},O={class:"bg-white rounded-lg",style:{height:"calc(100% - 310px)"}},N={key:0,class:"flex flex-wrap justify-between"},Q={key:1,class:"h-full w-full flex items-center justify-center flex-col absolute"},S={style:{color:"#767676","font-size":"16px","font-weight":"normal"}},Y=b(a({__name:"my",setup(a){const b=e("/api/file/upload2Local"),Y=t(),K=l(),V=e([]);i((()=>V.value.find((a=>"pptOutline"===a.type))));const W=i((()=>V.value.find((a=>"pptCreate"===a.type)))),X=i((()=>Y.userInfo.vipLeavelId));let Z=e([]);s().then((a=>{Z.value=a.data}));const aa=e(),ea=e(),ta=e([]),la=e(1),ia=e(""),sa=e("my"),na=e(!1),ua=e(""),oa={showFileList:!1,directoryDnd:!0,accept:".docx",customRequest:a=>{var e;if(na.value)return K.warning(k("ppt.PPTgening")),void(null==(e=aa.value)||e.clear());!async function(a){if(W.value&&W.value.isVipUsed&&-1===W.value.userType.indexOf(X.value)){let a=W.value.userType.split(","),e="";return a.forEach(((t,l)=>{e+=Z.value.filter((a=>a.id==t))[0].dictName,l<a.length-1&&(e+=",")})),void K.error(k("digitalMan.vipUse1")+e+k("digitalMan.vipUse2"))}na.value=!0;const e=new FormData;e.append("file",a.file),await U.post(b.value,e,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{ua.value=a.data.data,async function(){await T({fileUrl:ua.value}).catch((()=>{na.value=!1})),na.value=!1,pa()}()})).catch((()=>{na.value=!1,K.error(k("ppt.uploadErro"))}))}(a.file)}};async function ca(){switch(sa.value){case"my":await async function(){const{data:a}=await _({page:la.value,size:30});1===la.value?ta.value=a.rows:ta.value=ta.value.concat(a.rows)}();break;case"fav":await async function(){const{data:a}=await q({page:la.value,size:30});1===la.value?ta.value=a.rows:ta.value=ta.value.concat(a.rows)}()}}async function pa(){la.value=1,await ca()}function ra(){if(!Y.isLogin)return Y.setLoginDialog(!0);if(W.value&&W.value.isVipUsed&&-1===W.value.userType.indexOf(X.value)){let a=W.value.userType.split(","),e="";return a.forEach(((t,l)=>{e+=Z.value.filter((a=>a.id==t))[0].dictName,l<a.length-1&&(e+=",")})),void K.error(k("digitalMan.vipUse1")+e+k("digitalMan.vipUse2"))}ia.value?ea.value.open(ia.value):K.warning(k("ppt.inputPPTtheme"))}function va({target:a}){const{scrollTop:e,scrollHeight:t,clientHeight:l}=a;e+l>=t&&(la.value++,ca())}function da(a=1){la.value=1,sa.value=2===a?"fav":"my",ca()}return n((()=>{da(),async function(){const{data:a}=await D();V.value=a,Y.getUserInfo()}()})),(a,e)=>(u(),o("div",R,[c("div",$,p(a.$t("ppt.quickCreat")),1),c("div",j,[c("div",P,[c("div",B," Hi～"+p(a.$t("ppt.dazhaohu")),1),c("div",E,[r(d(f),{value:ia.value,"onUpdate:value":e[0]||(e[0]=a=>ia.value=a),size:"large",placeholder:"输入您想要的PPT主题，就可以开始智能生成啦~",round:""},{suffix:v((()=>[c("div",{class:"upload-btn",onClick:ra},p(a.$t("ppt.intellGen")),1)])),_:1},8,["value"])])]),r(d(y),{show:na.value},{description:v((()=>[c("span",H,p(a.$t("ppt.Generating"))+"...",1)])),default:v((()=>[c("div",J,[e[4]||(e[4]=c("img",{src:"/static/png/upload-file-8103aabe.png",style:{width:"120px",height:"120px"}},null,-1)),c("div",L,[c("div",F,p(a.$t("ppt.documenUpload")),1),c("div",G,p(a.$t("ppt.importDocum")),1),r(d(g),m(oa,{ref_key:"btnUploadRef",ref:aa}),{default:v((()=>[c("div",I,[c("span",null,p(a.$t("ppt.importRu")),1),e[3]||(e[3]=c("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAVCAYAAAA0GqweAAAAAXNSR0IArs4c6QAAAJBJREFUSA1jYKAzsMl4Xm+T+ew9iKaz1cRZZ535/L5N5vP/YDwYHWmd+awA7kCQQwejIyHRDA3FUUcSl/SwqhoNSazBQobg0A5JULk0WDBK8QPL3RiCsEJ0UNDP3jMMltBDqWFggTOYCvFBnVFGHUdG0QfWMhpywzLkBn170Cbz2Xl45TCYyjlYcoCHIJGOAwDAEesGZiPXCgAAAABJRU5ErkJggg==",style:{width:"19px","margin-left":"5px"}},null,-1))])])),_:1},16)])])])),_:1},8,["show"])]),c("div",M,[c("div",{class:h("my"===sa.value?"active":""),onClick:e[1]||(e[1]=a=>da(1))},p(a.$t("ppt.myWork")),3),c("div",{class:h("fav"===sa.value?"active":""),onClick:e[2]||(e[2]=a=>da(2))},p(a.$t("common.myCollection")),3)]),c("div",O,[r(d(x),{style:{height:"calc(100%)"},"on-scroll":va},{default:v((()=>[ta.value.length>0?(u(),o("div",N,[(u(!0),o(A,null,w(ta.value,(a=>(u(),o("div",{key:a.id},[r(C,{item:a,"is-my":"my"===sa.value,"is-fav":"fav"===sa.value,onDeleted:pa},null,8,["item","is-my","is-fav"])])))),128)),(u(!0),o(A,null,w(6-ta.value.length%6,(a=>(u(),o("div",{key:a,class:"w-[293px]"})))),128))])):(u(),o("div",Q,[e[5]||(e[5]=c("div",null,[c("img",{src:"/static/png/empty-1ebd415f.png",alt:"",style:{height:"108px"}})],-1)),c("div",S,p("my"===sa.value?a.$t("ppt.noDataText1"):a.$t("ppt.noDataText2")),1)]))])),_:1})]),r(z,{ref_key:"catalogsRef",ref:ea,onCreated:pa},null,512)]))}}),[["__scopeId","data-v-90b3919e"]]);export{Y as default};
