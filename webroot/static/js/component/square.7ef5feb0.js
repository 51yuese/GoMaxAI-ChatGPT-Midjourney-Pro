import{s as e,p as t,a,r as l}from"../ppt/ppt.f32a6456.js";import{e as s,k as n,p as i,r as u,g as o,K as p,w as r,O as c,D as d,B as v,C as m,z as f,y as b,aJ as g,aD as x,a4 as h,bz as $,by as w,bx as y,x as _,F as k,E as T,A as C,a1 as I,ak as P,$ as z,I as D,_ as U,l as j,bd as G,q as O,M as q}from"../main-a0b53047.js";import{p as E}from"../item/item.3f7135b6.js";import"../HeartOutline/HeartOutline.c4deac56.js";const L={class:"bg-white rounded-[25px] dark:bg-[#15171A]"},A={style:{color:"#000"}},B={class:"card-title"},H={class:"card-desc"},R={class:"card-sub-title"},F={class:"card-sub-title"},J={class:"content-card"},K={key:0,class:"timeline relative"},M={class:"timeline-item"},S={class:"timeline-label"},V={class:"timeline-label-tag"},W={class:"timeline-content"},N={class:"timeline-content secondary"},Q={class:"secondClass"},X=U(s({__name:"makeByTheme",setup(l,{expose:s}){const U=n(),j=i(),G=u([]),O=o((()=>G.value.find((e=>"pptOutline"===e.type)))),q=o((()=>G.value.find((e=>"pptCreate"===e.type)))),E=u(!1),X=u(!0),Y=u(!0),Z=u(),ee=u(""),te=p({title:"",subTitle:"",text:"",catalogs:[],contents:[],complex:2,author:"",originTaskId:0}),ae=o((()=>1===U.userInfo.lifetimeVip||U.userInfo.vipExpire&&new Date(U.userInfo.vipExpire)>new Date));async function le(){if(!U.isLogin)return U.setLoginDialog(!0);if(""===ee.value)return j.error(z("ppt.PenterPPTtheme"));X.value=!0,Y.value=!1,Z.value=new AbortController;const{data:t}=await e({theme:ee.value,title:te.value,text:te.value},Z.value.signal).catch((e=>{ie(),j.error(e.message||z("ppt.genTimeOut"))}));ue(),te.catalogs=t.catalogs,te.contents=t.contents,te.title=t.title,X.value=!1,Y.value=!0}async function se(){if(!U.isLogin)return U.setLoginDialog(!0);if(!Y.value)return j.error(z("ppt.pGenPrecis"));X.value=!0;const e=await t(te).catch((()=>{ie(),j.error(e.message||z("ppt.genErro"))}));ue(),200===e.code?D.emit("ppt-select-tab","my"):j.error(e.message)}function ne(){ie(),E.value=!1}function ie(){var e;X.value=!1,Y.value=!1,null==(e=Z.value)||e.abort()}async function ue(){const{data:e}=await a();G.value=e,U.getUserInfo()}return s({open:async function(){await ue(),E.value=!0,ie()}}),(e,t)=>(r(),c(b(P),{show:E.value,"onUpdate:show":t[3]||(t[3]=e=>E.value=e),class:"p-[36px] max-w-[1280px] h-[68%] w-[40%]"},{default:d((()=>[v("div",L,[m(b(I),{show:X.value,stroke:"#000"},{description:d((()=>[v("span",A,f(e.$t("ppt.Generating"))+"...",1)])),default:d((()=>[v("div",B,f(e.$t("ppt.ToutlineGen")),1),v("div",H,f(e.$t("ppt.ToutlineGenText")),1),v("div",R," PPT"+f(e.$t("ppt.theme")),1),m(b(g),{value:ee.value,"onUpdate:value":t[0]||(t[0]=e=>ee.value=e),class:"h-[50px] !rounded-lg mb-[28px] themeInput"},{suffix:d((()=>[m(b(x),{round:"",color:"#333333",class:"!flex !items-center",onClick:le},{default:d((()=>[h(f(Y.value?e.$t("ppt.regenerate"):e.$t("ppt.GenPrecis"))+" ("+f(O.value.remainCount>0&&ae.value?e.$t("ppt.free")+` ${O.value.remainCount}/${O.value.freeCount}`:e.$t("ppt.need")+`${O.value.useIntegrate}`+e.$t("ppt.points"))+") ",1)])),_:1})])),_:1},8,["value"]),v("div",F," PPT"+f(e.$t("ppt.content")),1),v("div",J,[m(b($),{style:{"max-height":"390px"}},{default:d((()=>[m(b(w),{ref:"formRef",model:te,"label-placement":"left","label-width":"54px","require-mark-placement":"right-hanging",size:"small",style:{maxWidth:"640px"}},{default:d((()=>[m(b(y),{label:e.$t("ppt.mainTitle")},{default:d((()=>[m(b(g),{value:te.title,"onUpdate:value":t[1]||(t[1]=e=>te.title=e),placeholder:e.$t("ppt.pInputTitle"),style:{width:"334px","border-radius":"4px","box-sizing":"border-box"}},null,8,["value","placeholder"])])),_:1},8,["label"]),m(b(y),{label:e.$t("ppt.Subtitle")},{default:d((()=>[m(b(g),{value:te.subTitle,"onUpdate:value":t[2]||(t[2]=e=>te.subTitle=e),placeholder:e.$t("ppt.pInputTitle"),style:{width:"334px","border-radius":"4px","box-sizing":"border-box"}},null,8,["value","placeholder"])])),_:1},8,["label"]),Y.value?(r(),_("div",K,[(r(!0),_(k,null,T(te.catalogs,((a,l)=>(r(),_(k,{key:l},[v("div",M,[t[4]||(t[4]=v("div",{class:"timeline-line"},null,-1)),v("div",S,[v("div",V,f(e.$t("ppt.chapter"))+f(l+1),1)]),v("div",W,f(a.catalog),1)]),(r(!0),_(k,null,T(a.sub_catalog,((e,a)=>(r(),_("div",{key:a,class:"timeline-item"},[t[5]||(t[5]=v("div",{class:"timeline-line"},null,-1)),t[6]||(t[6]=v("div",{class:"timeline-label"},null,-1)),v("div",N,[v("div",null,f(e),1)])])))),128))],64)))),128))])):C("",!0)])),_:1},8,["model"])])),_:1})])])),_:1},8,["show"]),v("div",Q,[Y.value?(r(),_("div",{key:0,class:"secondClassItem",onClick:ie},f(e.$t("ppt.Pstep")),1)):C("",!0),v("div",{class:"secondClassItem",onClick:ne},f(e.$t("common.cancel")),1),v("div",{class:"secondClassItem selected",onClick:se},f(e.$t("draw.gen"))+"PPT ("+f(q.value.remainCount>0&&ae.value?e.$t("ppt.free")+` ${q.value.remainCount}/${q.value.freeCount}`:e.$t("ppt.need")+`${q.value.useIntegrate}`+e.$t("ppt.points"))+") ",1)])])])),_:1},8,["show"]))}}),[["__scopeId","data-v-2bb1d744"]]),Y={style:{margin:"0 25px"}},Z={class:"section"},ee={class:"flex flex-wrap justify-between"},te=U(s({__name:"square",setup(e){j(),n(),G();const t=u(),a=u(1),s=u(30);u("全部");const i=u([]);async function o(){const{data:e}=await l({page:a.value,size:s.value});1===a.value?i.value=e.rows:i.value=i.value.concat(e.rows)}return O((()=>{o(),D.on("ppt-scroll-bottom",(e=>{e?a.value=1:a.value++,o()}))})),q((()=>{D.off("ppt-scroll-bottom")})),(e,a)=>(r(),_("div",Y,[v("div",Z," PPT"+f(e.$t("ppt.square")),1),v("div",ee,[(r(!0),_(k,null,T(i.value,((e,t)=>(r(),_("div",{key:t,class:"mb-6"},[m(E,{item:e},null,8,["item"])])))),128)),(r(!0),_(k,null,T(6-i.value.length%6,(e=>(r(),_("div",{key:e,class:"w-[293px]"})))),128))]),m(X,{ref_key:"themeRef",ref:t},null,512)]))}}),[["__scopeId","data-v-615230ce"]]);export{te as default};
