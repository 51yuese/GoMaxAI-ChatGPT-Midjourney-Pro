import{e as a,p as e,bR as s,k as l,ba as o,Z as i,g as t,L as A,r as n,q as r,I as d,ag as c,w as u,x as v,B as g,F as m,E as p,aG as f,G as h,C as w,D as C,y as k,z as I,A as x,O as S,al as b,ai as B,a0 as y,N as z,aj as N,a3 as D,bE as E,bD as R,aI as T,bm as U,aC as j,_ as Q}from"../main-bf8e7d49.js";import{w as M,q as G,C as J,c as _,e as F,f as Z}from"../writeWork/writeWork.980b91e6.js";import{N as q,a as P}from"../Col/Col.d7596a37.js";import"../knowledge/knowledge.4f347d65.js";import"../text/text.a53de645.js";import"../p/p.0300e5ff.js";const H={class:"bg-[#fff] dark:bg-[#222325]",style:{"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column",overflow:"hidden"}},V={class:"mainBox"},X={class:"listBox"},K=["onClick"],W={class:"settingBox"},O=["onClick"],Y={class:"y-pop"},L=["onClick"],$=["onClick"],aa={key:1,class:"mainImg load"},ea={class:"infoBox"},sa={class:"span ellipsi"},la={class:"time"},oa={class:"cardItem zero"},ia={key:0,class:"noDataBox"},ta={class:"modalMain"},Aa={class:"modalTitle"},na={class:"modalVideoBox"},ra={class:"modalMain modalMain2"},da={style:{display:"flex","justify-content":"flex-end"}},ca=["href","download"],ua=Q(a({__name:"worksManage",setup(a){e();const Q=e(),ua=s(),va=l();o(),i(),t((()=>va.userInfo.avatar)),t((()=>1===va.userInfo.lifetimeVip||va.userInfo.vipExpire&&new Date(va.userInfo.vipExpire)>new Date));const ga=t((()=>va.isLogin));A(ga,(a=>{}));let ma=n(!1),pa=n([]),fa=n(null),ha=()=>{G({page:1,size:999}).then((a=>{pa.value=a.data.rows;let e=!1;a.data.rows.forEach((a=>{0===a.status&&(e=!0)})),e&&setTimeout((()=>{ha()}),3e3)}))};r((()=>{ha()})),n(!1),n({name:"",introduce:""}),n({name:[{required:!0,message:"请输入姓名"}]}),n(!1),n(!1),n(!1);let wa=n(!1),Ca=n(!1),ka=n(!1),Ia=n(""),xa=()=>{Ia.value?F({id:fa.value.id,name:Ia.value}).then((a=>{Q.success("改名成功"),ka.value=!1,ha()})):Q.error("请输入名称")};let Sa=n(),ba=n("");return d.on("updateWriteShow",(a=>{ma.value=a})),(a,e)=>{const s=c("vue3-video-player"),l=c("n-h3");return u(),v(m,null,[g("div",H,[e[16]||(e[16]=g("div",{style:{width:"100%",height:"84px","box-sizing":"border-box","padding-left":"34px","line-height":"84px","border-bottom":"1px solid #E0E2E9"}},[g("span",{style:{"font-size":"18px","font-weight":"500",color:"#000"}},"我的作品")],-1)),g("div",V,[g("div",X,[(u(!0),v(m,null,p(k(pa),(a=>(u(),v("div",{class:"cardItem",onClick:e=>{f(fa)?fa.value=a:fa=a,f(wa)?wa.value=!0:wa=!0}},[1===a.status?(u(),v("div",{key:0,class:"mainImg",style:h("background: url("+a.cover+") no-repeat center center;background-size: 100% 100%;")},[e[13]||(e[13]=g("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAKDSURBVFiFxZe/a1NRFMc/95EhQ8YODh0CPmjGgA4ZhFbopoNDxfwPDdhB0E0hWUR3hbgKDroprko6BBp4XUsrFBTSodAhhQYifB3eiX1Jk7z7wqseeMu955zv99573vnh8BRJJeAesAHcBlaBG7Z9AvwCesA34Itz7tzHr/MADoGnQB0oGkgXOACGplYE1oCakRsCH4CXzrkjHyKzgIuSmpJGkg4lNSSteNitmO6h2TYlFbOCh5IiSWfmrLDEAQqSdiQNzFfZ17AiqS9pz9tosb/xYfqSKj7KfUm7FnS5iKSS+ezPPZS9eWQnzw18ikRk39WYsGA5y+PaF5AILSaaszZGkhrXBZ7A2jGsMLnYtt/GK9qN8K0lCRQMqz1eKNm1eJ1e0h07gSxeqkuQaBhmCUl1c5iaZMz4jSZlJOlFlmRjyWokqR4A60DPOXfqaT8NVACeA5Gkmo8Dw+oB6wFx7u56gi+SCtCR9MozlrpANSCuagc5EID4Np4AXz10fwCrAXFJHaYoZ5VNSRspOudjAv9VAuJmIlu5TJcesJuiUwJOAuJOZi1H8E/AXefc7xS9m8BxQMzW6/dJkVPgoXNuy7MdqwH7yySitq7KR1978/E3ES2TircSwD8lPfAFTvi4TMW28C5jMdo0IpmDN1GM3iYX/3U5vpgox7bRsmsJ59jmAT5uSFqzNsctWaTrbcn25j61pLLixrGTJwkD72hRU5pQHrflUR7PoSxt+QyjgaTHvn/HlI+C2Q60zIxhMdHS5Wi27ZNsLMlsm82F+Zh7AN/h9BnwiMnh9Ii4pEJcWEImh9P3wOu04TSVQIJICbhP3MJVgTKT4/kxsA98Bz77jud/AJ+hxormfnHwAAAAAElFTkSuQmCC",class:"videoPlay2",alt:""},null,-1)),g("div",W,[w(k(B),{trigger:"hover",placement:"bottom"},{trigger:C((()=>[g("div",{class:"setItem",onClick:b((e=>{return s=a.fileUrl,ba.value=s,console.log(Sa.value),Q.success("正在下载"),void setTimeout((()=>{Sa.value.click()}),1e3);var s}),["stop"])},e[8]||(e[8]=[g("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEqSURBVDiNxZChTgNBEIa/4a6uogJRUYHsAyC3zYiSIHBgESgEqoKAKxISRB8AgSTBkiC5ZLeuD8AD1OAQyJ07TK8pNNs2QfC73Zn5/pkf/qhsXVFV99rtdms2m32mevJ1ADMbNRoNgLNUz86mFTfp/wErGTjnboDjPM8PzAwAVW2a2XNVVUUI4W5lA1XtzAcBpiLSjTG+AbtAM8b4ChyKyEdtoqqdBcDMBiIyAgghvACnItIFjoATEXHA0Hv/CCAiIzMbJDPw3j8Bw/otIpfe+/FWGSxBxr1e76ssy9ZkMrlP9dWAmIA8/P5T1XweblyckGXZFKDf71+oanIrVc3LsjxfnpG66Jy7FZGr1PCyqqq6CyFc/wDMHbpmtk86m5hl2bQoivdtjLbSN5ZbaB1WlPIPAAAAAElFTkSuQmCC",alt:""},null,-1)]),8,O)])),default:C((()=>[e[9]||(e[9]=g("span",null,"下载视频",-1))])),_:2,__:[9]},1024),w(k(B),{style:{"border-radius":"8px",width:"126px"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:C((()=>e[10]||(e[10]=[g("div",{class:"setItem"},[g("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAADCAYAAABI4YUMAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAABhSURBVAiZXcmxDYAgFIThQyo7J+BY5DETjbG30ljIOCYanQUWwUJMCNd8ufxaRHaSB0mdUnoAwDm3GGNOa20fY7wAQERmkjfJoQPg8W0sIuc81TbddwBCOdtflVJrbdPDC+DgGwjkaSS0AAAAAElFTkSuQmCC",alt:""})],-1)]))),default:C((()=>[g("div",Y,[g("div",{class:"blo",onClick:b((e=>{f(fa)?fa.value=a:fa=a,f(Ia)?Ia.value=a.name:Ia=a.name,f(ka)?ka.value=!0:ka=!0}),["stop"])},e[11]||(e[11]=[g("div",{class:"edit"},null,-1),g("div",{class:"t t1"},"重命名",-1)]),8,L),g("div",{class:"blo",onClick:b((e=>{return s=a,void ua.warning({title:"警告",content:"删除后无法恢复，确认删除吗？",positiveText:"确定",negativeText:"取消",draggable:!0,onPositiveClick:()=>{Z({id:s.id}).then((a=>{200===a.code&&(Q.success("删除成功"),ha())}))},onNegativeClick:()=>{Q.error("取消")}});var s}),["stop"])},e[12]||(e[12]=[g("div",{class:"dele"},null,-1),g("div",{class:"t t2"},"删除",-1)]),8,$)])])),_:2},1024)])],4)):(u(),v("div",aa,[e[14]||(e[14]=g("span",null,"作品生成中...",-1)),w(k(y),{size:20,show:!0})])),g("div",ea,[g("div",sa,I(a.name||"作品"+a.id),1),g("div",la,I(a.createdAt),1)])],8,K)))),256)),(u(),v(m,null,p(4,(a=>g("div",oa))),64))]),k(pa)&&0==k(pa).length?(u(),v("div",ia,[e[15]||(e[15]=g("div",null,"你没有任何作品哦",-1)),g("div",{class:"btnBox",onClick:e[0]||(e[0]=a=>{f(ma)?ma.value=!0:ma=!0})},"去创作")])):x("",!0)])]),w(k(N),{show:k(wa),"onUpdate:show":e[3]||(e[3]=a=>f(wa)?wa.value=a:wa=a)},{default:C((()=>[w(k(y),{show:k(Ca)},{default:C((()=>[g("div",ta,[g("div",{class:"closeIcon",onClick:e[1]||(e[1]=a=>{f(wa)?wa.value=!1:wa=!1})},[w(k(z),{size:"40",color:"#333"},{default:C((()=>[w(k(J))])),_:1})]),g("div",Aa,I(k(fa).name),1),g("div",na,[w(s,{src:k(fa).fileUrl},null,8,["src"])]),g("div",{class:"moadlBtn",onClick:e[2]||(e[2]=b((a=>{f(wa)?wa.value=!1:wa=!1,f(ma)?ma.value=!0:ma=!0}),["stop"]))},e[17]||(e[17]=[g("img",{src:_,alt:""},null,-1),g("span",null,"去创建作品",-1)]))])])),_:1},8,["show"])])),_:1},8,["show"]),w(k(N),{show:k(ka),"onUpdate:show":e[7]||(e[7]=a=>f(ka)?ka.value=a:ka=a)},{default:C((()=>[w(k(y),{show:k(Ca)},{default:C((()=>[g("div",ra,[w(l,null,{default:C((()=>e[18]||(e[18]=[D(" 重命名 ")]))),_:1,__:[18]}),w(k(E),{ref:"formRef"},{default:C((()=>[w(k(R),{path:"name",label:""},{default:C((()=>[w(k(T),{value:k(Ia),"onUpdate:value":e[4]||(e[4]=a=>f(Ia)?Ia.value=a:Ia=a),onKeydown:e[5]||(e[5]=U(b((()=>{}),["prevent"]),["enter"])),placeholder:"取一个独一无二的名字"},null,8,["value"])])),_:1}),w(k(q),{gutter:[0,24]},{default:C((()=>[w(k(P),{span:24},{default:C((()=>[g("div",da,[w(k(j),{strong:"",secondary:"",onClick:e[6]||(e[6]=a=>f(ka)?ka.value=!1:ka=!1),style:{"margin-right":"10px"}},{default:C((()=>e[19]||(e[19]=[D(" 取消 ")]))),_:1,__:[19]}),w(k(j),{type:"primary",onClick:k(xa)},{default:C((()=>e[20]||(e[20]=[D(" 确认 ")]))),_:1,__:[20]},8,["onClick"])])])),_:1})])),_:1})])),_:1},512)])])),_:1},8,["show"])])),_:1},8,["show"]),k(ma)?(u(),S(M,{key:0,writeShow:k(ma)},null,8,["writeShow"])):x("",!0),g("a",{href:k(ba),download:k(ba),ref_key:"downloadLink",ref:Sa},null,8,ca)],64)}}}),[["__scopeId","data-v-683029fa"]]);export{ua as default};
