import{e,p as a,bV as l,k as t,be as i,Z as s,g as o,r as n,aP as d,L as r,q as u,I as c,$ as m,ah as p,w as v,x as f,B as g,z as h,C as x,D as w,y,a7 as _,F as b,E as k,aH as C,aj as M,am as $,A as U,a8 as I,a1 as B,ca as j,a4 as P,aD as z,bH as T,bG as D,aJ as N,bq as S,bJ as L,P as E,Q as V,bM as R,N as W,ak as F,O as q,v as A,_ as G}from"../main-4156cf5e.js";import{_ as H,a as Y,b as J}from"../isVIP2/isVIP2.7acdc913.js";import{g as K,h as O,j as Q,_ as Z,k as X,a as ee,w as ae,l as le,b as te,m as ie,n as se,o as oe,p as ne}from"../writeWork/writeWork.d3b2c1ca.js";import{_ as de}from"../drop3icon/drop3icon.8e32d6d7.js";import{n as re}from"../knowledge/knowledge.84729f8b.js";import{C as ue}from"../Close/Close.1e4e4b04.js";import{N as ce,a as me}from"../DrawerContent/DrawerContent.83ab6e1a.js";import{N as pe,a as ve}from"../Col/Col.3d873762.js";import{N as fe}from"../text/text.b9dc4078.js";import{N as ge}from"../p/p.70e9826d.js";const he={class:"bg-[#fff] dark:bg-[#222325]",style:{"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column",overflow:"hidden"}},xe={style:{width:"100%",height:"84px","box-sizing":"border-box","padding-left":"34px","line-height":"84px","border-bottom":"1px solid #E0E2E9"}},we={style:{"font-size":"18px","font-weight":"500",color:"#000"}},ye={class:"mainBox"},_e={class:"listBox"},be={class:"dashBox"},ke=["onClick"],Ce=["src"],Me={class:"infoBox"},$e={class:"span ellipsi"},Ue={class:"y-pop"},Ie=["onClick"],Be={class:"t t1"},je=["onClick"],Pe={class:"t t2"},ze={class:"cardItem zero"},Te={key:0,class:"noDataBox"},De={class:"listBox"},Ne=["onClick"],Se=["src"],Le={class:"infoBox"},Ee={class:"span ellipsi"},Ve={class:"cardItem zero"},Re={key:0,class:"noDataBox"},We={class:"btnBox"},Fe={class:"slidTitle"},qe={class:"videoInfo"},Ae={style:{width:"100%","font-weight":"600"}},Ge={class:"sspan"},He={class:"zero"},Ye={class:"uploadBox"},Je={class:"uploadBox end"},Ke={class:"audioBox"},Oe=["src"],Qe={class:"exampleTitle"},Ze={class:"gspan"},Xe={class:"exampleVideoList"},ea={class:"videoItem"},aa={class:"bbox"},la=["onClick"],ta=["src"],ia={class:"videoItem zero"},sa={style:{display:"flex","align-items":"center"}},oa={style:{"font-size":"14px",color:"#3D3D3D",transform:"translateY(2px)",display:"block"}},na={style:{display:"flex","justify-content":"flex-end","align-items":"center"}},da={style:{"font-size":"12px",color:"#000","margin-right":"14px"}},ra={key:0,class:"vipIcon",src:J,alt:""},ua={class:"modalMain"},ca={class:"modalTitle"},ma={class:"modalVideoBox"},pa=["src"],va={class:"modalMain modalMain2"},fa={style:{display:"flex","justify-content":"flex-end"}},ga=G(e({__name:"soundClone",setup(e){const G=a(),J=a(),ga=l(),ha=t();i(),s(),o((()=>ha.userInfo.avatar)),o((()=>1===ha.userInfo.lifetimeVip||ha.userInfo.vipExpire&&new Date(ha.userInfo.vipExpire)>new Date));const xa=o((()=>ha.userInfo.vipLeavelId));let wa=n([]);d().then((e=>{wa.value=e.data}));const ya=o((()=>ha.isLogin));r(ya,(e=>{}));let _a=n(!1),ba=n(null),ka=n([]),Ca=n(null),Ma=()=>{le({page:1,size:999}).then((e=>{ka.value=e.data.rows}))},$a=n([]),Ua=n({remainCount:0,freeCount:0,useIntegrate:0}),Ia=n([]);u((()=>{K().then((e=>{Ia.value=e.data.voice})),Ma(),te({page:1,size:999,type:2}).then((e=>{$a.value=e.data.rows})),ie({}).then((e=>{Ua.value=e.data})),O({page:1,size:999}).then((e=>{c.off("updateWriteShow"),c.on("updateWriteShow",(a=>{var l;a&&0==e.data.rows.length||0==(null==(l=e.data.rows[e.data.rows.length-1])?void 0:l.status)?J.error(m("digitalMan.beforCreatWork1")):_a.value=a}))}))}));let Ba=()=>{Pa.value={name:"",description:"",audioUrl:""},ja.value=!0},ja=n(!1),Pa=n({name:"",description:"",audioUrl:"",cover:""}),za=n([]),Ta=()=>{Pa.value.audioUrl="",za.value=[]},Da=(e,a)=>{Pa.value.audioUrl=e.fileUrl,za.value=[{batchId:"adc62b38",fullPath:e.fileUrl,id:"adb0c823",name:"示例"+(a+1),percentage:0,status:"pending",thumbnailUrl:null,type:"audio/mpeg",url:null}]},Na=n({name:[{required:!0,message:m("digitalMan.PinputName"),trigger:"change"}],audioUrl:[{required:!0,message:m("digitalMan.PuploadAudio"),trigger:"change"}],cover:[{required:!0,message:m("digitalMan.PuploadCover"),trigger:"change"}]}),Sa=n(!1);n(!1);let La=n(!1),Ea=n(!1),Va=n(!1);const Ra=["mp3","wav","ogg","mpeg","m4a","x-m4a"];function Wa({file:e,fileList:a}){return new Promise(((a,l)=>{const{size:t,type:i,name:s}=e.file;return console.log(s,"isVideoByExtension"),function(e){const a=e.split(".").pop().toLowerCase();return Ra.includes(a)}(s)?(console.log("可能是视频文件（基于扩展名）"),t>1024e4?(J.error(m("digitalMan.audioNo10M")),a(!1)):void a(!0)):(J.error(m("digitalMan.PuploadAudio")),a(!1))}))}const Fa=e=>{if(Ea.value=!0,"finished"===e.file.status||"removed"===e.file.status)return void(Ea.value=!1);const a=e.file.type.split("/")[1];if(console.log(e.file.name,"handleChangeImage"),"pending"===e.file.status&&Ra.includes(a)){const a=new FormData;a.append("filename",e.file.name),a.append("file",e.file.file),a.append("dir","human-upload"),re(a).then((a=>{Ea.value=!1,Pa.value.audioUrl=a.data.data.dataPath,za.value=e.fileList,console.log(e.fileList,"ev.fileList")}))}};let qa=n(!1),Aa=n(!1);const Ga=n(null),Ha=n(null),Ya=n(null);n(!1),n();let Ja=n(),Ka=e=>{var a;e.preventDefault(),null==(a=Ja.value)||a.validate((e=>{if(Ua.value.isVipUsed&&-1===Ua.value.userType.indexOf(xa.value)){let e=Ua.value.userType.split(","),a="";return e.forEach(((l,t)=>{a+=wa.value.filter((e=>e.id==l))[0].dictName,t<e.length-1&&(a+=",")})),void G.error(m("digitalMan.vipUse1")+a+m("digitalMan.vipUse2"))}if(e)console.log(e),J.error(e[0][0].message);else{if(!Sa.value)return void J.error(m("digitalMan.PagreeText1"));La.value=!0,se(Pa.value).then((e=>{La.value=!1,Pa.value={name:"",description:"",audioUrl:""},Sa.value=!1,ja.value=!1,Ma()}))}}))};const Oa=n([]),Qa=["jpg","jpeg","png"],Za=e=>{if(Va.value=!0,"finished"===e.file.status||"removed"===e.file.status)return void(Va.value=!1);const a=e.file.type.split("/")[1];if("pending"===e.file.status&&Qa.includes(a)){const l=new FormData;l.append("filename",e.file.id+"."+a),l.append("file",e.file.file),l.append("dir","human-upload"),re(l).then((a=>{Va.value=!1,Oa.value=e.fileList,Pa.value.cover=a.data.data.dataPath}))}};function Xa({file:e,fileList:a}){return new Promise(((a,l)=>{const{size:t,type:i}=e.file;return"image/png"!==i&&"image/jpg"!==i&&"image/jpeg"!==i?(J.error(m("digitalMan.onlyUploadImg")),a(!1)):t>1024e3?(J.error(m("digitalMan.imgNo1M")),a(!1)):void a(!0)}))}const el=()=>{Pa.value.cover="",Oa.value=[]};let al=()=>{A({keys:["commitment"]}).then((e=>{ga.info({title:m("setting.userCommit1"),content:e.data,positiveText:m("common.Iknow"),negativeText:m("common.cancel"),draggable:!0})}))},ll=n(!1),tl=n(""),il=()=>{tl.value?(Aa.value=!0,oe({id:Ca.value.id,name:tl.value}).then((e=>{Aa.value=!0,J.success(m("common.changeNameSucc")),ll.value=!1,Ma()}))):J.error(m("common.PinputName"))};return(e,a)=>{const l=p("n-h3");return v(),f(b,null,[g("div",he,[g("div",xe,[g("span",we,h(e.$t("digitalMan.cloneSound")),1)]),g("div",ye,[x(y(I),{type:"bar",class:"listNtabsSoundClone",animated:""},{default:w((()=>[x(y(_),{name:"listp1",tab:"我的声音"},{default:w((()=>[g("div",_e,[g("div",{class:"cardItem add",onClick:a[0]||(a[0]=e=>y(Ba)())},[g("div",be,[a[15]||(a[15]=g("img",{src:H,style:{"margin-bottom":"8px"},alt:""},null,-1)),g("span",null,h(e.$t("digitalMan.QcloneSound")),1)])]),(v(!0),f(b,null,k(y(ka),(l=>(v(),f("div",{class:"cardItem",onClick:e=>{C(Ca)?Ca.value=l:Ca=l,C(qa)?qa.value=!0:qa=!0}},[g("img",{class:"mainImg",src:l.cover,alt:""},null,8,Ce),g("div",Me,[g("div",$e,h(l.name),1),a[16]||(a[16]=g("div",{class:"btnBox"},[g("img",{src:Q,alt:""}),g("span",null,"热情甜美")],-1))]),x(y(M),{style:{"border-radius":"8px",width:"126px",padding:"8px !important"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:w((()=>a[17]||(a[17]=[g("div",{class:"btn"},[g("img",{src:de,alt:""})],-1)]))),default:w((()=>[g("div",Ue,[g("div",{class:"blo",onClick:$((e=>{C(Ca)?Ca.value=l:Ca=l,C(tl)?tl.value=l.name:tl=l.name,C(ll)?ll.value=!0:ll=!0}),["stop"])},[a[18]||(a[18]=g("div",{class:"edit"},null,-1)),g("div",Be,h(e.$t("digitalMan.rename")),1)],8,Ie),g("div",{class:"blo",onClick:$((e=>{return a=l,void ga.warning({title:m("common.warn"),content:m("common.deleteWarnText1"),positiveText:m("common.confirm"),negativeText:m("common.cancel"),draggable:!0,onPositiveClick:()=>{ne({id:a.id}).then((e=>{200===e.code&&(J.success(m("common.deleteSuccess")),Ma())}))},onNegativeClick:()=>{J.error(m("common.cancel"))}});var a}),["stop"])},[a[19]||(a[19]=g("div",{class:"dele"},null,-1)),g("div",Pe,h(e.$t("common.delete")),1)],8,je)])])),_:2},1024)],8,ke)))),256)),(v(),f(b,null,k(5,(e=>g("div",ze))),64))]),y(ka)&&0==y(ka).length?(v(),f("div",Te,[g("div",null,h(e.$t("digitalMan.noWork")),1),g("div",{class:"btnBox",onClick:a[1]||(a[1]=e=>y(Ba)())},h(e.$t("digitalMan.goCreat")),1)])):U("",!0)])),_:1}),x(y(_),{name:"listp2",tab:"我的收藏"},{default:w((()=>[g("div",De,[(v(!0),f(b,null,k(y($a),(e=>(v(),f("div",{class:"cardItem",onClick:a=>{C(Ca)?Ca.value=e:Ca=e,C(qa)?qa.value=!0:qa=!0}},[g("img",{class:"mainImg",src:e.cover,alt:""},null,8,Se),g("div",Le,[g("div",Ee,h(e.name),1),a[20]||(a[20]=g("div",{class:"btnBox"},[g("img",{src:Q,alt:""}),g("span",null,"热情甜美")],-1))])],8,Ne)))),256)),(v(),f(b,null,k(5,(e=>g("div",Ve))),64))]),y($a)&&0==y($a).length?(v(),f("div",Re,[g("div",null,h(e.$t("digitalMan.noCollect")),1),g("div",We,h(e.$t("digitalMan.goCollect")),1)])):U("",!0)])),_:1})])),_:1})])]),x(y(me),{show:y(ja),"onUpdate:show":a[7]||(a[7]=e=>C(ja)?ja.value=e:ja=e),width:720},{default:w((()=>[x(y(B),{show:y(La),"content-style":{height:"100%"},style:{height:"100%",width:"100%"}},{default:w((()=>[x(y(ce),{title:e.$t("digitalMan.cloneSoundZhuan"),closable:""},{footer:w((()=>[x(y(pe),{gutter:[0,24]},{default:w((()=>[x(y(ve),{span:12,style:{display:"flex","align-items":"center"}},{default:w((()=>[g("div",sa,[x(y(j),{checked:y(Sa),"onUpdate:checked":a[6]||(a[6]=e=>C(Sa)?Sa.value=e:Sa=e)},{default:w((()=>[g("span",oa,[P(h(e.$t("setting.readAgree"))+" ",1),g("span",{style:{color:"#574FFE"},onClick:a[5]||(a[5]=$((e=>y(al)()),["stop"]))},"《"+h(e.$t("setting.userCommit1"))+"》",1)])])),_:1},8,["checked"])])])),_:1}),x(y(ve),{span:12},{default:w((()=>[g("div",na,[g("span",da,h(e.$t("digitalMan.needUse")+y(Ua).useIntegrate+e.$t("setting.points")),1),x(y(z),{style:{"margin-right":"10px"}},{default:w((()=>[P(h(e.$t("common.cancel")),1)])),_:1}),x(y(z),{color:"#574FFE","text-color":"#fff",onClick:y(Ka),style:{position:"relative"}},{default:w((()=>[P(h(e.$t("common.submit"))+" ",1),y(Ua).isVipUsed?(v(),f("img",ra)):U("",!0)])),_:1},8,["onClick"])])])),_:1})])),_:1})])),default:w((()=>[x(y(T),{ref_key:"formRef",ref:Ja,model:y(Pa),rules:y(Na)},{default:w((()=>[x(y(D),{path:"name",label:e.$t("digitalMan.soundName")},{default:w((()=>[x(y(N),{value:y(Pa).name,"onUpdate:value":a[2]||(a[2]=e=>y(Pa).name=e),onKeydown:a[3]||(a[3]=S($((()=>{}),["prevent"]),["enter"])),placeholder:e.$t("digitalMan.inputPlaceHolder2")},null,8,["value","placeholder"])])),_:1},8,["label"]),x(y(D),{path:"cover",label:e.$t("digitalMan.cover")},{default:w((()=>[x(y(B),{show:y(Va)},{default:w((()=>[x(y(L),{action:"",max:1,"file-list":Oa.value,onBeforeUpload:Xa,"list-type":"image-card",onRemove:el,onChange:Za,"default-upload":!1},{default:w((()=>[P(h(e.$t("digitalMan.clickUpload")),1)])),_:1},8,["file-list"])])),_:1},8,["show"])])),_:1},8,["label"]),g("div",Fe,[g("span",null,h(e.$t("digitalMan.cankaoSound")),1),a[21]||(a[21]=g("img",{src:Y,style:{"margin-left":"7px",transform:"translateY(-1px)"},alt:""},null,-1))]),g("div",qe,[g("div",Ae,h(e.$t("digitalMan.audioYaoqiu")),1),g("div",null,[g("span",null,h(e.$t("digitalMan.audioGeshi"))+"：",1),a[22]||(a[22]=g("span",{class:"sspan"},"mp3、m4a、wav",-1))]),g("div",null,[g("span",null,h(e.$t("digitalMan.audioTime"))+"：",1),g("span",Ge,h(e.$t("digitalMan.time15s2min")),1)]),(v(),f(b,null,k(2,(e=>g("div",He))),64))]),E(x(y(D),{path:"audioUrl"},{default:w((()=>[g("div",Ye,[x(y(B),{show:y(Ea)},{default:w((()=>[x(y(L),{"directory-dnd":"",action:"",max:1,"default-upload":!1,"file-list":y(za),onRemove:y(Ta),onBeforeUpload:Wa,onChange:Fa,style:{height:"188px",margin:"0 auto"}},{default:w((()=>[x(y(R),null,{default:w((()=>[a[23]||(a[23]=g("img",{src:Z,style:{margin:"0 auto 12px"},alt:""},null,-1)),x(y(fe),{style:{"font-size":"16px"}},{default:w((()=>[P(h(e.$t("digitalMan.uploadText3")),1)])),_:1}),x(y(ge),{depth:"3",style:{margin:"8px 0 0 0"}},{default:w((()=>[P(h(e.$t("digitalMan.uploadText2")),1)])),_:1})])),_:1,__:[23]})])),_:1},8,["file-list","onRemove"])])),_:1},8,["show"])])])),_:1},512),[[V,!y(Pa).audioUrl]])])),_:1},8,["model","rules"]),E(g("div",Je,[g("div",{class:"deletBtn",onClick:a[4]||(a[4]=e=>{y(Pa).audioUrl="",C(za)?za.value=[]:za=[]})}),g("div",Ke,[g("audio",{id:"audio",controls:"",ref_key:"audioRef",ref:Ga,src:y(Pa).audioUrl},null,8,Oe)])],512),[[V,y(Pa).audioUrl]]),g("div",Qe,[g("span",null,h(e.$t("digitalMan.exampSound")),1),g("span",Ze,h(e.$t("digitalMan.noVideoText1")),1)]),g("div",Xe,[(v(!0),f(b,null,k(y(Ia),(l=>(v(),f("div",ea,[a[24]||(a[24]=g("img",{src:X,class:"soundPlay1",alt:""},null,-1)),g("span",null,h(l.title),1),g("div",aa,[g("div",{class:"sbtn",onClick:a=>y(Da)(l,e.index)},h(e.$t("digitalMan.select")),9,la)]),g("audio",{id:"audio",ref_for:!0,ref_key:"audioRef2",ref:Ha,src:l.fileUrl},null,8,ta)])))),256)),(v(),f(b,null,k(2,(e=>g("div",ia))),64))])])),_:1},8,["title"])])),_:1},8,["show"])])),_:1},8,["show"]),x(y(F),{show:y(qa),"onUpdate:show":a[10]||(a[10]=e=>C(qa)?qa.value=e:qa=e)},{default:w((()=>[x(y(B),{show:y(Aa)},{default:w((()=>[g("div",ua,[g("div",{class:"closeIcon",onClick:a[8]||(a[8]=e=>{C(qa)?qa.value=!1:qa=!1})},[x(y(W),{size:"40",color:"#333"},{default:w((()=>[x(y(ue))])),_:1})]),g("div",ca,h(y(Ca).name),1),g("div",ma,[g("audio",{id:"audioModal",controls:"",ref_key:"audioModalRef",ref:Ya,src:y(Ca).fileUrl},null,8,pa)]),g("div",{class:"moadlBtn",onClick:a[9]||(a[9]=$((e=>{C(qa)?qa.value=!1:qa=!1,C(ba)?ba.value=y(Ca):ba=y(Ca),C(_a)?_a.value=!0:_a=!0}),["stop"]))},[a[25]||(a[25]=g("img",{src:ee,alt:""},null,-1)),g("span",null,h(e.$t("digitalMan.goCreatWork")),1)])])])),_:1},8,["show"])])),_:1},8,["show"]),x(y(F),{show:y(ll),"onUpdate:show":a[14]||(a[14]=e=>C(ll)?ll.value=e:ll=e)},{default:w((()=>[x(y(B),{show:y(Aa)},{default:w((()=>[g("div",va,[x(l,null,{default:w((()=>[P(h(e.$t("digitalMan.rename")),1)])),_:1}),x(y(T),{ref_key:"formRef",ref:Ja},{default:w((()=>[x(y(D),{path:"name",label:""},{default:w((()=>[x(y(N),{value:y(tl),"onUpdate:value":a[11]||(a[11]=e=>C(tl)?tl.value=e:tl=e),onKeydown:a[12]||(a[12]=S($((()=>{}),["prevent"]),["enter"])),placeholder:e.$t("common.naming")},null,8,["value","placeholder"])])),_:1}),x(y(pe),{gutter:[0,24]},{default:w((()=>[x(y(ve),{span:24},{default:w((()=>[g("div",fa,[x(y(z),{strong:"",secondary:"",onClick:a[13]||(a[13]=e=>C(ll)?ll.value=!1:ll=!1),style:{"margin-right":"10px"}},{default:w((()=>[P(h(e.$t("common.cancel")),1)])),_:1}),x(y(z),{type:"primary",onClick:y(il)},{default:w((()=>[P(h(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1},512)])])),_:1},8,["show"])])),_:1},8,["show"]),y(_a)?(v(),q(ae,{key:0,writeShow:y(_a),defaultSound:y(ba)},null,8,["writeShow","defaultSound"])):U("",!0)],64)}}}),[["__scopeId","data-v-3a93f1a6"]]);export{ga as default};
