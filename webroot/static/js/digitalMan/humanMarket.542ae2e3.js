import{e as a,p as e,bV as s,k as i,be as l,Z as t,g as o,r as n,aP as r,L as d,q as u,$ as c,ah as p,w as v,x as m,B as g,z as f,P as h,a0 as w,y as x,aH as k,F as b,E as I,am as y,A as C,C as M,D as j,a1 as U,N as _,ak as B,O as V,I as z,_ as E}from"../main-4156cf5e.js";import{_ as D}from"../searchIcon/searchIcon.66ba7ba0.js";import{_ as P}from"../isVIP/isVIP.3aa6f50b.js";import{g as $,a as T,w as W,r as S,b as q,c as H}from"../writeWork/writeWork.d3b2c1ca.js";import{C as L}from"../Close/Close.1e4e4b04.js";import"../knowledge/knowledge.84729f8b.js";import"../Col/Col.3d873762.js";import"../text/text.b9dc4078.js";import"../p/p.70e9826d.js";const N={class:"bg-[#fff] dark:bg-[#222325]",style:{"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column",overflow:"hidden",position:"relative"}},O={style:{width:"100%",height:"84px","box-sizing":"border-box",padding:"0 34px","line-height":"84px","border-bottom":"1px solid #E0E2E9",display:"flex","align-items":"center","justify-content":"space-between"}},A={style:{"font-size":"18px","font-weight":"500",color:"#000"}},F={class:"inputOut dark:bg-[#2d2e35] bg-[#fff] dark:text-[#fff]"},G=["placeholder"],K={class:"mainBox"},Z={class:"listBox"},J=["onClick"],Q=["src"],R={class:"infoBox"},X={class:"span ellipsi"},Y=["onClick"],aa={key:0,class:"vipIcon",src:P,alt:""},ea={class:"cardItem zero"},sa={key:0,class:"noDataBox"},ia={class:"modalMain"},la={class:"modalTitle"},ta={class:"modalVideoBox"},oa=E(a({__name:"humanMarket",setup(a){const E=e(),P=e();s();const oa=i();l(),t(),o((()=>oa.userInfo.avatar)),o((()=>1===oa.userInfo.lifetimeVip||oa.userInfo.vipExpire&&new Date(oa.userInfo.vipExpire)>new Date));const na=o((()=>oa.userInfo.vipLeavelId));let ra=n([]);r().then((a=>{ra.value=a.data}));let da=a=>{if(a.isVipUsed&&-1===a.userType.indexOf(na.value)){let e=a.userType.split(","),s="";return e.forEach(((a,i)=>{s+=ra.value.filter((e=>e.id==a))[0].dictName,i<e.length-1&&(s+=",")})),void E.error(c("digitalMan.vipUse1")+s+c("digitalMan.vipUse2"))}ka.value=!1,pa.value=ga.value,ca.value=!0};const ua=o((()=>oa.isLogin));d(ua,(a=>{}));let ca=n(!1),pa=n(null),va=n(""),ma=n([]),ga=n(null),fa=()=>{S({page:1,size:999,searchKey:va.value}).then((a=>{ma.value=a.data.rows;let e=!1;a.data.rows.forEach((a=>{0===a.status&&(e=!0)})),e&&setTimeout((()=>{fa()}),3e3),z.off("updateWriteShow"),z.on("updateWriteShow",(e=>{var s;e&&0==ma.value.length||0==(null==(s=a.data.rows[a.data.rows.length-1])?void 0:s.status)?P.error(c("digitalMan.beforCreatWork1")):ca.value=e}))}))},ha=n([]),wa=n({remainCount:0,freeCount:0,useIntegrate:0}),xa=n([]);u((()=>{$().then((a=>{xa.value=a.data.video})),fa(),q({page:1,size:999,type:1}).then((a=>{ha.value=a.data.rows})),H({}).then((a=>{wa.value=a.data}))})),n(!1),n({name:"",description:"",videoUrl:""}),n([]),n({name:[{required:!0,message:c("digitalMan.PinputName"),trigger:"change"}],videoUrl:[{required:!0,message:c("digitalMan.PuploadVideo"),trigger:"change"}]}),n(!1),n(!1),n(!1),n(!1);let ka=n(!1),ba=n(!1);return n(),n(),n(!1),n(""),(a,e)=>{const s=p("vue3-video-player");return v(),m(b,null,[g("div",N,[g("div",O,[g("span",A,f(a.$t("digitalMan.publicDigitaMan")),1),g("div",F,[h(g("input",{class:"inputBg",placeholder:a.$t("common.search"),"onUpdate:modelValue":e[0]||(e[0]=a=>k(va)?va.value=a:va=a)},null,8,G),[[w,x(va)]]),g("img",{style:{width:"25px",height:"25px",cursor:"pointer"},src:D,alt:"",onClick:e[1]||(e[1]=(...a)=>x(fa)&&x(fa)(...a))})])]),g("div",K,[g("div",Z,[(v(!0),m(b,null,I(x(ma),(e=>(v(),m("div",{class:"cardItem",onClick:a=>{k(ga)?ga.value=e:ga=e,k(ka)?ka.value=!0:ka=!0}},[g("img",{class:"mainImg",src:e.cover,alt:""},null,8,Q),g("div",R,[g("div",X,f(e.name),1),g("div",{class:"btnBox",onClick:y((a=>{x(da)(e)}),["stop"])},f(a.$t("common.use")),9,Y)]),e.isVipUsed?(v(),m("img",aa)):C("",!0)],8,J)))),256)),(v(),m(b,null,I(5,(a=>g("div",ea))),64))]),x(ma)&&0==x(ma).length?(v(),m("div",sa,[g("div",null,f(a.$t("digitalMan.noDigitaMan")),1)])):C("",!0)])]),M(x(B),{show:x(ka),"onUpdate:show":e[4]||(e[4]=a=>k(ka)?ka.value=a:ka=a)},{default:j((()=>[M(x(U),{show:x(ba)},{default:j((()=>[g("div",ia,[g("div",{class:"closeIcon",onClick:e[2]||(e[2]=a=>{k(ka)?ka.value=!1:ka=!1})},[M(x(_),{size:"40",color:"#333"},{default:j((()=>[M(x(L))])),_:1})]),g("div",la,f(x(ga).name),1),g("div",ta,[M(s,{src:x(ga).fileUrl},null,8,["src"])]),g("div",{class:"moadlBtn",onClick:e[3]||(e[3]=y((a=>{x(da)(x(ga))}),["stop"]))},[e[5]||(e[5]=g("img",{src:T,alt:""},null,-1)),g("span",null,f(a.$t("common.use")),1)])])])),_:1},8,["show"])])),_:1},8,["show"]),x(ca)?(v(),V(W,{key:0,writeShow:x(ca),defaultHuman:x(pa)},null,8,["writeShow","defaultHuman"])):C("",!0)],64)}}}),[["__scopeId","data-v-fec07fd2"]]);export{oa as default};
