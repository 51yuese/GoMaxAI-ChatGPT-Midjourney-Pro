import{e as a,p as e,bV as s,k as l,be as i,Z as o,g as t,r,aP as n,L as d,q as u,I as c,$ as p,w as g,x as v,B as m,z as f,P as h,a0 as w,y as x,aH as k,F as b,E as I,A as y,C,D as j,a1 as _,N as M,am as U,ak as z,O as B,_ as S}from"../main-4156cf5e.js";import{_ as V}from"../searchIcon/searchIcon.66ba7ba0.js";import{g as E,h as W,j as q,a as $,w as D,q as P,b as T,m as L}from"../writeWork/writeWork.d3b2c1ca.js";import{_ as O}from"../isVIP/isVIP.3aa6f50b.js";import{C as N}from"../Close/Close.1e4e4b04.js";import"../knowledge/knowledge.84729f8b.js";import"../Col/Col.3d873762.js";import"../text/text.b9dc4078.js";import"../p/p.70e9826d.js";const A={class:"bg-[#fff] dark:bg-[#222325]",style:{"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column",overflow:"hidden"}},F={style:{width:"100%",height:"84px","box-sizing":"border-box",padding:"0 34px","line-height":"84px","border-bottom":"1px solid #E0E2E9",display:"flex","align-items":"center","justify-content":"space-between"}},G={style:{"font-size":"18px","font-weight":"500",color:"#000"}},H={class:"inputOut dark:bg-[#2d2e35] bg-[#fff] dark:text-[#fff]"},K=["placeholder"],R={class:"mainBox"},Z={class:"listBox"},J=["onClick"],Q=["src"],X={class:"infoBox"},Y={class:"span ellipsi"},aa={key:0,class:"vipIcon",src:O,alt:""},ea={class:"cardItem zero"},sa={key:0,class:"noDataBox"},la={class:"modalMain"},ia={class:"modalTitle"},oa={class:"modalVideoBox"},ta=["src"],ra=S(a({__name:"soundMarket",setup(a){const S=e(),O=e();s();const ra=l();i(),o(),t((()=>ra.userInfo.avatar)),t((()=>1===ra.userInfo.lifetimeVip||ra.userInfo.vipExpire&&new Date(ra.userInfo.vipExpire)>new Date));const na=t((()=>ra.userInfo.vipLeavelId));let da=r([]);n().then((a=>{da.value=a.data}));let ua=a=>{if(a.isVipUsed&&-1===a.userType.indexOf(na.value)){let e=a.userType.split(","),s="";return e.forEach(((a,l)=>{s+=da.value.filter((e=>e.id==a))[0].dictName,l<e.length-1&&(s+=",")})),void S.error(p("digitalMan.vipUse1")+s+p("digitalMan.vipUse2"))}ba.value=!1,ga.value=fa.value,pa.value=!0};const ca=t((()=>ra.isLogin));d(ca,(a=>{}));let pa=r(!1),ga=r(null),va=r(""),ma=r([]),fa=r(null),ha=()=>{P({page:1,size:999,searchKey:va.value}).then((a=>{ma.value=a.data.rows}))},wa=r([]),xa=r({remainCount:0,freeCount:0,useIntegrate:0}),ka=r([]);u((()=>{E().then((a=>{ka.value=a.data.voice})),ha(),T({page:1,size:999,type:2}).then((a=>{wa.value=a.data.rows})),L({}).then((a=>{xa.value=a.data})),W({page:1,size:999}).then((a=>{c.off("updateWriteShow"),c.on("updateWriteShow",(e=>{var s;e&&0==a.data.rows.length||0==(null==(s=a.data.rows[a.data.rows.length-1])?void 0:s.status)?O.error(p("digitalMan.beforCreatWork1")):pa.value=e}))}))})),r(!1),r({name:"",description:"",audioUrl:"",cover:""}),r([]),r({name:[{required:!0,message:"请输入姓名",trigger:"change"}],audioUrl:[{required:!0,message:"请上传音频",trigger:"change"}],cover:[{required:!0,message:"请上传封面",trigger:"change"}]}),r(!1),r(!1),r(!1),r(!1),r(!1);let ba=r(!1),Ia=r(!1);r(null),r(null);const ya=r(null);return r(!1),r(),r(),r([]),r(!1),r(""),(a,e)=>(g(),v(b,null,[m("div",A,[m("div",F,[m("span",G,f(a.$t("digitalMan.publicSound")),1),m("div",H,[h(m("input",{class:"inputBg",placeholder:a.$t("common.search"),"onUpdate:modelValue":e[0]||(e[0]=a=>k(va)?va.value=a:va=a)},null,8,K),[[w,x(va)]]),m("img",{style:{width:"25px",height:"25px",cursor:"pointer"},src:V,alt:"",onClick:e[1]||(e[1]=(...a)=>x(ha)&&x(ha)(...a))})])]),m("div",R,[m("div",Z,[(g(!0),v(b,null,I(x(ma),(a=>(g(),v("div",{class:"cardItem",onClick:e=>{k(fa)?fa.value=a:fa=a,k(ba)?ba.value=!0:ba=!0}},[m("img",{class:"mainImg",src:a.cover,alt:""},null,8,Q),m("div",X,[m("div",Y,f(a.name),1),e[5]||(e[5]=m("div",{class:"btnBox"},[m("img",{src:q,alt:""}),m("span",null,"热情甜美")],-1))]),a.isVipUsed?(g(),v("img",aa)):y("",!0)],8,J)))),256)),(g(),v(b,null,I(5,(a=>m("div",ea))),64))]),x(ma)&&0==x(ma).length?(g(),v("div",sa,[m("div",null,f(a.$t("digitalMan.publicSound")),1)])):y("",!0)])]),C(x(z),{show:x(ba),"onUpdate:show":e[4]||(e[4]=a=>k(ba)?ba.value=a:ba=a)},{default:j((()=>[C(x(_),{show:x(Ia)},{default:j((()=>[m("div",la,[m("div",{class:"closeIcon",onClick:e[2]||(e[2]=a=>{k(ba)?ba.value=!1:ba=!1})},[C(x(M),{size:"40",color:"#333"},{default:j((()=>[C(x(N))])),_:1})]),m("div",ia,f(x(fa).name),1),m("div",oa,[m("audio",{id:"audioModal",controls:"",ref_key:"audioModalRef",ref:ya,src:x(fa).fileUrl},null,8,ta)]),m("div",{class:"moadlBtn",onClick:e[3]||(e[3]=U((a=>{x(ua)(x(fa))}),["stop"]))},[e[6]||(e[6]=m("img",{src:$,alt:""},null,-1)),m("span",null,f(a.$t("digitalMan.goCreatWork")),1)])])])),_:1},8,["show"])])),_:1},8,["show"]),x(pa)?(g(),B(D,{key:0,writeShow:x(pa),defaultSound:x(ga)},null,8,["writeShow","defaultSound"])):y("",!0)],64))}}),[["__scopeId","data-v-cdc14133"]]);export{ra as default};
