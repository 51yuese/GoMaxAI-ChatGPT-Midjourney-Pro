import{e,p as a,bN as l,k as t,be as i,Z as s,g as o,r as n,aP as d,L as r,q as u,I as c,$ as p,ah as m,w as v,x as f,B as g,z as h,C as x,D as y,y as w,a7 as _,F as b,E as k,aH as C,aj as M,am as $,A as U,a8 as I,a1 as B,c4 as j,a4 as z,aD as P,bz as D,by as N,aJ as T,bq as S,bB as L,P as E,Q as V,bE as W,N as F,ak as R,O as q,v as A,_ as Y}from"../main-b114ff11.js";import{_ as H,a as J,b as K}from"../isVIP2/isVIP2.7acdc913.js";import{g as O,h as Q,j as Z,_ as G,k as X,a as ee,w as ae,l as le,b as te,m as ie,n as se,o as oe,p as ne}from"../writeWork/writeWork.35b91b23.js";import{_ as de}from"../drop3icon/drop3icon.8e32d6d7.js";import{n as re}from"../knowledge/knowledge.2f04d58b.js";import{C as ue}from"../Close/Close.83f36086.js";import{N as ce,a as pe}from"../DrawerContent/DrawerContent.d6b8ca84.js";import{N as me,a as ve}from"../Col/Col.2ee9adb5.js";import{N as fe}from"../text/text.649a11d3.js";import{N as ge}from"../p/p.1f682d37.js";const he={class:"bg-[#fff] dark:bg-[#222325]",style:{"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column",overflow:"hidden"}},xe={style:{width:"100%",height:"84px","box-sizing":"border-box","padding-left":"34px","line-height":"84px","border-bottom":"1px solid #E0E2E9"}},ye={style:{"font-size":"18px","font-weight":"500",color:"#000"}},we={class:"mainBox"},_e={class:"listBox"},be={class:"dashBox"},ke=["onClick"],Ce=["src"],Me={class:"infoBox"},$e={class:"span ellipsi"},Ue={class:"y-pop"},Ie=["onClick"],Be={class:"t t1"},je=["onClick"],ze={class:"t t2"},Pe={class:"cardItem zero"},De={key:0,class:"noDataBox"},Ne={class:"listBox"},Te=["onClick"],Se=["src"],Le={class:"infoBox"},Ee={class:"span ellipsi"},Ve={class:"cardItem zero"},We={key:0,class:"noDataBox"},Fe={class:"btnBox"},Re={class:"slidTitle"},qe={class:"videoInfo"},Ae={style:{width:"100%","font-weight":"600"}},Ye={class:"sspan"},He={class:"zero"},Je={class:"uploadBox"},Ke={class:"uploadBox end"},Oe={class:"audioBox"},Qe=["src"],Ze={class:"exampleTitle"},Ge={class:"gspan"},Xe={class:"exampleVideoList"},ea={class:"videoItem"},aa={class:"bbox"},la=["onClick"],ta=["src"],ia={class:"videoItem zero"},sa={style:{display:"flex","align-items":"center"}},oa={style:{"font-size":"14px",color:"#3D3D3D",transform:"translateY(2px)",display:"block"}},na={style:{display:"flex","justify-content":"flex-end","align-items":"center"}},da={style:{"font-size":"12px",color:"#000","margin-right":"14px"}},ra={key:0,class:"vipIcon",src:K,alt:""},ua={class:"modalMain"},ca={class:"modalTitle"},pa={class:"modalVideoBox"},ma=["src"],va={class:"modalMain modalMain2"},fa={style:{display:"flex","justify-content":"flex-end"}},ga=Y(e({__name:"soundClone",setup(e){const Y=a(),K=a(),ga=l(),ha=t();i(),s(),o((()=>ha.userInfo.avatar)),o((()=>1===ha.userInfo.lifetimeVip||ha.userInfo.vipExpire&&new Date(ha.userInfo.vipExpire)>new Date));const xa=o((()=>ha.userInfo.vipLeavelId));let ya=n([]);d().then((e=>{ya.value=e.data}));const wa=o((()=>ha.isLogin));r(wa,(e=>{}));let _a=n(!1),ba=n(null),ka=n([]),Ca=n(null),Ma=()=>{le({page:1,size:999}).then((e=>{ka.value=e.data.rows}))},$a=n([]),Ua=n({remainCount:0,freeCount:0,useIntegrate:0}),Ia=n([]);u((()=>{O().then((e=>{Ia.value=e.data.voice})),Ma(),te({page:1,size:999,type:2}).then((e=>{$a.value=e.data.rows})),ie({}).then((e=>{Ua.value=e.data})),Q({page:1,size:999}).then((e=>{c.off("updateWriteShow"),c.on("updateWriteShow",(a=>{var l;a&&0==e.data.rows.length||0==(null==(l=e.data.rows[e.data.rows.length-1])?void 0:l.status)?K.error(p("digitalMan.beforCreatWork1")):_a.value=a}))}))}));let Ba=()=>{za.value={name:"",description:"",audioUrl:""},ja.value=!0},ja=n(!1),za=n({name:"",description:"",audioUrl:"",cover:""}),Pa=n([]),Da=()=>{za.value.audioUrl="",Pa.value=[]},Na=(e,a)=>{za.value.audioUrl=e.fileUrl,Pa.value=[{batchId:"adc62b38",fullPath:e.fileUrl,id:"adb0c823",name:"示例"+(a+1),percentage:0,status:"pending",thumbnailUrl:null,type:"audio/mpeg",url:null}]},Ta=n({name:[{required:!0,message:p("digitalMan.PinputName"),trigger:"change"}],audioUrl:[{required:!0,message:p("digitalMan.PuploadAudio"),trigger:"change"}],cover:[{required:!0,message:p("digitalMan.PuploadCover"),trigger:"change"}]}),Sa=n(!1);n(!1);let La=n(!1),Ea=n(!1),Va=n(!1);const Wa=["mp3","wav","ogg","mpeg","m4a","x-m4a"];function Fa({file:e,fileList:a}){return new Promise(((a,l)=>{const{size:t,type:i,name:s}=e.file;return console.log(s,"isVideoByExtension"),function(e){const a=e.split(".").pop().toLowerCase();return Wa.includes(a)}(s)?(console.log("可能是视频文件（基于扩展名）"),t>1024e4?(K.error(p("digitalMan.audioNo10M")),a(!1)):void a(!0)):(K.error(p("digitalMan.PuploadAudio")),a(!1))}))}const Ra=e=>{if(Ea.value=!0,"finished"===e.file.status||"removed"===e.file.status)return void(Ea.value=!1);const a=e.file.type.split("/")[1];if(console.log(e.file.name,"handleChangeImage"),"pending"===e.file.status&&Wa.includes(a)){const a=new FormData;a.append("filename",e.file.name),a.append("file",e.file.file),a.append("dir","human-upload"),re(a).then((a=>{Ea.value=!1,za.value.audioUrl=a.data.data.dataPath,Pa.value=e.fileList,console.log(e.fileList,"ev.fileList")}))}};let qa=n(!1),Aa=n(!1);const Ya=n(null),Ha=n(null),Ja=n(null);n(!1),n();let Ka=n(),Oa=e=>{var a;e.preventDefault(),null==(a=Ka.value)||a.validate((e=>{if(wa.value){if(Ua.value.isVipUsed&&-1===Ua.value.userType.indexOf(xa.value)){let e=Ua.value.userType.split(","),a="";return e.forEach(((l,t)=>{a+=ya.value.filter((e=>e.id==l))[0].dictName,t<e.length-1&&(a+=",")})),void Y.error(p("digitalMan.vipUse1")+a+p("digitalMan.vipUse2"))}if(e)console.log(e),K.error(e[0][0].message);else{if(!Sa.value)return void K.error(p("digitalMan.PagreeText1"));La.value=!0,se(za.value).then((e=>{La.value=!1,za.value={name:"",description:"",audioUrl:""},Sa.value=!1,ja.value=!1,Ma()}))}}else ha.setLoginDialog(!0)}))};const Qa=n([]),Za=["jpg","jpeg","png"],Ga=e=>{if(Va.value=!0,"finished"===e.file.status||"removed"===e.file.status)return void(Va.value=!1);const a=e.file.type.split("/")[1];if("pending"===e.file.status&&Za.includes(a)){const l=new FormData;l.append("filename",e.file.id+"."+a),l.append("file",e.file.file),l.append("dir","human-upload"),re(l).then((a=>{Va.value=!1,Qa.value=e.fileList,za.value.cover=a.data.data.dataPath}))}};function Xa({file:e,fileList:a}){return new Promise(((a,l)=>{const{size:t,type:i}=e.file;return"image/png"!==i&&"image/jpg"!==i&&"image/jpeg"!==i?(K.error(p("digitalMan.onlyUploadImg")),a(!1)):t>1024e3?(K.error(p("digitalMan.imgNo1M")),a(!1)):void a(!0)}))}const el=()=>{za.value.cover="",Qa.value=[]};let al=()=>{A({keys:["commitment"]}).then((e=>{ga.info({title:p("setting.userCommit1"),content:e.data,positiveText:p("common.Iknow"),negativeText:p("common.cancel"),draggable:!0})}))},ll=n(!1),tl=n(""),il=()=>{tl.value?(Aa.value=!0,oe({id:Ca.value.id,name:tl.value}).then((e=>{Aa.value=!0,K.success(p("common.changeNameSucc")),ll.value=!1,Ma()}))):K.error(p("common.PinputName"))};return(e,a)=>{const l=m("n-h3");return v(),f(b,null,[g("div",he,[g("div",xe,[g("span",ye,h(e.$t("digitalMan.cloneSound")),1)]),g("div",we,[x(w(I),{type:"bar",class:"listNtabsSoundClone",animated:""},{default:y((()=>[x(w(_),{name:"listp1",tab:"我的声音"},{default:y((()=>[g("div",_e,[g("div",{class:"cardItem add",onClick:a[0]||(a[0]=e=>w(Ba)())},[g("div",be,[a[15]||(a[15]=g("img",{src:H,style:{"margin-bottom":"8px"},alt:""},null,-1)),g("span",null,h(e.$t("digitalMan.QcloneSound")),1)])]),(v(!0),f(b,null,k(w(ka),(l=>(v(),f("div",{class:"cardItem",onClick:e=>{C(Ca)?Ca.value=l:Ca=l,C(qa)?qa.value=!0:qa=!0}},[g("img",{class:"mainImg",src:l.cover,alt:""},null,8,Ce),g("div",Me,[g("div",$e,h(l.name),1),a[16]||(a[16]=g("div",{class:"btnBox"},[g("img",{src:Z,alt:""}),g("span",null,"热情甜美")],-1))]),x(w(M),{style:{"border-radius":"8px",width:"126px",padding:"8px !important"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:y((()=>a[17]||(a[17]=[g("div",{class:"btn"},[g("img",{src:de,alt:""})],-1)]))),default:y((()=>[g("div",Ue,[g("div",{class:"blo",onClick:$((e=>{C(Ca)?Ca.value=l:Ca=l,C(tl)?tl.value=l.name:tl=l.name,C(ll)?ll.value=!0:ll=!0}),["stop"])},[a[18]||(a[18]=g("div",{class:"edit"},null,-1)),g("div",Be,h(e.$t("digitalMan.rename")),1)],8,Ie),g("div",{class:"blo",onClick:$((e=>{return a=l,void ga.warning({title:p("common.warn"),content:p("common.deleteWarnText1"),positiveText:p("common.confirm"),negativeText:p("common.cancel"),draggable:!0,onPositiveClick:()=>{ne({id:a.id}).then((e=>{200===e.code&&(K.success(p("common.deleteSuccess")),Ma())}))},onNegativeClick:()=>{K.error(p("common.cancel"))}});var a}),["stop"])},[a[19]||(a[19]=g("div",{class:"dele"},null,-1)),g("div",ze,h(e.$t("common.delete")),1)],8,je)])])),_:2},1024)],8,ke)))),256)),(v(),f(b,null,k(5,(e=>g("div",Pe))),64))]),w(ka)&&0==w(ka).length?(v(),f("div",De,[g("div",null,h(e.$t("digitalMan.noWork")),1),g("div",{class:"btnBox",onClick:a[1]||(a[1]=e=>w(Ba)())},h(e.$t("digitalMan.goCreat")),1)])):U("",!0)])),_:1}),x(w(_),{name:"listp2",tab:"我的收藏"},{default:y((()=>[g("div",Ne,[(v(!0),f(b,null,k(w($a),(e=>(v(),f("div",{class:"cardItem",onClick:a=>{C(Ca)?Ca.value=e:Ca=e,C(qa)?qa.value=!0:qa=!0}},[g("img",{class:"mainImg",src:e.cover,alt:""},null,8,Se),g("div",Le,[g("div",Ee,h(e.name),1),a[20]||(a[20]=g("div",{class:"btnBox"},[g("img",{src:Z,alt:""}),g("span",null,"热情甜美")],-1))])],8,Te)))),256)),(v(),f(b,null,k(5,(e=>g("div",Ve))),64))]),w($a)&&0==w($a).length?(v(),f("div",We,[g("div",null,h(e.$t("digitalMan.noCollect")),1),g("div",Fe,h(e.$t("digitalMan.goCollect")),1)])):U("",!0)])),_:1})])),_:1})])]),x(w(pe),{show:w(ja),"onUpdate:show":a[7]||(a[7]=e=>C(ja)?ja.value=e:ja=e),width:720},{default:y((()=>[x(w(B),{show:w(La),"content-style":{height:"100%"},style:{height:"100%",width:"100%"}},{default:y((()=>[x(w(ce),{title:e.$t("digitalMan.cloneSoundZhuan"),closable:""},{footer:y((()=>[x(w(me),{gutter:[0,24]},{default:y((()=>[x(w(ve),{span:12,style:{display:"flex","align-items":"center"}},{default:y((()=>[g("div",sa,[x(w(j),{checked:w(Sa),"onUpdate:checked":a[6]||(a[6]=e=>C(Sa)?Sa.value=e:Sa=e)},{default:y((()=>[g("span",oa,[z(h(e.$t("setting.readAgree"))+" ",1),g("span",{style:{color:"#574FFE"},onClick:a[5]||(a[5]=$((e=>w(al)()),["stop"]))},"《"+h(e.$t("setting.userCommit1"))+"》",1)])])),_:1},8,["checked"])])])),_:1}),x(w(ve),{span:12},{default:y((()=>[g("div",na,[g("span",da,h(e.$t("digitalMan.needUse")+w(Ua).useIntegrate+e.$t("setting.points")),1),x(w(P),{style:{"margin-right":"10px"}},{default:y((()=>[z(h(e.$t("common.cancel")),1)])),_:1}),x(w(P),{color:"#574FFE","text-color":"#fff",onClick:w(Oa),style:{position:"relative"}},{default:y((()=>[z(h(e.$t("common.submit"))+" ",1),w(Ua).isVipUsed?(v(),f("img",ra)):U("",!0)])),_:1},8,["onClick"])])])),_:1})])),_:1})])),default:y((()=>[x(w(D),{ref_key:"formRef",ref:Ka,model:w(za),rules:w(Ta)},{default:y((()=>[x(w(N),{path:"name",label:e.$t("digitalMan.soundName")},{default:y((()=>[x(w(T),{value:w(za).name,"onUpdate:value":a[2]||(a[2]=e=>w(za).name=e),onKeydown:a[3]||(a[3]=S($((()=>{}),["prevent"]),["enter"])),placeholder:e.$t("digitalMan.inputPlaceHolder2")},null,8,["value","placeholder"])])),_:1},8,["label"]),x(w(N),{path:"cover",label:e.$t("digitalMan.cover")},{default:y((()=>[x(w(B),{show:w(Va)},{default:y((()=>[x(w(L),{action:"",max:1,"file-list":Qa.value,onBeforeUpload:Xa,"list-type":"image-card",onRemove:el,onChange:Ga,"default-upload":!1},{default:y((()=>[z(h(e.$t("digitalMan.clickUpload")),1)])),_:1},8,["file-list"])])),_:1},8,["show"])])),_:1},8,["label"]),g("div",Re,[g("span",null,h(e.$t("digitalMan.cankaoSound")),1),a[21]||(a[21]=g("img",{src:J,style:{"margin-left":"7px",transform:"translateY(-1px)"},alt:""},null,-1))]),g("div",qe,[g("div",Ae,h(e.$t("digitalMan.audioYaoqiu")),1),g("div",null,[g("span",null,h(e.$t("digitalMan.audioGeshi"))+"：",1),a[22]||(a[22]=g("span",{class:"sspan"},"mp3、m4a、wav",-1))]),g("div",null,[g("span",null,h(e.$t("digitalMan.audioTime"))+"：",1),g("span",Ye,h(e.$t("digitalMan.time15s2min")),1)]),(v(),f(b,null,k(2,(e=>g("div",He))),64))]),E(x(w(N),{path:"audioUrl"},{default:y((()=>[g("div",Je,[x(w(B),{show:w(Ea)},{default:y((()=>[x(w(L),{"directory-dnd":"",action:"",max:1,"default-upload":!1,"file-list":w(Pa),onRemove:w(Da),onBeforeUpload:Fa,onChange:Ra,style:{height:"188px",margin:"0 auto"}},{default:y((()=>[x(w(W),null,{default:y((()=>[a[23]||(a[23]=g("img",{src:G,style:{margin:"0 auto 12px"},alt:""},null,-1)),x(w(fe),{style:{"font-size":"16px"}},{default:y((()=>[z(h(e.$t("digitalMan.uploadText3")),1)])),_:1}),x(w(ge),{depth:"3",style:{margin:"8px 0 0 0"}},{default:y((()=>[z(h(e.$t("digitalMan.uploadText2")),1)])),_:1})])),_:1,__:[23]})])),_:1},8,["file-list","onRemove"])])),_:1},8,["show"])])])),_:1},512),[[V,!w(za).audioUrl]])])),_:1},8,["model","rules"]),E(g("div",Ke,[g("div",{class:"deletBtn",onClick:a[4]||(a[4]=e=>{w(za).audioUrl="",C(Pa)?Pa.value=[]:Pa=[]})}),g("div",Oe,[g("audio",{id:"audio",controls:"",ref_key:"audioRef",ref:Ya,src:w(za).audioUrl},null,8,Qe)])],512),[[V,w(za).audioUrl]]),g("div",Ze,[g("span",null,h(e.$t("digitalMan.exampSound")),1),g("span",Ge,h(e.$t("digitalMan.noVideoText1")),1)]),g("div",Xe,[(v(!0),f(b,null,k(w(Ia),(l=>(v(),f("div",ea,[a[24]||(a[24]=g("img",{src:X,class:"soundPlay1",alt:""},null,-1)),g("span",null,h(l.title),1),g("div",aa,[g("div",{class:"sbtn",onClick:a=>w(Na)(l,e.index)},h(e.$t("digitalMan.select")),9,la)]),g("audio",{id:"audio",ref_for:!0,ref_key:"audioRef2",ref:Ha,src:l.fileUrl},null,8,ta)])))),256)),(v(),f(b,null,k(2,(e=>g("div",ia))),64))])])),_:1},8,["title"])])),_:1},8,["show"])])),_:1},8,["show"]),x(w(R),{show:w(qa),"onUpdate:show":a[10]||(a[10]=e=>C(qa)?qa.value=e:qa=e)},{default:y((()=>[x(w(B),{show:w(Aa)},{default:y((()=>[g("div",ua,[g("div",{class:"closeIcon",onClick:a[8]||(a[8]=e=>{C(qa)?qa.value=!1:qa=!1})},[x(w(F),{size:"40",color:"#333"},{default:y((()=>[x(w(ue))])),_:1})]),g("div",ca,h(w(Ca).name),1),g("div",pa,[g("audio",{id:"audioModal",controls:"",ref_key:"audioModalRef",ref:Ja,src:w(Ca).fileUrl},null,8,ma)]),g("div",{class:"moadlBtn",onClick:a[9]||(a[9]=$((e=>{C(qa)?qa.value=!1:qa=!1,C(ba)?ba.value=w(Ca):ba=w(Ca),C(_a)?_a.value=!0:_a=!0}),["stop"]))},[a[25]||(a[25]=g("img",{src:ee,alt:""},null,-1)),g("span",null,h(e.$t("digitalMan.goCreatWork")),1)])])])),_:1},8,["show"])])),_:1},8,["show"]),x(w(R),{show:w(ll),"onUpdate:show":a[14]||(a[14]=e=>C(ll)?ll.value=e:ll=e)},{default:y((()=>[x(w(B),{show:w(Aa)},{default:y((()=>[g("div",va,[x(l,null,{default:y((()=>[z(h(e.$t("digitalMan.rename")),1)])),_:1}),x(w(D),{ref_key:"formRef",ref:Ka},{default:y((()=>[x(w(N),{path:"name",label:""},{default:y((()=>[x(w(T),{value:w(tl),"onUpdate:value":a[11]||(a[11]=e=>C(tl)?tl.value=e:tl=e),onKeydown:a[12]||(a[12]=S($((()=>{}),["prevent"]),["enter"])),placeholder:e.$t("common.naming")},null,8,["value","placeholder"])])),_:1}),x(w(me),{gutter:[0,24]},{default:y((()=>[x(w(ve),{span:24},{default:y((()=>[g("div",fa,[x(w(P),{strong:"",secondary:"",onClick:a[13]||(a[13]=e=>C(ll)?ll.value=!1:ll=!1),style:{"margin-right":"10px"}},{default:y((()=>[z(h(e.$t("common.cancel")),1)])),_:1}),x(w(P),{type:"primary",onClick:w(il)},{default:y((()=>[z(h(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1},512)])])),_:1},8,["show"])])),_:1},8,["show"]),w(_a)?(v(),q(ae,{key:0,writeShow:w(_a),defaultSound:w(ba)},null,8,["writeShow","defaultSound"])):U("",!0)],64)}}}),[["__scopeId","data-v-8ce5264f"]]);export{ga as default};
