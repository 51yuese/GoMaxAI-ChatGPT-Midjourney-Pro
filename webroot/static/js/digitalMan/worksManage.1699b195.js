import{e as a,p as e,bN as s,k as l,be as o,Z as t,g as i,L as n,r,q as A,I as d,$ as c,ah as u,w as m,x as g,B as v,F as p,E as h,aH as f,a2 as w,G as C,A as k,O as x,y as S,a1 as I,C as b,D as B,am as y,aj as z,z as N,N as T,ak as D,a4 as U,bz as j,by as E,aJ as R,bq as J,aD as M,_ as Q}from"../main-b114ff11.js";import{h as _,a as F,w as G,s as Z,e as P,f as W}from"../writeWork/writeWork.35b91b23.js";import{C as q}from"../Close/Close.83f36086.js";import{N as H,a as X}from"../Col/Col.2ee9adb5.js";import"../knowledge/knowledge.2f04d58b.js";import"../text/text.649a11d3.js";import"../p/p.1f682d37.js";const V={class:"bg-[#fff] dark:bg-[#222325]",style:{"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column",overflow:"hidden"}},K={class:"mainBox"},Y={class:"listBox"},O=["onClick"],L={key:0,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAKDSURBVFiFxZe/a1NRFMc/95EhQ8YODh0CPmjGgA4ZhFbopoNDxfwPDdhB0E0hWUR3hbgKDroprko6BBp4XUsrFBTSodAhhQYifB3eiX1Jk7z7wqseeMu955zv99573vnh8BRJJeAesAHcBlaBG7Z9AvwCesA34Itz7tzHr/MADoGnQB0oGkgXOACGplYE1oCakRsCH4CXzrkjHyKzgIuSmpJGkg4lNSSteNitmO6h2TYlFbOCh5IiSWfmrLDEAQqSdiQNzFfZ17AiqS9pz9tosb/xYfqSKj7KfUm7FnS5iKSS+ezPPZS9eWQnzw18ikRk39WYsGA5y+PaF5AILSaaszZGkhrXBZ7A2jGsMLnYtt/GK9qN8K0lCRQMqz1eKNm1eJ1e0h07gSxeqkuQaBhmCUl1c5iaZMz4jSZlJOlFlmRjyWokqR4A60DPOXfqaT8NVACeA5Gkmo8Dw+oB6wFx7u56gi+SCtCR9MozlrpANSCuagc5EID4Np4AXz10fwCrAXFJHaYoZ5VNSRspOudjAv9VAuJmIlu5TJcesJuiUwJOAuJOZi1H8E/AXefc7xS9m8BxQMzW6/dJkVPgoXNuy7MdqwH7yySitq7KR1978/E3ES2TircSwD8lPfAFTvi4TMW28C5jMdo0IpmDN1GM3iYX/3U5vpgox7bRsmsJ59jmAT5uSFqzNsctWaTrbcn25j61pLLixrGTJwkD72hRU5pQHrflUR7PoSxt+QyjgaTHvn/HlI+C2Q60zIxhMdHS5Wi27ZNsLMlsm82F+Zh7AN/h9BnwiMnh9Ii4pEJcWEImh9P3wOu04TSVQIJICbhP3MJVgTKT4/kxsA98Bz77jud/AJ+hxormfnHwAAAAAElFTkSuQmCC",class:"videoPlay2",alt:""},$={key:1,class:"gerrorBox"},aa={key:2},ea={class:"settingBox"},sa=["onClick"],la={class:"y-pop"},oa=["onClick"],ta=["onClick"],ia={class:"infoBox"},na={class:"span ellipsi"},ra={class:"time"},Aa={class:"cardItem zero"},da={key:0,class:"noDataBox"},ca={class:"modalMain"},ua={class:"modalTitle"},ma={class:"modalVideoBox"},ga={class:"modalMain modalMain2"},va={style:{display:"flex","justify-content":"flex-end"}},pa=["href","download"],ha=Q(a({__name:"worksManage",setup(a){e();const Q=e(),ha=s(),fa=l();o(),t(),i((()=>fa.userInfo.avatar)),i((()=>1===fa.userInfo.lifetimeVip||fa.userInfo.vipExpire&&new Date(fa.userInfo.vipExpire)>new Date));const wa=i((()=>fa.isLogin));n(wa,(a=>{}));let Ca=r(!1),ka=r([]),xa=r(null),Sa=()=>{Z({page:1,size:999}).then((a=>{ka.value=a.data.rows;let e=!1;a.data.rows.forEach((a=>{0===a.status&&(e=!0)})),e&&setTimeout((()=>{Sa()}),3e3)}))};A((()=>{Sa(),_({page:1,size:999}).then((a=>{d.off("updateWriteShow"),d.on("updateWriteShow",(e=>{var s;e&&0==a.data.rows.length||0==(null==(s=a.data.rows[a.data.rows.length-1])?void 0:s.status)?Q.error(c("digitalMan.beforCreatWork1")):Ca.value=e}))}))})),r(!1),r({name:"",introduce:""}),r({name:[{required:!0,message:"请输入姓名"}]}),r(!1),r(!1),r(!1);let Ia=r(!1),ba=r(!1),Ba=r(!1),ya=r(""),za=()=>{ya.value?P({id:xa.value.id,name:ya.value}).then((a=>{Q.success(c("common.changeNameSucc")),Ba.value=!1,Sa()})):Q.error(c("common.PinputName"))};let Na=r(),Ta=r("");return(a,e)=>{const s=u("vue3-video-player"),l=u("n-h3");return m(),g(p,null,[v("div",V,[e[15]||(e[15]=v("div",{style:{width:"100%",height:"84px","box-sizing":"border-box","padding-left":"34px","line-height":"84px","border-bottom":"1px solid #E0E2E9"}},[v("span",{style:{"font-size":"18px","font-weight":"500",color:"#000"}},"我的作品")],-1)),v("div",K,[v("div",Y,[(m(!0),g(p,null,h(S(ka),(a=>(m(),g("div",{class:"cardItem",onClick:e=>{f(xa)?xa.value=a:xa=a,f(Ia)?Ia.value=!0:Ia=!0}},[v("div",{class:w(["mainImg",1!==a.status?"load":""]),style:C(1===a.status?"background: url("+a.cover+") no-repeat center center;background-size: auto 100%;":"")},[1===a.status?(m(),g("img",L)):k("",!0),2===a.status?(m(),g("div",$,e[8]||(e[8]=[v("img",{src:"/static/svg/gerror-f84649ad.svg",width:"80"},null,-1),v("span",null,"作品生成失败",-1)]))):k("",!0),0===a.status?(m(),g("span",aa,"作品生成中...")):k("",!0),0===a.status?(m(),x(S(I),{key:3,size:20,show:!0})):k("",!0),v("div",ea,[b(S(z),{trigger:"hover",placement:"bottom"},{trigger:B((()=>[v("div",{class:"setItem",onClick:y((e=>{return s=a.fileUrl,Ta.value=s,console.log(Na.value),Q.success(c("common.downloading")),void setTimeout((()=>{Na.value.click()}),1e3);var s}),["stop"])},e[9]||(e[9]=[v("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEqSURBVDiNxZChTgNBEIa/4a6uogJRUYHsAyC3zYiSIHBgESgEqoKAKxISRB8AgSTBkiC5ZLeuD8AD1OAQyJ07TK8pNNs2QfC73Zn5/pkf/qhsXVFV99rtdms2m32mevJ1ADMbNRoNgLNUz86mFTfp/wErGTjnboDjPM8PzAwAVW2a2XNVVUUI4W5lA1XtzAcBpiLSjTG+AbtAM8b4ChyKyEdtoqqdBcDMBiIyAgghvACnItIFjoATEXHA0Hv/CCAiIzMbJDPw3j8Bw/otIpfe+/FWGSxBxr1e76ssy9ZkMrlP9dWAmIA8/P5T1XweblyckGXZFKDf71+oanIrVc3LsjxfnpG66Jy7FZGr1PCyqqq6CyFc/wDMHbpmtk86m5hl2bQoivdtjLbSN5ZbaB1WlPIPAAAAAElFTkSuQmCC",alt:""},null,-1)]),8,sa)])),default:B((()=>[e[10]||(e[10]=v("span",null,"下载视频",-1))])),_:2,__:[10]},1024),b(S(z),{style:{"border-radius":"8px",width:"126px",padding:"8px !important"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:B((()=>e[11]||(e[11]=[v("div",{class:"setItem"},[v("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAADCAYAAABI4YUMAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAABhSURBVAiZXcmxDYAgFIThQyo7J+BY5DETjbG30ljIOCYanQUWwUJMCNd8ufxaRHaSB0mdUnoAwDm3GGNOa20fY7wAQERmkjfJoQPg8W0sIuc81TbddwBCOdtflVJrbdPDC+DgGwjkaSS0AAAAAElFTkSuQmCC",alt:""})],-1)]))),default:B((()=>[v("div",la,[v("div",{class:"blo",onClick:y((e=>{f(xa)?xa.value=a:xa=a,f(ya)?ya.value=a.name:ya=a.name,f(Ba)?Ba.value=!0:Ba=!0}),["stop"])},e[12]||(e[12]=[v("div",{class:"edit"},null,-1),v("div",{class:"t t1"},"重命名",-1)]),8,oa),v("div",{class:"blo",onClick:y((e=>{return s=a,void ha.warning({title:c("common.warn"),content:c("common.deleteWarnText1"),positiveText:c("common.confirm"),negativeText:c("common.cancel"),draggable:!0,onPositiveClick:()=>{W({id:s.id}).then((a=>{200===a.code&&(Q.success(c("common.deleteSuccess")),Sa())}))},onNegativeClick:()=>{Q.error(c("common.cancel"))}});var s}),["stop"])},e[13]||(e[13]=[v("div",{class:"dele"},null,-1),v("div",{class:"t t2"},"删除",-1)]),8,ta)])])),_:2},1024)])],6),v("div",ia,[v("div",na,N(a.name||"作品"+a.id),1),v("div",ra,N(a.createdAt),1)])],8,O)))),256)),(m(),g(p,null,h(4,(a=>v("div",Aa))),64))]),S(ka)&&0==S(ka).length?(m(),g("div",da,[e[14]||(e[14]=v("div",null,"你没有任何作品哦",-1)),v("div",{class:"btnBox",onClick:e[0]||(e[0]=a=>{f(Ca)?Ca.value=!0:Ca=!0})},"去创作")])):k("",!0)])]),b(S(D),{show:S(Ia),"onUpdate:show":e[3]||(e[3]=a=>f(Ia)?Ia.value=a:Ia=a)},{default:B((()=>[b(S(I),{show:S(ba)},{default:B((()=>[v("div",ca,[v("div",{class:"closeIcon",onClick:e[1]||(e[1]=a=>{f(Ia)?Ia.value=!1:Ia=!1})},[b(S(T),{size:"40",color:"#333"},{default:B((()=>[b(S(q))])),_:1})]),v("div",ua,N(S(xa).name),1),v("div",ma,[b(s,{src:S(xa).fileUrl},null,8,["src"])]),v("div",{class:"moadlBtn",onClick:e[2]||(e[2]=y((a=>{f(Ia)?Ia.value=!1:Ia=!1,f(Ca)?Ca.value=!0:Ca=!0}),["stop"]))},e[16]||(e[16]=[v("img",{src:F,alt:""},null,-1),v("span",null,"去创建作品",-1)]))])])),_:1},8,["show"])])),_:1},8,["show"]),b(S(D),{show:S(Ba),"onUpdate:show":e[7]||(e[7]=a=>f(Ba)?Ba.value=a:Ba=a)},{default:B((()=>[b(S(I),{show:S(ba)},{default:B((()=>[v("div",ga,[b(l,null,{default:B((()=>e[17]||(e[17]=[U(" 重命名 ")]))),_:1,__:[17]}),b(S(j),{ref:"formRef"},{default:B((()=>[b(S(E),{path:"name",label:""},{default:B((()=>[b(S(R),{value:S(ya),"onUpdate:value":e[4]||(e[4]=a=>f(ya)?ya.value=a:ya=a),onKeydown:e[5]||(e[5]=J(y((()=>{}),["prevent"]),["enter"])),placeholder:"取一个独一无二的名字"},null,8,["value"])])),_:1}),b(S(H),{gutter:[0,24]},{default:B((()=>[b(S(X),{span:24},{default:B((()=>[v("div",va,[b(S(M),{strong:"",secondary:"",onClick:e[6]||(e[6]=a=>f(Ba)?Ba.value=!1:Ba=!1),style:{"margin-right":"10px"}},{default:B((()=>e[18]||(e[18]=[U(" 取消 ")]))),_:1,__:[18]}),b(S(M),{type:"primary",onClick:S(za)},{default:B((()=>e[19]||(e[19]=[U(" 确认 ")]))),_:1,__:[19]},8,["onClick"])])])),_:1})])),_:1})])),_:1},512)])])),_:1},8,["show"])])),_:1},8,["show"]),S(Ca)?(m(),x(G,{key:0,writeShow:S(Ca)},null,8,["writeShow"])):k("",!0),v("a",{href:S(Ta),download:S(Ta),ref_key:"downloadLink",ref:Na},null,8,pa)],64)}}}),[["__scopeId","data-v-cd4f6913"]]);export{ha as default};
