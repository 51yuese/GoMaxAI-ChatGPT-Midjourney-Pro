import{e,p as l,bR as a,k as s,ba as t,Z as i,g as o,L as n,r,q as d,I as u,ag as c,w as v,x as p,B as f,C as m,D as g,y as h,aG as w,O as x,A as b,F as y,a7 as k,E as _,a0 as A,z as C,al as U,ai as B,a8 as I,c6 as D,a3 as z,aC as E,bE as L,bD as N,aI as S,bm as j,P as F,Q as J,bG as R,bJ as M,N as T,aj as Z,v as P,_ as H}from"../main-bf8e7d49.js";import{_ as V,a as W}from"../tipIcon1/tipIcon1.9d6e63f8.js";import{_ as Y}from"../drop3icon/drop3icon.8e32d6d7.js";import{g as Q,w as K,h as X,a as G,b as q,_ as O,C as $,c as ee,d as le,e as ae,f as se,i as te}from"../writeWork/writeWork.980b91e6.js";import{n as ie}from"../knowledge/knowledge.4f347d65.js";import{N as oe,a as ne}from"../DrawerContent/DrawerContent.683efb2d.js";import{N as re,a as de}from"../Col/Col.d7596a37.js";import{N as ue}from"../text/text.a53de645.js";import{N as ce}from"../p/p.0300e5ff.js";const ve={class:"bg-[#fff] dark:bg-[#222325]",style:{"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column",overflow:"hidden",position:"relative"}},pe={class:"mainBox"},fe={class:"listBox"},me=["onClick"],ge=["src"],he={key:1,class:"mainImg load"},we={class:"infoBox"},xe={class:"span ellipsi"},be=["onClick"],ye={key:1,class:"btnBox",style:{width:"0"}},ke={class:"y-pop"},_e=["onClick"],Ae=["onClick"],Ce={class:"cardItem zero"},Ue={key:0,class:"noDataBox",style:{"margin-top":"-200px"}},Be={class:"listBox"},Ie=["onClick"],De=["src"],ze={class:"infoBox"},Ee={class:"span ellipsi"},Le=["onClick"],Ne={class:"y-pop"},Se=["onClick"],je={class:"cardItem zero"},Fe={key:0,class:"noDataBox"},Je={class:"slidTitle"},Re={class:"videoInfo"},Me={class:"zero"},Te={class:"uploadBox",style:{height:"188px",width:"100%","margin-bottom":"18px"}},Ze={class:"slidTitle"},Pe={key:0,class:"video2Box"},He={class:"soundCheck"},Ve={class:"exampleVideoList"},We=["onMouseenter","onMouseleave"],Ye=["src","poster","autoplay"],Qe={class:"bbox"},Ke=["onClick"],Xe={class:"videoItem zero"},Ge={style:{display:"flex","align-items":"center"}},qe={style:{"font-size":"14px",color:"#3D3D3D",transform:"translateY(2px)",display:"block"}},Oe={style:{display:"flex","justify-content":"flex-end","align-items":"center"}},$e={style:{"font-size":"12px",color:"#000","margin-right":"14px"}},el={class:"modalMain"},ll={class:"modalTitle"},al={class:"modalVideoBox"},sl={class:"modalMain modalMain2"},tl={style:{display:"flex","justify-content":"flex-end"}},il=H(e({__name:"human",setup(e){l();const H=l(),il=a(),ol=s();t(),i(),o((()=>ol.userInfo.avatar)),o((()=>1===ol.userInfo.lifetimeVip||ol.userInfo.vipExpire&&new Date(ol.userInfo.vipExpire)>new Date));const nl=o((()=>ol.isLogin));n(nl,(e=>{}));let rl=r(!1),dl=r(null),ul=r([]),cl=r(null),vl=()=>{X({page:1,size:999}).then((e=>{ul.value=e.data.rows;let l=!1;e.data.rows.forEach((e=>{0===e.status&&(l=!0)})),l&&setTimeout((()=>{vl()}),3e3)}))},pl=r([]),fl=()=>{G({page:1,size:999,type:1}).then((e=>{pl.value=e.data.rows}))},ml=r({remainCount:0,freeCount:0,useIntegrate:0}),gl=r([]);d((()=>{Q().then((e=>{gl.value=e.data.video})),vl(),fl(),q({}).then((e=>{ml.value=e.data}))}));let hl=()=>{xl.value={name:"",description:"",videoUrl:""},wl.value=!0},wl=r(!1),xl=r({name:"",description:"",videoUrl:""}),bl=r([]),yl=()=>{xl.value.videoUrl="",bl.value=[]},kl=(e,l)=>{xl.value.videoUrl=e.fileUrl,bl.value=[{batchId:"adc62b38",fullPath:e.fileUrl,id:"adb0c823",name:"示例"+(l+1),percentage:0,status:"pending",thumbnailUrl:null,type:"video/mp4",url:null}]},_l=r({name:[{required:!0,message:"请输入姓名",trigger:"change"}],videoUrl:[{required:!0,message:"请上传视频",trigger:"change"}]}),Al=r(!1),Cl=r(!1),Ul=r(!1),Bl=r(!1);const Il=["mp4","avi","mov","mkv","flv","wmv","webm"];function Dl({file:e,fileList:l}){return new Promise(((l,a)=>{const{size:s,type:t,name:i}=e.file;return function(e){const l=e.split(".").pop().toLowerCase();return Il.includes(l)}(i)?(console.log("可能是视频文件（基于扩展名）"),s>512e6?(H.error("视频大小不能超过500M"),l(!1)):void l(!0)):(H.error("请上传视频文件"),l(!1))}))}const zl=e=>{if(Bl.value=!0,"finished"===e.file.status||"removed"===e.file.status)return void(Bl.value=!1);const l=e.file.type.split("/")[1];if("pending"===e.file.status&&Il.includes(l)){const a=new FormData;a.append("filename",e.file.id+"."+l),a.append("file",e.file.file),a.append("dir","human-upload"),ie(a).then((l=>{Bl.value=!1,xl.value.videoUrl=l.data.data.dataPath,bl.value=e.fileList,console.log(e.fileList,"ev.fileList")}))}};let El=r(!1),Ll=r(!1);const Nl=r();let Sl=r(),jl=e=>{var l;e.preventDefault(),null==(l=Sl.value)||l.validate((e=>{if(e)console.log(e),H.error(e[0][0].message);else{if(!Al.value)return void H.error("请勾选已阅读并同意《使用者承诺须知》");Ul.value=!0,le(xl.value).then((e=>{Ul.value=!1,xl.value={name:"",description:"",videoUrl:""},Al.value=!1,wl.value=!1,vl()}))}}))},Fl=()=>{P({keys:["commitment"]}).then((e=>{il.info({title:"使用者承诺须知",content:e.data,positiveText:"我已知晓，同意",negativeText:"取 消",draggable:!0})}))},Jl=r(!1),Rl=r(""),Ml=()=>{Rl.value?(Ll.value=!0,ae({id:cl.value.id,name:Rl.value}).then((e=>{Ll.value=!0,H.success("改名成功"),Jl.value=!1,vl()}))):H.error("请输入名称")};return u.on("updateWriteShow",(e=>{rl.value=e})),(e,l)=>{const a=c("vue3-video-player"),s=c("n-h3");return v(),p(y,null,[f("div",ve,[l[25]||(l[25]=f("div",{style:{width:"100%",height:"84px","box-sizing":"border-box","padding-left":"34px","line-height":"84px","border-bottom":"1px solid #E0E2E9"}},[f("span",{style:{"font-size":"18px","font-weight":"500",color:"#000"}},"数字人")],-1)),f("div",pe,[m(h(I),{type:"bar",class:"listNtabsHuman",animated:""},{default:g((()=>[m(h(k),{name:"listp1",tab:"我的数字人"},{default:g((()=>[f("div",fe,[f("div",{class:"cardItem",onClick:l[0]||(l[0]=e=>h(hl)())},l[16]||(l[16]=[f("div",{class:"dashBox"},[f("img",{src:V,style:{"margin-bottom":"8px"},alt:""}),f("span",null,"快速创建数字人")],-1)])),(v(!0),p(y,null,_(h(ul),(e=>(v(),p("div",{class:"cardItem",onClick:l=>{w(cl)?cl.value=e:cl=e,w(El)?El.value=!0:El=!0}},[1===e.status?(v(),p("img",{key:0,class:"mainImg",src:e.cover,alt:""},null,8,ge)):(v(),p("div",he,[l[17]||(l[17]=f("span",null,"数字人生成中...",-1)),m(h(A),{size:20,show:!0})])),f("div",we,[f("div",xe,C(e.name),1),1===e.status?(v(),p("div",{key:0,class:"btnBox",onClick:U((l=>{w(rl)?rl.value=!0:rl=!0,w(dl)?dl.value=e:dl=e}),["stop"])},"去创作",8,be)):(v(),p("div",ye))]),m(h(B),{style:{"border-radius":"8px",width:"126px"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:g((()=>l[18]||(l[18]=[f("div",{class:"btn"},[f("img",{src:Y,alt:""})],-1)]))),default:g((()=>[f("div",ke,[f("div",{class:"blo",onClick:U((l=>{w(cl)?cl.value=e:cl=e,w(Rl)?Rl.value=e.name:Rl=e.name,w(Jl)?Jl.value=!0:Jl=!0}),["stop"])},l[19]||(l[19]=[f("div",{class:"edit"},null,-1),f("div",{class:"t t1"},"重命名",-1)]),8,_e),f("div",{class:"blo",onClick:U((l=>{return a=e,void il.warning({title:"警告",content:"删除后无法恢复，确认删除吗？",positiveText:"确定",negativeText:"取消",draggable:!0,onPositiveClick:()=>{se({id:a.id}).then((e=>{200===e.code&&(H.success("删除成功"),vl())}))},onNegativeClick:()=>{H.error("取消")}});var a}),["stop"])},l[20]||(l[20]=[f("div",{class:"dele"},null,-1),f("div",{class:"t t2"},"删除",-1)]),8,Ae)])])),_:2},1024)],8,me)))),256)),(v(),p(y,null,_(5,(e=>f("div",Ce))),64))]),h(ul)&&0==h(ul).length?(v(),p("div",Ue,[l[21]||(l[21]=f("div",null,"你没有任何作品哦",-1)),f("div",{class:"btnBox",onClick:l[1]||(l[1]=e=>{w(rl)?rl.value=!0:rl=!0})},"去创作")])):b("",!0)])),_:1}),m(h(k),{name:"listp2",tab:"我的收藏"},{default:g((()=>[f("div",Be,[(v(!0),p(y,null,_(h(pl),(e=>(v(),p("div",{class:"cardItem",onClick:l=>{w(cl)?cl.value=e:cl=e,w(El)?El.value=!0:El=!0}},[f("img",{class:"mainImg",src:e.cover,alt:""},null,8,De),f("div",ze,[f("div",Ee,C(e.name),1),f("div",{class:"btnBox",onClick:U((l=>{w(rl)?rl.value=!0:rl=!0,w(dl)?dl.value=e:dl=e}),["stop"])},"去创作",8,Le)]),m(h(B),{style:{"border-radius":"8px",width:"126px"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:g((()=>l[22]||(l[22]=[f("div",{class:"btn"},[f("img",{src:Y,alt:""})],-1)]))),default:g((()=>[f("div",Ne,[f("div",{class:"blo",onClick:U((l=>{return a=e,void il.warning({title:"警告",content:"确认取消收藏吗？",positiveText:"确定",negativeText:"取消",draggable:!0,onPositiveClick:()=>{te({id:a.id}).then((e=>{200===e.code&&(H.success("取消成功"),fl())}))},onNegativeClick:()=>{H.error("取消")}});var a}),["stop"])},l[23]||(l[23]=[f("div",{class:"dele"},null,-1),f("div",{class:"t t2"},"取消收藏",-1)]),8,Se)])])),_:2},1024)],8,Ie)))),256)),(v(),p(y,null,_(5,(e=>f("div",je))),64))]),h(pl)&&0==h(pl).length?(v(),p("div",Fe,l[24]||(l[24]=[f("div",null,"你没有任何收藏哦",-1),f("div",{class:"btnBox"},"去收藏",-1)]))):b("",!0)])),_:1})])),_:1})])]),m(h(ne),{show:h(wl),"onUpdate:show":l[8]||(l[8]=e=>w(wl)?wl.value=e:wl=e),width:720},{default:g((()=>[m(h(A),{show:h(Ul),"content-style":{height:"100%"},style:{height:"100%",width:"100%"}},{default:g((()=>[m(h(oe),{title:"视频生成数字人",closable:""},{footer:g((()=>[m(h(re),{gutter:[0,24]},{default:g((()=>[m(h(de),{span:12,style:{display:"flex","align-items":"center"}},{default:g((()=>[f("div",Ge,[m(h(D),{checked:h(Al),"onUpdate:checked":l[7]||(l[7]=e=>w(Al)?Al.value=e:Al=e)},{default:g((()=>[f("span",qe,[l[38]||(l[38]=z("我已阅读并同意 ")),f("span",{style:{color:"#574FFE"},onClick:l[6]||(l[6]=U((e=>h(Fl)()),["stop"]))},"《使用者承诺须知》")])])),_:1},8,["checked"])])])),_:1}),m(h(de),{span:12},{default:g((()=>[f("div",Oe,[f("span",$e,"需消耗"+C(h(ml).useIntegrate)+"积分",1),m(h(E),{style:{"margin-right":"10px"}},{default:g((()=>l[39]||(l[39]=[z("取 消")]))),_:1,__:[39]}),m(h(E),{color:"#574FFE","text-color":"#fff",onClick:h(jl)},{default:g((()=>l[40]||(l[40]=[z(" 提 交 ")]))),_:1,__:[40]},8,["onClick"])])])),_:1})])),_:1})])),default:g((()=>[m(h(L),{ref_key:"formRef",ref:Sl,model:h(xl),rules:h(_l)},{default:g((()=>[m(h(N),{path:"name",label:"姓名"},{default:g((()=>[m(h(S),{value:h(xl).name,"onUpdate:value":l[2]||(l[2]=e=>h(xl).name=e),onKeydown:l[3]||(l[3]=j(U((()=>{}),["prevent"]),["enter"])),placeholder:"为数字人取一个名字吧"},null,8,["value"])])),_:1}),m(h(N),{first:"",path:"description",label:"自我介绍"},{default:g((()=>[m(h(S),{value:h(xl).description,"onUpdate:value":l[4]||(l[4]=e=>h(xl).description=e),placeholder:"数字人的自我介绍",type:"textarea",autosize:{minRows:3,maxRows:5}},null,8,["value"])])),_:1}),F(f("div",Je,l[26]||(l[26]=[f("span",null,"上传视频",-1),f("img",{src:W,style:{"margin-left":"7px",transform:"translateY(-1px)"},alt:""},null,-1)]),512),[[J,!h(xl).videoUrl]]),F(f("div",Re,[l[27]||(l[27]=f("div",{style:{width:"100%","font-weight":"600"}},"视频要求",-1)),l[28]||(l[28]=f("div",null,[f("span",null,"视频方向："),f("span",{class:"sspan"},"横向或纵向")],-1)),l[29]||(l[29]=f("div",null,[f("span",null,"视频时长："),f("span",{class:"sspan"},"5秒~30分钟")],-1)),l[30]||(l[30]=f("div",null,[f("span",null,"分辨率："),f("span",{class:"sspan"},"360p~4k")],-1)),l[31]||(l[31]=f("div",null,[f("span",null,"文件大小："),f("span",{class:"sspan"},"小于500MB")],-1)),(v(),p(y,null,_(2,(e=>f("div",Me))),64))],512),[[J,!h(xl).videoUrl]]),m(h(N),{path:"videoUrl"},{default:g((()=>[f("div",Te,[m(h(A),{show:h(Bl)},{default:g((()=>[m(h(R),{"directory-dnd":"",action:"",max:1,"default-upload":!1,"file-list":h(bl),onRemove:h(yl),onBeforeUpload:Dl,onChange:zl,style:{height:"188px",margin:"0 auto"}},{default:g((()=>[m(h(M),null,{default:g((()=>[l[34]||(l[34]=f("img",{src:O,style:{margin:"0 auto 12px"},alt:""},null,-1)),m(h(ue),{style:{"font-size":"16px"}},{default:g((()=>l[32]||(l[32]=[z(" 请上传一段视频，作为驱动数字人的底版视频 ")]))),_:1,__:[32]}),m(h(ce),{depth:"3",style:{margin:"8px 0 0 0"}},{default:g((()=>l[33]||(l[33]=[z(" 将文件拖动到此处，或点击此区域上传 ")]))),_:1,__:[33]})])),_:1,__:[34]})])),_:1},8,["file-list","onRemove"])])),_:1},8,["show"])])])),_:1})])),_:1},8,["model","rules"]),F(f("div",Ze,l[35]||(l[35]=[f("span",{style:{"font-size":"18px","font-weight":"600"}},"上传视频",-1),f("img",{src:W,style:{"margin-left":"7px",transform:"translateY(-1px)"},alt:""},null,-1)]),512),[[J,h(xl).videoUrl]]),h(xl).videoUrl?(v(),p("div",Pe,[m(a,{src:h(xl).videoUrl},null,8,["src"])])):b("",!0),F(f("div",He,[m(h(D),{checked:h(Cl),"onUpdate:checked":l[5]||(l[5]=e=>w(Cl)?Cl.value=e:Cl=e)},{default:g((()=>l[36]||(l[36]=[f("span",{style:{"font-size":"14px",color:"#3D3D3D",transform:"translateY(2px)",display:"block"}},[z("同时克隆视频中的人声"),f("span",{style:{color:"#A5A5A5"}},"（人声质量较差时可能会克隆失败）")],-1)]))),_:1,__:[36]},8,["checked"])],512),[[J,h(xl).videoUrl]]),l[41]||(l[41]=f("div",{class:"exampleTitle"},[f("span",null,"示例视频"),f("span",{class:"gspan"},"暂时没有视频素材？使用我们的示例素材来感受效果吧！")],-1)),f("div",Ve,[(v(!0),p(y,null,_(h(gl),((e,a)=>(v(),p("div",{class:"videoItem",onMouseenter:l=>(e=>{if(Nl.value&&Nl.value.id==e.id)return;if(!e.fileUrl)return;const l=document.querySelector(`video[src="${e.fileUrl}"]`);l.play(),l.loop=!0,Nl.value=e})(e),onMouseleave:l=>(e=>{if(!e.fileUrl)return;document.querySelector(`video[src="${e.fileUrl}"]`).pause(),Nl.value=null})(e)},[l[37]||(l[37]=f("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAGfSURBVDiNvZXBSxtBFMZ/3zQ0BnOQ0ENSu4gEPHhoxVMLlp5LLv63ngsFD4oED94ChmjNKXiwjZbC18NMZbvsbiJp/U47vDe/Nzvz5htRIdtNYAvoARvAWgrdA7fADTCW9FA2XyXABrAL9IEpMAFmwDyltIAOkAFdYARcSPpVCbbdBj4l0FDSnBrZbgF7qdAXSXdlSW3bh7Z36mAVBXbS3HYx0LA9KEJty/a27ddLwgdpK+NW2H4LrEs6LiS/I+43wDVwKulHDfwD8F3SeUin3weGJbmvct+bwGfb2zULHwJ9281AbKnpooNKegm8t/0xLegvJcYU2ArEPp0sAc3rDTCwnZXEJkAvEJt/9kQwQBM4sH3w58CSZsBGIN6oZbahShmwnxvPgbWwArBWgXj3WyswJsBZbtwC7htEQ+kAlf1ZoQfgRFLx4DvAbYPoUhlw9cRVnlQ4WwbcBGAMdJOhLNJP4FjS1zJoYnSBcUgJI6JLFZVvw2/AkaTLmsJ7wOixaI0JvbDdt91b9CtFE8oH/qlt/jejf56nqVBgpcf0N+Ho70/ZEkKxAAAAAElFTkSuQmCC",class:"videoPlay1",alt:""},null,-1)),f("video",{src:e.fileUrl,poster:e.fileUrl,class:"item-file",style:{width:"100%",height:"118px","object-fit":"cover"},autoplay:Nl.value&&Nl.value.id==e.id},null,8,Ye),f("div",Qe,[f("div",{class:"sbtn",onClick:l=>h(kl)(e,a)},"选用",8,Ke)])],40,We)))),256)),(v(),p(y,null,_(2,(e=>f("div",Xe))),64))])])),_:1,__:[41]})])),_:1},8,["show"])])),_:1},8,["show"]),m(h(Z),{show:h(El),"onUpdate:show":l[11]||(l[11]=e=>w(El)?El.value=e:El=e)},{default:g((()=>[m(h(A),{show:h(Ll)},{default:g((()=>[f("div",el,[f("div",{class:"closeIcon",onClick:l[9]||(l[9]=e=>{w(El)?El.value=!1:El=!1})},[m(h(T),{size:"40",color:"#333"},{default:g((()=>[m(h($))])),_:1})]),f("div",ll,C(h(cl).name),1),f("div",al,[m(a,{src:h(cl).fileUrl},null,8,["src"])]),f("div",{class:"moadlBtn",onClick:l[10]||(l[10]=U((e=>{w(El)?El.value=!1:El=!1,w(dl)?dl.value=h(cl):dl=h(cl),w(rl)?rl.value=!0:rl=!0}),["stop"]))},l[42]||(l[42]=[f("img",{src:ee,alt:""},null,-1),f("span",null,"去创建作品",-1)]))])])),_:1},8,["show"])])),_:1},8,["show"]),m(h(Z),{show:h(Jl),"onUpdate:show":l[15]||(l[15]=e=>w(Jl)?Jl.value=e:Jl=e)},{default:g((()=>[m(h(A),{show:h(Ll)},{default:g((()=>[f("div",sl,[m(s,null,{default:g((()=>l[43]||(l[43]=[z(" 重命名 ")]))),_:1,__:[43]}),m(h(L),{ref_key:"formRef",ref:Sl},{default:g((()=>[m(h(N),{path:"name",label:""},{default:g((()=>[m(h(S),{value:h(Rl),"onUpdate:value":l[12]||(l[12]=e=>w(Rl)?Rl.value=e:Rl=e),onKeydown:l[13]||(l[13]=j(U((()=>{}),["prevent"]),["enter"])),placeholder:"取一个独一无二的名字"},null,8,["value"])])),_:1}),m(h(re),{gutter:[0,24]},{default:g((()=>[m(h(de),{span:24},{default:g((()=>[f("div",tl,[m(h(E),{strong:"",secondary:"",onClick:l[14]||(l[14]=e=>w(Jl)?Jl.value=!1:Jl=!1),style:{"margin-right":"10px"}},{default:g((()=>l[44]||(l[44]=[z(" 取消 ")]))),_:1,__:[44]}),m(h(E),{type:"primary",onClick:h(Ml)},{default:g((()=>l[45]||(l[45]=[z(" 确认 ")]))),_:1,__:[45]},8,["onClick"])])])),_:1})])),_:1})])),_:1},512)])])),_:1},8,["show"])])),_:1},8,["show"]),h(rl)?(v(),x(K,{key:0,writeShow:h(rl),defaultHuman:h(dl)},null,8,["writeShow","defaultHuman"])):b("",!0)],64)}}}),[["__scopeId","data-v-0b698004"]]);export{il as default};
