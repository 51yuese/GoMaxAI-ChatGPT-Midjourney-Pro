import{e as a,p as s,bV as e,k as t,ar as l,g as i,r as n,Z as c,L as u,q as r,w as d,x as o,B as v,C as g,D as p,y as m,bJ as f,z as b,Y as x,a4 as I,bs as k,A as y,H as F,N as $,bL as h,aJ as w,bq as C,ak as E,e6 as _,e7 as B,e8 as D,e9 as z,$ as N,ce as W,ea as S,_ as j}from"../main-4156cf5e.js";const L={class:"personCenterMy"},V={class:"topInfoBox"},X=["src"],M={class:"userInfoBox"},Y={class:"nickName"},q={key:0},A={key:0},P={key:1},U={class:"lineBox"},J={class:"bigBox"},K={class:"c"},H={class:"r"},O={class:"c"},R={class:"r"},Z={class:"bItem"},G={class:"c"},Q={class:"r"},T={class:"c"},aa={class:"r"},sa={class:"lineBox"},ea={class:"bigBox"},ta={class:"c"},la={class:"r"},ia={class:"c"},na={class:"r"},ca={class:"c"},ua={class:"r"},ra={class:"c"},da={class:"r"},oa={class:"lineBox"},va={class:"bigBox"},ga={class:"bItem"},pa={class:"c"},ma={class:"r"},fa={class:"bItem"},ba={class:"c"},xa={class:"r"},Ia={class:"dialog dark:bg-[#19191B] bg-[#F8F9F9]"},ka={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"40px"}},ya={class:"text-[17px] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{"font-weight":"bold"}},Fa={class:"input_card"},$a={class:"dark:bg-[#111113] bg-[#FFF] dark:text-[#6C6E79] text-[#8B8C8C] text-[15px]",style:{"border-radius":"12px"}},ha={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0 50px","margin-top":"24px","margin-bottom":"12px"}},wa=j(a({__name:"my",setup(a){s();const j=s();e();const wa=t(),Ca=l(),Ea=i((()=>wa.userInfo)),_a=i((()=>wa.userInfo.vipLeavelId)),Ba=i((()=>wa.vipLeavel)),Da=i((()=>wa.userInfo));console.log("user",Da.value);const za=n(!1),Na=n(""),Wa=n(""),Sa=n("");c(),i((()=>wa.userInfo.avatar));const ja=i((()=>1===wa.userInfo.lifetimeVip||wa.userInfo.vipExpire&&new Date(wa.userInfo.vipExpire)>new Date)),La=i((()=>wa.isLogin));function Va(){Na.value=Da.value.nickname,Wa.value=N("setting.nickName"),za.value=!0}function Xa(){Na.value=Da.value.username,Wa.value=N("setting.userName"),za.value=!0}function Ma(a){const s=new FormData,e=a.file.type.split("/")[1];s.append("filename",a.file.id+"."+e),s.append("file",a.file.file),s.append("dir","user-avatar-upload"),W(s).then((async a=>{if(200!=a.code)return j.error(a.data);Sa.value=a.data,await qa({avatar:a.data})}))}async function Ya(){if(""==Na.value||0==Na.value.length)return j.error(N("setting.inputde")+Wa.value+N("setting.notKong"));"用户名"==Wa.value?await qa({username:Na.value}):await qa({nickname:Na.value})}async function qa(a){const s=await S(a);if(200!=s.code)return j.error(s.data);j.success(s.data),await wa.getUserInfo(),za.value=!1}return u(La,(a=>{})),r((()=>{})),(a,s)=>(d(),o("div",L,[v("div",V,[g(m(f),{accept:".jpg,.jpeg,.png",action:"","on-change":Ma,"default-upload":!1,"show-file-list":!0,style:{width:"50px","margin-right":"20px",cursor:"pointer",height:"50px"}},{default:p((()=>[v("img",{width:"50px",height:"50px",src:""==Sa.value?Da.value.avatar:Sa.value,style:{"border-radius":"50%",width:"50px",height:"50px"}},null,8,X)])),_:1}),v("div",M,[v("div",Y,b(m(wa).userInfo.nickname),1),v("div",{class:"timeInfo",style:{cursor:"pointer"},onClick:s[0]||(s[0]=a=>m(x).push("/personCenter/vip"))},[ja.value?(d(),o("div",q,[I(b(1==Ea.value.lifetimeVip?a.$t("setting.yongjiu"):m(k)(Ea.value.vipExpire,"YYYY-MM-DD")+a.$t("setting.daoqi"))+" ",1),_a.value?(d(),o("span",A,b(Ba.value.filter((a=>a.id==_a.value))[0].dictName),1)):y("",!0)])):(d(),o("div",P,b(a.$t("setting.openVip2")),1))])])]),v("div",U,[s[9]||(s[9]=v("div",{class:"line"},null,-1)),v("span",null,b(a.$t("setting.accountManage")),1),s[10]||(s[10]=v("div",{class:"line",style:{flex:"1"}},null,-1))]),v("div",J,[v("div",{class:"bItem",onClick:Va},[s[11]||(s[11]=v("img",{src:"/static/svg/bItem1-4e081bfc.svg",alt:""},null,-1)),v("span",K,b(a.$t("setting.editNickname")),1),v("span",H,[I(b(m(wa).userInfo.nickname)+" ",1),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])]),v("div",{class:"bItem",onClick:Xa},[s[12]||(s[12]=v("img",{src:"/static/svg/bItem2-927dfb9a.svg",alt:""},null,-1)),v("span",O,b(a.$t("setting.userName")),1),v("span",R,[I(b(m(wa).userInfo.username)+" ",1),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])]),v("div",Z,[s[13]||(s[13]=v("img",{src:"/static/svg/bItem3-bea96338.svg",alt:""},null,-1)),v("span",G,b(a.$t("setting.userID")),1),v("span",Q,b(m(wa).userInfo.id),1)]),v("div",{class:"bItem",onClick:s[1]||(s[1]=a=>{var s;return m(Ca).updateBindwxDialog(1!=(null==(s=Da.value)?void 0:s.isBindWx))})},[s[14]||(s[14]=v("img",{src:"/static/svg/bItem4-f2a1524f.svg",alt:""},null,-1)),v("span",T,b(a.$t("setting.WXbangdin")),1),v("span",aa,[I(b(1==Da.value.isBindWx?a.$t("setting.WXbangStatus1"):a.$t("setting.WXbangStatus2"))+" ",1),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])])]),v("div",sa,[s[15]||(s[15]=v("div",{class:"line"},null,-1)),v("span",null,b(a.$t("setting.accountSafe")),1),s[16]||(s[16]=v("div",{class:"line",style:{flex:"1"}},null,-1))]),v("div",ea,[v("div",{class:"bItem",onClick:s[2]||(s[2]=a=>m(wa).updateModifyPwdDialog(!0))},[s[17]||(s[17]=v("img",{src:"/static/svg/bItem5-0236f99d.svg",alt:""},null,-1)),v("span",ta,b(a.$t("setting.editPSW")),1),v("span",la,[g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])]),v("div",{class:"bItem",onClick:s[3]||(s[3]=a=>m(wa).updatePhoneDialog(!0))},[s[18]||(s[18]=v("img",{src:"/static/svg/bItem6-100bd90e.svg",alt:""},null,-1)),v("span",ia,b(a.$t("setting.phoneNum")),1),v("span",na,[I(b(Da.value.phone||a.$t("setting.WXbangStatus2"))+" ",1),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])]),v("div",{class:"bItem",onClick:s[4]||(s[4]=a=>m(wa).updateEmailDialog(!0))},[s[19]||(s[19]=v("img",{src:"/static/svg/bItem7-e8cd89f0.svg",alt:""},null,-1)),v("span",ca,b(a.$t("setting.bangdinEmail")),1),v("span",ua,[I(b(null==Da.value.email?a.$t("setting.WXbangStatus2"):Da.value.email)+" ",1),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])]),v("div",{class:"bItem",onClick:s[5]||(s[5]=a=>m(wa).updateLogoutDialog(!0))},[s[20]||(s[20]=v("img",{src:"/static/svg/bItem8-288203d8.svg",alt:""},null,-1)),v("span",ra,b(a.$t("setting.cancelAccount")),1),v("span",da,[I(b(a.$t("setting.applyCancel"))+" ",1),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])])]),v("div",oa,[s[21]||(s[21]=v("div",{class:"line"},null,-1)),v("span",null,b(a.$t("setting.other")),1),s[22]||(s[22]=v("div",{class:"line",style:{flex:"1"}},null,-1))]),v("div",va,[v("div",ga,[s[24]||(s[24]=v("img",{src:"/static/svg/bItem9-93f00ea2.svg",alt:""},null,-1)),v("span",pa,b(a.$t("setting.VERSION")),1),v("span",ma,[s[23]||(s[23]=I("V9.0.2 ")),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])]),v("div",fa,[s[25]||(s[25]=v("img",{src:"/static/svg/bItem10-b5b25376.svg",alt:""},null,-1)),v("span",ba,b(a.$t("setting.contactUs")),1),v("span",xa,[I(b(a.$t("setting.WXcustomService"))+" ",1),g(m($),{size:"16"},{default:p((()=>[g(m(F))])),_:1})])])]),g(m(E),{show:za.value,"mask-closable":!1},{default:p((()=>[v("div",Ia,[v("div",ka,[v("div",ya,b(a.$t("common.update")+Wa.value),1),v("div",{class:"close_btn",onClick:s[6]||(s[6]=a=>za.value=!1)},s[26]||(s[26]=[v("img",{src:h},null,-1)]))]),v("div",Fa,[v("div",$a,[g(m(w),{value:Na.value,"onUpdate:value":s[7]||(s[7]=a=>Na.value=a),placeholder:a.$t("setting.inputNew1")+Wa.value,onKeyup:C(Ya,["enter"])},null,8,["value","placeholder"])])]),v("div",ha,[v("div",{class:"dark:bg-[#222325] bg-[#F0F0F0] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{width:"45%","text-align":"center",padding:"12px 0","border-radius":"12px",cursor:"pointer"},onClick:s[8]||(s[8]=a=>za.value=!1)},b(a.$t("common.cancel")),1),v("div",{class:"dark:bg-[#1E6953] bg-[#10A37F] dark:text-[#FFFFFF] text-[#FFFFFF]",style:{width:"45%","text-align":"center",padding:"12px 0","border-radius":"12px",cursor:"pointer"},onClick:Ya},b(a.$t("common.confirm")),1)])])])),_:1},8,["show"]),g(_),g(B),g(D),g(z)]))}}),[["__scopeId","data-v-c1a89ad6"]]);export{wa as default};
