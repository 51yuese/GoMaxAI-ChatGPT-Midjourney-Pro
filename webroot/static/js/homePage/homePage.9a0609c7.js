import{u as e,c as a,a as t,b as l,d as i,e as s,f as n,r as o,g as r,h as u,V as c,i as d,m as v,n as p,j as g,k as m,l as f,o as A,p as h,q as y,s as w,t as x,v as k,w as I,x as C,y as b,z as E,A as B,B as S,C as R,D as z,F,E as U,G as q,N as T,H as V,I as Q,_ as L,J as j,K as D,L as O,M as _,O as M,P as Y,Q as H,T as G,R as K,S as Z,U as J,W,X as N,Y as X,Z as P,$,a0 as ee,a1 as ae,a2 as te,a3 as le,a4 as ie,a5 as se,a6 as ne,a7 as oe,a8 as re,a9 as ue,aa as ce,ab as de,ac as ve,ad as pe}from"../main-bf8e7d49.js";import{v as ge}from"../chat/chat.c78f7f74.js";import{N as me,a as fe}from"../Carousel/Carousel.33dcf2fc.js";import{C as Ae}from"../ChevronBack/ChevronBack.04f5fd67.js";import{C as he}from"../index1/index1.dc8d3d08.js";import{u as ye}from"../useScroll/useScroll.7b2f2499.js";import{I as we}from"../mj-menu/mj-menu.41e6da46.js";import{_ as xe,a as ke}from"../dianzan/dianzan.4417d952.js";import{f as Ie}from"../ppt/ppt.d221cd1f.js";import{t as Ce}from"../throttle/throttle.33f09de3.js";import{v as be,a as Ee,m as Be,b as Se,q as Re,c as ze,d as Fe,e as Ue}from"../music/music.8a9fd455.js";import{_ as qe,a as Te,b as Ve,c as Qe,d as Le}from"../light_music_end/light_music_end.c20cf1cf.js";import"../police/police.deef576c.js";const je=Object.assign(Object.assign({},e.props),{autoFill:Boolean,speed:{type:Number,default:48}}),De=a([t("marquee","\n overflow: hidden;\n display: flex;\n ",[l("group","\n flex: 0 0 auto;\n min-width: var(--n-min-width);\n z-index: 1;\n display: flex;\n flex-direction: row;\n align-items: center;\n animation: n-marquee var(--n-duration) linear var(--n-delay) var(--n-iteration-count);\n animation-play-state: var(--n-play);\n animation-delay: var(--n-delay);\n animation-direction: var(--n-direction);\n "),i("auto-fill",[l("group","min-width: 100%;"),l("item","min-width: 100%;")])]),a("@keyframes n-marquee",{from:{transform:"translateX(0)"},to:{transform:"translateX(-100%)"}})]),Oe=s({name:"Marquee",props:je,setup(a){const{mergedClsPrefixRef:t}=n(a);e("Marquee","-marquee",De,v,a,t);const l=o(null),i=o(-1),s=o(-1),u=o("running"),c=r((()=>{if(!a.autoFill)return 1;const{value:e}=i,{value:t}=s;return-1===e||-1===t?1:Math.ceil(s.value/e)})),d=r((()=>{const{value:e}=i;return-1===e?0:e*c.value/a.speed}));return{mergedClsPrefix:t,animationCssVars:r((()=>({"--n-play":u.value,"--n-direction":"normal","--n-duration":`${d.value}s`,"--n-delay":"0s","--n-iteration-count":"infinite","--n-min-width":"auto"}))),containerElRef:l,repeatCountInOneGroup:c,handleContainerResize:function(e){s.value=e.contentRect.width},handleContentResize:function(e){i.value=e.contentRect.width},handleAnimationIteration:function(){u.value="paused",p().then((()=>{var e;null===(e=l.value)||void 0===e||e.offsetTop,u.value="running"}))}}},render(){const{$slots:e,mergedClsPrefix:a,animationCssVars:t,repeatCountInOneGroup:l,handleAnimationIteration:i}=this,s=u(c,{onResize:this.handleContentResize},u("div",{class:`${a}-marquee__item ${a}-marquee__original-item`},e)),n=u("div",{class:`${a}-marquee__item`},e);return this.autoFill?u(c,{onResize:this.handleContainerResize},u("div",{class:`${a}-marquee ${a}-marquee--auto-fill`,ref:"containerElRef",style:t},u("div",{class:`${a}-marquee__group`,onAnimationiteration:i},s,d(l-1,n)),u("div",{class:`${a}-marquee__group`},d(l,n)))):u("div",{class:[`${a}-marquee`],ref:"containerElRef",style:t},u("div",{class:`${a}-marquee__group`,onAnimationiteration:i},s),u("div",{class:`${a}-marquee__group`},n))}}),_e=(e={})=>g({url:"/index-rec/page",data:{page:1,size:100,...e}}),Me={class:"recommend"},Ye={key:0,class:"text-[#000] dark:text-[#FFFFFF] text-[24px]",style:{margin:"0px 0 10px","font-weight":"500"}},He={key:1,class:"Module__BannerSearch"},Ge={class:"swiper"},Ke=["onClick","src"],Ze={class:"swiperR"},Je=["onClick"],We=["src"],Ne={class:"bold"},Xe={class:"ellipsi"},Pe={key:0,class:"recomLabel"},$e={class:"readItem zero"},ea=["onClick"],aa=["onClick"],ta=L(s({__name:"RecommendItem",setup(e){const a=m(),t=r((()=>a.isLogin)),l=f(),i=o([]);o(0);const s=o([]),n=o([[]]),u=o([]),c=o([]);o("查看推荐"),o(),A(),h();const d=o();y((()=>{O(),M(),async function(){try{const e=await k({keys:["siteName","clientLogoPath","siteKeyword","subSiteName"]});d.value=e.data}catch(e){console.log(e)}}(),p(),D(),(async()=>{console.log("aaaa");const e=await ge();200==e.code&&(i.value=e.data.chatMarquee)})()}));let v=o([[]]),p=async()=>{try{let e=await _e({type:"home",tagId:"118",page:1,size:99}),a=0;e.data.rows.forEach(((e,t)=>{t<5*(a+1)?v.value[a].push(e):(a++,v.value[a]=[e])}))}catch(e){v.value=[]}},g=o([]),L=o([]),j=o([]),D=async()=>{w({type:"recommend"}).then((e=>{g.value=e.data.slice(0,7)})),w({type:"popular"}).then((e=>{L.value=e.data.slice(0,7)})),w({type:"latest"}).then((e=>{j.value=e.data.slice(0,7)}))};const O=async()=>{try{let e=await _e({type:"home",tagId:"73"});s.value=e.data.rows;let a=0;e.data.rows.forEach(((e,t)=>{t<4*(a+1)?n.value[a].push(e):(a++,n.value[a]=[e])}));let t=await w({type:"recommend"}),l=await x({page:1,size:4});console.log(t),u.value=t.data.splice(0,3),c.value=l.data.rows}catch(e){n.value=[[]]}};let _=o([[]]);const M=async()=>{try{let e=await _e({type:"home",tagId:"119",page:1,size:99}),a=0;e.data.rows.forEach(((e,t)=>{t<10*(a+1)?_.value[a].push(e):(a++,_.value[a]=[e])}))}catch(e){_.value=[]}},Y=e=>{if(e.targetUrl)l.push(e.targetUrl);else{if(!(e.target.indexOf("http")>-1))return t.value?void l.push(e.target):(a.setLoginDialog(!0),void Q.emit("register",0));window.open(e.target)}};return(e,a)=>{var t;return I(),C("div",Me,[b(_).length>0?(I(),C("div",Ye,E(null==(t=b(_)[0][0])?void 0:t.tagName),1)):B("",!0),b(_).length>0?(I(),C("div",He,[S("div",Ge,[R(b(me),{autoplay:"",style:{width:"100%"}},{default:z((()=>[(I(!0),C(F,null,U(i.value,((e,a)=>(I(),C("img",{onClick:a=>Y(e),key:a,class:"carousel-img",src:e.url},null,8,Ke)))),128))])),_:1})]),S("div",Ze,[R(b(me),{autoplay:"",style:{width:"100%","padding-top":"48px"},"show-arrow":"","show-dots":!1},{arrow:z((({prev:e,next:a})=>[S("div",{class:"custom-arrow",style:q(b(_).length<2?"opacity: 0;":"")},[S("button",{type:"button",class:"custom-arrow--left",onClick:e},[R(b(T),null,{default:z((()=>[R(b(Ae))])),_:1})],8,ea),S("button",{type:"button",class:"custom-arrow--right",onClick:a},[R(b(T),null,{default:z((()=>[R(b(V))])),_:1})],8,aa)],4)])),default:z((()=>[(I(!0),C(F,null,U(b(_),((e,a)=>(I(),C("div",{class:"readBox",key:a},[(I(!0),C(F,null,U(e,((e,a)=>(I(),C("div",{class:"readItem",style:q([{"background-image":`url('${e.cover}')`,"background-repeat":"no-repeat","background-size":"100% 100%"}]),onClick:a=>Y(e),key:a},[S("img",{src:e.icon,alt:""},null,8,We),S("div",Ne,E(e.name),1),S("div",Xe,E(e.description),1),1==e.publish_flag?(I(),C("div",Pe,"热门推荐")):B("",!0)],12,Je)))),128)),(I(),C(F,null,U(7,(e=>S("div",$e))),64))])))),128))])),_:1})])])):B("",!0)])}}}),[["__scopeId","data-v-bee57341"]]),la={class:"overflow-hidden pr-0 h-full flex flex-col"},ia={class:"market overflow-y-auto flex-1 relative itemContent"},sa=["onClick","src"],na=["id"],oa=["id","src","onLoad","onError"],ra=["onClick"],ua={class:"bottomInfoBox"},ca={class:"userInfo"},da=["src"],va=["onClick"],pa={key:0,src:xe,class:"dianzan",alt:""},ga={key:1,src:ke,class:"dianzan",alt:""},ma=L(s({__name:"market",props:{type:{type:String,required:!1,default:"all"},keyWord:{type:String,default:""}},setup(e,{expose:a}){var t;const l=m();null==(t=j())||t.appContext.config.globalProperties.$viewerApi,h();const i=o([]),s=o({}),n=o(0),u=o(160),c=o(0),d=o(10),v=o(10),p=o([]),g=o(null),A=o(0),w=r((()=>l.isLogin)),x=o(30),k=o(""),T=r((()=>x.value+d.value+250)),V=f(),L=e,N=o();Q.on("newData",(e=>{N.value=e}));const X=D({page:1,size:999,rec:1,squareType:L.type,keyword:""});function P(){!function(){const{showName:e=0,showOther:a=0}={};n.value=15*[e,a].filter((e=>e)).length}(),function(){if(!g.value)return;const e=g.value.clientWidth;c.value=Math.floor(e/T.value);const a=e-c.value*T.value,t=(c.value-1)*d.value;a-t<0&&(c.value-=1);u.value=Math.floor((e-t)/c.value),console.log(u.value,"realWidth.value")}();const e=c.value,a=u.value,t=[];ee.value.forEach(((l,i)=>{let o=200,r=300;l.fileInfo&&(o=l.fileInfo.width||o,r=l.fileInfo.height||r);const c=r*(a/o)+v.value+n.value,p=s.value[l.id];if(t.length<e)p.style.top="0px",p.style.left=(a+d.value)*i+"px",t.push(c);else{const e=Math.min.apply(null,t),a=t.findIndex((a=>a===e));p.style.top=`${e+0}px`,p.style.left=a*(u.value+d.value)+"px",t[a]+=c}})),A.value=Math.max(...t)+130}function $(e,a){e&&a&&(s.value[a.id]=e)}const ee=r((()=>N.value?N.value.rows:k.value?i.value.filter((e=>{const{prompt:a}=e;return a.includes(k.value)})):i.value));O(x,(()=>{P()}));let ae=null;async function te(){let e;e="fav"===X.squareType?await K({page:X.page,size:X.size}):await Z(X);let a=[{id:"wapper-carousel",noShow:!0,fileInfo:{width:1024,height:1024}},{id:"wapper-carousel2",noShow:!0,fileInfo:{width:1024,height:1024}},...e.data.rows];a.forEach((e=>{e.src=e.imageUrl+"?imageView2/0/w/400/q/85"})),i.value=a}O(ee,(()=>{ee.value.length&&(clearTimeout(ae),ae=setTimeout((()=>{P()}),300))}));const le=r((()=>e=>{let a=200,t=300;return e.fileInfo&&(a=e.fileInfo.width,t=e.fileInfo.height),t/(a/u.value)})),ie=Ce((function(){P()}),200);let se=o([]);y((async()=>{await te(),P(),window.addEventListener("resize",ie),Ie({code:"MjRcMarquee"}).then((e=>{var a;se.value=null==(a=e.data)?void 0:a.recMarquee,se.value.forEach((e=>{e.fileInfo={width:1024,height:1024}}))}))})),a({handleQuery:e=>{X.keyword="",X.squareType=e,te(),P()},handleSearch:e=>{X.squareType="",X.keyword=e,te(),P()}}),_((()=>{window.removeEventListener("resize",ie)}));const ne=o(0);return(e,a)=>(I(),C("div",la,[S("div",ia,[S("div",{id:"wapper",ref_key:"wapperRef",ref:g,class:"wapper",style:q({height:`${A.value}px`})},[b(se).length>0?(I(),M(b(me),{key:0,class:"wapper-item",id:"wapper-carousel",ref:e=>$(e,{id:"wapper-carousel"}),style:q([{width:2*u.value+10+"px",height:`${le.value(b(se)[0])}px`},{"border-radius":"8px",overflow:"hidden"}]),draggable:""},{default:z((()=>[(I(!0),C(F,null,U(b(se),((e,a)=>(I(),C("img",{class:"carousel-img",onClick:a=>(e=>{if(!(e.targetUrl.indexOf("http")>-1))return w.value?void V.push(e.targetUrl):(l.setLoginDialog(!0),void Q.emit("register",0));window.open(e.targetUrl)})(e),style:q({width:2*u.value+10+"px",height:`${le.value(e)}px`}),src:e.url},null,12,sa)))),256))])),_:1},8,["style"])):B("",!0),(I(!0),C(F,null,U(ee.value,((e,t)=>{var l,i;return Y((I(),C("div",{id:e.id,key:t,ref_for:!0,ref:a=>$(a,e),class:"wapper-item",style:q({width:`${u.value}px`})},[R(G,{name:"img",css:!0},{default:z((()=>[S("img",{id:e.id,class:"item-file rounded-sm",style:q({width:`${u.value}px`,height:`${le.value(e)}px`}),src:e.src,loading:"lazy",onLoad:a=>function(e,a){p.value.push(a.id)}(0,e),onError:a=>function(e,a){p.value.push(a.id)}(0,e)},null,44,oa)])),_:2},1024),S("div",{class:"menu",onClick:a=>function(e){Q.emit("Details",!0),Q.emit("DetailsData",e)}(e)},a[0]||(a[0]=[S("div",null,"查看详情",-1)]),8,ra),S("div",ua,[S("div",ca,[S("img",{src:(null==(l=e.userInfo)?void 0:l.avatar)||b(W),class:"smallHead",alt:""},null,8,da),S("span",null,E((null==(i=e.userInfo)?void 0:i.nickname)||"官方"),1)]),S("div",{class:"userInfo",onClick:a=>function(e){let a={id:e.id,favorite:e.isCollect?0:1};1!=ne.value&&(ne.value=1,J(a).then((e=>{te(),P(),ne.value=0})).catch((e=>{ne.value=0})))}(e)},[e.isCollect?(I(),C("img",pa)):(I(),C("img",ga)),S("span",null,E(e.collectNum||0),1)],8,va)])],12,na)),[[H,!e.noShow]])})),128))],4)])]))}}),[["__scopeId","data-v-4a364c15"]]),fa={class:"overflow-hidden pr-0 h-full flex flex-col wapper"},Aa={key:0,class:"market overflow-y-auto flex-1 relative itemContent"},ha=["onClick","src"],ya=["id"],wa={key:0,class:"img_box"},xa=["id","src","onLoad","onError"],ka={key:0,class:"img_info"},Ia=["title"],Ca=["onClick","onMouseenter","onMouseleave"],ba=["src","poster","autoplay"],Ea={class:"bottomInfoBox"},Ba={class:"userInfo"},Sa=["src"],Ra=["onClick"],za={key:0,src:xe,class:"dianzan",alt:""},Fa={key:1,src:ke,class:"dianzan",alt:""},Ua=L(s({__name:"newMarket",props:{type:{type:String,required:!1,default:"all"},keyWord:{type:String,default:""}},setup(e,{expose:a}){const t=m(),l=r((()=>t.isLogin)),i=o([]),s=o({}),n=o(0),u=o(160),c=o(0),d=o(10),v=o(10),p=o([]),g=o(null),f=o(0),A=o(30);o("");const h=r((()=>A.value+d.value+250)),w=e,x=o();Q.on("newData",(e=>{x.value=e}));const k=D({page:1,size:999,rec:1,classify:w.type,keyword:""});function T(){!function(){const{showName:e=0,showOther:a=0}={};n.value=15*[e,a].filter((e=>e)).length}(),function(){if(!g.value)return;const e=g.value.clientWidth;c.value=Math.floor(e/h.value);const a=e-c.value*h.value,t=(c.value-1)*d.value;a-t<0&&(c.value-=1);u.value=Math.floor((e-t)/c.value),console.log(u.value,"realWidth.value")}();const e=c.value,a=u.value,t=[];L.value.forEach(((l,i)=>{let o=200,r=300;l.fileInfo&&(o=l.fileInfo.width||o,r=l.fileInfo.height||r);const c=r*(a/o)+v.value+n.value,p=s.value[l.id];if(t.length<e)p.style.top="0px",p.style.left=(a+d.value)*i+"px",t.push(c);else{const e=Math.min.apply(null,t),a=t.findIndex((a=>a===e));p.style.top=`${e+0}px`,p.style.left=a*(u.value+d.value)+"px",t[a]+=c}})),f.value=Math.max(...t)+130}function V(e,a){e&&a&&(s.value[a.id]=e)}const L=r((()=>x.value?x.value.rows:i.value));O(A,(()=>{T()}));let j=null;async function K(){if("pic"===w.type){let e=(await Z(k)).data.rows;e.forEach((e=>{e.src=e.imageUrl+"?imageView2/0/w/400/q/85"})),i.value=e}else{const e=await async function(){var e;try{let a;a="fav"===k.classify?await Be({page:1,size:999,keyword:k.keyword,modelType:"video"}):await Se({...k,modelType:"video"});let t=(null==(e=null==a?void 0:a.data)?void 0:e.records)||[],l=[{id:"wapper-carousel",noShow:!0,fileInfo:{width:1024,height:1024}},{id:"wapper-carousel2",noShow:!0,fileInfo:{width:1024,height:1024}}];return t.forEach((async e=>{e.intro=e.prompt.split("--")[0].split("prompt ")[1],e.fileInfo={width:0,height:0},e.mp4&&l.push(e)})),l}catch(a){return[]}}(),a=await new Promise((a=>{let t=0;e.forEach((l=>{const i=new Image;i.onload=()=>{l.fileInfo={width:i.width,height:i.height},t++,t==e.length&&a(e)},i.onerror=()=>{console.log(i,"onerror"),t++,t==e.length&&a(e)},i.src=l.cover,l.imageUrl=l.cover}))}));i.value=a}}O(L,(()=>{L.value.length&&(clearTimeout(j),j=setTimeout((()=>{T()}),300))}));const J=r((()=>e=>{let a=200,t=300;return e.fileInfo&&e.fileInfo.width&&(a=e.fileInfo.width,t=e.fileInfo.height),t/(a/u.value)})),P=Ce((function(){T()}),200);let $=o([]);y((async()=>{await K(),T(),window.addEventListener("resize",P),Ie({code:"AIVideoGlobalConfig"}).then((e=>{var a;$.value=null==(a=e.data)?void 0:a.recMarquee,$.value.forEach((e=>{e.fileInfo={width:1024,height:1024}}))}))})),a({handleQuery:e=>{k.keyword="",k.classify=e,K(),T()},handleSearch:e=>{k.classify="",k.keyword=e,K(),T()}}),_((()=>{window.removeEventListener("resize",P)}));const ee=o(),ae=o(0);return(a,i)=>(I(),C("div",fa,[L.value.length?(I(),C("div",Aa,[S("div",{id:"wapper",ref_key:"wapperRef",ref:g,class:"wapper",style:q({height:`${f.value}px`})},[b($).length>0?(I(),M(b(me),{key:0,class:"wapper-item",id:"wapper-carousel",ref:e=>V(e,{id:"wapper-carousel"}),style:q([{width:2*u.value+10+"px",height:`${J.value(b($)[0])}px`},{"border-radius":"8px",overflow:"hidden"}]),draggable:""},{default:z((()=>[(I(!0),C(F,null,U(b($),((e,a)=>(I(),C("img",{class:"carousel-img",onClick:a=>(e=>{if(!(e.targetUrl.indexOf("http")>-1))return l.value?void X.push(e.targetUrl):(t.setLoginDialog(!0),void Q.emit("register",0));window.open(e.targetUrl)})(e),style:q({width:2*u.value+10+"px",height:`${J.value(e)}px`}),src:e.url},null,12,ha)))),256))])),_:1},8,["style"])):B("",!0),(I(!0),C(F,null,U(L.value,((a,s)=>Y((I(),C("div",{id:a.id,key:s,ref_for:!0,ref:e=>V(e,a),class:"wapper-item",style:q({width:`${u.value}px`})},[R(G,{name:"img",css:!0},{default:z((()=>["pic"===e.type?(I(),C("div",wa,[S("img",{id:a.id,class:"item-file rounded-sm",style:q({width:`${u.value}px`,height:`${J.value(a)}px`}),src:a.src,loading:"lazy",onLoad:e=>function(e,a){p.value.push(a.id)}(0,a),onError:e=>function(e,a){p.value.push(a.id)}(0,a)},null,44,xa),a.fullPrompt&&""!==a.fullPrompt&&a.fullPrompt.length?(I(),C("div",ka,[S("span",{class:"introduction",title:a.fullPrompt},E(a.fullPrompt),9,Ia)])):B("",!0)])):(I(),C("div",{key:1,class:"img_box",onClick:e=>function(e){if(!l.value)return t.setLoginDialog(!0),void Q.emit("register",0);Q.emit("Details",!0),Q.emit("DetailsData",e)}(a),onMouseenter:e=>(e=>{if(ee.value&&ee.value.id==e.id)return;if(!e.mp4)return;const a=document.querySelector(`video[src="${e.mp4}"]`);a.play(),a.loop=!0,ee.value=e})(a),onMouseleave:e=>(e=>{if(!e.mp4)return;document.querySelector(`video[src="${e.mp4}"]`).pause(),ee.value=null})(a)},[S("video",{src:a.mp4,poster:a.cover,class:"item-file rounded-sm",style:q([{width:`${u.value}px`,height:`${J.value(a)}px`},{width:"100%","object-fit":"fill"}]),autoplay:ee.value&&ee.value.id==a.id},null,12,ba),i[0]||(i[0]=S("div",{class:"menu"},null,-1))],40,Ca))])),_:2},1024),S("div",Ea,[S("div",Ba,[S("img",{src:a.avatar||b(W),class:"smallHead",alt:""},null,8,Sa),S("span",null,E(a.nickname||"官方"),1)]),S("div",{class:"userInfo",onClick:e=>function(e){let a={id:e.id};1!=ae.value&&(ae.value=1,e.isCollect?be(a).then((e=>{K(),T(),ae.value=0})).catch((e=>{ae.value=0})):Ee(a).then((e=>{K(),T(),ae.value=0})).catch((e=>{ae.value=0})))}(a)},[a.isCollect?(I(),C("img",za)):(I(),C("img",Fa)),S("span",null,E(a.collectNum||0),1)],8,Ra)])],12,ya)),[[H,!a.noShow]]))),128))],4)])):(I(),M(b(N),{key:1,description:"暂无数据",class:"empty"}))]))}}),[["__scopeId","data-v-87bb5af4"]]),qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAETSURBVCiRlZC9SgNREIXPuXcTMS4SlMRFJJEUFkE7K20iBl/DwiewsBBfQFTwVay1cEtBEKxsV0hhIoQtlhju7t6xSrJXCehU83dm5hvgn8afiZvDoE2oHShrTYrn8/AjKtZ1Mbjq1AJo71iImoB1rbC911h8CaORmfSookC88qYTg56P0kYx5wj+Yo6AmYkosLMNGCdIe3MZHqJRctBceleED3CAPL27CD+HztCJc320VofVXUJaAnoAQBGjFN6Yfj2ehnE83XDbqVZzLJyQCADOziS1gIFlaWu/ufoaRnGmAMCqSptEZS4pseLrcWsKnWkX9le/iEnKpucwXHbXGx5k11pZdr4iamhL+dPZfX8AAN8SFlq325tYKwAAAABJRU5ErkJggg==",Ta={class:"bg-[#ffffff] dark:bg-[#24252B] musicBody"},Va={class:"mainBox"},Qa={class:"bg-[#F8F9F9] dark:bg-[#24252B]",style:{height:"100%"}},La={class:"contentBox"},ja={style:{display:"flex",height:"100%"}},Da={style:{display:"flex","flex-direction":"column",overflow:"hidden",width:"100%"}},Oa={class:"contextBox"},_a={class:"contextBox-rec"},Ma=["onClick"],Ya={class:"contextBox-rec-item-title"},Ha={class:"contextBox-input"},Ga={class:"itemTop"},Ka={class:"topImg"},Za=["src"],Ja={class:"topTitle"},Wa={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},Na={style:{display:"flex","align-items":"center",margin:"10px 0"}},Xa={key:0,src:Le,style:{"margin-right":"4px"}},Pa={key:1,src:qa,style:{"margin-right":"4px",transform:"translateY(-2px)"}},$a={class:"intro text-[#8B8C8C] dark:text-[#727586]"},et={class:"itemTop"},at={class:"topImg"},tt=["src"],lt={class:"topTitle"},it={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},st={style:{display:"flex","align-items":"center",margin:"10px 0"}},nt={key:0,src:Le,style:{"margin-right":"4px"}},ot={key:1,src:qa,style:{"margin-right":"4px",transform:"translateY(-2px)"}},rt={class:"intro text-[#8B8C8C] dark:text-[#727586]"},ut={key:0,class:"videoBox"},ct={style:{position:"relative"}},dt=["src"],vt={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[17px]",style:{"margin-top":"12px","font-weight":"550","text-align":"left",padding:"0 10px"}},pt={style:{display:"flex","align-items":"center","justify-content":"left",margin:"12px 0",padding:"0 10px"}},gt={key:0,src:Le,style:{"margin-right":"4px"}},mt={key:1,src:qa,style:{"margin-right":"4px",transform:"translateY(-2px)"}},ft={class:"introList"},At=["src"],ht={style:{position:"fixed",bottom:"0",width:"100%"}},yt={key:0,class:"dark:bg-[#303137] bg-[#fff] text-[#8B8C8C] dark:text-[#6C6E79] border-t border-[#E8E8E8] dark:border-[#292A2E]",style:{padding:"0px 375px 0px 100px","box-sizing":"border-box"}},wt={class:"control dark:bg-[#303137] bg-[#FFF] text-[#8B8C8C] dark:text-[#6C6E79] border-[#E8E8E8] dark:border-[#292A2E]"},xt={style:{display:"flex","align-items":"center"}},kt={style:{display:"flex","align-items":"center",gap:"5px","margin-right":"20px"}},It=["src"],Ct={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[14px]"},bt={style:{color:"#727586","margin-top":"10px",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden","text-overflow":"ellipsis",width:"180px"}},Et={style:{display:"flex","align-items":"center",flex:"1","padding-right":"20px","margin-left":"20px"}},Bt={style:{width:"100%"}},St={style:{"margin-top":"4px",display:"flex","align-items":"center",gap:"10px"}},Rt=["src"],zt=L(s({__name:"musicSquare",setup(e){const a=h(),t=m(),l=r((()=>t.isLogin));let i=null;const s=f(),n=P();n.setTheme("light");const u=r((()=>"dark"===n.theme)),c=o();o(0);const d=o(1),v=o();o("");const p=o(""),g=o([]),A=o("00:00"),y=o("00:00"),w=o(""),x=o(""),k=o(0),q=o(null),T=o([]);function V(){i||(i=a.loading("数据加载中",{duration:0}));let e={size:50,modelType:"music",page:d.value,order:p.value};Se(e).then((e=>{v.value=e.data.count,T.value=e.data.records,W()})).catch((e=>{W()}))}V(),Re({modelType:"music"}).then((e=>{0!=e.data.length?localStorage.setItem("musicGroupId",e.data[0].id):0==e.data.length&&ze().then((e=>{localStorage.setItem("musicGroupId",e.data.id)}))})),Fe({dictType:"music-lyrics"}).then((e=>{g.value=e.data.rows}));const Q=o();Se({size:6,modelType:"music",page:1,order:"agreeNum"}).then((e=>{Q.value=e.data.records}));const L=o(""),j=o(!1),D=o(""),_=o(0);function H(){const e=q.value;j.value?(j.value=!1,e.pause()):(j.value=!0,e.play())}function G(){_.value-1<0?(_.value=T.value.length-1,D.value=T.value[_.value]):(_.value=_.value-1,D.value=T.value[_.value]);const e=setTimeout((()=>{j.value=!1,H(),clearTimeout(e)}))}function K(){_.value+1>T.value.length-1?(_.value=0,D.value=T.value[_.value]):(_.value=_.value+1,D.value=T.value[_.value]);const e=setTimeout((()=>{j.value=!1,H(),clearTimeout(e)}))}function Z(e,a){if(!l.value)return void t.setLoginDialog(!0);if(D.value&&D.value.id==e.id)return void H();Ue({id:e.id,type:"music"}),V(),e.introList=e.intro.split("\n"),D.value=e,_.value=a;const i=setTimeout((()=>{j.value=!1,H(),clearTimeout(i)}))}O((()=>D.value),((e="")=>{}));const J=o(!1);function W(){i&&(i.destroy(),i=null)}function N(){D.value&&(D.value.operation=!1),J.value=!1,T.value.forEach((e=>{e.operation=!1}))}const X=o(null);function se(){const e=X.value;if(e.scrollTop+e.clientHeight+1>=e.scrollHeight){if(30*d.value>=v.value)return;d.value++,V()}}function ne(){w.value=q.value.duration,x.value=q.value.currentTime,y.value=re(parseInt(q.value.currentTime)),A.value=re(parseInt(q.value.duration))}function oe(e){y.value=re(parseInt(e.target.currentTime)),x.value=e.target.currentTime,function(){let e=x.value/w.value*100;k.value=e;const a=q.value;k.value>=100&&(j.value=!1,a.pause(),x.value=0,k.value=0,y.value="00:00")}()}function re(e){let a=parseInt(e/60),t=parseInt(e%60);return a=a>=10?a:"0"+a,t=t>=10?t:"0"+t,a+":"+t}const ue=o(!1);function ce(){c.value&&localStorage.setItem("music_rec_prompt",c.value),s.push({path:"/music/creativeCenter"})}function de(){q.value.pause()}function ve(){q.value.currentTime=x.value,q.value.play()}return(e,a)=>(I(),C("div",Ta,[J.value?(I(),C("div",{key:0,class:"mask",onClick:N})):B("",!0),S("div",Va,[S("div",Qa,[S("div",La,[S("div",ja,[S("div",Da,[S("div",Oa,[S("div",_a,[(I(!0),C(F,null,U(g.value.slice(0,3),(e=>(I(),C("div",{class:"contextBox-rec-item bg-gradient-to-t to-[#2c2d32] from-[#3F3C31] text-[14px] p-[20px]",onClick:a=>c.value=e.dictValue},[S("div",Ya,E(e.dictValue),1),a[4]||(a[4]=S("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAErSURBVFiF7dbBbYMwFMbxv2lzhw0YoYzABtmg7QRppPaQCaIIJEZIN8gIjOCMwAbmHir3YGhaCSNsWqUHfxcE8nv84CEAQkL+YcSSYiWLCkQMuk2yt61vn2gJAvQa9JPZ+mch4ncSEEMCYkhADJlEKHlYK1nFS06gZBUreZh8j1gRShYvEJ2gq5Xcp36AfQpdDdHJ9HNAmKsXm373AVbOELN+VZt6ALGx3dVRRJJtW7jkIBpzRKcukCtA9+tFA5fc9J2JMJBd4wOxA3aNrWbywXSF+ABg5qfczLL7Pt8ed1eDSEE38JH/BHCGe+sInBF2iI6BGGhBtD4AJ8Q4ZDROAGfEDIgzwAtxxZRH81f11eo9yV6ffft5R8nyqGShDeiGUbJ8vCkgJOSv8gnIw5o7HWqnWwAAAABJRU5ErkJggg=="},null,-1))],8,Ma)))),256))]),S("div",Ha,[Y(S("input",{class:"inp","onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),type:"text",placeholder:"输入创作歌词提示词！"},null,512),[[$,c.value]]),R(b(ee),{class:"music_btn",show:ue.value,stroke:"#000"},{default:z((()=>[S("div",{class:"flex items-center",onClick:ce},a[5]||(a[5]=[S("span",{style:{"margin-top":"3px"}},"创作",-1),S("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEOSURBVDiNrZLhTcQwDIWfmwwQJiBsYLXqHjACIzABbMAINwIwAYzgDS7doAPEMj/InUqaU3uI9yfKk/P5JQ6hUt/3L0T0XPtb6mqDiG6vhZhZWoH+qhYoXgshov9L5GvDzCIRQVXvNg97H83sE0BagQosiUjaAo3jGMwMQHtqcQuwaBjKOjXfiIg20xTA+av8AjHzKc28N1VpfLw0tb2gsErEzMF7H5vlDTFzMLObkmjyzBydc28A+DQBM5suAYZhuAfwip+Pe07unXMHALw3BYDD4koBAHLOqWtBiOjYAnnveQFZau4AfNWmqn60QDlnAZAqW0Rk7lT1qcBmAALgUUSaUxORWVUfFvXvZY9vsExoA77sdzkAAAAASUVORK5CYII="},null,-1)]))])),_:1},8,["show"])]),a[8]||(a[8]=S("div",{class:"contextBox-hot-title"},"热门推荐",-1)),Q.value&&Q.value.length>2?(I(),C("div",{key:0,class:"content hot",ref_key:"container",ref:X},[(I(!0),C(F,null,U(Q.value,((e,t)=>(I(),C("div",{class:ae(["contentItem bg-[#F9FAFB]",t<3?"hot":""]),key:e.chatId},[S("div",Ga,[S("div",Ka,[S("img",{class:"bgImg",src:e.cover,alt:"加载失败"},null,8,Za),D.value&&D.value.id!=e.id||!j.value?(I(),M(b(te),{key:0,onClick:a=>Z(e,t),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"])):(I(),M(b(te),{key:1,onClick:H,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"}))]),S("div",Ja,[S("div",Wa,E(" "==e.title||null==e.title?"匿名":e.title),1),S("div",Na,[u.value?(I(),C("img",Xa)):(I(),C("img",Pa)),a[6]||(a[6]=S("span",{class:"text-[#8C441A] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),S("div",$a,[S("span",null,E(e.intro),1)])])])],2)))),128))],512)):B("",!0),a[9]||(a[9]=S("div",{class:"contextBox-hot-title"},"最新歌曲",-1)),T.value&&T.value.length>2?(I(),C("div",{key:1,class:"content",ref_key:"container",ref:X,onScroll:se},[(I(!0),C(F,null,U(T.value,((e,t)=>(I(),C("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:e.chatId},[S("div",et,[S("div",at,[S("img",{class:"bgImg",src:e.cover,alt:"加载失败"},null,8,tt),D.value.id==e.id&&j.value?(I(),M(b(te),{key:1,onClick:H,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"})):(I(),M(b(te),{key:0,onClick:a=>Z(e,t),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"]))]),S("div",lt,[S("div",it,E(" "==e.title||null==e.title?"匿名":e.title),1),S("div",st,[u.value?(I(),C("img",nt)):(I(),C("img",ot)),a[7]||(a[7]=S("span",{class:"text-[#8C441A] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),S("div",rt,[S("span",null,E(e.intro),1)])])])])))),128))],544)):B("",!0)])]),D.value?(I(),C("div",ut,[S("div",{class:ae(["bg-[#f9fafb] dark:bg-[#222325] musicInfoDialog",{hasMusic:D.value}])},[S("div",ct,[S("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFaSURBVFiF7ZWxUoNAEIb/xcqBzNgEKKkCM0lhmZIXSJ7B0s7WLqSzy+QJHB9BbLQKvkMswhNgUjkDrWchROIcuSWaKvdXx83e/h+7d7OAlpbWqetMFeAOxpHZ7S06TkD5epVwkjr90cyy/WfOGSWA2e0tymXISWj3R/cEXAMABLxik873xRsqACKaVmshxMQdjCOF+dX2rEEPqvzKCuTrVdJxAgIQllvSSjj90Wz75yV4towbYdkAHIiyKrdtzQGAOEGV3ME4EkJM6kbAd2sOMW8NIIPYSdbSHGC2oC5JOw42Bxiv4NhqXYE9LQgt278oNunL0QBkl5CIXvHTjqFp+16xSR//HUBmni3j6PedIOCyDQQLoMm8+v4LBGsYcd65DIJzJ5Sv4FOIG5V5pWwZRzuzozYXmqSsQMcJziHggTB9f3u6U8Xn61Vi2f6HAIYG0Zw7wrW0tE5XXzu/sQ7OKOWfAAAAAElFTkSuQmCC",style:{background:"#D8D8D8",position:"absolute",right:"10px",top:"10px",cursor:"pointer","border-radius":"5px"},onClick:a[1]||(a[1]=e=>D.value="")}),S("img",{src:D.value.cover,style:{width:"100%"}},null,8,dt)]),S("div",vt,E(" "==D.value.title||null==D.value.title?"匿名":D.value.title),1),S("div",pt,[u.value?(I(),C("img",gt)):(I(),C("img",mt)),a[10]||(a[10]=S("span",{class:"text-[#8C441A] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),S("div",ft,[(I(!0),C(F,null,U(D.value.introList,(e=>(I(),C("div",{key:e,style:{"margin-bottom":"10px"}},E(e),1)))),128))])],2),S("audio",{class:"video",type:"audio/mp3",id:"video",src:L.value,onTimeupdate:a[2]||(a[2]=(...a)=>e.audioTimeUpdate&&e.audioTimeUpdate(...a))},null,40,At)])):B("",!0)])]),S("div",ht,[D.value?(I(),C("div",yt,[S("div",wt,[S("div",xt,[S("div",kt,[S("img",{src:D.value.cover,style:{"border-radius":"5px",width:"60px",height:"60px"}},null,8,It),S("div",Ct,[S("div",null,E(" "==D.value.title||null==D.value.title?"匿名":D.value.title),1),S("div",bt,E(D.value.intro),1)])]),S("div",null,[u.value?(I(),C("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFiSURBVEiJvZXBcYMwEEXfMtxNCZRACaQCJxWEDkIJdgVxBxmXkApMB3YH0IGdCn4OggwBC5Dt5M3oAEj7teJr15hAUgJkwBrIgQRIgaY39mZWTcWZEiglnbWMWlIREjyVdFwY/JpYOieQtRPvoZaUTWVwr0BfaJzRAwU6jl3sqBUocK4Z0gAFUM3/zRGZpHJJFpv2+7Pn+0HSRn4XniUlsaTck0Wfy5XnrZnt2k2sgHK0yt2rLAZeA4/hBLyYWdN79zUxfx0xn0WfHfA0EJgjjxeKXNrgVUDwjmSRiJmdbgjekUY4m04iVwlmN+OhiRg75xoJcFBIERyIVAsnp8CHpHe5FhAk8hm4sxI4BhzfPsb5/oI7kiErz8IUqCVt2/W+u9b8OFKuQfnKwptu7y/FL8k7AvmoR3npP/pJK/S3nfFBGYW4zjWyALGz+g1qgC0Qy3EWTXujwdm+wt2zk5l5K8c3konLZQJuJOwAAAAASUVORK5CYII=",alt:"",onClick:G})):(I(),C("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:qe,alt:"",onClick:G}))]),S("div",null,[j.value&&u.value?(I(),C("img",{key:0,class:"controlItem",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIXSURBVFiFxZdBbptQEIa/eYZdIsENyA2gVffOCdycIEdIuoysKliR5a1zhJwg9gnafZSaG4QbgOTuwJkusKmTuDXYGP879GC+X/OYefOEikpmoWPlHV+sTg/FBzxQp1iVGEgRiTXPH06/fP9ZNa5UAr/a1yJcgTjVwmqKmEkGAze4iXcysBt4gxXVwennfljLQDIbebbqI+DvCn6nKBO52JSNDwaW8B+A1xB8pTgTOX9v4o2BA8L/acKsry7Tfig4gGerPiazsPynSgPz52FIc3v+P/nWq329ehAoU//SAnwpTTPJztwgTA2ADbftwQHEWWVBAH7/Gib71PpuKrJg5k933dpwYYxoAJoWsfiWiZyVz9WCOFbe8Y1Y1mUtOKD5YnoS9CPETAAyI5OitCSqE0esTs+g6tU10JgU3wAt7/0beQaOmAHUMdtfOqwMSI0/t2lJbID4eAZIDUKt0mlUIrHRfDGt/Z3V6SWzkYdqF8BGr4qGVu8k1Tx/kGQWOrbaL8doxSef+q5xgzBV5b5dOKy6qAHITTau18f3VwaD0kDbWVDVclwvG1GRhVYqIlof00sDbhCmmcgFh+0L8ZJR6uhj+YezwA1u4kzknGa3I9oEhy13w/nzMBSRPeZFTVW5z002doNwY5VVuJyOPBtu0devdS6n28CVDaxr/nTXFcu6XE5Rzt9ZQlIgRog0X0xzaxFtA6/0B30D8TI44YwvAAAAAElFTkSuQmCC",style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H})):B("",!0),j.value&&0==u.value?(I(),C("img",{key:1,class:"controlItem",src:Te,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H})):B("",!0)]),S("div",null,[!j.value&&u.value?(I(),C("img",{key:0,class:"controlItem",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIfSURBVFiFxZfdTeNAFIXPuRkj8eYSvAVEsjsIFbCpAG0FYK14hjyjVaAEKgAq2HRgSylgXYLfkPBk7j4k9hqI1j8T4LwlHs35dMe+9wzRU5otQ2tsDMoplLGqRiTC7VMWAEpSC1V3H0wvV333ZR/jF7EXInIO1IadKkk8VpUsjpO0GAUw0nifFsH05/UggOdsGRmzeQAYexi3pLm1k/m+arwDeM6WURC436qIDmO+MyKKqpKTtxCvAD7K/H8Q0l5gzObho8wBQBWRMZsHzZbNO9UAVOtf1wPPvByHwfhF7EXzC6hfOvdnwCYra/nD47hKY+Ubk7QUAAgCdzV0h+MkLapKTkgUIwDCugoCAKr4PmITLwgROddsGUq1vpnBo9F4QITW2FhIORtr7g1BORVVRr4AoyGUscCvz3tBqGokgEaHAmhDoEefIBFK1yIP9aqsqI7taPtVz5N+q1kIyeLQ5gO6Yymg5l9kDlILgbqnrzAHAFV3L8aaHKMnm1eGKIPp5UqYpKVz7u6TzUHiEdgNoyNnbjGwCr7pqapk0QAMr4LOjHGZR3pq4nrTiLZVGPRFjGzhmrdjegPAJC2tncxHBoxeIlFYO5m/+u/tos+O5e9mwb9hcpgGtZXm+8yBjrvhNiljcF5sqXTO3R05c8sk3fuVdV5Od0dytcuNvS+nXca9Adqq1jczUs52KSqss4QqSpIFqDnUPRlr8i7jWn8BA1FAx8ueZuYAAAAASUVORK5CYII=",style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H})):B("",!0),j.value||0!=u.value?B("",!0):(I(),C("img",{key:1,class:"controlItem",src:Ve,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H}))]),S("div",null,[u.value?(I(),C("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFpSURBVEiJvZXdcYJAFIW/y/geSiAdkApCKjAdSDogHdiBKSF2kFSgHWgH0IFawcnDYmZFFhc1OTP7wl7uN2f/jjEgSSmQA1OgAFIgAxpvLM1sPdRnCFBJ2ilOtaRyTPNM0iayeR8suwTI28JbVEvKhxzcCvBB547uCDhqc+ydtIASd2rGagtUwL5nLpdUxbioJb1Kmgfmi/b/RWB+JylN2sKQi6WZfZnZHHjE3Ys+HQLfUyBPgNnggrQyswZ4Aj5i6j1NE0bshZntzewdeCPsqqtiFMSDfQIv9G94V+nkGkgLaiJLs4R42yeSVCh0s0/VJMRZ9punkhbACnd6oiDrEYCsbV5dKD2DfA8UPHiACtjg8mWMlhPc07Cn33op6QA840Krq0vL1fwGmlxAXaOVpJnCz1J5gtT1QRVSfeZL/5EnLehvk/FOjjZBBwFYOQK2kx9QHVkErMDFQeaNBnfs17h7tjWz4MvxA+Ebx1wGT+K1AAAAAElFTkSuQmCC",alt:"",onClick:K})):(I(),C("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:Qe,alt:"",onClick:K}))])]),S("div",Et,[S("div",Bt,[S("div",St,[S("audio",{id:"audio",src:D.value.mp3,onCanplay:ne,ref_key:"audioRef",ref:q,onTimeupdate:oe},null,40,Rt),le(" "+E(y.value)+" ",1),R(b(ie),{value:x.value,"onUpdate:value":a[3]||(a[3]=e=>x.value=e),"on-dragstart":de,"on-dragend":ve,tooltip:!1,max:w.value,min:0},null,8,["value","max"]),le(" "+E(A.value),1)])])])])])):B("",!0)])])])]))}}),[["__scopeId","data-v-70802660"]]),Ft={style:{padding:"0 24px",display:"flex","flex-direction":"column"},class:"bg-[#fff] dark:bg-[#2B2D31]"},Ut={class:"topBox"},qt={key:0,class:"flex w-full flex-j mb-2 items-center overflow-x-hidden"},Tt={class:"relative z-40 transition-300 ease"},Vt={class:"flex justify-start items-center",ref:"tabListRef"},Qt=["onClick"],Lt={class:"pl-3 pr-3 pt-1 pb-1 whitespace-nowrap"},jt={key:1,class:"flex w-full flex-j mb-2 items-center overflow-x-hidden"},Dt={class:"relative z-40 transition-300 ease"},Ot={class:"flex justify-start items-center",ref:"tabListRef"},_t=["onClick"],Mt={class:"pl-3 pr-3 pt-1 pb-1 whitespace-nowrap"},Yt={class:"flex-1 marketBox"},Ht=L(s({__name:"square",setup(e){se();const a=o(""),t=o(),l=o(""),i=o(),s=P();r((()=>"dark"===s.theme));const n=o([]),u=o([]);s.setTheme("light");(async()=>{const e=await ne({page:1,size:100}).then((e=>e.data.rows));n.value=[{name:"全部",value:""},{name:"我的收藏",value:"fav"}].concat(e)||we,t.value.handleQuery(a.value)})();(async()=>{const e=await ne({page:1,size:100,dataType:1}).then((e=>e.data.rows));u.value=[{name:"全部",value:""},{name:"我的收藏",value:"fav"}].concat(e)||we,i.value.handleQuery(l.value)})();o("");const c=o(""),d=o("pic");return y((()=>{})),(e,s)=>(I(),C("div",Ft,[R(b(re),{class:"squareTabs",value:d.value,"onUpdate:value":[s[0]||(s[0]=e=>d.value=e),s[1]||(s[1]=e=>c.value="")],size:"large"},{default:z((()=>[R(b(oe),{name:"pic",tab:"绘画广场"}),R(b(oe),{name:"video",tab:"视频广场"}),R(b(oe),{name:"music",tab:"音乐广场"})])),_:1},8,["value"]),S("div",Ut,["pic"===d.value?(I(),C("div",qt,[S("div",Tt,[S("ul",Vt,[(I(!0),C(F,null,U(n.value,(e=>(I(),C("li",{onClick:l=>{return i=e,a.value=i.value,t.value.handleQuery(i.value),void Q.emit("newData","");var i},class:ae(["mr-1 ml-1 w-auto select-none cursor-pointer hover:dark:text-[#fff] hover:text-[#fff] hover:bg-black dark:hover:from-transparent dark:hover:to-transparent dark:border dark:border-[transparent] dark:hover:border-[#3E6AE7] duration-300 flex rounded-lg",[e.value===a.value?"text-white bg-black":"bg-white dark:bg-transparent"]])},[S("div",Lt,E(e.name),1)],10,Qt)))),256))],512)])])):B("",!0),"video"===d.value?(I(),C("div",jt,[S("div",Dt,[S("ul",Ot,[(I(!0),C(F,null,U(u.value,(e=>(I(),C("li",{onClick:a=>{return t=e,l.value=t.value,void i.value.handleQuery(t.value);var t},class:ae(["mr-1 ml-1 w-auto select-none cursor-pointer hover:dark:text-[#fff] hover:text-[#fff] hover:bg-black dark:hover:from-transparent dark:hover:to-transparent dark:border dark:border-[transparent] dark:hover:border-[#3E6AE7] duration-300 flex rounded-lg",[e.value===l.value?"text-white bg-black":"bg-white dark:bg-transparent"]])},[S("div",Mt,E(e.name),1)],10,_t)))),256))],512)])])):B("",!0)]),S("div",Yt,["pic"===d.value?(I(),M(ma,{key:0,ref_key:"marketRef",ref:t,type:a.value,keyWord:c.value},null,8,["type","keyWord"])):B("",!0),"video"===d.value?(I(),M(Ua,{key:1,ref_key:"marketRef2",ref:i,type:l.value},null,8,["type"])):B("",!0),"music"===d.value?(I(),M(zt,{key:2})):B("",!0)])]))}}),[["__scopeId","data-v-f479a3cb"]]),Gt={class:"home-page bg-white",style:{display:"flex","flex-direction":"column"}},Kt={class:"sbox"},Zt={key:0,class:"topSwiper"},Jt={class:"bigSwiper"},Wt={class:"name"},Nt={class:"content text-left mt-[5px]"},Xt=["onClick"],Pt={class:"bigSwiper"},$t={class:"name"},el={class:"content text-left mt-[5px]"},al=["onClick"],tl={class:"shuSwiper"},ll={class:"shuItem"},il={class:"name"},sl=["onClick"],nl={class:"shuItem"},ol={class:"name"},rl=["onClick"],ul={class:"bigSwiper"},cl=["onClick","src"],dl={key:1,class:"marqueeBox"},vl=["onClick"],pl={key:2,class:"marqueeBox",style:{"margin-bottom":"36px"}},gl=["onClick"],ml=L(s({__name:"homePage",setup(e){const{scrollRef:a,scrollToBottom:t,scrollToBottomIfAtBottom:l}=ye(),i=m(),s=r((()=>i.isLogin)),n=ue(),u=ce();o(!0),o(!1);const c=o(null);r((()=>n.chatList));const d=o("");h();const v=de(),f=o([]),{isMobile:A}=se(),w=e=>{if(!(e.target.indexOf("http")>-1))return s.value?void X.push(e.target):(i.setLoginDialog(!0),void Q.emit("register",0));window.open(e.target)},x=r((()=>v.query.appId));let L=o([]),j=o([]);y((async()=>{(async(e={})=>{try{e=Object.assign({type:"swiper",notInTagId:"112,113"},e);let a=(await _e(e)).data.rows;f.value=a}catch(a){f.value=[]}})(),g({url:"/cm/getValue?code=ChatRecTalk",data:{}}).then((e=>{[L.value,j.value]=function(e){const a=Math.floor(e.length/2),t=e.slice(0,a),l=e.slice(a);return[t,l]}(e.data.recList),console.log(L.value,j.value,"recList.valuerecList.value")})),Q.emit("onConversation"),Q.emit("aboutIsShow"),await i.getUserInfo(),x.value&&await async function(e){const a=+e;await X.replace({name:"Chat",query:{}});const t=n.groupList.find((e=>e.appId===a));t?await n.setActiveGroup(t.uuid):(await n.addNewChatGroup(a),await n.queryMyGroup()),d.value&&handlePrompt(d.value)}(Number(x.value)),await p((async()=>{var e;await n.queryActiveChatLogList(),await n.queryMyGroup(),await t(),c.value&&!A.value&&(null==(e=c.value)||e.focus())}))})),o("");let D=e=>{console.log(e,"row.valuerow.value"),X.push({name:"Chat",query:{rec:e}})};o(0);const O=o(!1);Q.on("exploreApp",(e=>{O.value=e})),o([]),o();const _=o(!1);Q.on("chatLogList",(e=>{0==e.length?_.value=!1:_.value=!0})),Q.on("haveLog",(e=>{_.value=e})),Q.on("notData",(e=>{_.value=!1}));const Y=r((()=>n.active));r((()=>n.groupList.find((e=>e.uuid===Y.value))));const H=o({});!async function(){try{const e=await k({keys:["siteName","clientLogoPath","siteKeyword","subSiteName"]});H.value=e.data}catch(e){console.log(e)}}(),o(r((()=>u.homePageType)));let G=o([]),K=o([]),Z=o([]);return(async()=>{let e=await _e({type:"home",tagId:"73"});if(G.value=e.data.rows,e.data.rows.length>3){const a=function(e){const a=e.slice(0,2),t=e.slice(2),l=Math.ceil(t.length/2),i=t.slice(0,l),s=t.slice(l);return{firstTwo:a,part1:i,part2:s}}(e.data.rows);G.value=a.firstTwo,K.value=a.part1,Z.value=a.part2}})(),ve((()=>{})),(e,a)=>(I(),C("div",Gt,[S("div",Kt,[b(G)&&b(G).length>0?(I(),C("div",Zt,[S("div",Jt,[R(b(me),{ref:"topQswiper1",style:{width:"100%"},"show-dots":!1},{default:z((()=>[(I(!0),C(F,null,U([b(G)[0]],((e,a)=>(I(),M(b(fe),{key:a},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${e.cover}')`}])},[S("div",Wt,E(e.name),1),S("span",Nt,E(e.description),1),S("div",{class:"btnBox",onClick:a=>w(e)},"立即使用",8,Xt)],4)])),_:2},1024)))),128))])),_:1},512)]),S("div",Pt,[R(b(me),{ref:"topQswiper2",style:{width:"100%"},"show-dots":!1},{default:z((()=>[(I(!0),C(F,null,U([b(G)[1]],((e,a)=>(I(),M(b(fe),{key:a},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${e.cover}')`}])},[S("div",$t,E(e.name),1),S("span",el,E(e.description),1),S("div",{class:"btnBox",onClick:a=>w(e)},"立即使用",8,al)],4)])),_:2},1024)))),128))])),_:1},512)]),S("div",tl,[S("div",ll,[R(b(me),{ref:"topQswiper3",autoplay:"",style:{width:"100%"},"show-dots":!1,interval:1e4},{default:z((()=>[(I(!0),C(F,null,U(b(K),((e,a)=>(I(),M(b(fe),{key:a},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${e.cover}')`}])},[S("div",il,E(e.name),1),S("div",{class:"btnBox",onClick:a=>w(e)},[R(b(T),{size:"20",color:"#8F91A8"},{default:z((()=>[R(b(V))])),_:1})],8,sl)],4)])),_:2},1024)))),128))])),_:1},512)]),S("div",nl,[R(b(me),{ref:"topQswiper4",autoplay:"",style:{width:"100%"},"show-dots":!1,interval:1e4},{default:z((()=>[(I(!0),C(F,null,U(b(Z),((e,a)=>(I(),M(b(fe),{key:a},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${e.cover}')`}])},[S("div",ol,E(e.name),1),S("div",{class:"btnBox",onClick:a=>w(e)},[R(b(T),{size:"20",color:"#8F91A8"},{default:z((()=>[R(b(V))])),_:1})],8,rl)],4)])),_:2},1024)))),128))])),_:1},512)])]),S("div",ul,[R(b(me),{autoplay:"",style:{width:"100%"}},{default:z((()=>[(I(!0),C(F,null,U(f.value,((e,a)=>(I(),C("img",{style:{width:"100%",height:"280px"},onClick:a=>w(e),key:a,src:e.cover},null,8,cl)))),128))])),_:1})])])):B("",!0),b(L).length>0?(I(),C("div",dl,[R(b(Oe),{"auto-fill":"",speed:24},{default:z((()=>[(I(!0),C(F,null,U(b(L),((e,a)=>(I(),C("span",{class:"item",key:a,onClick:a=>b(D)(e.title)},[S("div",null,[R(b(pe),{width:"22px",height:"22px",src:e.icon,style:{"margin-right":"4px"}},null,8,["src"]),S("span",null,E(e.title),1)])],8,vl)))),128))])),_:1})])):B("",!0),b(j).length>0?(I(),C("div",pl,[R(b(Oe),{"auto-fill":"",speed:24},{default:z((()=>[(I(!0),C(F,null,U(b(j),((e,a)=>(I(),C("span",{class:"item",key:a,onClick:a=>b(D)(e.title)},[S("div",null,[R(b(pe),{width:"22px",height:"22px",src:e.icon,style:{"margin-right":"4px"}},null,8,["src"]),S("span",null,E(e.title),1)])],8,gl)))),128))])),_:1})])):B("",!0),R(ta),R(Ht,{class:"sbox",style:{padding:"0","margin-top":"32px"}})]),R(he)]))}}),[["__scopeId","data-v-93278761"]]);export{ml as default};
