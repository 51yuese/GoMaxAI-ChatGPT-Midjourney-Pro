import{u as e,c as a,a as t,b as l,d as i,e as s,f as n,r as o,g as r,h as u,V as c,i as d,m as v,n as p,j as m,k as g,l as f,o as h,p as A,q as y,s as w,t as x,v as k,w as I,x as C,y as b,z as E,A as B,B as S,C as R,D as z,F,E as U,G as q,N as T,H as V,I as j,_ as Q,J as D,K as L,L as O,M as _,O as M,P as Y,Q as H,T as K,R as Z,S as J,U as W,W as G,X as P,Y as N,Z as X,$,a0 as ee,a1 as ae,a2 as te,a3 as le,a4 as ie,a5 as se,a6 as ne,a7 as oe,a8 as re,a9 as ue,aa as ce,ab as de,ac as ve,ad as pe,ae as me}from"../main-a0b53047.js";import{v as ge}from"../chat/chat.ab6053bb.js";import{N as fe,a as he}from"../Carousel/Carousel.5284d14c.js";import{C as Ae}from"../ChevronBack/ChevronBack.7b953ca0.js";import{C as ye}from"../index1/index1.54198431.js";import{u as we}from"../useScroll/useScroll.0e3b73b2.js";import{I as xe}from"../mj-menu/mj-menu.41e6da46.js";import{_ as ke,a as Ie}from"../dianzan/dianzan.4417d952.js";import{f as Ce}from"../ppt/ppt.f32a6456.js";import{t as be}from"../throttle/throttle.33f09de3.js";import{v as Ee,a as Be,m as Se,b as Re,c as ze,d as Fe}from"../music/music.aee9a7ff.js";import{_ as Ue,a as qe,b as Te,c as Ve,d as je}from"../light_music_end/light_music_end.c20cf1cf.js";import"../police/police.deef576c.js";const Qe=Object.assign(Object.assign({},e.props),{autoFill:Boolean,speed:{type:Number,default:48}}),De=a([t("marquee","\n overflow: hidden;\n display: flex;\n ",[l("group","\n flex: 0 0 auto;\n min-width: var(--n-min-width);\n z-index: 1;\n display: flex;\n flex-direction: row;\n align-items: center;\n animation: n-marquee var(--n-duration) linear var(--n-delay) var(--n-iteration-count);\n animation-play-state: var(--n-play);\n animation-delay: var(--n-delay);\n animation-direction: var(--n-direction);\n "),i("auto-fill",[l("group","min-width: 100%;"),l("item","min-width: 100%;")])]),a("@keyframes n-marquee",{from:{transform:"translateX(0)"},to:{transform:"translateX(-100%)"}})]),Le=s({name:"Marquee",props:Qe,setup(a){const{mergedClsPrefixRef:t}=n(a);e("Marquee","-marquee",De,v,a,t);const l=o(null),i=o(-1),s=o(-1),u=o("running"),c=r((()=>{if(!a.autoFill)return 1;const{value:e}=i,{value:t}=s;return-1===e||-1===t?1:Math.ceil(s.value/e)})),d=r((()=>{const{value:e}=i;return-1===e?0:e*c.value/a.speed}));return{mergedClsPrefix:t,animationCssVars:r((()=>({"--n-play":u.value,"--n-direction":"normal","--n-duration":`${d.value}s`,"--n-delay":"0s","--n-iteration-count":"infinite","--n-min-width":"auto"}))),containerElRef:l,repeatCountInOneGroup:c,handleContainerResize:function(e){s.value=e.contentRect.width},handleContentResize:function(e){i.value=e.contentRect.width},handleAnimationIteration:function(){u.value="paused",p().then((()=>{var e;null===(e=l.value)||void 0===e||e.offsetTop,u.value="running"}))}}},render(){const{$slots:e,mergedClsPrefix:a,animationCssVars:t,repeatCountInOneGroup:l,handleAnimationIteration:i}=this,s=u(c,{onResize:this.handleContentResize},u("div",{class:`${a}-marquee__item ${a}-marquee__original-item`},e)),n=u("div",{class:`${a}-marquee__item`},e);return this.autoFill?u(c,{onResize:this.handleContainerResize},u("div",{class:`${a}-marquee ${a}-marquee--auto-fill`,ref:"containerElRef",style:t},u("div",{class:`${a}-marquee__group`,onAnimationiteration:i},s,d(l-1,n)),u("div",{class:`${a}-marquee__group`},d(l,n)))):u("div",{class:[`${a}-marquee`],ref:"containerElRef",style:t},u("div",{class:`${a}-marquee__group`,onAnimationiteration:i},s),u("div",{class:`${a}-marquee__group`},n))}}),Oe=(e={})=>m({url:"/index-rec/page",data:{page:1,size:100,...e}}),_e={class:"recommend"},Me={key:0,class:"text-[#000] dark:text-[#FFFFFF] text-[24px]",style:{margin:"0px 0 10px","font-weight":"500"}},Ye={key:1,class:"Module__BannerSearch"},He={class:"swiper"},Ke=["onClick","src"],Ze={class:"swiperR"},Je=["onClick"],We=["src"],Ge={class:"bold"},Pe={class:"ellipsi"},Ne={key:0,class:"recomLabel"},Xe={class:"readItem zero"},$e=["onClick"],ea=["onClick"],aa=Q(s({__name:"RecommendItem",setup(e){const a=g(),t=r((()=>a.isLogin)),l=f(),i=o([]);o(0);const s=o([]),n=o([[]]),u=o([]),c=o([]);o("查看推荐"),o(),h(),A();const d=o();y((()=>{O(),M(),async function(){try{const e=await k({keys:["siteName","clientLogoPath","siteKeyword","subSiteName"]});d.value=e.data}catch(e){console.log(e)}}(),p(),L(),(async()=>{console.log("aaaa");const e=await ge();200==e.code&&(i.value=e.data.chatMarquee)})()}));let v=o([[]]),p=async()=>{try{let e=await Oe({type:"home",tagId:"118",page:1,size:99}),a=0;e.data.rows.forEach(((e,t)=>{t<5*(a+1)?v.value[a].push(e):(a++,v.value[a]=[e])}))}catch(e){v.value=[]}},m=o([]),Q=o([]),D=o([]),L=async()=>{w({type:"recommend"}).then((e=>{m.value=e.data.slice(0,7)})),w({type:"popular"}).then((e=>{Q.value=e.data.slice(0,7)})),w({type:"latest"}).then((e=>{D.value=e.data.slice(0,7)}))};const O=async()=>{try{let e=await Oe({type:"home",tagId:"73"});s.value=e.data.rows;let a=0;e.data.rows.forEach(((e,t)=>{t<4*(a+1)?n.value[a].push(e):(a++,n.value[a]=[e])}));let t=await w({type:"recommend"}),l=await x({page:1,size:4});console.log(t),u.value=t.data.splice(0,3),c.value=l.data.rows}catch(e){n.value=[[]]}};let _=o([[]]);const M=async()=>{try{let e=await Oe({type:"home",tagId:"119",page:1,size:99}),a=0;e.data.rows.forEach(((e,t)=>{t<10*(a+1)?_.value[a].push(e):(a++,_.value[a]=[e])}))}catch(e){_.value=[]}},Y=e=>{if(e.targetUrl)l.push(e.targetUrl);else{if(!(e.target.indexOf("http")>-1))return t.value?void l.push(e.target):(a.setLoginDialog(!0),void j.emit("register",0));window.open(e.target)}};return(e,a)=>{var t;return I(),C("div",_e,[b(_).length>0?(I(),C("div",Me,E(null==(t=b(_)[0][0])?void 0:t.tagName),1)):B("",!0),b(_).length>0?(I(),C("div",Ye,[S("div",He,[R(b(fe),{autoplay:"",style:{width:"100%"}},{default:z((()=>[(I(!0),C(F,null,U(i.value,((e,a)=>(I(),C("img",{onClick:a=>Y(e),key:a,class:"carousel-img",src:e.url},null,8,Ke)))),128))])),_:1})]),S("div",Ze,[R(b(fe),{autoplay:"",style:{width:"100%","padding-top":"48px"},"show-arrow":"","show-dots":!1},{arrow:z((({prev:e,next:a})=>[S("div",{class:"custom-arrow",style:q(b(_).length<2?"opacity: 0;":"")},[S("button",{type:"button",class:"custom-arrow--left",onClick:e},[R(b(T),null,{default:z((()=>[R(b(Ae))])),_:1})],8,$e),S("button",{type:"button",class:"custom-arrow--right",onClick:a},[R(b(T),null,{default:z((()=>[R(b(V))])),_:1})],8,ea)],4)])),default:z((()=>[(I(!0),C(F,null,U(b(_),((a,t)=>(I(),C("div",{class:"readBox",key:t},[(I(!0),C(F,null,U(a,((a,t)=>(I(),C("div",{class:"readItem",style:q([{"background-image":`url('${a.cover}')`,"background-repeat":"no-repeat","background-size":"100% 100%"}]),onClick:e=>Y(a),key:t},[S("img",{src:a.icon,alt:""},null,8,We),S("div",Ge,E(a.name),1),S("div",Pe,E(a.description),1),1==a.publish_flag?(I(),C("div",Ne,E(e.$t("common.hotRecomm")),1)):B("",!0)],12,Je)))),128)),(I(),C(F,null,U(7,(e=>S("div",Xe))),64))])))),128))])),_:1})])])):B("",!0)])}}}),[["__scopeId","data-v-29c1cfeb"]]),ta={class:"overflow-hidden pr-0 h-full flex flex-col"},la={class:"market overflow-y-auto flex-1 relative itemContent"},ia=["onClick","src"],sa=["id"],na=["id","src","onLoad","onError"],oa=["onClick"],ra={class:"bottomInfoBox"},ua={class:"userInfo"},ca=["src"],da=["onClick"],va={key:0,src:ke,class:"dianzan",alt:""},pa={key:1,src:Ie,class:"dianzan",alt:""},ma=Q(s({__name:"market",props:{type:{type:String,required:!1,default:"all"},keyWord:{type:String,default:""}},setup(e,{expose:a}){var t;const l=g();null==(t=D())||t.appContext.config.globalProperties.$viewerApi,A();const i=o([]),s=o({}),n=o(0),u=o(160),c=o(0),d=o(10),v=o(10),p=o([]),m=o(null),h=o(0),w=r((()=>l.isLogin)),x=o(30),k=o(""),T=r((()=>x.value+d.value+250)),V=f(),Q=e,P=o();j.on("newData",(e=>{P.value=e}));const N=L({page:1,size:999,rec:1,squareType:Q.type,keyword:""});function X(){!function(){const{showName:e=0,showOther:a=0}={};n.value=15*[e,a].filter((e=>e)).length}(),function(){if(!m.value)return;const e=m.value.clientWidth;c.value=Math.floor(e/T.value);const a=e-c.value*T.value,t=(c.value-1)*d.value;a-t<0&&(c.value-=1);u.value=Math.floor((e-t)/c.value),console.log(u.value,"realWidth.value")}();const e=c.value,a=u.value,t=[];ee.value.forEach(((l,i)=>{let o=200,r=300;l.fileInfo&&(o=l.fileInfo.width||o,r=l.fileInfo.height||r);const c=r*(a/o)+v.value+n.value,p=s.value[l.id];if(t.length<e)p.style.top="0px",p.style.left=(a+d.value)*i+"px",t.push(c);else{const e=Math.min.apply(null,t),a=t.findIndex((a=>a===e));p.style.top=`${e+0}px`,p.style.left=a*(u.value+d.value)+"px",t[a]+=c}})),h.value=Math.max(...t)+130}function $(e,a){e&&a&&(s.value[a.id]=e)}const ee=r((()=>P.value?P.value.rows:k.value?i.value.filter((e=>{const{prompt:a}=e;return a.includes(k.value)})):i.value));O(x,(()=>{X()}));let ae=null;async function te(){let e;e="fav"===N.squareType?await J({page:N.page,size:N.size}):await W(N);let a=[{id:"wapper-carousel",noShow:!0,fileInfo:{width:1024,height:1024}},{id:"wapper-carousel2",noShow:!0,fileInfo:{width:1024,height:1024}},...e.data.rows];a.forEach((e=>{e.src=e.imageUrl+"?imageView2/0/w/400/q/85"})),i.value=a}O(ee,(()=>{ee.value.length&&(clearTimeout(ae),ae=setTimeout((()=>{X()}),300))}));const le=r((()=>e=>{let a=200,t=300;return e.fileInfo&&(a=e.fileInfo.width,t=e.fileInfo.height),t/(a/u.value)})),ie=be((function(){X()}),200);let se=o([]);y((async()=>{await te(),X(),window.addEventListener("resize",ie),Ce({code:"MjRcMarquee"}).then((e=>{var a;se.value=null==(a=e.data)?void 0:a.recMarquee,se.value.forEach((e=>{e.fileInfo={width:1024,height:1024}}))}))})),a({handleQuery:e=>{N.keyword="",N.squareType=e,te(),X()},handleSearch:e=>{N.squareType="",N.keyword=e,te(),X()}}),_((()=>{window.removeEventListener("resize",ie)}));const ne=o(0);return(e,a)=>(I(),C("div",ta,[S("div",la,[S("div",{id:"wapper",ref_key:"wapperRef",ref:m,class:"wapper",style:q({height:`${h.value}px`})},[b(se).length>0?(I(),M(b(fe),{key:0,class:"wapper-item",id:"wapper-carousel",ref:e=>$(e,{id:"wapper-carousel"}),style:q([{width:2*u.value+10+"px",height:`${le.value(b(se)[0])}px`},{"border-radius":"8px",overflow:"hidden"}]),draggable:""},{default:z((()=>[(I(!0),C(F,null,U(b(se),((e,a)=>(I(),C("img",{class:"carousel-img",onClick:a=>(e=>{if(!(e.targetUrl.indexOf("http")>-1))return w.value?void V.push(e.targetUrl):(l.setLoginDialog(!0),void j.emit("register",0));window.open(e.targetUrl)})(e),style:q({width:2*u.value+10+"px",height:`${le.value(e)}px`}),src:e.url},null,12,ia)))),256))])),_:1},8,["style"])):B("",!0),(I(!0),C(F,null,U(ee.value,((a,t)=>{var l,i;return Y((I(),C("div",{id:a.id,key:t,ref_for:!0,ref:e=>$(e,a),class:"wapper-item",style:q({width:`${u.value}px`})},[R(K,{name:"img",css:!0},{default:z((()=>[S("img",{id:a.id,class:"item-file rounded-sm",style:q({width:`${u.value}px`,height:`${le.value(a)}px`}),src:a.src,loading:"lazy",onLoad:e=>function(e,a){p.value.push(a.id)}(0,a),onError:e=>function(e,a){p.value.push(a.id)}(0,a)},null,44,na)])),_:2},1024),S("div",{class:"menu",onClick:e=>function(e){j.emit("Details",!0),j.emit("DetailsData",e)}(a)},[S("div",null,E(e.$t("homePage.lookDetail")),1)],8,oa),S("div",ra,[S("div",ua,[S("img",{src:(null==(l=a.userInfo)?void 0:l.avatar)||b(Z),class:"smallHead",alt:""},null,8,ca),S("span",null,E((null==(i=a.userInfo)?void 0:i.nickname)||e.$t("homePage.official")),1)]),S("div",{class:"userInfo",onClick:e=>function(e){let a={id:e.id,favorite:e.isCollect?0:1};1!=ne.value&&(ne.value=1,G(a).then((e=>{te(),X(),ne.value=0})).catch((e=>{ne.value=0})))}(a)},[a.isCollect?(I(),C("img",va)):(I(),C("img",pa)),S("span",null,E(a.collectNum||0),1)],8,da)])],12,sa)),[[H,!a.noShow]])})),128))],4)])]))}}),[["__scopeId","data-v-31324b54"]]),ga={class:"overflow-hidden pr-0 h-full flex flex-col wapper"},fa={key:0,class:"market overflow-y-auto flex-1 relative itemContent"},ha=["onClick","src"],Aa=["id"],ya={key:0,class:"img_box"},wa=["id","src","onLoad","onError"],xa={key:0,class:"img_info"},ka=["title"],Ia=["onClick","onMouseenter","onMouseleave"],Ca=["src","poster","autoplay"],ba={class:"bottomInfoBox"},Ea={class:"userInfo"},Ba=["src"],Sa=["onClick"],Ra={key:0,src:ke,class:"dianzan",alt:""},za={key:1,src:Ie,class:"dianzan",alt:""},Fa=Q(s({__name:"newMarket",props:{type:{type:String,required:!1,default:"all"},keyWord:{type:String,default:""}},setup(e,{expose:a}){const t=g(),l=r((()=>t.isLogin)),i=o([]),s=o({}),n=o(0),u=o(160),c=o(0),d=o(10),v=o(10),p=o([]),m=o(null),f=o(0),h=o(30);o("");const A=r((()=>h.value+d.value+250)),w=e,x=o();j.on("newData",(e=>{x.value=e}));const k=L({page:1,size:999,rec:1,classify:w.type,keyword:""});function T(){!function(){const{showName:e=0,showOther:a=0}={};n.value=15*[e,a].filter((e=>e)).length}(),function(){if(!m.value)return;const e=m.value.clientWidth;c.value=Math.floor(e/A.value);const a=e-c.value*A.value,t=(c.value-1)*d.value;a-t<0&&(c.value-=1);u.value=Math.floor((e-t)/c.value),console.log(u.value,"realWidth.value")}();const e=c.value,a=u.value,t=[];Q.value.forEach(((l,i)=>{let o=200,r=300;l.fileInfo&&(o=l.fileInfo.width||o,r=l.fileInfo.height||r);const c=r*(a/o)+v.value+n.value,p=s.value[l.id];if(t.length<e)p.style.top="0px",p.style.left=(a+d.value)*i+"px",t.push(c);else{const e=Math.min.apply(null,t),a=t.findIndex((a=>a===e));p.style.top=`${e+0}px`,p.style.left=a*(u.value+d.value)+"px",t[a]+=c}})),f.value=Math.max(...t)+130}function V(e,a){e&&a&&(s.value[a.id]=e)}const Q=r((()=>x.value?x.value.rows:i.value));O(h,(()=>{T()}));let D=null;async function J(){if("pic"===w.type){let e=(await W(k)).data.rows;e.forEach((e=>{e.src=e.imageUrl+"?imageView2/0/w/400/q/85"})),i.value=e}else{const e=await async function(){var e;try{let a;a="fav"===k.classify?await Se({page:1,size:999,keyword:k.keyword,modelType:"video"}):await Re({...k,modelType:"video"});let t=(null==(e=null==a?void 0:a.data)?void 0:e.records)||[],l=[{id:"wapper-carousel",noShow:!0,fileInfo:{width:1024,height:1024}},{id:"wapper-carousel2",noShow:!0,fileInfo:{width:1024,height:1024}}];return t.forEach((async e=>{e.intro=e.prompt.split("--")[0].split("prompt ")[1],e.fileInfo={width:0,height:0},e.mp4&&l.push(e)})),l}catch(a){return[]}}(),a=await new Promise((a=>{let t=0;e.forEach((l=>{const i=new Image;i.onload=()=>{l.fileInfo={width:i.width,height:i.height},t++,t==e.length&&a(e)},i.onerror=()=>{console.log(i,"onerror"),t++,t==e.length&&a(e)},i.src=l.cover,l.imageUrl=l.cover}))}));i.value=a}}O(Q,(()=>{Q.value.length&&(clearTimeout(D),D=setTimeout((()=>{T()}),300))}));const G=r((()=>e=>{let a=200,t=300;return e.fileInfo&&e.fileInfo.width&&(a=e.fileInfo.width,t=e.fileInfo.height),t/(a/u.value)})),X=be((function(){T()}),200);let $=o([]);y((async()=>{await J(),T(),window.addEventListener("resize",X),Ce({code:"AIVideoGlobalConfig"}).then((e=>{var a;$.value=null==(a=e.data)?void 0:a.recMarquee,$.value.forEach((e=>{e.fileInfo={width:1024,height:1024}}))}))})),a({handleQuery:e=>{k.keyword="",k.classify=e,J(),T()},handleSearch:e=>{k.classify="",k.keyword=e,J(),T()}}),_((()=>{window.removeEventListener("resize",X)}));const ee=o(),ae=o(0);return(a,i)=>(I(),C("div",ga,[Q.value.length?(I(),C("div",fa,[S("div",{id:"wapper",ref_key:"wapperRef",ref:m,class:"wapper",style:q({height:`${f.value}px`})},[b($).length>0?(I(),M(b(fe),{key:0,class:"wapper-item",id:"wapper-carousel",ref:e=>V(e,{id:"wapper-carousel"}),style:q([{width:2*u.value+10+"px",height:`${G.value(b($)[0])}px`},{"border-radius":"8px",overflow:"hidden"}]),draggable:""},{default:z((()=>[(I(!0),C(F,null,U(b($),((e,a)=>(I(),C("img",{class:"carousel-img",onClick:a=>(e=>{if(!(e.targetUrl.indexOf("http")>-1))return l.value?void N.push(e.targetUrl):(t.setLoginDialog(!0),void j.emit("register",0));window.open(e.targetUrl)})(e),style:q({width:2*u.value+10+"px",height:`${G.value(e)}px`}),src:e.url},null,12,ha)))),256))])),_:1},8,["style"])):B("",!0),(I(!0),C(F,null,U(Q.value,((s,n)=>Y((I(),C("div",{id:s.id,key:n,ref_for:!0,ref:e=>V(e,s),class:"wapper-item",style:q({width:`${u.value}px`})},[R(K,{name:"img",css:!0},{default:z((()=>["pic"===e.type?(I(),C("div",ya,[S("img",{id:s.id,class:"item-file rounded-sm",style:q({width:`${u.value}px`,height:`${G.value(s)}px`}),src:s.src,loading:"lazy",onLoad:e=>function(e,a){p.value.push(a.id)}(0,s),onError:e=>function(e,a){p.value.push(a.id)}(0,s)},null,44,wa),s.fullPrompt&&""!==s.fullPrompt&&s.fullPrompt.length?(I(),C("div",xa,[S("span",{class:"introduction",title:s.fullPrompt},E(s.fullPrompt),9,ka)])):B("",!0)])):(I(),C("div",{key:1,class:"img_box",onClick:e=>function(e){if(!l.value)return t.setLoginDialog(!0),void j.emit("register",0);j.emit("Details",!0),j.emit("DetailsData",e)}(s),onMouseenter:e=>(e=>{if(ee.value&&ee.value.id==e.id)return;if(!e.mp4)return;const a=document.querySelector(`video[src="${e.mp4}"]`);a.play(),a.loop=!0,ee.value=e})(s),onMouseleave:e=>(e=>{if(!e.mp4)return;document.querySelector(`video[src="${e.mp4}"]`).pause(),ee.value=null})(s)},[S("video",{src:s.mp4,poster:s.cover,class:"item-file rounded-sm",style:q([{width:`${u.value}px`,height:`${G.value(s)}px`},{width:"100%","object-fit":"fill"}]),autoplay:ee.value&&ee.value.id==s.id},null,12,Ca),i[0]||(i[0]=S("div",{class:"menu"},null,-1))],40,Ia))])),_:2},1024),S("div",ba,[S("div",Ea,[S("img",{src:s.avatar||b(Z),class:"smallHead",alt:""},null,8,Ba),S("span",null,E(s.nickname||a.$t("homePage.official")),1)]),S("div",{class:"userInfo",onClick:e=>function(e){let a={id:e.id};1!=ae.value&&(ae.value=1,e.isCollect?Ee(a).then((e=>{J(),T(),ae.value=0})).catch((e=>{ae.value=0})):Be(a).then((e=>{J(),T(),ae.value=0})).catch((e=>{ae.value=0})))}(s)},[s.isCollect?(I(),C("img",Ra)):(I(),C("img",za)),S("span",null,E(s.collectNum||0),1)],8,Sa)])],12,Aa)),[[H,!s.noShow]]))),128))],4)])):(I(),M(b(P),{key:1,description:a.$t("common.noData"),class:"empty"},null,8,["description"]))]))}}),[["__scopeId","data-v-1a2e2ffd"]]),Ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAETSURBVCiRlZC9SgNREIXPuXcTMS4SlMRFJJEUFkE7K20iBl/DwiewsBBfQFTwVay1cEtBEKxsV0hhIoQtlhju7t6xSrJXCehU83dm5hvgn8afiZvDoE2oHShrTYrn8/AjKtZ1Mbjq1AJo71iImoB1rbC911h8CaORmfSookC88qYTg56P0kYx5wj+Yo6AmYkosLMNGCdIe3MZHqJRctBceleED3CAPL27CD+HztCJc320VofVXUJaAnoAQBGjFN6Yfj2ehnE83XDbqVZzLJyQCADOziS1gIFlaWu/ufoaRnGmAMCqSptEZS4pseLrcWsKnWkX9le/iEnKpucwXHbXGx5k11pZdr4iamhL+dPZfX8AAN8SFlq325tYKwAAAABJRU5ErkJggg==",qa={class:"bg-[#ffffff] dark:bg-[#24252B] musicBody"},Ta={class:"mainBox"},Va={class:"bg-[#F8F9F9] dark:bg-[#24252B]",style:{height:"100%"}},ja={class:"contentBox"},Qa={style:{display:"flex",height:"100%"}},Da={style:{display:"flex","flex-direction":"column",overflow:"hidden",width:"100%"}},La={class:"contextBox"},Oa={class:"contextBox-rec"},_a=["onClick"],Ma={class:"contextBox-rec-item-title"},Ya={class:"contextBox-input"},Ha=["placeholder"],Ka={style:{"margin-top":"3px"}},Za={class:"contextBox-hot-title"},Ja={class:"itemTop"},Wa={class:"topImg"},Ga=["src","alt"],Pa={class:"topTitle"},Na={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},Xa={style:{display:"flex","align-items":"center",margin:"10px 0"}},$a={key:0,src:je,style:{"margin-right":"4px"}},et={key:1,src:Ua,style:{"margin-right":"4px",transform:"translateY(-2px)"}},at={class:"intro text-[#8B8C8C] dark:text-[#727586]"},tt={class:"contextBox-hot-title"},lt={class:"itemTop"},it={class:"topImg"},st=["src","alt"],nt={class:"topTitle"},ot={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},rt={style:{display:"flex","align-items":"center",margin:"10px 0"}},ut={key:0,src:je,style:{"margin-right":"4px"}},ct={key:1,src:Ua,style:{"margin-right":"4px",transform:"translateY(-2px)"}},dt={class:"intro text-[#8B8C8C] dark:text-[#727586]"},vt={key:0,class:"videoBox"},pt={style:{position:"relative"}},mt=["src"],gt={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[17px]",style:{"margin-top":"12px","font-weight":"550","text-align":"left",padding:"0 10px"}},ft={style:{display:"flex","align-items":"center","justify-content":"left",margin:"12px 0",padding:"0 10px"}},ht={key:0,src:je,style:{"margin-right":"4px"}},At={key:1,src:Ua,style:{"margin-right":"4px",transform:"translateY(-2px)"}},yt={class:"introList"},wt=["src"],xt={style:{position:"fixed",bottom:"0",width:"100%"}},kt={key:0,class:"dark:bg-[#303137] bg-[#fff] text-[#8B8C8C] dark:text-[#6C6E79] border-t border-[#E8E8E8] dark:border-[#292A2E]",style:{padding:"0px 375px 0px 100px","box-sizing":"border-box"}},It={class:"control dark:bg-[#303137] bg-[#FFF] text-[#8B8C8C] dark:text-[#6C6E79] border-[#E8E8E8] dark:border-[#292A2E]"},Ct={style:{display:"flex","align-items":"center"}},bt={style:{display:"flex","align-items":"center",gap:"5px","margin-right":"20px"}},Et=["src"],Bt={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[14px]"},St={style:{color:"#727586","margin-top":"10px",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden","text-overflow":"ellipsis",width:"180px"}},Rt={style:{display:"flex","align-items":"center",flex:"1","padding-right":"20px","margin-left":"20px"}},zt={style:{width:"100%"}},Ft={style:{"margin-top":"4px",display:"flex","align-items":"center",gap:"10px"}},Ut=["src"],qt=Q(s({__name:"musicSquare",setup(e){const a=A(),t=g(),l=r((()=>t.isLogin));let i=null;const s=f(),n=X();n.setTheme("light");const u=r((()=>"dark"===n.theme)),c=o();o(0);const d=o(1),v=o();o("");const p=o(""),m=o([]),h=o("00:00"),y=o("00:00"),w=o(""),x=o(""),k=o(0),q=o(null),T=o([]);function V(){i||(i=a.loading($("homePage.dataLoading"),{duration:0}));let e={size:50,modelType:"music",page:d.value,order:p.value};Re(e).then((e=>{v.value=e.data.count,T.value=e.data.records,G()})).catch((e=>{G()}))}V(),ze({dictType:"music-lyrics"}).then((e=>{m.value=e.data.rows}));const j=o();Re({size:6,modelType:"music",page:1,order:"agreeNum"}).then((e=>{j.value=e.data.records}));const Q=o(""),D=o(!1),L=o(""),_=o(0);function H(){const e=q.value;D.value?(D.value=!1,e.pause()):(D.value=!0,e.play())}function K(){_.value-1<0?(_.value=T.value.length-1,L.value=T.value[_.value]):(_.value=_.value-1,L.value=T.value[_.value]);const e=setTimeout((()=>{D.value=!1,H(),clearTimeout(e)}))}function Z(){_.value+1>T.value.length-1?(_.value=0,L.value=T.value[_.value]):(_.value=_.value+1,L.value=T.value[_.value]);const e=setTimeout((()=>{D.value=!1,H(),clearTimeout(e)}))}function J(e,a){if(!l.value)return void t.setLoginDialog(!0);if(L.value&&L.value.id==e.id)return void H();Fe({id:e.id,type:"music"}),V(),e.introList=e.intro.split("\n"),L.value=e,_.value=a;const i=setTimeout((()=>{D.value=!1,H(),clearTimeout(i)}))}O((()=>L.value),((e="")=>{}));const W=o(!1);function G(){i&&(i.destroy(),i=null)}function P(){L.value&&(L.value.operation=!1),W.value=!1,T.value.forEach((e=>{e.operation=!1}))}const N=o(null);function ne(){const e=N.value;if(e.scrollTop+e.clientHeight+1>=e.scrollHeight){if(30*d.value>=v.value)return;d.value++,V()}}function oe(){w.value=q.value.duration,x.value=q.value.currentTime,y.value=ue(parseInt(q.value.currentTime)),h.value=ue(parseInt(q.value.duration))}function re(e){y.value=ue(parseInt(e.target.currentTime)),x.value=e.target.currentTime,function(){let e=x.value/w.value*100;k.value=e;const a=q.value;k.value>=100&&(D.value=!1,a.pause(),x.value=0,k.value=0,y.value="00:00")}()}function ue(e){let a=parseInt(e/60),t=parseInt(e%60);return a=a>=10?a:"0"+a,t=t>=10?t:"0"+t,a+":"+t}const ce=o(!1);function de(){c.value&&localStorage.setItem("music_rec_prompt",c.value),s.push({path:"/music/creativeCenter"})}function ve(){q.value.pause()}function pe(){q.value.currentTime=x.value,q.value.play()}return(e,a)=>(I(),C("div",qa,[W.value?(I(),C("div",{key:0,class:"mask",onClick:P})):B("",!0),S("div",Ta,[S("div",Va,[S("div",ja,[S("div",Qa,[S("div",Da,[S("div",La,[S("div",Oa,[(I(!0),C(F,null,U(m.value.slice(0,3),(e=>(I(),C("div",{class:"contextBox-rec-item bg-gradient-to-t to-[#2c2d32] from-[#3F3C31] text-[14px] p-[20px]",onClick:a=>c.value=e.dictValue},[S("div",Ma,E(e.dictValue),1),a[4]||(a[4]=S("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAErSURBVFiF7dbBbYMwFMbxv2lzhw0YoYzABtmg7QRppPaQCaIIJEZIN8gIjOCMwAbmHir3YGhaCSNsWqUHfxcE8nv84CEAQkL+YcSSYiWLCkQMuk2yt61vn2gJAvQa9JPZ+mch4ncSEEMCYkhADJlEKHlYK1nFS06gZBUreZh8j1gRShYvEJ2gq5Xcp36AfQpdDdHJ9HNAmKsXm373AVbOELN+VZt6ALGx3dVRRJJtW7jkIBpzRKcukCtA9+tFA5fc9J2JMJBd4wOxA3aNrWbywXSF+ABg5qfczLL7Pt8ed1eDSEE38JH/BHCGe+sInBF2iI6BGGhBtD4AJ8Q4ZDROAGfEDIgzwAtxxZRH81f11eo9yV6ffft5R8nyqGShDeiGUbJ8vCkgJOSv8gnIw5o7HWqnWwAAAABJRU5ErkJggg=="},null,-1))],8,_a)))),256))]),S("div",Ya,[Y(S("input",{class:"inp","onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),type:"text",placeholder:e.$t("music.text1")},null,8,Ha),[[ee,c.value]]),R(b(ae),{class:"music_btn",show:ce.value,stroke:"#000"},{default:z((()=>[S("div",{class:"flex items-center",onClick:de},[S("span",Ka,E(e.$t("music.create")),1),a[5]||(a[5]=S("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEOSURBVDiNrZLhTcQwDIWfmwwQJiBsYLXqHjACIzABbMAINwIwAYzgDS7doAPEMj/InUqaU3uI9yfKk/P5JQ6hUt/3L0T0XPtb6mqDiG6vhZhZWoH+qhYoXgshov9L5GvDzCIRQVXvNg97H83sE0BagQosiUjaAo3jGMwMQHtqcQuwaBjKOjXfiIg20xTA+av8AjHzKc28N1VpfLw0tb2gsErEzMF7H5vlDTFzMLObkmjyzBydc28A+DQBM5suAYZhuAfwip+Pe07unXMHALw3BYDD4koBAHLOqWtBiOjYAnnveQFZau4AfNWmqn60QDlnAZAqW0Rk7lT1qcBmAALgUUSaUxORWVUfFvXvZY9vsExoA77sdzkAAAAASUVORK5CYII="},null,-1))])])),_:1},8,["show"])]),S("div",Za,E(e.$t("common.hotRecomm")),1),j.value&&j.value.length>2?(I(),C("div",{key:0,class:"content hot",ref_key:"container",ref:N},[(I(!0),C(F,null,U(j.value,((t,l)=>(I(),C("div",{class:te(["contentItem bg-[#F9FAFB]",l<3?"hot":""]),key:t.chatId},[S("div",Ja,[S("div",Wa,[S("img",{class:"bgImg",src:t.cover,alt:e.$t("common.loadFail")},null,8,Ga),L.value&&L.value.id!=t.id||!D.value?(I(),M(b(le),{key:0,onClick:e=>J(t,l),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"])):(I(),M(b(le),{key:1,onClick:H,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"}))]),S("div",Pa,[S("div",Na,E(" "==t.title||null==t.title?e.$t("music.anonymous"):t.title),1),S("div",Xa,[u.value?(I(),C("img",$a)):(I(),C("img",et)),a[6]||(a[6]=S("span",{class:"text-[#8C441A] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),S("div",at,[S("span",null,E(t.intro),1)])])])],2)))),128))],512)):B("",!0),S("div",tt,E(e.$t("music.newMusic")),1),T.value&&T.value.length>2?(I(),C("div",{key:1,class:"content",ref_key:"container",ref:N,onScroll:ne},[(I(!0),C(F,null,U(T.value,((t,l)=>(I(),C("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:t.chatId},[S("div",lt,[S("div",it,[S("img",{class:"bgImg",src:t.cover,alt:e.$t("common.loadFail")},null,8,st),L.value.id==t.id&&D.value?(I(),M(b(le),{key:1,onClick:H,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"})):(I(),M(b(le),{key:0,onClick:e=>J(t,l),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"]))]),S("div",nt,[S("div",ot,E(" "==t.title||null==t.title?e.$t("music.anonymous"):t.title),1),S("div",rt,[u.value?(I(),C("img",ut)):(I(),C("img",ct)),a[7]||(a[7]=S("span",{class:"text-[#8C441A] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),S("div",dt,[S("span",null,E(t.intro),1)])])])])))),128))],544)):B("",!0)])]),L.value?(I(),C("div",vt,[S("div",{class:te(["bg-[#f9fafb] dark:bg-[#222325] musicInfoDialog",{hasMusic:L.value}])},[S("div",pt,[S("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFaSURBVFiF7ZWxUoNAEIb/xcqBzNgEKKkCM0lhmZIXSJ7B0s7WLqSzy+QJHB9BbLQKvkMswhNgUjkDrWchROIcuSWaKvdXx83e/h+7d7OAlpbWqetMFeAOxpHZ7S06TkD5epVwkjr90cyy/WfOGSWA2e0tymXISWj3R/cEXAMABLxik873xRsqACKaVmshxMQdjCOF+dX2rEEPqvzKCuTrVdJxAgIQllvSSjj90Wz75yV4towbYdkAHIiyKrdtzQGAOEGV3ME4EkJM6kbAd2sOMW8NIIPYSdbSHGC2oC5JOw42Bxiv4NhqXYE9LQgt278oNunL0QBkl5CIXvHTjqFp+16xSR//HUBmni3j6PedIOCyDQQLoMm8+v4LBGsYcd65DIJzJ5Sv4FOIG5V5pWwZRzuzozYXmqSsQMcJziHggTB9f3u6U8Xn61Vi2f6HAIYG0Zw7wrW0tE5XXzu/sQ7OKOWfAAAAAElFTkSuQmCC",style:{background:"#D8D8D8",position:"absolute",right:"10px",top:"10px",cursor:"pointer","border-radius":"5px"},onClick:a[1]||(a[1]=e=>L.value="")}),S("img",{src:L.value.cover,style:{width:"100%"}},null,8,mt)]),S("div",gt,E(" "==L.value.title||null==L.value.title?e.$t("music.anonymous"):L.value.title),1),S("div",ft,[u.value?(I(),C("img",ht)):(I(),C("img",At)),a[8]||(a[8]=S("span",{class:"text-[#8C441A] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),S("div",yt,[(I(!0),C(F,null,U(L.value.introList,(e=>(I(),C("div",{key:e,style:{"margin-bottom":"10px"}},E(e),1)))),128))])],2),S("audio",{class:"video",type:"audio/mp3",id:"video",src:Q.value,onTimeupdate:a[2]||(a[2]=(...a)=>e.audioTimeUpdate&&e.audioTimeUpdate(...a))},null,40,wt)])):B("",!0)])]),S("div",xt,[L.value?(I(),C("div",kt,[S("div",It,[S("div",Ct,[S("div",bt,[S("img",{src:L.value.cover,style:{"border-radius":"5px",width:"60px",height:"60px"}},null,8,Et),S("div",Bt,[S("div",null,E(" "==L.value.title||null==L.value.title?e.$t("music.anonymous"):L.value.title),1),S("div",St,E(L.value.intro),1)])]),S("div",null,[u.value?(I(),C("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFiSURBVEiJvZXBcYMwEEXfMtxNCZRACaQCJxWEDkIJdgVxBxmXkApMB3YH0IGdCn4OggwBC5Dt5M3oAEj7teJr15hAUgJkwBrIgQRIgaY39mZWTcWZEiglnbWMWlIREjyVdFwY/JpYOieQtRPvoZaUTWVwr0BfaJzRAwU6jl3sqBUocK4Z0gAFUM3/zRGZpHJJFpv2+7Pn+0HSRn4XniUlsaTck0Wfy5XnrZnt2k2sgHK0yt2rLAZeA4/hBLyYWdN79zUxfx0xn0WfHfA0EJgjjxeKXNrgVUDwjmSRiJmdbgjekUY4m04iVwlmN+OhiRg75xoJcFBIERyIVAsnp8CHpHe5FhAk8hm4sxI4BhzfPsb5/oI7kiErz8IUqCVt2/W+u9b8OFKuQfnKwptu7y/FL8k7AvmoR3npP/pJK/S3nfFBGYW4zjWyALGz+g1qgC0Qy3EWTXujwdm+wt2zk5l5K8c3konLZQJuJOwAAAAASUVORK5CYII=",alt:"",onClick:K})):(I(),C("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:Ue,alt:"",onClick:K}))]),S("div",null,[D.value&&u.value?(I(),C("img",{key:0,class:"controlItem",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIXSURBVFiFxZdBbptQEIa/eYZdIsENyA2gVffOCdycIEdIuoysKliR5a1zhJwg9gnafZSaG4QbgOTuwJkusKmTuDXYGP879GC+X/OYefOEikpmoWPlHV+sTg/FBzxQp1iVGEgRiTXPH06/fP9ZNa5UAr/a1yJcgTjVwmqKmEkGAze4iXcysBt4gxXVwennfljLQDIbebbqI+DvCn6nKBO52JSNDwaW8B+A1xB8pTgTOX9v4o2BA8L/acKsry7Tfig4gGerPiazsPynSgPz52FIc3v+P/nWq329ehAoU//SAnwpTTPJztwgTA2ADbftwQHEWWVBAH7/Gib71PpuKrJg5k933dpwYYxoAJoWsfiWiZyVz9WCOFbe8Y1Y1mUtOKD5YnoS9CPETAAyI5OitCSqE0esTs+g6tU10JgU3wAt7/0beQaOmAHUMdtfOqwMSI0/t2lJbID4eAZIDUKt0mlUIrHRfDGt/Z3V6SWzkYdqF8BGr4qGVu8k1Tx/kGQWOrbaL8doxSef+q5xgzBV5b5dOKy6qAHITTau18f3VwaD0kDbWVDVclwvG1GRhVYqIlof00sDbhCmmcgFh+0L8ZJR6uhj+YezwA1u4kzknGa3I9oEhy13w/nzMBSRPeZFTVW5z002doNwY5VVuJyOPBtu0devdS6n28CVDaxr/nTXFcu6XE5Rzt9ZQlIgRog0X0xzaxFtA6/0B30D8TI44YwvAAAAAElFTkSuQmCC",style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H})):B("",!0),D.value&&0==u.value?(I(),C("img",{key:1,class:"controlItem",src:qe,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H})):B("",!0)]),S("div",null,[!D.value&&u.value?(I(),C("img",{key:0,class:"controlItem",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIfSURBVFiFxZfdTeNAFIXPuRkj8eYSvAVEsjsIFbCpAG0FYK14hjyjVaAEKgAq2HRgSylgXYLfkPBk7j4k9hqI1j8T4LwlHs35dMe+9wzRU5otQ2tsDMoplLGqRiTC7VMWAEpSC1V3H0wvV333ZR/jF7EXInIO1IadKkk8VpUsjpO0GAUw0nifFsH05/UggOdsGRmzeQAYexi3pLm1k/m+arwDeM6WURC436qIDmO+MyKKqpKTtxCvAD7K/H8Q0l5gzObho8wBQBWRMZsHzZbNO9UAVOtf1wPPvByHwfhF7EXzC6hfOvdnwCYra/nD47hKY+Ubk7QUAAgCdzV0h+MkLapKTkgUIwDCugoCAKr4PmITLwgROddsGUq1vpnBo9F4QITW2FhIORtr7g1BORVVRr4AoyGUscCvz3tBqGokgEaHAmhDoEefIBFK1yIP9aqsqI7taPtVz5N+q1kIyeLQ5gO6Yymg5l9kDlILgbqnrzAHAFV3L8aaHKMnm1eGKIPp5UqYpKVz7u6TzUHiEdgNoyNnbjGwCr7pqapk0QAMr4LOjHGZR3pq4nrTiLZVGPRFjGzhmrdjegPAJC2tncxHBoxeIlFYO5m/+u/tos+O5e9mwb9hcpgGtZXm+8yBjrvhNiljcF5sqXTO3R05c8sk3fuVdV5Od0dytcuNvS+nXca9Adqq1jczUs52KSqss4QqSpIFqDnUPRlr8i7jWn8BA1FAx8ueZuYAAAAASUVORK5CYII=",style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H})):B("",!0),D.value||0!=u.value?B("",!0):(I(),C("img",{key:1,class:"controlItem",src:Te,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:H}))]),S("div",null,[u.value?(I(),C("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFpSURBVEiJvZXdcYJAFIW/y/geSiAdkApCKjAdSDogHdiBKSF2kFSgHWgH0IFawcnDYmZFFhc1OTP7wl7uN2f/jjEgSSmQA1OgAFIgAxpvLM1sPdRnCFBJ2ilOtaRyTPNM0iayeR8suwTI28JbVEvKhxzcCvBB547uCDhqc+ydtIASd2rGagtUwL5nLpdUxbioJb1Kmgfmi/b/RWB+JylN2sKQi6WZfZnZHHjE3Ys+HQLfUyBPgNnggrQyswZ4Aj5i6j1NE0bshZntzewdeCPsqqtiFMSDfQIv9G94V+nkGkgLaiJLs4R42yeSVCh0s0/VJMRZ9punkhbACnd6oiDrEYCsbV5dKD2DfA8UPHiACtjg8mWMlhPc07Cn33op6QA840Krq0vL1fwGmlxAXaOVpJnCz1J5gtT1QRVSfeZL/5EnLehvk/FOjjZBBwFYOQK2kx9QHVkErMDFQeaNBnfs17h7tjWz4MvxA+Ebx1wGT+K1AAAAAElFTkSuQmCC",alt:"",onClick:Z})):(I(),C("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:Ve,alt:"",onClick:Z}))])]),S("div",Rt,[S("div",zt,[S("div",Ft,[S("audio",{id:"audio",src:L.value.mp3,onCanplay:oe,ref_key:"audioRef",ref:q,onTimeupdate:re},null,40,Ut),ie(" "+E(y.value)+" ",1),R(b(se),{value:x.value,"onUpdate:value":a[3]||(a[3]=e=>x.value=e),"on-dragstart":ve,"on-dragend":pe,tooltip:!1,max:w.value,min:0},null,8,["value","max"]),ie(" "+E(h.value),1)])])])])])):B("",!0)])])])]))}}),[["__scopeId","data-v-b5b76342"]]),Tt={style:{padding:"0 24px",display:"flex","flex-direction":"column"},class:"bg-[#fff] dark:bg-[#2B2D31]"},Vt={class:"topBox"},jt={key:0,class:"flex w-full flex-j mb-2 items-center overflow-x-hidden"},Qt={class:"relative z-40 transition-300 ease"},Dt={class:"flex justify-start items-center",ref:"tabListRef"},Lt=["onClick"],Ot={class:"pl-3 pr-3 pt-1 pb-1 whitespace-nowrap"},_t={key:1,class:"flex w-full flex-j mb-2 items-center overflow-x-hidden"},Mt={class:"relative z-40 transition-300 ease"},Yt={class:"flex justify-start items-center",ref:"tabListRef"},Ht=["onClick"],Kt={class:"pl-3 pr-3 pt-1 pb-1 whitespace-nowrap"},Zt={class:"flex-1 marketBox"},Jt=Q(s({__name:"square",setup(e){ne();const a=o(""),t=o(),l=o(""),i=o(),s=X();r((()=>"dark"===s.theme));const n=o([]),u=o([]);s.setTheme("light");(async()=>{const e=await ue({page:1,size:100}).then((e=>e.data.rows));n.value=[{name:$("common.all"),value:""},{name:$("common.myCollection"),value:"fav"}].concat(e)||xe,t.value.handleQuery(a.value)})();o("");const c=o(""),d=o("pic");return y((async()=>{await p(),(async()=>{const e=await ue({page:1,size:100,dataType:1}).then((e=>e.data.rows));u.value=[{name:$("common.all"),value:""},{name:$("common.myCollection"),value:"fav"}].concat(e)||xe})()})),(e,s)=>(I(),C("div",Tt,[R(b(re),{class:"squareTabs",value:d.value,"onUpdate:value":[s[0]||(s[0]=e=>d.value=e),s[1]||(s[1]=e=>c.value="")],size:"large"},{default:z((()=>[R(b(oe),{name:"pic",tab:e.$t("homePage.drawSquare")},null,8,["tab"]),R(b(oe),{name:"video",tab:e.$t("homePage.videoSquare")},null,8,["tab"]),R(b(oe),{name:"music",tab:e.$t("homePage.musicSquare")},null,8,["tab"])])),_:1},8,["value"]),S("div",Vt,["pic"===d.value?(I(),C("div",jt,[S("div",Qt,[S("ul",Dt,[(I(!0),C(F,null,U(n.value,(e=>(I(),C("li",{onClick:l=>{return i=e,a.value=i.value,t.value.handleQuery(i.value),void j.emit("newData","");var i},class:te(["mr-1 ml-1 w-auto select-none cursor-pointer hover:dark:text-[#fff] hover:text-[#fff] hover:bg-black dark:hover:from-transparent dark:hover:to-transparent dark:border dark:border-[transparent] dark:hover:border-[#3E6AE7] duration-300 flex rounded-lg",[e.value===a.value?"text-white bg-black":"bg-white dark:bg-transparent"]])},[S("div",Ot,E(e.name),1)],10,Lt)))),256))],512)])])):B("",!0),"video"===d.value?(I(),C("div",_t,[S("div",Mt,[S("ul",Yt,[(I(!0),C(F,null,U(u.value,(e=>(I(),C("li",{onClick:a=>{return t=e,l.value=t.value,void i.value.handleQuery(t.value);var t},class:te(["mr-1 ml-1 w-auto select-none cursor-pointer hover:dark:text-[#fff] hover:text-[#fff] hover:bg-black dark:hover:from-transparent dark:hover:to-transparent dark:border dark:border-[transparent] dark:hover:border-[#3E6AE7] duration-300 flex rounded-lg",[e.value===l.value?"text-white bg-black":"bg-white dark:bg-transparent"]])},[S("div",Kt,E(e.name),1)],10,Ht)))),256))],512)])])):B("",!0)]),S("div",Zt,["pic"===d.value?(I(),M(ma,{key:0,ref_key:"marketRef",ref:t,type:a.value,keyWord:c.value},null,8,["type","keyWord"])):B("",!0),"video"===d.value?(I(),M(Fa,{key:1,ref_key:"marketRef2",ref:i,type:l.value},null,8,["type"])):B("",!0),"music"===d.value?(I(),M(qt,{key:2})):B("",!0)])]))}}),[["__scopeId","data-v-953df6aa"]]),Wt={class:"home-page bg-white",style:{display:"flex","flex-direction":"column"}},Gt={class:"sbox"},Pt={key:0,class:"topSwiper"},Nt={class:"bigSwiper"},Xt={class:"name"},$t={class:"content text-left mt-[5px]"},el=["onClick"],al={class:"bigSwiper"},tl={class:"name"},ll={class:"content text-left mt-[5px]"},il=["onClick"],sl={class:"shuSwiper"},nl={class:"shuItem"},ol={class:"name"},rl=["onClick"],ul={class:"shuItem"},cl={class:"name"},dl=["onClick"],vl={class:"bigSwiper"},pl=["onClick","src"],ml={key:1,class:"marqueeBox"},gl=["onClick"],fl={key:2,class:"marqueeBox",style:{"margin-bottom":"36px"}},hl=["onClick"],Al=Q(s({__name:"homePage",setup(e){const{scrollRef:a,scrollToBottom:t,scrollToBottomIfAtBottom:l}=we(),i=g(),s=r((()=>i.isLogin)),n=ce(),u=de();o(!0),o(!1);const c=o(null);r((()=>n.chatList)),o(""),A(),ve();const d=o([]),{isMobile:v}=ne(),f=e=>{if(!(e.target.indexOf("http")>-1))return s.value?void N.push(e.target):(i.setLoginDialog(!0),void j.emit("register",0));window.open(e.target)};let h=o([]),w=o([]);y((async()=>{(async(e={})=>{try{e=Object.assign({type:"swiper",notInTagId:"112,113"},e);let a=(await Oe(e)).data.rows;d.value=a}catch(a){d.value=[]}})(),m({url:"/cm/getValue?code=ChatRecTalk",data:{}}).then((e=>{[h.value,w.value]=function(e){const a=Math.floor(e.length/2),t=e.slice(0,a),l=e.slice(a);return[t,l]}(e.data.recList),console.log(h.value,w.value,"recList.valuerecList.value")})),j.emit("aboutIsShow"),await i.getUserInfo(),await p((async()=>{var e;await n.queryActiveChatLogList(),await n.queryMyGroup(),await t(),c.value&&!v.value&&(null==(e=c.value)||e.focus())}))}));const x=o({});!async function(){try{const e=await k({keys:["siteName","clientLogoPath","siteKeyword","subSiteName"]});x.value=e.data}catch(e){console.log(e)}}(),o(r((()=>u.homePageType)));let Q=o([]),D=o([]),L=o([]);return(async()=>{let e=await Oe({type:"home",tagId:"73"});if(Q.value=e.data.rows,e.data.rows.length>3){const a=function(e){const a=e.slice(0,2),t=e.slice(2),l=Math.ceil(t.length/2),i=t.slice(0,l),s=t.slice(l);return{firstTwo:a,part1:i,part2:s}}(e.data.rows);Q.value=a.firstTwo,D.value=a.part1,L.value=a.part2}})(),pe((()=>{})),(e,a)=>(I(),C("div",Wt,[S("div",Gt,[b(Q)&&b(Q).length>0?(I(),C("div",Pt,[S("div",Nt,[R(b(fe),{ref:"topQswiper1",style:{width:"100%"},"show-dots":!1},{default:z((()=>[(I(!0),C(F,null,U([b(Q)[0]],((a,t)=>(I(),M(b(he),{key:t},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${a.cover}')`}])},[S("div",Xt,E(a.name),1),S("span",$t,E(a.description),1),S("div",{class:"btnBox",onClick:e=>f(a)},E(e.$t("common.lijiUse")),9,el)],4)])),_:2},1024)))),128))])),_:1},512)]),S("div",al,[R(b(fe),{ref:"topQswiper2",style:{width:"100%"},"show-dots":!1},{default:z((()=>[(I(!0),C(F,null,U([b(Q)[1]],((a,t)=>(I(),M(b(he),{key:t},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${a.cover}')`}])},[S("div",tl,E(a.name),1),S("span",ll,E(a.description),1),S("div",{class:"btnBox",onClick:e=>f(a)},E(e.$t("common.lijiUse")),9,il)],4)])),_:2},1024)))),128))])),_:1},512)]),S("div",sl,[S("div",nl,[R(b(fe),{ref:"topQswiper3",autoplay:"",style:{width:"100%"},"show-dots":!1,interval:1e4},{default:z((()=>[(I(!0),C(F,null,U(b(D),((e,a)=>(I(),M(b(he),{key:a},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${e.cover}')`}])},[S("div",ol,E(e.name),1),S("div",{class:"btnBox",onClick:a=>f(e)},[R(b(T),{size:"20",color:"#8F91A8"},{default:z((()=>[R(b(V))])),_:1})],8,rl)],4)])),_:2},1024)))),128))])),_:1},512)]),S("div",ul,[R(b(fe),{ref:"topQswiper4",autoplay:"",style:{width:"100%"},"show-dots":!1,interval:1e4},{default:z((()=>[(I(!0),C(F,null,U(b(L),((e,a)=>(I(),M(b(he),{key:a},{default:z((()=>[S("div",{class:"bigItemDiv",style:q([{"background-image":`url('${e.cover}')`}])},[S("div",cl,E(e.name),1),S("div",{class:"btnBox",onClick:a=>f(e)},[R(b(T),{size:"20",color:"#8F91A8"},{default:z((()=>[R(b(V))])),_:1})],8,dl)],4)])),_:2},1024)))),128))])),_:1},512)])]),S("div",vl,[R(b(fe),{autoplay:"",style:{width:"100%"}},{default:z((()=>[(I(!0),C(F,null,U(d.value,((e,a)=>(I(),C("img",{style:{width:"100%",height:"280px"},onClick:a=>f(e),key:a,src:e.cover},null,8,pl)))),128))])),_:1})])])):B("",!0),b(h).length>0?(I(),C("div",ml,[R(b(Le),{"auto-fill":"",speed:24},{default:z((()=>[(I(!0),C(F,null,U(b(h),((a,t)=>(I(),C("span",{class:"item",key:t,onClick:t=>e.goChat(a.title)},[S("div",null,[R(b(me),{width:"22px",height:"22px",src:a.icon,style:{"margin-right":"4px"}},null,8,["src"]),S("span",null,E(a.title),1)])],8,gl)))),128))])),_:1})])):B("",!0),b(w).length>0?(I(),C("div",fl,[R(b(Le),{"auto-fill":"",speed:24},{default:z((()=>[(I(!0),C(F,null,U(b(w),((a,t)=>(I(),C("span",{class:"item",key:t,onClick:t=>e.goChat(a.title)},[S("div",null,[R(b(me),{width:"22px",height:"22px",src:a.icon,style:{"margin-right":"4px"}},null,8,["src"]),S("span",null,E(a.title),1)])],8,hl)))),128))])),_:1})])):B("",!0),R(aa),R(Jt,{class:"sbox",style:{padding:"0","margin-top":"32px"}})]),R(ye)]))}}),[["__scopeId","data-v-b93b7417"]]);export{Al as default};
