import{e,N as a,O as t,P as l,r as s,j as i,S as u,W as n,R as o,k as v,af as d,_ as c,a0 as r,ag as p,a2 as m,a6 as k,$ as f,a5 as g,aq as x,a3 as y,a1 as F,a7 as w,bi as b,ar as h,ad as C}from"../main-33bcbc1f.js";import{d as _,e as E,f as M,g as j,h as I,a as $}from"../ppt/ppt.ab2a8876.js";import{H as P}from"../HeartOutline/HeartOutline.864ab73b.js";const B={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},H=[l("path",{d:"M256 448a32 32 0 0 1-18-5.57c-78.59-53.35-112.62-89.93-131.39-112.8c-40-48.75-59.15-98.8-58.61-153C48.63 114.52 98.46 64 159.08 64c44.08 0 74.61 24.83 92.39 45.51a6 6 0 0 0 9.06 0C278.31 88.81 308.84 64 352.92 64c60.62 0 110.45 50.52 111.08 112.64c.54 54.21-18.63 104.26-58.61 153c-18.77 22.87-52.8 59.45-131.39 112.8a32 32 0 0 1-18 5.56z",fill:"currentColor"},null,-1)],O=e({name:"Heart",render:function(e,l){return a(),t("svg",B,H)}}),z={key:0,class:"item"},T=["src","alt"],q={class:"kamil_activate_dialog dark:bg-[#19191B] bg-[#F8F9F9]"},D={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"40px"}},N={class:"text-[17px] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{"font-weight":"bold"}},R={class:"kami_input"},S={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0 50px","margin-top":"24px","margin-bottom":"12px"}},U=C(e({__name:"item",props:{item:Object,isFav:{type:Boolean,default:!1},isMy:{type:Boolean,default:!1}},emits:["deleted"],setup(e,{emit:C}){const B=e,H=C,U=s(!1),W=s("del"),A=s({title:"",content:""}),G=s(!1),J=s([]),K=i((()=>J.value.find((e=>"pptEditor"===e.type)))),L=u();n();const Q=o(),V=s(B.item),X=s(void 0),Y=s(!1);v((()=>{X.value=setInterval((()=>{var e;Z.value?_({id:null==(e=V.value)?void 0:e.id}).then((e=>{V.value=e.data})):(clearTimeout(X.value),X.value=void 0)}),2e3)})),d((()=>{clearInterval(X.value),X.value=void 0}));const Z=i((()=>1===V.value.status||3===V.value.status||null===V.value.status));function ee(){L.push(`/ppt/detail/${V.value.id}`)}async function ae(){E({id:V.value.id}).then((()=>{V.value.isCollect=!0}))}function te(){M({id:V.value.id}).then((()=>{V.value.isCollect=!1})),H("deleted")}async function le(){await async function(){const{data:e}=await $();J.value=e}(),W.value="edit",A.value={title:"编辑",content:K.value.remainCount>0?`您当前剩余免费次数：${K.value.remainCount}次，是否继续编辑？`:`编辑该PPT需要${K.value.useIntegrate}个积分，是否继续编辑？`},G.value=!1,U.value=!0}function se(){W.value="del",A.value={title:"确认删除",content:"删除后无法找回，确认删除该PPT？"},G.value=!1,U.value=!0}async function ie(){G.value||(G.value=!0,"del"===W.value&&(await j({ids:[V.value.id]}),H("deleted")),"edit"===W.value&&I({id:V.value.id}).then((({code:e})=>{200===e&&(Q.getUserInfo(),L.push(`/ppt/edit/${V.value.id}`))})),U.value=!1)}return(e,s)=>{var i,u,n;const o=c("router-link");return a(),t("div",{class:"ppt-box",onMouseover:s[7]||(s[7]=e=>Y.value=!0)},[2===(null==(i=V.value)?void 0:i.status)?(a(),t("div",z,[l("img",{src:null==(u=V.value.images[0])?void 0:u.url,alt:V.value.title,class:"h-full w-full"},null,8,T)])):r("",!0),Z.value?(a(),p(g(x),{key:1,class:"item",show:Z.value,stroke:"#000"},{description:m((()=>{var e;return[k(f((null==(e=V.value)?void 0:e.stateDesc)||"正在生成中..."),1)]})),_:1},8,["show"])):r("",!0),Y.value?(a(),t("div",{key:2,class:"mask",onClick:ee,onMouseout:s[0]||(s[0]=e=>Y.value=!1)},null,32)):r("",!0),Y.value?(a(),t(y,{key:3},[g(Q).userInfo.id===V.value.userId?(a(),t("div",{key:0,class:"action",onMouseenter:s[1]||(s[1]=e=>Y.value=!0),onMouseout:s[2]||(s[2]=e=>Y.value=!1)},[F(o,{to:`/ppt/detail/${V.value.id}`},{default:m((()=>s[8]||(s[8]=[k(" 预览 ")]))),_:1},8,["to"]),l("a",{onClick:le},"编辑"),B.isMy?(a(),t("a",{key:0,onClick:se},"删除")):r("",!0)],32)):r("",!0),(null==(n=V.value)?void 0:n.isCollect)||B.isFav?(a(),p(g(w),{key:1,class:"collect",size:"32px",onMouseover:s[3]||(s[3]=e=>Y.value=!0),onClick:te},{default:m((()=>[F(g(O))])),_:1})):(a(),p(g(w),{key:2,class:"collect",size:"32px",onMouseover:s[4]||(s[4]=e=>Y.value=!0),onClick:ae},{default:m((()=>[F(g(P))])),_:1}))],64)):r("",!0),F(g(h),{show:U.value,"mask-closable":!1},{default:m((()=>[l("div",q,[l("div",D,[l("div",N,f(A.value.title),1),l("div",{class:"close_btn",onClick:s[5]||(s[5]=e=>U.value=!1)},s[9]||(s[9]=[l("img",{src:b},null,-1)]))]),l("div",R,f(A.value.content),1),l("div",S,[l("div",{class:"dark:bg-[#222325] bg-[#F0F0F0] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{width:"45%","text-align":"center",padding:"12px 0","border-radius":"12px",cursor:"pointer"},onClick:s[6]||(s[6]=e=>U.value=!1)}," 取消 "),l("div",{class:"dark:bg-[#1E6953] bg-[#3e6ae7] dark:text-[#FFFFFF] text-[#FFFFFF]",style:{width:"45%","text-align":"center",padding:"12px 0","border-radius":"12px",cursor:"pointer"},onClick:ie}," 确认 ")])])])),_:1},8,["show"])],32)}}}),[["__scopeId","data-v-5cb3a9cc"]]);export{U as p};
