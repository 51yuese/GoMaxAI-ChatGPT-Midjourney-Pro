import{e,w as t,x as a,B as l,r as s,g as i,l as n,p as o,k as u,q as v,M as c,ah as d,A as r,O as p,D as m,a4 as x,z as k,y as g,a1 as f,F as y,C as F,N as h,bL as w,ak as b,$ as C,_}from"../main-4156cf5e.js";import{g as E,h as $,i as M,j,k as I,a as T}from"../ppt/ppt.22762407.js";import{H as B}from"../HeartOutline/HeartOutline.79c6c696.js";const z={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},H=[l("path",{d:"M256 448a32 32 0 0 1-18-5.57c-78.59-53.35-112.62-89.93-131.39-112.8c-40-48.75-59.15-98.8-58.61-153C48.63 114.52 98.46 64 159.08 64c44.08 0 74.61 24.83 92.39 45.51a6 6 0 0 0 9.06 0C278.31 88.81 308.84 64 352.92 64c60.62 0 110.45 50.52 111.08 112.64c.54 54.21-18.63 104.26-58.61 153c-18.77 22.87-52.8 59.45-131.39 112.8a32 32 0 0 1-18 5.56z",fill:"currentColor"},null,-1)],O=e({name:"Heart",render:function(e,l){return t(),a("svg",z,H)}}),D={key:0,class:"item"},P=["src","alt"],q={class:"kamil_activate_dialog dark:bg-[#19191B] bg-[#F8F9F9]"},A={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"40px"}},G={class:"text-[17px] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{"font-weight":"bold"}},L={class:"kami_input"},N={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0 50px","margin-top":"24px","margin-bottom":"12px"}},R=_(e({__name:"item",props:{item:Object,isFav:{type:Boolean,default:!1},isMy:{type:Boolean,default:!1}},emits:["deleted"],setup(e,{emit:_}){const z=e,H=_,R=s(!1),U=s("del"),J=s({title:"",content:""}),K=s(!1),Q=s([]),S=i((()=>Q.value.find((e=>"pptEditor"===e.type)))),V=n();o();const W=u(),X=s(z.item),Y=s(void 0),Z=s(!1);v((()=>{Y.value=setInterval((()=>{var e;ee.value?E({id:null==(e=X.value)?void 0:e.id}).then((e=>{X.value=e.data})):(clearTimeout(Y.value),Y.value=void 0)}),2e3)})),c((()=>{clearInterval(Y.value),Y.value=void 0}));const ee=i((()=>1===X.value.status||3===X.value.status||null===X.value.status));function te(){V.push(`/ppt/detail/${X.value.id}`)}async function ae(){$({id:X.value.id}).then((()=>{X.value.isCollect=!0}))}function le(){M({id:X.value.id}).then((()=>{X.value.isCollect=!1})),H("deleted")}async function se(){await async function(){const{data:e}=await T();Q.value=e}(),U.value="edit",J.value={title:C("common.edit"),content:S.value.remainCount>0?C("ppt.chishuText1")+`ï¼š${S.value.remainCount}`+C("ppt.chishuText2"):C("ppt.pointsText1")+`${S.value.useIntegrate}`+C("ppt.pointsText1")},K.value=!1,R.value=!0}function ie(){U.value="del",J.value={title:C("common.delete"),content:C("ppt.delPPTtext1")},K.value=!1,R.value=!0}async function ne(){K.value||(K.value=!0,"del"===U.value&&(await j({ids:[X.value.id]}),H("deleted")),"edit"===U.value&&I({id:X.value.id}).then((({code:e})=>{200===e&&(W.getUserInfo(),V.push(`/ppt/edit/${X.value.id}`))})),R.value=!1)}return(e,s)=>{var i,n,o;const u=d("router-link");return t(),a("div",{class:"ppt-box",onMouseover:s[7]||(s[7]=e=>Z.value=!0)},[2===(null==(i=X.value)?void 0:i.status)?(t(),a("div",D,[l("img",{src:null==(n=X.value.images[0])?void 0:n.url,alt:X.value.title,class:"h-full w-full"},null,8,P)])):r("",!0),ee.value?(t(),p(g(f),{key:1,class:"item",show:ee.value,stroke:"#000"},{description:m((()=>{var t;return[x(k((null==(t=X.value)?void 0:t.stateDesc)||e.$t("ppt.Generating")+"..."),1)]})),_:1},8,["show"])):r("",!0),Z.value?(t(),a("div",{key:2,class:"mask",onClick:te,onMouseout:s[0]||(s[0]=e=>Z.value=!1)},null,32)):r("",!0),Z.value?(t(),a(y,{key:3},[g(W).userInfo.id===X.value.userId?(t(),a("div",{key:0,class:"action",onMouseenter:s[1]||(s[1]=e=>Z.value=!0),onMouseout:s[2]||(s[2]=e=>Z.value=!1)},[F(u,{to:`/ppt/detail/${X.value.id}`},{default:m((()=>[x(k(e.$t("chat.preview")),1)])),_:1},8,["to"]),l("a",{onClick:se},k(e.$t("common.edit")),1),z.isMy?(t(),a("a",{key:0,onClick:ie},k(e.$t("common.delete")),1)):r("",!0)],32)):r("",!0),(null==(o=X.value)?void 0:o.isCollect)||z.isFav?(t(),p(g(h),{key:1,class:"collect",size:"32px",onMouseover:s[3]||(s[3]=e=>Z.value=!0),onClick:le},{default:m((()=>[F(g(O))])),_:1})):(t(),p(g(h),{key:2,class:"collect",size:"32px",onMouseover:s[4]||(s[4]=e=>Z.value=!0),onClick:ae},{default:m((()=>[F(g(B))])),_:1}))],64)):r("",!0),F(g(b),{show:R.value,"mask-closable":!1},{default:m((()=>[l("div",q,[l("div",A,[l("div",G,k(J.value.title),1),l("div",{class:"close_btn",onClick:s[5]||(s[5]=e=>R.value=!1)},s[8]||(s[8]=[l("img",{src:w},null,-1)]))]),l("div",L,k(J.value.content),1),l("div",N,[l("div",{class:"dark:bg-[#222325] bg-[#F0F0F0] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{width:"45%","text-align":"center",padding:"12px 0","border-radius":"12px",cursor:"pointer"},onClick:s[6]||(s[6]=e=>R.value=!1)},k(e.$t("common.cancel")),1),l("div",{class:"dark:bg-[#1E6953] bg-[#3e6ae7] dark:text-[#FFFFFF] text-[#FFFFFF]",style:{width:"45%","text-align":"center",padding:"12px 0","border-radius":"12px",cursor:"pointer"},onClick:ne},k(e.$t("common.confirm")),1)])])])),_:1},8,["show"])],32)}}}),[["__scopeId","data-v-e8772f1e"]]);export{R as p};
