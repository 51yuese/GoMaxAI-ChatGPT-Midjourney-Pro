import{e,a8 as a,b9 as t,ao as l,R as i,j as o,S as s,aT as n,aQ as u,a9 as d,r as c,A as r,a0 as v,aU as p,a$ as g,aV as m,b5 as f,N as h,O as y,P as k,aa as x,Z as I,_ as C,$ as S,a6 as b,F,ag as w,ad as T,as as L,X as N,aR as B,aW as M,a1 as A,a2 as O,a3 as _,U as D,W as E,an as J,bh as V,H as R,ax as G,aX as U,k as j,ai as z}from"../main-b128e95b.js";import{_ as q,a as H,b as P,c as W,d as X}from"../start copy/start copy.4aa28f32.js";const $=e=>(A("data-v-16482125"),e=e(),O(),e),Q={class:"main"},Z={class:"applicationBox"},K={class:"appBox"},Y={key:0,src:"/static/svg/default-98ef1eb8.svg",alt:""},ee={key:1,src:"/static/svg/default copy-cbe05553.svg",alt:""},ae=$((()=>k("p",{style:{"margin-left":"9px","margin-top":"2px"}},"智能问答",-1))),te=["onClick"],le=["src"],ie={style:{"margin-left":"9px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",width:"120px"}},oe={key:0,src:"/static/svg/otherApp-5647880d.svg",alt:""},se={key:1,src:"/static/svg/otherApp copy-8f52f424.svg",alt:""},ne=$((()=>k("p",{style:{"margin-left":"9px","margin-top":"2px"},class:"cursor"},"探索应用",-1))),ue={key:0,class:"recordingBox"},de={class:"todayList"},ce=$((()=>k("div",{class:"todayTitle"},"今天",-1))),re=["onClick"],ve={style:{width:"100%"}},pe={key:0,class:"itemTitle cursor"},ge=["onBlur"],me={style:{display:"flex","align-items":"center"}},fe={class:"historyList"},he=$((()=>k("div",{class:"historyTitle"},"历史",-1))),ye=["onClick"],ke={style:{width:"100%"}},xe={key:0,class:"itemTitle cursor"},Ie=["onBlur"],Ce={style:{display:"flex","align-items":"center"}},Se=_(e({__name:"conversationList",setup(e){const{isMobile:A}=a(),O=t(),_=l(),D=i(),E=o((()=>D.isLogin));s(),n();const J=u(),V=d(),R=o((()=>"dark"===V.theme)),G=o((()=>J.groupList)),U=c(100);r(G,(()=>U.value=U.value+1));const j=c([]),z=c([]),q=c([]);async function H(){j.value=[],z.value=[],q.value=[],await p({modelType:"chat"}).then((e=>{0!=e.data.length?function(e){let a=(new Date).getDate();a<10&&(a="0"+a);const{data:t}=e;j.value=t,t.forEach((e=>{if(e.title=e.title.slice(0,7),null!=e.lastTime){let t=e.lastTime.split(" ")[0].split("-")[2];a==t?z.value=[...z.value,e]:q.value=[...q.value,e]}if(null===e.lastTime){let t=e.createdAt.split(" ")[0].split("-")[2];a==t?z.value=[...z.value,e]:q.value=[...q.value,e]}}))}(e):Le()}))}H(),v.on("updateMessageList",(e=>{console.log(e),e&&H()})),v.on("DataListFn",(e=>{e&&(H(),we())}));const P=c([]),W=c(!1);v.on("ExploreApp",(e=>{P.value.forEach((a=>{a.id==e.id&&(W.value=!0,be(a))})),W.value?W.value=!1:(P.value.unshift(e),P.value=P.value.splice(0,2),be(e),localStorage.setItem("ExploreApp",JSON.stringify(P.value)))})),localStorage.getItem("ExploreApp")?P.value=JSON.parse(localStorage.getItem("ExploreApp")):g({type:"recommend"}).then((e=>{P.value=e.data,P.value=P.value.splice(0,2)})),v.on("reOpenChar",(e=>{$(e,1)}));const X=c();function $(e,a){let t;t=a?{groupId:e.uuid,logType:1}:{groupId:e.id,logType:1},v.emit("create",!1),v.emit("exploreApp",!1),v.emit("uuid",e),m(t).then((async t=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await J.setActiveGroup(e.id),X.value=a?e.uuid:e.id,Se.value&&(Se.value=null),De.value&&(De.value=!1),v.emit("modelType",e.config),v.emit("setModel",JSON.parse(e.config).modelInfo);let l=t.data.filter((e=>null!=e.conversationOptions));0==l.length?(v.emit("chatLogList",l),v.emit("haveLog",!1)):v.emit("chatLogList",t.data)}))}const Se=c();async function be(e,a){if(!E.value)return void D.setLoginDialog(!0);let t;if(t=a?await O.isSession(e.modelId):await O.isSession(e.id),0==t){await O.addNewChat(e.id),O.updateGptsStore(!1);const a=await f();X.value&&(X.value=null),De.value&&(De.value=!1),a.data.forEach((a=>{a.modelId==e.id&&(localStorage.setItem("chatLogId",JSON.stringify(a)),Se.value=a.modelId,v.emit("exploreApp",!1),v.emit("uuid",a),Fe(a))}))}else{X.value&&(X.value=null),De.value&&(De.value=!1);(await f()).data.forEach((t=>{a?t.modelId==e.modelId&&(localStorage.setItem("chatLogId",JSON.stringify(t)),Se.value=t.modelId,v.emit("exploreApp",!1),v.emit("uuid",t),Fe(t)):t.modelId==e.id&&(localStorage.setItem("chatLogId",JSON.stringify(t)),Se.value=t.modelId,v.emit("exploreApp",!1),v.emit("uuid",t),Fe(t))}))}}function Fe(e){let a={groupId:e.id};m(a).then((async a=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await J.setActiveGroup(e.id);let t=a.data.filter((e=>null!=e.conversationOptions));t.length,v.emit("chatLogList",t)}))}function we(){if(localStorage.getItem("chatLogId")){let e,a=JSON.parse(localStorage.getItem("chatLogId"));a.config&&(e=JSON.parse(a.config).modelInfo.modelType),X.value=a,a.gptsApp||"app"==e?(Se.value=a.modelId,Fe(a)):(X.value=a.id,$(a))}else p({modelType:"chat"}).then((e=>{$(e.data[0])}))}v.on("openNewApp",(e=>{be(e)})),v.on("reOpenGpts",(e=>{be(e,1)})),we();const Te=c(!1);async function Le(){try{if(!E.value)return D.setLoginDialog(!0),void v.emit("register",0);Te.value=!0,await J.updateChatTab("history"),await J.addNewChatGroup(),await J.queryMyGroup(),await H(),$(j.value[0]),Te.value=!1,A.value&&V.setSiderCollapsed(!0)}catch(e){Te.value=!1}}async function Ne(e,a){if(0==z.value.length&&1==q.value.length||1==z.value.length&&0==q.value.length)_.error("至少保留一个对话");else{if(await J.deleteGroup(e),await J.queryMyGroup(),0==a){if(z.value=z.value.filter((a=>a.id!=e.id)),e.id==X.value){if(0==z.value.length)return void $(q.value[0]);$(z.value[0])}}else if(1==a&&(q.value=q.value.filter((a=>a.id!=e.id)),e.id==X.value)){if(0==q.value.length)return void $(z.value[0]);$(q.value[0])}_.success("删除成功")}}const Be=c(null),Me=c("");function Ae(e,a){setTimeout((()=>{Be.value[0].focus()}),100),e.edit=!0,Me.value=e.title}function Oe(e,a){if(e.edit=null,e.title==Me.value)return;let t={groupId:e.id,title:Me.value};M(t).then((t=>{200===t.code&&(0==a?z.value.forEach((a=>{a.id==e.id&&(a.title=Me.value)})):1==a&&q.value.forEach((a=>{a.id==e.id&&(a.title=Me.value)})))}))}function _e(){7==Me.value.length&&_.warning("最大不能超过七个字")}const De=c(!1);function Ee(){if(!E.value)return D.setLoginDialog(!0),void v.emit("register",0);X.value&&(X.value=null),Se.value&&(Se.value=null),De.value=!0,v.emit("exploreApp",!0)}return(e,a)=>(h(),y("div",Q,[k("div",Z,[k("div",K,[k("div",{class:x(["cursor",[R.value?"appItem":"appItem1"]]),onClick:Le},[R.value?(h(),y("img",Y)):(h(),y("img",ee)),ae],2),0!=P.value.length&&E.value?(h(),y(I,{key:0},C(2,((e,a)=>k("div",{class:x(["cursor",[R.value?"appItem":"appItem1",Se.value==P.value[a].id?"select":"NotSelect"]]),key:a,style:{display:"flex","align-items":"center"},onClick:e=>be(P.value[a])},[k("img",{style:{width:"16px",height:"16px","border-radius":"50%"},src:P.value[a].logo,alt:""},null,8,le),k("p",ie,S(P.value[a].modelName),1)],10,te))),64)):b("",!0)]),k("div",{class:x(["otherApp",[R.value?"appItem":"appItem1",De.value?"select":"NotSelect"]]),onClick:Ee},[R.value?(h(),y("img",oe)):(h(),y("img",se)),ne],2)]),E.value?(h(),y("div",ue,[k("div",de,[ce,(h(!0),y(I,null,C(z.value,(e=>(h(),y("div",{class:x([R.value?"Item":"Item1",X.value==e.id?"select":"NotSelect"]),key:e.id,onClick:a=>$(e)},[k("div",ve,[e.edit?b("",!0):(h(),y("p",pe,S(e.title),1)),e.edit?F((h(),y("input",{key:1,maxlength:"7","onUpdate:modelValue":a[0]||(a[0]=e=>Me.value=e),onInput:_e,class:"editInp dark:bg-[#111113] bg-[#FFFFFF]",ref_for:!0,ref_key:"inputRef",ref:Be,type:"text",onBlur:a=>Oe(e,0)},null,40,ge)),[[w,Me.value]]):b("",!0)]),k("div",me,[X.value==e.id?(h(),T(N(B),{key:0,icon:"hugeicons:delete-02",class:"hot-icon1 cursor del",onClick:L((a=>Ne(e,0)),["stop"])},null,8,["onClick"])):b("",!0),X.value==e.id?(h(),T(N(B),{key:1,icon:"solar:pen-2-linear",class:x(["hot-icon1 cursor",R.value?"pen":"pen1"]),onClick:L((a=>Ae(e)),["stop"])},null,8,["class","onClick"])):b("",!0),X.value!=e.id?(h(),T(N(B),{key:2,icon:"hugeicons:delete-02",class:"hot-icon cursor del",onClick:L((a=>Ne(e,0)),["stop"])},null,8,["onClick"])):b("",!0),X.value!=e.id?(h(),T(N(B),{key:3,icon:"solar:pen-2-linear",class:x(["hot-icon cursor",R.value?"pen":"pen1"]),onClick:L((a=>Ae(e)),["stop"])},null,8,["class","onClick"])):b("",!0)])],10,re)))),128))]),k("div",fe,[he,(h(!0),y(I,null,C(q.value,(e=>(h(),y("div",{class:x([R.value?"Item":"Item1",X.value==e.id?"select":"NotSelect"]),key:e.id,onClick:a=>$(e)},[k("div",ke,[e.edit?b("",!0):(h(),y("p",xe,S(e.title),1)),e.edit?F((h(),y("input",{key:1,maxlength:"7","onUpdate:modelValue":a[1]||(a[1]=e=>Me.value=e),onInput:_e,class:"editInp dark:bg-[#111113] bg-[#FFFFFF]",ref_for:!0,ref_key:"inputRef",ref:Be,type:"text",onBlur:a=>Oe(e,1)},null,40,Ie)),[[w,Me.value]]):b("",!0)]),k("div",Ce,[X.value==e.id?(h(),T(N(B),{key:0,onClick:L((a=>Ne(e,1)),["stop"]),icon:"hugeicons:delete-02",class:"hot-icon1 cursor del"},null,8,["onClick"])):b("",!0),X.value==e.id?(h(),T(N(B),{key:1,icon:"solar:pen-2-linear",onClick:L((a=>Ae(e)),["stop"]),class:x(["hot-icon1 cursor",R.value?"pen":"pen1"])},null,8,["onClick","class"])):b("",!0),X.value!=e.id?(h(),T(N(B),{key:2,icon:"hugeicons:delete-02",onClick:L((a=>Ne(e,1)),["stop"]),class:"hot-icon cursor del"},null,8,["onClick"])):b("",!0),X.value!=e.id?(h(),T(N(B),{key:3,icon:"solar:pen-2-linear",onClick:L((a=>Ae(e)),["stop"]),class:x(["hot-icon cursor",R.value?"pen":"pen1"])},null,8,["onClick","class"])):b("",!0)])],10,ye)))),128))])])):b("",!0)]))}}),[["__scopeId","data-v-16482125"]]),be=e=>(A("data-v-3320a753"),e=e(),O(),e),Fe={class:"mindMapSiderBarMain"},we=be((()=>k("div",{class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},[k("div",{style:{display:"flex","align-items":"center"}},[k("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),k("p",{style:{"margin-left":"4px","margin-top":"3px","font-size":"12px"}},"内容主题")])],-1))),Te={class:"inputBox dark:bg-[#111113] bg-[#FFFFFF] border dark:border-[#2D2E33] border-[#EBEBEB] dark:text-[#6C6E79] text-[#8B8C8C]"},Le={style:{width:"100%","text-align":"end","margin-top":"15px"}},Ne={key:0,class:"loader"},Be=be((()=>k("p",{style:{"margin-left":"6px"}},"生成导图",-1))),Me=be((()=>k("div",{class:"",style:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"16px"}},[k("div",{style:{display:"flex","align-items":"center"}},[k("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),k("p",{style:{"margin-left":"4px","margin-top":"3px","font-size":"12px"}},"内容大纲")])],-1))),Ae={class:"dark:bg-[#111113] bg-[#FFFFFF] border dark:border-[#2D2E33] border-[#EBEBEB] dark:text-[#6C6E79] text-[#8B8C8C]",style:{"margin-top":"6px",padding:"8px",height:"284px","border-radius":"12px"}},Oe=_(e({__name:"mindSiderBarContent",props:{demoValue:String},emits:["value","CreateMind"],setup(e,{emit:a}){const t=l(),i=e,o=a,s=c();function n(){v.emit("newValue",s.value)}r(i,(e=>{e.demoValue&&(s.value=e.demoValue)}));const u=c(),d=c(!1);function p(){u.value?(d.value=!0,o("CreateMind",u.value),u.value=""):t.error("提示词不能为空")}return v.on("loadingFalse",(e=>{d.value=e})),(e,a)=>(h(),y("div",Fe,[we,k("div",Te,[F(k("textarea",{class:"inp",name:"",id:"",cols:"30","onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),rows:"10",placeholder:"请输入您想要生成内容的描述，AI将为您输出一份完整的思维导图"},null,512),[[w,u.value]]),k("div",Le,[k("p",{onClick:a[1]||(a[1]=e=>u.value=""),style:{cursor:"pointer","font-size":"12px"},class:"dark:text-[#6C6E79] text-[#8B8C8C]"}," 清空 ")])]),k("div",{class:"btn",onClick:p,style:{cursor:"pointer",display:"flex","justify-content":"center","align-items":"center"}},[d.value?(h(),y("div",Ne)):b("",!0),Be]),Me,k("div",Ae,[F(k("textarea",{onInput:n,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value=e),name:"",id:"",cols:"30",rows:"10",placeholder:"# Ai智能工具\n## 部分功能\n- 支持AI聊天\n- 支持微应用\n- 支持自定义创建\n- 支持DEL绘画\n- 支持Midjourney\n- 更多功 能等你探索\n## 更多内容\n-在上面输入您想要生成的内容\n- 点击生成大纲即可\n",class:"contentInp"},null,544),[[w,s.value]])])]))}}),[["__scopeId","data-v-3320a753"]]),_e={class:"itemName"},De=(e=>(A("data-v-62e7c6e6"),e=e(),O(),e))((()=>k("img",{src:"/static/svg/txt-e14b52ab.svg",alt:""},null,-1))),Ee={key:0,style:{"margin-left":"4px"}},Je={class:"itemTime"},Ve={style:{"margin-top":"3px","font-size":"10px"}},Re={class:"buttonBox"},Ge={style:{display:"flex","align-items":"center"}},Ue={class:"deletChatSelect"},je={class:"editChatSelect"},ze=_(e({__name:"recordItem",props:{item:Object,selectChatId:Object},emits:["changeTitle","deleteItem"],setup(e,{emit:a}){const t=d(),l=o((()=>"dark"===t.theme)),i=e,s=a,n=c();r(i,(e=>{e.selectChatId&&(n.value=e.selectChatId)})),v.on("changeTitle",(e=>{e&&M(e).then((e=>{200===e.code&&s("changeTitle")}))})),n.value=i.selectChatId;const u=c(),p=c(null);return(e,a)=>{var t,o,d,c,r,v,g,m;return h(),y("div",{class:x(["dark:bg-[#19191B] bg-[#F8F9F9]",[l.value?"itemBoxD":"itemBoxL",n.value.id==i.item.id?"dark:bg-[#222325] bg-[#F0F0F0]":""]])},[k("div",null,[k("div",_e,[De,i.item.isInp?F((h(),y("input",{key:1,maxlength:"9","onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),onFocus:a[1]||(a[1]=L((()=>{}),["stop"])),onBlur:a[2]||(a[2]=e=>function(e){if(e.isInp=!1,!u.value)return;let a={groupId:e.id,title:u.value};M(a).then((a=>{200===a.code&&(e.title=u.value)}))}(i.item)),ref_key:"inpRef",ref:p,style:{"margin-left":"4px","background-color":"transparent"},placeholder:"请输入文件名称",type:"text"},null,544)),[[w,u.value]]):(h(),y("p",Ee,S(i.item.title),1))]),k("div",Je,[k("p",Ve,S(null==(d=null==(o=null==(t=i.item)?void 0:t.createdAt)?void 0:o.split("T"))?void 0:d[0])+" "+S(null==(m=null==(g=null==(v=null==(r=null==(c=null==i?void 0:i.item)?void 0:c.createdAt)?void 0:r.split("T"))?void 0:v[1])?void 0:g.split("."))?void 0:m[0]),1)])]),k("div",Re,[k("div",Ge,[k("div",Ue,[k("img",{src:"/static/svg/deletChatSelect-52cf527b.svg",alt:"",onClick:a[3]||(a[3]=L((e=>{return a=i.item,void s("deleteItem",a);var a}),["stop"]))})]),k("div",je,[k("img",{style:{"margin-left":"4px"},src:"/static/svg/editChatSelect-35464e86.svg",alt:"",onClick:a[4]||(a[4]=L((e=>(i.item.isInp=!0,void setTimeout((()=>{p.value.focus()}),100))),["stop"]))})])])])],2)}}}),[["__scopeId","data-v-62e7c6e6"]]),qe=e=>(A("data-v-053c4e2b"),e=e(),O(),e),He={class:"DocumentBox"},Pe={class:"topBox"},We=[qe((()=>k("img",{style:{"margin-right":"4px"},src:"/static/svg/add-a8c43923.svg",alt:""},null,-1))),qe((()=>k("p",null,"新建文档",-1)))],Xe={class:"inpBox dark:bg-[#222325] bg-[#F0F0F0]"},$e={key:0,src:"/static/svg/search-a5fa3211.svg",alt:""},Qe={key:1,src:"/static/svg/search copy-726f56f2.svg",alt:""},Ze={class:"record"},Ke={class:"today"},Ye=qe((()=>k("div",{class:"recordTitle"},"今天",-1))),ea=["onClick"],aa={class:"histroy"},ta=qe((()=>k("div",{class:"recordTitle"},"历史",-1))),la=["onClick"],ia=_(e({__name:"documentSiderBarContent",props:{changeModelisSuccess:Number},emits:["documentChatLog","handleModelInfo"],setup(e,{emit:t}){const s=i(),{isMobile:n}=a(),v=o((()=>s.isLogin)),g=d(),f=o((()=>"dark"===g.theme)),x=t,S=l(),b=u(),T=c("");c([]);r(e,(e=>{e.changeModelisSuccess&&M()}));const L=c([]),N=c([]),B=c([]);async function M(){L.value=[],N.value=[],B.value=[],await p({modelType:"chat"}).then((e=>{0!=e.data.length&&(L.value=e,A(e,0))}))}function A(e,a){1==a&&(N.value=[],B.value=[]);let t=(new Date).getDate();t<10&&(t="0"+t);const{data:l}=e;l.forEach((e=>{if(e.title=e.title.slice(0,7),null!=e.lastTime){let a=e.lastTime.split(" ")[0].split("-")[2];t==a?N.value=[...N.value,e]:B.value=[...B.value,e]}if(null===e.lastTime){let a=e.createdAt.split(" ")[0].split("-")[2];t==a?N.value=[...N.value,e]:B.value=[...B.value,e]}}))}M();const O=c();function _(e){let a={groupId:e.id,logType:1};m(a).then((async a=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await b.setActiveGroup(e.id);let t=a.data.filter((e=>null!=e.conversationOptions));O.value=e,x("documentChatLog",t),x("handleModelInfo",e)}))}async function V(){try{if(!v.value)return void s.setLoginDialog(!0);await b.updateChatTab("history"),await b.addNewChatGroup(),await b.queryMyGroup(),await M(),_(L.value.data[0]),n.value&&g.setSiderCollapsed(!0)}catch(e){S.error("创建失败")}}function R(e){U("today",e)}function G(e){U("history",e)}async function U(e,a){if(0==N.value.length&&1==B.value.length||1==N.value.length&&0==B.value.length)S.error("至少保留一个对话");else{if(await b.deleteGroup(a),"today"==e){if(N.value=N.value.filter((e=>e.id!=a.id)),O.value.id==a.id){if(0==N.value.length)return void _(B.value[0]);_(N.value[0])}}else if("history"==e&&(B.value=B.value.filter((e=>e.id!=a.id)),O.value.id==a.id)){if(0==B.value.length)return void _(N.value[0]);_(B.value[0])}S.success("删除成功")}}function j(){M()}return localStorage.getItem("chatLogId")?(O.value=JSON.parse(localStorage.getItem("chatLogId")),_(O.value)):(O.value=0,p({modelType:"chat"}).then((e=>{0!=e.data.length&&(O.value=e.data[0],_(e.data[0]))}))),r(T,(e=>{if(console.log(e),e){A({data:L.value.data.filter((e=>{if(-1!=e.title.indexOf(T.value))return e}))},1)}else A(L.value,1)})),(e,a)=>(h(),y("div",He,[k("div",Pe,[k("div",{class:"createDocument",onClick:V},We),k("div",Xe,[f.value?(h(),y("img",$e)):(h(),y("img",Qe)),F(k("input",{onInput:a[0]||(a[0]=(...a)=>e.inputSearch&&e.inputSearch(...a)),"onUpdate:modelValue":a[1]||(a[1]=e=>T.value=e),type:"text",placeholder:"输入名称搜索文档"},null,544),[[w,T.value]])])]),k("div",Ze,[k("div",Ke,[Ye,(h(!0),y(I,null,C(N.value,(e=>(h(),y("div",{key:e.id,onClick:a=>_(e)},[D(ze,{onChangeTitle:j,onDeleteItem:R,selectChatId:O.value,item:e},{default:E((()=>[J(">")])),_:2},1032,["selectChatId","item"])],8,ea)))),128))]),k("div",aa,[ta,(h(!0),y(I,null,C(B.value,(e=>(h(),y("div",{key:e.id,onClick:a=>_(e)},[D(ze,{onChangeTitle:j,onDeleteItem:G,selectChatId:O.value,item:e},null,8,["selectChatId","item"])],8,la)))),128))])])]))}}),[["__scopeId","data-v-053c4e2b"]]),oa=e=>(A("data-v-1887410d"),e=e(),O(),e),sa={key:0,class:"LoginBox"},na=oa((()=>k("div",{class:"title"},"注册或者登录",-1))),ua=oa((()=>k("div",{class:"intro dark:text-[#6C6E79] text-[#8B8C8C]"}," 获取更加智能的回复、上传文件和图片，并获享更多功能。 ",-1))),da=oa((()=>k("div",{class:"imgBox border border-[#CD7F10]"},[k("img",{src:"/static/svg/vipLogo-f8c2862a.svg",alt:""})],-1))),ca={style:{flex:"1","margin-left":"4px"}},ra={style:{"font-size":"12px"}},va={class:"upgradeIntro text-[#818282] dark:text-[#787A86]"},pa=_(e({__name:"newSiderBar",props:{currentRoute:String,changeModelisSuccess:Number,demoValue:String},emits:["documentChatLog","handleModelInfo","value","CreateMind"],setup(e,{emit:a}){const t=o((()=>u.isLogin)),l=d();o((()=>"dark"===l.theme)),s(),n();const u=i();o((()=>u.globalConfig.clientLogoPath));const p=o((()=>u.userInfo.vipExpire)),g=V();function m(e){0==e?(v.emit("register",3),u.setLoginDialog(!0)):1==e&&(u.setLoginDialog(!0),v.emit("register",0))}const f=c(!1),I=c(!1);v.on("closeSideBar",(e=>{f.value=e,e?I.value=e:setTimeout((()=>{I.value=e}),100)}));const C=()=>{F()},F=async()=>{u.checkAuth()&&g.updateVipDialog(!0)},w=e,L=c();r(w,(e=>{e.demoValue&&(L.value=e.demoValue)}));const N=c(0);r(w,(e=>{e.changeModelisSuccess&&(N.value=e.changeModelisSuccess)}));const B=a;function M(e){B("documentChatLog",e)}function A(e){B("handleModelInfo",e)}function O(e){B("CreateMind",e)}return(e,a)=>(h(),y("div",null,[k("div",{class:x(["dark:bg-[#19191B] bg-[#F8F9F9]",f.value?"close":"siderMain"])},[k("div",{class:"mainBox1",style:R(I.value?{display:"none"}:"")},["/chat"==w.currentRoute?(h(),T(Se,{key:0})):b("",!0),"/mindMap"==w.currentRoute?(h(),T(Oe,{key:1,onCreateMind:O,demoValue:L.value},null,8,["demoValue"])):b("",!0),"/document"==w.currentRoute&&t.value?(h(),T(ia,{key:2,changeModelisSuccess:N.value,onDocumentChatLog:M,onHandleModelInfo:A},null,8,["changeModelisSuccess"])):b("",!0)],4),k("div",{class:"mainBox",style:R(I.value?{display:"none"}:"")},[t.value?(h(),y("div",{key:1,class:"upgrade dark:bg-[#19191B] bg-[#F8F9F9]",style:{cursor:"pointer"},onClick:C},[da,k("div",ca,[k("p",ra,S(null==p.value?"升级套餐":"会员到期："),1),k("p",va,S(null==p.value?"暂未开通会员":p.value.split("T")[0]),1)])])):(h(),y("div",sa,[na,ua,k("div",{class:"register",onClick:a[0]||(a[0]=e=>m(0))},"注册"),k("div",{class:"login border border-[2px] dark:border-[#323339] border-[#D6D7D7]",onClick:a[1]||(a[1]=e=>m(1))}," 登录 ")]))],4)],2)]))}}),[["__scopeId","data-v-1887410d"]]),ga={class:"navBarMain"},ma={class:"navBarLeft"},fa={key:1,style:{"margin-left":"12px"}},ha={class:"selectBtnText",style:{"margin-right":"5px"}},ya={key:0,src:q,alt:"",style:{width:"9px",height:"5px",cursor:"pointer"}},ka=["onClick"],xa={key:0,style:{width:"16px",height:"16px","margin-top":"3px"},src:H,alt:""},Ia={key:1,style:{width:"16px",height:"16px","margin-top":"3px"},src:P,alt:""},Ca={class:"modelInfo"},Sa={class:"modelName"},ba={class:"modelIntro dark:text-[#6C6E79] text-[#8B8C8C]"},Fa={class:"consumption bg-[#FFF7ED] dark:bg-[#1D160F]"},wa={key:0,src:W,alt:"",style:{width:"16px",height:"16px","margin-top":"3px"}},Ta={key:1,src:X,alt:"",style:{width:"16px",height:"16px","margin-top":"3px"}},La={key:2,style:{"margin-left":"3px"}},Na={key:3,style:{"margin-left":"3px"},class:"dark:text-[#FFC758] text-[#A45000]"},Ba={key:4,style:{"margin-left":"3px"},class:"dark:text-[#FFC758] text-[#A45000]"},Ma={key:5},Aa=_(e({__name:"newNavBar",props:{currentRoute:String,modelInfo:Object},emits:["changeModelSuccess"],setup(e,{emit:a}){const t=l(),g=G(),m=o((()=>F.isLogin));o((()=>F.userInfo.nickname)),o((()=>F.userInfo.vipExpire)),o((()=>F.userInfo.score)),o((()=>F.userInfo.avatar)),s();const f=n(),F=i(),w=u(),T=d(),B=o((()=>"dark"===T.theme)),A=c([]),O=c(!1);V(),v.on("getUserInfo",(e=>{F.getUserInfo()}));const _=c(!1),D=c(!1),E=c(!1);function J(){E.value=!E.value,v.emit("closeSideBar",E.value)}const R=c(!1);function q(){R.value=!0,D.value=!0}function H(){R.value=!1,D.value=!1,_.value=!1}const P=c(""),W=c(!0);v.on("uuid",(e=>{if(!e)return;let a;e.config&&(a=JSON.parse(e.config).modelInfo.modelType),e.gptsApp||"app"==a?W.value=!1:(W.value=!0,p({modelType:"chat"}).then((a=>{if(a.data){if(A.value=a.data,0==A.value.length)return;let t=a.data.filter((a=>a.id==e.id));if(0==t.length)return;P.value=JSON.parse(t[0].config).modelInfo.modelName}})))}));const X=c([]),$="/document"===f.path?{keyType:"",model:"",page:1,size:99,upload:1}:{keyType:"",model:"",modelType:"chat",page:1,size:99};U($).then((e=>{X.value=e.data.rows})),v.on("updateModelList",(e=>{e&&U({keyType:"",model:"",modelType:"chat",page:1,size:99}).then((e=>{X.value=e.data.rows}))})),j((()=>{if(!localStorage.getItem("chatLogId"))return;let e,a=JSON.parse(localStorage.getItem("chatLogId"));a.config&&(e=JSON.parse(a.config).modelInfo.modelType),a.gptsApp||"app"==e||p({modelType:"chat"}).then((e=>{if(e.data){A.value=e.data;let t=e.data.filter((e=>e.id==a.id));if(0==t.length)return;v.emit("setModel",JSON.parse(t[0].config).modelInfo),P.value=JSON.parse(t[0].config).modelInfo.modelName}}))})),c([]);const Q=a,Z=c(0),K=c(0),Y=c(.8),ee=c(""),ae=c(),te=c(8),le=c("");async function ie(e){if(!m.value)return R.value=!1,void(m.value?(F.logOut(),localStorage.removeItem("chatLogId")):(F.setLoginDialog(!0),v.emit("register",0)));let a=JSON.parse(localStorage.getItem("chatLogId"));const{canAudio:l,canUpload:i,keyType:o,modelName:s,model:n,deductType:u,deduct:d}=e,c={modelTypeInfo:le.value.modelTypeInfo?le.value.modelTypeInfo:"",modelInfo:{canAudio:l,canUpload:i,keyType:o,modelName:s,model:n,maxModelTokens:Z,maxResponseTokens:K.value,systemMessage:null==ee?void 0:ee.value,topN:Y.value,deductType:u,deduct:d,maxRounds:ae,rounds:te.value}},r={groupId:a.id,config:JSON.stringify(c)};try{O.value=!0,await M(r),O.value=!1,t.success("修改当前对话组自定义模型配置成功！"),v.emit("setModel",e),a.config=JSON.stringify(c),localStorage.setItem("chatLogId",JSON.stringify(a)),Q("changeModelSuccess"),await w.queryMyGroup(),g.updateModelDialog(!1),P.value=s,R.value=!1,D.value=!1}catch(p){O.value=!1}}v.on("modelType",(e=>{le.value=JSON.parse(e)}));const oe=c(0);!async function(){await z({keys:["signInRewards"]}).then((e=>{const{signInRewards:a}=e.data;oe.value=a}))}();return r(e,(e=>{e.modelInfo&&(P.value=e.modelInfo.modelName)})),["/chat","/document"].includes(f.path)||(W.value=!1),(e,a)=>(h(),y("div",null,[D.value?(h(),y("div",{key:0,class:"mask",onClick:H})):b("",!0),k("div",ga,[k("div",ma,["/mindMap"==N(f).path?(h(),y("img",{key:0,src:"/static/svg/newNavBar_1-4ed73fbf.svg",style:{cursor:"pointer"},alt:"",onClick:J})):b("",!0),"/mindMap"==N(f).path?(h(),y("div",fa," AI思维导图 ")):b("",!0),W.value?(h(),y("div",{key:2,style:{display:"flex","align-items":"center",cursor:"pointer"},class:"selectBtn",onClick:q},[k("div",ha,S(P.value),1),m.value?(h(),y("img",ya)):b("",!0),R.value?(h(),y("div",{key:1,class:x(["modelBox dark:bg-[#111113] bg-[#FFFFFF]",B.value?"modelBoxDark":"modelBoxLight"])},[(h(!0),y(I,null,C(X.value,(e=>(h(),y("div",{class:x([B.value?"modelItemDark":"modelItemLight","modelItem"]),key:e.id,onClick:L((a=>ie(e)),["stop"])},[B.value?(h(),y("img",xa)):(h(),y("img",Ia)),k("div",Ca,[k("p",Sa,S(e.modelName),1),k("p",ba,S(e.description),1),k("div",Fa,[B.value?(h(),y("img",wa)):(h(),y("img",Ta)),0!=e.vipFreeNum&&e.vipFreeNum-e.used!=0||0==e.deduct?b("",!0):(h(),y("p",La,S(e.deduct)+"积分/次 ",1)),e.vipFreeNum>0&&e.vipFreeNum-e.used!=0?(h(),y("p",Na," 今日免费剩余："+S(e.vipFreeNum-e.used)+" / "+S(e.vipFreeNum),1)):b("",!0),-1==e.vipFreeNum?(h(),y("p",Ba," 会员免费使用 ")):b("",!0),0==e.deduct?(h(),y("p",Ma,"免费使用")):b("",!0)])])],10,ka)))),128))],2)):b("",!0)])):b("",!0)])])]))}}),[["__scopeId","data-v-8b627497"]]);export{Aa as a,pa as n};
