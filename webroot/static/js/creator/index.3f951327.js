import{e,o as a,k as t,j as s,b1 as n,r as o,p as l,v as r,w as i,B as c,C as d,x as u,$ as v,A as f,b2 as p,F as g,D as m,y as h,b3 as b,_ as x,aW as y,K as w,P as k,g as C,U as _,Z as F,H as I,b4 as D,aL as j,a6 as A}from"../main-da83e417.js";import{f as K}from"../ppt/ppt.68f8a116.js";import{d as M}from"../docx/docx.ba0f9ac7.js";import{s as R}from"../index/index.f14ef661.js";const z={style:{padding:"46px","box-sizing":"border-box"}},E={class:"keyword gap-3.5"},L=["onClick"],P=x(e({__name:"index",setup(e){const x=a(),y=t(),w=s(),k=n(),C=o(""),_=o(!1),F=o([]);function I(e){C.value&&(e.preventDefault(),D())}function D(){C.value?async function(){if(!w.checkAuth())return;_.value=!0;try{const e=async()=>{await b({prompt:C.value,onDownloadProgress:({event:e})=>{const a=e.target,{responseText:t}=a,s=t.lastIndexOf("\n",t.length-2);let n=t;-1!==s&&(n=t.substring(s));try{const e=JSON.parse(n);_.value=!1,y.push(`/mindMap/${e.mindTaskId}`)}catch(o){}}}),C.value="",_.value=!1};await e()}catch(e){_.value=!1;const{code:a=500,message:t="好像出错了，请稍后再试！"}=e;if(429===a&&t.includes("balance has been exhausted"))return x.error("当前系统Key余额耗尽、请联系管理员补充！");if(500===a){let a=(null==e?void 0:e.message)??"好像出错了，请稍后再试！";return"Request failed with status code 401"===a&&(a="非法操作、请先登录后再进行问答使用！"),void x.error(a)}if(402===e.code)return x.error(e.message,{duration:5e3}),void k.updateGoodsDialog(!0);x.error("出了点小错误、请稍后试试吧！")}finally{_.value=!1}}():x.error("提示词不能为空")}return l((()=>{!async function(){const{data:e}=await K({code:"MindRec"});F.value=e.recList}()})),(e,a)=>(r(),i("div",z,[c(u(p),{value:C.value,"onUpdate:value":a[0]||(a[0]=e=>C.value=e),placeholder:"输入您想创作的主题，AI一键生成思维导图"},{suffix:d((()=>[c(u(v),{show:_.value},{default:d((()=>[f("div",{class:"input-box-btn",onClick:I}," 智能生成 ")])),_:1},8,["show"])])),_:1},8,["value"]),f("div",E,[(r(!0),i(g,null,m(F.value,(e=>(r(),i("div",{onClick:a=>{return t=e.title,C.value=t,void D();var t}},h(e.title),9,L)))),256))])]))}}),[["__scopeId","data-v-af34d1fa"]]),U={style:{padding:"46px","box-sizing":"border-box"}},$={class:"keyword gap-3.5"},q=["onClick"],B=x(e({__name:"index",setup(e){const v=a(),b=t(),x=s();n();const y=o(""),w=o(!1),k=o([]);function C(e){y.value&&(e.preventDefault(),_())}function _(){y.value?async function(){if(!x.checkAuth())return;w.value=!0;const{data:e}=await M({name:y.value}).catch((e=>v.error(e.message)));b.push(`/content/${e.id}`)}():v.error("提示词不能为空")}return l((()=>{!async function(){const{data:e}=await K({code:"DocsRec"});k.value=e.recList}()})),(e,a)=>(r(),i("div",U,[c(u(p),{value:y.value,"onUpdate:value":a[0]||(a[0]=e=>y.value=e),placeholder:"输入您想创作的主题，AI一键生成word文档"},{suffix:d((()=>[f("div",{class:"input-box-btn",onClick:C}," 智能生成 ")])),_:1},8,["value"]),f("div",$,[(r(!0),i(g,null,m(k.value,(e=>(r(),i("div",{onClick:a=>{return t=e.title,y.value=t,void _();var t}},h(e.title),9,q)))),256))])]))}}),[["__scopeId","data-v-e79dbe84"]]),O={class:"page-creator"},S={style:{width:"100%","align-items":"center"},class:"chat_card flex w-full flex-col bg-gradient-to-b from-[#F7F7F7] to-[#E6EAF6] dark:from-transparent dark:to-transparent dark:bg-[#1B1C22]"},T={class:"page-creator-title"},G={class:"page-creator-desc"},H={class:"page-creator-content"},J={class:"input-box"},N=x(e({__name:"index",setup(e){y((e=>({"3e6590cf":p.value,"3e6590d0":m.value})));const a=w();s();const t=o("mind"),n={mind:P,word:B};function l(e){t.value=e,A().setCurrentModule(e)}k((()=>a),((e,a)=>{console.log("Route changed:",e,a),"/creator"==e.path&&l(e.query.type||"mind")}),{deep:!0,immediate:!0});const p=C((()=>"mind"===t.value?2:1)),m=C((()=>"word"===t.value?2:1)),b=o({}),x=o(!0);return async function(){Promise.all([K({code:"MindConfig"}),K({code:"DocsConfig"})]).then((e=>{console.log(e,"fetchKeywordfetchKeyword"),b.value.mindConfig=e[0].data.mindConfig,b.value.wordConfig=e[1].data.docsConfig,x.value=!1}))}(),o(),(e,a)=>{const s=_("ExpandIcon");return r(),i("div",O,[c(u(j),{style:{"background-color":"transparent"},class:"dark:bg-[#010102] bg-[#F8F9F9] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:d((()=>[c(R,{typeStatus:"1",ref:"right"},null,512),f("div",S,[x.value?(r(),F(u(v),{key:0,show:!0,style:{margin:"auto"}},{description:d((()=>a[2]||(a[2]=[f("div",null," 加载中 ",-1)]))),_:1})):(r(),i(g,{key:1},[f("div",T,h(b.value[t.value+"Config"].title),1),f("div",G,h(b.value[t.value+"Config"].summary),1),f("div",H,[f("div",{class:I(["page-creator-content-subject","mind"===t.value?"active":""]),onClick:a[0]||(a[0]=e=>l("mind"))}," 思维导图 ",2),f("div",{class:I(["page-creator-content-update","word"===t.value?"active":""]),onClick:a[1]||(a[1]=e=>l("word"))}," 文档生成 ",2),f("div",J,[(r(),F(D(n[t.value])))])])],64)),c(s)])])),_:1})])}}}),[["__scopeId","data-v-b5584cf3"]]);export{N as default};
