import{e as a,p as e,l as t,k as s,aR as n,r as o,q as l,w as r,x as i,C as c,D as d,y as u,a0 as v,B as p,aS as f,F as g,E as m,z as h,aT as x,_ as y,aU as w,L as b,Q as k,g as C,W as _,$ as I,I as F,aV as D,aM as j,a7 as A}from"../main-be2ae0f3.js";import{f as M}from"../ppt/ppt.c87bceee.js";import{d as R}from"../docx/docx.dd6e8846.js";import{s as z}from"../index/index.b8130e97.js";const E={style:{padding:"46px","box-sizing":"border-box"}},q={class:"keyword gap-3.5"},K=["onClick"],L=y(a({__name:"index",setup(a){const y=e(),w=t(),b=s(),k=n(),C=o(""),_=o(!1),I=o([]);function F(a){C.value&&(a.preventDefault(),D())}function D(){C.value?async function(){if(!b.checkAuth())return;_.value=!0;try{const a=async()=>{await x({prompt:C.value,onDownloadProgress:({event:a})=>{const e=a.target,{responseText:t}=e,s=t.lastIndexOf("\n",t.length-2);let n=t;-1!==s&&(n=t.substring(s));try{const a=JSON.parse(n);_.value=!1,w.push(`/mindMap/${a.mindTaskId}`)}catch(o){}}}),C.value="",_.value=!1};await a()}catch(a){_.value=!1;const{code:e=500,message:t="好像出错了，请稍后再试！"}=a;if(429===e&&t.includes("balance has been exhausted"))return y.error("当前系统Key余额耗尽、请联系管理员补充！");if(500===e){let e=(null==a?void 0:a.message)??"好像出错了，请稍后再试！";return"Request failed with status code 401"===e&&(e="非法操作、请先登录后再进行问答使用！"),void y.error(e)}if(402===a.code)return y.error(a.message,{duration:5e3}),void k.updateGoodsDialog(!0);y.error("出了点小错误、请稍后试试吧！")}finally{_.value=!1}}():y.error("提示词不能为空")}return l((()=>{!async function(){const{data:a}=await M({code:"MindRec"});I.value=a.recList}()})),(a,e)=>(r(),i("div",E,[c(u(f),{value:C.value,"onUpdate:value":e[0]||(e[0]=a=>C.value=a),placeholder:"输入您想创作的主题，AI一键生成思维导图"},{suffix:d((()=>[c(u(v),{show:_.value},{default:d((()=>[p("div",{class:"input-box-btn",onClick:F}," 智能生成 ")])),_:1},8,["show"])])),_:1},8,["value"]),p("div",q,[(r(!0),i(g,null,m(I.value,(a=>(r(),i("div",{onClick:e=>{return t=a.title,C.value=t,void D();var t}},h(a.title),9,K)))),256))])]))}}),[["__scopeId","data-v-af34d1fa"]]),S={style:{padding:"46px","box-sizing":"border-box"}},T={class:"keyword gap-3.5"},U=["onClick"],$=y(a({__name:"index",setup(a){const v=e(),x=t(),y=s();n();const w=o(""),b=o(!1),k=o([]);function C(a){w.value&&(a.preventDefault(),_())}function _(){w.value?async function(){if(!y.checkAuth())return;b.value=!0;const{data:a}=await R({name:w.value}).catch((a=>v.error(a.message)));x.push(`/content/${a.id}`)}():v.error("提示词不能为空")}return l((()=>{!async function(){const{data:a}=await M({code:"DocsRec"});k.value=a.recList}()})),(a,e)=>(r(),i("div",S,[c(u(f),{value:w.value,"onUpdate:value":e[0]||(e[0]=a=>w.value=a),placeholder:"输入您想创作的主题，AI一键生成word文档"},{suffix:d((()=>[p("div",{class:"input-box-btn",onClick:C}," 智能生成 ")])),_:1},8,["value"]),p("div",T,[(r(!0),i(g,null,m(k.value,(a=>(r(),i("div",{onClick:e=>{return t=a.title,w.value=t,void _();var t}},h(a.title),9,U)))),256))])]))}}),[["__scopeId","data-v-e79dbe84"]]),B={class:"page-creator"},O={style:{width:"100%","align-items":"center"},class:"chat_card flex w-full flex-col bg-gradient-to-b from-[#F7F7F7] to-[#E6EAF6] dark:from-transparent dark:to-transparent dark:bg-[#1B1C22]"},P={class:"page-creator-title"},G={class:"page-creator-desc"},J={class:"page-creator-content"},N={class:"input-box"},Q=y(a({__name:"index",setup(a){w((a=>({"3e6590cf":f.value,"3e6590d0":m.value})));const e=b();s();const t=o("mind"),n={mind:L,word:$};function l(a){t.value=a,A().setCurrentModule(a)}k((()=>e),((a,e)=>{console.log("Route changed:",a,e),"/creator"==a.path&&l(a.query.type||"mind")}),{deep:!0,immediate:!0});const f=C((()=>"mind"===t.value?2:1)),m=C((()=>"word"===t.value?2:1)),x=o({}),y=o(!0);return async function(){Promise.all([M({code:"MindConfig"}),M({code:"DocsConfig"})]).then((a=>{console.log(a,"fetchKeywordfetchKeyword"),x.value.mindConfig=a[0].data.mindConfig,x.value.wordConfig=a[1].data.docsConfig,y.value=!1}))}(),o(),(a,e)=>{const s=_("ExpandIcon");return r(),i("div",B,[c(u(j),{style:{"background-color":"transparent"},class:"dark:bg-[#010102] bg-[#F8F9F9] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:d((()=>[c(z,{typeStatus:"1",ref:"right"},null,512),p("div",O,[y.value?(r(),I(u(v),{key:0,show:!0,style:{margin:"auto"}},{description:d((()=>e[2]||(e[2]=[p("div",null," 加载中 ",-1)]))),_:1})):(r(),i(g,{key:1},[p("div",P,h(x.value[t.value+"Config"].title),1),p("div",G,h(x.value[t.value+"Config"].summary),1),p("div",J,[p("div",{class:F(["page-creator-content-subject","mind"===t.value?"active":""]),onClick:e[0]||(e[0]=a=>l("mind"))}," 思维导图 ",2),p("div",{class:F(["page-creator-content-update","word"===t.value?"active":""]),onClick:e[1]||(e[1]=a=>l("word"))}," 文档生成 ",2),p("div",N,[(r(),I(D(n[t.value])))])])],64)),c(s)])])),_:1})])}}}),[["__scopeId","data-v-b5584cf3"]]);export{Q as default};
