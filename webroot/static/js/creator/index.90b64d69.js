import{e,p as a,l as t,k as i,be as l,r as n,g as s,aP as r,q as o,w as d,x as u,C as c,D as v,B as p,G as f,O as g,y as h,a1 as y,aJ as m,F as x,E as b,z as k,$ as w,bf as C,_,bg as M,ac as T,I as U,L as E,bh as A,a_ as I,Z as D}from"../main-b114ff11.js";import{_ as j}from"../sendBox_2 copy/sendBox_2 copy.b5b6aeb0.js";import{f as z}from"../ppt/ppt.673e9067.js";import{d as F}from"../docx/docx.6e3e2244.js";import{s as O}from"../index/index.9c95232e.js";const B={style:{"box-sizing":"border-box"}},L={key:1,style:{width:"20px",height:"20px"},src:j,alt:""},$={class:"keyword gap-3.5"},N=["onClick"],R=_(e({__name:"index",setup(e){const _=a(),M=t(),T=i(),U=l(),E=n(""),A=n(!1),I=n([]),D=s((()=>T.userInfo.vipLeavelId));let j=n([]);r().then((e=>{j.value=e.data}));let F=n(null);function O(e){if(F.value&&F.value.isVipUsed&&-1===F.value.userType.indexOf(D.value)){let e=F.value.userType.split(","),a="";return e.forEach(((t,i)=>{a+=j.value.filter((e=>e.id==t))[0].dictName,i<e.length-1&&(a+=",")})),void _.error(w("digitalMan.vipUse1")+a+w("digitalMan.vipUse2"))}E.value&&(e.preventDefault(),R())}function R(){E.value?async function(){if(!T.checkAuth())return;A.value=!0;try{const e=async()=>{await C({prompt:E.value,onDownloadProgress:({event:e})=>{const a=e.target,{responseText:t}=a,i=t.lastIndexOf("\n",t.length-2);let l=t;-1!==i&&(l=t.substring(i));try{const e=JSON.parse(l);A.value=!1,M.push(`/mindMap/${e.mindTaskId}`)}catch(n){}}}),E.value="",A.value=!1};await e()}catch(e){A.value=!1;const{code:a=500,message:t="好像出错了，请稍后再试！"}=e;if(429===a&&t.includes("balance has been exhausted"))return _.error("当前系统Key余额耗尽、请联系管理员补充！");if(500===a){let a=(null==e?void 0:e.message)??"好像出错了，请稍后再试！";return"Request failed with status code 401"===a&&(a="非法操作、请先登录后再进行问答使用！"),void _.error(a)}if(402===e.code)return _.error(e.message,{duration:5e3}),void U.updateGoodsDialog(!0);_.error("出了点小错误、请稍后试试吧！")}finally{A.value=!1}}():_.error(w("gpt.noTips"))}return o((()=>{!async function(){const{data:e}=await z({code:"MindRec"});I.value=e.recList}(),async function(){z({code:"MindConfig"}).then((e=>{console.log(e,"MindConfigMindConfig"),F.value=e.data}))}()})),(e,a)=>(d(),u("div",B,[c(h(m),{value:E.value,"onUpdate:value":a[0]||(a[0]=e=>E.value=e),type:"textarea",autosize:"",placeholder:e.$t("gpt.mindInputText1")},{suffix:v((()=>[p("div",{class:"dark:bg-[#23A559]",style:f([E.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;",{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(30px)"}]),onClick:O},[A.value?(d(),g(h(y),{key:0,stroke:"#fff",show:A.value},null,8,["show"])):(d(),u("img",L))],4)])),_:1},8,["value","placeholder"]),p("div",$,[(d(!0),u(x,null,b(I.value,(e=>(d(),u("div",{onClick:a=>function(e){if(F.value&&F.value.isVipUsed&&-1===F.value.userType.indexOf(D.value)){let e=F.value.userType.split(","),a="";return e.forEach(((t,i)=>{a+=j.value.filter((e=>e.id==t))[0].dictName,i<e.length-1&&(a+=",")})),void _.error(w("digitalMan.vipUse1")+a+w("digitalMan.vipUse2"))}E.value=e,R()}(e.title)},k(e.title),9,N)))),256))])]))}}),[["__scopeId","data-v-f802436b"]]),V={style:{"box-sizing":"border-box"}},q={class:"keyword gap-3.5"},K=["onClick"],P=_(e({__name:"index",setup(e){const g=a(),y=t(),C=i();l();const _=n(""),M=n(!1),T=n([]),U=s((()=>C.userInfo.vipLeavelId));let E=n([]);r().then((e=>{E.value=e.data}));let A=n(null);function I(e){if(A.value&&A.value.isVipUsed&&-1===A.value.userType.indexOf(U.value)){let e=A.value.userType.split(","),a="";return e.forEach(((t,i)=>{a+=E.value.filter((e=>e.id==t))[0].dictName,i<e.length-1&&(a+=",")})),void g.error(w("digitalMan.vipUse1")+a+w("digitalMan.vipUse2"))}_.value&&(e.preventDefault(),D())}function D(){_.value?async function(){if(!C.checkAuth())return;M.value=!0;const{data:e}=await F({name:_.value}).catch((e=>g.error(e.message)));y.push(`/content/${e.id}`)}():g.error(w("gpt.noTips"))}return o((()=>{!async function(){const{data:e}=await z({code:"DocsRec"});T.value=e.recList}(),async function(){z({code:"DocsConfig"}).then((e=>{console.log(e,"MindConfigMindConfig"),A.value=e.data}))}()})),(e,a)=>(d(),u("div",V,[c(h(m),{value:_.value,"onUpdate:value":a[0]||(a[0]=e=>_.value=e),type:"textarea",autosize:"",placeholder:e.$t("gpt.wordInputText1")},{suffix:v((()=>[p("div",{class:"dark:bg-[#23A559]",style:f([_.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;",{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(30px)"}]),onClick:I},a[1]||(a[1]=[p("img",{style:{width:"20px",height:"20px"},src:j,alt:""},null,-1)]),4)])),_:1},8,["value","placeholder"]),p("div",q,[(d(!0),u(x,null,b(T.value,(e=>(d(),u("div",{onClick:a=>function(e){if(A.value&&A.value.isVipUsed&&-1===A.value.userType.indexOf(U.value)){let e=A.value.userType.split(","),a="";return e.forEach(((t,i)=>{a+=E.value.filter((e=>e.id==t))[0].dictName,i<e.length-1&&(a+=",")})),void g.error(w("digitalMan.vipUse1")+a+w("digitalMan.vipUse2"))}_.value=e,D()}(e.title)},k(e.title),9,K)))),256))])]))}}),[["__scopeId","data-v-67c137ab"]]),S={class:"page-creator"},G={style:{width:"100%","align-items":"center"},class:"chat_card flex w-full flex-col bg-[#fff] dark:from-transparent dark:to-transparent dark:bg-[#1B1C22]"},J={class:"page-creator-title"},Y={class:"page-creator-desc"},Z={class:"page-creator-content"},H={class:"input-box"},Q=_(e({__name:"index",setup(e){M((e=>({"41dc1824":r.value,"41dc1822":f.value})));const a=T();o((()=>{U.emit("setSliderMenus")})),i();const t=n("mind"),l={mind:R,word:P};E((()=>a),((e,a)=>{var i;console.log("Route changed:",e,a),"/creator"==e.path&&(i=e.query.type||"mind",t.value=i,D().setCurrentModule(i))}),{deep:!0,immediate:!0});const r=s((()=>"mind"===t.value?2:1)),f=s((()=>"word"===t.value?2:1)),m=n({}),b=n(!0);return async function(){Promise.all([z({code:"MindConfig"}),z({code:"DocsConfig"})]).then((e=>{console.log(e,"fetchKeywordfetchKeyword"),m.value.mindConfig=e[0].data.mindConfig,m.value.wordConfig=e[1].data.docsConfig,b.value=!1}))}(),n(),(e,a)=>(d(),u("div",S,[c(h(I),{style:{"background-color":"transparent"},class:"dark:bg-[#010102] bg-[#fff] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:v((()=>[c(O,{typeStatus:"1",ref:"right"},null,512),p("div",G,[b.value?(d(),g(h(y),{key:0,show:!0,style:{margin:"auto"}},{description:v((()=>[p("div",null,k(e.$t("gpt.loading")),1)])),_:1})):(d(),u(x,{key:1},[p("div",J,k(m.value[t.value+"Config"].title),1),p("div",Y,k(m.value[t.value+"Config"].summary),1),p("div",Z,[p("div",H,[(d(),g(A(l[t.value])))])])],64))])])),_:1})]))}}),[["__scopeId","data-v-97f2fc9e"]]);export{Q as default};
