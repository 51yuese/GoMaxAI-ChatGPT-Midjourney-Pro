import{e,p as a,l as t,k as s,bd as n,r,q as o,w as i,x as l,B as d,C as c,A as u,G as v,P as p,D as f,a1 as g,aM as h,F as m,E as y,y as x,be as b,_ as k,bf as w,a9 as _,M as C,g as A,aD as E,bg as D,b2 as j,$ as z}from"../main-23bab8dd.js";import{_ as F}from"../sendBox_2 copy/sendBox_2 copy.b5b6aeb0.js";import{f as I}from"../ppt/ppt.e06b6928.js";import{d as B}from"../docx/docx.4326196f.js";import{s as M}from"../index/index.2773fb3d.js";const R={style:{"box-sizing":"border-box"}},q={key:1,style:{width:"20px",height:"20px"},src:F,alt:""},K={class:"keyword gap-3.5"},P=["onClick"],$=k(e({__name:"index",setup(e){const k=a(),w=t(),_=s(),C=n(),A=r(""),E=r(!1),D=r([]);function j(e){A.value&&(e.preventDefault(),z())}function z(){A.value?async function(){if(!_.checkAuth())return;E.value=!0;try{const e=async()=>{await b({prompt:A.value,onDownloadProgress:({event:e})=>{const a=e.target,{responseText:t}=a,s=t.lastIndexOf("\n",t.length-2);let n=t;-1!==s&&(n=t.substring(s));try{const e=JSON.parse(n);E.value=!1,w.push(`/mindMap/${e.mindTaskId}`)}catch(r){}}}),A.value="",E.value=!1};await e()}catch(e){E.value=!1;const{code:a=500,message:t="好像出错了，请稍后再试！"}=e;if(429===a&&t.includes("balance has been exhausted"))return k.error("当前系统Key余额耗尽、请联系管理员补充！");if(500===a){let a=(null==e?void 0:e.message)??"好像出错了，请稍后再试！";return"Request failed with status code 401"===a&&(a="非法操作、请先登录后再进行问答使用！"),void k.error(a)}if(402===e.code)return k.error(e.message,{duration:5e3}),void C.updateGoodsDialog(!0);k.error("出了点小错误、请稍后试试吧！")}finally{E.value=!1}}():k.error("提示词不能为空")}return o((()=>{!async function(){const{data:e}=await I({code:"MindRec"});D.value=e.recList}()})),(e,a)=>(i(),l("div",R,[d(f(h),{value:A.value,"onUpdate:value":a[0]||(a[0]=e=>A.value=e),type:"textarea",autosize:"",placeholder:"输入您想创作的主题，AI一键生成思维导图"},{suffix:c((()=>[u("div",{class:"dark:bg-[#23A559]",style:v([A.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;",{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(30px)"}]),onClick:j},[E.value?(i(),p(f(g),{key:0,stroke:"#fff",show:E.value},null,8,["show"])):(i(),l("img",q))],4)])),_:1},8,["value"]),u("div",K,[(i(!0),l(m,null,y(D.value,(e=>(i(),l("div",{onClick:a=>{return t=e.title,A.value=t,void z();var t}},x(e.title),9,P)))),256))])]))}}),[["__scopeId","data-v-1e35cacc"]]),G={style:{"box-sizing":"border-box"}},L={class:"keyword gap-3.5"},O=["onClick"],S=k(e({__name:"index",setup(e){const p=a(),g=t(),b=s();n();const k=r(""),w=r(!1),_=r([]);function C(e){k.value&&(e.preventDefault(),A())}function A(){k.value?async function(){if(!b.checkAuth())return;w.value=!0;const{data:e}=await B({name:k.value}).catch((e=>p.error(e.message)));g.push(`/content/${e.id}`)}():p.error("提示词不能为空")}return o((()=>{!async function(){const{data:e}=await I({code:"DocsRec"});_.value=e.recList}()})),(e,a)=>(i(),l("div",G,[d(f(h),{value:k.value,"onUpdate:value":a[0]||(a[0]=e=>k.value=e),type:"textarea",autosize:"",placeholder:"输入您想创作的主题，AI一键生成word文档"},{suffix:c((()=>[u("div",{class:"dark:bg-[#23A559]",style:v([k.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;",{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(30px)"}]),onClick:C},a[1]||(a[1]=[u("img",{style:{width:"20px",height:"20px"},src:F,alt:""},null,-1)]),4)])),_:1},8,["value"]),u("div",L,[(i(!0),l(m,null,y(_.value,(e=>(i(),l("div",{onClick:a=>{return t=e.title,k.value=t,void A();var t}},x(e.title),9,O)))),256))])]))}}),[["__scopeId","data-v-8ad9e16c"]]),T={class:"page-creator"},U={style:{width:"100%","align-items":"center"},class:"chat_card flex w-full flex-col bg-[#fff] dark:from-transparent dark:to-transparent dark:bg-[#1B1C22]"},Y={class:"page-creator-title"},J={class:"page-creator-desc"},N={class:"page-creator-content"},H={class:"input-box"},Q=k(e({__name:"index",setup(e){w((e=>({"6e44ac85":o.value,"6e44ac86":v.value})));const a=_();s();const t=r("mind"),n={mind:$,word:S};C((()=>a),((e,a)=>{var s;console.log("Route changed:",e,a),"/creator"==e.path&&(s=e.query.type||"mind",t.value=s,z().setCurrentModule(s))}),{deep:!0,immediate:!0});const o=A((()=>"mind"===t.value?2:1)),v=A((()=>"word"===t.value?2:1)),h=r({}),y=r(!0);return async function(){Promise.all([I({code:"MindConfig"}),I({code:"DocsConfig"})]).then((e=>{console.log(e,"fetchKeywordfetchKeyword"),h.value.mindConfig=e[0].data.mindConfig,h.value.wordConfig=e[1].data.docsConfig,y.value=!1}))}(),r(),(e,a)=>(i(),l("div",T,[d(f(j),{style:{"background-color":"transparent"},class:"dark:bg-[#010102] bg-[#fff] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:c((()=>[d(E,{style:{width:"400px",position:"fixed",right:"0",top:"0",height:"61px","z-index":"41"}}),d(M,{typeStatus:"1",ref:"right"},null,512),u("div",U,[y.value?(i(),p(f(g),{key:0,show:!0,style:{margin:"auto"}},{description:c((()=>a[0]||(a[0]=[u("div",null," 加载中 ",-1)]))),_:1})):(i(),l(m,{key:1},[u("div",Y,x(h.value[t.value+"Config"].title),1),u("div",J,x(h.value[t.value+"Config"].summary),1),u("div",N,[u("div",H,[(i(),p(D(n[t.value])))])])],64))])])),_:1})]))}}),[["__scopeId","data-v-7b062959"]]);export{Q as default};
