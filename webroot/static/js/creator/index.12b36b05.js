import{e,p as a,l as t,k as s,ba as n,r,q as o,w as l,x as i,C as c,D as d,B as u,G as v,O as p,y as f,a0 as g,aI as m,F as h,E as y,z as x,bb as b,_ as k,bc as w,ab as _,I as C,L as A,g as E,bd as I,a$ as j,Z as B}from"../main-bf8e7d49.js";import{_ as D}from"../sendBox_2 copy/sendBox_2 copy.b5b6aeb0.js";import{f as F}from"../ppt/ppt.d221cd1f.js";import{d as z}from"../docx/docx.7af0ce22.js";import{s as M}from"../index/index.35178b81.js";const R={style:{"box-sizing":"border-box"}},q={key:1,style:{width:"20px",height:"20px"},src:D,alt:""},K={class:"keyword gap-3.5"},L=["onClick"],O=k(e({__name:"index",setup(e){const k=a(),w=t(),_=s(),C=n(),A=r(""),E=r(!1),I=r([]);function j(e){A.value&&(e.preventDefault(),B())}function B(){A.value?async function(){if(!_.checkAuth())return;E.value=!0;try{const e=async()=>{await b({prompt:A.value,onDownloadProgress:({event:e})=>{const a=e.target,{responseText:t}=a,s=t.lastIndexOf("\n",t.length-2);let n=t;-1!==s&&(n=t.substring(s));try{const e=JSON.parse(n);E.value=!1,w.push(`/mindMap/${e.mindTaskId}`)}catch(r){}}}),A.value="",E.value=!1};await e()}catch(e){E.value=!1;const{code:a=500,message:t="好像出错了，请稍后再试！"}=e;if(429===a&&t.includes("balance has been exhausted"))return k.error("当前系统Key余额耗尽、请联系管理员补充！");if(500===a){let a=(null==e?void 0:e.message)??"好像出错了，请稍后再试！";return"Request failed with status code 401"===a&&(a="非法操作、请先登录后再进行问答使用！"),void k.error(a)}if(402===e.code)return k.error(e.message,{duration:5e3}),void C.updateGoodsDialog(!0);k.error("出了点小错误、请稍后试试吧！")}finally{E.value=!1}}():k.error("提示词不能为空")}return o((()=>{!async function(){const{data:e}=await F({code:"MindRec"});I.value=e.recList}()})),(e,a)=>(l(),i("div",R,[c(f(m),{value:A.value,"onUpdate:value":a[0]||(a[0]=e=>A.value=e),type:"textarea",autosize:"",placeholder:"输入您想创作的主题，AI一键生成思维导图"},{suffix:d((()=>[u("div",{class:"dark:bg-[#23A559]",style:v([A.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;",{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(30px)"}]),onClick:j},[E.value?(l(),p(f(g),{key:0,stroke:"#fff",show:E.value},null,8,["show"])):(l(),i("img",q))],4)])),_:1},8,["value"]),u("div",K,[(l(!0),i(h,null,y(I.value,(e=>(l(),i("div",{onClick:a=>{return t=e.title,A.value=t,void B();var t}},x(e.title),9,L)))),256))])]))}}),[["__scopeId","data-v-1e35cacc"]]),S={style:{"box-sizing":"border-box"}},$={class:"keyword gap-3.5"},G=["onClick"],P=k(e({__name:"index",setup(e){const p=a(),g=t(),b=s();n();const k=r(""),w=r(!1),_=r([]);function C(e){k.value&&(e.preventDefault(),A())}function A(){k.value?async function(){if(!b.checkAuth())return;w.value=!0;const{data:e}=await z({name:k.value}).catch((e=>p.error(e.message)));g.push(`/content/${e.id}`)}():p.error("提示词不能为空")}return o((()=>{!async function(){const{data:e}=await F({code:"DocsRec"});_.value=e.recList}()})),(e,a)=>(l(),i("div",S,[c(f(m),{value:k.value,"onUpdate:value":a[0]||(a[0]=e=>k.value=e),type:"textarea",autosize:"",placeholder:"输入您想创作的主题，AI一键生成word文档"},{suffix:d((()=>[u("div",{class:"dark:bg-[#23A559]",style:v([k.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;",{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(30px)"}]),onClick:C},a[1]||(a[1]=[u("img",{style:{width:"20px",height:"20px"},src:D,alt:""},null,-1)]),4)])),_:1},8,["value"]),u("div",$,[(l(!0),i(h,null,y(_.value,(e=>(l(),i("div",{onClick:a=>{return t=e.title,k.value=t,void A();var t}},x(e.title),9,G)))),256))])]))}}),[["__scopeId","data-v-8ad9e16c"]]),T={class:"page-creator"},U={style:{width:"100%","align-items":"center"},class:"chat_card flex w-full flex-col bg-[#fff] dark:from-transparent dark:to-transparent dark:bg-[#1B1C22]"},Y={class:"page-creator-title"},J={class:"page-creator-desc"},N={class:"page-creator-content"},Z={class:"input-box"},H=k(e({__name:"index",setup(e){w((e=>({ccbb7704:v.value,ccbb7702:m.value})));const a=_();o((()=>{C.emit("setSliderMenus")})),s();const t=r("mind"),n={mind:O,word:P};A((()=>a),((e,a)=>{var s;console.log("Route changed:",e,a),"/creator"==e.path&&(s=e.query.type||"mind",t.value=s,B().setCurrentModule(s))}),{deep:!0,immediate:!0});const v=E((()=>"mind"===t.value?2:1)),m=E((()=>"word"===t.value?2:1)),y=r({}),b=r(!0);return async function(){Promise.all([F({code:"MindConfig"}),F({code:"DocsConfig"})]).then((e=>{console.log(e,"fetchKeywordfetchKeyword"),y.value.mindConfig=e[0].data.mindConfig,y.value.wordConfig=e[1].data.docsConfig,b.value=!1}))}(),r(),(e,a)=>(l(),i("div",T,[c(f(j),{style:{"background-color":"transparent"},class:"dark:bg-[#010102] bg-[#fff] z-40 transition w-full h-full","has-sider":!0,"sider-placement":"left"},{default:d((()=>[c(M,{typeStatus:"1",ref:"right"},null,512),u("div",U,[b.value?(l(),p(f(g),{key:0,show:!0,style:{margin:"auto"}},{description:d((()=>a[0]||(a[0]=[u("div",null," 加载中 ",-1)]))),_:1})):(l(),i(h,{key:1},[u("div",Y,x(y.value[t.value+"Config"].title),1),u("div",J,x(y.value[t.value+"Config"].summary),1),u("div",N,[u("div",Z,[(l(),p(I(n[t.value])))])])],64))])])),_:1})]))}}),[["__scopeId","data-v-80c08d3e"]]);export{H as default};
