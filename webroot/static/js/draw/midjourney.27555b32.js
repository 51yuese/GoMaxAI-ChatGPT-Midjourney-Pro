import{e,w as a,x as t,B as l,p as i,k as s,g as r,r as n,aP as o,b2 as d,Z as u,v as p,q as c,bE as v,L as m,I as x,C as g,z as f,F as y,E as w,a2 as h,A as b,P as k,a0 as E,D as F,O as I,y as C,N as T,a4 as A,aD as _,bF as $,ai as j,G as M,ag as S,$ as B,bG as z,_ as D,ar as V,bH as U,bI as P,a7 as N,a8 as O,aH as G,aI as H,Q as J,am as L,aK as R,bJ as q,a5 as X,bK as W,n as K,an as Y,ac as Q,aT as Z,aF as ee,at as ae,ax as te,aw as le,av as ie,au as se}from"../main-a0b53047.js";import{a as re,M as ne}from"../index/index.27c727e8.js";import{M as oe}from"../index/index.e940c092.js";import{_ as de,a as ue}from"../close copy/close copy.08564ec3.js";import{_ as pe,b as ce}from"../baiduThink/baiduThink.3d2826cf.js";import{F as ve}from"../FlashOutline/FlashOutline.8896e7df.js";import{C as me}from"../index/index.3f49779e.js";import{C as xe,_ as ge,n as fe}from"../isVIP2/isVIP2.6b2eb435.js";import{e as ye}from"../music/music.aee9a7ff.js";import{_ as we}from"../aiVideoGou/aiVideoGou.56a8a6eb.js";import{u as he}from"../useUpload/useUpload.78be6f1d.js";import"../draw-fail/draw-fail.ad8fd01b.js";import"../index/index.5b75f753.js";import"../index/index.bfff7796.js";import"./draw.edc6e061.js";import"../HeartOutline/HeartOutline.c4deac56.js";import"../Popconfirm/Popconfirm.a6d67891.js";import"../police/police.deef576c.js";const be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ke=l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 328l144-144l144 144"},null,-1),Ee=[ke],Fe=e({name:"ChevronUp",render:function(e,l){return a(),t("svg",be,Ee)}}),Ie={ref:"setParameterRef",class:"sendBox border-transparent"},Ce={class:"borderBox dark:bg-[#3E6AE7] bg-[#E0E2E9]"},Te={class:"inputBox bg-[#fff] dark:bg-[#24252B]"},Ae={key:0,style:{width:"100%",padding:"12px",height:"300px",position:"absolute",bottom:"100px",left:"0","border-radius":"12px 12px 0 0"},class:"border dark:border-[#27272A] border-[#E7E7E7] bg-[#F8F9F9] dark:bg-[#19191B]"},_e={style:{display:"flex","justify-content":"space-between"}},$e={style:{"overflow-y":"auto",height:"90%","overflow-x":"hidden"}},je=["onClick"],Me=["src"],Se={style:{width:"100%","margin-left":"4px"}},Be={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis"}},ze={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",width:"90%"}},De={style:{width:"100%"}},Ve=["placeholder"],Ue={class:"submitBox flex w-[100%]"},Pe={style:{"flex-grow":"1",display:"flex",gap:"10px","padding-left":"20px"}},Ne={class:"ml2"},Oe={class:"ml2"},Ge={class:"translatr",style:{display:"flex","align-items":"center"}},He={style:{"margin-right":"4px"},class:"text-[#76798B] dark:text-[#fff]"},Je={class:"btnBox"},Le={key:0,class:"vipIcon",src:"/static/svg/isVIP1-b7a6f332.svg",alt:""},Re={key:1,style:{display:"flex","align-items":"center"}},qe={key:0,style:{color:"#fff"}},Xe={key:1,style:{color:"#fff"}},We={key:2,style:{color:"#fff"}},Ke={key:3,style:{display:"flex","align-items":"center",color:"#fff"}},Ye={style:{"font-size":"10px"}},Qe={key:4,style:{color:"#fff"}},Ze={key:2,class:"loader"},ea=D(e({__name:"submitTask",props:{mode:String,isSuccess:Boolean,handleprompt:String},emits:["submit"],setup(e,{emit:D}){const V=i(),U=e,P=s(),N=r((()=>1===P.userInfo.lifetimeVip||P.userInfo.vipExpire&&new Date(P.userInfo.vipExpire)>new Date)),O=r((()=>P.userInfo.vipLeavelId));let G=n([]);o().then((e=>{G.value=e.data}));const H=D,J=d("mjBase"),L=n(""),R=n(),q=n(),X=n(),W=n(),K=n(),Y=n(),Q=n(0),Z=n(0),ee=n(""),ae=n([]),te=n(!1),le=u(),ie=r((()=>"dark"===le.theme)),se=n("--fast"),ne=n(1),oe=n(),me=n(!1),xe=n(),ge=n(),fe=n(!1),ye=n([]),we=n(!1);function he(){S().then((e=>{oe.value=e.data}))}function be(){J.mjParams.value.prompt=ee.value,ee.value?(me.value=!1,te.value=!1):me.value=!0}function ke(e){ee.value=e,J.mjParams.value.prompt=e}function Ee(e){0==e?(ne.value=0,J.mjParams.value.mode=2,se.value="--relax"):1==e&&(ne.value=1,J.mjParams.value.mode=1,se.value="--fast")}function Fe(){ee.value?(me.value=!1,te.value=!1):me.value=!0}p({keys:["dialogueTail","robotAvatar","mjModel","relax_mjDeduction1","relax_mjDeduction2","fast_mjDeduction1","fast_mjDeduction2","trubo_mjDeduction1","trubo_mjDeduction2","fast_vip_free","relax_vip_free","trubo_vip_free"]}).then((e=>{const{relax_mjDeduction1:a,fast_mjDeduction1:t,trubo_mjDeduction1:l,fast_vip_free:i,relax_vip_free:s,trubo_vip_free:r}=e.data;R.value=Number(a),q.value=Number(t),X.value=Number(l),W.value=Number(i),K.value=Number(s),Y.value=Number(r),L.value=e.data.mjModel})),c((()=>{he()})),v({page:1,size:20}).then((e=>{ae.value=e.data.rows})),m(U,(e=>{console.log(e),e.isSuccess?(ee.value="",we.value=!1,Q.value++,he()):e.handleprompt&&(ee.value=e.handleprompt,J.mjParams.value.prompt=e.handleprompt)}));const ea=()=>{xe.value.open()},aa=()=>{ge.value.thinks="",ge.value.open()};function ta(){fe.value=!fe.value,fe.value?(Z.value=1,J.mjParams.value.translate=1):(Z.value=0,J.mjParams.value.translate=0)}function la(e,a){const{roles:t,styles:l}=e,i=JSON.parse(JSON.stringify(e));i.mats=[],a||J.styleMode.value&&(i.prompt=i.prompt+" "+J.styleMode.value),ye.value.forEach((e=>{-1==t.indexOf(e)&&-1==l.indexOf(e)&&i.mats.push(e)})),t.length||(i.cw=0),t.length||l.length||delete i.iw;const{ar:s,c:r,no:n,q:o,s:d,weird:u}=a?J.defaultExtendArr.value:J.extendArr.value;return"--v 7"==U.mode?i.extend=`${n?n+" ":""}${U.mode?U.mode+" ":""}${s?s+" ":"--ar 1:1 "}${d?d+" ":"--s 0 "}${r?r+" ":"--c 0 "}${u||""}${se.value?se.value+" ":""}`:i.extend=`${n?n+" ":""}${U.mode?U.mode+" ":""}${s?s+" ":"--ar 1:1 "}${o?o+" ":"--q 1 "}${d?d+" ":"--s 0 "}${r?r+" ":"--c 0 "}${u||""}${se.value?se.value+" ":""}`,delete i.enabled,i}function ia(){if(na.value.isVipUsed&&-1===na.value.userType.indexOf(O.value)){let e=na.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=G.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void V.error(B("digitalMan.vipUse1")+a+B("digitalMan.vipUse1"))}if(!ee.value)return;if(1==we.value)return;we.value=!0;const{enabled:e}=J.mjParams.value;e&&(J.defaultMJParams.value.prompt=J.mjParams.value.prompt);let a={params:la(e?J.defaultMJParams.value:J.mjParams.value,e),type:re.TEXT_TO_IMAGE};H("submit",a),ye.value=[],ra()}const sa=({focused:e,checked:a})=>{if(a){const a={background:"linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"};return e&&(a.boxShadow="0 0 0 2px #957df480"),a}};function ra(){var e;const{enabled:a}=J.mjParams.value;a&&(J.defaultMJParams.value.prompt=J.mjParams.value.prompt);let t={params:la(a?J.defaultMJParams.value:J.mjParams.value,a),type:1,botType:-1!==(null==(e=U.mode)?void 0:e.indexOf("niji"))?"NIJI_JOURNEY":"MID_JOURNEY"};z(t).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(na.value=e.data,oa.value=!1):oa.value=!0})).catch((e=>{oa.value=!0}))}x.off("fetchModelFree"),x.on("fetchModelFree",(e=>{ra()}));const na=n({remainCount:0,freeCount:0,useIntegrate:0}),oa=n(!1);return m((()=>U.mode),((e,a)=>{console.log("props.mode",e),ra()}),{deep:!0,immediate:!0}),m((()=>Z.value),((e,a)=>{ra()}),{deep:!0,immediate:!0}),m((()=>N.value),((e,a)=>{ra()}),{deep:!0,immediate:!0}),m((()=>se.value),((e,a)=>{ra()}),{deep:!0,immediate:!0}),(e,i)=>(a(),t("div",Ie,[g(pe,{ref_key:"inspirationRef",ref:xe,onTextToImg:ke,type:"mj"},null,512),g(ce,{ref_key:"thinkRef",ref:ge,onTextToImg:ke,type:"mj"},null,512),l("div",Ce,[l("div",Te,[me.value&&ae.value.length?(a(),t("div",Ae,[l("div",_e,[l("p",null,f(e.$t("draw.recokeywords")),1),ie.value?(a(),t("img",{key:0,style:{cursor:"pointer"},onClick:i[0]||(i[0]=e=>me.value=!1),src:de,alt:""})):(a(),t("img",{key:1,style:{cursor:"pointer"},onClick:i[1]||(i[1]=e=>me.value=!1),src:ue,alt:""}))]),l("div",$e,[(a(!0),t(y,null,w(ae.value,(e=>(a(),t("div",{onClick:a=>function(e){me.value=!1,ee.value=e.suggestEn,J.mjParams.value.prompt=e.suggestEn}(e),class:h(ie.value?"item":"item1"),style:{"margin-top":"12px",display:"flex",padding:"8px",width:"100%","align-items":"center",cursor:"pointer"},key:e.id},[l("img",{style:{width:"50px",height:"50px"},src:e.image,alt:""},null,8,Me),l("div",Se,[l("div",Be,f(e.suggestCn),1),l("div",ze,f(e.suggestEn),1)])],10,je)))),128))])])):b("",!0),l("div",De,[k(l("textarea",{onInput:be,onFocus:Fe,"onUpdate:modelValue":i[2]||(i[2]=e=>ee.value=e),type:"text",class:"inp dark:text-[#A1A8B4] text-[#767676]",placeholder:e.$t("draw.inputWarning1"),style:{resize:"none",height:"40px"}},null,40,Ve),[[E,ee.value]])]),l("div",Ue,[l("span",Pe,[g(C($),null,{default:F((()=>[1==ne.value?(a(),I(C(_),{key:0,bordered:!1,"text-color":"#767676",style:{background:"#F2F3F7"},onClick:i[3]||(i[3]=e=>Ee(0))},{icon:F((()=>[g(C(T),{color:"#767676"},{default:F((()=>[g(C(ve))])),_:1})])),default:F((()=>[A(" "+f(e.$t("draw.quickModel")),1)])),_:1})):b("",!0),0==ne.value?(a(),I(C(_),{key:1,bordered:!1,"text-color":"#767676",style:{background:"#F2F3F7"},onClick:i[4]||(i[4]=e=>Ee(1))},{icon:F((()=>[g(C(T),{color:"#767676"},{default:F((()=>[g(C(ve))])),_:1})])),default:F((()=>[A(" "+f(e.$t("draw.NormalModel")),1)])),_:1})):b("",!0)])),_:1}),l("div",{onClick:aa,class:"box2 bg-[#F2F3F7] dark:bg-[#4E5058]"},[i[5]||(i[5]=l("img",{src:"/static/svg/lx-58a22129.svg",alt:""},null,-1)),l("span",Ne,f(e.$t("draw.AIgenDesc")),1)]),l("div",{onClick:ea,class:"bg-[#F2F3F7] dark:bg-[#4E5058] box2"},[i[6]||(i[6]=l("img",{src:"/static/svg/submitBot-e108dc09.svg",alt:""},null,-1)),l("span",Oe,f(e.$t("homePage.tips")),1)]),l("div",Ge,[l("p",He,f(e.$t("draw.automatic")),1),g(C(j),{"onUpdate:value":ta,"rail-style":sa,size:"small"})])]),l("div",Je,[l("div",{class:"btn bg-gradient-to-r from-[#574FFE] to-[#726AFB]",onClick:ia,style:M(ee.value?"":"cursor: not-allowed;")},[na.value&&na.value.isVipUsed?(a(),t("img",Le)):b("",!0),we.value?(a(),t("div",Ze)):(a(),t("div",Re,[C(P).isLogin?na.value&&na.value.isVipFree&&N.value?(a(),t("span",Xe,f(e.$t("chat.vipFree")),1)):na.value&&na.value.remainCount&&N.value?(a(),t("span",We,f(e.$t("draw.shenyu")+na.value.remainCount+e.$t("draw.chiFree")),1)):na.value?(a(),t("div",Ke,[l("span",null,f(e.$t("gpt.lijiGen")),1),l("span",Ye,"（"+f(na.value.useIntegrate+e.$t("chat.pointsChi"))+"）",1)])):(a(),t("span",Qe,f(e.$t("draw.gen")),1)):(a(),t("span",qe,f(e.$t("draw.beginGen")),1))]))],4)])])])])],512))}}),[["__scopeId","data-v-c162569f"]]),aa="/static/svg/instantce-78a6b698.svg",ta="/static/svg/mjMore-9acf549f.svg",la="/static/svg/delImg copy-c829db94.svg",ia={class:"swi-p subsiderbar-class video_sub_sidebar bg-[#f2f2f5] dark:bg-[#222325]",style:{border:"none"}},sa={class:"scroll_card",style:{height:"100%","overflow-y":"scroll","padding-top":"44px"}},ra={key:0,style:{"margin-top":"18px","border-radius":"5px",border:"1px solid #E0E2E9"}},na={style:{padding:"10px 15px 12px"}},oa={style:{"font-size":"14px"}},da={style:{"margin-top":"4px","font-size":"12px",color:"#767676"}},ua={key:1,class:"textToImg"},pa={style:{"margin-top":"10px"}},ca={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},va={class:"dark:text-[#EEEEF0] text-[#000] text-[18px]",style:{"font-weight":"500","margin-right":"12px"}},ma={style:{width:"140px",position:"relative"},class:"customBox"},xa={key:0,class:"newModel"},ga={class:"custerSelect"},fa=["onClick"],ya={class:"name"},wa={key:0,class:"newModel"},ha={style:{"margin-top":"0px"}},ba={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},ka={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},Ea={class:"style_card"},Fa={class:"styleBox",ref:"container"},Ia=["onClick"],Ca=["onClick"],Ta={class:"styleImgText"},Aa=["src"],_a={class:"styleImgItem zero"},$a={class:"back"},ja={style:{"margin-top":"20px"}},Ma={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Sa={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},Ba={class:"sizeMain",style:{"margin-top":"11px"}},za=["onClick"],Da={style:{display:"flex","align-items":"center"}},Va={key:1,class:"text-[#b4b4b4] dark:text-[#b4b4b4]",style:{display:"flex"}},Ua={style:{"margin-top":"20px"}},Pa={style:{display:"flex","align-items":"center","margin-bottom":"6px","justify-content":"space-between"}},Na={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex gap-[6px]"},Oa={style:{"margin-top":"0px"}},Ga={style:{"margin-top":"0px",cursor:"pointer"},class:"uploadPic"},Ha={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ja={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},La={style:{display:"flex","flex-wrap":"wrap",gap:"6px"}},Ra=["onClick"],qa=["src"],Xa={class:"uploadOther p1"},Wa=["onClick"],Ka=["onBlur","onUpdate:modelValue","onInput"],Ya={key:1,style:{"font-size":"12px"}},Qa={key:1,style:{width:"1px",height:"1px"}},Za={class:"swi-p",style:{display:"flex","align-items":"center",height:"14px"}},et={style:{"margin-right":"4px","font-size":"12px"}},at={class:"uploadOther"},tt={key:1},lt={key:1,style:{width:"1px",height:"1px"}},it={style:{display:"flex","align-items":"center",height:"14px"}},st={style:{"margin-right":"4px","font-size":"12px"}},rt={class:"upload",style:{position:"relative","margin-left":"4px"}},nt={style:{"font-size":"13px",color:"#6A6A6A"}},ot={style:{"font-size":"14px",color:"#767676",display:"flex","align-items":"center","justify-content":"center"}},dt={class:"bot-p"},ut={class:"uploadOther"},pt={style:{display:"flex","align-items":"center",height:"12px"}},ct={style:{"margin-right":"4px","font-size":"12px"}},vt={class:"uploadOther"},mt={style:{display:"flex","align-items":"center",height:"14px"}},xt={style:{"margin-right":"4px","font-size":"12px"}},gt={style:{display:"flex"}},ft={style:{"margin-right":"4px"}},yt={style:{}},wt={style:{display:"flex","align-items":"center"}},ht={style:{"margin-right":"4px"}},bt={key:0,style:{position:"absolute",width:"100%",left:"0",top:"40px"},class:"dark:bg-[#383838] bg-[#fff] selectIW"},kt=["onClick"],Et={style:{display:"flex","align-items":"center","margin-bottom":"6px","margin-top":"20px"}},Ft={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},It={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},Ct={style:{"margin-top":"20px"}},Tt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},At={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},_t={class:"seedBox"},$t={style:{"margin-top":"20px"}},jt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Mt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},St={style:{}},Bt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},zt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Dt={style:{"flex-grow":"1"}},Vt={style:{"margin-top":"20px"}},Ut={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Pt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Nt={style:{}},Ot={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},Gt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Ht={style:{"flex-grow":"1"}},Jt={style:{"margin-top":"20px"}},Lt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Rt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},qt={style:{"font-size":"12px"}},Xt={key:0,style:{position:"absolute",top:"30px",width:"100%",left:"0","z-index":"100",padding:"0 8px"},class:"dark:bg-[#222325] bg-[#F0F0F0]"},Wt=["onClick"],Kt={style:{"margin-top":"20px"}},Yt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Qt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Zt={style:{}},el={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},al={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},tl={style:{"flex-grow":"1"}},ll={key:2,class:"ImgToTextBox"},il={style:{display:"flex","margin-bottom":"6px"}},sl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},rl={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},nl={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},ol={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},dl={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},ul={class:"text-[12px] text-[#3e6ae7]"},pl={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},cl=["src"],vl={style:{"margin-top":"20px"}},ml={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},xl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},gl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},fl={key:3,class:"imgMixImg",style:{height:"calc(100vh - 54px)"}},yl={style:{display:"flex","margin-bottom":"6px"}},wl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},hl={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},bl={style:{display:"flex","flex-wrap":"wrap"}},kl={style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},El=["src"],Fl=["onClick"],Il={class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]"},Cl={class:"text-[#000] dark:text-[#94989f]"},Tl={style:{"margin-top":"20px"}},Al={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},_l={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},$l={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},jl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Ml={class:"sizeMain"},Sl=["onClick"],Bl={style:{height:"40px",display:"flex","align-items":"center"}},zl={style:{"margin-top":"20px"}},Dl={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Vl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Ul={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Pl={key:4,class:"AIBox"},Nl={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},Ol={style:{"margin-top":"3px","font-size":"12px"}},Gl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Hl=["src"],Jl={key:1,class:"text-[#000] dark:text-[#94989f]"},Ll={style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Rl={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},ql={style:{"margin-top":"3px","font-size":"12px"}},Xl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Wl=["src"],Kl={key:1,class:"text-[#000] dark:text-[#94989f]"},Yl={style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Ql={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Zl={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},ei={style:{"margin-top":"3px","font-size":"12px"}},ai={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ti={key:5,class:"bottom dark:border-[#383737]"},li={style:{padding:"0 12px",position:"absolute",bottom:"12px",left:"0px",width:"100%"}},ii={key:0,class:"vipIcon",src:ge,alt:""},si={key:0,style:{color:"#fff"}},ri={key:1,style:{color:"#fff"}},ni={key:2,style:{color:"#fff"}},oi={key:3,style:{color:"#fff"}},di={key:4,style:{display:"flex","align-items":"center",color:"#fff"}},ui={style:{"font-size":"10px"}},pi={key:5,style:{color:"#fff"}},ci=D(e({__name:"SubSidebar",props:{drawType:String},emits:["changeDataType","stylesList","rolesList","iwValue","swValue","cwValue","ar","no","s","c","q","weird","matsList","close","setEnabled","incantationCn","submitData"],setup(e,{emit:u}){const p=s(),c=r((()=>1===p.userInfo.lifetimeVip||p.userInfo.vipExpire&&new Date(p.userInfo.vipExpire)>new Date)),v=r((()=>p.userInfo.vipLeavelId));let I=n([]);o().then((e=>{I.value=e.data}));const $=e,S=r((()=>p.isLogin)),D=r((()=>p.userInfo));!D.value||!D.value.lifetimeVip||D.value.lifetimeVip;const Q=d("mjBase"),Z=n(!1);n(!1);const ee=n($.drawType),ae=u,te=i(),le=V(),{selectFile:ie}=he(),se=n(0),oe=n(!1);function de(e){ee.value=e,ae("changeDataType",ee.value)}n(!1);const ue=n(!1);function pe(){ue.value=!1}const ce=n(),ve=n();function me(){ue.value=!0,setTimeout((()=>{K((()=>{ve.value[0].focus()}))}),100)}const ge=[{name:"--iw 0.25 "+B("draw.similarity")+"30%",id:0,value:.25,isSelect:!0},{name:"--iw 0.5 "+B("draw.similarity")+"40%",id:1,value:.5,isSelect:!1},{name:"--iw 1 "+B("draw.similarity")+"50%",id:2,value:1,isSelect:!1},{name:"--iw 1.25 "+B("draw.similarity")+"60%",id:3,value:1.25,isSelect:!1},{name:"--iw 1.5 "+B("draw.similarity")+"70%",id:4,value:1.5,isSelect:!1},{name:"--iw 1.75 "+B("draw.similarity")+"80%",id:5,value:1.75,isSelect:!1},{name:"--iw 2 "+B("draw.similarity")+"90%",id:6,value:2,isSelect:!1}],fe=n(ge[se.value].value),ye=n(0),be=n(""),ke=n(""),Ee=n(0),Ie=n("200px"),Ce=n(""),Te=n({Setwidth:1,Setheight:1}),Ae=n(0),_e=n(!1),$e=[{name:"1x",id:0,isSelect:!0,value:1},{name:"0.25x",id:1,isSelect:!1,value:.25},{name:"0.5x",id:2,isSelect:!1,value:.5}],je=n($e[Ae.value].value),Me=n(!1),Se=n([]),Be=n(0);function ze(){ae("s",Ee.value)}const De=n(0);function Ve(){ae("c",De.value)}const Ue=n(0);function Pe(){ae("weird",Ue.value)}function Ne(){}m((()=>Me.value),(e=>{ae("setEnabled",e)})),m(be,(e=>{ae("no",be.value)}));const Oe=n(10);function Ge(){Oe.value>100?Oe.value=100:Oe.value<0&&(Oe.value=0),ae("cwValue",Oe.value)}m(Oe,(e=>{ae("cwValue",Oe.value)}),{immediate:!0});const He=n([]),Je=n([]);const Le=n("/api/file/upload2Local");async function Re(e=1){let a;if(1===e){if(a=await ie(),!a)return void te.error(B("chat.choseFileErro"))}else a=e;const t=new FormData;t.append("file",a),await Y.post(Le.value,t,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{if(a.data){let{data:e}=a.data;if(0!=He.value.filter((a=>a.src==e)).length)return void te.error(B("draw.CannotRepeatedly"));He.value.push({src:e,cwIsShow:!1,swIsShow:!1,swValue:5,swinpIsShow:!1})}1!==e&&le.updateRecordDialog(!1)}))}function qe(){}m(He.value,(e=>{ae("matsList",e.map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),ae("stylesList",e.filter((e=>e.swIsShow)).map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),ae("rolesList",e.filter((e=>e.cwIsShow)).map((e=>e.src)))}),{immediate:!0,deep:!0}),m(Te.value,(e=>{if(console.log("数据发生变化",e),Ce.value==B("knowledge.customize")){let a=Number(e.Setwidth)+":"+Number(e.Setheight);ae("ar",a)}}));const Xe=[{name:B("draw.avatarFrame"),value:"1:1",width:"16px",height:"16px",id:0,iconD:"1_1"},{name:B("draw.phoneWallpaper"),value:"1:2",width:"12px",height:"24px",id:1,iconD:"1_2"},{name:B("draw.computerWallpaper"),value:"16:9",width:"20px",height:"12px",id:2,iconD:"16_9"},{name:B("draw.promotionalPoster"),value:"9:16",width:"12px",height:"20px",id:3,iconD:"9_16"},{name:B("draw.articleImg"),value:"4:3",width:"22px",height:"17px",id:4,iconD:"4_3"},{name:B("draw.medialeImg"),value:"3:4",width:"17px",height:"22px",id:5,iconD:"3_4"},{name:B("draw.hengCard"),value:"3:2",width:"23px",height:"16px",id:6,iconD:"3_2"},{name:B("draw.redBook"),value:"2:3",width:"16px",height:"23px",id:7,iconD:"2_3"}];n("mj");const We=n(5),Ke=[{name:"MJ6.1",intro:B("draw.MJdec1"),id:5,value:"--v 6.1",group:"mj"},{name:"MJ7",intro:B("draw.MJdec2"),id:7,value:"--v 7",group:"mj"},{name:"MJ6.0",intro:B("draw.MJdec3"),id:0,value:"--v 6.0",group:"mj"},{name:"MJ5.2",intro:B("draw.MJdec4"),id:1,value:"--v 5.2",group:"mj"},{name:"MJ5.1",intro:B("draw.MJdec5"),id:2,value:"--v 5.1",group:"mj"},{name:"Nj6.0",intro:B("draw.MJdec6"),id:3,value:"--niji 6",group:"nj"},{name:"Nj5.0",intro:B("draw.MJdec7"),id:4,value:"--niji 5",group:"nj"}];let Ye=n(!1);Q.mjVersionChange(Ke[0].value),U({page:1,size:20,type:"style"}).then((e=>{let a=e.data.filter((e=>2==e.level));Se.value=a,ea(Se.value[0].pid)}));const Qe=n();const Ze=n([]);function ea(e){P({id:e}).then((e=>{e.data.rows.length&&(Ze.value=e.data.rows[0].children)}))}const ci=({focused:e,checked:a})=>{const t={};return a&&(t.background="linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"),e&&(t.boxShadow="0 0 0 2px #957df480"),t},vi=n(""),mi=n([]),xi=n(),gi=n();async function fi(e=1,a){if("imgmiximg"==a&&5==mi.value.length)return void te.warning(B("draw.max5Img"));let t;if(1===e){if(t=await ie(),!t)return void te.error(B("chat.choseFileErro"))}else t=e;(new FormData).append("file",t),function(e){return new Promise(((a,t)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=function(){const e=l.result.split(",")[1];a(e)},l.onerror=function(){t(new Error("Failed to load file"))}}))}(t).then((e=>{let t="data:image/png;base64,"+e;if("imgToText"==a)vi.value=t;else if("Ai1"==a)xi.value=t;else if("Ai2"==a)gi.value=t;else if("imgmiximg"==a){if(0!=mi.value.filter((e=>e==t)).length)return void te.error(B("draw.CannotRepeatedly"));mi.value.push(t)}}))}function yi(e,a){"imgMixImg"==a?mi.value=mi.value.filter((a=>a!=e)):"imgToText"==a?vi.value="":"Ai1"==a?xi.value="":"Ai2"==a&&(gi.value="")}const wi=n(1);n(1);const hi=n(0),bi=[{name:B("draw.CannotRepeatedly"),intro:"1:2",value:"SQUARE",width:"16px",height:"16px",id:0},{name:B("draw.hengCard"),intro:"3:2",value:"PORTRAIT",width:"23px",height:"16px",id:1},{name:B("draw.redBook"),intro:"2:3",value:"LANDSCAPE",width:"16px",height:"23px",id:2}],ki=n(bi[hi.value].value);function Ei(){if(S.value){if(Ii.value.isVipUsed&&-1===Ii.value.userType.indexOf(v.value)){let e=Ii.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=I.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void te.error(B("digitalMan.vipUse1")+a+B("digitalMan.vipUse1"))}if("imgToText"==ee.value){if(!vi.value)return void te.error(B("draw.PuploadImg"));let e={action:ne.IMAGE_TO_TEXT,mode:wi.value,files:"",base64Array:[vi.value],type:re.IMAGE_TO_TEXT};ae("submitData",e),mi.value=[],vi.value=""}else if("imgMixImg"==ee.value){if(mi.value.length<2)return void te.error(B("draw.min2Img"));let e={action:ne.IMAGE_MIX_IMAGE,mode:wi.value,size:ki.value,base64Array:mi.value,type:re.IMAGE_MIX_IMAGE};ae("submitData",e),mi.value=[],vi.value=""}else if("AI"==ee.value){if(!xi.value)return void te.error(B("draw.uploadFaceImg"));if(!gi.value)return void te.error(B("draw.uploadFaceReplace"));let e={params:{action:22,mode:wi.value,sourceBase64:xi.value,targetBase64:gi.value},type:re.INSIGHT_FACE};ae("submitData",e),mi.value=[],vi.value=""}}else p.setLoginDialog(!0)}function Fi(){let e={};"imgToText"==ee.value?e={params:{action:ne.IMAGE_TO_TEXT,mode:wi.value},type:re.IMAGE_TO_TEXT}:"imgMixImg"==ee.value?e={params:{action:ne.IMAGE_MIX_IMAGE,mode:wi.value},type:re.IMAGE_MIX_IMAGE}:"AI"==ee.value&&(e={params:{action:22,mode:wi.value},type:re.INSIGHT_FACE}),z(e).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(Ii.value=e.data,Ci.value=!1):Ci.value=!0})).catch((e=>{Ci.value=!0}))}x.off("fetchModelFree"),x.on("fetchModelFree",(e=>{Fi()}));const Ii=n({remainCount:0,freeCount:0,useIntegrate:0}),Ci=n(!1);m((()=>ee.value),((e,a)=>{Fi()}),{deep:!0,immediate:!0}),m(S,(e=>{e&&Fi()}));const Ti=n({textToImg:B("draw.textToImg"),imgToText:B("draw.imgToText"),imgMixImg:B("draw.imgMixImg"),AI:B("draw.AI")});return(e,i)=>(a(),t("div",ia,[l("div",sa,[g(C(O),{class:"card-tabs","default-value":ee.value,value:ee.value,size:"large",animated:"","onUpdate:value":de},{default:F((()=>[g(C(N),{name:"textToImg",tab:e.$t("draw.textGenImg")},null,8,["tab"]),g(C(N),{name:"imgMixImg",tab:e.$t("draw.mixImg")},null,8,["tab"]),g(C(N),{name:"imgToText",tab:e.$t("draw.imgGenText")},null,8,["tab"]),g(C(N),{name:"AI",tab:e.$t("draw.AIChangeFace")},null,8,["tab"])])),_:1},8,["default-value","value"]),"textToImg"!=ee.value?(a(),t("div",ra,[l("div",na,[l("p",oa,f(e.$t("draw.AIChangeFace")),1),l("div",da,f(Ti.value[ee.value]),1)])])):b("",!0),"textToImg"==ee.value?(a(),t("div",ua,[l("div",pa,[l("div",ca,[l("div",va,f(e.$t("draw.modelSelect")),1),l("div",ma,[g(C(H),{value:We.value,"onUpdate:value":i[0]||(i[0]=e=>We.value=e),"label-field":"name","value-field":"id",options:Ke,onClick:i[1]||(i[1]=e=>G(Ye)?Ye.value=!C(Ye):Ye=!C(Ye)),show:!1},null,8,["value"]),7==We.value?(a(),t("div",xa,"NEW")):b("",!0),k(l("div",ga,[l("p",null,f(e.$t("draw.modelSelect"))+":",1),(a(),t(y,null,w(Ke,(e=>l("div",{class:h(["selectItem",We.value==e.id?"active":""]),onClick:a=>{!function(e){We.value=e.id,Q.mjVersionChange(e.value)}(e),G(Ye)?Ye.value=!1:Ye=!1}},[l("div",ya,[A(f(e.name)+" ",1),"MJ7"==e.name?(a(),t("div",wa,"NEW ")):b("",!0)]),l("span",null,f(e.intro),1),i[24]||(i[24]=l("img",{src:we,alt:""},null,-1))],10,fa))),64))],512),[[J,C(Ye)]])])])]),l("div",ha,[l("div",ba,[l("div",ka,f(e.$t("draw.styleSelect")),1)]),l("div",Ea,[l("div",Fa,[(a(!0),t(y,null,w(Se.value,((e,l)=>(a(),t("div",{class:h(Be.value==l?"styleItemSelect":"styleItem"),onClick:e=>function(e){Be.value=e,ea(Se.value[e].pid)}(l),key:e.id},f(e.classifyName),11,Ia)))),128))],512),l("div",{class:"styleImgBox",style:M({maxHeight:Z.value?"unset":Ie.value})},[(a(!0),t(y,null,w(Ze.value,((e,i)=>(a(),t("div",{class:h(Qe.value==i?"styleImgItemSelect":"styleImgItem"),onClick:a=>function(e){let{incantationEn:a}=e.item;Qe.value=e.index,ae("incantationCn",a)}({item:e,index:i})},[l("div",Ta,f(e.incantationCn),1),l("img",{src:e.img,alt:""},null,8,Aa)],10,Ca)))),256)),(a(),t(y,null,w(3,(e=>l("div",_a))),64))],4),Ze.value.length>10?(a(),t("div",{key:0,onClick:i[2]||(i[2]=e=>Z.value=!Z.value),class:"flex justify-center w-[100%] cursor-pointer"},[l("div",$a,[Z.value?(a(),t(y,{key:1},[l("span",null,f(e.$t("draw.closeUp")),1),g(C(T),{size:"18px"},{default:F((()=>[g(C(Fe))])),_:1})],64)):(a(),t(y,{key:0},[l("span",null,f(e.$t("draw.openMore")),1),g(C(T),{size:"18px"},{default:F((()=>[g(C(xe))])),_:1})],64))])])):b("",!0)])]),l("div",ja,[l("div",Ma,[l("div",Sa,f(e.$t("draw.sizeChose")),1)]),l("div",Ba,[(a(),t(y,null,w(Xe,(e=>l("div",{class:h([ye.value==e.id?" dark:border-[#0066ff] dark:bg-[#383838] sizeSelected border-[#574FFE] bg-[#ededfb]":"dark:border-[#292A2E] dark:bg-[#383838] border-[#F2F3F7] bg-[#F2F3F7]","sizeItem border"]),key:e.id,onClick:a=>function(e){ye.value=e.id,Ce.value=e.name,e.name!=B("knowledge.customize")&&ae("ar",e.value)}(e)},[l("div",Da,[l("div",{class:h(["icon-img","img"+e.iconD]),style:M(ye.value==e.id?"border:1px solid #574FFE;":"")},null,6)]),""!=e.value?(a(),t("p",{key:0,class:"t3",style:M(ye.value==e.id?"color:#574FFE;":"")},f(e.value),5)):(a(),t("div",Va,[k(l("input",{onClick:L(qe,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[3]||(i[3]=e=>Te.value.Setwidth=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[E,Te.value.Setwidth]]),i[25]||(i[25]=l("p",{style:{margin:"0 4px"}},":",-1)),k(l("input",{onClick:L(qe,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[4]||(i[4]=e=>Te.value.Setheight=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[E,Te.value.Setheight]])]))],10,za))),64))])]),l("div",Ua,[l("div",Pa,[l("div",Na,[A(f(e.$t("draw.doesZhilin"))+" ",1),g(C(R),{trigger:"hover",placement:"top"},{trigger:F((()=>i[26]||(i[26]=[l("img",{src:aa,alt:""},null,-1)]))),default:F((()=>[l("div",null,[l("div",null,f(e.$t("draw.doesText1")),1),l("div",null,f(e.$t("draw.doesText2")),1),l("div",null,f(e.$t("draw.doesText3")),1)])])),_:1})]),g(C(j),{style:{"margin-left":"8px","margin-right":"8px"},value:Me.value,"onUpdate:value":i[5]||(i[5]=e=>Me.value=e),"rail-style":ci,size:"small"},null,8,["value"])])]),g(C(W),{"arrow-placement":"right",class:"role-collapse"},{default:F((()=>[g(C(q),{class:"role-collapse-item",title:"高级参数",name:"1"},{default:F((()=>[l("div",Oa,[l("div",Ga,[l("div",Ha,[l("div",Ja,f(e.$t("draw.cankaoImg")),1)]),l("div",La,[(a(!0),t(y,null,w(He.value,((s,r)=>(a(),t("div",{class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",key:r,style:{position:"relative"}},[l("span",{class:"remove",onClick:L((e=>He.value.splice(r,1)),["stop"])},i[27]||(i[27]=[l("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHdSURBVDiNtdWxi9pgHMbxby4nFEvuQMEIxeHQLYtCHXTQKVPBRRw6ZHCNe8YGuohjB+PgnyB2OOgYgoIedFCHLjlxKgen5YbrcBauwQ53ATmScG29H7wE8vB8El4SXgE45//mN/AdGANfgF8AwgHg/bkCPgA/jg6IArwBPgKvDg37+LuXgAEqLwVnQuHRaFSczWZlRVHiQbmiKPHlclkdjUbFgPg4FJYkKVYoFJK2bZee4oqixG3bLuVyuRNJkmJB/VBY07TFarW6lWU5vo/7qCzL8dVqdatp2iKoH/kdp1Kp2HQ6LWWz2dP1en3XarUW3W4376Plcvlis9nc/zXs44PBIF+pVNL+vfF4fN1oNBZhKERshT+bzebeNE3X87wdgOd5O9M03Sj0WbBhGBnHcaqiKArz+fxGFEXBcZyqYRiZqJ4IvI9CO51OHqDX613WarWFLMtCsVhMqqqa3m6328lk8jOsfx602u32t93jWJbl7meWZblhmb9Ct6LZbJ75b6rruruf6bru9nq9SwBVVdNBfQH4DBw/Der1ejKRSMT6/f512MPr9XoSYDgc3gTBn4CzsPK/jgi8BvKHho94OE6uDg2LPJxZX4G3wMkhYYA7wH68ngISz/h5ouYPRiq/PPmBkeEAAAAASUVORK5CYII="},null,-1)]),8,Ra),""!=s.src?(a(),t("div",{key:0,style:{display:"flex","justify-content":"center","align-items":"center"},class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",onClick:i[6]||(i[6]=e=>Re(1))},[l("img",{src:s.src,alt:""},null,8,qa)])):(a(),t("div",{key:1,class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0"},onClick:i[7]||(i[7]=e=>Re(1))},f(e.$t("digitalMan.clickUpload")),1)),l("div",{class:"bot-p",style:M(s.src?"opacity: 0.9;":"")},[l("div",Xa,[s.swIsShow?(a(),t("div",{key:0,class:"left",onClick:e=>function(e){e.swinpIsShow=!0,setTimeout((()=>{K((()=>{ce.value[0].focus()}))}),100)}(s)},[s.swinpIsShow?k((a(),t("input",{key:0,onBlur:e=>function(e){e.swinpIsShow=!1}(s),ref_for:!0,ref_key:"refInput",ref:ce,"onUpdate:modelValue":e=>s.swValue=e,style:{width:"100%","background-color":"transparent","font-size":"12px"},type:"text",onInput:e=>function(e){e.swValue>100?e.swValue=100:e.swValue<0&&(e.swValue=0),ae("swValue",e.swValue)}(s)},null,40,Ka)),[[E,s.swValue]]):(a(),t("p",Ya,f(s.swValue?s.swValue:"权重"),1))],8,Wa)):(a(),t("div",Qa)),l("div",Za,[l("p",et,f(e.$t("draw.styleOnes")),1),g(C(j),{class:"swi",size:"small",disabled:0==s.swIsShow&&3==Je.value.length,value:s.swIsShow,"onUpdate:value":[e=>s.swIsShow=e,e=>{}],"rail-style":ci},null,8,["disabled","value","onUpdate:value"])])]),l("div",at,[s.cwIsShow?(a(),t("div",{key:0,class:"left",onClick:me},[ue.value?k((a(),t("input",{key:0,type:"text",onBlur:pe,ref_for:!0,ref_key:"refInput1",ref:ve,"onUpdate:modelValue":i[8]||(i[8]=e=>Oe.value=e),style:{width:"100%","background-color":"transparent"},onInput:Ge},null,544)),[[E,Oe.value]]):(a(),t("p",tt,f(Oe.value?Oe.value:"--cw"),1))])):(a(),t("div",lt)),l("div",it,[l("p",st,f(e.$t("draw.PersonOnes")),1),g(C(j),{class:"swi",size:"small","onUpdate:value":[e=>function(e,a){He.value.forEach(((e,t)=>{a!=t&&(e.cwIsShow=!1)}))}(0,r),e=>s.cwIsShow=e],value:s.cwIsShow,"rail-style":ci},null,8,["onUpdate:value","value"])])])],4)])))),128)),l("div",rt,[l("div",{class:"title dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0",border:"1px dashed #A5A5A5"},onClick:i[9]||(i[9]=e=>Re(1))},[l("div",nt,f(e.$t("draw.imgTuo")),1),l("div",ot,[i[28]||(i[28]=l("img",{src:"/static/svg/upload-5b2ef103.svg",style:{"margin-right":"4px"}},null,-1)),A(f(e.$t("draw.huoClickUpload")),1)])]),l("div",dt,[l("div",ut,[i[29]||(i[29]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",pt,[l("p",ct,f(e.$t("draw.styleOnes")),1),g(C(j),{class:"swi",size:"small",disabled:"","rail-style":ci})])]),l("div",vt,[i[30]||(i[30]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",mt,[l("p",xt,f(e.$t("draw.PersonOnes")),1),g(C(j),{class:"swi",size:"small",disabled:"","rail-style":ci})])])])])]),l("div",null,[l("div",{onClick:i[10]||(i[10]=e=>oe.value=!oe.value),style:{display:"flex",cursor:"pointer","max-width":"100%",width:"100%",padding:"16px","border-radius":"8px","justify-content":"space-between","margin-top":"20px",position:"relative"},class:"border dark:bg-[#383838] dark:border-[#292A2E] bg-[#fff] border-[#E8E8E8]"},[l("div",gt,[l("p",ft,f(e.$t("draw.similarity")),1),g(C(R),{trigger:"hover",placement:"top"},{trigger:F((()=>i[31]||(i[31]=[l("img",{src:aa,alt:""},null,-1)]))),default:F((()=>[l("div",yt,"--iw "+f(e.$t("draw.hightToBig")),1)])),_:1})]),l("div",wt,[l("p",ht,f(ge[se.value].name),1),i[32]||(i[32]=l("img",{style:{width:"18px",height:"18px"},src:ta,alt:""},null,-1))]),oe.value?(a(),t("div",bt,[(a(),t(y,null,w(ge,(e=>l("div",{class:"iwItem",style:M(se.value==e.id?"color:#7369E2":""),key:e.id,onClick:a=>function(e){se.value=e.id,fe.value=e.value,ae("iwValue",fe.value)}(e)},f(e.name),13,kt))),64))])):b("",!0)])])]),l("div",Et,[l("div",Ft,f(e.$t("draw.notWorld")),1)]),l("div",It,[k(l("textarea",{"onUpdate:modelValue":i[11]||(i[11]=e=>be.value=e),onInput:Ne,style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"输入不想出现在图像中的内容（例如树木，0/200）"},null,544),[[E,be.value]]),l("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:i[12]||(i[12]=e=>be.value="")},f(e.$t("common.clear")),1)])]),l("div",Ct,[l("div",Tt,[l("div",At,"--seed "+f(e.$t("draw.seed")),1)]),l("div",_t,[k(l("input",{class:"inp bg-[#FFF] dark:bg-[#383838] w-[100%]",style:{flex:"1","border-radius":"6px",padding:"4px 6px"},type:"text","onUpdate:modelValue":i[13]||(i[13]=e=>ke.value=e)},null,512),[[E,ke.value]])])]),l("div",null,[l("div",$t,[l("div",jt,[l("div",Mt,[A("--s "+f(e.$t("draw.styleHua"))+" ",1),g(C(R),{trigger:"hover",placement:"top"},{trigger:F((()=>i[33]||(i[33]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:aa,alt:""},null,-1)]))),default:F((()=>[l("div",St,f(e.$t("draw.styleHuaText1")),1)])),_:1})])]),l("div",Bt,[l("div",zt,f(Ee.value),1),l("div",Dt,[g(C(X),{value:Ee.value,"onUpdate:value":i[14]||(i[14]=e=>Ee.value=e),step:1,max:1e3,onDragend:ze},null,8,["value"])])])]),l("div",Vt,[l("div",Ut,[l("div",Pt,[A("--c "+f(e.$t("draw.moreHua"))+" ",1),g(C(R),{trigger:"hover",placement:"top"},{trigger:F((()=>i[34]||(i[34]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:aa,alt:""},null,-1)]))),default:F((()=>[l("div",Nt,f(e.$t("draw.moreHuaText1")),1)])),_:1})])]),l("div",Ot,[l("div",Gt,f(De.value),1),l("div",Ht,[g(C(X),{value:De.value,"onUpdate:value":i[15]||(i[15]=e=>De.value=e),step:1,onDragend:Ve},null,8,["value"])])])]),l("div",Jt,[l("div",Lt,[l("div",Rt,"--quelity "+f(e.$t("draw.quelity")),1)]),l("div",{class:"selectQuelity dark:bg-[#383838] bg-[#F0F0F0] flex",style:{position:"relative",flex:"1",cursor:"pointer",padding:"4px 6px","border-radius":"6px",display:"flex","margin-left":"8px","align-items":"center","justify-content":"space-between"},onClick:i[16]||(i[16]=e=>_e.value=!_e.value)},[l("p",qt,f($e[Ae.value].name),1),i[35]||(i[35]=l("img",{style:{width:"12px",height:"12px"},src:ta,alt:""},null,-1)),_e.value?(a(),t("div",Xt,[(a(),t(y,null,w($e,(e=>l("div",{class:"",onClick:a=>function(e){Ae.value=e.id,je.value=e.value,ae("q",je.value)}(e),style:M([{padding:"4px 0"},Ae.value==e.id?"color:#7369E2":""]),key:e.id},f(e.name),13,Wt))),64))])):b("",!0)])]),l("div",Kt,[l("div",Yt,[l("div",Qt,[A("--weird "+f(e.$t("draw.weird"))+" ",1),g(C(R),{trigger:"hover",placement:"top"},{trigger:F((()=>i[36]||(i[36]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:aa,alt:""},null,-1)]))),default:F((()=>[l("div",Zt,f(e.$t("draw.weirdText1")),1)])),_:1})])]),l("div",el,[l("div",al,f(Ue.value),1),l("div",tl,[g(C(X),{value:Ue.value,"onUpdate:value":i[17]||(i[17]=e=>Ue.value=e),step:1,onDragend:Pe},null,8,["value"])])])])])])),_:1})])),_:1})])):b("",!0),"imgToText"==ee.value?(a(),t("div",ll,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[18]||(i[18]=e=>fi(1,"imgToText"))},[l("div",il,[l("div",null,[l("div",sl,f(e.$t("draw.PuploadImg")),1),l("div",rl,f(e.$t("draw.PuploadImgText1")),1)])]),""==vi.value?(a(),t("div",nl,[l("div",ol,f(e.$t("draw.cankaoImgTuo")),1),l("div",dl,f(e.$t("draw.huo")),1),l("div",ul,f(e.$t("digitalMan.clickUpload")),1)])):(a(),t("div",pl,[l("img",{src:vi.value,style:{height:"100%"}},null,8,cl)]))]),l("div",vl,[l("div",ml,[l("div",xl,f(e.$t("draw.wenxinTips")),1)]),l("div",gl,f(e.$t("draw.wenxinTipsText")),1)])])):b("",!0),"imgMixImg"==ee.value?(a(),t("div",fl,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[19]||(i[19]=e=>fi(1,"imgmiximg"))},[l("div",yl,[l("div",null,[l("div",wl,f(e.$t("draw.PuploadImg")),1),l("div",hl,f(e.$t("draw.upload2T5Img")),1)])]),l("div",bl,[l("div",kl,[(a(!0),t(y,null,w(mi.value,((e,s)=>(a(),t("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",key:s},[e?(a(),t("img",{key:0,src:e,alt:""},null,8,El)):b("",!0),l("div",{class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:L((a=>yi(e,"imgMixImg")),["stop"])},i[37]||(i[37]=[l("img",{src:la,alt:""},null,-1)]),8,Fl)])))),128)),l("div",Il,[l("p",Cl,f(e.$t("digitalMan.clickUpload")),1)])])])]),l("div",Tl,[l("div",Al,[l("div",_l,f(e.$t("homePage.imgSize")),1),l("div",$l,f(e.$t("draw.choseImgSize")),1)]),l("div",jl,[l("div",Ml,[(a(),t(y,null,w(bi,(e=>l("div",{class:h([hi.value==e.id?"dark:border-[#0066ff] border-[#574FFE] bg-[#ededfb] dark:bg-[#383838] sizeSelected":"dark:border-[#292A2E] dark:bg-[#383838] border-[#F2F3F7] bg-[#F2F3F7]","sizeItem border"]),key:e.id,onClick:a=>function(e){hi.value=e.id,ki.value=e.value}(e)},[l("div",Bl,[l("div",{style:M({width:e.width,height:e.height}),class:h(["size border",hi.value==e.id?"border-[#574FFE]  dark:bg-[#D3D1D9]":"dark:bg-[#D3D1D9] dark:border-[#46484F] bg-[#F8F9F9] border-[#CDCECE]"])},null,6)]),l("p",{class:h(["dark:text-[#6C6E79]",hi.value==e.id?"text-[#574FFE]":"text-[#8B8C8C]"])},f(e.intro),3),l("p",{class:h(["dark:text-[#6C6E79]",hi.value==e.id?"text-[#574FFE]":"text-[#8B8C8C]"])},f(e.name),3)],10,Sl))),64))])])]),l("div",zl,[l("div",Dl,[l("div",Vl,f(e.$t("draw.wenxinTips")),1)]),l("div",Ul,f(e.$t("draw.wenxinTipsText2")),1)])])):b("",!0),"AI"==ee.value?(a(),t("div",Pl,[i[40]||(i[40]=l("div",{class:"line bg-[#EBEBEB] dark:bg-[#222226]"},null,-1)),l("div",Nl,[l("p",Ol,f(e.$t("draw.oneUploadFace")),1)]),l("div",Gl,f(e.$t("draw.warnUploadText1")),1),l("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",onClick:i[21]||(i[21]=e=>fi(1,"Ai1"))},[xi.value?(a(),t("img",{key:0,src:xi.value,alt:""},null,8,Hl)):(a(),t("p",Jl,f(e.$t("digitalMan.clickUpload")),1)),xi.value?(a(),t("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[20]||(i[20]=L((e=>yi(xi.value,"Ai1")),["stop"]))},i[38]||(i[38]=[l("img",{src:la,alt:""},null,-1)]))):b("",!0)]),l("div",Ll,f(e.$t("draw.uploadFaceText1")),1),l("div",Rl,[l("p",ql,f(e.$t("draw.towUploadFace")),1)]),l("div",Xl,f(e.$t("draw.warnUploadText1")),1),l("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",onClick:i[23]||(i[23]=e=>fi(1,"Ai2"))},[gi.value?(a(),t("img",{key:0,src:gi.value,alt:""},null,8,Wl)):(a(),t("p",Kl,f(e.$t("digitalMan.clickUpload")),1)),gi.value?(a(),t("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[22]||(i[22]=L((e=>yi(gi.value,"Ai2")),["stop"]))},i[39]||(i[39]=[l("img",{src:la,alt:""},null,-1)]))):b("",!0)]),l("div",Yl,f(e.$t("draw.maxImgText1")),1),l("div",Ql,f(e.$t("draw.notManHuaImg")),1),l("div",Zl,[l("p",ei,f(e.$t("draw.threeUploadFace")),1)]),l("div",ai,f(e.$t("draw.mianzeText1")),1)])):b("",!0),"textToImg"!=ee.value?(a(),t("div",ti,[l("div",li,[Ii.value&&Ii.value.isVipUsed?(a(),t("img",ii)):b("",!0),g(C(_),{loading:C(Q).isLoading.value,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"64px","font-size":"15px","border-radius":"10px",padding:"12px 0"},onClick:Ei},{default:F((()=>[Ci.value?(a(),t("span",si,f(e.$t("draw.modelNotSet")),1)):C(p).isLogin?Ii.value&&Ii.value.isVipFree&&c.value?(a(),t("span",ni,f(e.$t("chat.vipFree")),1)):Ii.value&&Ii.value.remainCount&&c.value?(a(),t("span",oi,f(e.$t("draw.shenyu")+Ii.value.remainCount+e.$t("draw.chiFree")),1)):Ii.value?(a(),t("div",di,[l("span",null,f(e.$t("gpt.lijiGen")),1),l("span",ui,"（"+f(Ii.value.useIntegrate+e.$t("chat.pointsChi"))+"）",1)])):(a(),t("span",pi,f(e.$t("draw.gen")),1)):(a(),t("span",ri,f(e.$t("draw.beginGen")),1))])),_:1},8,["loading"])])])):b("",!0)])]))}}),[["__scopeId","data-v-209988e8"]]),vi={class:"draw-midjourney-class",style:{display:"flex",height:"100%",overflow:"hidden"}},mi={style:{flex:"1",display:"flex","flex-direction":"column"},class:"contentBox border-l dark:border-[#2A2C30] border-[#fff] dark:bg-[#24262a] bg-[#fff]"},xi={class:"borTitel",style:{}},gi={style:{color:"#8C441A","font-size":"18px","font-weight":"500"}},fi={style:{"margin-left":"13px",color:"#8C441A","font-size":"14px"}},yi={key:0,style:{border:"1px solid rgba(224, 226, 233, 0.3)"}},wi={key:1},hi={key:0,class:"gap"},bi={class:"mid"},ki=D(e({__name:"midjourney",setup(e){const o=n(""),d=n(""),u=n(""),p=n(""),v=n(""),k=s(),E=r((()=>k.isLogin)),F=i(),T=n(""),A=n(0),_=n({translate:A.value,prompt:"",styles:[],roles:[],iw:.25,sw:0,cw:0,extend:"",mode:1,mats:[],enabled:!1,action:re.TEXT_TO_IMAGE}),$=n({ar:"",no:"",s:"",c:"",q:"",weird:""}),j=Q(),M=n("textToImg");function S(e){M.value=e}function B(e){T.value=e}j.query.type&&(M.value=j.query.type),ye({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{p.value=e.data.copyrightTitle,o.value=e.data.icpNumber,d.value=e.data.policeFilingNumber,u.value=e.data.icpUrl,v.value=e.data.policeFilingUrl}));let z=!1;const D=n([]);let V=[];const U=n(!1),P=n(!1),N=n([]);function O(e){_.value.styles=e}function G(e){_.value.roles=e}const H=n([]);function J(e){H.value=e}function L(e){_.value.iw=e}function R(e){_.value.enabled=e}function q(e){}function X(e){_.value.cw=Number(e)}function W(e){let a="--ar "+e;$.value.ar=a}function Y(e){let a="--no "+e;$.value.no=a}function ne(e){let a="--s "+e;$.value.s=a}function de(e){let a="--c "+e;$.value.c=a}function ue(e){let a="--q "+e;$.value.q=a}function pe(e){let a="--weird "+e;$.value.weird=a}const ce=n("");function ve(e){ce.value=e||""}let xe=null;const ge=async function(){try{xe&&window.clearTimeout(xe);(await se({jobIds:V.join()})).data.forEach((e=>{const a=N.value.findIndex((a=>a.id===e.id));-1!==a&&N.value.splice(a,1,e),e.status>=3&&(V=V.filter((a=>a!==e.jobId)))})),V.length?xe=setTimeout((()=>ge()),3e3):xe&&window.clearTimeout(xe)}catch(e){xe=setTimeout((()=>ge()),3e3)}};m(E,(async e=>{if(1==e){const e={page:1,size:10},a=await ae(e);1===e.page&&(N.value=a.data.rows.reverse())}else N.value.length=0}));const we={page:1,size:10},he=async function(e){try{P.value=!0;const a=await ae(we);1===we.page?N.value=a.data.rows.reverse():N.value=a.data.rows.reverse().concat(N.value),console.log(N.value),V=N.value.filter((e=>[1,2].includes(e.status))).map((e=>e.jobId)),V.length&&ge(),a.data.rows.length<we.size&&(U.value=!0),K(e?()=>{var e;null==(e=Ce.value)||e.scrollTo({top:Ce.value.scrollHeight,behavior:"smooth"}),D.value.length&&D.value[D.value.length-1].scrollIntoView(),setTimeout((()=>{z=!0}),100)}:()=>{var e;let t=0;for(let l=0;l<a.data.rows.length;l++){const a=null==(e=Ce.value)?void 0:e.children[0].children[l];t+=(null==a?void 0:a.offsetHeight)||0}Ce.value.scrollTop=t}),P.value=!1}catch(a){P.value=!1}be.value=!0};let be=n(!1);x.on("drawtoBottom",(e=>{var a;1===we.page&&(null==(a=Ce.value)||a.scrollTo({top:Ce.value.scrollHeight,behavior:"smooth"}))}));const ke=n("mj"),Ee=n(!1),Fe=n(),Ie=async function(e,a){Fe.value=!1,Ee.value=!0;try{let t=null;switch(e.type){case re.TEXT_TO_IMAGE:case re.IMAGE_ACTION:t=await ie(e),x.emit("getUserInfo",!0),x.emit("fetchModelFree");break;case re.IMAGE_MIX_IMAGE:case re.IMAGE_TO_TEXT:t=await le(e),x.emit("getUserInfo",!0),x.emit("fetchModelFree");break;case re.INSIGHT_FACE:t=await te(e),x.emit("getUserInfo",!0),x.emit("fetchModelFree")}if(t){const e=t.data;Fe.value=!0,Ee.value=!1;N.value.find((a=>a.id===e.id))||(N.value.push(e),K((()=>{var e;null==(e=Ce.value)||e.scrollTo({top:Ce.value.scrollHeight,behavior:"smooth"})}))),10==e.status||4==e.status||V.includes(e.jobId)||(V.push(e.jobId),ge())}a&&a(Boolean(null==t?void 0:t.success))}catch(t){F.error(t.message),Fe.value=!0,Ee.value=!1,a&&a(!1)}},Ce=n(),Te=function(e){const a=e.target;z&&a.scrollTop<=20&&(U.value||P.value||(we.page=we.page+1,he()))};Z((()=>{var e;null==(e=Ce.value)||e.removeEventListener("scroll",Te)}));const Ae=n({}),_e=n({});return c((()=>{var e;k.getUserInfo(),Ae.value=JSON.parse(JSON.stringify(_.value)),_e.value=JSON.parse(JSON.stringify($.value)),he(!0),null==(e=Ce.value)||e.addEventListener("scroll",Te)})),ee("mjBase",{isLoading:Ee,mjParams:_,defaultMJParams:Ae,defaultExtendArr:_e,extendArr:$,styleMode:ce,mjVersionChange:function(e){ke.value=e}}),(e,i)=>(a(),t("div",vi,[g(ci,{onStylesList:O,onRolesList:G,onSetEnabled:R,onIwValue:L,onSwValue:q,onCwValue:X,onAr:W,onNo:Y,onS:ne,onC:de,onQ:ue,onWeird:pe,onMatsList:J,onIncantationCn:ve,drawType:M.value,onChangeDataType:S,onSubmitData:Ie},null,8,["drawType"]),l("div",mi,[l("div",xi,[l("span",gi,"# "+f(e.$t("draw.creationCenter")),1),l("p",fi,f(e.$t("draw.SafetyWarning")),1)]),l("div",{ref_key:"scrollView",ref:Ce,class:h({mb80:"textToImg"===M.value}),style:{flex:"1",overflow:"auto"}},[E.value&&0!=N.value.length||!C(be)?(a(),t("div",yi,[(a(!0),t(y,null,w(N.value,((e,t)=>(a(),I(oe,{type:"chat",task:e,key:e.jobId+"-"+e.status,onRemove:()=>function(e){N.value.splice(e,1)}(t),onAddTask:Ie},null,8,["task","onRemove"])))),128))])):(a(),t("div",wi,[g(fe,{onHandleprompt:B})]))],2),"textToImg"===M.value?(a(),t("div",hi,[g(me,{style:{bottom:"8px"}})])):b("",!0),l("div",bi,["textToImg"==M.value?(a(),I(ea,{key:0,handleprompt:T.value,isSuccess:!!Fe.value&&Fe.value,mode:ke.value,onSubmit:Ie},null,8,["handleprompt","isSuccess","mode"])):b("",!0)])])]))}}),[["__scopeId","data-v-c2209213"]]);export{ki as default};
