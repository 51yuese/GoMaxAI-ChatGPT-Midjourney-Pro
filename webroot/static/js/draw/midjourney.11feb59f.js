import{e,b6 as t,r as a,$ as l,g as i,v as s,q as n,bF as r,M as o,w as d,x as u,B as p,A as c,F as v,E as x,I as g,y as m,z as f,Q as y,a0 as b,C as h,D as k,G as w,aj as E,P as F,N as A,a3 as C,aF as I,ab as j,al as _,_ as B,k as S,p as T,at as D,bG as M,bH as z,ap as V,ao as N,bu as P,bI as U,a4 as O,bJ as H,n as L,ad as q,a9 as Q,aY as R,ae as J,ay as G,J as X,ax as Y,aw as K,aH as Z,av as W}from"../main-23bab8dd.js";import{a as $,M as ee}from"../index/index.27c727e8.js";import{M as te}from"../index/index.d180808b.js";import{_ as ae,a as le}from"../close copy/close copy.08564ec3.js";import{_ as ie,b as se}from"../baiduThink/baiduThink.2b87cc66.js";import{F as ne}from"../FlashOutline/FlashOutline.f24150e0.js";import{C as re}from"../index/index.e75d5266.js";import{n as oe}from"../index/index.f36d8aa8.js";import{k as de}from"../music/music.67ae0f67.js";import{_ as ue}from"../video_create/video_create.4f3c17fd.js";import{u as pe}from"../useUpload/useUpload.7fa4e6f3.js";import"../draw-fail/draw-fail.ad8fd01b.js";import"../index/index.5b75f753.js";import"../index/index.d3ec721c.js";import"./draw.8228db44.js";import"../HeartOutline/HeartOutline.fa43a712.js";import"../Popconfirm/Popconfirm.6ca3ead0.js";import"../police/police.deef576c.js";const ce={ref:"setParameterRef",class:"sendBox border-transparent"},ve={class:"borderBox dark:bg-[#3E6AE7] bg-[#D1D1D1]"},xe={class:"inputBox bg-[#fff] dark:bg-[#24252B]"},ge={key:0,style:{width:"100%",padding:"12px",height:"300px",position:"absolute",bottom:"100px",left:"0","border-radius":"12px 12px 0 0"},class:"border dark:border-[#27272A] border-[#E7E7E7] bg-[#F8F9F9] dark:bg-[#19191B]"},me={style:{display:"flex","justify-content":"space-between"}},fe={style:{"overflow-y":"auto",height:"90%","overflow-x":"hidden"}},ye=["onClick"],be=["src"],he={style:{width:"100%","margin-left":"4px"}},ke={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis"}},we={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",width:"90%"}},Ee={style:{width:"100%"}},Fe={class:"submitBox flex w-[100%]"},Ae={style:{"flex-grow":"1",display:"flex",gap:"20px","padding-left":"20px"}},Ce={class:"translatr",style:{display:"flex","align-items":"center"}},Ie={class:"btnBox"},je={key:0,style:{display:"flex"}},_e={key:1,class:"loader"},Be=B(e({__name:"submitTask",props:{mode:String,isSuccess:Boolean,handleprompt:String},emits:["submit"],setup(e,{emit:B}){const S=e,T=B,D=t("mjBase"),M=a(""),z=a(),V=a(),N=a(),P=a(),U=a(),O=a(),H=a(0),L=a(0),q=a(""),Q=a([]),R=a(!1),J=l(),G=i((()=>"dark"===J.theme)),X=a("--fast"),Y=a(1),K=a(),Z=a(!1),W=a(),ee=a(),te=a(!1),re=a([]),oe=a(!1);function de(){E().then((e=>{K.value=e.data}))}function ue(){D.mjParams.value.prompt=q.value,q.value?(Z.value=!1,R.value=!1):Z.value=!0}function pe(e){q.value=e,D.mjParams.value.prompt=e}function Be(e){0==e?(Y.value=0,D.mjParams.value.mode=2,X.value="--relax"):1==e&&(Y.value=1,D.mjParams.value.mode=1,X.value="--fast")}function Se(){q.value?(Z.value=!1,R.value=!1):Z.value=!0}s({keys:["dialogueTail","robotAvatar","mjModel","relax_mjDeduction1","relax_mjDeduction2","fast_mjDeduction1","fast_mjDeduction2","trubo_mjDeduction1","trubo_mjDeduction2","fast_vip_free","relax_vip_free","trubo_vip_free"]}).then((e=>{const{relax_mjDeduction1:t,fast_mjDeduction1:a,trubo_mjDeduction1:l,fast_vip_free:i,relax_vip_free:s,trubo_vip_free:n}=e.data;z.value=Number(t),V.value=Number(a),N.value=Number(l),P.value=Number(i),U.value=Number(s),O.value=Number(n),M.value=e.data.mjModel})),n((()=>{de()})),r({page:1,size:20}).then((e=>{Q.value=e.data.rows})),o(S,(e=>{console.log(e),e.isSuccess?(q.value="",oe.value=!1,H.value++,de()):e.handleprompt&&(q.value=e.handleprompt,D.mjParams.value.prompt=e.handleprompt)}));const Te=()=>{W.value.open()},De=()=>{ee.value.thinks="",ee.value.open()};function Me(){te.value=!te.value,te.value?(L.value=1,D.mjParams.value.translate=1):(L.value=0,D.mjParams.value.translate=0)}function ze(){if(!q.value)return;if(1==oe.value)return;oe.value=!0;const{enabled:e}=D.mjParams.value;e&&(D.defaultMJParams.value.prompt=D.mjParams.value.prompt);const t=function(e,t){const{roles:a,styles:l}=e,i=JSON.parse(JSON.stringify(e));i.mats=[],t||D.styleMode.value&&(i.prompt=i.prompt+" "+D.styleMode.value),re.value.forEach((e=>{-1==a.indexOf(e)&&-1==l.indexOf(e)&&i.mats.push(e)})),a.length||(i.cw=0),a.length||l.length||delete i.iw;const{ar:s,c:n,no:r,q:o,s:d,weird:u}=t?D.defaultExtendArr.value:D.extendArr.value;return"--v 7"==S.mode?i.extend=`${r?r+" ":""}${S.mode?S.mode+" ":""}${s?s+" ":"--ar 1:1 "}${d?d+" ":"--s 0 "}${n?n+" ":"--c 0 "}${u||""}${X.value?X.value+" ":""}`:i.extend=`${r?r+" ":""}${S.mode?S.mode+" ":""}${s?s+" ":"--ar 1:1 "}${o?o+" ":"--q 1 "}${d?d+" ":"--s 0 "}${n?n+" ":"--c 0 "}${u||""}${X.value?X.value+" ":""}`,delete i.enabled,i}(e?D.defaultMJParams.value:D.mjParams.value,e);let a={params:t,type:$.TEXT_TO_IMAGE};T("submit",a),re.value=[]}const Ve=({focused:e,checked:t})=>{if(t){const t={background:"linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"};return e&&(t.boxShadow="0 0 0 2px #957df480"),t}};return(e,t)=>(d(),u("div",ce,[p(ie,{ref_key:"inspirationRef",ref:W,onTextToImg:pe,type:"mj"},null,512),p(se,{ref_key:"thinkRef",ref:ee,onTextToImg:pe,type:"mj"},null,512),c("div",ve,[c("div",xe,[Z.value&&Q.value.length?(d(),u("div",ge,[c("div",me,[t[5]||(t[5]=c("p",null,"推荐关键词",-1)),G.value?(d(),u("img",{key:0,style:{cursor:"pointer"},onClick:t[0]||(t[0]=e=>Z.value=!1),src:ae,alt:""})):(d(),u("img",{key:1,style:{cursor:"pointer"},onClick:t[1]||(t[1]=e=>Z.value=!1),src:le,alt:""}))]),c("div",fe,[(d(!0),u(v,null,x(Q.value,(e=>(d(),u("div",{onClick:t=>function(e){Z.value=!1,q.value=e.suggestEn,D.mjParams.value.prompt=e.suggestEn}(e),class:g(G.value?"item":"item1"),style:{"margin-top":"12px",display:"flex",padding:"8px",width:"100%","align-items":"center",cursor:"pointer"},key:e.id},[c("img",{style:{width:"50px",height:"50px"},src:e.image,alt:""},null,8,be),c("div",he,[c("div",ke,m(e.suggestCn),1),c("div",we,m(e.suggestEn),1)])],10,ye)))),128))])])):f("",!0),c("div",Ee,[y(c("textarea",{onInput:ue,onFocus:Se,"onUpdate:modelValue":t[2]||(t[2]=e=>q.value=e),type:"text",class:"inp dark:text-[#A1A8B4] text-[#8B8C8C]",placeholder:"在此描述画面的关键词，注意不要在此填入萝莉、性感、血腥等敏感词内容，否则100%不会出图",style:{resize:"none",height:"40px"}},null,544),[[b,q.value]])]),c("div",Fe,[c("span",Ae,[p(k(j),null,{default:h((()=>[1==Y.value?(d(),F(k(I),{key:0,style:{background:"#4e5058"},onClick:t[3]||(t[3]=e=>Be(0))},{icon:h((()=>[p(k(A),null,{default:h((()=>[p(k(ne))])),_:1})])),default:h((()=>[t[6]||(t[6]=C(" 快速模式 "))])),_:1})):f("",!0),0==Y.value?(d(),F(k(I),{key:1,onClick:t[4]||(t[4]=e=>Be(1))},{icon:h((()=>[p(k(A),null,{default:h((()=>[p(k(ne))])),_:1})])),default:h((()=>[t[7]||(t[7]=C(" 常规模式 "))])),_:1})):f("",!0)])),_:1}),c("div",Ce,[t[8]||(t[8]=c("p",{style:{"margin-right":"4px"},class:"text-[#76798B] dark:text-[#fff]"},"自动翻译",-1)),p(k(_),{"onUpdate:value":Me,"rail-style":Ve,size:"small"})]),c("div",{onClick:De,class:"box2 bg-[#e0e0e6] dark:bg-[#4E5058]"},t[9]||(t[9]=[c("img",{style:{width:"10px",height:"13px"},src:"/static/svg/lx-7c396516.svg",alt:""},null,-1),c("span",{class:"ml2"},"联想",-1)])),c("div",{onClick:Te,class:"bg-[#e0e0e6] dark:bg-[#4E5058] box2"},t[10]||(t[10]=[c("img",{style:{width:"16px",height:"13px"},src:"/static/svg/submitBot-fe33c3db.svg",alt:""},null,-1),c("span",{class:"ml2"},"提示词",-1)]))]),c("div",Ie,[c("div",{class:"btn bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",onClick:ze,style:w(q.value?"":"cursor: not-allowed;")},[oe.value?(d(),u("div",_e)):(d(),u("div",je,t[11]||(t[11]=[c("img",{src:"/static/svg/submit-f29501d6.svg",alt:""},null,-1),c("p",{style:{"margin-left":"4px",color:"#fff","font-size":"13px"}},"提交",-1)])))],4)])])])])],512))}}),[["__scopeId","data-v-e0d456db"]]),Se="/static/svg/instantce-78a6b698.svg",Te="/static/svg/mjMore-9acf549f.svg",De="/static/svg/delImg copy-c829db94.svg",Me={class:"swi-p subsiderbar-class video_sub_sidebar bg-[#f2f2f5] dark:bg-[#222325]",style:{border:"none"}},ze={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},Ve={style:{display:"flex","align-items":"stretch",height:"25px"}},Ne={style:{"margin-top":"18px",background:"#1E1F22","border-radius":"5px"}},Pe={style:{padding:"10px 15px 12px"}},Ue={style:{"margin-top":"4px","font-size":"12px",color:"#6A6A6A"}},Oe={key:0,class:"textToImg"},He={style:{"margin-top":"6px"}},Le={style:{display:"flex","align-items":"stretch","flex-wrap":"wrap"},class:"mode-group-list"},qe={style:{display:"flex","align-items":"center","flex-wrap":"wrap","margin-top":"10px"}},Qe=["onClick"],Re={style:{"margin-top":"0px"}},Je={class:"style_card"},Ge={class:"styleBox",ref:"container"},Xe=["onClick"],Ye=["onClick"],Ke={class:"styleImgText"},Ze=["src"],We={class:"back"},$e={key:0,class:"down"},et={key:1,class:"up"},tt={style:{"margin-top":"20px"}},at={class:"sizeMain",style:{"margin-top":"11px"}},lt=["onClick"],it={style:{display:"flex","align-items":"center"}},st={key:0,class:"t3"},nt={key:1,class:"text-[#b4b4b4] dark:text-[#b4b4b4]",style:{display:"flex"}},rt={style:{"margin-top":"20px"}},ot={style:{display:"flex","align-items":"center","margin-bottom":"6px","justify-content":"space-between"}},dt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex gap-[6px]"},ut={style:{"margin-top":"0px"}},pt={style:{"margin-top":"0px",cursor:"pointer"},class:"uploadPic"},ct={style:{display:"flex","flex-wrap":"wrap",gap:"6px"}},vt=["onClick"],xt=["src"],gt={class:"uploadOther p1"},mt=["onClick"],ft=["onBlur","onUpdate:modelValue","onInput"],yt={key:1,style:{"font-size":"8px"}},bt={key:1,style:{width:"1px",height:"1px"}},ht={class:"swi-p",style:{display:"flex","align-items":"center",height:"14px"}},kt={class:"uploadOther"},wt={key:1},Et={key:1,style:{width:"1px",height:"1px"}},Ft={style:{display:"flex","align-items":"center",height:"14px"}},At={class:"upload",style:{position:"relative","margin-left":"4px"}},Ct={class:"bot-p"},It={class:"uploadOther"},jt={style:{display:"flex","align-items":"center",height:"12px"}},_t={class:"uploadOther"},Bt={style:{display:"flex","align-items":"center",height:"14px"}},St={style:{display:"flex"}},Tt={style:{display:"flex","align-items":"center"}},Dt={style:{"margin-right":"4px"}},Mt={key:0,style:{position:"absolute",width:"100%",left:"0",top:"40px"},class:"dark:bg-[#383838] bg-[#fff] selectIW"},zt=["onClick"],Vt={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},Nt={style:{"margin-top":"20px"}},Pt={class:"seedBox"},Ut={style:{"margin-top":"20px"}},Ot={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ht={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Lt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},qt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Qt={style:{"flex-grow":"1"}},Rt={style:{"margin-top":"20px"}},Jt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Gt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Xt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},Yt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Kt={style:{"flex-grow":"1"}},Zt={style:{"margin-top":"20px"}},Wt={style:{"font-size":"12px"}},$t={key:0,style:{position:"absolute",top:"30px",width:"100%",left:"0","z-index":"100",padding:"0 8px"},class:"dark:bg-[#222325] bg-[#F0F0F0]"},ea=["onClick"],ta={style:{"margin-top":"20px"}},aa={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},la={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},ia={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},sa={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},na={style:{"flex-grow":"1"}},ra={key:1,class:"ImgToTextBox"},oa={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},da={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},ua=["src"],pa={key:2,class:"imgMixImg",style:{height:"calc(100vh - 54px)"}},ca={style:{display:"flex","flex-wrap":"wrap"}},va={style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},xa=["src"],ga=["onClick"],ma={style:{"margin-top":"20px"}},fa={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ya={class:"sizeMain"},ba=["onClick"],ha={style:{height:"40px",display:"flex","align-items":"center"}},ka={class:"text-[#8B8C8C] dark:text-[#6C6E79]"},wa={class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Ea={key:3,class:"AIBox"},Fa=["src"],Aa={key:1,class:"text-[#10A37F] dark:text-[#94989f]"},Ca=["src"],Ia={key:1,class:"text-[#10A37F] dark:text-[#94989f]"},ja={key:4,class:"bottom border-t dark:border-[#383737] border-[#383737]"},_a={style:{padding:"0 12px",position:"absolute",bottom:"12px",left:"0px",width:"100%"}},Ba=B(e({__name:"SubSidebar",props:{drawType:String},emits:["changeDataType","stylesList","rolesList","iwValue","swValue","cwValue","ar","no","s","c","q","weird","matsList","close","setEnabled","incantationCn","submitData"],setup(e,{emit:l}){const s=S(),n=e,r=i((()=>s.isLogin)),E=i((()=>s.userInfo));!E.value||!E.value.lifetimeVip||E.value.lifetimeVip;const F=t("mjBase"),A=a(!1);a(!1);const j=a(n.drawType),B=l,Q=T(),R=D(),{selectFile:J}=pe(),G=a(0),X=a(!1);function Y(e){j.value=e,B("changeDataType",j.value)}a(!1);const K=a(!1);function Z(){K.value=!1}const W=a(),te=a();function ae(){K.value=!0,setTimeout((()=>{L((()=>{te.value[0].focus()}))}),100)}const le=[{name:"--iw 0.25 相似度30%",id:0,value:.25,isSelect:!0},{name:"--iw 0.5 相似度40%",id:1,value:.5,isSelect:!1},{name:"--iw 1 相似度50%",id:2,value:1,isSelect:!1},{name:"--iw 1.25 相似度60%",id:3,value:1.25,isSelect:!1},{name:"--iw 1.5 相似度70%",id:4,value:1.5,isSelect:!1},{name:"--iw 1.75 相似度80%",id:5,value:1.75,isSelect:!1},{name:"--iw 2 相似度90%",id:6,value:2,isSelect:!1}],ie=a(le[G.value].value),se=a(0),ne=a(""),re=a(""),oe=a(0),de=a("175px"),ce=a(""),ve=a({Setwidth:1,Setheight:1}),xe=a(0),ge=a(!1),me=[{name:"1x",id:0,isSelect:!0,value:1},{name:"0.25x",id:1,isSelect:!1,value:.25},{name:"0.5x",id:2,isSelect:!1,value:.5}],fe=a(me[xe.value].value),ye=a(!1),be=a([]),he=a(0);function ke(){B("s",oe.value)}const we=a(0);function Ee(){B("c",we.value)}const Fe=a(0);function Ae(){B("weird",Fe.value)}function Ce(){}o((()=>ye.value),(e=>{B("setEnabled",e)})),o(ne,(e=>{B("no",ne.value)}));const Ie=a(10);function je(){Ie.value>100?Ie.value=100:Ie.value<0&&(Ie.value=0),B("cwValue",Ie.value)}o(Ie,(e=>{B("cwValue",Ie.value)}),{immediate:!0});const _e=a([]),Be=a([]);const Ba=a("/api/file/upload2Local");async function Sa(e=1){let t;if(1===e){if(t=await J(),!t)return void Q.error("选择文件错误")}else t=e;const a=new FormData;a.append("file",t),await q.post(Ba.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{if(t.data){let{data:e}=t.data;if(0!=_e.value.filter((t=>t.src==e)).length)return void Q.error("不可重复上传相同的图片");_e.value.push({src:e,cwIsShow:!1,swIsShow:!1,swValue:5,swinpIsShow:!1})}1!==e&&R.updateRecordDialog(!1)}))}function Ta(){}o(_e.value,(e=>{B("matsList",e.map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),B("stylesList",e.filter((e=>e.swIsShow)).map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),B("rolesList",e.filter((e=>e.cwIsShow)).map((e=>e.src)))}),{immediate:!0,deep:!0}),o(ve.value,(e=>{if(console.log("数据发生变化",e),"自定义"==ce.value){let t=Number(e.Setwidth)+":"+Number(e.Setheight);B("ar",t)}}));const Da=[{name:"头像框",value:"1:1",width:"16px",height:"16px",id:0,iconD:"1_1"},{name:"手机壁纸",value:"1:2",width:"12px",height:"24px",id:1,iconD:"1_2"},{name:"电脑壁纸",value:"16:9",width:"20px",height:"12px",id:2,iconD:"16_9"},{name:"宣传海报",value:"9:16",width:"12px",height:"20px",id:3,iconD:"9_16"},{name:"文章配图",value:"4:3",width:"22px",height:"17px",id:4,iconD:"4_3"},{name:"媒体配图",value:"3:4",width:"17px",height:"22px",id:5,iconD:"3_4"},{name:"横板名片",value:"3:2",width:"23px",height:"16px",id:6,iconD:"3_2"},{name:"小红书",value:"2:3",width:"16px",height:"23px",id:7,iconD:"2_3"}],Ma=a("mj"),za=a(5),Va=[{name:"MJ6.1",intro:"MJv6.1震撼来袭",id:5,value:"--v 6.1",group:"mj"},{name:"MJ7",intro:"MJv7震撼来袭",id:7,value:"--v 7",group:"mj"},{name:"MJ6.0",intro:"全新6.0ALPHA真实风，格图像",id:0,value:"--v 6.0",group:"mj"},{name:"MJ5.2",intro:"增强真实风格图像细节",id:1,value:"--v 5.2",group:"mj"},{name:"MJ5.1",intro:"专注真实艺术风格图像",id:2,value:"--v 5.1",group:"mj"},{name:"Nj6.0",intro:"官方最新动漫模型同步",id:3,value:"--niji 6",group:"nj"},{name:"Nj5.0",intro:"增强动漫风格图像细节",id:4,value:"--niji 5",group:"nj"}];function Na(e){var t;za.value=e,F.mjVersionChange(null==(t=Va.find((t=>t.id==e)))?void 0:t.value)}F.mjVersionChange(Va[0].value),M({page:1,size:20,type:"style"}).then((e=>{let t=e.data.filter((e=>2==e.level));be.value=t,Oa(be.value[0].pid)}));const Pa=a();const Ua=a([]);function Oa(e){z({id:e}).then((e=>{e.data.rows.length&&(Ua.value=e.data.rows[0].children)}))}const Ha=({focused:e,checked:t})=>{const a={};return t&&(a.background="linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"),e&&(a.boxShadow="0 0 0 2px #957df480"),a},La=a(""),qa=a([]),Qa=a(),Ra=a();async function Ja(e=1,t){if("imgmiximg"==t&&5==qa.value.length)return void Q.warning("最多上传5张图片");let a;if(1===e){if(a=await J(),!a)return void Q.error("选择文件错误")}else a=e;(new FormData).append("file",a),function(e){return new Promise(((t,a)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=function(){const e=l.result.split(",")[1];t(e)},l.onerror=function(){a(new Error("Failed to load file"))}}))}(a).then((e=>{let a="data:image/png;base64,"+e;if("imgToText"==t)La.value=a;else if("Ai1"==t)Qa.value=a;else if("Ai2"==t)Ra.value=a;else if("imgmiximg"==t){if(0!=qa.value.filter((e=>e==a)).length)return void Q.error("不可重复上传相同的图片");qa.value.push(a)}}))}function Ga(e,t){"imgMixImg"==t?qa.value=qa.value.filter((t=>t!=e)):"imgToText"==t?La.value="":"Ai1"==t?Qa.value="":"Ai2"==t&&(Ra.value="")}const Xa=a(1);a(1);const Ya=a(0),Ka=[{name:"头像框",intro:"1:2",value:"SQUARE",width:"16px",height:"16px",id:0},{name:"横板名片",intro:"3:2",value:"PORTRAIT",width:"23px",height:"16px",id:1},{name:"小红书",intro:"2:3",value:"LANDSCAPE",width:"16px",height:"23px",id:2}],Za=a(Ka[Ya.value].value);function Wa(){if(r.value){if("imgToText"==j.value){if(!La.value)return void Q.error("请上传图片");let e={action:ee.IMAGE_TO_TEXT,mode:Xa.value,files:"",base64Array:[La.value],type:$.IMAGE_TO_TEXT};B("submitData",e),qa.value=[],La.value=""}else if("imgMixImg"==j.value){if(qa.value.length<2)return void Q.error("请至少上传两张图片");let e={action:ee.IMAGE_MIX_IMAGE,mode:Xa.value,size:Za.value,base64Array:qa.value,type:$.IMAGE_MIX_IMAGE};B("submitData",e),qa.value=[],La.value=""}else if("AI"==j.value){if(!Qa.value)return void Q.error("请上传人脸模板图片");if(!Ra.value)return void Q.error("请上传替换人脸目标图");let e={params:{action:22,mode:Xa.value,sourceBase64:Qa.value,targetBase64:Ra.value},type:$.INSIGHT_FACE};B("submitData",e),qa.value=[],La.value=""}}else s.setLoginDialog(!0)}const $a=a({textToImg:"一款强大的人工智能绘画工具，为用户提供各种创意的绘图功能。",imgToText:"根据您上传的图片，解读出相关的提示词，提示词可用于重新绘制图像",imgMixImg:"可以将图像无缝地融合在一起，最多支持4张图片！图片越靠前，权重越高",AI:"上传原图及人脸图后，AI将自动识别并完成人脸替换"});return(e,t)=>(d(),u("div",Me,[c("div",ze,[c("div",Ve,[c("div",{class:g(["textToImg"==j.value?"noMargin type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7]  ":"noMargin type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),s:"",onClick:t[0]||(t[0]=e=>Y("textToImg"))},"文生图 ",2),c("div",{class:g(["imgMixImg"==j.value?"noMargin type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"noMargin type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),s:"",onClick:t[1]||(t[1]=e=>Y("imgMixImg"))},"图片混合 ",2),c("div",{class:g(["imgToText"==j.value?"noMargin type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"noMargin type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),s:"",onClick:t[2]||(t[2]=e=>Y("imgToText"))},"图片解析 ",2),c("div",{class:g(["AI"==j.value?"noMargin type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"noMargin type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),s:"",onClick:t[3]||(t[3]=e=>Y("AI"))},"AI换脸 ",2)]),c("div",Ne,[c("div",Pe,[t[28]||(t[28]=c("p",{style:{"font-size":"14px",color:"#fff"}},"功能介绍",-1)),c("div",Ue,m($a.value[j.value]),1)])]),"textToImg"==j.value?(d(),u("div",Oe,[c("div",He,[t[32]||(t[32]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},"模型选择")],-1)),c("div",Le,[c("div",{onClick:t[4]||(t[4]=e=>{Ma.value="mj",Na(5)}),class:g("mj"==Ma.value?"selected mimg":"mimg")},t[29]||(t[29]=[c("img",{src:"/static/png/bg_mj-512de77e.png"},null,-1),c("div",{class:"txt"},[c("div",null,"Midjourney"),c("div",{class:"t1"},"真实风格")],-1)]),2),c("div",{onClick:t[5]||(t[5]=e=>{Ma.value="nj",Na(3)}),class:g("nj"==Ma.value?"selected mimg":"mimg")},t[30]||(t[30]=[c("img",{src:"/static/png/bg_nj-884a3bcb.png"},null,-1),c("div",{class:"txt"},[c("div",null,"Niji"),c("div",{class:"t1"},"动漫风格")],-1)]),2)]),c("div",qe,[t[31]||(t[31]=c("span",{style:{color:"#6A6A6A","font-size":"14px"}},"版本",-1)),(d(!0),u(v,null,x(Va.filter((e=>e.group==Ma.value)),((e,t)=>(d(),u("div",{class:g([za.value==e.id?"version act":"version","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t=>function(e){za.value=e.id,F.mjVersionChange(e.value)}(e)},m(e.name),11,Qe)))),256))])]),c("div",Re,[t[33]||(t[33]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},"风格选择")],-1)),c("div",Je,[c("div",Ge,[(d(!0),u(v,null,x(be.value,((e,t)=>(d(),u("div",{class:g(he.value==t?"styleItemSelect":"styleItem"),onClick:e=>function(e){he.value=e,Oa(be.value[e].pid)}(t),key:e.id},m(e.classifyName),11,Xe)))),128))],512),c("div",{class:"styleImgBox",style:w({maxHeight:A.value?"unset":de.value})},[(d(!0),u(v,null,x(Ua.value,((e,t)=>(d(),u("div",{class:g(Pa.value==t?"styleImgItemSelect":"styleImgItem"),onClick:a=>function(e){let{incantationEn:t}=e.item;Pa.value=e.index,B("incantationCn",t)}({item:e,index:t})},[c("div",Ke,m(e.incantationCn),1),c("img",{src:e.img,alt:""},null,8,Ze)],10,Ye)))),256))],4)]),Ua.value.length>10?(d(),u("div",{key:0,onClick:t[6]||(t[6]=e=>A.value=!A.value),style:{"margin-top":"10px"},class:"flex justify-center w-[100%] cursor-pointer"},[c("div",We,[A.value?(d(),u("div",et)):(d(),u("div",$e))])])):f("",!0)]),c("div",tt,[t[35]||(t[35]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},"尺寸选择")],-1)),c("div",at,[(d(),u(v,null,x(Da,(e=>c("div",{class:g([se.value==e.id?" dark:border-[#0066ff] dark:bg-[#383838] sizeSelected":"dark:border-[#292A2E] dark:bg-[#383838] border-[#E8E8E8] bg-[#FFFFFF]","sizeItem border"]),key:e.id,onClick:t=>function(e){se.value=e.id,ce.value=e.name,"自定义"!=e.name&&B("ar",e.value)}(e)},[c("div",it,[c("div",{class:g(["icon-img","img"+e.iconD])},null,2)]),""!=e.value?(d(),u("p",st,m(e.value),1)):(d(),u("div",nt,[y(c("input",{onClick:V(Ta,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":t[7]||(t[7]=e=>ve.value.Setwidth=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[b,ve.value.Setwidth]]),t[34]||(t[34]=c("p",{style:{margin:"0 4px"}},":",-1)),y(c("input",{onClick:V(Ta,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":t[8]||(t[8]=e=>ve.value.Setheight=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[b,ve.value.Setheight]])]))],10,lt))),64))])]),c("div",rt,[c("div",ot,[c("div",dt,[t[38]||(t[38]=C("禁用指令 ")),p(k(P),{trigger:"hover",placement:"top"},{trigger:h((()=>t[36]||(t[36]=[c("img",{src:Se,alt:""},null,-1)]))),default:h((()=>[t[37]||(t[37]=c("div",{style:{}},[c("div",null,"开启后选项中的配置参数将不会携带，您可以在描述中进行自定义参数指定。"),c("div",null,"反之不打开、自定义输入--指令将会被忽略覆盖。"),c("div",null,"开启后不会翻译与优化咒语！")],-1))])),_:1})]),p(k(_),{style:{"margin-left":"8px","margin-right":"8px"},value:ye.value,"onUpdate:value":t[9]||(t[9]=e=>ye.value=e),"rail-style":Ha,size:"small"},null,8,["value"])])]),p(k(H),{"arrow-placement":"right",class:"role-collapse"},{default:h((()=>[p(k(U),{class:"role-collapse-item",title:"高级参数",name:"1"},{default:h((()=>[c("div",ut,[c("div",pt,[t[51]||(t[51]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"参考图")],-1)),c("div",ct,[(d(!0),u(v,null,x(_e.value,((e,a)=>(d(),u("div",{class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",key:a,style:{position:"relative"}},[c("span",{class:"remove",onClick:V((e=>_e.value.splice(a,1)),["stop"])},t[39]||(t[39]=[c("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHdSURBVDiNtdWxi9pgHMbxby4nFEvuQMEIxeHQLYtCHXTQKVPBRRw6ZHCNe8YGuohjB+PgnyB2OOgYgoIedFCHLjlxKgen5YbrcBauwQ53ATmScG29H7wE8vB8El4SXgE45//mN/AdGANfgF8AwgHg/bkCPgA/jg6IArwBPgKvDg37+LuXgAEqLwVnQuHRaFSczWZlRVHiQbmiKPHlclkdjUbFgPg4FJYkKVYoFJK2bZee4oqixG3bLuVyuRNJkmJB/VBY07TFarW6lWU5vo/7qCzL8dVqdatp2iKoH/kdp1Kp2HQ6LWWz2dP1en3XarUW3W4376Plcvlis9nc/zXs44PBIF+pVNL+vfF4fN1oNBZhKERshT+bzebeNE3X87wdgOd5O9M03Sj0WbBhGBnHcaqiKArz+fxGFEXBcZyqYRiZqJ4IvI9CO51OHqDX613WarWFLMtCsVhMqqqa3m6328lk8jOsfx602u32t93jWJbl7meWZblhmb9Ct6LZbJ75b6rruruf6bru9nq9SwBVVdNBfQH4DBw/Der1ejKRSMT6/f512MPr9XoSYDgc3gTBn4CzsPK/jgi8BvKHho94OE6uDg2LPJxZX4G3wMkhYYA7wH68ngISz/h5ouYPRiq/PPmBkeEAAAAASUVORK5CYII="},null,-1)]),8,vt),""!=e.src?(d(),u("div",{key:0,style:{display:"flex","justify-content":"center","align-items":"center"},class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",onClick:t[10]||(t[10]=e=>Sa(1))},[c("img",{src:e.src,alt:""},null,8,xt)])):(d(),u("div",{key:1,class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0"},onClick:t[11]||(t[11]=e=>Sa(1))},"点击上传")),c("div",{class:"bot-p",style:w(e.src?"opacity: 0.9;":"")},[c("div",gt,[e.swIsShow?(d(),u("div",{key:0,class:"left",onClick:t=>function(e){e.swinpIsShow=!0,setTimeout((()=>{L((()=>{W.value[0].focus()}))}),100)}(e)},[e.swinpIsShow?y((d(),u("input",{key:0,onBlur:t=>function(e){e.swinpIsShow=!1}(e),ref_for:!0,ref_key:"refInput",ref:W,"onUpdate:modelValue":t=>e.swValue=t,style:{width:"100%","background-color":"transparent","font-size":"8px"},type:"text",onInput:t=>function(e){e.swValue>100?e.swValue=100:e.swValue<0&&(e.swValue=0),B("swValue",e.swValue)}(e)},null,40,ft)),[[b,e.swValue]]):(d(),u("p",yt,m(e.swValue?e.swValue:"权重"),1))],8,mt)):(d(),u("div",bt)),c("div",ht,[t[40]||(t[40]=c("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1)),p(k(_),{class:"swi",size:"small",disabled:0==e.swIsShow&&3==Be.value.length,value:e.swIsShow,"onUpdate:value":[t=>e.swIsShow=t,e=>{}],"rail-style":Ha},null,8,["disabled","value","onUpdate:value"])])]),c("div",kt,[e.cwIsShow?(d(),u("div",{key:0,class:"left",onClick:ae},[K.value?y((d(),u("input",{key:0,type:"text",onBlur:Z,ref_for:!0,ref_key:"refInput1",ref:te,"onUpdate:modelValue":t[12]||(t[12]=e=>Ie.value=e),style:{width:"100%","background-color":"transparent"},onInput:je},null,544)),[[b,Ie.value]]):(d(),u("p",wt,m(Ie.value?Ie.value:"--cw"),1))])):(d(),u("div",Et)),c("div",Ft,[t[41]||(t[41]=c("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1)),p(k(_),{class:"swi",size:"small","onUpdate:value":[e=>function(e,t){_e.value.forEach(((e,a)=>{t!=a&&(e.cwIsShow=!1)}))}(0,a),t=>e.cwIsShow=t],value:e.cwIsShow,"rail-style":Ha},null,8,["onUpdate:value","value"])])])],4)])))),128)),c("div",At,[c("div",{class:"title dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0",border:"1px dashed #A5A5A5"},onClick:t[13]||(t[13]=e=>Sa(1))},t[42]||(t[42]=[c("div",{style:{"font-size":"13px",color:"#94989f"}},"将图片拖到此处",-1),c("div",{style:{"font-size":"14px",color:"#d2d7e0",display:"flex","align-items":"center","justify-content":"center"}},[c("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAESSURBVEiJ7VXbbYNAEJxxBXQQ3IFTQS4d0II7cAlxBXEHaSEd2B04qQBSAXQw/sgeQhC8SxwpPx5pBYd2Zh+3dwB3/DcYdZS0AfBky0+Spz/JQFKSdNQUtQW9SXwjqf1BPKO9KYhl6aH+rXgVEM9IS4STpDenNZMqjFN54q8LROfwMie+C5DPZh52Y/FCfktqSaVZ7fi2kopx3z1COfAvAwlVALAyjjcFW5JNXtj71uE8DAN8XHF8B9BZlYVZAtABOF3hfQF2F1n5kQPzbM9jwHdNslkBfcmHACmKw7ClAPpJ8qYjBQbirMEE5T0AyY7kGsAe3/1dig7AnuQjyZ4/+z+wfSlHn/MwjG/QZtKSO6K4AIBShiP+yKTqAAAAAElFTkSuQmCC"}),C("或点击上传 ")],-1)])),c("div",Ct,[c("div",It,[t[44]||(t[44]=c("div",{style:{width:"1px",height:"1px"}},null,-1)),c("div",jt,[t[43]||(t[43]=c("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1)),p(k(_),{class:"swi",size:"small",disabled:"","rail-style":Ha})])]),c("div",_t,[t[46]||(t[46]=c("div",{style:{width:"1px",height:"1px"}},null,-1)),c("div",Bt,[t[45]||(t[45]=c("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1)),p(k(_),{class:"swi",size:"small",disabled:"","rail-style":Ha})])])])])]),c("div",null,[c("div",{onClick:t[14]||(t[14]=e=>X.value=!X.value),style:{display:"flex",cursor:"pointer","max-width":"100%",width:"100%",padding:"16px","border-radius":"8px","justify-content":"space-between","margin-top":"20px",position:"relative"},class:"border dark:bg-[#383838] dark:border-[#292A2E] bg-[#fff] border-[#E8E8E8]"},[c("div",St,[t[49]||(t[49]=c("p",{style:{"margin-right":"4px"}},"相似度 ",-1)),p(k(P),{trigger:"hover",placement:"top"},{trigger:h((()=>t[47]||(t[47]=[c("img",{src:Se,alt:""},null,-1)]))),default:h((()=>[t[48]||(t[48]=c("div",{style:{}},"--iw 值越高，上传的图像对最终效果的影响就越大",-1))])),_:1})]),c("div",Tt,[c("p",Dt,m(le[G.value].name),1),t[50]||(t[50]=c("img",{style:{width:"18px",height:"18px"},src:Te,alt:""},null,-1))]),X.value?(d(),u("div",Mt,[(d(),u(v,null,x(le,(e=>c("div",{class:"iwItem",style:w(G.value==e.id?"color:#7369E2":""),key:e.id,onClick:t=>function(e){G.value=e.id,ie.value=e.value,B("iwValue",ie.value)}(e)},m(e.name),13,zt))),64))])):f("",!0)])])]),t[52]||(t[52]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px","margin-top":"20px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"不想出现的词")],-1)),c("div",Vt,[y(c("textarea",{"onUpdate:modelValue":t[15]||(t[15]=e=>ne.value=e),onInput:Ce,style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"输入不想出现在图像中的内容（例如树木，0/200）"},null,544),[[b,ne.value]]),c("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:t[16]||(t[16]=e=>ne.value="")}," 清空 ")])]),c("div",Nt,[t[53]||(t[53]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"--seed 种子")],-1)),c("div",Pt,[y(c("input",{class:"inp bg-[#383838] w-[100%]",style:{flex:"1","border-radius":"6px",padding:"4px 6px"},type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>re.value=e)},null,512),[[b,re.value]])])]),c("div",null,[c("div",Ut,[c("div",Ot,[c("div",Ht,[t[56]||(t[56]=C("--s 风格化 ")),p(k(P),{trigger:"hover",placement:"top"},{trigger:h((()=>t[54]||(t[54]=[c("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Se,alt:""},null,-1)]))),default:h((()=>[t[55]||(t[55]=c("div",{style:{}},"这个值越低会更符合 prompt 的描述,数值越高艺术性就会越强，但跟 prompt关联性就会比较弱",-1))])),_:1})])]),c("div",Lt,[c("div",qt,m(oe.value),1),c("div",Qt,[p(k(O),{value:oe.value,"onUpdate:value":t[18]||(t[18]=e=>oe.value=e),step:1,max:1e3,onDragend:ke},null,8,["value"])])])]),c("div",Rt,[c("div",Jt,[c("div",Gt,[t[59]||(t[59]=C("--c 多样化 ")),p(k(P),{trigger:"hover",placement:"top"},{trigger:h((()=>t[57]||(t[57]=[c("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Se,alt:""},null,-1)]))),default:h((()=>[t[58]||(t[58]=c("div",{style:{}},"这个值越低生成的四张图风格越相似，反之差异越大",-1))])),_:1})])]),c("div",Xt,[c("div",Yt,m(we.value),1),c("div",Kt,[p(k(O),{value:we.value,"onUpdate:value":t[19]||(t[19]=e=>we.value=e),step:1,onDragend:Ee},null,8,["value"])])])]),c("div",Zt,[t[61]||(t[61]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},"--quelity 质量 ")],-1)),c("div",{class:"selectQuelity dark:bg-[#383838] bg-[#F0F0F0] flex",style:{position:"relative",flex:"1",cursor:"pointer",padding:"4px 6px","border-radius":"6px",display:"flex","margin-left":"8px","align-items":"center","justify-content":"space-between"},onClick:t[20]||(t[20]=e=>ge.value=!ge.value)},[c("p",Wt,m(me[xe.value].name),1),t[60]||(t[60]=c("img",{style:{width:"12px",height:"12px"},src:Te,alt:""},null,-1)),ge.value?(d(),u("div",$t,[(d(),u(v,null,x(me,(e=>c("div",{class:"",onClick:t=>function(e){xe.value=e.id,fe.value=e.value,B("q",fe.value)}(e),style:w([{padding:"4px 0"},xe.value==e.id?"color:#7369E2":""]),key:e.id},m(e.name),13,ea))),64))])):f("",!0)])]),c("div",ta,[c("div",aa,[c("div",la,[t[64]||(t[64]=C("--weird 奇妙 ")),p(k(P),{trigger:"hover",placement:"top"},{trigger:h((()=>t[62]||(t[62]=[c("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Se,alt:""},null,-1)]))),default:h((()=>[t[63]||(t[63]=c("div",{style:{}},"生成的图像引入奇特和离奇的特质，从而产生独特而意想不到的结果",-1))])),_:1})])]),c("div",ia,[c("div",sa,m(Fe.value),1),c("div",na,[p(k(O),{value:Fe.value,"onUpdate:value":t[21]||(t[21]=e=>Fe.value=e),step:1,onDragend:Ae},null,8,["value"])])])])])])),_:1})])),_:1})])):f("",!0),"imgToText"==j.value?(d(),u("div",ra,[c("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[22]||(t[22]=e=>Ja(1,"imgToText"))},[t[66]||(t[66]=c("div",{style:{display:"flex","margin-bottom":"6px"}},[c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传图片"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==La.value?(d(),u("div",oa,t[65]||(t[65]=[c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),c("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(d(),u("div",da,[c("img",{src:La.value,style:{height:"100%"}},null,8,ua)]))]),t[67]||(t[67]=c("div",{style:{"margin-top":"20px"}},[c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"温馨提示")]),c("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 同官方的/describe命令系统将根据您上传的图片，解读出多个相关的提示词，您可以根据解读出的提示词重新绘制图像。 ")],-1))])):f("",!0),"imgMixImg"==j.value?(d(),u("div",pa,[c("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[23]||(t[23]=e=>Ja(1,"imgmiximg"))},[t[70]||(t[70]=c("div",{style:{display:"flex","margin-bottom":"6px"}},[c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传图片"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"（请上传2-5张图片） ")])],-1)),c("div",ca,[c("div",va,[(d(!0),u(v,null,x(qa.value,((e,a)=>(d(),u("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]",key:a},[e?(d(),u("img",{key:0,src:e,alt:""},null,8,xa)):f("",!0),c("div",{class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:V((t=>Ga(e,"imgMixImg")),["stop"])},t[68]||(t[68]=[c("img",{src:De,alt:""},null,-1)]),8,ga)])))),128)),t[69]||(t[69]=c("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]"},[c("p",{class:"text-[#0066ff] dark:text-[#94989f]"},"点击上传")],-1))])])]),c("div",ma,[t[71]||(t[71]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"图片尺寸"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"选择生成图像的宽度x高度 ")],-1)),c("div",fa,[c("div",ya,[(d(),u(v,null,x(Ka,(e=>c("div",{class:g([Ya.value==e.id?"dark:border-[#0066ff] bg-[#F3FBF8] dark:bg-[#383838] sizeSelected":"dark:border-[#292A2E] dark:bg-[#383838] border-[#E8E8E8] bg-[#FFFFFF]","sizeItem border"]),key:e.id,onClick:t=>function(e){Ya.value=e.id,Za.value=e.value}(e)},[c("div",ha,[c("div",{style:w({width:e.width,height:e.height}),class:g(["size border",Ya.value==e.id?"border-[#86CFB5]  dark:bg-[#D3D1D9]":"dark:bg-[#D3D1D9] dark:border-[#46484F] bg-[#F8F9F9] border-[#CDCECE]"])},null,6)]),c("p",ka,m(e.intro),1),c("p",wa,m(e.name),1)],10,ba))),64))])])]),t[72]||(t[72]=c("div",{style:{"margin-top":"20px"}},[c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"温馨提示")]),c("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 同官方的/blend命令图混图，最多可以上传5张图片进行混图，图片越靠前，权重越高。 ")],-1))])):f("",!0),"AI"==j.value?(d(),u("div",Ea,[t[75]||(t[75]=c("div",{class:"line bg-[#EBEBEB] dark:bg-[#222226]"},null,-1)),t[76]||(t[76]=c("div",{class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},[c("p",{style:{"margin-top":"3px","font-size":"12px"}},"第一步，上传人脸模板图片")],-1)),t[77]||(t[77]=c("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 严禁上传违规图（政治人物、色情、暴恐等）违者100%封号 ",-1)),c("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]",onClick:t[25]||(t[25]=e=>Ja(1,"Ai1"))},[Qa.value?(d(),u("img",{key:0,src:Qa.value,alt:""},null,8,Fa)):(d(),u("p",Aa,"点击上传")),Qa.value?(d(),u("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:t[24]||(t[24]=V((e=>Ga(Qa.value,"Ai1")),["stop"]))},t[73]||(t[73]=[c("img",{src:De,alt:""},null,-1)]))):f("",!0)]),t[78]||(t[78]=c("div",{style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 注意素材质量，保证脸部足够清晰，为了更好的效果，最好正脸。 ",-1)),t[79]||(t[79]=c("div",{class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},[c("p",{style:{"margin-top":"3px","font-size":"12px"}},"第二步，上传需要替换人脸的目标图片")],-1)),t[80]||(t[80]=c("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 严禁上传违规图（政治人物、色情、暴恐等）违者100%封号",-1)),c("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]",onClick:t[27]||(t[27]=e=>Ja(1,"Ai2"))},[Ra.value?(d(),u("img",{key:0,src:Ra.value,alt:""},null,8,Ca)):(d(),u("p",Ia,"点击上传")),Ra.value?(d(),u("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:t[26]||(t[26]=V((e=>Ga(Ra.value,"Ai2")),["stop"]))},t[74]||(t[74]=[c("img",{src:De,alt:""},null,-1)]))):f("",!0)]),t[81]||(t[81]=N('<div style="font-size:10px;margin-top:10px;" class="text-[#8B8C8C] dark:text-[#6C6E79]" data-v-3c353bce> 最大2048x2048像素，不超过5MB，建议：五官无遮挡，角度小于20% </div><div style="font-size:10px;" class="text-[#8B8C8C] dark:text-[#6C6E79]" data-v-3c353bce> 换脸操作只能在写实版人物上进行，漫回类因面部五官比例不统一，是无法完成换脸操作 </div><div class="" style="display:flex;align-items:center;margin-top:8px;" data-v-3c353bce><p style="margin-top:3px;font-size:12px;" data-v-3c353bce>第三步，提交任务</p></div><div style="font-size:10px;" class="text-[#8B8C8C] dark:text-[#6C6E79]" data-v-3c353bce> 免责声明： 本功能效果太逼真！请遵守相关法律法规，反对非法用途，包括但不限于侵犯他人隐私、散布虚假信息，进行诈骗等行为！</div>',4))])):f("",!0),"textToImg"!=j.value?(d(),u("div",ja,[c("div",_a,[p(k(I),{loading:k(F).isLoading.value,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:Wa},{default:h((()=>t[82]||(t[82]=[c("img",{src:ue,style:{"margin-right":"5px"}},null,-1),c("span",null,"生成",-1)]))),_:1},8,["loading"])])])):f("",!0)])]))}}),[["__scopeId","data-v-3c353bce"]]),Sa={class:"draw-midjourney-class",style:{display:"flex",height:"100vh",overflow:"hidden"}},Ta={style:{flex:"1",display:"flex","flex-direction":"column"},class:"contentBox border-l dark:border-[#2A2C30] border-[#EBEBEB] dark:bg-[#24262a] bg-[#24262a]"},Da={key:0},Ma={key:1},za={key:0,class:"gap"},Va={class:"mid"},Na=B(e({__name:"midjourney",setup(e){const t=a(""),l=a(""),s=a(""),r=a(""),m=a(""),y=S(),b=i((()=>y.isLogin)),h=T(),k=a(""),w=a(0),E=a({translate:w.value,prompt:"",styles:[],roles:[],iw:.25,sw:0,cw:0,extend:"",mode:1,mats:[],enabled:!1,action:$.TEXT_TO_IMAGE}),A=a({ar:"",no:"",s:"",c:"",q:"",weird:""}),C=Q(),I=a("textToImg");function j(e){I.value=e}function _(e){k.value=e}C.query.type&&(I.value=C.query.type),de({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{r.value=e.data.copyrightTitle,t.value=e.data.icpNumber,l.value=e.data.policeFilingNumber,s.value=e.data.icpUrl,m.value=e.data.policeFilingUrl}));let B=!1;const D=a([]);let M=[];const z=a(!1),V=a(!1),N=a([]);function P(e){E.value.styles=e}function U(e){E.value.roles=e}const O=a([]);function H(e){O.value=e}function q(e){E.value.iw=e}function ee(e){E.value.enabled=e}function ae(e){}function le(e){E.value.cw=Number(e)}function ie(e){let t="--ar "+e;A.value.ar=t}function se(e){let t="--no "+e;A.value.no=t}function ne(e){let t="--s "+e;A.value.s=t}function ue(e){let t="--c "+e;A.value.c=t}function pe(e){let t="--q "+e;A.value.q=t}function ce(e){let t="--weird "+e;A.value.weird=t}const ve=a("");function xe(e){ve.value=e||""}let ge=null;const me=async function(){try{ge&&window.clearTimeout(ge);(await W({jobIds:M.join()})).data.forEach((e=>{const t=N.value.findIndex((t=>t.id===e.id));-1!==t&&N.value.splice(t,1,e),e.status>=3&&(M=M.filter((t=>t!==e.jobId)))})),M.length?ge=setTimeout((()=>me()),3e3):ge&&window.clearTimeout(ge)}catch(e){ge=setTimeout((()=>me()),3e3)}};o(b,(async e=>{if(1==e){const e={page:1,size:10},t=await J(e);1===e.page&&(N.value=t.data.rows.reverse())}else N.value.length=0}));const fe={page:1,size:10},ye=async function(e){try{V.value=!0;const t=await J(fe);1===fe.page?N.value=t.data.rows.reverse():N.value=t.data.rows.reverse().concat(N.value),console.log(N.value),M=N.value.filter((e=>[1,2].includes(e.status))).map((e=>e.jobId)),M.length&&me(),t.data.rows.length<fe.size&&(z.value=!0),L(e?()=>{var e;null==(e=Ee.value)||e.scrollTo({top:Ee.value.scrollHeight,behavior:"smooth"}),D.value.length&&D.value[D.value.length-1].scrollIntoView(),setTimeout((()=>{B=!0}),100)}:()=>{var e;let a=0;for(let l=0;l<t.data.rows.length;l++){const t=null==(e=Ee.value)?void 0:e.children[0].children[l];a+=(null==t?void 0:t.offsetHeight)||0}Ee.value.scrollTop=a}),V.value=!1}catch(t){V.value=!1}},be=a("mj"),he=a(!1),ke=a(),we=async function(e,t){ke.value=!1,he.value=!0;try{let a=null;switch(e.type){case $.TEXT_TO_IMAGE:case $.IMAGE_ACTION:a=await K(e),X.emit("getUserInfo",!0);break;case $.IMAGE_MIX_IMAGE:case $.IMAGE_TO_TEXT:a=await Y(e),X.emit("getUserInfo",!0);break;case $.INSIGHT_FACE:a=await G(e),X.emit("getUserInfo",!0)}if(a){const e=a.data;ke.value=!0,he.value=!1;N.value.find((t=>t.id===e.id))||(N.value.push(e),L((()=>{var e;null==(e=Ee.value)||e.scrollTo({top:Ee.value.scrollHeight,behavior:"smooth"})}))),e.status<3&&!M.includes(e.jobId)&&(M.push(e.jobId),me())}t&&t(Boolean(null==a?void 0:a.success))}catch(a){h.error(a.message),ke.value=!0,he.value=!1,t&&t(!1)}},Ee=a(),Fe=function(e){const t=e.target;B&&t.scrollTop<=20&&(z.value||V.value||(fe.page=fe.page+1,ye()))};R((()=>{var e;null==(e=Ee.value)||e.removeEventListener("scroll",Fe)}));const Ae=a({}),Ce=a({});return n((()=>{var e;y.getUserInfo(),Ae.value=JSON.parse(JSON.stringify(E.value)),Ce.value=JSON.parse(JSON.stringify(A.value)),ye(!0),null==(e=Ee.value)||e.addEventListener("scroll",Fe)})),Z("mjBase",{isLoading:he,mjParams:E,defaultMJParams:Ae,defaultExtendArr:Ce,extendArr:A,styleMode:ve,mjVersionChange:function(e){be.value=e}}),(e,t)=>(d(),u("div",Sa,[p(Ba,{onStylesList:P,onRolesList:U,onSetEnabled:ee,onIwValue:q,onSwValue:ae,onCwValue:le,onAr:ie,onNo:se,onS:ne,onC:ue,onQ:pe,onWeird:ce,onMatsList:H,onIncantationCn:xe,drawType:I.value,onChangeDataType:j,onSubmitData:we},null,8,["drawType"]),c("div",Ta,[t[0]||(t[0]=c("div",{class:"borTitel",style:{}},[c("span",{style:{color:"#ffffff","font-size":"18px"}},"# 创作中心"),c("p",{style:{"margin-left":"13px",color:"#F0B132","font-size":"14px"}}," 请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有则违规封号处理。 ")],-1)),c("div",{ref_key:"scrollView",ref:Ee,class:g({pb80:"textToImg"===I.value}),style:{flex:"1",overflow:"auto"}},[b.value&&0!=N.value.length?(d(),u("div",Da,[(d(!0),u(v,null,x(N.value,((e,t)=>(d(),F(te,{type:"chat",task:e,key:e.jobId+"-"+e.status,onRemove:()=>function(e){N.value.splice(e,1)}(t),onAddTask:we},null,8,["task","onRemove"])))),128))])):(d(),u("div",Ma,[p(oe,{onHandleprompt:_})]))],2),"textToImg"===I.value?(d(),u("div",za,[p(re,{style:{bottom:"8px"}})])):f("",!0),c("div",Va,["textToImg"==I.value?(d(),F(Be,{key:0,handleprompt:k.value,isSuccess:!!ke.value&&ke.value,mode:be.value,onSubmit:we},null,8,["handleprompt","isSuccess","mode"])):f("",!0)])])]))}}),[["__scopeId","data-v-8a797b60"]]);export{Na as default};
