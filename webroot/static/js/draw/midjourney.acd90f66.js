import{e,a7 as l,an as a,aw as t,j as i,r as s,A as o,bi as n,bj as r,R as d,S as u,U as p,W as c,a2 as v,a8 as g,a3 as x,X as m,a4 as f,F as y,af as h,as as b,Q as w,a9 as k,H as C,ak as F,be as A,ar as E,bk as I,Z as B,_ as S,K as j,$ as T,ah as z,k as _,bl as U,ac as V,ai as D,O as M,aS as L,b1 as Q,am as O,az as N,aD as P,Y as G,aC as K,aB as q,aA as J}from"../main-f2e6132a.js";import{a as X}from"../index/index.27c727e8.js";import{M as Y}from"../index/index.25d41ca2.js";import{_ as Z,i as H,a as R,D as W,n as $}from"../index/index.e34a74a8.js";import{_ as ee,a as le}from"../close copy/close copy.08564ec3.js";import{u as ae}from"../useUpload/useUpload.0bafa849.js";import{_ as te,b as ie}from"../baiduThink/baiduThink.8c74bf14.js";import{a as se}from"../music/music.b67e90f9.js";import"../draw-fail/draw-fail.ad8fd01b.js";import"../index/index.5b75f753.js";import"../index/index.5af60b3c.js";import"./draw.a7ba2d86.js";import"../Popconfirm/Popconfirm.54287f3d.js";import"../vip_gray/vip_gray.b1563178.js";const oe="/static/svg/mjMore-9acf549f.svg",ne=e=>(B("data-v-31358218"),e=e(),S(),e),re={class:"setParameterBox dark:bg-[#19191B] bg-[#F8F9F9] border border-[#E7E7E7] dark:border-[#242427]"},de={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"12px"},class:"border-b dark:border-[#292A2E] border-[#E8E8E8]"},ue={style:{display:"flex","align-items":"center"}},pe={key:0,style:{width:"16px",height:"16px"},src:"/static/svg/setParameter-81a8da33.svg",alt:""},ce={key:1,style:{width:"16px",height:"16px"},src:"/static/svg/setParameter copy-fa185e6a.svg",alt:""},ve=ne((()=>u("p",null,"参数设置",-1))),ge={style:{padding:"8px 12px 0 12px","overflow-y":"auto",height:"512px"}},xe={class:"selectStyle"},me=ne((()=>u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"风格选择")],-1))),fe={class:"styleBox",ref:"container"},ye=["onClick"],he={class:"styleImgBox"},be=["onClick"],we={class:"styleImgText"},ke=["src"],Ce={class:"uploadPic"},Fe=ne((()=>u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"参考图")],-1))),Ae=ne((()=>u("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},"（严禁上传违规图（政治人物、色情、暴恐等），违者100%封号） ",-1))),Ee={style:{display:"flex","flex-wrap":"wrap"}},Ie=["src"],Be={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},Se=["onClick"],je=["onBlur","onUpdate:modelValue","onInput"],Te={key:1},ze={key:1,style:{width:"1px",height:"1px"}},_e={style:{display:"flex","align-items":"center",height:"28px"}},Ue=ne((()=>u("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1))),Ve={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},De={key:1},Me={key:1,style:{width:"1px",height:"1px"}},Le={style:{display:"flex","align-items":"center",height:"28px"}},Qe=ne((()=>u("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1))),Oe={class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",style:{position:"relative","margin-left":"4px"}},Ne={style:{position:"absolute",width:"100%",bottom:"0"}},Pe={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},Ge=ne((()=>u("div",{style:{width:"1px",height:"1px"}},null,-1))),Ke={style:{display:"flex","align-items":"center",height:"28px"}},qe=ne((()=>u("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1))),Je={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},Xe=ne((()=>u("div",{style:{width:"1px",height:"1px"}},null,-1))),Ye={style:{display:"flex","align-items":"center",height:"28px"}},Ze=ne((()=>u("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1))),He={style:{display:"flex"}},Re=ne((()=>u("p",{style:{"margin-right":"4px"}},"--iw图片相似度",-1))),We=ne((()=>u("img",{src:Z,alt:""},null,-1))),$e=ne((()=>u("div",{style:{width:"280px"}},"--iw 值越高，上传的图像对最终效果的影响就越大",-1))),el={style:{display:"flex","align-items":"center"}},ll={style:{"margin-right":"4px"}},al=ne((()=>u("img",{style:{width:"12px",height:"12px"},src:oe,alt:""},null,-1))),tl={key:0,style:{position:"absolute",width:"100%",left:"0",top:"40px"},class:"dark:bg-[#111113] bg-[#fff] selectIW"},il=["onClick"],sl={class:"sizeBox",style:{"margin-top":"16px"}},ol=ne((()=>u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"生成尺寸--ar")],-1))),nl=ne((()=>u("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},"选择生成图像的宽度x高度比例",-1))),rl={class:"sizeMain"},dl=["onClick"],ul={style:{height:"40px",display:"flex","align-items":"center"}},pl=["src"],cl={key:0,class:"text-[#8B8C8C] dark:text-[#6C6E79]"},vl={key:1,class:"text-[#8B8C8C] dark:text-[#6C6E79]",style:{display:"flex"}},gl=ne((()=>u("p",{style:{margin:"0 4px"}},":",-1))),xl={class:"noText"},ml=ne((()=>u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"不想出现的词")],-1))),fl={class:"inpBox border dark:border-[#2C2D31] border-[#E7E7E7] dark:bg-[#111113] bg-[#FFFFFF]"},yl={class:"advancedBox"},hl=ne((()=>u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"高级参数")],-1))),bl={class:"seedBox"},wl=ne((()=>u("p",{class:"title"},"--seed 种子",-1))),kl={class:"s"},Cl={class:"title",style:{display:"flex"}},Fl=ne((()=>u("p",null,"--s 风格化",-1))),Al=ne((()=>u("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Z,alt:""},null,-1))),El=ne((()=>u("div",{style:{width:"280px"}},"这个值越低会更符合 prompt 的描述,数值越高艺术性就会越强，但跟 prompt关联性就会比较弱",-1))),Il={class:"sliderBox"},Bl={class:"c"},Sl={class:"title",style:{display:"flex"}},jl=ne((()=>u("p",null,"--c 多样化",-1))),Tl=ne((()=>u("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Z,alt:""},null,-1))),zl=ne((()=>u("div",{style:{width:"280px"}},"这个值越低生成的四张图风格越相似，反之差异越大",-1))),_l={class:"sliderBox"},Ul={class:"quelity",style:{}},Vl=ne((()=>u("div",{class:"title",style:{display:"flex"}},[u("p",null,"--quelity 质量")],-1))),Dl={style:{"font-size":"12px"}},Ml=ne((()=>u("img",{style:{width:"12px",height:"12px"},src:oe,alt:""},null,-1))),Ll={key:0,style:{position:"absolute",top:"30px",width:"100%",left:"0","z-index":"100",padding:"0 8px"},class:"dark:bg-[#222325] bg-[#F0F0F0]"},Ql=["onClick"],Ol={class:"weird"},Nl={class:"title",style:{display:"flex"}},Pl=ne((()=>u("p",null,"--weird 奇妙",-1))),Gl=ne((()=>u("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Z,alt:""},null,-1))),Kl=ne((()=>u("div",{style:{width:"280px"}},"生成的图像引入奇特和离奇的特质，从而产生独特而意想不到的结果",-1))),ql={class:"sliderBox"},Jl={class:"public"},Xl=ne((()=>u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"公开作品")],-1))),Yl={style:{display:"flex","align-items":"center"}},Zl=ne((()=>u("p",{style:{"font-size":"12px"}},"公开作品",-1))),Hl=ne((()=>u("p",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},"开启后您的绘画生成结果将会在公共画廊中展示",-1))),Rl=T(e({__name:"index",emits:["stylesList","rolesList","iwValue","swValue","cwValue","ar","no","s","c","q","weird","matsList","close","incantationCn"],setup(e,{emit:B}){const S=l(),T=a(),z=t(),{selectFile:_,upload:U}=ae(),V=i((()=>"dark"===S.theme)),D=B,M=s(0),L=s(!1);s(!1);const Q=s(!1);function O(){Q.value=!1}const N=s(),P=s();function G(){Q.value=!0,setTimeout((()=>{j((()=>{P.value[0].focus()}))}),100)}const K=[{name:"--iw 0.25 默认 相似度30%",id:0,value:.25,isSelect:!0},{name:"--iw 0.5 相似度40%",id:1,value:.5,isSelect:!1},{name:"--iw 1 相似度50%",id:2,value:1,isSelect:!1},{name:"--iw 1.25 相似度60%",id:3,value:1.25,isSelect:!1},{name:"--iw 1.5 相似度70%",id:4,value:1.5,isSelect:!1},{name:"--iw 1.75 相似度80%",id:5,value:1.75,isSelect:!1},{name:"--iw 2 相似度90%",id:6,value:2,isSelect:!1}],q=s(K[M.value].value),J=s(0),X=s(""),Y=s(""),Z=s(0);function W(){D("s",Z.value)}const $=s(0);function le(){D("c",$.value)}const te=s(0);function ie(){D("weird",te.value)}function se(){}o(X,(e=>{D("no",X.value)}));const oe=s();function ne(){oe.value>100?oe.value=100:oe.value<0&&(oe.value=0),D("cwValue",oe.value)}const Rl=s([]),Wl=s([]);const $l=s([]);const ea=s("/api/file/upload");async function la(e=1){let l;if(1===e){if(l=await _(),!l)return void T.error("选择文件错误")}else l=e;const a=new FormData;a.append("file",l),await b.post(ea.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;if(0!=Rl.value.filter((l=>l.src==e)).length)return void T.error("不可重复上传相同的图片");Rl.value.push({src:e,cwIsShow:!1,swIsShow:!1,swValue:"",swinpIsShow:!1}),D("matsList",e)}1!==e&&z.updateRecordDialog(!1)}))}const aa=s(""),ta=s({Setwidth:1,Setheight:1});function ia(){}o(ta.value,(e=>{if(console.log("数据发生变化",e),"自定义"==aa.value){let l=Number(e.Setwidth)+":"+Number(e.Setheight);D("ar",l)}}));const sa=[{name:"头像框",value:"1:1",width:"16px",height:"16px",id:0},{name:"手机壁纸",value:"1:2",width:"12px",height:"24px",id:1},{name:"电脑壁纸",value:"16:9",width:"20px",height:"12px",id:2},{name:"宣传海报",value:"9:16",width:"12px",height:"20px",id:3},{name:"文章配图",value:"4:3",width:"22px",height:"17px",id:4},{name:"媒体配图",value:"3:4",width:"17px",height:"22px",id:5},{name:"横板名片",value:"3:2",width:"23px",height:"16px",id:6},{name:"小红书",value:"2:3",width:"16px",height:"23px",id:7},{name:"自定义",value:"",width:"",height:"",id:8,iconD:H,iconL:R}],oa=s(0),na=s(!1);const ra=[{name:"1x - 默认",id:0,isSelect:!0,value:1},{name:"0.25x",id:1,isSelect:!1,value:.25},{name:"0.5x",id:2,isSelect:!1,value:.5}],da=s(ra[oa.value].value),ua=s([]),pa=s(0);n({page:1,size:20,type:"style"}).then((e=>{let l=e.data.filter((e=>2==e.level));ua.value=l,ga(ua.value[0].pid)}));const ca=s();const va=s([]);function ga(e){r({id:e}).then((e=>{e.data.rows.length&&(va.value=e.data.rows[0].children)}))}return(e,l)=>(w(),d("div",re,[u("div",de,[u("div",ue,[V.value?(w(),d("img",pe)):(w(),d("img",ce)),ve]),u("img",{src:ee,alt:"",onClick:l[0]||(l[0]=l=>e.$emit("close",!1)),style:{cursor:"pointer"}})]),u("div",ge,[u("div",xe,[me,u("div",fe,[(w(!0),d(p,null,c(ua.value,((e,l)=>(w(),d("div",{class:k(pa.value==l?"styleItemSelect":"styleItem"),onClick:e=>function(e){pa.value=e,ga(ua.value[e].pid)}(l),key:e.id},m(e.classifyName),11,ye)))),128))],512),u("div",he,[(w(!0),d(p,null,c(va.value,((e,l)=>(w(),d("div",{class:k(ca.value==l?"styleImgItemSelect":"styleImgItem"),onClick:a=>function(e){let{incantationEn:l}=e.item;ca.value=e.index,D("incantationCn",l)}({item:e,index:l})},[u("div",we,m(e.incantationCn),1),u("img",{src:e.img,alt:""},null,8,ke)],10,be)))),256))])]),u("div",Ce,[Fe,Ae,u("div",Ee,[(w(!0),d(p,null,c(Rl.value,((e,a)=>(w(),d("div",{class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",key:a,style:{position:"relative","margin-left":"4px"}},[""!=e.src?(w(),d("div",{key:0,style:{display:"flex","justify-content":"center","align-items":"center"},class:"title dark:bg-[#111113] bg-[#FFFFFF] dark:text-[#10A37F] text-[#10A37F]",onClick:l[1]||(l[1]=e=>la(1))},[u("img",{src:e.src,alt:""},null,8,Ie)])):(w(),d("div",{key:1,class:"title dark:bg-[#111113] bg-[#FFFFFF] dark:text-[#10A37F] text-[#10A37F]",style:{padding:"40px 0"},onClick:l[2]||(l[2]=e=>la(1))},"点击上传")),u("div",{style:C([{position:"absolute",width:"100%",bottom:"0"},e.src?"opacity: 0.9;":""])},[u("div",Be,[e.swIsShow?(w(),d("div",{key:0,style:{"font-size":"12px",padding:"4px 12px",width:"56px","border-radius":"8px",color:"#fff","text-align":"center",cursor:"pointer"},class:"bg-[#86CFB5] dark:bg-[#1E6953]",onClick:l=>function(e){e.swinpIsShow=!0,setTimeout((()=>{j((()=>{N.value[0].focus()}))}),100)}(e)},[e.swinpIsShow?y((w(),d("input",{key:0,onBlur:l=>function(e){e.swinpIsShow=!1}(e),ref_for:!0,ref_key:"refInput",ref:N,"onUpdate:modelValue":l=>e.swValue=l,style:{width:"100%","background-color":"transparent"},type:"text",onInput:l=>function(e){e.swValue>100?e.swValue=100:e.swValue<0&&(e.swValue=0),D("swValue",e.swValue)}(e)},null,40,je)),[[h,e.swValue]]):(w(),d("p",Te,m(e.swValue?e.swValue:"权重"),1))],8,Se)):(w(),d("div",ze)),u("div",_e,[Ue,v(g(F),{size:"small",disabled:0==e.swIsShow&&3==Wl.value.length,value:e.swIsShow,"onUpdate:value":[l=>e.swIsShow=l,l=>function(e){1==e.swIsShow?Wl.value.push(e.src):0==e.swIsShow&&Wl.value.forEach((l=>{l==e.src&&(Wl.value=Wl.value.filter((l=>l!=e.src)))})),D("stylesList",Wl.value)}(e)]},null,8,["disabled","value","onUpdate:value"])])]),u("div",Ve,[e.cwIsShow?(w(),d("div",{key:0,style:{"font-size":"12px",padding:"4px 12px",width:"56px","border-radius":"8px",color:"#fff","text-align":"center"},class:"bg-[#86CFB5] dark:bg-[#1E6953]",onClick:G},[Q.value?y((w(),d("input",{key:0,type:"text",onBlur:O,ref_for:!0,ref_key:"refInput1",ref:P,"onUpdate:modelValue":l[3]||(l[3]=e=>oe.value=e),style:{width:"100%","background-color":"transparent"},onInput:ne},null,544)),[[h,oe.value]]):(w(),d("p",De,m(oe.value?oe.value:"--cw"),1))])):(w(),d("div",Me)),u("div",Le,[Qe,v(g(F),{size:"small","onUpdate:value":[l=>function(e){console.log(e),1==!e.cwIsShow&&(1==$l.value.length&&($l.value=[],Rl.value.forEach((e=>{e.cwIsShow=!1}))),$l.value.push(e.src),console.log($l.value)),D("rolesList",$l.value)}(e),l=>e.cwIsShow=l],value:e.cwIsShow},null,8,["onUpdate:value","value"])])])],4)])))),128)),u("div",Oe,[u("div",{class:"title dark:bg-[#111113] bg-[#FFFFFF] dark:text-[#10A37F] text-[#10A37F]",style:{padding:"40px 0"},onClick:l[4]||(l[4]=e=>la(1))},"点击上传"),u("div",Ne,[u("div",Pe,[Ge,u("div",Ke,[qe,v(g(F),{size:"small",disabled:""})])]),u("div",Je,[Xe,u("div",Ye,[Ze,v(g(F),{size:"small",disabled:""})])])])])]),u("div",null,[u("div",{onClick:l[5]||(l[5]=e=>L.value=!L.value),style:{display:"flex",cursor:"pointer","max-width":"50%",width:"100%",padding:"8px","border-radius":"8px","justify-content":"space-between","margin-top":"6px",position:"relative"},class:"border dark:bg-[#111113] dark:border-[#292A2E] bg-[#fff] border-[#E8E8E8]"},[u("div",He,[Re,v(g(A),{trigger:"hover",placement:"top"},{trigger:x((()=>[We])),default:x((()=>[$e])),_:1})]),u("div",el,[u("p",ll,m(K[M.value].name),1),al]),L.value?(w(),d("div",tl,[(w(),d(p,null,c(K,(e=>u("div",{class:"iwItem",style:C(M.value==e.id?"color:#7369E2":""),key:e.id,onClick:l=>function(e){M.value=e.id,q.value=e.value,D("iwValue",q.value)}(e)},m(e.name),13,il))),64))])):f("",!0)])])]),u("div",sl,[ol,nl,u("div",rl,[(w(),d(p,null,c(sa,(e=>u("div",{class:k([J.value==e.id?"dark:bg-[#101C18] dark:border-[#1E6953] bg-[#F3FBF8] border-[#86CFB5]":"dark:border-[#292A2E] dark:bg-[#111113] border-[#E8E8E8] bg-[#FFFFFF]","sizeItem border"]),key:e.id,onClick:l=>function(e){J.value=e.id,aa.value=e.name,"自定义"!=e.name&&D("ar",e.value)}(e)},[u("div",ul,[""!=e.width&&""!=e.height?(w(),d("div",{key:0,style:C({width:e.width,height:e.height}),class:k(["size border",J.value==e.id?"border-[#86CFB5] dark:border-[#1E6953]":"dark:bg-[#19191B] dark:border-[#46484F] bg-[#F8F9F9] border-[#CDCECE]"])},null,6)):(w(),d("img",{key:1,src:V.value?e.iconD:e.iconL,alt:""},null,8,pl))]),""!=e.value?(w(),d("p",cl,m(e.value),1)):(w(),d("div",vl,[y(u("input",{onClick:E(ia,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":l[6]||(l[6]=e=>ta.value.Setwidth=e),class:"bg-[#F0F0F0] dark:bg-[#222325]",type:"text"},null,512),[[h,ta.value.Setwidth]]),gl,y(u("input",{onClick:E(ia,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":l[7]||(l[7]=e=>ta.value.Setheight=e),class:"bg-[#F0F0F0] dark:bg-[#222325]",type:"text"},null,512),[[h,ta.value.Setheight]])])),u("p",null,m(e.name),1)],10,dl))),64))])]),u("div",xl,[ml,u("div",fl,[y(u("textarea",{onInput:se,class:"inp","onUpdate:modelValue":l[8]||(l[8]=e=>X.value=e),name:"",id:"",cols:"30",rows:"10",placeholder:"输入不想出现在图像中的内容（例如树木，0/200）"},null,544),[[h,X.value]]),u("p",{style:{"text-align":"end","margin-top":"8px",cursor:"pointer","font-size":"12px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]",onClick:l[9]||(l[9]=e=>X.value="")},"清空")])]),u("div",yl,[hl,u("div",bl,[wl,y(u("input",{class:"inp dark:bg-[#222325] bg-[#F0F0F0]",type:"text","onUpdate:modelValue":l[10]||(l[10]=e=>Y.value=e)},null,512),[[h,Y.value]])]),u("div",kl,[u("div",Cl,[Fl,v(g(A),{trigger:"hover",placement:"top"},{trigger:x((()=>[Al])),default:x((()=>[El])),_:1})]),u("div",Il,[v(g(I),{style:{width:"123px"},value:Z.value,"onUpdate:value":l[11]||(l[11]=e=>Z.value=e),step:1,onDragend:W},null,8,["value"]),u("p",null,m(Z.value),1)])]),u("div",Bl,[u("div",Sl,[jl,v(g(A),{trigger:"hover",placement:"top"},{trigger:x((()=>[Tl])),default:x((()=>[zl])),_:1})]),u("div",_l,[v(g(I),{style:{width:"123px"},value:$.value,"onUpdate:value":l[12]||(l[12]=e=>$.value=e),step:1,onDragend:le},null,8,["value"]),u("p",null,m($.value),1)])]),u("div",Ul,[Vl,u("div",{class:"selectQuelity dark:bg-[#222325] bg-[#F0F0F0]",onClick:l[13]||(l[13]=e=>na.value=!na.value)},[u("p",Dl,m(ra[oa.value].name),1),Ml,na.value?(w(),d("div",Ll,[(w(),d(p,null,c(ra,(e=>u("div",{class:"",onClick:l=>function(e){oa.value=e.id,da.value=e.value,D("q",da.value)}(e),style:C([{padding:"4px 0"},oa.value==e.id?"color:#7369E2":""]),key:e.id},m(e.name),13,Ql))),64))])):f("",!0)])]),u("div",Ol,[u("div",Nl,[Pl,v(g(A),{trigger:"hover",placement:"top"},{trigger:x((()=>[Gl])),default:x((()=>[Kl])),_:1})]),u("div",ql,[v(g(I),{style:{width:"123px"},value:te.value,"onUpdate:value":l[14]||(l[14]=e=>te.value=e),step:1,onDragend:ie},null,8,["value"]),u("p",null,m(te.value),1)])])]),u("div",Jl,[Xl,u("div",Yl,[Zl,v(g(F),{style:{"margin-left":"8px"},size:"small"})]),Hl])])]))}}),[["__scopeId","data-v-31358218"]]),Wl=e=>(B("data-v-f3772e2a"),e=e(),S(),e),$l={class:"sendBox bg-[#F8F9F9] dark:bg-[#19191B]"},ea={class:"topBox"},la={style:{display:"flex"}},aa={class:"translatr",style:{display:"flex","align-items":"center"}},ta=Wl((()=>u("p",{style:{"margin-right":"4px"}},"自动翻译",-1))),ia={style:{display:"flex","background-color":"#38393E",padding:"2px","border-radius":"20px","font-size":"12px"}},sa={class:"borderBox"},oa={class:"inputBox"},na={key:0,style:{width:"100%",padding:"12px",height:"300px",position:"absolute",bottom:"100px",left:"0","border-radius":"12px 12px 0 0"},class:"border dark:border-[#27272A] border-[#E7E7E7] bg-[#F8F9F9] dark:bg-[#19191B]"},ra={style:{display:"flex","justify-content":"space-between"}},da=Wl((()=>u("p",null,"推荐关键词",-1))),ua={style:{"overflow-y":"auto",height:"90%","overflow-x":"hidden"}},pa=["onClick"],ca=["src"],va={style:{width:"100%","margin-left":"4px"}},ga={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis"}},xa={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",width:"90%"}},ma={style:{width:"100%"}},fa={class:"submitBox"},ya={class:"btnBox"},ha={key:0,style:{display:"flex"}},ba=[Wl((()=>u("img",{src:"/static/svg/submit-f29501d6.svg",alt:""},null,-1))),Wl((()=>u("p",{style:{"margin-left":"4px",color:"#fff","font-size":"13px"}},"提交",-1)))],wa={key:1,class:"loader"},ka=T(e({__name:"submitTask",props:{mode:String,isSuccess:Boolean,handleprompt:String},emits:["submit"],setup(e,{emit:t}){const n=s(""),r=s(),x=s(),b=s(),A=s(),E=s(),I=s();z({keys:["dialogueTail","robotAvatar","mjModel","relax_mjDeduction1","relax_mjDeduction2","fast_mjDeduction1","fast_mjDeduction2","trubo_mjDeduction1","trubo_mjDeduction2","fast_vip_free","relax_vip_free","trubo_vip_free"]}).then((e=>{const{relax_mjDeduction1:l,fast_mjDeduction1:a,trubo_mjDeduction1:t,fast_vip_free:i,relax_vip_free:s,trubo_vip_free:o}=e.data;r.value=Number(l),x.value=Number(a),b.value=Number(t),A.value=Number(i),E.value=Number(s),I.value=Number(o),n.value=e.data.mjModel}));const B=s();function S(){D().then((e=>{B.value=e.data}))}_((()=>{S()}));const j=s(0),T=s(0),M=s(""),L=s({translate:T.value,prompt:"",styles:[],roles:[],iw:.25,sw:0,cw:0,extend:"",mode:1,mats:[],action:X.TEXT_TO_IMAGE}),Q=t,O=s([]);U({page:1,size:20}).then((e=>{O.value=e.data.rows}));const N=e;function P(){L.value.prompt=M.value,M.value?R.value=!1:R.value=!0}function G(e){M.value=e,L.value.prompt=e}o(N,(e=>{console.log(e),e.isSuccess?(M.value="",Ae.value=!1,j.value++,S()):e.handleprompt&&(M.value=e.handleprompt,L.value.prompt=e.handleprompt)})),a();const K=s(!1),q=l(),J=i((()=>"dark"===q.theme));s(0),s(!1);const Y=s("--fast"),Z=s(1);function H(e){0==e?(Z.value=0,L.value.mode=2,Y.value="--relax"):1==e&&(Z.value=1,L.value.mode=1,Y.value="--fast")}const R=s(!1);function W(){M.value?R.value=!1:R.value=!0}const $=s(),ae=s(),se=()=>{$.value.open()},oe=()=>{ae.value.open()},ne=s(!1);function re(){ne.value=!ne.value,ne.value?(T.value=1,L.value.translate=1):(T.value=0,L.value.translate=0)}function de(e){L.value.styles=e}function ue(e){L.value.roles=e}const pe=s([]);function ce(e){pe.value.push(e)}function ve(e){L.value.iw=e}function ge(e){L.value.sw=Number(e)}function xe(e){L.value.cw=Number(e)}const me=s({ar:"",no:"",s:"",c:"",q:"",weird:""});function fe(e){let l="--ar "+e;me.value.ar=l}function ye(e){let l="--no "+e;me.value.no=l}function he(e){let l="--s "+e;me.value.s=l}function be(e){let l="--c "+e;me.value.c=l}function we(e){let l="--q "+e;me.value.q=l}function ke(e){let l="--weird "+e;me.value.weird=l}const Ce=s("");function Fe(e){Ce.value=e||""}const Ae=s(!1);function Ee(){if(!M.value)return;if(1==Ae.value)return;Ae.value=!0;const{roles:e,styles:l}=L.value;L.value.mats=[],Ce.value&&(L.value.prompt=L.value.prompt+" "+Ce.value),pe.value.forEach((a=>{-1==e.indexOf(a)&&-1==l.indexOf(a)&&L.value.mats.push(a)}));const{ar:a,c:t,no:i,q:s,s:o,weird:n}=me.value;L.value.extend=`${i?i+" ":""}${N.mode?N.mode+" ":""}${a?a+" ":"--ar 1:1 "}${s?s+" ":"--q 1 "}${o?o+" ":"--s 0 "}${t?t+" ":"--c 0 "}${n||""}${Y.value?Y.value+" ":""}`;let r={params:L.value,type:X.TEXT_TO_IMAGE};Q("submit",r)}return(e,l)=>(w(),d("div",$l,[v(te,{ref_key:"inspirationRef",ref:$,onTextToImg:G,type:"mj"},null,512),v(ie,{ref_key:"thinkRef",ref:ae,onTextToImg:G,type:"mj"},null,512),u("div",{class:k(K.value?"setParameter":"setParameter1")},[(w(),V(Rl,{key:j.value,onClose:l[0]||(l[0]=e=>K.value=!1),onStylesList:de,onRolesList:ue,onIwValue:ve,onSwValue:ge,onCwValue:xe,onAr:fe,onNo:ye,onS:he,onC:be,onQ:we,onWeird:ke,onMatsList:ce,onIncantationCn:Fe}))],2),u("div",ea,[u("div",la,[u("div",{onClick:oe,style:{padding:"0 6px","border-radius":"4px",height:"20px","line-height":"20px","background-color":"#4E5058","font-size":"12px","margin-right":"12px",cursor:"pointer"}}," AI联想"),u("div",aa,[ta,v(g(F),{"onUpdate:value":re,size:"small"})])]),u("div",ia,[u("div",{style:C([{padding:"0 8px",height:"20px","border-radius":"12px",cursor:"pointer"},0==Z.value?"background-color: #23A559;":"background-color: #38393E;color:#A9ABB1;"]),onClick:l[1]||(l[1]=e=>H(0))}," 慢速",4),u("div",{style:C([{padding:"0 8px",height:"20px","border-radius":"12px",cursor:"pointer"},1==Z.value?"background-color: #23A559;":"background-color: #38393E;color:#A9ABB1;"]),onClick:l[2]||(l[2]=e=>H(1))}," 快速",4)])]),u("div",sa,[u("div",oa,[R.value?(w(),d("div",na,[u("div",ra,[da,J.value?(w(),d("img",{key:0,style:{cursor:"pointer"},onClick:l[3]||(l[3]=e=>R.value=!1),src:ee,alt:""})):(w(),d("img",{key:1,style:{cursor:"pointer"},onClick:l[4]||(l[4]=e=>R.value=!1),src:le,alt:""}))]),u("div",ua,[(w(!0),d(p,null,c(O.value,(e=>(w(),d("div",{onClick:l=>function(e){R.value=!1,M.value=e.suggestEn,L.value.prompt=e.suggestEn}(e),class:k(J.value?"item":"item1"),style:{"margin-top":"12px",display:"flex",padding:"8px",width:"100%","align-items":"center",cursor:"pointer"},key:e.id},[u("img",{style:{width:"50px",height:"50px"},src:e.image,alt:""},null,8,ca),u("div",va,[u("div",ga,m(e.suggestCn),1),u("div",xa,m(e.suggestEn),1)])],10,pa)))),128))])])):f("",!0),u("div",ma,[y(u("textarea",{onInput:P,onFocus:W,"onUpdate:modelValue":l[5]||(l[5]=e=>M.value=e),type:"text",class:"inp dark:text-[#A1A8B4] text-[#8B8C8C]",placeholder:"在此描述画面的关键词，注意不要在此填入萝莉、性感、血腥等敏感词内容，否则100%不会出图",style:{resize:"none",height:"40px"}},null,544),[[h,M.value]])]),u("div",fa,[u("img",{style:{"margin-right":"12px",cursor:"pointer"},src:"/static/svg/submitSetting-d29c8bec.svg",alt:"",onClick:l[6]||(l[6]=e=>K.value=!K.value)}),u("img",{style:{"margin-right":"12px",cursor:"pointer"},src:"/static/svg/submitBot-16c85ce6.svg",alt:"",onClick:se}),u("div",ya,[u("div",{class:"btn dark:bg-[#23A559] bg-[#10A37F]",onClick:Ee,style:C(M.value?"":"cursor: not-allowed;")},[Ae.value?(w(),d("div",wa)):(w(),d("div",ha,ba))],4)])])])])]))}}),[["__scopeId","data-v-f3772e2a"]]),Ca={style:{display:"flex",height:"calc(100vh - 68px)",overflow:"hidden"}},Fa={style:{flex:"1",display:"flex","flex-direction":"column"},class:"contentBox border-l dark:border-[#2A2C30] border-[#EBEBEB] dark:bg-[#1B1C22] bg-[#F8F9F9]"},Aa=(e=>(B("data-v-27074877"),e=e(),S(),e))((()=>u("div",{style:{padding:"10px 15px",display:"flex","align-items":"center",background:"#24252B","border-radius":"6px"}},[u("img",{style:{width:"18px",height:"14px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAfCAYAAACVgY94AAAAAXNSR0IArs4c6QAABV9JREFUWEfNmH9oVWUYx7/f95x77rxO90OdJmLN5qbL6g8tCysmbkpCfyiNKMysaHM6LZybCUGzKFulpMZoMkpYRCBEf0ShK1iCtCghKpqTcoEibnObcz/03nvO+9Q5u1fv3e7mfome++d9zzmf9/k+z/d9nkPczqsyz8xp9a2jwlvQ0BDZenrO9ydQCR3F4m3jKyw0cmZ1FhCsArkEwj4Cb3bbHTUXDp/qv72AMXDiwbk/Nopwx5lPjv0K3MII3rMpL8kIWLMsm3ZT1/Q2HD3qxKmUl2fm5PrzCacqCkdBI8iK0+0pPw9eP3kSV0LdfeHx2X5f0npFeVk0LsNhRXNN/SkAEoFUWSX5D/vIak0+6MXNg0PF6YzjjbG5N6kSLyjKT7FMLodiESArAaRDpAeQvV1XjIOtdcf73BfOLVoamG6kb4aSPSJqys3g3HsmFEFPzunIMsXcSOEzLgMAM7L7PgH2o7//g+ZPT/ZEI7hw6+qHlJb33BeL4I3mOfU/JYrcxCIYldO01tFgMTWzQARE4JAICpBEiFuJ+5S2P/yruqH3eh66ObjAl6FMJU1zj7WOBDeuCEblFMUiRuQUQBPSDpFfQBUGUBBJu6GAY/S1OIlzC3Ot4Ix5qT6EAmJaQ+QP6lCK3zCfi5dTeh3gDwP4mKJPCtUmCMpAL30mDZA5pQV3iWAtiacAuY+git2sW4YCmEoww5UTkLAIzlHJ50Glv2i5euXsvKmWGQgllyuifDIjyAXbn8gytfU2hfkAUkkYwykhIgLyEgU/apEDJuzfojmWuyUvWStzJ4CyyP0Tj2B2Ud5M8ZsVhrBEgGQAfQLpVKCdCFIg54WoDV+VYy21P7TFeBziAb06nTjgwpJV+UqpGhKZAlwW4rOQEa7z21Z34ihKsDnU2Y7Dp9xiiLvGBVhYaCxOu5KhLUmKfZgK8VoTLl3i4q0Fu4TYBWCqBr5yNCv+qT5+bozF5i0fB6DK3rxmGQ3ZS0hmfM6zBQ7e4aLS/EMi2ESSAvmoJ9T1bmw3MRbQsQJeP1kolSCnxb1LpIfAQWaX5ldC8BrBZCj5xnbUtjsqgveWrlxh0DhCYRaATi1SbZty1HKM6PE0KIgSdGh2/H3ou+DwOciyUdvMzXJwfsljaX7Tv1sJtxAMQKQXRBfA+DYpQiOCC1pQZ/v01y0HhqviMQDeJIdcL4j4oC/igxzRB+H6oGIHhN9Co0Yh9Pst9cHIBuJOEgL3u4YtQErkwO6GoFsoimA6BvwyJILzQqkD7C81p7T0B9uMZF/qTkWWT5pRx0Y4ehYbJtIVnVcgLPb+p9Q4DmsdBdMSeRpUGwDMA2C5KaGJPwmpDSvWWzZeBCf/LI7LBLfP8yebZRTPHyFEVbDX3vfvkYZrnpXAekArXUxyLbXMGNgEWkV4gvT6wdWjLpJR5OCQJTf8zE12D3HwkcXMV1dlmCG1joa8oIAlcG0KEgYYHk0/6D61eX79xXH1g6MA9LCztj3pt+VqZhKNZ0WrDWRE9oFdJeyos7etWaZsXQUoiOjxddSjBYyGPio7oIthcC0GZO9NNJOkmGnF/9vAHiEC1GgUkV0jtf0JZ5Kcl1ZMQyBQTmCHJ/DQ2SJR5niyWzbXU7hRoPrg6NcHT3Xe2auwD5BH3ZaWQKM4w0MmBJz9/OqpacnYDqV3u1JAO3u7em9MZyPltSu7CgdnGtqnm84E29HQEN+2FRYai2Z1LyekSoPxkB2pjaOdi5lTXLAUprzvAdoyeL4dSw8xdG0l1KK21Y/EQsKTeyxfFiLTl1dtZ8NtQyIxMURgECSB/jvn20x0cy7kxfwCkPvhdntalw7+uvUfABYpEjYv/foAAAAASUVORK5CYII=",alt:""}),u("p",{style:{"margin-left":"13px",color:"#2E8953","font-size":"14px"}}," 请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有则违规封号处理。 ")],-1))),Ea={key:0},Ia={key:1},Ba={style:{width:"100%","text-align":"center",display:"flex","justify-content":"center","margin-top":"15px"}},Sa={style:{color:"#eeeeee","font-size":"13px"},class:"end"},ja={style:{display:"flex",cursor:"default"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Ta={key:0,style:{display:"flex","margin-left":"8px"}},za=["href"],_a={key:1,style:{display:"flex","margin-left":"8px"}},Ua=["href"],Va=T(e({__name:"midjourney",setup(e){const l=s(""),t=s(""),n=s(""),r=s(""),g=s("");se({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{r.value=e.data.copyrightTitle,l.value=e.data.icpNumber,t.value=e.data.policeFilingNumber,n.value=e.data.icpUrl,g.value=e.data.policeFilingUrl}));const x=M(),y=i((()=>x.isLogin)),h=a(),b=s("");function k(e){console.log(e),b.value=e}const C=L(),F=s("textToImg");C.query.type&&(F.value=C.query.type);let A=!1;const E=s([]);let I=[];const B=s(!1),S=s(!1),T=s([]);let z=null;const U=async function(){try{z&&window.clearTimeout(z);(await J({jobIds:I.join()})).data.forEach((e=>{const l=T.value.findIndex((l=>l.id===e.id));-1!==l&&T.value.splice(l,1,e),e.status>=3&&(I=I.filter((l=>l!==e.jobId)))})),I.length?z=setTimeout((()=>U()),3e3):z&&window.clearTimeout(z)}catch(e){z=setTimeout((()=>U()),3e3)}};o(y,(async e=>{if(1==e){const e={page:1,size:10},l=await N(e);1===e.page&&(T.value=l.data.rows.reverse())}else T.value.length=0}));const D={page:1,size:10},Z=async function(e){try{S.value=!0;const l=await N(D);1===D.page?T.value=l.data.rows.reverse():T.value=l.data.rows.reverse().concat(T.value),console.log(T.value),I=T.value.filter((e=>[1,2].includes(e.status))).map((e=>e.jobId)),I.length&&U(),l.data.rows.length<D.size&&(B.value=!0),j(e?()=>{var e;null==(e=ae.value)||e.scrollTo({top:ae.value.scrollHeight,behavior:"smooth"}),E.value.length&&E.value[E.value.length-1].scrollIntoView(),setTimeout((()=>{A=!0}),100)}:()=>{var e;let a=0;for(let t=0;t<l.data.rows.length;t++){const l=null==(e=ae.value)?void 0:e.children[t];a+=(null==l?void 0:l.offsetHeight)||0}ae.value.scrollTop=a}),S.value=!1}catch(l){S.value=!1}},H=s(""),R=function(e){H.value=e},ee=s(),le=async function(e,l){ee.value=!1;try{let a=null;switch(e.type){case X.TEXT_TO_IMAGE:case X.IMAGE_ACTION:a=await q(e),G.emit("getUserInfo",!0);break;case X.IMAGE_MIX_IMAGE:case X.IMAGE_TO_TEXT:a=await K(e),G.emit("getUserInfo",!0);break;case X.INSIGHT_FACE:a=await P(e),G.emit("getUserInfo",!0)}if(a){const e=a.data;ee.value=!0;T.value.find((l=>l.id===e.id))||(T.value.push(e),j((()=>{var e;null==(e=ae.value)||e.scrollTo({top:ae.value.scrollHeight,behavior:"smooth"})}))),e.status<3&&!I.includes(e.jobId)&&(I.push(e.jobId),U())}l&&l(Boolean(null==a?void 0:a.success))}catch(a){h.error(a.message),ee.value=!0,l&&l(!1)}},ae=s(),te=function(e){const l=e.target;A&&l.scrollTop<=20&&(B.value||S.value||(D.page=D.page+1,Z()))};return Q((()=>{var e;null==(e=ae.value)||e.removeEventListener("scroll",te)})),_((()=>{var e;Z(!0),null==(e=ae.value)||e.addEventListener("scroll",te)})),(e,a)=>(w(),d("div",Ca,[u("div",Fa,[Aa,u("div",{ref_key:"scrollView",ref:ae,style:{flex:"1",overflow:"auto","margin-top":"10px"}},[y.value&&0!=T.value.length?(w(),d("div",Ea,[(w(!0),d(p,null,c(T.value,((e,l)=>(w(),V(Y,{type:"chat",task:e,key:e.jobId+"-"+e.status,onRemove:()=>function(e){T.value.splice(e,1)}(l),onAddTask:le},null,8,["task","onRemove"])))),128))])):(w(),d("div",Ia,[v($,{onHandleprompt:k})]))],512),u("div",null,[H.value?(w(),V(ka,{key:0,handleprompt:b.value,isSuccess:!!ee.value&&ee.value,mode:H.value,onSubmit:le},null,8,["handleprompt","isSuccess","mode"])):f("",!0)]),u("div",Ba,[u("div",Sa,[u("div",ja,[O("版权所有 © "+m(r.value)+" ",1),l.value?(w(),d("div",Ta,[u("a",{href:n.value||"#"},m(l.value),9,za)])):f("",!0),t.value?(w(),d("div",_a,[u("a",{href:g.value||"#"},m(t.value),9,Ua)])):f("",!0)])])])]),v(W,{onMjVersionChange:R,isSuccess:!!ee.value&&ee.value,type:"mj",drawType:F.value,onSubmitData:le},null,8,["isSuccess","drawType"])]))}}),[["__scopeId","data-v-27074877"]]);export{Va as default};
