import{e,a7 as a,j as s,r as t,N as l,O as i,P as r,ao as o,a4 as n,$ as d,a1 as p,aj as c,R as u,A as m,k as v,bA as g,U as y,Z as x,_ as f,ak as k,bB as h,a0 as b}from"../main-6c725c30.js";import{b as w,D as j,n as _}from"../index/index.cc63bc94.js";import{a as B,_ as F}from"../draw-fail/draw-fail.ad8fd01b.js";import"../baiduThink/baiduThink.9c8f3a5e.js";import"../useUpload/useUpload.94c17c32.js";import"../index/index.27c727e8.js";import"../index/index.5b75f753.js";const D={class:"dallTaskBox"},E=["src"],T={class:"dallTaskItem bg-[#F8F9F9] dark:bg-[#111113]",style:{padding:"12px","border-radius":"12px",display:"flex","margin-top":"12px"}},A={class:"avator"},L={class:"discord-avatar border border-[#E8E8E8] dark:border-[#2D2E33]"},C={key:0,src:w,alt:""},I={key:1,src:F,alt:""},P={class:"content",style:{"margin-left":"12px",width:"100%"}},U={style:{display:"flex","justify-content":"space-between"}},z={style:{display:"flex",width:"50px",cursor:"pointer"}},H={key:0,src:"/static/svg/Delete-4144aadd.svg",alt:""},O={key:1,src:"/static/svg/Delete copy-ae974714.svg",alt:""},G={class:"title",style:{"margin-top":"4px"}},N=["src"],R={key:1,style:{width:"20%",height:"246px",display:"flex","justify-content":"center","align-items":"center"}},Z={key:0,style:{display:"flex","flex-direction":"column","align-items":"center"}},$={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},q=p(e({__name:"index",props:{task:{type:Object}},setup(e){const p=a(),c=s((()=>"dark"===p.theme)),u=e,m=t(!1),v=t("");return(e,a)=>(l(),i("div",D,[m.value?(l(),i("div",{key:0,onClick:a[1]||(a[1]=e=>{m.value=!1,v.value=""}),class:"mask"},[r("img",{src:v.value,style:{width:"auto",height:"90%"},alt:"",onClick:a[0]||(a[0]=o((()=>{}),["stop"]))},null,8,E)])):n("",!0),r("div",T,[r("div",A,[r("div",L,[c.value?(l(),i("img",C)):(l(),i("img",I))])]),r("div",P,[r("div",U,[a[4]||(a[4]=r("div",{style:{display:"flex","align-items":"center"}},[r("span",{class:"discord-en"},"DALL"),r("span",{class:"discord-cn dark:bg-[#101C18] bg-[#F3FBF8]"},"Ai机器人")],-1)),r("div",z,[c.value?(l(),i("img",O)):(l(),i("img",H)),a[3]||(a[3]=r("p",{style:{"font-size":"14px","margin-top":"3px","margin-left":"4px"}},"删除",-1))])]),r("div",G,d(u.task.prompt),1),r("div",null,[u.task.answer?(l(),i("img",{key:0,style:{width:"20%",height:"auto","margin-top":"12px",cursor:"pointer"},onClick:a[2]||(a[2]=e=>{return a=u.task,m.value=!0,void(v.value=a.thumbImg?a.thumbImg:a.answer);var a}),src:u.task.answer,alt:""},null,8,N)):(l(),i("div",R,[u.task.fail?(l(),i("div",Z,a[5]||(a[5]=[r("img",{src:B,alt:""},null,-1),r("p",{style:{"margin-top":"8px",color:"#D4237A"}},"绘画失败",-1)]))):(l(),i("div",$,a[6]||(a[6]=[r("div",{class:"loader"},null,-1),r("p",{style:{"margin-top":"12px"}},"生成中，请稍等...",-1)])))]))])])])]))}}),[["__scopeId","data-v-5948fc50"]]),J={class:"bg-[#F8F9F9] dark:bg-[#111113]",style:{display:"flex",padding:"12px","box-sizing":"border-box",height:"calc(100% - 60px)",overflow:"hidden"}},K={style:{flex:"1",display:"flex","flex-direction":"column","margin-left":"10px"},class:"contentBox border-l dark:border-[#2A2C30] border-[#EBEBEB] bg-[#fff] dark:bg-[#24252B]"},M=e({__name:"dall",setup(e){const a=c(),o=u(),n=s((()=>o.isLogin)),d=t(null);function p(){let e=d.value;e.scrollTo({top:e.scrollHeight+100,behavior:"smooth"}),console.log(e.scrollHeight)}m(n,(e=>{e&&F()})),v((()=>{setTimeout((()=>p()),300)}));const w=t([]);v((()=>{F()})),t(!1);const B={page:1,size:20,model:"DALL-E2"},F=async function(){const e=await g(B);w.value=e.data.reverse(),setTimeout((()=>p()),300)},D=t(!1);async function E(e){let s={id:0,prompt:e.prompt,answer:"",fail:!1};D.value=!0,w.value.push(s),setTimeout((()=>p()),300),await h(e).then((e=>{w.value[w.value.length-1].answer=e.data[0],D.value=!1,b.emit("getUserInfo",!0)})).catch((e=>{D.value=!1,w.value[w.value.length-1].fail=!0,a.error(e.message)}))}const T=t("");function A(e){T.value=e}return(e,a)=>(l(),i("div",J,[y(j,{type:"dall",makePrompt:T.value,isLoading:D.value,onDallprompt:E},null,8,["makePrompt","isLoading"]),r("div",K,[r("div",{style:{flex:"1","overflow-y":"auto",padding:"12px"},ref_key:"taskBox",ref:d},[n.value&&0!=w.value.length?(l(!0),i(x,{key:0},f(w.value,(e=>(l(),k(q,{key:e.id,task:e},null,8,["task"])))),128)):(l(),k(_,{key:1,onHandleprompt:A}))],512)])]))}});export{M as default};
