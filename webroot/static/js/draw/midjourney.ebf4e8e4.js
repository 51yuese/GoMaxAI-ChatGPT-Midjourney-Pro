import{e,w as a,x as t,B as l,p as i,k as s,g as r,r as n,aP as o,b3 as d,Z as u,v as p,q as v,bF as c,L as m,C as x,z as g,F as f,E as y,a2 as w,A as h,P as b,a0 as k,D as E,O as F,y as I,N as C,a4 as T,aD as A,bG as _,ai as $,G as j,ag as M,$ as S,bH as B,_ as z,ar as V,bI as D,bJ as U,a7 as P,a8 as N,aH as O,aI as G,Q as H,am as J,aK as L,bK as R,a5 as q,bL as X,n as W,an as K,ac as Y,I as Q,aV as Z,aF as ee,at as ae,ax as te,aw as le,av as ie,au as se}from"../main-b114ff11.js";import{a as re,M as ne}from"../index/index.27c727e8.js";import{M as oe}from"../index/index.ebc2964e.js";import{_ as de,a as ue}from"../close copy/close copy.08564ec3.js";import{_ as pe,b as ve}from"../baiduThink/baiduThink.f40970a8.js";import{F as ce}from"../FlashOutline/FlashOutline.3ae31454.js";import{C as me}from"../index/index.f026a9b2.js";import{C as xe,_ as ge,n as fe}from"../isVIP2/isVIP2.1f3c489e.js";import{f as ye}from"../music/music.eadc25d8.js";import{_ as we}from"../aiVideoGou/aiVideoGou.56a8a6eb.js";import{u as he}from"../useUpload/useUpload.c4974038.js";import"../draw-fail/draw-fail.ad8fd01b.js";import"../index/index.5b75f753.js";import"../index/index.8a2765df.js";import"./draw.323ce050.js";import"../HeartOutline/HeartOutline.d6f8e652.js";import"../Popconfirm/Popconfirm.5446b9cc.js";import"../police/police.deef576c.js";const be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ke=l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 328l144-144l144 144"},null,-1),Ee=[ke],Fe=e({name:"ChevronUp",render:function(e,l){return a(),t("svg",be,Ee)}}),Ie={ref:"setParameterRef",class:"sendBox border-transparent"},Ce={class:"borderBox dark:bg-[#3E6AE7] bg-[#E0E2E9]"},Te={class:"inputBox bg-[#fff] dark:bg-[#24252B]"},Ae={key:0,style:{width:"100%",padding:"12px",height:"300px",position:"absolute",bottom:"100px",left:"0","border-radius":"12px 12px 0 0"},class:"border dark:border-[#27272A] border-[#E7E7E7] bg-[#F8F9F9] dark:bg-[#19191B]"},_e={style:{display:"flex","justify-content":"space-between"}},$e={style:{"overflow-y":"auto",height:"90%","overflow-x":"hidden"}},je=["onClick"],Me=["src"],Se={style:{width:"100%","margin-left":"4px"}},Be={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis"}},ze={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",width:"90%"}},Ve={style:{width:"100%"}},De=["placeholder"],Ue={class:"submitBox flex w-[100%]"},Pe={style:{"flex-grow":"1",display:"flex",gap:"10px","padding-left":"20px"}},Ne={class:"ml2"},Oe={class:"ml2"},Ge={class:"translatr",style:{display:"flex","align-items":"center"}},He={style:{"margin-right":"4px"},class:"text-[#76798B] dark:text-[#fff]"},Je={class:"btnBox"},Le={key:0,class:"vipIcon",src:"/static/svg/isVIP1-b7a6f332.svg",alt:""},Re={key:1,style:{display:"flex","align-items":"center"}},qe={key:0,style:{color:"#fff"}},Xe={key:1,style:{color:"#fff"}},We={key:2,style:{color:"#fff"}},Ke={key:3,style:{color:"#fff"}},Ye={key:4,style:{display:"flex","align-items":"center",color:"#fff"}},Qe={style:{"font-size":"10px"}},Ze={key:5,style:{color:"#fff"}},ea={key:2,class:"loader"},aa=z(e({__name:"submitTask",props:{mode:String,isSuccess:Boolean,handleprompt:String},emits:["submit"],setup(e,{emit:z}){const V=i(),D=e,U=s(),P=r((()=>1===U.userInfo.lifetimeVip||U.userInfo.vipExpire&&new Date(U.userInfo.vipExpire)>new Date)),N=r((()=>U.userInfo.vipLeavelId));let O=n([]);o().then((e=>{O.value=e.data}));const G=z,H=d("mjBase"),J=n(""),L=n(),R=n(),q=n(),X=n(),W=n(),K=n(),Y=n(0),Q=n(0),Z=n(""),ee=n([]),ae=n(!1),te=u(),le=r((()=>"dark"===te.theme)),ie=n("--fast"),se=n(1),ne=n(),oe=n(!1),me=n(),xe=n(),ge=n(!1),fe=n([]),ye=n(!1);function we(){M().then((e=>{ne.value=e.data}))}function he(){H.mjParams.value.prompt=Z.value,Z.value?(oe.value=!1,ae.value=!1):oe.value=!0}function be(e){Z.value=e,H.mjParams.value.prompt=e}function ke(e){0==e?(se.value=0,H.mjParams.value.mode=2,ie.value="--relax"):1==e&&(se.value=1,H.mjParams.value.mode=1,ie.value="--fast")}function Ee(){Z.value?(oe.value=!1,ae.value=!1):oe.value=!0}p({keys:["dialogueTail","robotAvatar","mjModel","relax_mjDeduction1","relax_mjDeduction2","fast_mjDeduction1","fast_mjDeduction2","trubo_mjDeduction1","trubo_mjDeduction2","fast_vip_free","relax_vip_free","trubo_vip_free"]}).then((e=>{const{relax_mjDeduction1:a,fast_mjDeduction1:t,trubo_mjDeduction1:l,fast_vip_free:i,relax_vip_free:s,trubo_vip_free:r}=e.data;L.value=Number(a),R.value=Number(t),q.value=Number(l),X.value=Number(i),W.value=Number(s),K.value=Number(r),J.value=e.data.mjModel})),v((()=>{we()})),c({page:1,size:20}).then((e=>{ee.value=e.data.rows})),m(D,(e=>{console.log(e),e.isSuccess?(Z.value="",ye.value=!1,Y.value++,we()):e.handleprompt&&(Z.value=e.handleprompt,H.mjParams.value.prompt=e.handleprompt)}));const Fe=()=>{me.value.open()},aa=()=>{xe.value.thinks="",xe.value.open()};function ta(){ge.value=!ge.value,ge.value?(Q.value=1,H.mjParams.value.translate=1):(Q.value=0,H.mjParams.value.translate=0)}function la(e,a){const{roles:t,styles:l}=e,i=JSON.parse(JSON.stringify(e));i.mats=[],a||H.styleMode.value&&(i.prompt=i.prompt+" "+H.styleMode.value),fe.value.forEach((e=>{-1==t.indexOf(e)&&-1==l.indexOf(e)&&i.mats.push(e)})),t.length||(i.cw=0),t.length||l.length||delete i.iw;const{ar:s,c:r,no:n,q:o,s:d,weird:u}=a?H.defaultExtendArr.value:H.extendArr.value;return"--v 7"==D.mode?i.extend=`${n?n+" ":""}${D.mode?D.mode+" ":""}${s?s+" ":"--ar 1:1 "}${d?d+" ":"--s 0 "}${r?r+" ":"--c 0 "}${u||""}${ie.value?ie.value+" ":""}`:i.extend=`${n?n+" ":""}${D.mode?D.mode+" ":""}${s?s+" ":"--ar 1:1 "}${o?o+" ":"--q 1 "}${d?d+" ":"--s 0 "}${r?r+" ":"--c 0 "}${u||""}${ie.value?ie.value+" ":""}`,delete i.enabled,i}function ia(){if(na.value.isVipUsed&&-1===na.value.userType.indexOf(N.value)){let e=na.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=O.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void V.error(S("digitalMan.vipUse1")+a+S("digitalMan.vipUse1"))}if(!Z.value)return;if(1==ye.value)return;ye.value=!0;const{enabled:e}=H.mjParams.value;e&&(H.defaultMJParams.value.prompt=H.mjParams.value.prompt);let a={params:la(e?H.defaultMJParams.value:H.mjParams.value,e),type:re.TEXT_TO_IMAGE};G("submit",a),fe.value=[]}const sa=({focused:e,checked:a})=>{if(a){const a={background:"linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"};return e&&(a.boxShadow="0 0 0 2px #957df480"),a}};function ra(){var e;const{enabled:a}=H.mjParams.value;a&&(H.defaultMJParams.value.prompt=H.mjParams.value.prompt);let t={params:la(a?H.defaultMJParams.value:H.mjParams.value,a),type:1,botType:-1!==(null==(e=D.mode)?void 0:e.indexOf("niji"))?"NIJI_JOURNEY":"MID_JOURNEY"};B(t).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(na.value=e.data,oa.value=!1):oa.value=!0})).catch((e=>{oa.value=!0}))}const na=n({remainCount:0,freeCount:0,useIntegrate:0}),oa=n(!1);return m((()=>D.mode),((e,a)=>{console.log("props.mode",e),ra()}),{deep:!0,immediate:!0}),m((()=>Q.value),((e,a)=>{ra()}),{deep:!0,immediate:!0}),(e,i)=>(a(),t("div",Ie,[x(pe,{ref_key:"inspirationRef",ref:me,onTextToImg:be,type:"mj"},null,512),x(ve,{ref_key:"thinkRef",ref:xe,onTextToImg:be,type:"mj"},null,512),l("div",Ce,[l("div",Te,[oe.value&&ee.value.length?(a(),t("div",Ae,[l("div",_e,[l("p",null,g(e.$t("draw.recokeywords")),1),le.value?(a(),t("img",{key:0,style:{cursor:"pointer"},onClick:i[0]||(i[0]=e=>oe.value=!1),src:de,alt:""})):(a(),t("img",{key:1,style:{cursor:"pointer"},onClick:i[1]||(i[1]=e=>oe.value=!1),src:ue,alt:""}))]),l("div",$e,[(a(!0),t(f,null,y(ee.value,(e=>(a(),t("div",{onClick:a=>function(e){oe.value=!1,Z.value=e.suggestEn,H.mjParams.value.prompt=e.suggestEn}(e),class:w(le.value?"item":"item1"),style:{"margin-top":"12px",display:"flex",padding:"8px",width:"100%","align-items":"center",cursor:"pointer"},key:e.id},[l("img",{style:{width:"50px",height:"50px"},src:e.image,alt:""},null,8,Me),l("div",Se,[l("div",Be,g(e.suggestCn),1),l("div",ze,g(e.suggestEn),1)])],10,je)))),128))])])):h("",!0),l("div",Ve,[b(l("textarea",{onInput:he,onFocus:Ee,"onUpdate:modelValue":i[2]||(i[2]=e=>Z.value=e),type:"text",class:"inp dark:text-[#A1A8B4] text-[#767676]",placeholder:e.$t("draw.inputWarning1"),style:{resize:"none",height:"40px"}},null,40,De),[[k,Z.value]])]),l("div",Ue,[l("span",Pe,[x(I(_),null,{default:E((()=>[1==se.value?(a(),F(I(A),{key:0,bordered:!1,"text-color":"#767676",style:{background:"#F2F3F7"},onClick:i[3]||(i[3]=e=>ke(0))},{icon:E((()=>[x(I(C),{color:"#767676"},{default:E((()=>[x(I(ce))])),_:1})])),default:E((()=>[T(" "+g(e.$t("draw.quickModel")),1)])),_:1})):h("",!0),0==se.value?(a(),F(I(A),{key:1,bordered:!1,"text-color":"#767676",style:{background:"#F2F3F7"},onClick:i[4]||(i[4]=e=>ke(1))},{icon:E((()=>[x(I(C),{color:"#767676"},{default:E((()=>[x(I(ce))])),_:1})])),default:E((()=>[T(" "+g(e.$t("draw.NormalModel")),1)])),_:1})):h("",!0)])),_:1}),l("div",{onClick:aa,class:"box2 bg-[#F2F3F7] dark:bg-[#4E5058]"},[i[5]||(i[5]=l("img",{src:"/static/svg/lx-58a22129.svg",alt:""},null,-1)),l("span",Ne,g(e.$t("draw.AIgenDesc")),1)]),l("div",{onClick:Fe,class:"bg-[#F2F3F7] dark:bg-[#4E5058] box2"},[i[6]||(i[6]=l("img",{src:"/static/svg/submitBot-e108dc09.svg",alt:""},null,-1)),l("span",Oe,g(e.$t("homePage.tips")),1)]),l("div",Ge,[l("p",He,g(e.$t("draw.automatic")),1),x(I($),{"onUpdate:value":ta,"rail-style":sa,size:"small"})])]),l("div",Je,[l("div",{class:"btn bg-gradient-to-r from-[#574FFE] to-[#726AFB]",onClick:ia,style:j(Z.value?"":"cursor: not-allowed;")},[na.value&&na.value.isVipUsed?(a(),t("img",Le)):h("",!0),ye.value?(a(),t("div",ea)):(a(),t("div",Re,[oa.value?(a(),t("span",qe,g(e.$t("draw.modelNotSet")),1)):I(U).isLogin?na.value&&na.value.isVipFree&&P.value?(a(),t("span",We,g(e.$t("chat.vipFree")),1)):na.value&&na.value.remainCount&&P.value?(a(),t("span",Ke,g(e.$t("draw.shenyu")+na.value.remainCount+e.$t("draw.chiFree")),1)):na.value?(a(),t("div",Ye,[l("span",null,g(e.$t("gpt.lijiGen")),1),l("span",Qe,"（"+g(na.value.useIntegrate+e.$t("chat.pointsChi"))+"）",1)])):(a(),t("span",Ze,g(e.$t("draw.gen")),1)):(a(),t("span",Xe,g(e.$t("draw.beginGen")),1))]))],4)])])])])],512))}}),[["__scopeId","data-v-8320824f"]]),ta="/static/svg/instantce-78a6b698.svg",la="/static/svg/mjMore-9acf549f.svg",ia="/static/svg/delImg copy-c829db94.svg",sa={class:"swi-p subsiderbar-class video_sub_sidebar bg-[#f2f2f5] dark:bg-[#222325]",style:{border:"none"}},ra={class:"scroll_card",style:{height:"100%","overflow-y":"scroll","padding-top":"44px"}},na={key:0,style:{"margin-top":"18px","border-radius":"5px",border:"1px solid #E0E2E9"}},oa={style:{padding:"10px 15px 12px"}},da={style:{"font-size":"14px"}},ua={style:{"margin-top":"4px","font-size":"12px",color:"#767676"}},pa={key:1,class:"textToImg"},va={style:{"margin-top":"10px"}},ca={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},ma={class:"dark:text-[#EEEEF0] text-[#000] text-[18px]",style:{"font-weight":"500","margin-right":"12px"}},xa={style:{width:"140px",position:"relative"},class:"customBox"},ga={key:0,class:"newModel"},fa={class:"custerSelect"},ya=["onClick"],wa={class:"name"},ha={key:0,class:"newModel"},ba={style:{"margin-top":"0px"}},ka={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ea={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},Fa={class:"style_card"},Ia={class:"styleBox",ref:"container"},Ca=["onClick"],Ta=["onClick"],Aa={class:"styleImgText"},_a=["src"],$a={class:"styleImgItem zero"},ja={class:"back"},Ma={style:{"margin-top":"20px"}},Sa={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ba={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},za={class:"sizeMain",style:{"margin-top":"11px"}},Va=["onClick"],Da={style:{display:"flex","align-items":"center"}},Ua={key:1,class:"text-[#b4b4b4] dark:text-[#b4b4b4]",style:{display:"flex"}},Pa={style:{"margin-top":"20px"}},Na={style:{display:"flex","align-items":"center","margin-bottom":"6px","justify-content":"space-between"}},Oa={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex gap-[6px]"},Ga={style:{"margin-top":"0px"}},Ha={style:{"margin-top":"0px",cursor:"pointer"},class:"uploadPic"},Ja={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},La={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Ra={style:{display:"flex","flex-wrap":"wrap",gap:"6px"}},qa=["onClick"],Xa=["src"],Wa={class:"uploadOther p1"},Ka=["onClick"],Ya=["onBlur","onUpdate:modelValue","onInput"],Qa={key:1,style:{"font-size":"12px"}},Za={key:1,style:{width:"1px",height:"1px"}},et={class:"swi-p",style:{display:"flex","align-items":"center",height:"14px"}},at={style:{"margin-right":"4px","font-size":"12px"}},tt={class:"uploadOther"},lt={key:1},it={key:1,style:{width:"1px",height:"1px"}},st={style:{display:"flex","align-items":"center",height:"14px"}},rt={style:{"margin-right":"4px","font-size":"12px"}},nt={class:"upload",style:{position:"relative","margin-left":"4px"}},ot={style:{"font-size":"13px",color:"#6A6A6A"}},dt={style:{"font-size":"14px",color:"#767676",display:"flex","align-items":"center","justify-content":"center"}},ut={class:"bot-p"},pt={class:"uploadOther"},vt={style:{display:"flex","align-items":"center",height:"12px"}},ct={style:{"margin-right":"4px","font-size":"12px"}},mt={class:"uploadOther"},xt={style:{display:"flex","align-items":"center",height:"14px"}},gt={style:{"margin-right":"4px","font-size":"12px"}},ft={style:{display:"flex"}},yt={style:{"margin-right":"4px"}},wt={style:{}},ht={style:{display:"flex","align-items":"center"}},bt={style:{"margin-right":"4px"}},kt={key:0,style:{position:"absolute",width:"100%",left:"0",top:"40px"},class:"dark:bg-[#383838] bg-[#fff] selectIW"},Et=["onClick"],Ft={style:{display:"flex","align-items":"center","margin-bottom":"6px","margin-top":"20px"}},It={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Ct={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},Tt={style:{"margin-top":"20px"}},At={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},_t={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},$t={class:"seedBox"},jt={style:{"margin-top":"20px"}},Mt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},St={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Bt={style:{}},zt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},Vt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Dt={style:{"flex-grow":"1"}},Ut={style:{"margin-top":"20px"}},Pt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Nt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Ot={style:{}},Gt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},Ht={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Jt={style:{"flex-grow":"1"}},Lt={style:{"margin-top":"20px"}},Rt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},qt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Xt={style:{"font-size":"12px"}},Wt={key:0,style:{position:"absolute",top:"30px",width:"100%",left:"0","z-index":"100",padding:"0 8px"},class:"dark:bg-[#222325] bg-[#F0F0F0]"},Kt=["onClick"],Yt={style:{"margin-top":"20px"}},Qt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Zt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},el={style:{}},al={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},tl={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},ll={style:{"flex-grow":"1"}},il={key:2,class:"ImgToTextBox"},sl={style:{display:"flex","margin-bottom":"6px"}},rl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},nl={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},ol={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},dl={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},ul={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},pl={class:"text-[12px] text-[#3e6ae7]"},vl={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},cl=["src"],ml={style:{"margin-top":"20px"}},xl={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},gl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},fl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},yl={key:3,class:"imgMixImg",style:{height:"calc(100vh - 54px)"}},wl={style:{display:"flex","margin-bottom":"6px"}},hl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},bl={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},kl={style:{display:"flex","flex-wrap":"wrap"}},El={style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},Fl=["src"],Il=["onClick"],Cl={class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]"},Tl={class:"text-[#000] dark:text-[#94989f]"},Al={style:{"margin-top":"20px"}},_l={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},$l={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},jl={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},Ml={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Sl={class:"sizeMain"},Bl=["onClick"],zl={style:{height:"40px",display:"flex","align-items":"center"}},Vl={style:{"margin-top":"20px"}},Dl={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ul={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Pl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Nl={key:4,class:"AIBox"},Ol={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},Gl={style:{"margin-top":"3px","font-size":"12px"}},Hl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Jl=["src"],Ll={key:1,class:"text-[#000] dark:text-[#94989f]"},Rl={style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ql={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},Xl={style:{"margin-top":"3px","font-size":"12px"}},Wl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Kl=["src"],Yl={key:1,class:"text-[#000] dark:text-[#94989f]"},Ql={style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Zl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ei={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},ai={style:{"margin-top":"3px","font-size":"12px"}},ti={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},li={key:5,class:"bottom dark:border-[#383737]"},ii={style:{padding:"0 12px",position:"absolute",bottom:"12px",left:"0px",width:"100%"}},si={key:0,class:"vipIcon",src:ge,alt:""},ri={key:0,style:{color:"#fff"}},ni={key:1,style:{color:"#fff"}},oi={key:2,style:{color:"#fff"}},di={key:3,style:{color:"#fff"}},ui={key:4,style:{display:"flex","align-items":"center",color:"#fff"}},pi={style:{"font-size":"10px"}},vi={key:5,style:{color:"#fff"}},ci=z(e({__name:"SubSidebar",props:{drawType:String},emits:["changeDataType","stylesList","rolesList","iwValue","swValue","cwValue","ar","no","s","c","q","weird","matsList","close","setEnabled","incantationCn","submitData"],setup(e,{emit:u}){const p=s(),v=r((()=>1===p.userInfo.lifetimeVip||p.userInfo.vipExpire&&new Date(p.userInfo.vipExpire)>new Date)),c=r((()=>p.userInfo.vipLeavelId));let F=n([]);o().then((e=>{F.value=e.data}));const _=e,M=r((()=>p.isLogin)),z=r((()=>p.userInfo));!z.value||!z.value.lifetimeVip||z.value.lifetimeVip;const Y=d("mjBase"),Q=n(!1);n(!1);const Z=n(_.drawType),ee=u,ae=i(),te=V(),{selectFile:le}=he(),ie=n(0),se=n(!1);function oe(e){Z.value=e,ee("changeDataType",Z.value)}n(!1);const de=n(!1);function ue(){de.value=!1}const pe=n(),ve=n();function ce(){de.value=!0,setTimeout((()=>{W((()=>{ve.value[0].focus()}))}),100)}const me=[{name:"--iw 0.25 "+S("draw.similarity")+"30%",id:0,value:.25,isSelect:!0},{name:"--iw 0.5 "+S("draw.similarity")+"40%",id:1,value:.5,isSelect:!1},{name:"--iw 1 "+S("draw.similarity")+"50%",id:2,value:1,isSelect:!1},{name:"--iw 1.25 "+S("draw.similarity")+"60%",id:3,value:1.25,isSelect:!1},{name:"--iw 1.5 "+S("draw.similarity")+"70%",id:4,value:1.5,isSelect:!1},{name:"--iw 1.75 "+S("draw.similarity")+"80%",id:5,value:1.75,isSelect:!1},{name:"--iw 2 "+S("draw.similarity")+"90%",id:6,value:2,isSelect:!1}],ge=n(me[ie.value].value),fe=n(0),ye=n(""),be=n(""),ke=n(0),Ee=n("200px"),Ie=n(""),Ce=n({Setwidth:1,Setheight:1}),Te=n(0),Ae=n(!1),_e=[{name:"1x",id:0,isSelect:!0,value:1},{name:"0.25x",id:1,isSelect:!1,value:.25},{name:"0.5x",id:2,isSelect:!1,value:.5}],$e=n(_e[Te.value].value),je=n(!1),Me=n([]),Se=n(0);function Be(){ee("s",ke.value)}const ze=n(0);function Ve(){ee("c",ze.value)}const De=n(0);function Ue(){ee("weird",De.value)}function Pe(){}m((()=>je.value),(e=>{ee("setEnabled",e)})),m(ye,(e=>{ee("no",ye.value)}));const Ne=n(10);function Oe(){Ne.value>100?Ne.value=100:Ne.value<0&&(Ne.value=0),ee("cwValue",Ne.value)}m(Ne,(e=>{ee("cwValue",Ne.value)}),{immediate:!0});const Ge=n([]),He=n([]);const Je=n("/api/file/upload2Local");async function Le(e=1){let a;if(1===e){if(a=await le(),!a)return void ae.error(S("chat.choseFileErro"))}else a=e;const t=new FormData;t.append("file",a),await K.post(Je.value,t,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{if(a.data){let{data:e}=a.data;if(0!=Ge.value.filter((a=>a.src==e)).length)return void ae.error(S("draw.CannotRepeatedly"));Ge.value.push({src:e,cwIsShow:!1,swIsShow:!1,swValue:5,swinpIsShow:!1})}1!==e&&te.updateRecordDialog(!1)}))}function Re(){}m(Ge.value,(e=>{ee("matsList",e.map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),ee("stylesList",e.filter((e=>e.swIsShow)).map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),ee("rolesList",e.filter((e=>e.cwIsShow)).map((e=>e.src)))}),{immediate:!0,deep:!0}),m(Ce.value,(e=>{if(console.log("数据发生变化",e),Ie.value==S("knowledge.customize")){let a=Number(e.Setwidth)+":"+Number(e.Setheight);ee("ar",a)}}));const qe=[{name:S("draw.avatarFrame"),value:"1:1",width:"16px",height:"16px",id:0,iconD:"1_1"},{name:S("draw.phoneWallpaper"),value:"1:2",width:"12px",height:"24px",id:1,iconD:"1_2"},{name:S("draw.computerWallpaper"),value:"16:9",width:"20px",height:"12px",id:2,iconD:"16_9"},{name:S("draw.promotionalPoster"),value:"9:16",width:"12px",height:"20px",id:3,iconD:"9_16"},{name:S("draw.articleImg"),value:"4:3",width:"22px",height:"17px",id:4,iconD:"4_3"},{name:S("draw.medialeImg"),value:"3:4",width:"17px",height:"22px",id:5,iconD:"3_4"},{name:S("draw.hengCard"),value:"3:2",width:"23px",height:"16px",id:6,iconD:"3_2"},{name:S("draw.redBook"),value:"2:3",width:"16px",height:"23px",id:7,iconD:"2_3"}];n("mj");const Xe=n(5),We=[{name:"MJ6.1",intro:S("draw.MJdec1"),id:5,value:"--v 6.1",group:"mj"},{name:"MJ7",intro:S("draw.MJdec2"),id:7,value:"--v 7",group:"mj"},{name:"MJ6.0",intro:S("draw.MJdec3"),id:0,value:"--v 6.0",group:"mj"},{name:"MJ5.2",intro:S("draw.MJdec4"),id:1,value:"--v 5.2",group:"mj"},{name:"MJ5.1",intro:S("draw.MJdec5"),id:2,value:"--v 5.1",group:"mj"},{name:"Nj6.0",intro:S("draw.MJdec6"),id:3,value:"--niji 6",group:"nj"},{name:"Nj5.0",intro:S("draw.MJdec7"),id:4,value:"--niji 5",group:"nj"}];let Ke=n(!1);Y.mjVersionChange(We[0].value),D({page:1,size:20,type:"style"}).then((e=>{let a=e.data.filter((e=>2==e.level));Me.value=a,Ze(Me.value[0].pid)}));const Ye=n();const Qe=n([]);function Ze(e){U({id:e}).then((e=>{e.data.rows.length&&(Qe.value=e.data.rows[0].children)}))}const ea=({focused:e,checked:a})=>{const t={};return a&&(t.background="linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"),e&&(t.boxShadow="0 0 0 2px #957df480"),t},aa=n(""),ci=n([]),mi=n(),xi=n();async function gi(e=1,a){if("imgmiximg"==a&&5==ci.value.length)return void ae.warning(S("draw.max5Img"));let t;if(1===e){if(t=await le(),!t)return void ae.error(S("chat.choseFileErro"))}else t=e;(new FormData).append("file",t),function(e){return new Promise(((a,t)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=function(){const e=l.result.split(",")[1];a(e)},l.onerror=function(){t(new Error("Failed to load file"))}}))}(t).then((e=>{let t="data:image/png;base64,"+e;if("imgToText"==a)aa.value=t;else if("Ai1"==a)mi.value=t;else if("Ai2"==a)xi.value=t;else if("imgmiximg"==a){if(0!=ci.value.filter((e=>e==t)).length)return void ae.error(S("draw.CannotRepeatedly"));ci.value.push(t)}}))}function fi(e,a){"imgMixImg"==a?ci.value=ci.value.filter((a=>a!=e)):"imgToText"==a?aa.value="":"Ai1"==a?mi.value="":"Ai2"==a&&(xi.value="")}const yi=n(1);n(1);const wi=n(0),hi=[{name:S("draw.CannotRepeatedly"),intro:"1:2",value:"SQUARE",width:"16px",height:"16px",id:0},{name:S("draw.hengCard"),intro:"3:2",value:"PORTRAIT",width:"23px",height:"16px",id:1},{name:S("draw.redBook"),intro:"2:3",value:"LANDSCAPE",width:"16px",height:"23px",id:2}],bi=n(hi[wi.value].value);function ki(){if(M.value){if(Ei.value.isVipUsed&&-1===Ei.value.userType.indexOf(c.value)){let e=Ei.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=F.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void ae.error(S("digitalMan.vipUse1")+a+S("digitalMan.vipUse1"))}if("imgToText"==Z.value){if(!aa.value)return void ae.error(S("draw.PuploadImg"));let e={action:ne.IMAGE_TO_TEXT,mode:yi.value,files:"",base64Array:[aa.value],type:re.IMAGE_TO_TEXT};ee("submitData",e),ci.value=[],aa.value=""}else if("imgMixImg"==Z.value){if(ci.value.length<2)return void ae.error(S("draw.min2Img"));let e={action:ne.IMAGE_MIX_IMAGE,mode:yi.value,size:bi.value,base64Array:ci.value,type:re.IMAGE_MIX_IMAGE};ee("submitData",e),ci.value=[],aa.value=""}else if("AI"==Z.value){if(!mi.value)return void ae.error(S("draw.uploadFaceImg"));if(!xi.value)return void ae.error(S("draw.uploadFaceReplace"));let e={params:{action:22,mode:yi.value,sourceBase64:mi.value,targetBase64:xi.value},type:re.INSIGHT_FACE};ee("submitData",e),ci.value=[],aa.value=""}}else p.setLoginDialog(!0)}const Ei=n({remainCount:0,freeCount:0,useIntegrate:0}),Fi=n(!1);m((()=>Z.value),((e,a)=>{!function(){let e={};"imgToText"==Z.value?e={params:{action:ne.IMAGE_TO_TEXT,mode:yi.value},type:re.IMAGE_TO_TEXT}:"imgMixImg"==Z.value?e={params:{action:ne.IMAGE_MIX_IMAGE,mode:yi.value},type:re.IMAGE_MIX_IMAGE}:"AI"==Z.value&&(e={params:{action:22,mode:yi.value},type:re.INSIGHT_FACE}),B(e).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(Ei.value=e.data,Fi.value=!1):Fi.value=!0})).catch((e=>{Fi.value=!0}))}()}),{deep:!0,immediate:!0});const Ii=n({textToImg:S("draw.textToImg"),imgToText:S("draw.imgToText"),imgMixImg:S("draw.imgMixImg"),AI:S("draw.AI")});return(e,i)=>(a(),t("div",sa,[l("div",ra,[x(I(N),{class:"card-tabs","default-value":Z.value,value:Z.value,size:"large",animated:"","onUpdate:value":oe},{default:E((()=>[x(I(P),{name:"textToImg",tab:e.$t("draw.textGenImg")},null,8,["tab"]),x(I(P),{name:"imgMixImg",tab:e.$t("draw.mixImg")},null,8,["tab"]),x(I(P),{name:"imgToText",tab:e.$t("draw.imgGenText")},null,8,["tab"]),x(I(P),{name:"AI",tab:e.$t("draw.AIChangeFace")},null,8,["tab"])])),_:1},8,["default-value","value"]),"textToImg"!=Z.value?(a(),t("div",na,[l("div",oa,[l("p",da,g(e.$t("draw.AIChangeFace")),1),l("div",ua,g(Ii.value[Z.value]),1)])])):h("",!0),"textToImg"==Z.value?(a(),t("div",pa,[l("div",va,[l("div",ca,[l("div",ma,g(e.$t("draw.modelSelect")),1),l("div",xa,[x(I(G),{value:Xe.value,"onUpdate:value":i[0]||(i[0]=e=>Xe.value=e),"label-field":"name","value-field":"id",options:We,onClick:i[1]||(i[1]=e=>O(Ke)?Ke.value=!I(Ke):Ke=!I(Ke)),show:!1},null,8,["value"]),7==Xe.value?(a(),t("div",ga,"NEW")):h("",!0),b(l("div",fa,[l("p",null,g(e.$t("draw.modelSelect"))+":",1),(a(),t(f,null,y(We,(e=>l("div",{class:w(["selectItem",Xe.value==e.id?"active":""]),onClick:a=>{!function(e){Xe.value=e.id,Y.mjVersionChange(e.value)}(e),O(Ke)?Ke.value=!1:Ke=!1}},[l("div",wa,[T(g(e.name)+" ",1),"MJ7"==e.name?(a(),t("div",ha,"NEW ")):h("",!0)]),l("span",null,g(e.intro),1),i[24]||(i[24]=l("img",{src:we,alt:""},null,-1))],10,ya))),64))],512),[[H,I(Ke)]])])])]),l("div",ba,[l("div",ka,[l("div",Ea,g(e.$t("draw.styleSelect")),1)]),l("div",Fa,[l("div",Ia,[(a(!0),t(f,null,y(Me.value,((e,l)=>(a(),t("div",{class:w(Se.value==l?"styleItemSelect":"styleItem"),onClick:e=>function(e){Se.value=e,Ze(Me.value[e].pid)}(l),key:e.id},g(e.classifyName),11,Ca)))),128))],512),l("div",{class:"styleImgBox",style:j({maxHeight:Q.value?"unset":Ee.value})},[(a(!0),t(f,null,y(Qe.value,((e,i)=>(a(),t("div",{class:w(Ye.value==i?"styleImgItemSelect":"styleImgItem"),onClick:a=>function(e){let{incantationEn:a}=e.item;Ye.value=e.index,ee("incantationCn",a)}({item:e,index:i})},[l("div",Aa,g(e.incantationCn),1),l("img",{src:e.img,alt:""},null,8,_a)],10,Ta)))),256)),(a(),t(f,null,y(3,(e=>l("div",$a))),64))],4),Qe.value.length>10?(a(),t("div",{key:0,onClick:i[2]||(i[2]=e=>Q.value=!Q.value),class:"flex justify-center w-[100%] cursor-pointer"},[l("div",ja,[Q.value?(a(),t(f,{key:1},[l("span",null,g(e.$t("draw.closeUp")),1),x(I(C),{size:"18px"},{default:E((()=>[x(I(Fe))])),_:1})],64)):(a(),t(f,{key:0},[l("span",null,g(e.$t("draw.openMore")),1),x(I(C),{size:"18px"},{default:E((()=>[x(I(xe))])),_:1})],64))])])):h("",!0)])]),l("div",Ma,[l("div",Sa,[l("div",Ba,g(e.$t("draw.sizeChose")),1)]),l("div",za,[(a(),t(f,null,y(qe,(e=>l("div",{class:w([fe.value==e.id?" dark:border-[#0066ff] dark:bg-[#383838] sizeSelected border-[#574FFE] bg-[#ededfb]":"dark:border-[#292A2E] dark:bg-[#383838] border-[#F2F3F7] bg-[#F2F3F7]","sizeItem border"]),key:e.id,onClick:a=>function(e){fe.value=e.id,Ie.value=e.name,e.name!=S("knowledge.customize")&&ee("ar",e.value)}(e)},[l("div",Da,[l("div",{class:w(["icon-img","img"+e.iconD]),style:j(fe.value==e.id?"border:1px solid #574FFE;":"")},null,6)]),""!=e.value?(a(),t("p",{key:0,class:"t3",style:j(fe.value==e.id?"color:#574FFE;":"")},g(e.value),5)):(a(),t("div",Ua,[b(l("input",{onClick:J(Re,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[3]||(i[3]=e=>Ce.value.Setwidth=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[k,Ce.value.Setwidth]]),i[25]||(i[25]=l("p",{style:{margin:"0 4px"}},":",-1)),b(l("input",{onClick:J(Re,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[4]||(i[4]=e=>Ce.value.Setheight=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[k,Ce.value.Setheight]])]))],10,Va))),64))])]),l("div",Pa,[l("div",Na,[l("div",Oa,[T(g(e.$t("draw.doesZhilin"))+" ",1),x(I(L),{trigger:"hover",placement:"top"},{trigger:E((()=>i[26]||(i[26]=[l("img",{src:ta,alt:""},null,-1)]))),default:E((()=>[l("div",null,[l("div",null,g(e.$t("draw.doesText1")),1),l("div",null,g(e.$t("draw.doesText2")),1),l("div",null,g(e.$t("draw.doesText3")),1)])])),_:1})]),x(I($),{style:{"margin-left":"8px","margin-right":"8px"},value:je.value,"onUpdate:value":i[5]||(i[5]=e=>je.value=e),"rail-style":ea,size:"small"},null,8,["value"])])]),x(I(X),{"arrow-placement":"right",class:"role-collapse"},{default:E((()=>[x(I(R),{class:"role-collapse-item",title:"高级参数",name:"1"},{default:E((()=>[l("div",Ga,[l("div",Ha,[l("div",Ja,[l("div",La,g(e.$t("draw.cankaoImg")),1)]),l("div",Ra,[(a(!0),t(f,null,y(Ge.value,((s,r)=>(a(),t("div",{class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",key:r,style:{position:"relative"}},[l("span",{class:"remove",onClick:J((e=>Ge.value.splice(r,1)),["stop"])},i[27]||(i[27]=[l("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHdSURBVDiNtdWxi9pgHMbxby4nFEvuQMEIxeHQLYtCHXTQKVPBRRw6ZHCNe8YGuohjB+PgnyB2OOgYgoIedFCHLjlxKgen5YbrcBauwQ53ATmScG29H7wE8vB8El4SXgE45//mN/AdGANfgF8AwgHg/bkCPgA/jg6IArwBPgKvDg37+LuXgAEqLwVnQuHRaFSczWZlRVHiQbmiKPHlclkdjUbFgPg4FJYkKVYoFJK2bZee4oqixG3bLuVyuRNJkmJB/VBY07TFarW6lWU5vo/7qCzL8dVqdatp2iKoH/kdp1Kp2HQ6LWWz2dP1en3XarUW3W4376Plcvlis9nc/zXs44PBIF+pVNL+vfF4fN1oNBZhKERshT+bzebeNE3X87wdgOd5O9M03Sj0WbBhGBnHcaqiKArz+fxGFEXBcZyqYRiZqJ4IvI9CO51OHqDX613WarWFLMtCsVhMqqqa3m6328lk8jOsfx602u32t93jWJbl7meWZblhmb9Ct6LZbJ75b6rruruf6bru9nq9SwBVVdNBfQH4DBw/Der1ejKRSMT6/f512MPr9XoSYDgc3gTBn4CzsPK/jgi8BvKHho94OE6uDg2LPJxZX4G3wMkhYYA7wH68ngISz/h5ouYPRiq/PPmBkeEAAAAASUVORK5CYII="},null,-1)]),8,qa),""!=s.src?(a(),t("div",{key:0,style:{display:"flex","justify-content":"center","align-items":"center"},class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",onClick:i[6]||(i[6]=e=>Le(1))},[l("img",{src:s.src,alt:""},null,8,Xa)])):(a(),t("div",{key:1,class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0"},onClick:i[7]||(i[7]=e=>Le(1))},g(e.$t("digitalMan.clickUpload")),1)),l("div",{class:"bot-p",style:j(s.src?"opacity: 0.9;":"")},[l("div",Wa,[s.swIsShow?(a(),t("div",{key:0,class:"left",onClick:e=>function(e){e.swinpIsShow=!0,setTimeout((()=>{W((()=>{pe.value[0].focus()}))}),100)}(s)},[s.swinpIsShow?b((a(),t("input",{key:0,onBlur:e=>function(e){e.swinpIsShow=!1}(s),ref_for:!0,ref_key:"refInput",ref:pe,"onUpdate:modelValue":e=>s.swValue=e,style:{width:"100%","background-color":"transparent","font-size":"12px"},type:"text",onInput:e=>function(e){e.swValue>100?e.swValue=100:e.swValue<0&&(e.swValue=0),ee("swValue",e.swValue)}(s)},null,40,Ya)),[[k,s.swValue]]):(a(),t("p",Qa,g(s.swValue?s.swValue:"权重"),1))],8,Ka)):(a(),t("div",Za)),l("div",et,[l("p",at,g(e.$t("draw.styleOnes")),1),x(I($),{class:"swi",size:"small",disabled:0==s.swIsShow&&3==He.value.length,value:s.swIsShow,"onUpdate:value":[e=>s.swIsShow=e,e=>{}],"rail-style":ea},null,8,["disabled","value","onUpdate:value"])])]),l("div",tt,[s.cwIsShow?(a(),t("div",{key:0,class:"left",onClick:ce},[de.value?b((a(),t("input",{key:0,type:"text",onBlur:ue,ref_for:!0,ref_key:"refInput1",ref:ve,"onUpdate:modelValue":i[8]||(i[8]=e=>Ne.value=e),style:{width:"100%","background-color":"transparent"},onInput:Oe},null,544)),[[k,Ne.value]]):(a(),t("p",lt,g(Ne.value?Ne.value:"--cw"),1))])):(a(),t("div",it)),l("div",st,[l("p",rt,g(e.$t("draw.PersonOnes")),1),x(I($),{class:"swi",size:"small","onUpdate:value":[e=>function(e,a){Ge.value.forEach(((e,t)=>{a!=t&&(e.cwIsShow=!1)}))}(0,r),e=>s.cwIsShow=e],value:s.cwIsShow,"rail-style":ea},null,8,["onUpdate:value","value"])])])],4)])))),128)),l("div",nt,[l("div",{class:"title dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0",border:"1px dashed #A5A5A5"},onClick:i[9]||(i[9]=e=>Le(1))},[l("div",ot,g(e.$t("draw.imgTuo")),1),l("div",dt,[i[28]||(i[28]=l("img",{src:"/static/svg/upload-5b2ef103.svg",style:{"margin-right":"4px"}},null,-1)),T(g(e.$t("draw.huoClickUpload")),1)])]),l("div",ut,[l("div",pt,[i[29]||(i[29]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",vt,[l("p",ct,g(e.$t("draw.styleOnes")),1),x(I($),{class:"swi",size:"small",disabled:"","rail-style":ea})])]),l("div",mt,[i[30]||(i[30]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",xt,[l("p",gt,g(e.$t("draw.PersonOnes")),1),x(I($),{class:"swi",size:"small",disabled:"","rail-style":ea})])])])])]),l("div",null,[l("div",{onClick:i[10]||(i[10]=e=>se.value=!se.value),style:{display:"flex",cursor:"pointer","max-width":"100%",width:"100%",padding:"16px","border-radius":"8px","justify-content":"space-between","margin-top":"20px",position:"relative"},class:"border dark:bg-[#383838] dark:border-[#292A2E] bg-[#fff] border-[#E8E8E8]"},[l("div",ft,[l("p",yt,g(e.$t("draw.similarity")),1),x(I(L),{trigger:"hover",placement:"top"},{trigger:E((()=>i[31]||(i[31]=[l("img",{src:ta,alt:""},null,-1)]))),default:E((()=>[l("div",wt,"--iw "+g(e.$t("draw.hightToBig")),1)])),_:1})]),l("div",ht,[l("p",bt,g(me[ie.value].name),1),i[32]||(i[32]=l("img",{style:{width:"18px",height:"18px"},src:la,alt:""},null,-1))]),se.value?(a(),t("div",kt,[(a(),t(f,null,y(me,(e=>l("div",{class:"iwItem",style:j(ie.value==e.id?"color:#7369E2":""),key:e.id,onClick:a=>function(e){ie.value=e.id,ge.value=e.value,ee("iwValue",ge.value)}(e)},g(e.name),13,Et))),64))])):h("",!0)])])]),l("div",Ft,[l("div",It,g(e.$t("draw.notWorld")),1)]),l("div",Ct,[b(l("textarea",{"onUpdate:modelValue":i[11]||(i[11]=e=>ye.value=e),onInput:Pe,style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"输入不想出现在图像中的内容（例如树木，0/200）"},null,544),[[k,ye.value]]),l("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:i[12]||(i[12]=e=>ye.value="")},g(e.$t("common.clear")),1)])]),l("div",Tt,[l("div",At,[l("div",_t,"--seed "+g(e.$t("draw.seed")),1)]),l("div",$t,[b(l("input",{class:"inp bg-[#FFF] dark:bg-[#383838] w-[100%]",style:{flex:"1","border-radius":"6px",padding:"4px 6px"},type:"text","onUpdate:modelValue":i[13]||(i[13]=e=>be.value=e)},null,512),[[k,be.value]])])]),l("div",null,[l("div",jt,[l("div",Mt,[l("div",St,[T("--s "+g(e.$t("draw.styleHua"))+" ",1),x(I(L),{trigger:"hover",placement:"top"},{trigger:E((()=>i[33]||(i[33]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:ta,alt:""},null,-1)]))),default:E((()=>[l("div",Bt,g(e.$t("draw.styleHuaText1")),1)])),_:1})])]),l("div",zt,[l("div",Vt,g(ke.value),1),l("div",Dt,[x(I(q),{value:ke.value,"onUpdate:value":i[14]||(i[14]=e=>ke.value=e),step:1,max:1e3,onDragend:Be},null,8,["value"])])])]),l("div",Ut,[l("div",Pt,[l("div",Nt,[T("--c "+g(e.$t("draw.moreHua"))+" ",1),x(I(L),{trigger:"hover",placement:"top"},{trigger:E((()=>i[34]||(i[34]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:ta,alt:""},null,-1)]))),default:E((()=>[l("div",Ot,g(e.$t("draw.moreHuaText1")),1)])),_:1})])]),l("div",Gt,[l("div",Ht,g(ze.value),1),l("div",Jt,[x(I(q),{value:ze.value,"onUpdate:value":i[15]||(i[15]=e=>ze.value=e),step:1,onDragend:Ve},null,8,["value"])])])]),l("div",Lt,[l("div",Rt,[l("div",qt,"--quelity "+g(e.$t("draw.quelity")),1)]),l("div",{class:"selectQuelity dark:bg-[#383838] bg-[#F0F0F0] flex",style:{position:"relative",flex:"1",cursor:"pointer",padding:"4px 6px","border-radius":"6px",display:"flex","margin-left":"8px","align-items":"center","justify-content":"space-between"},onClick:i[16]||(i[16]=e=>Ae.value=!Ae.value)},[l("p",Xt,g(_e[Te.value].name),1),i[35]||(i[35]=l("img",{style:{width:"12px",height:"12px"},src:la,alt:""},null,-1)),Ae.value?(a(),t("div",Wt,[(a(),t(f,null,y(_e,(e=>l("div",{class:"",onClick:a=>function(e){Te.value=e.id,$e.value=e.value,ee("q",$e.value)}(e),style:j([{padding:"4px 0"},Te.value==e.id?"color:#7369E2":""]),key:e.id},g(e.name),13,Kt))),64))])):h("",!0)])]),l("div",Yt,[l("div",Qt,[l("div",Zt,[T("--weird "+g(e.$t("draw.weird"))+" ",1),x(I(L),{trigger:"hover",placement:"top"},{trigger:E((()=>i[36]||(i[36]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:ta,alt:""},null,-1)]))),default:E((()=>[l("div",el,g(e.$t("draw.weirdText1")),1)])),_:1})])]),l("div",al,[l("div",tl,g(De.value),1),l("div",ll,[x(I(q),{value:De.value,"onUpdate:value":i[17]||(i[17]=e=>De.value=e),step:1,onDragend:Ue},null,8,["value"])])])])])])),_:1})])),_:1})])):h("",!0),"imgToText"==Z.value?(a(),t("div",il,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[18]||(i[18]=e=>gi(1,"imgToText"))},[l("div",sl,[l("div",null,[l("div",rl,g(e.$t("draw.PuploadImg")),1),l("div",nl,g(e.$t("draw.PuploadImgText1")),1)])]),""==aa.value?(a(),t("div",ol,[l("div",dl,g(e.$t("draw.cankaoImgTuo")),1),l("div",ul,g(e.$t("draw.huo")),1),l("div",pl,g(e.$t("digitalMan.clickUpload")),1)])):(a(),t("div",vl,[l("img",{src:aa.value,style:{height:"100%"}},null,8,cl)]))]),l("div",ml,[l("div",xl,[l("div",gl,g(e.$t("draw.wenxinTips")),1)]),l("div",fl,g(e.$t("draw.wenxinTipsText")),1)])])):h("",!0),"imgMixImg"==Z.value?(a(),t("div",yl,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[19]||(i[19]=e=>gi(1,"imgmiximg"))},[l("div",wl,[l("div",null,[l("div",hl,g(e.$t("draw.PuploadImg")),1),l("div",bl,g(e.$t("draw.upload2T5Img")),1)])]),l("div",kl,[l("div",El,[(a(!0),t(f,null,y(ci.value,((e,s)=>(a(),t("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",key:s},[e?(a(),t("img",{key:0,src:e,alt:""},null,8,Fl)):h("",!0),l("div",{class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:J((a=>fi(e,"imgMixImg")),["stop"])},i[37]||(i[37]=[l("img",{src:ia,alt:""},null,-1)]),8,Il)])))),128)),l("div",Cl,[l("p",Tl,g(e.$t("digitalMan.clickUpload")),1)])])])]),l("div",Al,[l("div",_l,[l("div",$l,g(e.$t("homePage.imgSize")),1),l("div",jl,g(e.$t("draw.choseImgSize")),1)]),l("div",Ml,[l("div",Sl,[(a(),t(f,null,y(hi,(e=>l("div",{class:w([wi.value==e.id?"dark:border-[#0066ff] border-[#574FFE] bg-[#ededfb] dark:bg-[#383838] sizeSelected":"dark:border-[#292A2E] dark:bg-[#383838] border-[#F2F3F7] bg-[#F2F3F7]","sizeItem border"]),key:e.id,onClick:a=>function(e){wi.value=e.id,bi.value=e.value}(e)},[l("div",zl,[l("div",{style:j({width:e.width,height:e.height}),class:w(["size border",wi.value==e.id?"border-[#574FFE]  dark:bg-[#D3D1D9]":"dark:bg-[#D3D1D9] dark:border-[#46484F] bg-[#F8F9F9] border-[#CDCECE]"])},null,6)]),l("p",{class:w(["dark:text-[#6C6E79]",wi.value==e.id?"text-[#574FFE]":"text-[#8B8C8C]"])},g(e.intro),3),l("p",{class:w(["dark:text-[#6C6E79]",wi.value==e.id?"text-[#574FFE]":"text-[#8B8C8C]"])},g(e.name),3)],10,Bl))),64))])])]),l("div",Vl,[l("div",Dl,[l("div",Ul,g(e.$t("draw.wenxinTips")),1)]),l("div",Pl,g(e.$t("draw.wenxinTipsText2")),1)])])):h("",!0),"AI"==Z.value?(a(),t("div",Nl,[i[40]||(i[40]=l("div",{class:"line bg-[#EBEBEB] dark:bg-[#222226]"},null,-1)),l("div",Ol,[l("p",Gl,g(e.$t("draw.oneUploadFace")),1)]),l("div",Hl,g(e.$t("draw.warnUploadText1")),1),l("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",onClick:i[21]||(i[21]=e=>gi(1,"Ai1"))},[mi.value?(a(),t("img",{key:0,src:mi.value,alt:""},null,8,Jl)):(a(),t("p",Ll,g(e.$t("digitalMan.clickUpload")),1)),mi.value?(a(),t("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[20]||(i[20]=J((e=>fi(mi.value,"Ai1")),["stop"]))},i[38]||(i[38]=[l("img",{src:ia,alt:""},null,-1)]))):h("",!0)]),l("div",Rl,g(e.$t("draw.uploadFaceText1")),1),l("div",ql,[l("p",Xl,g(e.$t("draw.towUploadFace")),1)]),l("div",Wl,g(e.$t("draw.warnUploadText1")),1),l("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",onClick:i[23]||(i[23]=e=>gi(1,"Ai2"))},[xi.value?(a(),t("img",{key:0,src:xi.value,alt:""},null,8,Kl)):(a(),t("p",Yl,g(e.$t("digitalMan.clickUpload")),1)),xi.value?(a(),t("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[22]||(i[22]=J((e=>fi(xi.value,"Ai2")),["stop"]))},i[39]||(i[39]=[l("img",{src:ia,alt:""},null,-1)]))):h("",!0)]),l("div",Ql,g(e.$t("draw.maxImgText1")),1),l("div",Zl,g(e.$t("draw.notManHuaImg")),1),l("div",ei,[l("p",ai,g(e.$t("draw.threeUploadFace")),1)]),l("div",ti,g(e.$t("draw.mianzeText1")),1)])):h("",!0),"textToImg"!=Z.value?(a(),t("div",li,[l("div",ii,[Ei.value&&Ei.value.isVipUsed?(a(),t("img",si)):h("",!0),x(I(A),{loading:I(Y).isLoading.value,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"64px","font-size":"15px","border-radius":"10px",padding:"12px 0"},onClick:ki},{default:E((()=>[Fi.value?(a(),t("span",ri,g(e.$t("draw.modelNotSet")),1)):I(p).isLogin?Ei.value&&Ei.value.isVipFree&&v.value?(a(),t("span",oi,g(e.$t("chat.vipFree")),1)):Ei.value&&Ei.value.remainCount&&v.value?(a(),t("span",di,g(e.$t("draw.shenyu")+Ei.value.remainCount+e.$t("draw.chiFree")),1)):Ei.value?(a(),t("div",ui,[l("span",null,g(e.$t("gpt.lijiGen")),1),l("span",pi,"（"+g(Ei.value.useIntegrate+e.$t("chat.pointsChi"))+"）",1)])):(a(),t("span",vi,g(e.$t("draw.gen")),1)):(a(),t("span",ni,g(e.$t("draw.beginGen")),1))])),_:1},8,["loading"])])])):h("",!0)])]))}}),[["__scopeId","data-v-6ebd4da3"]]),mi={class:"draw-midjourney-class",style:{display:"flex",height:"100%",overflow:"hidden"}},xi={style:{flex:"1",display:"flex","flex-direction":"column"},class:"contentBox border-l dark:border-[#2A2C30] border-[#fff] dark:bg-[#24262a] bg-[#fff]"},gi={class:"borTitel",style:{}},fi={style:{color:"#8C441A","font-size":"18px","font-weight":"500"}},yi={style:{"margin-left":"13px",color:"#8C441A","font-size":"14px"}},wi={key:0,style:{border:"1px solid rgba(224, 226, 233, 0.3)"}},hi={key:1},bi={key:0,class:"gap"},ki={class:"mid"},Ei=z(e({__name:"midjourney",setup(e){const o=n(""),d=n(""),u=n(""),p=n(""),c=n(""),b=s(),k=r((()=>b.isLogin)),E=i(),I=n(""),C=n(0),T=n({translate:C.value,prompt:"",styles:[],roles:[],iw:.25,sw:0,cw:0,extend:"",mode:1,mats:[],enabled:!1,action:re.TEXT_TO_IMAGE}),A=n({ar:"",no:"",s:"",c:"",q:"",weird:""}),_=Y(),$=n("textToImg");function j(e){$.value=e}function M(e){I.value=e}_.query.type&&($.value=_.query.type),ye({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{p.value=e.data.copyrightTitle,o.value=e.data.icpNumber,d.value=e.data.policeFilingNumber,u.value=e.data.icpUrl,c.value=e.data.policeFilingUrl}));let S=!1;const B=n([]);let z=[];const V=n(!1),D=n(!1),U=n([]);function P(e){T.value.styles=e}function N(e){T.value.roles=e}const O=n([]);function G(e){O.value=e}function H(e){T.value.iw=e}function J(e){T.value.enabled=e}function L(e){}function R(e){T.value.cw=Number(e)}function q(e){let a="--ar "+e;A.value.ar=a}function X(e){let a="--no "+e;A.value.no=a}function K(e){let a="--s "+e;A.value.s=a}function ne(e){let a="--c "+e;A.value.c=a}function de(e){let a="--q "+e;A.value.q=a}function ue(e){let a="--weird "+e;A.value.weird=a}const pe=n("");function ve(e){pe.value=e||""}let ce=null;const xe=async function(){try{ce&&window.clearTimeout(ce);(await se({jobIds:z.join()})).data.forEach((e=>{const a=U.value.findIndex((a=>a.id===e.id));-1!==a&&U.value.splice(a,1,e),e.status>=3&&(z=z.filter((a=>a!==e.jobId)))})),z.length?ce=setTimeout((()=>xe()),3e3):ce&&window.clearTimeout(ce)}catch(e){ce=setTimeout((()=>xe()),3e3)}};m(k,(async e=>{if(1==e){const e={page:1,size:10},a=await ae(e);1===e.page&&(U.value=a.data.rows.reverse())}else U.value.length=0}));const ge={page:1,size:10},we=async function(e){try{D.value=!0;const a=await ae(ge);1===ge.page?U.value=a.data.rows.reverse():U.value=a.data.rows.reverse().concat(U.value),console.log(U.value),z=U.value.filter((e=>[1,2].includes(e.status))).map((e=>e.jobId)),z.length&&xe(),a.data.rows.length<ge.size&&(V.value=!0),W(e?()=>{var e;null==(e=Fe.value)||e.scrollTo({top:Fe.value.scrollHeight,behavior:"smooth"}),B.value.length&&B.value[B.value.length-1].scrollIntoView(),setTimeout((()=>{S=!0}),100)}:()=>{var e;let t=0;for(let l=0;l<a.data.rows.length;l++){const a=null==(e=Fe.value)?void 0:e.children[0].children[l];t+=(null==a?void 0:a.offsetHeight)||0}Fe.value.scrollTop=t}),D.value=!1}catch(a){D.value=!1}};Q.on("drawtoBottom",(e=>{var a;1===ge.page&&(null==(a=Fe.value)||a.scrollTo({top:Fe.value.scrollHeight,behavior:"smooth"}))}));const he=n("mj"),be=n(!1),ke=n(),Ee=async function(e,a){ke.value=!1,be.value=!0;try{let t=null;switch(e.type){case re.TEXT_TO_IMAGE:case re.IMAGE_ACTION:t=await ie(e),Q.emit("getUserInfo",!0);break;case re.IMAGE_MIX_IMAGE:case re.IMAGE_TO_TEXT:t=await le(e),Q.emit("getUserInfo",!0);break;case re.INSIGHT_FACE:t=await te(e),Q.emit("getUserInfo",!0)}if(t){const e=t.data;ke.value=!0,be.value=!1;U.value.find((a=>a.id===e.id))||(U.value.push(e),W((()=>{var e;null==(e=Fe.value)||e.scrollTo({top:Fe.value.scrollHeight,behavior:"smooth"})}))),e.status<3&&!z.includes(e.jobId)&&(z.push(e.jobId),xe())}a&&a(Boolean(null==t?void 0:t.success))}catch(t){E.error(t.message),ke.value=!0,be.value=!1,a&&a(!1)}},Fe=n(),Ie=function(e){const a=e.target;S&&a.scrollTop<=20&&(V.value||D.value||(ge.page=ge.page+1,we()))};Z((()=>{var e;null==(e=Fe.value)||e.removeEventListener("scroll",Ie)}));const Ce=n({}),Te=n({});return v((()=>{var e;b.getUserInfo(),Ce.value=JSON.parse(JSON.stringify(T.value)),Te.value=JSON.parse(JSON.stringify(A.value)),we(!0),null==(e=Fe.value)||e.addEventListener("scroll",Ie)})),ee("mjBase",{isLoading:be,mjParams:T,defaultMJParams:Ce,defaultExtendArr:Te,extendArr:A,styleMode:pe,mjVersionChange:function(e){he.value=e}}),(e,i)=>(a(),t("div",mi,[x(ci,{onStylesList:P,onRolesList:N,onSetEnabled:J,onIwValue:H,onSwValue:L,onCwValue:R,onAr:q,onNo:X,onS:K,onC:ne,onQ:de,onWeird:ue,onMatsList:G,onIncantationCn:ve,drawType:$.value,onChangeDataType:j,onSubmitData:Ee},null,8,["drawType"]),l("div",xi,[l("div",gi,[l("span",fi,"# "+g(e.$t("draw.creationCenter")),1),l("p",yi,g(e.$t("draw.SafetyWarning")),1)]),l("div",{ref_key:"scrollView",ref:Fe,class:w({mb80:"textToImg"===$.value}),style:{flex:"1",overflow:"auto"}},[k.value&&0!=U.value.length?(a(),t("div",wi,[(a(!0),t(f,null,y(U.value,((e,t)=>(a(),F(oe,{type:"chat",task:e,key:e.jobId+"-"+e.status,onRemove:()=>function(e){U.value.splice(e,1)}(t),onAddTask:Ee},null,8,["task","onRemove"])))),128))])):(a(),t("div",hi,[x(fe,{onHandleprompt:M})]))],2),"textToImg"===$.value?(a(),t("div",bi,[x(me,{style:{bottom:"8px"}})])):h("",!0),l("div",ki,["textToImg"==$.value?(a(),F(aa,{key:0,handleprompt:I.value,isSuccess:!!ke.value&&ke.value,mode:he.value,onSubmit:Ee},null,8,["handleprompt","isSuccess","mode"])):h("",!0)])])]))}}),[["__scopeId","data-v-0f7573fc"]]);export{Ei as default};
