import{e,N as t,O as a,P as l,i,r as s,av as r,j as n,Z as o,k as d,br as u,A as p,a1 as c,a3 as v,a4 as x,a0 as g,F as m,an as f,a2 as y,a5 as b,a6 as h,H as k,am as w,a8 as E,$ as F,ag as A,a7 as C,aL as I,bs as B,ao as j,ad as _,R as S,W as T,ax as z,bt as D,bu as V,aa as M,a9 as U,bv as N,b8 as P,bw as R,bx as H,K as Q,as as L,aM as O,aV as q,aA as G,aE as K,ac as Z,aD as X,aC as Y,p as W,aB as J}from"../main-79c61161.js";import{a as $,M as ee}from"../index/index.27c727e8.js";import{M as te}from"../index/index.85e4eb02.js";import{_ as ae,a as le}from"../close copy/close copy.08564ec3.js";import{_ as ie,b as se}from"../baiduThink/baiduThink.1cbe368c.js";import{F as re}from"../FlashOutline/FlashOutline.db11a390.js";import{_ as ne,a as oe,n as de}from"../delImg copy/delImg copy.2ca1b6a8.js";import{a as ue}from"../music/music.212db6aa.js";import{_ as pe}from"../video_create/video_create.4f3c17fd.js";import{u as ce}from"../useUpload/useUpload.1c78dda2.js";import"../draw-fail/draw-fail.ad8fd01b.js";import"../index/index.5b75f753.js";import"../index/index.1358f2f4.js";import"./draw.2781303b.js";import"../HeartOutline/HeartOutline.d223fe12.js";import"../Popconfirm/Popconfirm.b9497573.js";const ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},xe=[l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 184l144 144l144-144"},null,-1)],ge=e({name:"ChevronDown",render:function(e,l){return t(),a("svg",ve,xe)}}),me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},fe=[l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 328l144-144l144 144"},null,-1)],ye=e({name:"ChevronUp",render:function(e,l){return t(),a("svg",me,fe)}}),be={ref:"setParameterRef",class:"sendBox bg-[#fff] border-2 border-transparent dark:bg-[#19191B]"},he={class:"borderBox dark:bg-[#3E6AE7] bg-[#D1D1D1]"},ke={class:"inputBox bg-[#fff] dark:bg-[#24252B]"},we={key:0,style:{width:"100%",padding:"12px",height:"300px",position:"absolute",bottom:"100px",left:"0","border-radius":"12px 12px 0 0"},class:"border dark:border-[#27272A] border-[#E7E7E7] bg-[#F8F9F9] dark:bg-[#19191B]"},Ee={style:{display:"flex","justify-content":"space-between"}},Fe={style:{"overflow-y":"auto",height:"90%","overflow-x":"hidden"}},Ae=["onClick"],Ce=["src"],Ie={style:{width:"100%","margin-left":"4px"}},Be={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis"}},je={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",width:"90%"}},_e={style:{width:"100%"}},Se={class:"submitBox flex w-[100%]"},Te={style:{"flex-grow":"1",display:"flex",gap:"20px","padding-left":"20px"}},ze={class:"translatr",style:{display:"flex","align-items":"center"}},De={class:"btnBox"},Ve={key:0,style:{display:"flex"}},Me={key:1,class:"loader"},Ue=_(e({__name:"submitTask",props:{mode:String,isSuccess:Boolean,handleprompt:String},emits:["submit"],setup(e,{emit:_}){const S=e,T=_,z=i("mjBase"),D=s(""),V=s(),M=s(),U=s(),N=s(),P=s(),R=s(),H=s(0),Q=s(0),L=s(""),O=s([]),q=s(!1),G=r(),K=n((()=>"dark"===G.theme)),Z=s("--fast"),X=s(1),Y=s(),W=s(!1),J=s(),ee=s(),te=s(!1),ne=s([]),oe=s(!1);function de(){w().then((e=>{Y.value=e.data}))}function ue(){z.mjParams.value.prompt=L.value,L.value?(W.value=!1,q.value=!1):W.value=!0}function pe(e){L.value=e,z.mjParams.value.prompt=e}function ce(e){0==e?(X.value=0,z.mjParams.value.mode=2,Z.value="--relax"):1==e&&(X.value=1,z.mjParams.value.mode=1,Z.value="--fast")}function ve(){L.value?(W.value=!1,q.value=!1):W.value=!0}o({keys:["dialogueTail","robotAvatar","mjModel","relax_mjDeduction1","relax_mjDeduction2","fast_mjDeduction1","fast_mjDeduction2","trubo_mjDeduction1","trubo_mjDeduction2","fast_vip_free","relax_vip_free","trubo_vip_free"]}).then((e=>{const{relax_mjDeduction1:t,fast_mjDeduction1:a,trubo_mjDeduction1:l,fast_vip_free:i,relax_vip_free:s,trubo_vip_free:r}=e.data;V.value=Number(t),M.value=Number(a),U.value=Number(l),N.value=Number(i),P.value=Number(s),R.value=Number(r),D.value=e.data.mjModel})),d((()=>{de()})),u({page:1,size:20}).then((e=>{O.value=e.data.rows})),p(S,(e=>{console.log(e),e.isSuccess?(L.value="",oe.value=!1,H.value++,de()):e.handleprompt&&(L.value=e.handleprompt,z.mjParams.value.prompt=e.handleprompt)}));const xe=()=>{J.value.open()},ge=()=>{ee.value.open()};function me(){te.value=!te.value,te.value?(Q.value=1,z.mjParams.value.translate=1):(Q.value=0,z.mjParams.value.translate=0)}function fe(){if(!L.value)return;if(1==oe.value)return;oe.value=!0;const{roles:e,styles:t}=z.mjParams.value;z.mjParams.value.mats=[],z.styleMode.value&&(z.mjParams.value.prompt=z.mjParams.value.prompt+" "+z.styleMode.value),ne.value.forEach((a=>{-1==e.indexOf(a)&&-1==t.indexOf(a)&&z.mjParams.value.mats.push(a)}));const{ar:a,c:l,no:i,q:s,s:r,weird:n}=z.extendArr.value;z.mjParams.value.extend=`${i?i+" ":""}${S.mode?S.mode+" ":""}${a?a+" ":"--ar 1:1 "}${s?s+" ":"--q 1 "}${r?r+" ":"--s 0 "}${l?l+" ":"--c 0 "}${n||""}${Z.value?Z.value+" ":""}`;let o={params:z.mjParams.value,type:$.TEXT_TO_IMAGE};T("submit",o),ne.value=[]}const ye=({focused:e,checked:t})=>{if(t){const t={background:"linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"};return e&&(t.boxShadow="0 0 0 2px #957df480"),t}};return(e,i)=>(t(),a("div",be,[c(ie,{ref_key:"inspirationRef",ref:J,onTextToImg:pe,type:"mj"},null,512),c(se,{ref_key:"thinkRef",ref:ee,onTextToImg:pe,type:"mj"},null,512),l("div",he,[l("div",ke,[W.value&&O.value.length?(t(),a("div",we,[l("div",Ee,[i[5]||(i[5]=l("p",null,"推荐关键词",-1)),K.value?(t(),a("img",{key:0,style:{cursor:"pointer"},onClick:i[0]||(i[0]=e=>W.value=!1),src:ae,alt:""})):(t(),a("img",{key:1,style:{cursor:"pointer"},onClick:i[1]||(i[1]=e=>W.value=!1),src:le,alt:""}))]),l("div",Fe,[(t(!0),a(v,null,x(O.value,(e=>(t(),a("div",{onClick:t=>function(e){W.value=!1,L.value=e.suggestEn,z.mjParams.value.prompt=e.suggestEn}(e),class:E(K.value?"item":"item1"),style:{"margin-top":"12px",display:"flex",padding:"8px",width:"100%","align-items":"center",cursor:"pointer"},key:e.id},[l("img",{style:{width:"50px",height:"50px"},src:e.image,alt:""},null,8,Ce),l("div",Ie,[l("div",Be,F(e.suggestCn),1),l("div",je,F(e.suggestEn),1)])],10,Ae)))),128))])])):g("",!0),l("div",_e,[m(l("textarea",{onInput:ue,onFocus:ve,"onUpdate:modelValue":i[2]||(i[2]=e=>L.value=e),type:"text",class:"inp dark:text-[#A1A8B4] text-[#8B8C8C]",placeholder:"在此描述画面的关键词，注意不要在此填入萝莉、性感、血腥等敏感词内容，否则100%不会出图",style:{resize:"none",height:"40px"}},null,544),[[f,L.value]])]),l("div",Se,[l("span",Te,[c(b(B),null,{default:y((()=>[1==X.value?(t(),A(b(I),{key:0,style:{background:"#4e5058"},onClick:i[3]||(i[3]=e=>ce(0))},{icon:y((()=>[c(b(C),null,{default:y((()=>[c(b(re))])),_:1})])),default:y((()=>[i[6]||(i[6]=h(" 快速模式 "))])),_:1})):g("",!0),0==X.value?(t(),A(b(I),{key:1,onClick:i[4]||(i[4]=e=>ce(1))},{icon:y((()=>[c(b(C),null,{default:y((()=>[c(b(re))])),_:1})])),default:y((()=>[i[7]||(i[7]=h(" 常规模式 "))])),_:1})):g("",!0)])),_:1}),l("div",ze,[i[8]||(i[8]=l("p",{style:{"margin-right":"4px"},class:"text-[#76798B] dark:text-[#fff]"},"自动翻译",-1)),c(b(j),{"onUpdate:value":me,"rail-style":ye,size:"small"})]),l("div",{onClick:ge,class:"bg-[#e0e0e6] dark:bg-[#4E5058]",style:{padding:"0px 6px","border-radius":"4px",height:"30px","font-size":"12px","margin-right":"12px",cursor:"pointer",display:"flex","align-items":"center"}},i[9]||(i[9]=[l("img",{style:{"margin-right":"2px",cursor:"pointer"},src:"/static/svg/lx-a34f3f30.svg",alt:""},null,-1),h(" 联想")])),l("div",{onClick:xe,class:"bg-[#e0e0e6] dark:bg-[#4E5058]",style:{padding:"0px 6px","border-radius":"4px",height:"30px","font-size":"12px","margin-right":"12px",cursor:"pointer",display:"flex","align-items":"center","margin-left":"-15px"}},i[10]||(i[10]=[l("img",{style:{"margin-right":"2px",cursor:"pointer"},src:"/static/svg/submitBot-16c85ce6.svg",alt:""},null,-1),h(" 提示词")]))]),l("div",De,[l("div",{class:"btn bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",onClick:fe,style:k(L.value?"":"cursor: not-allowed;")},[oe.value?(t(),a("div",Me)):(t(),a("div",Ve,i[11]||(i[11]=[l("img",{src:"/static/svg/submit-f29501d6.svg",alt:""},null,-1),l("p",{style:{"margin-left":"4px",color:"#fff","font-size":"13px"}},"提交",-1)])))],4)])])])])],512))}}),[["__scopeId","data-v-6a956a50"]]),Ne="/static/svg/mjMore-9acf549f.svg",Pe={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},Re={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},He={style:{display:"flex","align-items":"stretch",height:"40px",gap:"10px"}},Qe={style:{"margin-top":"12px"}},Le={style:{border:"1px dashed #464646",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},Oe={style:{"font-size":"13px"}},qe={key:0,class:"textToImg"},Ge={style:{"margin-top":"20px"}},Ke={style:{display:"flex","align-items":"stretch",gap:"10px","flex-wrap":"wrap"},class:"mode-group-list"},Ze={style:{display:"flex","align-items":"center",gap:"10px","flex-wrap":"wrap","margin-top":"20px"}},Xe=["onClick"],Ye={style:{"margin-top":"20px"}},We={class:"style_card"},Je={class:"styleBox",ref:"container"},$e=["onClick"],et=["onClick"],tt={class:"styleImgText"},at=["src"],lt={style:{"margin-top":"0px",cursor:"pointer"},class:"uploadPic"},it={style:{display:"flex","flex-wrap":"wrap",gap:"15px"}},st=["onClick"],rt=["src"],nt={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},ot=["onClick"],dt=["onBlur","onUpdate:modelValue","onInput"],ut={key:1},pt={key:1,style:{width:"1px",height:"1px"}},ct={style:{display:"flex","align-items":"center",height:"28px"}},vt={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},xt={key:1},gt={key:1,style:{width:"1px",height:"1px"}},mt={style:{display:"flex","align-items":"center",height:"28px"}},ft={class:"upload",style:{position:"relative","margin-left":"4px"}},yt={style:{position:"absolute",width:"100%",bottom:"0"}},bt={class:"uploadOther dark:bg-[#383838] bg-[#FFFFFF]"},ht={style:{display:"flex","align-items":"center",height:"28px"}},kt={class:"uploadOther dark:bg-[#383838] bg-[#FFFFFF]"},wt={style:{display:"flex","align-items":"center",height:"28px"}},Et={style:{display:"flex"}},Ft={style:{display:"flex","align-items":"center"}},At={style:{"margin-right":"4px"}},Ct={key:0,style:{position:"absolute",width:"100%",left:"0",top:"40px"},class:"dark:bg-[#383838] bg-[#fff] selectIW"},It=["onClick"],Bt={style:{"margin-top":"20px"}},jt={class:"sizeMain",style:{"margin-top":"6px"}},_t=["onClick"],St={style:{height:"40px",display:"flex","align-items":"center"}},Tt=["src"],zt={key:0,class:"text-[#b4b4b4] dark:text-[#b4b4b4]"},Dt={key:1,class:"text-[#b4b4b4] dark:text-[#b4b4b4]",style:{display:"flex"}},Vt={class:"text-[#b4b4b4] dark:text-[#b4b4b4]"},Mt={style:{"margin-top":"0px"}},Ut={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},Nt={style:{"margin-top":"20px"}},Pt={class:"seedBox"},Rt={style:{"margin-top":"20px"}},Ht={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Qt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Lt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},Ot={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},qt={style:{"flex-grow":"1"}},Gt={style:{"margin-top":"20px"}},Kt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Zt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Xt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},Yt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Wt={style:{"flex-grow":"1"}},Jt={style:{"margin-top":"20px"}},$t={style:{"font-size":"12px"}},ea={key:0,style:{position:"absolute",top:"30px",width:"100%",left:"0","z-index":"100",padding:"0 8px"},class:"dark:bg-[#222325] bg-[#F0F0F0]"},ta=["onClick"],aa={style:{"margin-top":"20px"}},la={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},ia={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},sa={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},ra={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},na={style:{"flex-grow":"1"}},oa={key:1,class:"ImgToTextBox"},da={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},ua={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},pa=["src"],ca={key:2,class:"imgMixImg",style:{height:"calc(100vh - 54px)"}},va={style:{display:"flex","flex-wrap":"wrap"}},xa={style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},ga=["src"],ma=["onClick"],fa={style:{"margin-top":"20px"}},ya={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ba={class:"sizeMain"},ha=["onClick"],ka={style:{height:"40px",display:"flex","align-items":"center"}},wa={class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Ea={class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Fa={key:3,class:"AIBox"},Aa=["src"],Ca={key:1,class:"text-[#10A37F] dark:text-[#94989f]"},Ia=["src"],Ba={key:1,class:"text-[#10A37F] dark:text-[#94989f]"},ja={key:4,class:"bottom border-t dark:border-[#383737] border-[#383737]"},_a={style:{padding:"0 30px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},Sa=_(e({__name:"SubSidebar",props:{drawType:String},emits:["changeDataType","stylesList","rolesList","iwValue","swValue","cwValue","ar","no","s","c","q","weird","matsList","close","incantationCn","submitData"],setup(e,{emit:r}){const o=S(),d=e,u=n((()=>o.isLogin)),w=n((()=>o.userInfo));!w.value||!w.value.lifetimeVip||w.value.lifetimeVip;const A=i("mjBase"),B=s(!1);s(!1);const _=s(d.drawType),O=r,q=T(),G=z(),{selectFile:K}=ce(),Z=s(0),X=s(!1);function Y(e){_.value=e,O("changeDataType",_.value)}s(!1);const W=s(!1);function J(){W.value=!1}const te=s(),ae=s();function le(){W.value=!0,setTimeout((()=>{Q((()=>{ae.value[0].focus()}))}),100)}const ie=[{name:"--iw 0.25 默认 相似度30%",id:0,value:.25,isSelect:!0},{name:"--iw 0.5 相似度40%",id:1,value:.5,isSelect:!1},{name:"--iw 1 相似度50%",id:2,value:1,isSelect:!1},{name:"--iw 1.25 相似度60%",id:3,value:1.25,isSelect:!1},{name:"--iw 1.5 相似度70%",id:4,value:1.5,isSelect:!1},{name:"--iw 1.75 相似度80%",id:5,value:1.75,isSelect:!1},{name:"--iw 2 相似度90%",id:6,value:2,isSelect:!1}],se=s(ie[Z.value].value),re=s(0),de=s(""),ue=s(""),ve=s(0),xe=s("195px"),me=s(""),fe=s({Setwidth:1,Setheight:1}),be=s(0),he=s(!1),ke=[{name:"1x - 默认",id:0,isSelect:!0,value:1},{name:"0.25x",id:1,isSelect:!1,value:.25},{name:"0.5x",id:2,isSelect:!1,value:.5}],we=s(ke[be.value].value),Ee=s([]),Fe=s(0);function Ae(){O("s",ve.value)}const Ce=s(0);function Ie(){O("c",Ce.value)}const Be=s(0);function je(){O("weird",Be.value)}function _e(){}p(de,(e=>{O("no",de.value)}));const Se=s();function Te(){Se.value>100?Se.value=100:Se.value<0&&(Se.value=0),O("cwValue",Se.value)}const ze=s([]),De=s([]);const Ve=s([]);const Me=s("/api/file/upload2Local");async function Ue(e=1){let t;if(1===e){if(t=await K(),!t)return void q.error("选择文件错误")}else t=e;const a=new FormData;a.append("file",t),await L.post(Me.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{if(t.data){let{data:e}=t.data;if(0!=ze.value.filter((t=>t.src==e)).length)return void q.error("不可重复上传相同的图片");ze.value.push({src:e,cwIsShow:!1,swIsShow:!1,swValue:"",swinpIsShow:!1}),O("matsList",e)}1!==e&&G.updateRecordDialog(!1)}))}function Sa(){}p(fe.value,(e=>{if(console.log("数据发生变化",e),"自定义"==me.value){let t=Number(e.Setwidth)+":"+Number(e.Setheight);O("ar",t)}}));const Ta=[{name:"头像框",value:"1:1",width:"16px",height:"16px",id:0},{name:"手机壁纸",value:"1:2",width:"12px",height:"24px",id:1},{name:"电脑壁纸",value:"16:9",width:"20px",height:"12px",id:2},{name:"宣传海报",value:"9:16",width:"12px",height:"20px",id:3},{name:"文章配图",value:"4:3",width:"22px",height:"17px",id:4},{name:"媒体配图",value:"3:4",width:"17px",height:"22px",id:5},{name:"横板名片",value:"3:2",width:"23px",height:"16px",id:6},{name:"小红书",value:"2:3",width:"16px",height:"23px",id:7}],za=s("mj"),Da=s(5),Va=[{name:"MJ6.1(细节纹理)",intro:"MJv6.1震撼来袭",id:5,value:"--v 6.1",group:"mj"},{name:"MJ6.0",intro:"全新6.0ALPHA真实风，格图像",id:0,value:"--v 6.0",group:"mj"},{name:"MJ5.2",intro:"增强真实风格图像细节",id:1,value:"--v 5.2",group:"mj"},{name:"MJ5.1",intro:"专注真实艺术风格图像",id:2,value:"--v 5.1",group:"mj"},{name:"Nj6.0",intro:"官方最新动漫模型同步",id:3,value:"--niji 6",group:"nj"},{name:"Nj5.0",intro:"增强动漫风格图像细节",id:4,value:"--niji 5",group:"nj"}];function Ma(e){var t;Da.value=e,A.mjVersionChange(null==(t=Va.find((t=>t.id==e)))?void 0:t.value)}A.mjVersionChange(Va[0].value),D({page:1,size:20,type:"style"}).then((e=>{let t=e.data.filter((e=>2==e.level));Ee.value=t,Pa(Ee.value[0].pid)}));const Ua=s();const Na=s([]);function Pa(e){V({id:e}).then((e=>{e.data.rows.length&&(Na.value=e.data.rows[0].children)}))}const Ra=({focused:e,checked:t})=>{const a={};return t&&(a.background="linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"),e&&(a.boxShadow="0 0 0 2px #957df480"),a},Ha=s(""),Qa=s([]),La=s(),Oa=s();async function qa(e=1,t){if("imgmiximg"==t&&5==Qa.value.length)return void q.warning("最多上传5张图片");let a;if(1===e){if(a=await K(),!a)return void q.error("选择文件错误")}else a=e;(new FormData).append("file",a),function(e){return new Promise(((t,a)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=function(){const e=l.result.split(",")[1];t(e)},l.onerror=function(){a(new Error("Failed to load file"))}}))}(a).then((e=>{let a="data:image/png;base64,"+e;if("imgToText"==t)Ha.value=a;else if("Ai1"==t)La.value=a;else if("Ai2"==t)Oa.value=a;else if("imgmiximg"==t){if(0!=Qa.value.filter((e=>e==a)).length)return void q.error("不可重复上传相同的图片");Qa.value.push(a)}}))}function Ga(e,t){"imgMixImg"==t?Qa.value=Qa.value.filter((t=>t!=e)):"imgToText"==t?Ha.value="":"Ai1"==t?La.value="":"Ai2"==t&&(Oa.value="")}const Ka=s(1);s(1);const Za=s(0),Xa=[{name:"头像框",intro:"1:2",value:"SQUARE",width:"16px",height:"16px",id:0},{name:"横板名片",intro:"3:2",value:"PORTRAIT",width:"23px",height:"16px",id:1},{name:"小红书",intro:"2:3",value:"LANDSCAPE",width:"16px",height:"23px",id:2}],Ya=s(Xa[Za.value].value);function Wa(){if(u.value){if("imgToText"==_.value){if(!Ha.value)return void q.error("请上传图片");let e={action:ee.IMAGE_TO_TEXT,mode:Ka.value,files:"",base64Array:[Ha.value],type:$.IMAGE_TO_TEXT};O("submitData",e),Qa.value=[],Ha.value=""}else if("imgMixImg"==_.value){if(Qa.value.length<2)return void q.error("请至少上传两张图片");let e={action:ee.IMAGE_MIX_IMAGE,mode:Ka.value,size:Ya.value,base64Array:Qa.value,type:$.IMAGE_MIX_IMAGE};O("submitData",e),Qa.value=[],Ha.value=""}else if("AI"==_.value){if(!La.value)return void q.error("请上传人脸模板图片");if(!Oa.value)return void q.error("请上传替换人脸目标图");let e={params:{action:22,mode:Ka.value,sourceBase64:La.value,targetBase64:Oa.value},type:$.INSIGHT_FACE};O("submitData",e),Qa.value=[],Ha.value=""}}else o.setLoginDialog(!0)}const Ja=s({textToImg:"一款强大的人工智能绘画工具，为用户提供各种创意的绘图功能。",imgToText:"根据您上传的图片，解读出相关的提示词，提示词可用于重新绘制图像",imgMixImg:"可以将图像无缝地融合在一起，最多支持4张图片！图片越靠前，权重越高",AI:"上传原图及人脸图后，AI将自动识别并完成人脸替换"});return(e,i)=>(t(),a("div",Pe,[l("div",Re,[l("div",He,[l("div",{class:E(["textToImg"==_.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),style:{border:"1px solid rgb(70, 70, 70)","border-radius":"10px"},onClick:i[0]||(i[0]=e=>Y("textToImg"))},"文生图 ",2),l("div",{class:E(["imgMixImg"==_.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),style:{border:"1px solid rgb(70, 70, 70)","border-radius":"10px"},onClick:i[1]||(i[1]=e=>Y("imgMixImg"))},"图片混合 ",2),l("div",{class:E(["imgToText"==_.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),style:{border:"1px solid rgb(70, 70, 70)","border-radius":"10px"},onClick:i[2]||(i[2]=e=>Y("imgToText"))},"图片解析 ",2),l("div",{class:E(["AI"==_.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),style:{border:"1px solid rgb(70, 70, 70)","border-radius":"10px"},onClick:i[3]||(i[3]=e=>Y("AI"))},"AI换脸 ",2)]),l("div",Qe,[l("div",Le,[i[27]||(i[27]=l("p",null,"功能介绍",-1)),l("div",Oe,F(Ja.value[_.value]),1)])]),"textToImg"==_.value?(t(),a("div",qe,[l("div",Ge,[i[31]||(i[31]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"模型选择")],-1)),l("div",Ke,[l("div",{onClick:i[4]||(i[4]=e=>{za.value="mj",Ma(5)}),class:E("mj"==za.value?"selected":"")},i[28]||(i[28]=[l("img",{src:"/static/png/bg_mj-512de77e.png"},null,-1)]),2),l("div",{onClick:i[5]||(i[5]=e=>{za.value="nj",Ma(3)}),class:E("nj"==za.value?"selected":"")},i[29]||(i[29]=[l("img",{src:"/static/png/bg_nj-884a3bcb.png"},null,-1)]),2)]),l("div",Ze,[i[30]||(i[30]=l("span",{style:{color:"#9E9E9E","font-size":"13px"}},"版本",-1)),(t(!0),a(v,null,x(Va.filter((e=>e.group==za.value)),((e,l)=>(t(),a("div",{class:E([Da.value==e.id?"type_tab selected_type_tab bg-gradient-to-r from-[#3C69E7] to-[#3C69E7]  ":"bg-[#383838] type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),style:{border:"1px solid rgb(70, 70, 70)","flex-grow":"unset",padding:"5px 8px","border-radius":"5px"},onClick:t=>function(e){Da.value=e.id,A.mjVersionChange(e.value)}(e)},F(e.name),11,Xe)))),256))])]),l("div",Ye,[i[34]||(i[34]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"风格选择")],-1)),l("div",We,[l("div",Je,[(t(!0),a(v,null,x(Ee.value,((e,l)=>(t(),a("div",{class:E(Fe.value==l?"styleItemSelect":"styleItem"),onClick:e=>function(e){Fe.value=e,Pa(Ee.value[e].pid)}(l),key:e.id},F(e.classifyName),11,$e)))),128))],512),l("div",{class:"styleImgBox",style:k({maxHeight:B.value?"unset":xe.value})},[(t(!0),a(v,null,x(Na.value,((e,i)=>(t(),a("div",{class:E(Ua.value==i?"styleImgItemSelect":"styleImgItem"),onClick:t=>function(e){let{incantationEn:t}=e.item;Ua.value=e.index,O("incantationCn",t)}({item:e,index:i})},[l("div",tt,F(e.incantationCn),1),l("img",{src:e.img,alt:""},null,8,at)],10,et)))),256))],4)]),Na.value.length>10?(t(),a("div",{key:0,onClick:i[6]||(i[6]=e=>B.value=!B.value),style:{"margin-top":"10px"},class:"flex justify-center w-[100%] cursor-pointer"},[B.value?(t(),a(v,{key:1},[i[33]||(i[33]=l("span",null,"收起",-1)),c(b(C),{size:"20"},{default:y((()=>[c(b(ye))])),_:1})],64)):(t(),a(v,{key:0},[i[32]||(i[32]=l("span",null,"展开更多",-1)),c(b(C),{size:"20"},{default:y((()=>[c(b(ge))])),_:1})],64))])):g("",!0)]),c(b(R),{"arrow-placement":"right",class:"role-collapse"},{default:y((()=>[c(b(N),{class:"role-collapse-item",title:"参考图/角色一致性/风格一致性",name:"1"},{default:y((()=>[l("div",lt,[i[47]||(i[47]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"参考图")],-1)),l("div",it,[(t(!0),a(v,null,x(ze.value,((e,s)=>(t(),a("div",{class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",key:s,style:{position:"relative"}},[l("span",{class:"remove",onClick:M((e=>ze.value.splice(s,1)),["stop"])},i[35]||(i[35]=[l("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHdSURBVDiNtdWxi9pgHMbxby4nFEvuQMEIxeHQLYtCHXTQKVPBRRw6ZHCNe8YGuohjB+PgnyB2OOgYgoIedFCHLjlxKgen5YbrcBauwQ53ATmScG29H7wE8vB8El4SXgE45//mN/AdGANfgF8AwgHg/bkCPgA/jg6IArwBPgKvDg37+LuXgAEqLwVnQuHRaFSczWZlRVHiQbmiKPHlclkdjUbFgPg4FJYkKVYoFJK2bZee4oqixG3bLuVyuRNJkmJB/VBY07TFarW6lWU5vo/7qCzL8dVqdatp2iKoH/kdp1Kp2HQ6LWWz2dP1en3XarUW3W4376Plcvlis9nc/zXs44PBIF+pVNL+vfF4fN1oNBZhKERshT+bzebeNE3X87wdgOd5O9M03Sj0WbBhGBnHcaqiKArz+fxGFEXBcZyqYRiZqJ4IvI9CO51OHqDX613WarWFLMtCsVhMqqqa3m6328lk8jOsfx602u32t93jWJbl7meWZblhmb9Ct6LZbJ75b6rruruf6bru9nq9SwBVVdNBfQH4DBw/Der1ejKRSMT6/f512MPr9XoSYDgc3gTBn4CzsPK/jgi8BvKHho94OE6uDg2LPJxZX4G3wMkhYYA7wH68ngISz/h5ouYPRiq/PPmBkeEAAAAASUVORK5CYII="},null,-1)]),8,st),""!=e.src?(t(),a("div",{key:0,style:{display:"flex","justify-content":"center","align-items":"center"},class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",onClick:i[7]||(i[7]=e=>Ue(1))},[l("img",{src:e.src,alt:""},null,8,rt)])):(t(),a("div",{key:1,class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0"},onClick:i[8]||(i[8]=e=>Ue(1))},"点击上传")),l("div",{style:k([{position:"absolute",width:"100%",bottom:"0"},e.src?"opacity: 0.9;":""])},[l("div",nt,[e.swIsShow?(t(),a("div",{key:0,style:{"font-size":"12px",padding:"4px 12px",width:"56px","border-radius":"8px",color:"#fff","text-align":"center",cursor:"pointer",border:"1px solid"},onClick:t=>function(e){e.swinpIsShow=!0,setTimeout((()=>{Q((()=>{te.value[0].focus()}))}),100)}(e)},[e.swinpIsShow?m((t(),a("input",{key:0,onBlur:t=>function(e){e.swinpIsShow=!1}(e),ref_for:!0,ref_key:"refInput",ref:te,"onUpdate:modelValue":t=>e.swValue=t,style:{width:"100%","background-color":"transparent"},type:"text",onInput:t=>function(e){e.swValue>100?e.swValue=100:e.swValue<0&&(e.swValue=0),O("swValue",e.swValue)}(e)},null,40,dt)),[[f,e.swValue]]):(t(),a("p",ut,F(e.swValue?e.swValue:"权重"),1))],8,ot)):(t(),a("div",pt)),l("div",ct,[i[36]||(i[36]=l("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1)),c(b(j),{size:"small",disabled:0==e.swIsShow&&3==De.value.length,value:e.swIsShow,"onUpdate:value":[t=>e.swIsShow=t,t=>function(e){1==e.swIsShow?De.value.push(e.src):0==e.swIsShow&&De.value.forEach((t=>{t==e.src&&(De.value=De.value.filter((t=>t!=e.src)))})),O("stylesList",De.value)}(e)],"rail-style":Ra},null,8,["disabled","value","onUpdate:value"])])]),l("div",vt,[e.cwIsShow?(t(),a("div",{key:0,style:{"font-size":"12px",padding:"4px 12px",width:"56px","border-radius":"8px",color:"#fff","text-align":"center",border:"1px solid"},onClick:le},[W.value?m((t(),a("input",{key:0,type:"text",onBlur:J,ref_for:!0,ref_key:"refInput1",ref:ae,"onUpdate:modelValue":i[9]||(i[9]=e=>Se.value=e),style:{width:"100%","background-color":"transparent"},onInput:Te},null,544)),[[f,Se.value]]):(t(),a("p",xt,F(Se.value?Se.value:"--cw"),1))])):(t(),a("div",gt)),l("div",mt,[i[37]||(i[37]=l("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1)),c(b(j),{size:"small","onUpdate:value":[t=>function(e){console.log(e),1==!e.cwIsShow&&(1==Ve.value.length&&(Ve.value=[],ze.value.forEach((e=>{e.cwIsShow=!1}))),Ve.value.push(e.src),console.log(Ve.value)),O("rolesList",Ve.value)}(e),t=>e.cwIsShow=t],value:e.cwIsShow,"rail-style":Ra},null,8,["onUpdate:value","value"])])])],4)])))),128)),l("div",ft,[l("div",{class:"title dark:text-[#006DF7] text-[#006DF7]",style:{padding:"47px 0",border:"1px dashed #47474e"},onClick:i[10]||(i[10]=e=>Ue(1))},i[38]||(i[38]=[l("div",{style:{"font-size":"13px",color:"#94989f"}},"将图片拖到此处",-1),l("div",{style:{"font-size":"14px",color:"#d2d7e0",display:"flex","align-items":"center",gap:"6px","justify-content":"center"}},[l("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAESSURBVEiJ7VXbbYNAEJxxBXQQ3IFTQS4d0II7cAlxBXEHaSEd2B04qQBSAXQw/sgeQhC8SxwpPx5pBYd2Zh+3dwB3/DcYdZS0AfBky0+Spz/JQFKSdNQUtQW9SXwjqf1BPKO9KYhl6aH+rXgVEM9IS4STpDenNZMqjFN54q8LROfwMie+C5DPZh52Y/FCfktqSaVZ7fi2kopx3z1COfAvAwlVALAyjjcFW5JNXtj71uE8DAN8XHF8B9BZlYVZAtABOF3hfQF2F1n5kQPzbM9jwHdNslkBfcmHACmKw7ClAPpJ8qYjBQbirMEE5T0AyY7kGsAe3/1dig7AnuQjyZ4/+z+wfSlHn/MwjG/QZtKSO6K4AIBShiP+yKTqAAAAAElFTkSuQmCC"}),h("或点击上传")],-1)])),l("div",yt,[l("div",bt,[i[40]||(i[40]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",ht,[i[39]||(i[39]=l("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1)),c(b(j),{size:"small",disabled:"","rail-style":Ra})])]),l("div",kt,[i[42]||(i[42]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",wt,[i[41]||(i[41]=l("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1)),c(b(j),{size:"small",disabled:"","rail-style":Ra})])])])])]),l("div",null,[l("div",{onClick:i[11]||(i[11]=e=>X.value=!X.value),style:{display:"flex",cursor:"pointer","max-width":"100%",width:"100%",padding:"16px","border-radius":"8px","justify-content":"space-between","margin-top":"20px",position:"relative"},class:"border dark:bg-[#383838] dark:border-[#292A2E] bg-[#fff] border-[#E8E8E8]"},[l("div",Et,[i[45]||(i[45]=l("p",{style:{"margin-right":"4px"}},"--iw图片相似度",-1)),c(b(P),{trigger:"hover",placement:"top"},{trigger:y((()=>i[43]||(i[43]=[l("img",{src:oe,alt:""},null,-1)]))),default:y((()=>[i[44]||(i[44]=l("div",{style:{width:"280px"}},"--iw 值越高，上传的图像对最终效果的影响就越大",-1))])),_:1})]),l("div",Ft,[l("p",At,F(ie[Z.value].name),1),i[46]||(i[46]=l("img",{style:{width:"18px",height:"18px"},src:Ne,alt:""},null,-1))]),X.value?(t(),a("div",Ct,[(t(),a(v,null,x(ie,(e=>l("div",{class:"iwItem",style:k(Z.value==e.id?"color:#7369E2":""),key:e.id,onClick:t=>function(e){Z.value=e.id,se.value=e.value,O("iwValue",se.value)}(e)},F(e.name),13,It))),64))])):g("",!0)])])])])),_:1})])),_:1}),l("div",Bt,[i[49]||(i[49]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"生成尺寸--ar")],-1)),i[50]||(i[50]=l("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},"选择生成图像的宽度x高度比例",-1)),l("div",jt,[(t(),a(v,null,x(Ta,(e=>l("div",{class:E([re.value==e.id?" dark:border-[#0066ff] dark:bg-[#383838] sizeSelected":"dark:border-[#292A2E] dark:bg-[#383838] border-[#E8E8E8] bg-[#FFFFFF]","sizeItem border"]),key:e.id,onClick:t=>function(e){re.value=e.id,me.value=e.name,"自定义"!=e.name&&O("ar",e.value)}(e)},[l("div",St,[""!=e.width&&""!=e.height?(t(),a("div",{key:0,style:k({width:e.width,height:e.height}),class:"size bg-[#D3D1D9]"},null,4)):(t(),a("img",{key:1,src:e.iconD,alt:""},null,8,Tt))]),""!=e.value?(t(),a("p",zt,F(e.value),1)):(t(),a("div",Dt,[m(l("input",{onClick:M(Sa,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[12]||(i[12]=e=>fe.value.Setwidth=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[f,fe.value.Setwidth]]),i[48]||(i[48]=l("p",{style:{margin:"0 4px"}},":",-1)),m(l("input",{onClick:M(Sa,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[13]||(i[13]=e=>fe.value.Setheight=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[f,fe.value.Setheight]])])),l("p",Vt,F(e.name),1)],10,_t))),64))])]),c(b(R),{"arrow-placement":"right",class:"role-collapse"},{default:y((()=>[c(b(N),{class:"role-collapse-item",title:"高级参数",name:"1"},{default:y((()=>[l("div",Mt,[i[51]||(i[51]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"不想出现的词")],-1)),l("div",Ut,[m(l("textarea",{"onUpdate:modelValue":i[14]||(i[14]=e=>de.value=e),onInput:_e,style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"输入不想出现在图像中的内容（例如树木，0/200）"},null,544),[[f,de.value]]),l("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:i[15]||(i[15]=e=>de.value="")}," 清空 ")])]),l("div",Nt,[i[52]||(i[52]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"--seed 种子")],-1)),l("div",Pt,[m(l("input",{class:"inp bg-[#383838] w-[100%]",style:{flex:"1","border-radius":"6px",padding:"4px 6px"},type:"text","onUpdate:modelValue":i[16]||(i[16]=e=>ue.value=e)},null,512),[[f,ue.value]])])]),l("div",null,[l("div",Rt,[l("div",Ht,[l("div",Qt,[i[55]||(i[55]=h("--s 风格化 ")),c(b(P),{trigger:"hover",placement:"top"},{trigger:y((()=>i[53]||(i[53]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:oe,alt:""},null,-1)]))),default:y((()=>[i[54]||(i[54]=l("div",{style:{width:"280px"}},"这个值越低会更符合 prompt 的描述,数值越高艺术性就会越强，但跟 prompt关联性就会比较弱",-1))])),_:1})])]),l("div",Lt,[l("div",Ot,F(ve.value),1),l("div",qt,[c(b(H),{value:ve.value,"onUpdate:value":i[17]||(i[17]=e=>ve.value=e),step:1,onDragend:Ae},null,8,["value"])])])]),l("div",Gt,[l("div",Kt,[l("div",Zt,[i[58]||(i[58]=h("--c 多样化 ")),c(b(P),{trigger:"hover",placement:"top"},{trigger:y((()=>i[56]||(i[56]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:oe,alt:""},null,-1)]))),default:y((()=>[i[57]||(i[57]=l("div",{style:{width:"280px"}},"这个值越低生成的四张图风格越相似，反之差异越大",-1))])),_:1})])]),l("div",Xt,[l("div",Yt,F(Ce.value),1),l("div",Wt,[c(b(H),{value:Ce.value,"onUpdate:value":i[18]||(i[18]=e=>Ce.value=e),step:1,onDragend:Ie},null,8,["value"])])])]),l("div",Jt,[i[60]||(i[60]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},"--quelity 质量 ")],-1)),l("div",{class:"selectQuelity dark:bg-[#383838] bg-[#F0F0F0] flex",style:{position:"relative",flex:"1",cursor:"pointer",padding:"4px 6px","border-radius":"6px",display:"flex","margin-left":"8px","align-items":"center","justify-content":"space-between"},onClick:i[19]||(i[19]=e=>he.value=!he.value)},[l("p",$t,F(ke[be.value].name),1),i[59]||(i[59]=l("img",{style:{width:"12px",height:"12px"},src:Ne,alt:""},null,-1)),he.value?(t(),a("div",ea,[(t(),a(v,null,x(ke,(e=>l("div",{class:"",onClick:t=>function(e){be.value=e.id,we.value=e.value,O("q",we.value)}(e),style:k([{padding:"4px 0"},be.value==e.id?"color:#7369E2":""]),key:e.id},F(e.name),13,ta))),64))])):g("",!0)])]),l("div",aa,[l("div",la,[l("div",ia,[i[63]||(i[63]=h("--weird 奇妙 ")),c(b(P),{trigger:"hover",placement:"top"},{trigger:y((()=>i[61]||(i[61]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:oe,alt:""},null,-1)]))),default:y((()=>[i[62]||(i[62]=l("div",{style:{width:"280px"}},"生成的图像引入奇特和离奇的特质，从而产生独特而意想不到的结果",-1))])),_:1})])]),l("div",sa,[l("div",ra,F(Be.value),1),l("div",na,[c(b(H),{value:Be.value,"onUpdate:value":i[20]||(i[20]=e=>Be.value=e),step:1,onDragend:je},null,8,["value"])])])])])])),_:1})])),_:1})])):g("",!0),"imgToText"==_.value?(t(),a("div",oa,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[21]||(i[21]=e=>qa(1,"imgToText"))},[i[65]||(i[65]=l("div",{style:{display:"flex","margin-bottom":"6px"}},[l("div",null,[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传图片"),l("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==Ha.value?(t(),a("div",da,i[64]||(i[64]=[l("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),l("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),l("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(t(),a("div",ua,[l("img",{src:Ha.value,style:{height:"100%"}},null,8,pa)]))]),i[66]||(i[66]=l("div",{style:{"margin-top":"20px"}},[l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"温馨提示")]),l("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 同官方的/describe命令系统将根据您上传的图片，解读出多个相关的提示词，您可以根据解读出的提示词重新绘制图像。 ")],-1))])):g("",!0),"imgMixImg"==_.value?(t(),a("div",ca,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[22]||(i[22]=e=>qa(1,"imgmiximg"))},[i[69]||(i[69]=l("div",{style:{display:"flex","margin-bottom":"6px"}},[l("div",null,[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传图片"),l("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"（请上传2-5张图片） ")])],-1)),l("div",va,[l("div",xa,[(t(!0),a(v,null,x(Qa.value,((e,s)=>(t(),a("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]",key:s},[e?(t(),a("img",{key:0,src:e,alt:""},null,8,ga)):g("",!0),l("div",{class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:M((t=>Ga(e,"imgMixImg")),["stop"])},i[67]||(i[67]=[l("img",{src:ne,alt:""},null,-1)]),8,ma)])))),128)),i[68]||(i[68]=l("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]"},[l("p",{class:"text-[#0066ff] dark:text-[#94989f]"},"点击上传")],-1))])])]),l("div",fa,[i[70]||(i[70]=l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"图片尺寸"),l("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"选择生成图像的宽度x高度 ")],-1)),l("div",ya,[l("div",ba,[(t(),a(v,null,x(Xa,(e=>l("div",{class:E([Za.value==e.id?"dark:border-[#0066ff] bg-[#F3FBF8] dark:bg-[#383838] sizeSelected":"dark:border-[#292A2E] dark:bg-[#383838] border-[#E8E8E8] bg-[#FFFFFF]","sizeItem border"]),key:e.id,onClick:t=>function(e){Za.value=e.id,Ya.value=e.value}(e)},[l("div",ka,[l("div",{style:k({width:e.width,height:e.height}),class:E(["size border",Za.value==e.id?"border-[#86CFB5]  dark:bg-[#D3D1D9]":"dark:bg-[#D3D1D9] dark:border-[#46484F] bg-[#F8F9F9] border-[#CDCECE]"])},null,6)]),l("p",wa,F(e.intro),1),l("p",Ea,F(e.name),1)],10,ha))),64))])])]),i[71]||(i[71]=l("div",{style:{"margin-top":"20px"}},[l("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[l("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"温馨提示")]),l("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 同官方的/blend命令图混图，最多可以上传5张图片进行混图，图片越靠前，权重越高。 ")],-1))])):g("",!0),"AI"==_.value?(t(),a("div",Fa,[i[74]||(i[74]=l("div",{class:"line bg-[#EBEBEB] dark:bg-[#222226]"},null,-1)),i[75]||(i[75]=l("div",{class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},[l("p",{style:{"margin-top":"3px","font-size":"12px"}},"第一步，上传人脸模板图片")],-1)),i[76]||(i[76]=l("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 严禁上传违规图（政治人物、色情、暴恐等）违者100%封号 ",-1)),l("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]",onClick:i[24]||(i[24]=e=>qa(1,"Ai1"))},[La.value?(t(),a("img",{key:0,src:La.value,alt:""},null,8,Aa)):(t(),a("p",Ca,"点击上传")),La.value?(t(),a("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[23]||(i[23]=M((e=>Ga(La.value,"Ai1")),["stop"]))},i[72]||(i[72]=[l("img",{src:ne,alt:""},null,-1)]))):g("",!0)]),i[77]||(i[77]=l("div",{style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 注意素材质量，保证脸部足够清晰，为了更好的效果，最好正脸。 ",-1)),i[78]||(i[78]=l("div",{class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},[l("p",{style:{"margin-top":"3px","font-size":"12px"}},"第二步，上传需要替换人脸的目标图片")],-1)),i[79]||(i[79]=l("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"}," 严禁上传违规图（政治人物、色情、暴恐等）违者100%封号",-1)),l("div",{class:"upload border-[2px] border-[#383737] dark:border-[#383737]",onClick:i[26]||(i[26]=e=>qa(1,"Ai2"))},[Oa.value?(t(),a("img",{key:0,src:Oa.value,alt:""},null,8,Ia)):(t(),a("p",Ba,"点击上传")),Oa.value?(t(),a("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[25]||(i[25]=M((e=>Ga(Oa.value,"Ai2")),["stop"]))},i[73]||(i[73]=[l("img",{src:ne,alt:""},null,-1)]))):g("",!0)]),i[80]||(i[80]=U('<div style="font-size:10px;margin-top:10px;" class="text-[#8B8C8C] dark:text-[#6C6E79]" data-v-d27b9c11> 最大2048x2048像素，不超过5MB，建议：五官无遮挡，角度小于20% </div><div style="font-size:10px;" class="text-[#8B8C8C] dark:text-[#6C6E79]" data-v-d27b9c11> 换脸操作只能在写实版人物上进行，漫回类因面部五官比例不统一，是无法完成换脸操作 </div><div class="" style="display:flex;align-items:center;margin-top:8px;" data-v-d27b9c11><p style="margin-top:3px;font-size:12px;" data-v-d27b9c11>第三步，提交任务</p></div><div style="font-size:10px;" class="text-[#8B8C8C] dark:text-[#6C6E79]" data-v-d27b9c11> 免责声明： 本功能效果太逼真！请遵守相关法律法规，反对非法用途，包括但不限于侵犯他人隐私、散布虚假信息，进行诈骗等行为！</div>',4))])):g("",!0),"textToImg"!=_.value?(t(),a("div",ja,[l("div",_a,[c(b(I),{loading:b(A).isLoading.value,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:Wa},{default:y((()=>i[81]||(i[81]=[l("img",{src:pe,style:{"margin-right":"5px"}},null,-1),l("span",null,"生成",-1)]))),_:1},8,["loading"])])])):g("",!0)])]))}}),[["__scopeId","data-v-d27b9c11"]]),Ta={style:{display:"flex",height:"calc(100vh - 68px)",overflow:"hidden"}},za={style:{flex:"1",display:"flex","flex-direction":"column"},class:"contentBox border-l dark:border-[#2A2C30] border-[#EBEBEB] dark:bg-[#181818] bg-[#f5f6f7]"},Da={key:0},Va={key:1},Ma={style:{width:"100%","text-align":"center",display:"flex","justify-content":"center","margin-top":"15px"}},Ua={style:{color:"#eeeeee","font-size":"13px"},class:"end"},Na={style:{display:"flex",cursor:"default"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Pa={key:0,style:{display:"flex","margin-left":"8px"}},Ra=["href"],Ha={key:1,style:{display:"flex","margin-left":"8px"}},Qa=["href"],La=_(e({__name:"midjourney",setup(e){const i=s(""),r=s(""),o=s(""),u=s(""),m=s(""),f=S(),y=n((()=>f.isLogin)),b=T(),k=s(""),w=s(0),E=s({translate:w.value,prompt:"",styles:[],roles:[],iw:.25,sw:0,cw:0,extend:"",mode:1,mats:[],action:$.TEXT_TO_IMAGE}),C=s({ar:"",no:"",s:"",c:"",q:"",weird:""}),I=O(),B=s("textToImg");function j(e){B.value=e}function _(e){k.value=e}I.query.type&&(B.value=I.query.type),ue({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{u.value=e.data.copyrightTitle,i.value=e.data.icpNumber,r.value=e.data.policeFilingNumber,o.value=e.data.icpUrl,m.value=e.data.policeFilingUrl}));let z=!1;const D=s([]);let V=[];const M=s(!1),U=s(!1),N=s([]);function P(e){E.value.styles=e}function R(e){E.value.roles=e}const H=s([]);function L(e){H.value.push(e)}function ee(e){E.value.iw=e}function ae(e){E.value.sw=Number(e)}function le(e){E.value.cw=Number(e)}function ie(e){let t="--ar "+e;C.value.ar=t}function se(e){let t="--no "+e;C.value.no=t}function re(e){let t="--s "+e;C.value.s=t}function ne(e){let t="--c "+e;C.value.c=t}function oe(e){let t="--q "+e;C.value.q=t}function pe(e){let t="--weird "+e;C.value.weird=t}const ce=s("");function ve(e){ce.value=e||""}let xe=null;const ge=async function(){try{xe&&window.clearTimeout(xe);(await J({jobIds:V.join()})).data.forEach((e=>{const t=N.value.findIndex((t=>t.id===e.id));-1!==t&&N.value.splice(t,1,e),e.status>=3&&(V=V.filter((t=>t!==e.jobId)))})),V.length?xe=setTimeout((()=>ge()),3e3):xe&&window.clearTimeout(xe)}catch(e){xe=setTimeout((()=>ge()),3e3)}};p(y,(async e=>{if(1==e){const e={page:1,size:10},t=await G(e);1===e.page&&(N.value=t.data.rows.reverse())}else N.value.length=0}));const me={page:1,size:10},fe=async function(e){try{U.value=!0;const t=await G(me);1===me.page?N.value=t.data.rows.reverse():N.value=t.data.rows.reverse().concat(N.value),console.log(N.value),V=N.value.filter((e=>[1,2].includes(e.status))).map((e=>e.jobId)),V.length&&ge(),t.data.rows.length<me.size&&(M.value=!0),Q(e?()=>{var e;null==(e=we.value)||e.scrollTo({top:we.value.scrollHeight,behavior:"smooth"}),D.value.length&&D.value[D.value.length-1].scrollIntoView(),setTimeout((()=>{z=!0}),100)}:()=>{var e;let a=0;for(let l=0;l<t.data.rows.length;l++){const t=null==(e=we.value)?void 0:e.children[l];a+=(null==t?void 0:t.offsetHeight)||0}we.value.scrollTop=a}),U.value=!1}catch(t){U.value=!1}},ye=s("mj"),be=s(!1),he=s(),ke=async function(e,t){he.value=!1,be.value=!0;try{let a=null;switch(e.type){case $.TEXT_TO_IMAGE:case $.IMAGE_ACTION:a=await Y(e),Z.emit("getUserInfo",!0);break;case $.IMAGE_MIX_IMAGE:case $.IMAGE_TO_TEXT:a=await X(e),Z.emit("getUserInfo",!0);break;case $.INSIGHT_FACE:a=await K(e),Z.emit("getUserInfo",!0)}if(a){const e=a.data;he.value=!0,be.value=!1;N.value.find((t=>t.id===e.id))||(N.value.push(e),Q((()=>{var e;null==(e=we.value)||e.scrollTo({top:we.value.scrollHeight,behavior:"smooth"})}))),e.status<3&&!V.includes(e.jobId)&&(V.push(e.jobId),ge())}t&&t(Boolean(null==a?void 0:a.success))}catch(a){b.error(a.message),he.value=!0,be.value=!1,t&&t(!1)}},we=s(),Ee=function(e){const t=e.target;z&&t.scrollTop<=20&&(M.value||U.value||(me.page=me.page+1,fe()))};return q((()=>{var e;null==(e=we.value)||e.removeEventListener("scroll",Ee)})),d((()=>{var e;f.getUserInfo(),fe(!0),null==(e=we.value)||e.addEventListener("scroll",Ee)})),W("mjBase",{isLoading:be,mjParams:E,extendArr:C,styleMode:ce,mjVersionChange:function(e){ye.value=e}}),(e,s)=>(t(),a("div",Ta,[c(Sa,{onStylesList:P,onRolesList:R,onIwValue:ee,onSwValue:ae,onCwValue:le,onAr:ie,onNo:se,onS:re,onC:ne,onQ:oe,onWeird:pe,onMatsList:L,onIncantationCn:ve,drawType:B.value,onChangeDataType:j,onSubmitData:ke},null,8,["drawType"]),l("div",za,[s[0]||(s[0]=l("div",{class:"dark:bg-[#FAEBD4] bg-[#FAEBD4]",style:{padding:"10px 15px",display:"flex","align-items":"center","border-radius":"6px"}},[l("img",{style:{width:"18px",height:"14px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAFZSURBVDiNpZRrdcJAEIW/2RMBSKAOUgfFQQgCSg4CAAPNBgNQBdsKaEgVAAqKAyKhCnb6IwRSyiM93H8zd/fuPBfuhJvFzs36q9o294qhDFHZ1L6g1UUbdTHiUNkkaW4rXzxBGQJZ7bsp6GzU8ZgJQooCog3Wb1EzTWy+aN6Ry2KDCNE50EUoUEJEy+Rl2bsWRHAIX/QZ6Bwp7QIl6ntJWqybhb8q6LLYAilQIpSHhDzvI3usTVsEwBjR9a1ULsHZQYTx48qS7V1j8wceAq+8GiR1WbxDtDyS8nnawXNI7EcBFLVtRja3KFNES1SeUAlRughzl8U7Z6PoP0Ga6pV8UdVQS5QiSZcPKAkAYpb7jehcVWoKnk8lf0P9I5BVGyFhk3c2Cp2Nh60FK9HiO0lzi/oHhAJkW3MeEyG4/dgd8GtT3Ky/atuM6vz+czjZ57vgZvHcZf2v2v4BtyCXQqnc60YAAAAASUVORK5CYII=",alt:""}),l("p",{style:{"margin-left":"13px",color:"#9F8152","font-size":"14px"}}," 请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有则违规封号处理。 ")],-1)),l("div",{ref_key:"scrollView",ref:we,style:{flex:"1",overflow:"auto","margin-top":"10px"}},[y.value&&0!=N.value.length?(t(),a("div",Da,[(t(!0),a(v,null,x(N.value,((e,a)=>(t(),A(te,{type:"chat",task:e,key:e.jobId+"-"+e.status,onRemove:()=>function(e){N.value.splice(e,1)}(a),onAddTask:ke},null,8,["task","onRemove"])))),128))])):(t(),a("div",Va,[c(de,{onHandleprompt:_})]))],512),l("div",null,["textToImg"==B.value?(t(),A(Ue,{key:0,handleprompt:k.value,isSuccess:!!he.value&&he.value,mode:ye.value,onSubmit:ke},null,8,["handleprompt","isSuccess","mode"])):g("",!0)]),l("div",Ma,[l("div",Ua,[l("div",Na,[h("版权所有 © "+F(u.value)+" ",1),i.value?(t(),a("div",Pa,[l("a",{href:o.value||"#"},F(i.value),9,Ra)])):g("",!0),r.value?(t(),a("div",Ha,[l("a",{href:m.value||"#"},F(r.value),9,Qa)])):g("",!0)])])])])]))}}),[["__scopeId","data-v-bfea0ee6"]]);export{La as default};
