import{e as a,a9 as e,j as s,r as t,N as l,O as i,P as r,as as o,a6 as n,$ as d,a1 as p,a2 as c,a3 as u,ao as m,R as v,A as g,k as y,bz as x,U as f,Z as k,_ as h,ad as b,bA as w,a0 as j}from"../main-b128e95b.js";import{b as F,D as _,n as E}from"../index/index.e2611b80.js";import{_ as B,a as D}from"../draw-fail/draw-fail.ad8fd01b.js";import"../vip_gray/vip_gray.b1563178.js";import"../baiduThink/baiduThink.0709035c.js";import"../useUpload/useUpload.61fb29a5.js";import"../index/index.27c727e8.js";import"../index/index.5b75f753.js";const T=a=>(p("data-v-2a971709"),a=a(),c(),a),A={class:"dallTaskBox"},L=["src"],C={class:"dallTaskItem bg-[#FFFFFF] dark:bg-[#111113]",style:{padding:"12px","border-radius":"12px",display:"flex","margin-top":"12px"}},I={class:"avator"},z={class:"discord-avatar border border-[#E8E8E8] dark:border-[#2D2E33]"},P={key:0,src:F,alt:""},U={key:1,src:B,alt:""},H={class:"content",style:{"margin-left":"12px",width:"100%"}},O={style:{display:"flex","justify-content":"space-between"}},R=T((()=>r("div",{style:{display:"flex","align-items":"center"}},[r("span",{class:"discord-en"},"DALL"),r("span",{class:"discord-cn dark:bg-[#101C18] bg-[#F3FBF8]"},"Ai机器人")],-1))),Z={style:{display:"flex",width:"50px",cursor:"pointer"}},$={key:0,src:"/static/svg/Delete-4144aadd.svg",alt:""},N={key:1,src:"/static/svg/Delete copy-ae974714.svg",alt:""},Q=T((()=>r("p",{style:{"font-size":"14px","margin-top":"3px","margin-left":"4px"}},"删除",-1))),q={class:"title",style:{"margin-top":"4px"}},G=["src"],J={key:1,style:{width:"20%",height:"246px",display:"flex","justify-content":"center","align-items":"center"}},K={key:0,style:{display:"flex","flex-direction":"column","align-items":"center"}},M=[T((()=>r("img",{src:D,alt:""},null,-1))),T((()=>r("p",{style:{"margin-top":"8px",color:"#D4237A"}},"绘画失败",-1)))],S={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},V=[T((()=>r("div",{class:"loader"},null,-1))),T((()=>r("p",{style:{"margin-top":"12px"}},"生成中，请稍等...",-1)))],W=u(a({__name:"index",props:{task:{type:Object}},setup(a){const p=e(),c=s((()=>"dark"===p.theme)),u=a,m=t(!1),v=t("");return(a,e)=>(l(),i("div",A,[m.value?(l(),i("div",{key:0,onClick:e[1]||(e[1]=a=>{m.value=!1,v.value=""}),class:"mask"},[r("img",{src:v.value,style:{width:"auto",height:"90%"},alt:"",onClick:e[0]||(e[0]=o((()=>{}),["stop"]))},null,8,L)])):n("",!0),r("div",C,[r("div",I,[r("div",z,[c.value?(l(),i("img",P)):(l(),i("img",U))])]),r("div",H,[r("div",O,[R,r("div",Z,[c.value?(l(),i("img",N)):(l(),i("img",$)),Q])]),r("div",q,d(u.task.prompt),1),r("div",null,[u.task.answer?(l(),i("img",{key:0,style:{width:"20%",height:"auto","margin-top":"12px",cursor:"pointer"},onClick:e[2]||(e[2]=a=>{return e=u.task,m.value=!0,void(v.value=e.thumbImg?e.thumbImg:e.answer);var e}),src:u.task.answer,alt:""},null,8,G)):(l(),i("div",J,[u.task.fail?(l(),i("div",K,M)):(l(),i("div",S,V))]))])])])]))}}),[["__scopeId","data-v-2a971709"]]),X={class:"bg-[#F8F9F9] dark:bg-[#111113]",style:{display:"flex",padding:"12px","box-sizing":"border-box",height:"calc(100% - 60px)",overflow:"hidden"}},Y={style:{flex:"1",display:"flex","flex-direction":"column","margin-left":"10px"},class:"contentBox border-l dark:border-[#2A2C30] border-[#EBEBEB] bg-[#fff] dark:bg-[#24252B]"},aa=a({__name:"dall",setup(a){const e=m(),o=v(),n=s((()=>o.isLogin)),d=t(null);function p(){let a=d.value;a.scrollTo({top:a.scrollHeight+100,behavior:"smooth"}),console.log(a.scrollHeight)}g(n,(a=>{a&&F()})),y((()=>{setTimeout((()=>p()),300)}));const c=t([]);y((()=>{F()})),t(!1);const u={page:1,size:20,model:"DALL-E2"},F=async function(){const a=await x(u);c.value=a.data.reverse(),setTimeout((()=>p()),300)},B=t(!1);async function D(a){let s={id:0,prompt:a.prompt,answer:"",fail:!1};B.value=!0,c.value.push(s),setTimeout((()=>p()),300),await w(a).then((a=>{c.value[c.value.length-1].answer=a.data[0],B.value=!1,j.emit("getUserInfo",!0)})).catch((a=>{B.value=!1,c.value[c.value.length-1].fail=!0,e.error(a.message)}))}const T=t("");function A(a){T.value=a}return(a,e)=>(l(),i("div",X,[f(_,{type:"dall",makePrompt:T.value,isLoading:B.value,onDallprompt:D},null,8,["makePrompt","isLoading"]),r("div",Y,[r("div",{style:{flex:"1","overflow-y":"auto",padding:"12px"},ref_key:"taskBox",ref:d},[n.value&&0!=c.value.length?(l(!0),i(k,{key:0},h(c.value,(a=>(l(),b(W,{key:a.id,task:a},null,8,["task"])))),128)):(l(),b(E,{key:1,onHandleprompt:A}))],512)])]))}});export{aa as default};
