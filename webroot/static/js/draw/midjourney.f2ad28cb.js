import{e,a7 as l,aj as a,au as t,j as i,r as s,A as n,bi as o,bj as r,O as d,P as u,Z as p,_ as c,U as v,X as g,W as f,$ as x,a4 as m,F as y,ab as h,ap as b,N as w,a8 as k,H as C,ag as F,bd as E,ao as A,bk as I,K as B,a1 as S,bl as j,ad as T,k as _,bm as z,ak as U,ae as D,Y as V,ai as L,aP as M,bn as O,R as Q,aQ as P,a$ as N,ax as G,aB as q,a0 as J,aA as K,az as Y,ay as H}from"../main-6c725c30.js";import{a as R}from"../index/index.27c727e8.js";import{M as X}from"../index/index.e3065903.js";import{_ as Z,i as W,a as $,D as ee,n as le}from"../index/index.cc63bc94.js";import{_ as ae,a as te}from"../close copy/close copy.08564ec3.js";import{u as ie}from"../useUpload/useUpload.94c17c32.js";import{_ as se,b as ne}from"../baiduThink/baiduThink.9c8f3a5e.js";import{F as oe}from"../FlashOutline/FlashOutline.f137a70f.js";import{O as re}from"../OptionsOutline/OptionsOutline.c3969d7e.js";import{a as de}from"../music/music.7f933b9b.js";import"../draw-fail/draw-fail.ad8fd01b.js";import"../index/index.5b75f753.js";import"../index/index.c5596e0e.js";import"./draw.3889f162.js";import"../Popconfirm/Popconfirm.534000dc.js";const ue="/static/svg/mjMore-9acf549f.svg",pe={class:"setParameterBox dark:bg-[#19191B] bg-[#fff] border border-[#E7E7E7] dark:border-[#242427] shadow-lg"},ce={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"12px"},class:"border-b dark:border-[#292A2E] border-[#E8E8E8]"},ve={style:{display:"flex","align-items":"center"}},ge={key:0,style:{width:"16px",height:"16px"},src:"/static/svg/setParameter-81a8da33.svg",alt:""},fe={key:1,style:{width:"16px",height:"16px"},src:"/static/svg/setParameter copy-fa185e6a.svg",alt:""},xe={style:{padding:"8px 12px 0 12px","overflow-y":"auto",height:"300px"}},me={class:"selectStyle"},ye={class:"styleBox",ref:"container"},he=["onClick"],be={class:"styleImgBox"},we=["onClick"],ke={class:"styleImgText"},Ce=["src"],Fe={class:"uploadPic"},Ee={style:{display:"flex","flex-wrap":"wrap"}},Ae=["src"],Ie={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},Be=["onClick"],Se=["onBlur","onUpdate:modelValue","onInput"],je={key:1},Te={key:1,style:{width:"1px",height:"1px"}},_e={style:{display:"flex","align-items":"center",height:"28px"}},ze={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},Ue={key:1},De={key:1,style:{width:"1px",height:"1px"}},Ve={style:{display:"flex","align-items":"center",height:"28px"}},Le={class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",style:{position:"relative","margin-left":"4px"}},Me={style:{position:"absolute",width:"100%",bottom:"0"}},Oe={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},Qe={style:{display:"flex","align-items":"center",height:"28px"}},Pe={class:"uploadOther dark:bg-[#19191B] bg-[#F8F9F9]"},Ne={style:{display:"flex","align-items":"center",height:"28px"}},Ge={style:{display:"flex"}},qe={style:{display:"flex","align-items":"center"}},Je={style:{"margin-right":"4px"}},Ke={key:0,style:{position:"absolute",width:"100%",left:"0",top:"40px"},class:"dark:bg-[#111113] bg-[#fff] selectIW"},Ye=["onClick"],He={class:"sizeBox",style:{"margin-top":"16px"}},Re={class:"sizeMain"},Xe=["onClick"],Ze={style:{height:"40px",display:"flex","align-items":"center"}},We=["src"],$e={key:0,class:"text-[#8B8C8C] dark:text-[#6C6E79]"},el={key:1,class:"text-[#8B8C8C] dark:text-[#6C6E79]",style:{display:"flex"}},ll={class:"noText"},al={class:"inpBox border dark:border-[#2C2D31] border-[#E7E7E7] dark:bg-[#111113] bg-[#FFFFFF]"},tl={class:"advancedBox"},il={class:"seedBox"},sl={class:"s"},nl={class:"title",style:{display:"flex"}},ol={class:"sliderBox"},rl={class:"c"},dl={class:"title",style:{display:"flex"}},ul={class:"sliderBox"},pl={class:"quelity",style:{}},cl={style:{"font-size":"12px"}},vl={key:0,style:{position:"absolute",top:"30px",width:"100%",left:"0","z-index":"100",padding:"0 8px"},class:"dark:bg-[#222325] bg-[#F0F0F0]"},gl=["onClick"],fl={class:"weird"},xl={class:"title",style:{display:"flex"}},ml={class:"sliderBox"},yl={class:"public"},hl={style:{display:"flex","align-items":"center"}},bl=S(e({__name:"index",emits:["stylesList","rolesList","iwValue","swValue","cwValue","ar","no","s","c","q","weird","matsList","close","incantationCn"],setup(e,{emit:S}){const j=l(),T=a(),_=t(),{selectFile:z,upload:U}=ie(),D=i((()=>"dark"===j.theme)),V=S,L=s(0),M=s(!1);s(!1);const O=s(!1);function Q(){O.value=!1}const P=s(),N=s();function G(){O.value=!0,setTimeout((()=>{B((()=>{N.value[0].focus()}))}),100)}const q=[{name:"--iw 0.25 默认 相似度30%",id:0,value:.25,isSelect:!0},{name:"--iw 0.5 相似度40%",id:1,value:.5,isSelect:!1},{name:"--iw 1 相似度50%",id:2,value:1,isSelect:!1},{name:"--iw 1.25 相似度60%",id:3,value:1.25,isSelect:!1},{name:"--iw 1.5 相似度70%",id:4,value:1.5,isSelect:!1},{name:"--iw 1.75 相似度80%",id:5,value:1.75,isSelect:!1},{name:"--iw 2 相似度90%",id:6,value:2,isSelect:!1}],J=s(q[L.value].value),K=s(0),Y=s(""),H=s(""),R=s(0);function X(){V("s",R.value)}const ee=s(0);function le(){V("c",ee.value)}const te=s(0);function se(){V("weird",te.value)}function ne(){}n(Y,(e=>{V("no",Y.value)}));const oe=s();function re(){oe.value>100?oe.value=100:oe.value<0&&(oe.value=0),V("cwValue",oe.value)}const de=s([]),bl=s([]);const wl=s([]);const kl=s("/api/file/upload2Local");async function Cl(e=1){let l;if(1===e){if(l=await z(),!l)return void T.error("选择文件错误")}else l=e;const a=new FormData;a.append("file",l),await b.post(kl.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;if(0!=de.value.filter((l=>l.src==e)).length)return void T.error("不可重复上传相同的图片");de.value.push({src:e,cwIsShow:!1,swIsShow:!1,swValue:"",swinpIsShow:!1}),V("matsList",e)}1!==e&&_.updateRecordDialog(!1)}))}const Fl=s(""),El=s({Setwidth:1,Setheight:1});function Al(){}n(El.value,(e=>{if(console.log("数据发生变化",e),"自定义"==Fl.value){let l=Number(e.Setwidth)+":"+Number(e.Setheight);V("ar",l)}}));const Il=[{name:"头像框",value:"1:1",width:"16px",height:"16px",id:0},{name:"手机壁纸",value:"1:2",width:"12px",height:"24px",id:1},{name:"电脑壁纸",value:"16:9",width:"20px",height:"12px",id:2},{name:"宣传海报",value:"9:16",width:"12px",height:"20px",id:3},{name:"文章配图",value:"4:3",width:"22px",height:"17px",id:4},{name:"媒体配图",value:"3:4",width:"17px",height:"22px",id:5},{name:"横板名片",value:"3:2",width:"23px",height:"16px",id:6},{name:"小红书",value:"2:3",width:"16px",height:"23px",id:7},{name:"自定义",value:"",width:"",height:"",id:8,iconD:W,iconL:$}],Bl=s(0),Sl=s(!1);const jl=[{name:"1x - 默认",id:0,isSelect:!0,value:1},{name:"0.25x",id:1,isSelect:!1,value:.25},{name:"0.5x",id:2,isSelect:!1,value:.5}],Tl=s(jl[Bl.value].value),_l=s([]),zl=s(0);o({page:1,size:20,type:"style"}).then((e=>{let l=e.data.filter((e=>2==e.level));_l.value=l,Vl(_l.value[0].pid)}));const Ul=s();const Dl=s([]);function Vl(e){r({id:e}).then((e=>{e.data.rows.length&&(Dl.value=e.data.rows[0].children)}))}return(e,l)=>(w(),d("div",pe,[u("div",ce,[u("div",ve,[D.value?(w(),d("img",ge)):(w(),d("img",fe)),l[15]||(l[15]=u("p",null,"参数设置",-1))]),u("img",{src:ae,alt:"",onClick:l[0]||(l[0]=l=>e.$emit("close",!1)),style:{cursor:"pointer"}})]),u("div",xe,[u("div",me,[l[16]||(l[16]=u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"风格选择")],-1)),u("div",ye,[(w(!0),d(p,null,c(_l.value,((e,l)=>(w(),d("div",{class:k(zl.value==l?"styleItemSelect":"styleItem"),onClick:e=>function(e){zl.value=e,Vl(_l.value[e].pid)}(l),key:e.id},x(e.classifyName),11,he)))),128))],512),u("div",be,[(w(!0),d(p,null,c(Dl.value,((e,l)=>(w(),d("div",{class:k(Ul.value==l?"styleImgItemSelect":"styleImgItem"),onClick:a=>function(e){let{incantationEn:l}=e.item;Ul.value=e.index,V("incantationCn",l)}({item:e,index:l})},[u("div",ke,x(e.incantationCn),1),u("img",{src:e.img,alt:""},null,8,Ce)],10,we)))),256))])]),u("div",Fe,[l[27]||(l[27]=u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"参考图")],-1)),l[28]||(l[28]=u("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},"（严禁上传违规图（政治人物、色情、暴恐等），违者100%封号） ",-1)),u("div",Ee,[(w(!0),d(p,null,c(de.value,((e,a)=>(w(),d("div",{class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",key:a,style:{position:"relative","margin-left":"4px"}},[""!=e.src?(w(),d("div",{key:0,style:{display:"flex","justify-content":"center","align-items":"center"},class:"title dark:bg-[#111113] bg-[#FFFFFF] dark:text-[#10A37F] text-[#10A37F]",onClick:l[1]||(l[1]=e=>Cl(1))},[u("img",{src:e.src,alt:""},null,8,Ae)])):(w(),d("div",{key:1,class:"title dark:bg-[#111113] bg-[#FFFFFF] dark:text-[#10A37F] text-[#10A37F]",style:{padding:"40px 0"},onClick:l[2]||(l[2]=e=>Cl(1))},"点击上传")),u("div",{style:C([{position:"absolute",width:"100%",bottom:"0"},e.src?"opacity: 0.9;":""])},[u("div",Ie,[e.swIsShow?(w(),d("div",{key:0,style:{"font-size":"12px",padding:"4px 12px",width:"56px","border-radius":"8px",color:"#fff","text-align":"center",cursor:"pointer"},class:"bg-[#86CFB5] dark:bg-[#1E6953]",onClick:l=>function(e){e.swinpIsShow=!0,setTimeout((()=>{B((()=>{P.value[0].focus()}))}),100)}(e)},[e.swinpIsShow?y((w(),d("input",{key:0,onBlur:l=>function(e){e.swinpIsShow=!1}(e),ref_for:!0,ref_key:"refInput",ref:P,"onUpdate:modelValue":l=>e.swValue=l,style:{width:"100%","background-color":"transparent"},type:"text",onInput:l=>function(e){e.swValue>100?e.swValue=100:e.swValue<0&&(e.swValue=0),V("swValue",e.swValue)}(e)},null,40,Se)),[[h,e.swValue]]):(w(),d("p",je,x(e.swValue?e.swValue:"权重"),1))],8,Be)):(w(),d("div",Te)),u("div",_e,[l[17]||(l[17]=u("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1)),v(g(F),{size:"small",disabled:0==e.swIsShow&&3==bl.value.length,value:e.swIsShow,"onUpdate:value":[l=>e.swIsShow=l,l=>function(e){1==e.swIsShow?bl.value.push(e.src):0==e.swIsShow&&bl.value.forEach((l=>{l==e.src&&(bl.value=bl.value.filter((l=>l!=e.src)))})),V("stylesList",bl.value)}(e)]},null,8,["disabled","value","onUpdate:value"])])]),u("div",ze,[e.cwIsShow?(w(),d("div",{key:0,style:{"font-size":"12px",padding:"4px 12px",width:"56px","border-radius":"8px",color:"#fff","text-align":"center"},class:"bg-[#86CFB5] dark:bg-[#1E6953]",onClick:G},[O.value?y((w(),d("input",{key:0,type:"text",onBlur:Q,ref_for:!0,ref_key:"refInput1",ref:N,"onUpdate:modelValue":l[3]||(l[3]=e=>oe.value=e),style:{width:"100%","background-color":"transparent"},onInput:re},null,544)),[[h,oe.value]]):(w(),d("p",Ue,x(oe.value?oe.value:"--cw"),1))])):(w(),d("div",De)),u("div",Ve,[l[18]||(l[18]=u("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1)),v(g(F),{size:"small","onUpdate:value":[l=>function(e){console.log(e),1==!e.cwIsShow&&(1==wl.value.length&&(wl.value=[],de.value.forEach((e=>{e.cwIsShow=!1}))),wl.value.push(e.src),console.log(wl.value)),V("rolesList",wl.value)}(e),l=>e.cwIsShow=l],value:e.cwIsShow},null,8,["onUpdate:value","value"])])])],4)])))),128)),u("div",Le,[u("div",{class:"title dark:bg-[#111113] bg-[#FFFFFF] dark:text-[#10A37F] text-[#10A37F]",style:{padding:"40px 0"},onClick:l[4]||(l[4]=e=>Cl(1))},"点击上传"),u("div",Me,[u("div",Oe,[l[20]||(l[20]=u("div",{style:{width:"1px",height:"1px"}},null,-1)),u("div",Qe,[l[19]||(l[19]=u("p",{style:{"margin-right":"4px","font-size":"12px"}},"风格一致性",-1)),v(g(F),{size:"small",disabled:""})])]),u("div",Pe,[l[22]||(l[22]=u("div",{style:{width:"1px",height:"1px"}},null,-1)),u("div",Ne,[l[21]||(l[21]=u("p",{style:{"margin-right":"4px","font-size":"12px"}},"角色一致性",-1)),v(g(F),{size:"small",disabled:""})])])])])]),u("div",null,[u("div",{onClick:l[5]||(l[5]=e=>M.value=!M.value),style:{display:"flex",cursor:"pointer","max-width":"50%",width:"100%",padding:"8px","border-radius":"8px","justify-content":"space-between","margin-top":"6px",position:"relative"},class:"border dark:bg-[#111113] dark:border-[#292A2E] bg-[#fff] border-[#E8E8E8]"},[u("div",Ge,[l[25]||(l[25]=u("p",{style:{"margin-right":"4px"}},"--iw图片相似度",-1)),v(g(E),{trigger:"hover",placement:"top"},{trigger:f((()=>l[23]||(l[23]=[u("img",{src:Z,alt:""},null,-1)]))),default:f((()=>[l[24]||(l[24]=u("div",{style:{width:"280px"}},"--iw 值越高，上传的图像对最终效果的影响就越大",-1))])),_:1})]),u("div",qe,[u("p",Je,x(q[L.value].name),1),l[26]||(l[26]=u("img",{style:{width:"12px",height:"12px"},src:ue,alt:""},null,-1))]),M.value?(w(),d("div",Ke,[(w(),d(p,null,c(q,(e=>u("div",{class:"iwItem",style:C(L.value==e.id?"color:#7369E2":""),key:e.id,onClick:l=>function(e){L.value=e.id,J.value=e.value,V("iwValue",J.value)}(e)},x(e.name),13,Ye))),64))])):m("",!0)])])]),u("div",He,[l[30]||(l[30]=u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"生成尺寸--ar")],-1)),l[31]||(l[31]=u("div",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},"选择生成图像的宽度x高度比例",-1)),u("div",Re,[(w(),d(p,null,c(Il,(e=>u("div",{class:k([K.value==e.id?"dark:bg-[#101C18] dark:border-[#1E6953] bg-[#F3FBF8] border-[#86CFB5]":"dark:border-[#292A2E] dark:bg-[#111113] border-[#E8E8E8] bg-[#FFFFFF]","sizeItem border"]),key:e.id,onClick:l=>function(e){K.value=e.id,Fl.value=e.name,"自定义"!=e.name&&V("ar",e.value)}(e)},[u("div",Ze,[""!=e.width&&""!=e.height?(w(),d("div",{key:0,style:C({width:e.width,height:e.height}),class:k(["size border",K.value==e.id?"border-[#86CFB5] dark:border-[#1E6953]":"dark:bg-[#19191B] dark:border-[#46484F] bg-[#F8F9F9] border-[#CDCECE]"])},null,6)):(w(),d("img",{key:1,src:D.value?e.iconD:e.iconL,alt:""},null,8,We))]),""!=e.value?(w(),d("p",$e,x(e.value),1)):(w(),d("div",el,[y(u("input",{onClick:A(Al,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":l[6]||(l[6]=e=>El.value.Setwidth=e),class:"bg-[#F0F0F0] dark:bg-[#222325]",type:"text"},null,512),[[h,El.value.Setwidth]]),l[29]||(l[29]=u("p",{style:{margin:"0 4px"}},":",-1)),y(u("input",{onClick:A(Al,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":l[7]||(l[7]=e=>El.value.Setheight=e),class:"bg-[#F0F0F0] dark:bg-[#222325]",type:"text"},null,512),[[h,El.value.Setheight]])])),u("p",null,x(e.name),1)],10,Xe))),64))])]),u("div",ll,[l[32]||(l[32]=u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"不想出现的词")],-1)),u("div",al,[y(u("textarea",{onInput:ne,class:"inp","onUpdate:modelValue":l[8]||(l[8]=e=>Y.value=e),name:"",id:"",cols:"30",rows:"10",placeholder:"输入不想出现在图像中的内容（例如树木，0/200）"},null,544),[[h,Y.value]]),u("p",{style:{"text-align":"end","margin-top":"8px",cursor:"pointer","font-size":"12px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]",onClick:l[9]||(l[9]=e=>Y.value="")},"清空")])]),u("div",tl,[l[45]||(l[45]=u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"高级参数")],-1)),u("div",il,[l[33]||(l[33]=u("p",{class:"title"},"--seed 种子",-1)),y(u("input",{class:"inp dark:bg-[#222325] bg-[#F0F0F0]",type:"text","onUpdate:modelValue":l[10]||(l[10]=e=>H.value=e)},null,512),[[h,H.value]])]),u("div",sl,[u("div",nl,[l[36]||(l[36]=u("p",null,"--s 风格化",-1)),v(g(E),{trigger:"hover",placement:"top"},{trigger:f((()=>l[34]||(l[34]=[u("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Z,alt:""},null,-1)]))),default:f((()=>[l[35]||(l[35]=u("div",{style:{width:"280px"}},"这个值越低会更符合 prompt 的描述,数值越高艺术性就会越强，但跟 prompt关联性就会比较弱",-1))])),_:1})]),u("div",ol,[v(g(I),{style:{width:"123px"},value:R.value,"onUpdate:value":l[11]||(l[11]=e=>R.value=e),step:1,onDragend:X},null,8,["value"]),u("p",null,x(R.value),1)])]),u("div",rl,[u("div",dl,[l[39]||(l[39]=u("p",null,"--c 多样化",-1)),v(g(E),{trigger:"hover",placement:"top"},{trigger:f((()=>l[37]||(l[37]=[u("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Z,alt:""},null,-1)]))),default:f((()=>[l[38]||(l[38]=u("div",{style:{width:"280px"}},"这个值越低生成的四张图风格越相似，反之差异越大",-1))])),_:1})]),u("div",ul,[v(g(I),{style:{width:"123px"},value:ee.value,"onUpdate:value":l[12]||(l[12]=e=>ee.value=e),step:1,onDragend:le},null,8,["value"]),u("p",null,x(ee.value),1)])]),u("div",pl,[l[41]||(l[41]=u("div",{class:"title",style:{display:"flex"}},[u("p",null,"--quelity 质量")],-1)),u("div",{class:"selectQuelity dark:bg-[#222325] bg-[#F0F0F0]",onClick:l[13]||(l[13]=e=>Sl.value=!Sl.value)},[u("p",cl,x(jl[Bl.value].name),1),l[40]||(l[40]=u("img",{style:{width:"12px",height:"12px"},src:ue,alt:""},null,-1)),Sl.value?(w(),d("div",vl,[(w(),d(p,null,c(jl,(e=>u("div",{class:"",onClick:l=>function(e){Bl.value=e.id,Tl.value=e.value,V("q",Tl.value)}(e),style:C([{padding:"4px 0"},Bl.value==e.id?"color:#7369E2":""]),key:e.id},x(e.name),13,gl))),64))])):m("",!0)])]),u("div",fl,[u("div",xl,[l[44]||(l[44]=u("p",null,"--weird 奇妙",-1)),v(g(E),{trigger:"hover",placement:"top"},{trigger:f((()=>l[42]||(l[42]=[u("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:Z,alt:""},null,-1)]))),default:f((()=>[l[43]||(l[43]=u("div",{style:{width:"280px"}},"生成的图像引入奇特和离奇的特质，从而产生独特而意想不到的结果",-1))])),_:1})]),u("div",ml,[v(g(I),{style:{width:"123px"},value:te.value,"onUpdate:value":l[14]||(l[14]=e=>te.value=e),step:1,onDragend:se},null,8,["value"]),u("p",null,x(te.value),1)])])]),u("div",yl,[l[47]||(l[47]=u("div",{class:"",style:{display:"flex","align-items":"center"}},[u("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),u("p",{style:{"margin-left":"4px"}},"公开作品")],-1)),u("div",hl,[l[46]||(l[46]=u("p",{style:{"font-size":"12px"}},"公开作品",-1)),v(g(F),{style:{"margin-left":"8px"},size:"small"})]),l[48]||(l[48]=u("p",{style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},"开启后您的绘画生成结果将会在公共画廊中展示",-1))])])]))}}),[["__scopeId","data-v-25ee020e"]]),wl={class:"topBox"},kl={style:{display:"flex"}},Cl={class:"translatr",style:{display:"flex","align-items":"center"}},Fl={class:"borderBox dark:bg-[#23A55989] bg-[#D1D1D1]"},El={class:"inputBox bg-[#fff] dark:bg-[#24252B]"},Al={key:0,style:{width:"100%",padding:"12px",height:"300px",position:"absolute",bottom:"100px",left:"0","border-radius":"12px 12px 0 0"},class:"border dark:border-[#27272A] border-[#E7E7E7] bg-[#F8F9F9] dark:bg-[#19191B]"},Il={style:{display:"flex","justify-content":"space-between"}},Bl={style:{"overflow-y":"auto",height:"90%","overflow-x":"hidden"}},Sl=["onClick"],jl=["src"],Tl={style:{width:"100%","margin-left":"4px"}},_l={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis"}},zl={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",width:"90%"}},Ul={style:{width:"100%"}},Dl={class:"submitBox"},Vl={class:"btnBox"},Ll={key:0,style:{display:"flex"}},Ml={key:1,class:"loader"},Ol=S(e({__name:"submitTask",props:{mode:String,isSuccess:Boolean,handleprompt:String},emits:["submit"],setup(e,{emit:t}){const o=s(),r=j(o),b=i((()=>ee.value?r.height.value+50+"px":"-700px")),E=s(""),A=s(),I=s(),B=s(),S=s(),Q=s(),P=s();T({keys:["dialogueTail","robotAvatar","mjModel","relax_mjDeduction1","relax_mjDeduction2","fast_mjDeduction1","fast_mjDeduction2","trubo_mjDeduction1","trubo_mjDeduction2","fast_vip_free","relax_vip_free","trubo_vip_free"]}).then((e=>{const{relax_mjDeduction1:l,fast_mjDeduction1:a,trubo_mjDeduction1:t,fast_vip_free:i,relax_vip_free:s,trubo_vip_free:n}=e.data;A.value=Number(l),I.value=Number(a),B.value=Number(t),S.value=Number(i),Q.value=Number(s),P.value=Number(n),E.value=e.data.mjModel}));const N=s();function G(){D().then((e=>{N.value=e.data}))}_((()=>{G()}));const q=s(0),J=s(0),K=s(""),Y=s({translate:J.value,prompt:"",styles:[],roles:[],iw:.25,sw:0,cw:0,extend:"",mode:1,mats:[],action:R.TEXT_TO_IMAGE}),H=t,X=s([]);z({page:1,size:20}).then((e=>{X.value=e.data.rows}));const Z=e;function W(){Y.value.prompt=K.value,K.value?(ve.value=!1,ee.value=!1):ve.value=!0}function $(e){K.value=e,Y.value.prompt=e}n(Z,(e=>{console.log(e),e.isSuccess?(K.value="",Le.value=!1,q.value++,G()):e.handleprompt&&(K.value=e.handleprompt,Y.value.prompt=e.handleprompt)})),a();const ee=s(!1),le=l(),ie=i((()=>"dark"===le.theme));s(0),s(!1);const de=s("--fast"),ue=i((()=>le.theme));i((()=>"dark"===ue.value?"#A9ABB1":"#333636")),i((()=>"dark"===ue.value?"#38393E":"#e0e0e6"));const pe=s(1);function ce(e){0==e?(pe.value=0,Y.value.mode=2,de.value="--relax"):1==e&&(pe.value=1,Y.value.mode=1,de.value="--fast")}const ve=s(!1);function ge(){K.value?(ve.value=!1,ee.value=!1):ve.value=!0}const fe=s(),xe=s(),me=()=>{fe.value.open()},ye=()=>{xe.value.open()},he=s(!1);function be(){he.value=!he.value,he.value?(J.value=1,Y.value.translate=1):(J.value=0,Y.value.translate=0)}function we(e){Y.value.styles=e}function ke(e){Y.value.roles=e}const Ce=s([]);function Fe(e){Ce.value.push(e)}function Ee(e){Y.value.iw=e}function Ae(e){Y.value.sw=Number(e)}function Ie(e){Y.value.cw=Number(e)}const Be=s({ar:"",no:"",s:"",c:"",q:"",weird:""});function Se(e){let l="--ar "+e;Be.value.ar=l}function je(e){let l="--no "+e;Be.value.no=l}function Te(e){let l="--s "+e;Be.value.s=l}function _e(e){let l="--c "+e;Be.value.c=l}function ze(e){let l="--q "+e;Be.value.q=l}function Ue(e){let l="--weird "+e;Be.value.weird=l}const De=s("");function Ve(e){De.value=e||""}const Le=s(!1);function Me(){if(!K.value)return;if(1==Le.value)return;Le.value=!0;const{roles:e,styles:l}=Y.value;Y.value.mats=[],De.value&&(Y.value.prompt=Y.value.prompt+" "+De.value),Ce.value.forEach((a=>{-1==e.indexOf(a)&&-1==l.indexOf(a)&&Y.value.mats.push(a)}));const{ar:a,c:t,no:i,q:s,s:n,weird:o}=Be.value;Y.value.extend=`${i?i+" ":""}${Z.mode?Z.mode+" ":""}${a?a+" ":"--ar 1:1 "}${s?s+" ":"--q 1 "}${n?n+" ":"--s 0 "}${t?t+" ":"--c 0 "}${o||""}${de.value?de.value+" ":""}`;let r={params:Y.value,type:R.TEXT_TO_IMAGE};H("submit",r),Ce.value=[]}const Oe=({focused:e,checked:l})=>{if(l){const l={background:"linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"};return e&&(l.boxShadow="0 0 0 2px #957df480"),l}};return(e,l)=>(w(),d("div",{ref_key:"setParameterRef",ref:o,class:"sendBox bg-[#fff] border-2 border-transparent dark:border-[#8E91A64C] dark:bg-[#19191B]"},[v(se,{ref_key:"inspirationRef",ref:fe,onTextToImg:$,type:"mj"},null,512),v(ne,{ref_key:"thinkRef",ref:xe,onTextToImg:$,type:"mj"},null,512),u("div",{class:k(ee.value?"setParameter":"setParameter1"),style:C({bottom:b.value})},[ee.value?(w(),d("div",{key:0,style:{background:"rgba(0, 0, 0, 0.5)",position:"fixed",width:"100%",height:"100%","z-index":"-1",top:"0",left:"0"},onClick:l[0]||(l[0]=e=>ee.value=!1)})):m("",!0),(w(),U(bl,{key:q.value,onClose:l[1]||(l[1]=e=>ee.value=!1),onStylesList:we,onRolesList:ke,onIwValue:Ee,onSwValue:Ae,onCwValue:Ie,onAr:Se,onNo:je,onS:Te,onC:_e,onQ:ze,onWeird:Ue,onMatsList:Fe,onIncantationCn:Ve}))],6),u("div",wl,[u("div",kl,[u("div",{onClick:ye,class:"bg-[#e0e0e6] dark:bg-[#4E5058]",style:{padding:"0 6px","border-radius":"4px",height:"20px","line-height":"20px","font-size":"12px","margin-right":"12px",cursor:"pointer"}}," AI联想"),u("div",Cl,[l[8]||(l[8]=u("p",{style:{"margin-right":"4px"},class:"text-[#76798B] dark:text-[#fff]"},"自动翻译",-1)),v(g(F),{"onUpdate:value":be,"rail-style":Oe,size:"small"})])]),v(g(O),null,{default:f((()=>[1==pe.value?(w(),U(g(M),{key:0,onClick:l[2]||(l[2]=e=>ce(0))},{icon:f((()=>[v(g(V),null,{default:f((()=>[v(g(oe))])),_:1})])),default:f((()=>[l[9]||(l[9]=L(" 快速模式 "))])),_:1})):m("",!0),0==pe.value?(w(),U(g(M),{key:1,onClick:l[3]||(l[3]=e=>ce(1))},{icon:f((()=>[v(g(V),null,{default:f((()=>[v(g(oe))])),_:1})])),default:f((()=>[l[10]||(l[10]=L(" 常规模式 "))])),_:1})):m("",!0),v(g(M),{onClick:l[4]||(l[4]=e=>ee.value=!ee.value)},{icon:f((()=>[v(g(V),null,{default:f((()=>[v(g(re))])),_:1})])),default:f((()=>[l[11]||(l[11]=L(" 参数设置 "))])),_:1})])),_:1})]),u("div",Fl,[u("div",El,[ve.value&&X.value.length?(w(),d("div",Al,[u("div",Il,[l[12]||(l[12]=u("p",null,"推荐关键词",-1)),ie.value?(w(),d("img",{key:0,style:{cursor:"pointer"},onClick:l[5]||(l[5]=e=>ve.value=!1),src:ae,alt:""})):(w(),d("img",{key:1,style:{cursor:"pointer"},onClick:l[6]||(l[6]=e=>ve.value=!1),src:te,alt:""}))]),u("div",Bl,[(w(!0),d(p,null,c(X.value,(e=>(w(),d("div",{onClick:l=>function(e){ve.value=!1,K.value=e.suggestEn,Y.value.prompt=e.suggestEn}(e),class:k(ie.value?"item":"item1"),style:{"margin-top":"12px",display:"flex",padding:"8px",width:"100%","align-items":"center",cursor:"pointer"},key:e.id},[u("img",{style:{width:"50px",height:"50px"},src:e.image,alt:""},null,8,jl),u("div",Tl,[u("div",_l,x(e.suggestCn),1),u("div",zl,x(e.suggestEn),1)])],10,Sl)))),128))])])):m("",!0),u("div",Ul,[y(u("textarea",{onInput:W,onFocus:ge,"onUpdate:modelValue":l[7]||(l[7]=e=>K.value=e),type:"text",class:"inp dark:text-[#A1A8B4] text-[#8B8C8C]",placeholder:"在此描述画面的关键词，注意不要在此填入萝莉、性感、血腥等敏感词内容，否则100%不会出图",style:{resize:"none",height:"40px"}},null,544),[[h,K.value]])]),u("div",Dl,[u("img",{style:{"margin-right":"12px",cursor:"pointer"},src:"/static/svg/submitBot-16c85ce6.svg",alt:"",onClick:me}),u("div",Vl,[u("div",{class:"btn bg-gradient-to-r from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent dark:bg-[#23A559]",onClick:Me,style:C(K.value?"":"cursor: not-allowed;")},[Le.value?(w(),d("div",Ml)):(w(),d("div",Ll,l[13]||(l[13]=[u("img",{src:"/static/svg/submit-f29501d6.svg",alt:""},null,-1),u("p",{style:{"margin-left":"4px",color:"#fff","font-size":"13px"}},"提交",-1)])))],4)])])])])],512))}}),[["__scopeId","data-v-ce04c55f"]]),Ql={style:{display:"flex",height:"calc(100vh - 68px)",overflow:"hidden"}},Pl={style:{flex:"1",display:"flex","flex-direction":"column"},class:"contentBox border-l dark:border-[#2A2C30] border-[#EBEBEB] dark:bg-[#1B1C22] bg-[#f5f6f7]"},Nl={key:0},Gl={key:1},ql={style:{width:"100%","text-align":"center",display:"flex","justify-content":"center","margin-top":"15px"}},Jl={style:{color:"#eeeeee","font-size":"13px"},class:"end"},Kl={style:{display:"flex",cursor:"default"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Yl={key:0,style:{display:"flex","margin-left":"8px"}},Hl=["href"],Rl={key:1,style:{display:"flex","margin-left":"8px"}},Xl=["href"],Zl=S(e({__name:"midjourney",setup(e){const l=s(""),t=s(""),o=s(""),r=s(""),g=s("");de({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{r.value=e.data.copyrightTitle,l.value=e.data.icpNumber,t.value=e.data.policeFilingNumber,o.value=e.data.icpUrl,g.value=e.data.policeFilingUrl}));const f=Q(),y=i((()=>f.isLogin)),h=a(),b=s("");function k(e){console.log(e),b.value=e}const C=P(),F=s("textToImg");C.query.type&&(F.value=C.query.type);let E=!1;const A=s([]);let I=[];const S=s(!1),j=s(!1),T=s([]);let z=null;const D=async function(){try{z&&window.clearTimeout(z);(await H({jobIds:I.join()})).data.forEach((e=>{const l=T.value.findIndex((l=>l.id===e.id));-1!==l&&T.value.splice(l,1,e),e.status>=3&&(I=I.filter((l=>l!==e.jobId)))})),I.length?z=setTimeout((()=>D()),3e3):z&&window.clearTimeout(z)}catch(e){z=setTimeout((()=>D()),3e3)}};n(y,(async e=>{if(1==e){const e={page:1,size:10},l=await G(e);1===e.page&&(T.value=l.data.rows.reverse())}else T.value.length=0}));const V={page:1,size:10},M=async function(e){try{j.value=!0;const l=await G(V);1===V.page?T.value=l.data.rows.reverse():T.value=l.data.rows.reverse().concat(T.value),console.log(T.value),I=T.value.filter((e=>[1,2].includes(e.status))).map((e=>e.jobId)),I.length&&D(),l.data.rows.length<V.size&&(S.value=!0),B(e?()=>{var e;null==(e=ae.value)||e.scrollTo({top:ae.value.scrollHeight,behavior:"smooth"}),A.value.length&&A.value[A.value.length-1].scrollIntoView(),setTimeout((()=>{E=!0}),100)}:()=>{var e;let a=0;for(let t=0;t<l.data.rows.length;t++){const l=null==(e=ae.value)?void 0:e.children[t];a+=(null==l?void 0:l.offsetHeight)||0}ae.value.scrollTop=a}),j.value=!1}catch(l){j.value=!1}},O=s(""),Z=function(e){O.value=e},W=s(),$=async function(e,l){W.value=!1;try{let a=null;switch(e.type){case R.TEXT_TO_IMAGE:case R.IMAGE_ACTION:a=await Y(e),J.emit("getUserInfo",!0);break;case R.IMAGE_MIX_IMAGE:case R.IMAGE_TO_TEXT:a=await K(e),J.emit("getUserInfo",!0);break;case R.INSIGHT_FACE:a=await q(e),J.emit("getUserInfo",!0)}if(a){const e=a.data;W.value=!0;T.value.find((l=>l.id===e.id))||(T.value.push(e),B((()=>{var e;null==(e=ae.value)||e.scrollTo({top:ae.value.scrollHeight,behavior:"smooth"})}))),e.status<3&&!I.includes(e.jobId)&&(I.push(e.jobId),D())}l&&l(Boolean(null==a?void 0:a.success))}catch(a){h.error(a.message),W.value=!0,l&&l(!1)}},ae=s(),te=function(e){const l=e.target;E&&l.scrollTop<=20&&(S.value||j.value||(V.page=V.page+1,M()))};return N((()=>{var e;null==(e=ae.value)||e.removeEventListener("scroll",te)})),_((()=>{var e;f.getUserInfo(),M(!0),null==(e=ae.value)||e.addEventListener("scroll",te)})),(e,a)=>(w(),d("div",Ql,[u("div",Pl,[a[0]||(a[0]=u("div",{class:"dark:bg-[#24252B] bg-[#f5f6f7]",style:{padding:"10px 15px",display:"flex","align-items":"center","border-radius":"6px"}},[u("img",{style:{width:"18px",height:"14px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAfCAYAAACVgY94AAAAAXNSR0IArs4c6QAABV9JREFUWEfNmH9oVWUYx7/f95x77rxO90OdJmLN5qbL6g8tCysmbkpCfyiNKMysaHM6LZybCUGzKFulpMZoMkpYRCBEf0ShK1iCtCghKpqTcoEibnObcz/03nvO+9Q5u1fv3e7mfome++d9zzmf9/k+z/d9nkPczqsyz8xp9a2jwlvQ0BDZenrO9ydQCR3F4m3jKyw0cmZ1FhCsArkEwj4Cb3bbHTUXDp/qv72AMXDiwbk/Nopwx5lPjv0K3MII3rMpL8kIWLMsm3ZT1/Q2HD3qxKmUl2fm5PrzCacqCkdBI8iK0+0pPw9eP3kSV0LdfeHx2X5f0npFeVk0LsNhRXNN/SkAEoFUWSX5D/vIak0+6MXNg0PF6YzjjbG5N6kSLyjKT7FMLodiESArAaRDpAeQvV1XjIOtdcf73BfOLVoamG6kb4aSPSJqys3g3HsmFEFPzunIMsXcSOEzLgMAM7L7PgH2o7//g+ZPT/ZEI7hw6+qHlJb33BeL4I3mOfU/JYrcxCIYldO01tFgMTWzQARE4JAICpBEiFuJ+5S2P/yruqH3eh66ObjAl6FMJU1zj7WOBDeuCEblFMUiRuQUQBPSDpFfQBUGUBBJu6GAY/S1OIlzC3Ot4Ix5qT6EAmJaQ+QP6lCK3zCfi5dTeh3gDwP4mKJPCtUmCMpAL30mDZA5pQV3iWAtiacAuY+git2sW4YCmEoww5UTkLAIzlHJ50Glv2i5euXsvKmWGQgllyuifDIjyAXbn8gytfU2hfkAUkkYwykhIgLyEgU/apEDJuzfojmWuyUvWStzJ4CyyP0Tj2B2Ud5M8ZsVhrBEgGQAfQLpVKCdCFIg54WoDV+VYy21P7TFeBziAb06nTjgwpJV+UqpGhKZAlwW4rOQEa7z21Z34ihKsDnU2Y7Dp9xiiLvGBVhYaCxOu5KhLUmKfZgK8VoTLl3i4q0Fu4TYBWCqBr5yNCv+qT5+bozF5i0fB6DK3rxmGQ3ZS0hmfM6zBQ7e4aLS/EMi2ESSAvmoJ9T1bmw3MRbQsQJeP1kolSCnxb1LpIfAQWaX5ldC8BrBZCj5xnbUtjsqgveWrlxh0DhCYRaATi1SbZty1HKM6PE0KIgSdGh2/H3ou+DwOciyUdvMzXJwfsljaX7Tv1sJtxAMQKQXRBfA+DYpQiOCC1pQZ/v01y0HhqviMQDeJIdcL4j4oC/igxzRB+H6oGIHhN9Co0Yh9Pst9cHIBuJOEgL3u4YtQErkwO6GoFsoimA6BvwyJILzQqkD7C81p7T0B9uMZF/qTkWWT5pRx0Y4ehYbJtIVnVcgLPb+p9Q4DmsdBdMSeRpUGwDMA2C5KaGJPwmpDSvWWzZeBCf/LI7LBLfP8yebZRTPHyFEVbDX3vfvkYZrnpXAekArXUxyLbXMGNgEWkV4gvT6wdWjLpJR5OCQJTf8zE12D3HwkcXMV1dlmCG1joa8oIAlcG0KEgYYHk0/6D61eX79xXH1g6MA9LCztj3pt+VqZhKNZ0WrDWRE9oFdJeyos7etWaZsXQUoiOjxddSjBYyGPio7oIthcC0GZO9NNJOkmGnF/9vAHiEC1GgUkV0jtf0JZ5Kcl1ZMQyBQTmCHJ/DQ2SJR5niyWzbXU7hRoPrg6NcHT3Xe2auwD5BH3ZaWQKM4w0MmBJz9/OqpacnYDqV3u1JAO3u7em9MZyPltSu7CgdnGtqnm84E29HQEN+2FRYai2Z1LyekSoPxkB2pjaOdi5lTXLAUprzvAdoyeL4dSw8xdG0l1KK21Y/EQsKTeyxfFiLTl1dtZ8NtQyIxMURgECSB/jvn20x0cy7kxfwCkPvhdntalw7+uvUfABYpEjYv/foAAAAASUVORK5CYII=",alt:""}),u("p",{style:{"margin-left":"13px",color:"#2E8953","font-size":"14px"}}," 请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有则违规封号处理。 ")],-1)),u("div",{ref_key:"scrollView",ref:ae,style:{flex:"1",overflow:"auto","margin-top":"10px"}},[y.value&&0!=T.value.length?(w(),d("div",Nl,[(w(!0),d(p,null,c(T.value,((e,l)=>(w(),U(X,{type:"chat",task:e,key:e.jobId+"-"+e.status,onRemove:()=>function(e){T.value.splice(e,1)}(l),onAddTask:$},null,8,["task","onRemove"])))),128))])):(w(),d("div",Gl,[v(le,{onHandleprompt:k})]))],512),u("div",null,[O.value&&"imgToText"!=F.value?(w(),U(Ol,{key:0,handleprompt:b.value,isSuccess:!!W.value&&W.value,mode:O.value,onSubmit:$},null,8,["handleprompt","isSuccess","mode"])):m("",!0)]),u("div",ql,[u("div",Jl,[u("div",Kl,[L("版权所有 © "+x(r.value)+" ",1),l.value?(w(),d("div",Yl,[u("a",{href:o.value||"#"},x(l.value),9,Hl)])):m("",!0),t.value?(w(),d("div",Rl,[u("a",{href:g.value||"#"},x(t.value),9,Xl)])):m("",!0)])])])]),v(ee,{onMjVersionChange:Z,isSuccess:!!W.value&&W.value,type:"mj",drawType:F.value,onSubmitData:$},null,8,["isSuccess","drawType"])]))}}),[["__scopeId","data-v-7b9c8674"]]);export{Zl as default};
