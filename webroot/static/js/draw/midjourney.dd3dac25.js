import{e,w as a,x as t,B as l,p as i,k as s,g as r,r as n,aP as o,b7 as d,Z as u,v as p,q as v,bN as c,L as m,C as x,z as g,F as f,E as y,a2 as w,A as h,P as b,a0 as k,D as E,O as F,y as I,N as C,a4 as T,aD as A,bO as _,ai as $,G as j,ag as M,$ as S,bP as B,_ as z,ar as V,bQ as D,bR as U,a7 as P,a8 as N,aH as O,aI as G,Q as H,am as L,aK as J,bS as R,a5 as q,bT as X,n as W,an as Y,ac as K,I as Q,aZ as Z,aF as ee,at as ae,ax as te,aw as le,av as ie,au as se}from"../main-4156cf5e.js";import{a as re,M as ne}from"../index/index.27c727e8.js";import{M as oe}from"../index/index.4f774309.js";import{_ as de,a as ue}from"../close copy/close copy.08564ec3.js";import{_ as pe,b as ve}from"../baiduThink/baiduThink.8f246fbd.js";import{F as ce}from"../FlashOutline/FlashOutline.14c9c2e7.js";import{C as me}from"../index/index.37b3d73f.js";import{_ as xe,n as ge}from"../isVIP2/isVIP2.4aa495db.js";import{f as fe}from"../music/music.0ed5be8a.js";import{_ as ye}from"../aiVideoGou/aiVideoGou.56a8a6eb.js";import{u as we}from"../useUpload/useUpload.c9de36e7.js";import"../draw-fail/draw-fail.ad8fd01b.js";import"../index/index.5b75f753.js";import"../index/index.745d5eac.js";import"./draw.a81c0f1a.js";import"../HeartOutline/HeartOutline.79c6c696.js";import"../Popconfirm/Popconfirm.c9db7ff9.js";import"../police/police.deef576c.js";const he={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},be=l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 184l144 144l144-144"},null,-1),ke=[be],Ee=e({name:"ChevronDown",render:function(e,l){return a(),t("svg",he,ke)}}),Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ie=l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 328l144-144l144 144"},null,-1),Ce=[Ie],Te=e({name:"ChevronUp",render:function(e,l){return a(),t("svg",Fe,Ce)}}),Ae={ref:"setParameterRef",class:"sendBox border-transparent"},_e={class:"borderBox dark:bg-[#3E6AE7] bg-[#E0E2E9]"},$e={class:"inputBox bg-[#fff] dark:bg-[#24252B]"},je={key:0,style:{width:"100%",padding:"12px",height:"300px",position:"absolute",bottom:"100px",left:"0","border-radius":"12px 12px 0 0"},class:"border dark:border-[#27272A] border-[#E7E7E7] bg-[#F8F9F9] dark:bg-[#19191B]"},Me={style:{display:"flex","justify-content":"space-between"}},Se={style:{"overflow-y":"auto",height:"90%","overflow-x":"hidden"}},Be=["onClick"],ze=["src"],Ve={style:{width:"100%","margin-left":"4px"}},De={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis"}},Ue={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",width:"90%"}},Pe={style:{width:"100%"}},Ne=["placeholder"],Oe={class:"submitBox flex w-[100%]"},Ge={style:{"flex-grow":"1",display:"flex",gap:"10px","padding-left":"20px"}},He={class:"ml2"},Le={class:"ml2"},Je={class:"translatr",style:{display:"flex","align-items":"center"}},Re={style:{"margin-right":"4px"},class:"text-[#76798B] dark:text-[#fff]"},qe={class:"btnBox"},Xe={key:0,class:"vipIcon",src:"/static/svg/isVIP1-b7a6f332.svg",alt:""},We={key:1,style:{display:"flex","align-items":"center"}},Ye={key:0,style:{color:"#fff"}},Ke={key:1,style:{color:"#fff"}},Qe={key:2,style:{color:"#fff"}},Ze={key:3,style:{color:"#fff"}},ea={key:4,style:{display:"flex","align-items":"center",color:"#fff"}},aa={style:{"font-size":"10px"}},ta={key:5,style:{color:"#fff"}},la={key:2,class:"loader"},ia=z(e({__name:"submitTask",props:{mode:String,isSuccess:Boolean,handleprompt:String},emits:["submit"],setup(e,{emit:z}){const V=i(),D=e,U=s(),P=r((()=>1===U.userInfo.lifetimeVip||U.userInfo.vipExpire&&new Date(U.userInfo.vipExpire)>new Date)),N=r((()=>U.userInfo.vipLeavelId));let O=n([]);o().then((e=>{O.value=e.data}));const G=z,H=d("mjBase"),L=n(""),J=n(),R=n(),q=n(),X=n(),W=n(),Y=n(),K=n(0),Q=n(0),Z=n(""),ee=n([]),ae=n(!1),te=u(),le=r((()=>"dark"===te.theme)),ie=n("--fast"),se=n(1),ne=n(),oe=n(!1),me=n(),xe=n(),ge=n(!1),fe=n([]),ye=n(!1);function we(){M().then((e=>{ne.value=e.data}))}function he(){H.mjParams.value.prompt=Z.value,Z.value?(oe.value=!1,ae.value=!1):oe.value=!0}function be(e){Z.value=e,H.mjParams.value.prompt=e}function ke(e){0==e?(se.value=0,H.mjParams.value.mode=2,ie.value="--relax"):1==e&&(se.value=1,H.mjParams.value.mode=1,ie.value="--fast")}function Ee(){Z.value?(oe.value=!1,ae.value=!1):oe.value=!0}p({keys:["dialogueTail","robotAvatar","mjModel","relax_mjDeduction1","relax_mjDeduction2","fast_mjDeduction1","fast_mjDeduction2","trubo_mjDeduction1","trubo_mjDeduction2","fast_vip_free","relax_vip_free","trubo_vip_free"]}).then((e=>{const{relax_mjDeduction1:a,fast_mjDeduction1:t,trubo_mjDeduction1:l,fast_vip_free:i,relax_vip_free:s,trubo_vip_free:r}=e.data;J.value=Number(a),R.value=Number(t),q.value=Number(l),X.value=Number(i),W.value=Number(s),Y.value=Number(r),L.value=e.data.mjModel})),v((()=>{we()})),c({page:1,size:20}).then((e=>{ee.value=e.data.rows})),m(D,(e=>{console.log(e),e.isSuccess?(Z.value="",ye.value=!1,K.value++,we()):e.handleprompt&&(Z.value=e.handleprompt,H.mjParams.value.prompt=e.handleprompt)}));const Fe=()=>{me.value.open()},Ie=()=>{xe.value.thinks="",xe.value.open()};function Ce(){ge.value=!ge.value,ge.value?(Q.value=1,H.mjParams.value.translate=1):(Q.value=0,H.mjParams.value.translate=0)}function Te(e,a){const{roles:t,styles:l}=e,i=JSON.parse(JSON.stringify(e));i.mats=[],a||H.styleMode.value&&(i.prompt=i.prompt+" "+H.styleMode.value),fe.value.forEach((e=>{-1==t.indexOf(e)&&-1==l.indexOf(e)&&i.mats.push(e)})),t.length||(i.cw=0),t.length||l.length||delete i.iw;const{ar:s,c:r,no:n,q:o,s:d,weird:u}=a?H.defaultExtendArr.value:H.extendArr.value;return"--v 7"==D.mode?i.extend=`${n?n+" ":""}${D.mode?D.mode+" ":""}${s?s+" ":"--ar 1:1 "}${d?d+" ":"--s 0 "}${r?r+" ":"--c 0 "}${u||""}${ie.value?ie.value+" ":""}`:i.extend=`${n?n+" ":""}${D.mode?D.mode+" ":""}${s?s+" ":"--ar 1:1 "}${o?o+" ":"--q 1 "}${d?d+" ":"--s 0 "}${r?r+" ":"--c 0 "}${u||""}${ie.value?ie.value+" ":""}`,delete i.enabled,i}function ia(){if(na.value.isVipUsed&&-1===na.value.userType.indexOf(N.value)){let e=na.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=O.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void V.error(S("digitalMan.vipUse1")+a+S("digitalMan.vipUse1"))}if(!Z.value)return;if(1==ye.value)return;ye.value=!0;const{enabled:e}=H.mjParams.value;e&&(H.defaultMJParams.value.prompt=H.mjParams.value.prompt);let a={params:Te(e?H.defaultMJParams.value:H.mjParams.value,e),type:re.TEXT_TO_IMAGE};G("submit",a),fe.value=[]}const sa=({focused:e,checked:a})=>{if(a){const a={background:"linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"};return e&&(a.boxShadow="0 0 0 2px #957df480"),a}};function ra(){var e;const{enabled:a}=H.mjParams.value;a&&(H.defaultMJParams.value.prompt=H.mjParams.value.prompt);let t={params:Te(a?H.defaultMJParams.value:H.mjParams.value,a),type:1,botType:-1!==(null==(e=D.mode)?void 0:e.indexOf("niji"))?"NIJI_JOURNEY":"MID_JOURNEY"};B(t).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(na.value=e.data,oa.value=!1):oa.value=!0})).catch((e=>{oa.value=!0}))}const na=n({remainCount:0,freeCount:0,useIntegrate:0}),oa=n(!1);return m((()=>D.mode),((e,a)=>{console.log("props.mode",e),ra()}),{deep:!0,immediate:!0}),m((()=>Q.value),((e,a)=>{ra()}),{deep:!0,immediate:!0}),(e,i)=>(a(),t("div",Ae,[x(pe,{ref_key:"inspirationRef",ref:me,onTextToImg:be,type:"mj"},null,512),x(ve,{ref_key:"thinkRef",ref:xe,onTextToImg:be,type:"mj"},null,512),l("div",_e,[l("div",$e,[oe.value&&ee.value.length?(a(),t("div",je,[l("div",Me,[l("p",null,g(e.$t("draw.recokeywords")),1),le.value?(a(),t("img",{key:0,style:{cursor:"pointer"},onClick:i[0]||(i[0]=e=>oe.value=!1),src:de,alt:""})):(a(),t("img",{key:1,style:{cursor:"pointer"},onClick:i[1]||(i[1]=e=>oe.value=!1),src:ue,alt:""}))]),l("div",Se,[(a(!0),t(f,null,y(ee.value,(e=>(a(),t("div",{onClick:a=>function(e){oe.value=!1,Z.value=e.suggestEn,H.mjParams.value.prompt=e.suggestEn}(e),class:w(le.value?"item":"item1"),style:{"margin-top":"12px",display:"flex",padding:"8px",width:"100%","align-items":"center",cursor:"pointer"},key:e.id},[l("img",{style:{width:"50px",height:"50px"},src:e.image,alt:""},null,8,ze),l("div",Ve,[l("div",De,g(e.suggestCn),1),l("div",Ue,g(e.suggestEn),1)])],10,Be)))),128))])])):h("",!0),l("div",Pe,[b(l("textarea",{onInput:he,onFocus:Ee,"onUpdate:modelValue":i[2]||(i[2]=e=>Z.value=e),type:"text",class:"inp dark:text-[#A1A8B4] text-[#767676]",placeholder:e.$t("draw.inputWarning1"),style:{resize:"none",height:"40px"}},null,40,Ne),[[k,Z.value]])]),l("div",Oe,[l("span",Ge,[x(I(_),null,{default:E((()=>[1==se.value?(a(),F(I(A),{key:0,bordered:!1,"text-color":"#767676",style:{background:"#F2F3F7"},onClick:i[3]||(i[3]=e=>ke(0))},{icon:E((()=>[x(I(C),{color:"#767676"},{default:E((()=>[x(I(ce))])),_:1})])),default:E((()=>[T(" "+g(e.$t("draw.quickModel")),1)])),_:1})):h("",!0),0==se.value?(a(),F(I(A),{key:1,bordered:!1,"text-color":"#767676",style:{background:"#F2F3F7"},onClick:i[4]||(i[4]=e=>ke(1))},{icon:E((()=>[x(I(C),{color:"#767676"},{default:E((()=>[x(I(ce))])),_:1})])),default:E((()=>[T(" "+g(e.$t("draw.NormalModel")),1)])),_:1})):h("",!0)])),_:1}),l("div",{onClick:Ie,class:"box2 bg-[#F2F3F7] dark:bg-[#4E5058]"},[i[5]||(i[5]=l("img",{src:"/static/svg/lx-58a22129.svg",alt:""},null,-1)),l("span",He,g(e.$t("draw.AIgenDesc")),1)]),l("div",{onClick:Fe,class:"bg-[#F2F3F7] dark:bg-[#4E5058] box2"},[i[6]||(i[6]=l("img",{src:"/static/svg/submitBot-e108dc09.svg",alt:""},null,-1)),l("span",Le,g(e.$t("homePage.tips")),1)]),l("div",Je,[l("p",Re,g(e.$t("draw.automatic")),1),x(I($),{"onUpdate:value":Ce,"rail-style":sa,size:"small"})])]),l("div",qe,[l("div",{class:"btn bg-gradient-to-r from-[#574FFE] to-[#726AFB]",onClick:ia,style:j(Z.value?"":"cursor: not-allowed;")},[na.value&&na.value.isVipUsed?(a(),t("img",Xe)):h("",!0),ye.value?(a(),t("div",la)):(a(),t("div",We,[oa.value?(a(),t("span",Ye,g(e.$t("draw.modelNotSet")),1)):I(U).isLogin?na.value&&na.value.isVipFree&&P.value?(a(),t("span",Qe,g(e.$t("chat.vipFree")),1)):na.value&&na.value.remainCount&&P.value?(a(),t("span",Ze,g(e.$t("draw.shenyu")+na.value.remainCount+e.$t("draw.chiFree")),1)):na.value?(a(),t("div",ea,[l("span",null,g(e.$t("gpt.lijiGen")),1),l("span",aa,"（"+g(na.value.useIntegrate+e.$t("chat.pointsChi"))+"）",1)])):(a(),t("span",ta,g(e.$t("draw.gen")),1)):(a(),t("span",Ke,g(e.$t("draw.beginGen")),1))]))],4)])])])])],512))}}),[["__scopeId","data-v-8320824f"]]),sa="/static/svg/instantce-78a6b698.svg",ra="/static/svg/mjMore-9acf549f.svg",na="/static/svg/delImg copy-c829db94.svg",oa={class:"swi-p subsiderbar-class video_sub_sidebar bg-[#f2f2f5] dark:bg-[#222325]",style:{border:"none"}},da={class:"scroll_card",style:{height:"100%","overflow-y":"scroll","padding-top":"44px"}},ua={key:0,style:{"margin-top":"18px","border-radius":"5px",border:"1px solid #E0E2E9"}},pa={style:{padding:"10px 15px 12px"}},va={style:{"font-size":"14px"}},ca={style:{"margin-top":"4px","font-size":"12px",color:"#767676"}},ma={key:1,class:"textToImg"},xa={style:{"margin-top":"10px"}},ga={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},fa={class:"dark:text-[#EEEEF0] text-[#000] text-[18px]",style:{"font-weight":"500","margin-right":"12px"}},ya={style:{width:"140px",position:"relative"},class:"customBox"},wa={key:0,class:"newModel"},ha={class:"custerSelect"},ba=["onClick"],ka={class:"name"},Ea={key:0,class:"newModel"},Fa={style:{"margin-top":"0px"}},Ia={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ca={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},Ta={class:"style_card"},Aa={class:"styleBox",ref:"container"},_a=["onClick"],$a=["onClick"],ja={class:"styleImgText"},Ma=["src"],Sa={class:"styleImgItem zero"},Ba={class:"back"},za={style:{"margin-top":"20px"}},Va={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Da={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[14px]"},Ua={class:"sizeMain",style:{"margin-top":"11px"}},Pa=["onClick"],Na={style:{display:"flex","align-items":"center"}},Oa={key:1,class:"text-[#b4b4b4] dark:text-[#b4b4b4]",style:{display:"flex"}},Ga={style:{"margin-top":"20px"}},Ha={style:{display:"flex","align-items":"center","margin-bottom":"6px","justify-content":"space-between"}},La={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex gap-[6px]"},Ja={style:{"margin-top":"0px"}},Ra={style:{"margin-top":"0px",cursor:"pointer"},class:"uploadPic"},qa={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Xa={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Wa={style:{display:"flex","flex-wrap":"wrap",gap:"6px"}},Ya=["onClick"],Ka=["src"],Qa={class:"uploadOther p1"},Za=["onClick"],et=["onBlur","onUpdate:modelValue","onInput"],at={key:1,style:{"font-size":"12px"}},tt={key:1,style:{width:"1px",height:"1px"}},lt={class:"swi-p",style:{display:"flex","align-items":"center",height:"14px"}},it={style:{"margin-right":"4px","font-size":"12px"}},st={class:"uploadOther"},rt={key:1},nt={key:1,style:{width:"1px",height:"1px"}},ot={style:{display:"flex","align-items":"center",height:"14px"}},dt={style:{"margin-right":"4px","font-size":"12px"}},ut={class:"upload",style:{position:"relative","margin-left":"4px"}},pt={style:{"font-size":"13px",color:"#6A6A6A"}},vt={style:{"font-size":"14px",color:"#767676",display:"flex","align-items":"center","justify-content":"center"}},ct={class:"bot-p"},mt={class:"uploadOther"},xt={style:{display:"flex","align-items":"center",height:"12px"}},gt={style:{"margin-right":"4px","font-size":"12px"}},ft={class:"uploadOther"},yt={style:{display:"flex","align-items":"center",height:"14px"}},wt={style:{"margin-right":"4px","font-size":"12px"}},ht={style:{display:"flex"}},bt={style:{"margin-right":"4px"}},kt={style:{}},Et={style:{display:"flex","align-items":"center"}},Ft={style:{"margin-right":"4px"}},It={key:0,style:{position:"absolute",width:"100%",left:"0",top:"40px"},class:"dark:bg-[#383838] bg-[#fff] selectIW"},Ct=["onClick"],Tt={style:{display:"flex","align-items":"center","margin-bottom":"6px","margin-top":"20px"}},At={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},_t={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},$t={style:{"margin-top":"20px"}},jt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Mt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},St={class:"seedBox"},Bt={style:{"margin-top":"20px"}},zt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Vt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Dt={style:{}},Ut={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},Pt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Nt={style:{"flex-grow":"1"}},Ot={style:{"margin-top":"20px"}},Gt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ht={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Lt={style:{}},Jt={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},Rt={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},qt={style:{"flex-grow":"1"}},Xt={style:{"margin-top":"20px"}},Wt={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Yt={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},Kt={style:{"font-size":"12px"}},Qt={key:0,style:{position:"absolute",top:"30px",width:"100%",left:"0","z-index":"100",padding:"0 8px"},class:"dark:bg-[#222325] bg-[#F0F0F0]"},Zt=["onClick"],el={style:{"margin-top":"20px"}},al={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},tl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px] flex"},ll={style:{}},il={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#fff",padding:"0 10px"}},sl={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},rl={style:{"flex-grow":"1"}},nl={key:2,class:"ImgToTextBox"},ol={style:{display:"flex","margin-bottom":"6px"}},dl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},ul={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},pl={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},vl={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},cl={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},ml={class:"text-[12px] text-[#3e6ae7]"},xl={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#383838] border border-[#E8E8E8] dark:border-[#292A2E]"},gl=["src"],fl={style:{"margin-top":"20px"}},yl={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},wl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},hl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},bl={key:3,class:"imgMixImg",style:{height:"calc(100vh - 54px)"}},kl={style:{display:"flex","margin-bottom":"6px"}},El={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Fl={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},Il={style:{display:"flex","flex-wrap":"wrap"}},Cl={style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},Tl=["src"],Al=["onClick"],_l={class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]"},$l={class:"text-[#000] dark:text-[#94989f]"},jl={style:{"margin-top":"20px"}},Ml={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Sl={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Bl={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},zl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Vl={class:"sizeMain"},Dl=["onClick"],Ul={style:{height:"40px",display:"flex","align-items":"center"}},Pl={style:{"margin-top":"20px"}},Nl={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Ol={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Gl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Hl={key:4,class:"AIBox"},Ll={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},Jl={style:{"margin-top":"3px","font-size":"12px"}},Rl={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ql=["src"],Xl={key:1,class:"text-[#000] dark:text-[#94989f]"},Wl={style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Yl={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},Kl={style:{"margin-top":"3px","font-size":"12px"}},Ql={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Zl=["src"],ei={key:1,class:"text-[#000] dark:text-[#94989f]"},ai={style:{"font-size":"10px","margin-top":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ti={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},li={class:"",style:{display:"flex","align-items":"center","margin-top":"8px"}},ii={style:{"margin-top":"3px","font-size":"12px"}},si={style:{"font-size":"10px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},ri={key:5,class:"bottom dark:border-[#383737]"},ni={style:{padding:"0 12px",position:"absolute",bottom:"12px",left:"0px",width:"100%"}},oi={key:0,class:"vipIcon",src:xe,alt:""},di={key:0,style:{color:"#fff"}},ui={key:1,style:{color:"#fff"}},pi={key:2,style:{color:"#fff"}},vi={key:3,style:{color:"#fff"}},ci={key:4,style:{display:"flex","align-items":"center",color:"#fff"}},mi={style:{"font-size":"10px"}},xi={key:5,style:{color:"#fff"}},gi=z(e({__name:"SubSidebar",props:{drawType:String},emits:["changeDataType","stylesList","rolesList","iwValue","swValue","cwValue","ar","no","s","c","q","weird","matsList","close","setEnabled","incantationCn","submitData"],setup(e,{emit:u}){const p=s(),v=r((()=>1===p.userInfo.lifetimeVip||p.userInfo.vipExpire&&new Date(p.userInfo.vipExpire)>new Date)),c=r((()=>p.userInfo.vipLeavelId));let F=n([]);o().then((e=>{F.value=e.data}));const _=e,M=r((()=>p.isLogin)),z=r((()=>p.userInfo));!z.value||!z.value.lifetimeVip||z.value.lifetimeVip;const K=d("mjBase"),Q=n(!1);n(!1);const Z=n(_.drawType),ee=u,ae=i(),te=V(),{selectFile:le}=we(),ie=n(0),se=n(!1);function oe(e){Z.value=e,ee("changeDataType",Z.value)}n(!1);const de=n(!1);function ue(){de.value=!1}const pe=n(),ve=n();function ce(){de.value=!0,setTimeout((()=>{W((()=>{ve.value[0].focus()}))}),100)}const me=[{name:"--iw 0.25 "+S("draw.similarity")+"30%",id:0,value:.25,isSelect:!0},{name:"--iw 0.5 "+S("draw.similarity")+"40%",id:1,value:.5,isSelect:!1},{name:"--iw 1 "+S("draw.similarity")+"50%",id:2,value:1,isSelect:!1},{name:"--iw 1.25 "+S("draw.similarity")+"60%",id:3,value:1.25,isSelect:!1},{name:"--iw 1.5 "+S("draw.similarity")+"70%",id:4,value:1.5,isSelect:!1},{name:"--iw 1.75 "+S("draw.similarity")+"80%",id:5,value:1.75,isSelect:!1},{name:"--iw 2 "+S("draw.similarity")+"90%",id:6,value:2,isSelect:!1}],xe=n(me[ie.value].value),ge=n(0),fe=n(""),he=n(""),be=n(0),ke=n("200px"),Fe=n(""),Ie=n({Setwidth:1,Setheight:1}),Ce=n(0),Ae=n(!1),_e=[{name:"1x",id:0,isSelect:!0,value:1},{name:"0.25x",id:1,isSelect:!1,value:.25},{name:"0.5x",id:2,isSelect:!1,value:.5}],$e=n(_e[Ce.value].value),je=n(!1),Me=n([]),Se=n(0);function Be(){ee("s",be.value)}const ze=n(0);function Ve(){ee("c",ze.value)}const De=n(0);function Ue(){ee("weird",De.value)}function Pe(){}m((()=>je.value),(e=>{ee("setEnabled",e)})),m(fe,(e=>{ee("no",fe.value)}));const Ne=n(10);function Oe(){Ne.value>100?Ne.value=100:Ne.value<0&&(Ne.value=0),ee("cwValue",Ne.value)}m(Ne,(e=>{ee("cwValue",Ne.value)}),{immediate:!0});const Ge=n([]),He=n([]);const Le=n("/api/file/upload2Local");async function Je(e=1){let a;if(1===e){if(a=await le(),!a)return void ae.error(S("chat.choseFileErro"))}else a=e;const t=new FormData;t.append("file",a),await Y.post(Le.value,t,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{if(a.data){let{data:e}=a.data;if(0!=Ge.value.filter((a=>a.src==e)).length)return void ae.error(S("draw.CannotRepeatedly"));Ge.value.push({src:e,cwIsShow:!1,swIsShow:!1,swValue:5,swinpIsShow:!1})}1!==e&&te.updateRecordDialog(!1)}))}function Re(){}m(Ge.value,(e=>{ee("matsList",e.map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),ee("stylesList",e.filter((e=>e.swIsShow)).map((e=>e.src+(e.swValue?"::"+e.swValue:"")))),ee("rolesList",e.filter((e=>e.cwIsShow)).map((e=>e.src)))}),{immediate:!0,deep:!0}),m(Ie.value,(e=>{if(console.log("数据发生变化",e),Fe.value==S("knowledge.customize")){let a=Number(e.Setwidth)+":"+Number(e.Setheight);ee("ar",a)}}));const qe=[{name:S("draw.avatarFrame"),value:"1:1",width:"16px",height:"16px",id:0,iconD:"1_1"},{name:S("draw.phoneWallpaper"),value:"1:2",width:"12px",height:"24px",id:1,iconD:"1_2"},{name:S("draw.computerWallpaper"),value:"16:9",width:"20px",height:"12px",id:2,iconD:"16_9"},{name:S("draw.promotionalPoster"),value:"9:16",width:"12px",height:"20px",id:3,iconD:"9_16"},{name:S("draw.articleImg"),value:"4:3",width:"22px",height:"17px",id:4,iconD:"4_3"},{name:S("draw.medialeImg"),value:"3:4",width:"17px",height:"22px",id:5,iconD:"3_4"},{name:S("draw.hengCard"),value:"3:2",width:"23px",height:"16px",id:6,iconD:"3_2"},{name:S("draw.redBook"),value:"2:3",width:"16px",height:"23px",id:7,iconD:"2_3"}];n("mj");const Xe=n(5),We=[{name:"MJ6.1",intro:S("draw.MJdec1"),id:5,value:"--v 6.1",group:"mj"},{name:"MJ7",intro:S("draw.MJdec2"),id:7,value:"--v 7",group:"mj"},{name:"MJ6.0",intro:S("draw.MJdec3"),id:0,value:"--v 6.0",group:"mj"},{name:"MJ5.2",intro:S("draw.MJdec4"),id:1,value:"--v 5.2",group:"mj"},{name:"MJ5.1",intro:S("draw.MJdec5"),id:2,value:"--v 5.1",group:"mj"},{name:"Nj6.0",intro:S("draw.MJdec6"),id:3,value:"--niji 6",group:"nj"},{name:"Nj5.0",intro:S("draw.MJdec7"),id:4,value:"--niji 5",group:"nj"}];let Ye=n(!1);K.mjVersionChange(We[0].value),D({page:1,size:20,type:"style"}).then((e=>{let a=e.data.filter((e=>2==e.level));Me.value=a,Ze(Me.value[0].pid)}));const Ke=n();const Qe=n([]);function Ze(e){U({id:e}).then((e=>{e.data.rows.length&&(Qe.value=e.data.rows[0].children)}))}const ea=({focused:e,checked:a})=>{const t={};return a&&(t.background="linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"),e&&(t.boxShadow="0 0 0 2px #957df480"),t},aa=n(""),ta=n([]),la=n(),ia=n();async function gi(e=1,a){if("imgmiximg"==a&&5==ta.value.length)return void ae.warning(S("draw.max5Img"));let t;if(1===e){if(t=await le(),!t)return void ae.error(S("chat.choseFileErro"))}else t=e;(new FormData).append("file",t),function(e){return new Promise(((a,t)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=function(){const e=l.result.split(",")[1];a(e)},l.onerror=function(){t(new Error("Failed to load file"))}}))}(t).then((e=>{let t="data:image/png;base64,"+e;if("imgToText"==a)aa.value=t;else if("Ai1"==a)la.value=t;else if("Ai2"==a)ia.value=t;else if("imgmiximg"==a){if(0!=ta.value.filter((e=>e==t)).length)return void ae.error(S("draw.CannotRepeatedly"));ta.value.push(t)}}))}function fi(e,a){"imgMixImg"==a?ta.value=ta.value.filter((a=>a!=e)):"imgToText"==a?aa.value="":"Ai1"==a?la.value="":"Ai2"==a&&(ia.value="")}const yi=n(1);n(1);const wi=n(0),hi=[{name:S("draw.CannotRepeatedly"),intro:"1:2",value:"SQUARE",width:"16px",height:"16px",id:0},{name:S("draw.hengCard"),intro:"3:2",value:"PORTRAIT",width:"23px",height:"16px",id:1},{name:S("draw.redBook"),intro:"2:3",value:"LANDSCAPE",width:"16px",height:"23px",id:2}],bi=n(hi[wi.value].value);function ki(){if(M.value){if(Ei.value.isVipUsed&&-1===Ei.value.userType.indexOf(c.value)){let e=Ei.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=F.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void ae.error(S("digitalMan.vipUse1")+a+S("digitalMan.vipUse1"))}if("imgToText"==Z.value){if(!aa.value)return void ae.error(S("draw.PuploadImg"));let e={action:ne.IMAGE_TO_TEXT,mode:yi.value,files:"",base64Array:[aa.value],type:re.IMAGE_TO_TEXT};ee("submitData",e),ta.value=[],aa.value=""}else if("imgMixImg"==Z.value){if(ta.value.length<2)return void ae.error(S("draw.min2Img"));let e={action:ne.IMAGE_MIX_IMAGE,mode:yi.value,size:bi.value,base64Array:ta.value,type:re.IMAGE_MIX_IMAGE};ee("submitData",e),ta.value=[],aa.value=""}else if("AI"==Z.value){if(!la.value)return void ae.error(S("draw.uploadFaceImg"));if(!ia.value)return void ae.error(S("draw.uploadFaceReplace"));let e={params:{action:22,mode:yi.value,sourceBase64:la.value,targetBase64:ia.value},type:re.INSIGHT_FACE};ee("submitData",e),ta.value=[],aa.value=""}}else p.setLoginDialog(!0)}const Ei=n({remainCount:0,freeCount:0,useIntegrate:0}),Fi=n(!1);m((()=>Z.value),((e,a)=>{!function(){let e={};"imgToText"==Z.value?e={params:{action:ne.IMAGE_TO_TEXT,mode:yi.value},type:re.IMAGE_TO_TEXT}:"imgMixImg"==Z.value?e={params:{action:ne.IMAGE_MIX_IMAGE,mode:yi.value},type:re.IMAGE_MIX_IMAGE}:"AI"==Z.value&&(e={params:{action:22,mode:yi.value},type:re.INSIGHT_FACE}),B(e).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(Ei.value=e.data,Fi.value=!1):Fi.value=!0})).catch((e=>{Fi.value=!0}))}()}),{deep:!0,immediate:!0});const Ii=n({textToImg:S("draw.textToImg"),imgToText:S("draw.imgToText"),imgMixImg:S("draw.imgMixImg"),AI:S("draw.AI")});return(e,i)=>(a(),t("div",oa,[l("div",da,[x(I(N),{class:"card-tabs","default-value":Z.value,value:Z.value,size:"large",animated:"","onUpdate:value":oe},{default:E((()=>[x(I(P),{name:"textToImg",tab:e.$t("draw.textGenImg")},null,8,["tab"]),x(I(P),{name:"imgMixImg",tab:e.$t("draw.mixImg")},null,8,["tab"]),x(I(P),{name:"imgToText",tab:e.$t("draw.imgGenText")},null,8,["tab"]),x(I(P),{name:"AI",tab:e.$t("draw.AIChangeFace")},null,8,["tab"])])),_:1},8,["default-value","value"]),"textToImg"!=Z.value?(a(),t("div",ua,[l("div",pa,[l("p",va,g(e.$t("draw.AIChangeFace")),1),l("div",ca,g(Ii.value[Z.value]),1)])])):h("",!0),"textToImg"==Z.value?(a(),t("div",ma,[l("div",xa,[l("div",ga,[l("div",fa,g(e.$t("draw.modelSelect")),1),l("div",ya,[x(I(G),{value:Xe.value,"onUpdate:value":i[0]||(i[0]=e=>Xe.value=e),"label-field":"name","value-field":"id",options:We,onClick:i[1]||(i[1]=e=>O(Ye)?Ye.value=!I(Ye):Ye=!I(Ye)),show:!1},null,8,["value"]),7==Xe.value?(a(),t("div",wa,"NEW")):h("",!0),b(l("div",ha,[l("p",null,g(e.$t("draw.modelSelect"))+":",1),(a(),t(f,null,y(We,(e=>l("div",{class:w(["selectItem",Xe.value==e.id?"active":""]),onClick:a=>{!function(e){Xe.value=e.id,K.mjVersionChange(e.value)}(e),O(Ye)?Ye.value=!1:Ye=!1}},[l("div",ka,[T(g(e.name)+" ",1),"MJ7"==e.name?(a(),t("div",Ea,"NEW ")):h("",!0)]),l("span",null,g(e.intro),1),i[24]||(i[24]=l("img",{src:ye,alt:""},null,-1))],10,ba))),64))],512),[[H,I(Ye)]])])])]),l("div",Fa,[l("div",Ia,[l("div",Ca,g(e.$t("draw.styleSelect")),1)]),l("div",Ta,[l("div",Aa,[(a(!0),t(f,null,y(Me.value,((e,l)=>(a(),t("div",{class:w(Se.value==l?"styleItemSelect":"styleItem"),onClick:e=>function(e){Se.value=e,Ze(Me.value[e].pid)}(l),key:e.id},g(e.classifyName),11,_a)))),128))],512),l("div",{class:"styleImgBox",style:j({maxHeight:Q.value?"unset":ke.value})},[(a(!0),t(f,null,y(Qe.value,((e,i)=>(a(),t("div",{class:w(Ke.value==i?"styleImgItemSelect":"styleImgItem"),onClick:a=>function(e){let{incantationEn:a}=e.item;Ke.value=e.index,ee("incantationCn",a)}({item:e,index:i})},[l("div",ja,g(e.incantationCn),1),l("img",{src:e.img,alt:""},null,8,Ma)],10,$a)))),256)),(a(),t(f,null,y(3,(e=>l("div",Sa))),64))],4),Qe.value.length>10?(a(),t("div",{key:0,onClick:i[2]||(i[2]=e=>Q.value=!Q.value),class:"flex justify-center w-[100%] cursor-pointer"},[l("div",Ba,[Q.value?(a(),t(f,{key:1},[l("span",null,g(e.$t("draw.closeUp")),1),x(I(C),{size:"18px"},{default:E((()=>[x(I(Te))])),_:1})],64)):(a(),t(f,{key:0},[l("span",null,g(e.$t("draw.openMore")),1),x(I(C),{size:"18px"},{default:E((()=>[x(I(Ee))])),_:1})],64))])])):h("",!0)])]),l("div",za,[l("div",Va,[l("div",Da,g(e.$t("draw.sizeChose")),1)]),l("div",Ua,[(a(),t(f,null,y(qe,(e=>l("div",{class:w([ge.value==e.id?" dark:border-[#0066ff] dark:bg-[#383838] sizeSelected border-[#574FFE] bg-[#ededfb]":"dark:border-[#292A2E] dark:bg-[#383838] border-[#F2F3F7] bg-[#F2F3F7]","sizeItem border"]),key:e.id,onClick:a=>function(e){ge.value=e.id,Fe.value=e.name,e.name!=S("knowledge.customize")&&ee("ar",e.value)}(e)},[l("div",Na,[l("div",{class:w(["icon-img","img"+e.iconD]),style:j(ge.value==e.id?"border:1px solid #574FFE;":"")},null,6)]),""!=e.value?(a(),t("p",{key:0,class:"t3",style:j(ge.value==e.id?"color:#574FFE;":"")},g(e.value),5)):(a(),t("div",Oa,[b(l("input",{onClick:L(Re,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[3]||(i[3]=e=>Ie.value.Setwidth=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[k,Ie.value.Setwidth]]),i[25]||(i[25]=l("p",{style:{margin:"0 4px"}},":",-1)),b(l("input",{onClick:L(Re,["stop"]),style:{width:"18px",height:"18px","text-align":"center","border-radius":"6px"},"onUpdate:modelValue":i[4]||(i[4]=e=>Ie.value.Setheight=e),class:"bg-[#F0F0F0] dark:bg-[#b4b4b4]",type:"text"},null,512),[[k,Ie.value.Setheight]])]))],10,Pa))),64))])]),l("div",Ga,[l("div",Ha,[l("div",La,[T(g(e.$t("draw.doesZhilin"))+" ",1),x(I(J),{trigger:"hover",placement:"top"},{trigger:E((()=>i[26]||(i[26]=[l("img",{src:sa,alt:""},null,-1)]))),default:E((()=>[l("div",null,[l("div",null,g(e.$t("draw.doesText1")),1),l("div",null,g(e.$t("draw.doesText2")),1),l("div",null,g(e.$t("draw.doesText3")),1)])])),_:1})]),x(I($),{style:{"margin-left":"8px","margin-right":"8px"},value:je.value,"onUpdate:value":i[5]||(i[5]=e=>je.value=e),"rail-style":ea,size:"small"},null,8,["value"])])]),x(I(X),{"arrow-placement":"right",class:"role-collapse"},{default:E((()=>[x(I(R),{class:"role-collapse-item",title:"高级参数",name:"1"},{default:E((()=>[l("div",Ja,[l("div",Ra,[l("div",qa,[l("div",Xa,g(e.$t("draw.cankaoImg")),1)]),l("div",Wa,[(a(!0),t(f,null,y(Ge.value,((s,r)=>(a(),t("div",{class:"upload border dark:border-[#292A2E] border-[#F0F0F0]",key:r,style:{position:"relative"}},[l("span",{class:"remove",onClick:L((e=>Ge.value.splice(r,1)),["stop"])},i[27]||(i[27]=[l("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHdSURBVDiNtdWxi9pgHMbxby4nFEvuQMEIxeHQLYtCHXTQKVPBRRw6ZHCNe8YGuohjB+PgnyB2OOgYgoIedFCHLjlxKgen5YbrcBauwQ53ATmScG29H7wE8vB8El4SXgE45//mN/AdGANfgF8AwgHg/bkCPgA/jg6IArwBPgKvDg37+LuXgAEqLwVnQuHRaFSczWZlRVHiQbmiKPHlclkdjUbFgPg4FJYkKVYoFJK2bZee4oqixG3bLuVyuRNJkmJB/VBY07TFarW6lWU5vo/7qCzL8dVqdatp2iKoH/kdp1Kp2HQ6LWWz2dP1en3XarUW3W4376Plcvlis9nc/zXs44PBIF+pVNL+vfF4fN1oNBZhKERshT+bzebeNE3X87wdgOd5O9M03Sj0WbBhGBnHcaqiKArz+fxGFEXBcZyqYRiZqJ4IvI9CO51OHqDX613WarWFLMtCsVhMqqqa3m6328lk8jOsfx602u32t93jWJbl7meWZblhmb9Ct6LZbJ75b6rruruf6bru9nq9SwBVVdNBfQH4DBw/Der1ejKRSMT6/f512MPr9XoSYDgc3gTBn4CzsPK/jgi8BvKHho94OE6uDg2LPJxZX4G3wMkhYYA7wH68ngISz/h5ouYPRiq/PPmBkeEAAAAASUVORK5CYII="},null,-1)]),8,Ya),""!=s.src?(a(),t("div",{key:0,style:{display:"flex","justify-content":"center","align-items":"center"},class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",onClick:i[6]||(i[6]=e=>Je(1))},[l("img",{src:s.src,alt:""},null,8,Ka)])):(a(),t("div",{key:1,class:"title dark:bg-[#383838] bg-[#FFFFFF] dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0"},onClick:i[7]||(i[7]=e=>Je(1))},g(e.$t("digitalMan.clickUpload")),1)),l("div",{class:"bot-p",style:j(s.src?"opacity: 0.9;":"")},[l("div",Qa,[s.swIsShow?(a(),t("div",{key:0,class:"left",onClick:e=>function(e){e.swinpIsShow=!0,setTimeout((()=>{W((()=>{pe.value[0].focus()}))}),100)}(s)},[s.swinpIsShow?b((a(),t("input",{key:0,onBlur:e=>function(e){e.swinpIsShow=!1}(s),ref_for:!0,ref_key:"refInput",ref:pe,"onUpdate:modelValue":e=>s.swValue=e,style:{width:"100%","background-color":"transparent","font-size":"12px"},type:"text",onInput:e=>function(e){e.swValue>100?e.swValue=100:e.swValue<0&&(e.swValue=0),ee("swValue",e.swValue)}(s)},null,40,et)),[[k,s.swValue]]):(a(),t("p",at,g(s.swValue?s.swValue:"权重"),1))],8,Za)):(a(),t("div",tt)),l("div",lt,[l("p",it,g(e.$t("draw.styleOnes")),1),x(I($),{class:"swi",size:"small",disabled:0==s.swIsShow&&3==He.value.length,value:s.swIsShow,"onUpdate:value":[e=>s.swIsShow=e,e=>{}],"rail-style":ea},null,8,["disabled","value","onUpdate:value"])])]),l("div",st,[s.cwIsShow?(a(),t("div",{key:0,class:"left",onClick:ce},[de.value?b((a(),t("input",{key:0,type:"text",onBlur:ue,ref_for:!0,ref_key:"refInput1",ref:ve,"onUpdate:modelValue":i[8]||(i[8]=e=>Ne.value=e),style:{width:"100%","background-color":"transparent"},onInput:Oe},null,544)),[[k,Ne.value]]):(a(),t("p",rt,g(Ne.value?Ne.value:"--cw"),1))])):(a(),t("div",nt)),l("div",ot,[l("p",dt,g(e.$t("draw.PersonOnes")),1),x(I($),{class:"swi",size:"small","onUpdate:value":[e=>function(e,a){Ge.value.forEach(((e,t)=>{a!=t&&(e.cwIsShow=!1)}))}(0,r),e=>s.cwIsShow=e],value:s.cwIsShow,"rail-style":ea},null,8,["onUpdate:value","value"])])])],4)])))),128)),l("div",ut,[l("div",{class:"title dark:text-[#006DF7] text-[#006DF7]",style:{padding:"40px 0",border:"1px dashed #A5A5A5"},onClick:i[9]||(i[9]=e=>Je(1))},[l("div",pt,g(e.$t("draw.imgTuo")),1),l("div",vt,[i[28]||(i[28]=l("img",{src:"/static/svg/upload-5b2ef103.svg",style:{"margin-right":"4px"}},null,-1)),T(g(e.$t("draw.huoClickUpload")),1)])]),l("div",ct,[l("div",mt,[i[29]||(i[29]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",xt,[l("p",gt,g(e.$t("draw.styleOnes")),1),x(I($),{class:"swi",size:"small",disabled:"","rail-style":ea})])]),l("div",ft,[i[30]||(i[30]=l("div",{style:{width:"1px",height:"1px"}},null,-1)),l("div",yt,[l("p",wt,g(e.$t("draw.PersonOnes")),1),x(I($),{class:"swi",size:"small",disabled:"","rail-style":ea})])])])])]),l("div",null,[l("div",{onClick:i[10]||(i[10]=e=>se.value=!se.value),style:{display:"flex",cursor:"pointer","max-width":"100%",width:"100%",padding:"16px","border-radius":"8px","justify-content":"space-between","margin-top":"20px",position:"relative"},class:"border dark:bg-[#383838] dark:border-[#292A2E] bg-[#fff] border-[#E8E8E8]"},[l("div",ht,[l("p",bt,g(e.$t("draw.similarity")),1),x(I(J),{trigger:"hover",placement:"top"},{trigger:E((()=>i[31]||(i[31]=[l("img",{src:sa,alt:""},null,-1)]))),default:E((()=>[l("div",kt,"--iw "+g(e.$t("draw.hightToBig")),1)])),_:1})]),l("div",Et,[l("p",Ft,g(me[ie.value].name),1),i[32]||(i[32]=l("img",{style:{width:"18px",height:"18px"},src:ra,alt:""},null,-1))]),se.value?(a(),t("div",It,[(a(),t(f,null,y(me,(e=>l("div",{class:"iwItem",style:j(ie.value==e.id?"color:#7369E2":""),key:e.id,onClick:a=>function(e){ie.value=e.id,xe.value=e.value,ee("iwValue",xe.value)}(e)},g(e.name),13,Ct))),64))])):h("",!0)])])]),l("div",Tt,[l("div",At,g(e.$t("draw.notWorld")),1)]),l("div",_t,[b(l("textarea",{"onUpdate:modelValue":i[11]||(i[11]=e=>fe.value=e),onInput:Pe,style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"输入不想出现在图像中的内容（例如树木，0/200）"},null,544),[[k,fe.value]]),l("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:i[12]||(i[12]=e=>fe.value="")},g(e.$t("common.clear")),1)])]),l("div",$t,[l("div",jt,[l("div",Mt,"--seed "+g(e.$t("draw.seed")),1)]),l("div",St,[b(l("input",{class:"inp bg-[#FFF] dark:bg-[#383838] w-[100%]",style:{flex:"1","border-radius":"6px",padding:"4px 6px"},type:"text","onUpdate:modelValue":i[13]||(i[13]=e=>he.value=e)},null,512),[[k,he.value]])])]),l("div",null,[l("div",Bt,[l("div",zt,[l("div",Vt,[T("--s "+g(e.$t("draw.styleHua"))+" ",1),x(I(J),{trigger:"hover",placement:"top"},{trigger:E((()=>i[33]||(i[33]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:sa,alt:""},null,-1)]))),default:E((()=>[l("div",Dt,g(e.$t("draw.styleHuaText1")),1)])),_:1})])]),l("div",Ut,[l("div",Pt,g(be.value),1),l("div",Nt,[x(I(q),{value:be.value,"onUpdate:value":i[14]||(i[14]=e=>be.value=e),step:1,max:1e3,onDragend:Be},null,8,["value"])])])]),l("div",Ot,[l("div",Gt,[l("div",Ht,[T("--c "+g(e.$t("draw.moreHua"))+" ",1),x(I(J),{trigger:"hover",placement:"top"},{trigger:E((()=>i[34]||(i[34]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:sa,alt:""},null,-1)]))),default:E((()=>[l("div",Lt,g(e.$t("draw.moreHuaText1")),1)])),_:1})])]),l("div",Jt,[l("div",Rt,g(ze.value),1),l("div",qt,[x(I(q),{value:ze.value,"onUpdate:value":i[15]||(i[15]=e=>ze.value=e),step:1,onDragend:Ve},null,8,["value"])])])]),l("div",Xt,[l("div",Wt,[l("div",Yt,"--quelity "+g(e.$t("draw.quelity")),1)]),l("div",{class:"selectQuelity dark:bg-[#383838] bg-[#F0F0F0] flex",style:{position:"relative",flex:"1",cursor:"pointer",padding:"4px 6px","border-radius":"6px",display:"flex","margin-left":"8px","align-items":"center","justify-content":"space-between"},onClick:i[16]||(i[16]=e=>Ae.value=!Ae.value)},[l("p",Kt,g(_e[Ce.value].name),1),i[35]||(i[35]=l("img",{style:{width:"12px",height:"12px"},src:ra,alt:""},null,-1)),Ae.value?(a(),t("div",Qt,[(a(),t(f,null,y(_e,(e=>l("div",{class:"",onClick:a=>function(e){Ce.value=e.id,$e.value=e.value,ee("q",$e.value)}(e),style:j([{padding:"4px 0"},Ce.value==e.id?"color:#7369E2":""]),key:e.id},g(e.name),13,Zt))),64))])):h("",!0)])]),l("div",el,[l("div",al,[l("div",tl,[T("--weird "+g(e.$t("draw.weird"))+" ",1),x(I(J),{trigger:"hover",placement:"top"},{trigger:E((()=>i[36]||(i[36]=[l("img",{style:{"margin-left":"4px",width:"14px",height:"14px","margin-top":"3px"},src:sa,alt:""},null,-1)]))),default:E((()=>[l("div",ll,g(e.$t("draw.weirdText1")),1)])),_:1})])]),l("div",il,[l("div",sl,g(De.value),1),l("div",rl,[x(I(q),{value:De.value,"onUpdate:value":i[17]||(i[17]=e=>De.value=e),step:1,onDragend:Ue},null,8,["value"])])])])])])),_:1})])),_:1})])):h("",!0),"imgToText"==Z.value?(a(),t("div",nl,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[18]||(i[18]=e=>gi(1,"imgToText"))},[l("div",ol,[l("div",null,[l("div",dl,g(e.$t("draw.PuploadImg")),1),l("div",ul,g(e.$t("draw.PuploadImgText1")),1)])]),""==aa.value?(a(),t("div",pl,[l("div",vl,g(e.$t("draw.cankaoImgTuo")),1),l("div",cl,g(e.$t("draw.huo")),1),l("div",ml,g(e.$t("digitalMan.clickUpload")),1)])):(a(),t("div",xl,[l("img",{src:aa.value,style:{height:"100%"}},null,8,gl)]))]),l("div",fl,[l("div",yl,[l("div",wl,g(e.$t("draw.wenxinTips")),1)]),l("div",hl,g(e.$t("draw.wenxinTipsText")),1)])])):h("",!0),"imgMixImg"==Z.value?(a(),t("div",bl,[l("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:i[19]||(i[19]=e=>gi(1,"imgmiximg"))},[l("div",kl,[l("div",null,[l("div",El,g(e.$t("draw.PuploadImg")),1),l("div",Fl,g(e.$t("draw.upload2T5Img")),1)])]),l("div",Il,[l("div",Cl,[(a(!0),t(f,null,y(ta.value,((e,s)=>(a(),t("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",key:s},[e?(a(),t("img",{key:0,src:e,alt:""},null,8,Tl)):h("",!0),l("div",{class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:L((a=>fi(e,"imgMixImg")),["stop"])},i[37]||(i[37]=[l("img",{src:na,alt:""},null,-1)]),8,Al)])))),128)),l("div",_l,[l("p",$l,g(e.$t("digitalMan.clickUpload")),1)])])])]),l("div",jl,[l("div",Ml,[l("div",Sl,g(e.$t("homePage.imgSize")),1),l("div",Bl,g(e.$t("draw.choseImgSize")),1)]),l("div",zl,[l("div",Vl,[(a(),t(f,null,y(hi,(e=>l("div",{class:w([wi.value==e.id?"dark:border-[#0066ff] border-[#574FFE] bg-[#ededfb] dark:bg-[#383838] sizeSelected":"dark:border-[#292A2E] dark:bg-[#383838] border-[#F2F3F7] bg-[#F2F3F7]","sizeItem border"]),key:e.id,onClick:a=>function(e){wi.value=e.id,bi.value=e.value}(e)},[l("div",Ul,[l("div",{style:j({width:e.width,height:e.height}),class:w(["size border",wi.value==e.id?"border-[#574FFE]  dark:bg-[#D3D1D9]":"dark:bg-[#D3D1D9] dark:border-[#46484F] bg-[#F8F9F9] border-[#CDCECE]"])},null,6)]),l("p",{class:w(["dark:text-[#6C6E79]",wi.value==e.id?"text-[#574FFE]":"text-[#8B8C8C]"])},g(e.intro),3),l("p",{class:w(["dark:text-[#6C6E79]",wi.value==e.id?"text-[#574FFE]":"text-[#8B8C8C]"])},g(e.name),3)],10,Dl))),64))])])]),l("div",Pl,[l("div",Nl,[l("div",Ol,g(e.$t("draw.wenxinTips")),1)]),l("div",Gl,g(e.$t("draw.wenxinTipsText2")),1)])])):h("",!0),"AI"==Z.value?(a(),t("div",Hl,[i[40]||(i[40]=l("div",{class:"line bg-[#EBEBEB] dark:bg-[#222226]"},null,-1)),l("div",Ll,[l("p",Jl,g(e.$t("draw.oneUploadFace")),1)]),l("div",Rl,g(e.$t("draw.warnUploadText1")),1),l("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",onClick:i[21]||(i[21]=e=>gi(1,"Ai1"))},[la.value?(a(),t("img",{key:0,src:la.value,alt:""},null,8,ql)):(a(),t("p",Xl,g(e.$t("digitalMan.clickUpload")),1)),la.value?(a(),t("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[20]||(i[20]=L((e=>fi(la.value,"Ai1")),["stop"]))},i[38]||(i[38]=[l("img",{src:na,alt:""},null,-1)]))):h("",!0)]),l("div",Wl,g(e.$t("draw.uploadFaceText1")),1),l("div",Yl,[l("p",Kl,g(e.$t("draw.towUploadFace")),1)]),l("div",Ql,g(e.$t("draw.warnUploadText1")),1),l("div",{class:"upload border-[1px] border-[#E0E2E9] dark:border-[#383737]",onClick:i[23]||(i[23]=e=>gi(1,"Ai2"))},[ia.value?(a(),t("img",{key:0,src:ia.value,alt:""},null,8,Zl)):(a(),t("p",ei,g(e.$t("digitalMan.clickUpload")),1)),ia.value?(a(),t("div",{key:2,class:"del dark:bg-[#19191B] bg-[#EFEFEF]",onClick:i[22]||(i[22]=L((e=>fi(ia.value,"Ai2")),["stop"]))},i[39]||(i[39]=[l("img",{src:na,alt:""},null,-1)]))):h("",!0)]),l("div",ai,g(e.$t("draw.maxImgText1")),1),l("div",ti,g(e.$t("draw.notManHuaImg")),1),l("div",li,[l("p",ii,g(e.$t("draw.threeUploadFace")),1)]),l("div",si,g(e.$t("draw.mianzeText1")),1)])):h("",!0),"textToImg"!=Z.value?(a(),t("div",ri,[l("div",ni,[Ei.value&&Ei.value.isVipUsed?(a(),t("img",oi)):h("",!0),x(I(A),{loading:I(K).isLoading.value,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"64px","font-size":"15px","border-radius":"10px",padding:"12px 0"},onClick:ki},{default:E((()=>[Fi.value?(a(),t("span",di,g(e.$t("draw.modelNotSet")),1)):I(p).isLogin?Ei.value&&Ei.value.isVipFree&&v.value?(a(),t("span",pi,g(e.$t("chat.vipFree")),1)):Ei.value&&Ei.value.remainCount&&v.value?(a(),t("span",vi,g(e.$t("draw.shenyu")+Ei.value.remainCount+e.$t("draw.chiFree")),1)):Ei.value?(a(),t("div",ci,[l("span",null,g(e.$t("gpt.lijiGen")),1),l("span",mi,"（"+g(Ei.value.useIntegrate+e.$t("chat.pointsChi"))+"）",1)])):(a(),t("span",xi,g(e.$t("draw.gen")),1)):(a(),t("span",ui,g(e.$t("draw.beginGen")),1))])),_:1},8,["loading"])])])):h("",!0)])]))}}),[["__scopeId","data-v-6ebd4da3"]]),fi={class:"draw-midjourney-class",style:{display:"flex",height:"100%",overflow:"hidden"}},yi={style:{flex:"1",display:"flex","flex-direction":"column"},class:"contentBox border-l dark:border-[#2A2C30] border-[#fff] dark:bg-[#24262a] bg-[#fff]"},wi={class:"borTitel",style:{}},hi={style:{color:"#8C441A","font-size":"18px","font-weight":"500"}},bi={style:{"margin-left":"13px",color:"#8C441A","font-size":"14px"}},ki={key:0,style:{border:"1px solid rgba(224, 226, 233, 0.3)"}},Ei={key:1},Fi={key:0,class:"gap"},Ii={class:"mid"},Ci=z(e({__name:"midjourney",setup(e){const o=n(""),d=n(""),u=n(""),p=n(""),c=n(""),b=s(),k=r((()=>b.isLogin)),E=i(),I=n(""),C=n(0),T=n({translate:C.value,prompt:"",styles:[],roles:[],iw:.25,sw:0,cw:0,extend:"",mode:1,mats:[],enabled:!1,action:re.TEXT_TO_IMAGE}),A=n({ar:"",no:"",s:"",c:"",q:"",weird:""}),_=K(),$=n("textToImg");function j(e){$.value=e}function M(e){I.value=e}_.query.type&&($.value=_.query.type),fe({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{p.value=e.data.copyrightTitle,o.value=e.data.icpNumber,d.value=e.data.policeFilingNumber,u.value=e.data.icpUrl,c.value=e.data.policeFilingUrl}));let S=!1;const B=n([]);let z=[];const V=n(!1),D=n(!1),U=n([]);function P(e){T.value.styles=e}function N(e){T.value.roles=e}const O=n([]);function G(e){O.value=e}function H(e){T.value.iw=e}function L(e){T.value.enabled=e}function J(e){}function R(e){T.value.cw=Number(e)}function q(e){let a="--ar "+e;A.value.ar=a}function X(e){let a="--no "+e;A.value.no=a}function Y(e){let a="--s "+e;A.value.s=a}function ne(e){let a="--c "+e;A.value.c=a}function de(e){let a="--q "+e;A.value.q=a}function ue(e){let a="--weird "+e;A.value.weird=a}const pe=n("");function ve(e){pe.value=e||""}let ce=null;const xe=async function(){try{ce&&window.clearTimeout(ce);(await se({jobIds:z.join()})).data.forEach((e=>{const a=U.value.findIndex((a=>a.id===e.id));-1!==a&&U.value.splice(a,1,e),e.status>=3&&(z=z.filter((a=>a!==e.jobId)))})),z.length?ce=setTimeout((()=>xe()),3e3):ce&&window.clearTimeout(ce)}catch(e){ce=setTimeout((()=>xe()),3e3)}};m(k,(async e=>{if(1==e){const e={page:1,size:10},a=await ae(e);1===e.page&&(U.value=a.data.rows.reverse())}else U.value.length=0}));const ye={page:1,size:10},we=async function(e){try{D.value=!0;const a=await ae(ye);1===ye.page?U.value=a.data.rows.reverse():U.value=a.data.rows.reverse().concat(U.value),console.log(U.value),z=U.value.filter((e=>[1,2].includes(e.status))).map((e=>e.jobId)),z.length&&xe(),a.data.rows.length<ye.size&&(V.value=!0),W(e?()=>{var e;null==(e=Fe.value)||e.scrollTo({top:Fe.value.scrollHeight,behavior:"smooth"}),B.value.length&&B.value[B.value.length-1].scrollIntoView(),setTimeout((()=>{S=!0}),100)}:()=>{var e;let t=0;for(let l=0;l<a.data.rows.length;l++){const a=null==(e=Fe.value)?void 0:e.children[0].children[l];t+=(null==a?void 0:a.offsetHeight)||0}Fe.value.scrollTop=t}),D.value=!1}catch(a){D.value=!1}};Q.on("drawtoBottom",(e=>{var a;1===ye.page&&(null==(a=Fe.value)||a.scrollTo({top:Fe.value.scrollHeight,behavior:"smooth"}))}));const he=n("mj"),be=n(!1),ke=n(),Ee=async function(e,a){ke.value=!1,be.value=!0;try{let t=null;switch(e.type){case re.TEXT_TO_IMAGE:case re.IMAGE_ACTION:t=await ie(e),Q.emit("getUserInfo",!0);break;case re.IMAGE_MIX_IMAGE:case re.IMAGE_TO_TEXT:t=await le(e),Q.emit("getUserInfo",!0);break;case re.INSIGHT_FACE:t=await te(e),Q.emit("getUserInfo",!0)}if(t){const e=t.data;ke.value=!0,be.value=!1;U.value.find((a=>a.id===e.id))||(U.value.push(e),W((()=>{var e;null==(e=Fe.value)||e.scrollTo({top:Fe.value.scrollHeight,behavior:"smooth"})}))),e.status<3&&!z.includes(e.jobId)&&(z.push(e.jobId),xe())}a&&a(Boolean(null==t?void 0:t.success))}catch(t){E.error(t.message),ke.value=!0,be.value=!1,a&&a(!1)}},Fe=n(),Ie=function(e){const a=e.target;S&&a.scrollTop<=20&&(V.value||D.value||(ye.page=ye.page+1,we()))};Z((()=>{var e;null==(e=Fe.value)||e.removeEventListener("scroll",Ie)}));const Ce=n({}),Te=n({});return v((()=>{var e;b.getUserInfo(),Ce.value=JSON.parse(JSON.stringify(T.value)),Te.value=JSON.parse(JSON.stringify(A.value)),we(!0),null==(e=Fe.value)||e.addEventListener("scroll",Ie)})),ee("mjBase",{isLoading:be,mjParams:T,defaultMJParams:Ce,defaultExtendArr:Te,extendArr:A,styleMode:pe,mjVersionChange:function(e){he.value=e}}),(e,i)=>(a(),t("div",fi,[x(gi,{onStylesList:P,onRolesList:N,onSetEnabled:L,onIwValue:H,onSwValue:J,onCwValue:R,onAr:q,onNo:X,onS:Y,onC:ne,onQ:de,onWeird:ue,onMatsList:G,onIncantationCn:ve,drawType:$.value,onChangeDataType:j,onSubmitData:Ee},null,8,["drawType"]),l("div",yi,[l("div",wi,[l("span",hi,"# "+g(e.$t("draw.creationCenter")),1),l("p",bi,g(e.$t("draw.SafetyWarning")),1)]),l("div",{ref_key:"scrollView",ref:Fe,class:w({mb80:"textToImg"===$.value}),style:{flex:"1",overflow:"auto"}},[k.value&&0!=U.value.length?(a(),t("div",ki,[(a(!0),t(f,null,y(U.value,((e,t)=>(a(),F(oe,{type:"chat",task:e,key:e.jobId+"-"+e.status,onRemove:()=>function(e){U.value.splice(e,1)}(t),onAddTask:Ee},null,8,["task","onRemove"])))),128))])):(a(),t("div",Ei,[x(ge,{onHandleprompt:M})]))],2),"textToImg"===$.value?(a(),t("div",Fi,[x(me,{style:{bottom:"8px"}})])):h("",!0),l("div",Ii,["textToImg"==$.value?(a(),F(ia,{key:0,handleprompt:I.value,isSuccess:!!ke.value&&ke.value,mode:he.value,onSubmit:Ee},null,8,["handleprompt","isSuccess","mode"])):h("",!0)])])]))}}),[["__scopeId","data-v-0f7573fc"]]);export{Ci as default};
