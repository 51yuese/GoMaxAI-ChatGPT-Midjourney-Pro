import{e,k as a,g as l,p as s,L as t,r as n,J as o,q as i,aG as u,w as c,x as d,B as r,C as p,D as v,y as f,A as m,F as w,E as g,I as h,z as y,bh as b,_ as x}from"../main-be2ae0f3.js";import{g as k}from"./ppt.c87bceee.js";const C={class:"home-page bor30"},j={class:"flex w-full h-[calc(100vh - 50px)]"},L=["onClick"],R=["src","alt"],_={key:0,class:"flex justify-center items-center w-[calc(100% - 200px)] flex-1"},q=["src","alt"],E=x(e({__name:"detail",setup(e){const x=a(),E=l((()=>x.userInfo.id)),U=s(),I=t().params.id,$=n({}),z=n(!1);o.on("ppt-download",(()=>{O()})),i((()=>{!async function(){const{data:e}=await k({id:I});$.value=e,D.value=e.images[0]}()})),u((()=>{o.off("ppt-download")}));const D=n({});const H=n(null);function O(){z.value&&U.warning("正在下载中，请稍后"),z.value=!0,H.value=U.loading("正在下载中，请稍后",{duration:0});const e=new XMLHttpRequest;e.open("get",$.value.pdfDownUrl,!0),e.setRequestHeader("Content-Type","application/pdf"),e.responseType="blob",e.onload=function(){if(200===this.status){!function(e,a,l){const s=document.createElement("a"),t=window.URL.createObjectURL(e);s.href=t,s.download=`${a}.${l}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)}(this.response,$.value.title,"pdf"),H.value.destroy()}z.value=!1},e.send()}return(e,a)=>{var l,s;return c(),d("div",C,[r("div",j,[p(f(b),{style:{width:"200px",height:"calc(100vh - 50px)",padding:"20px"}},{default:v((()=>{var e;return[(c(!0),d(w,null,g(null==(e=$.value)?void 0:e.images,((e,a)=>(c(),d("div",{key:a,class:"mb-2 flex justify-between items-center cursor-pointer",onClick:a=>D.value=e},[r("div",{style:{color:"#9E9E9E","font-size":"16px"},class:h(e.url===D.value.url?"font-black":"")},y(a<9?`0${a+1}`:a+1),3),r("img",{src:`${e.url}?imageView2/0/w/120/q/85&format=webp&quality=lossless&width=120&height=70`,class:"small-img",alt:e.title},null,8,R)],8,L)))),128))]})),_:1}),(null==(l=D.value)?void 0:l.url)?(c(),d("div",_,[r("img",{src:D.value.url,alt:D.value.title,class:"big-img"},null,8,q)])):m("",!0)]),E.value==(null==(s=$.value)?void 0:s.userId)?(c(),d("div",{key:0,class:"export-btn",onClick:O}," 导出 ")):m("",!0)])}}}),[["__scopeId","data-v-502ecfd6"]]);export{E as default};
