import{e,k as a,g as l,p as s,ab as t,r as n,I as o,q as i,M as u,w as c,x as d,B as r,C as p,D as v,y as f,A as m,F as w,E as g,a1 as b,z as h,bF as y,_ as x}from"../main-bf8e7d49.js";import{g as k}from"./ppt.d221cd1f.js";const C={class:"home-page bor30"},j={class:"flex w-full h-[calc(100vh - 50px)]"},R=["onClick"],_=["src","alt"],q={key:0,class:"flex justify-center items-center w-[calc(100% - 200px)] flex-1"},E=["src","alt"],L=x(e({__name:"detail",setup(e){const x=a(),L=l((()=>x.userInfo.id)),U=s(),I=t().params.id,$=n({}),z=n(!1);o.on("ppt-download",(()=>{H()})),i((()=>{!async function(){const{data:e}=await k({id:I});$.value=e,D.value=e.images[0]}()})),u((()=>{o.off("ppt-download")}));const D=n({});const F=n(null);function H(){z.value&&U.warning("正在下载中，请稍后"),z.value=!0,F.value=U.loading("正在下载中，请稍后",{duration:0});const e=new XMLHttpRequest;e.open("get",$.value.pdfDownUrl,!0),e.setRequestHeader("Content-Type","application/pdf"),e.responseType="blob",e.onload=function(){if(200===this.status){!function(e,a,l){const s=document.createElement("a"),t=window.URL.createObjectURL(e);s.href=t,s.download=`${a}.${l}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)}(this.response,$.value.title,"pdf"),F.value.destroy()}z.value=!1},e.send()}return(e,a)=>{var l,s;return c(),d("div",C,[r("div",j,[p(f(y),{style:{width:"200px",height:"calc(100vh - 50px)",padding:"20px"}},{default:v((()=>{var e;return[(c(!0),d(w,null,g(null==(e=$.value)?void 0:e.images,((e,a)=>(c(),d("div",{key:a,class:"mb-2 flex justify-between items-center cursor-pointer",onClick:a=>D.value=e},[r("div",{style:{color:"#9E9E9E","font-size":"16px"},class:b(e.url===D.value.url?"font-black":"")},h(a<9?`0${a+1}`:a+1),3),r("img",{src:`${e.url}?imageView2/0/w/120/q/85&format=webp&quality=lossless&width=120&height=70`,class:"small-img",alt:e.title},null,8,_)],8,R)))),128))]})),_:1}),(null==(l=D.value)?void 0:l.url)?(c(),d("div",q,[r("img",{src:D.value.url,alt:D.value.title,class:"big-img"},null,8,E)])):m("",!0)]),L.value==(null==(s=$.value)?void 0:s.userId)?(c(),d("div",{key:0,class:"export-btn",onClick:H}," 导出 ")):m("",!0)])}}}),[["__scopeId","data-v-502ecfd6"]]);export{L as default};
