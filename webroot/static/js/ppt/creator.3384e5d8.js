import{e,w as a,x as t,al as l,k as i,p as s,r as n,g as r,aP as o,q as p,C as u,D as c,B as d,a4 as v,z as f,A as g,y as m,aJ as h,F as k,E as y,$ as I,_ as x,l as w,ac as A,O as C,a2 as U,bJ as M,bK as T,bM as Q,N as K,a1 as b,an as G,bg as q,I as D}from"../main-4156cf5e.js";import{a as F,f as V,b as X,p as E}from"./ppt.22762407.js";import{C as P}from"../creator_catalogs/creator_catalogs.f7053f63.js";import{N as B}from"../text/text.b9dc4078.js";import{N as S}from"../p/p.70e9826d.js";const J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},z=[l('<path d="M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208s208-93.13 208-208S370.87 48 256 48z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M256 48c-58.07 0-112.67 93.13-112.67 208S197.93 464 256 464s112.67-93.13 112.67-208S314.07 48 256 48z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M117.33 117.33c38.24 27.15 86.38 43.34 138.67 43.34s100.43-16.19 138.67-43.34" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M394.67 394.67c-38.24-27.15-86.38-43.34-138.67-43.34s-100.43 16.19-138.67 43.34" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32" d="M256 48v416"></path><path fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32" d="M464 256H48"></path>',6)],Z=e({name:"GlobeOutline",render:function(e,l){return a(),t("svg",J,z)}}),j="/static/svg/isVIP-12e8ef4c.svg",N={style:{padding:"46px","box-sizing":"border-box"}},L={key:0,class:"vipIcon",src:j,alt:""},R={class:"keyword gap-3.5"},H=["onClick"],O=x(e({__name:"creator_subject",setup(e){const l=i(),x=s(),w=n([]);r((()=>w.value.find((e=>"pptOutline"===e.type))));const A=r((()=>w.value.find((e=>"pptCreate"===e.type)))),C=r((()=>l.userInfo.vipLeavelId));let U=n([]);o().then((e=>{U.value=e.data}));const M=n(),T=n(""),Q=n([]);function K(){if(!l.isLogin)return l.setLoginDialog(!0);if(A.value&&A.value.isVipUsed&&-1===A.value.userType.indexOf(C.value)){let e=A.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=U.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void x.error(I("digitalMan.vipUse1")+a+I("digitalMan.vipUse2"))}T.value?M.value.open(T.value):x.warning(I("ppt.inputPPTtheme"))}return p((()=>{!async function(){const{data:e}=await V({code:"PPTRec"});Q.value=e.recList}(),async function(){const{data:e}=await F();w.value=e,l.getUserInfo()}()})),(e,i)=>(a(),t("div",N,[u(m(h),{value:T.value,"onUpdate:value":i[0]||(i[0]=e=>T.value=e),placeholder:e.$t("ppt.inputPPTtheme")},{suffix:c((()=>[d("div",{class:"input-box-btn",onClick:K},[v(f(e.$t("ppt.intellGen"))+" ",1),A.value&&A.value.isVipUsed?(a(),t("img",L)):g("",!0)])])),_:1},8,["value","placeholder"]),d("div",R,[(a(!0),t(k,null,y(Q.value,(e=>(a(),t("div",{onClick:a=>function(e){if(!l.isLogin)return l.setLoginDialog(!0);if(A.value&&A.value.isVipUsed&&-1===A.value.userType.indexOf(C.value)){let e=A.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=U.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void x.error(I("digitalMan.vipUse1")+a+I("digitalMan.vipUse2"))}M.value.open(e)}(e.title)},f(e.title),9,H)))),256))]),u(P,{ref_key:"catalogsRef",ref:M},null,512)]))}}),[["__scopeId","data-v-68d850ac"]]),Y={class:"font-bold"},W={class:"upload"},_={key:1,class:"textarea-box"},$={key:0,class:"vipIcon",src:j,alt:""},ee={key:2,class:"mb-3 text-[#cccccc]"},ae={key:3,class:"url-box"},te={class:"upload-btn active"},le=x(e({__name:"creator_upload",setup(e){const l=i(),k=w(),y=A(),x=s(),q=n(),D=n(),V=n(!1),J=n(~~y.query.mode||1),z=n(""),j=n(""),N=n("/api/file/upload2Local"),L=n([]);r((()=>L.value.find((e=>"pptOutline"===e.type))));const R=r((()=>L.value.find((e=>"pptCreate"===e.type)))),H=r((()=>l.userInfo.vipLeavelId));let O=n([]);o().then((e=>{O.value=e.data}));const le={showFileList:!1,directoryDnd:!0,accept:".md, .doc, .docx, .pdf, .xmind, .html, .txt",customRequest:e=>{var a;if(V.value)return x.warning(I("ppt.PPTgening")),void(null==(a=D.value)||a.clear());!async function(e){if(R.value&&R.value.isVipUsed&&-1===R.value.userType.indexOf(H.value)){let e=R.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=O.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void x.error(I("digitalMan.vipUse1")+a+I("digitalMan.vipUse2"))}V.value=!0;const a=new FormData;a.append("file",e.file),await G.post(N.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{z.value=e.data.data,async function(){await X({fileUrl:z.value}).catch((()=>{V.value=!1})),V.value=!1,k.push("/ppt/my")}()})).catch((()=>{V.value=!1,x.error(I("ppt.uploadErro"))}))}(e.file)}};function ie(e){z.value="",J.value=e}async function se(){if(!l.isLogin)return l.setLoginDialog(!0);if(R.value&&R.value.isVipUsed&&-1===R.value.userType.indexOf(H.value)){let e=R.value.userType.split(","),a="";return e.forEach(((t,l)=>{a+=O.value.filter((e=>e.id==t))[0].dictName,l<e.length-1&&(a+=",")})),void x.error(I("digitalMan.vipUse1")+a+I("digitalMan.vipUse2"))}if(V.value)return x.error(I("ppt.gening"));V.value=!0;const e=await E({text:j.value}).catch((()=>{V.value=!1,x.error(e.message||I("ppt.uploadErro"))}));ne(),200===e.code?k.push("/ppt/my"):x.error(e.message)}async function ne(){const{data:e}=await F();L.value=e,l.getUserInfo()}return p((()=>{ne()})),(e,l)=>(a(),C(m(b),{show:V.value,style:{padding:"24px","box-sizing":"border-box"}},{description:c((()=>[d("span",Y,f(e.$t("ppt.Generating"))+"...",1)])),default:c((()=>[d("div",W,[d("div",{class:U([1===J.value?"active":"","upload-btn"]),onClick:l[0]||(l[0]=e=>ie(1))},f(e.$t("knowledge.uploadFile")),3),d("div",{class:U([2===J.value?"active":"","upload-btn"]),onClick:l[1]||(l[1]=e=>ie(2))},f(e.$t("ppt.freeInput")),3)]),1===J.value?(a(),C(m(M),T({key:0},le,{ref_key:"draggerUploadRef",ref:D}),{default:c((()=>[u(m(Q),null,{default:c((()=>[l[4]||(l[4]=d("div",{class:"flex justify-center",style:{"margin-bottom":"15px"}},[d("img",{src:"data:image/png;base64,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",alt:"",style:{width:"50px",height:"60px"}})],-1)),u(m(B),{style:{"font-size":"16px",color:"#1A1A1A"}},{default:c((()=>[v(f(e.$t("ppt.FileSupport"))+" MarkDown、Word、PDF、XMind、HTML、FreeMind、TXT "+f(e.$t("ppt.format")),1)])),_:1}),u(m(S),{depth:"3",style:{margin:"8px 0 0 0",color:"#767676","font-size":"12px"}},{default:c((()=>[v(f(e.$t("ppt.docXianzhi")),1)])),_:1})])),_:1,__:[4]})])),_:1},16)):g("",!0),2===J.value?(a(),t("div",_,[u(m(h),{value:j.value,"onUpdate:value":l[2]||(l[2]=e=>j.value=e),type:"textarea",maxlength:1e3,"show-count":"",class:"h-[300px]",placeholder:"请将您的 markdown 大纲粘贴在此处，参考格式如下:\n# PPT标题\n## 章节标题\n### 内容页标题\n-正文内容\n- 正文内容\n### 内容页标题\n-正文内容\n- 正文内容\n......\n"},{suffix:c((()=>[d("div",{class:"upload-btn active absolute bottom-2 right-2",onClick:se},[v(f(e.$t("gpt.lijiGen"))+" ",1),R.value&&R.value.isVipUsed?(a(),t("img",$)):g("",!0)])])),_:1},8,["value"])])):g("",!0),3===J.value?(a(),t("div",ee,f(e.$t("gpt.warnText")),1)):g("",!0),3===J.value?(a(),t("div",ae,[u(m(h),{value:z.value,"onUpdate:value":l[3]||(l[3]=e=>z.value=e),size:"large",round:""},{prefix:c((()=>[u(m(K),{component:m(Z),size:"32px"},null,8,["component"])])),_:1},8,["value"]),d("div",te,f(e.$t("gpt.lijiGen")),1)])):g("",!0),u(P,{ref_key:"catalogsRef",ref:q},null,512)])),_:1},8,["show"]))}}),[["__scopeId","data-v-9698fe07"]]),ie={class:"page-creator"},se={class:"page-creator-title"},ne={class:"page-creator-desc"},re={class:"page-creator-content",style:{height:"100%"}},oe={class:"input-box"},pe=x(e({__name:"creator",setup(e){q((e=>({"6fd87b7e":s.value,"6fd87b7c":o.value})));const l=A(),i=n(~~l.query.type||1),s=r((()=>1===i.value?2:1)),o=r((()=>2===i.value?2:1));return D.on("updatePPTtype",(e=>{i.value=e})),(e,l)=>(a(),t("div",ie,[d("div",se,f(e.$t("ppt.creatorTitle")),1),d("div",ne,f(e.$t("ppt.creatorFuTitle")),1),d("div",re,[d("div",{class:U(["page-creator-content-subject",1===i.value?"active":""]),onClick:l[0]||(l[0]=e=>i.value=1)},f(e.$t("ppt.enterPPTtheme")),3),d("div",{class:U(["page-creator-content-update",2===i.value?"active":""]),onClick:l[1]||(l[1]=e=>i.value=2)},f(e.$t("ppt.importWordTxt")),3),d("div",oe,[1===i.value?(a(),C(O,{key:0})):g("",!0),2===i.value?(a(),C(le,{key:1})):g("",!0)])])]))}}),[["__scopeId","data-v-7a878340"]]);export{pe as default};
