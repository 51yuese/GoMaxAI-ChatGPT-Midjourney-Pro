import{e,k as a,g as l,p as s,a9 as t,r as n,J as o,q as i,O as u,w as c,x as d,A as r,B as p,C as v,D as f,z as m,F as w,E as g,I as h,y,bA as b,_ as x}from"../main-23bab8dd.js";import{g as k}from"./ppt.e06b6928.js";const C={class:"home-page bor30"},j={class:"flex w-full h-[calc(100vh - 50px)]"},R=["onClick"],_=["src","alt"],q={key:0,class:"flex justify-center items-center w-[calc(100% - 200px)] flex-1"},E=["src","alt"],L=x(e({__name:"detail",setup(e){const x=a(),L=l((()=>x.userInfo.id)),U=s(),I=t().params.id,$=n({}),O=n(!1);o.on("ppt-download",(()=>{D()})),i((()=>{!async function(){const{data:e}=await k({id:I});$.value=e,z.value=e.images[0]}()})),u((()=>{o.off("ppt-download")}));const z=n({});const A=n(null);function D(){O.value&&U.warning("正在下载中，请稍后"),O.value=!0,A.value=U.loading("正在下载中，请稍后",{duration:0});const e=new XMLHttpRequest;e.open("get",$.value.pdfDownUrl,!0),e.setRequestHeader("Content-Type","application/pdf"),e.responseType="blob",e.onload=function(){if(200===this.status){!function(e,a,l){const s=document.createElement("a"),t=window.URL.createObjectURL(e);s.href=t,s.download=`${a}.${l}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)}(this.response,$.value.title,"pdf"),A.value.destroy()}O.value=!1},e.send()}return(e,a)=>{var l,s;return c(),d("div",C,[r("div",j,[p(f(b),{style:{width:"200px",height:"calc(100vh - 50px)",padding:"20px"}},{default:v((()=>{var e;return[(c(!0),d(w,null,g(null==(e=$.value)?void 0:e.images,((e,a)=>(c(),d("div",{key:a,class:"mb-2 flex justify-between items-center cursor-pointer",onClick:a=>z.value=e},[r("div",{style:{color:"#9E9E9E","font-size":"16px"},class:h(e.url===z.value.url?"font-black":"")},y(a<9?`0${a+1}`:a+1),3),r("img",{src:`${e.url}?imageView2/0/w/120/q/85&format=webp&quality=lossless&width=120&height=70`,class:"small-img",alt:e.title},null,8,_)],8,R)))),128))]})),_:1}),(null==(l=z.value)?void 0:l.url)?(c(),d("div",q,[r("img",{src:z.value.url,alt:z.value.title,class:"big-img"},null,8,E)])):m("",!0)]),L.value==(null==(s=$.value)?void 0:s.userId)?(c(),d("div",{key:0,class:"export-btn",onClick:D}," 导出 ")):m("",!0)])}}}),[["__scopeId","data-v-502ecfd6"]]);export{L as default};
