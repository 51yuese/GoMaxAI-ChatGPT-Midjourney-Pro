import{e,p as t,k as l,g as a,l as i,Z as s,r as n,L as o,w as r,x as c,A as u,B as d,F as v,E as p,z as g,P as m,$ as x,C as y,D as A,y as f,O as k,a1 as h,a3 as I,a0 as b,a2 as C,a4 as E,_ as B}from"../main-bf8e7d49.js";import{_ as w,a as F,b as T,c as S,d as U}from"../light_music_end/light_music_end.c20cf1cf.js";import{_ as z,a as D,b as R,c as H,d as Q,e as L}from"../end/end.04367133.js";import{q as j,c as J,d as Y,b as _,e as Z}from"./music.8a9fd455.js";import{C as q}from"../index/index.ac6b70c4.js";import"../police/police.deef576c.js";const G={class:"bg-[#ffffff] dark:bg-[#24252B] musicBody"},M={class:"mainBox",style:{height:"100%"}},N={class:"bg-[#F8F9F9] dark:bg-[#24252B]",style:{height:"100%"}},O={class:"contentBox bg-gradient-to-t to-[#333333] from-[#2c2b2b] dark:from-transparent"},V={style:{display:"flex",height:"100%"}},W={style:{display:"flex","flex-direction":"column",overflow:"hidden",height:"100%",width:"100%"}},X={class:"contextBox"},K={class:"contextBox-rec"},P=["onClick"],$={class:"contextBox-rec-item-title"},ee={class:"contextBox-input"},te={class:"itemTop"},le={class:"topImg"},ae=["src"],ie={class:"topTitle"},se={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},ne={style:{display:"flex","align-items":"center",margin:"10px 0"}},oe={key:0,src:U,style:{"margin-right":"4px"}},re={key:1,src:L,style:{"margin-right":"4px"}},ce={class:"intro text-[#8B8C8C] dark:text-[#727586]"},ue={class:"itemTop"},de={class:"topImg"},ve=["src"],pe={class:"topTitle"},ge={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},me={style:{display:"flex","align-items":"center",margin:"10px 0"}},xe={key:0,src:U,style:{"margin-right":"4px"}},ye={key:1,src:L,style:{"margin-right":"4px"}},Ae={class:"intro text-[#8B8C8C] dark:text-[#727586]"},fe={key:0,class:"videoBox"},ke={style:{position:"relative"}},he=["src"],Ie={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[17px]",style:{"margin-top":"12px","font-weight":"550","text-align":"left",padding:"0 10px"}},be={style:{display:"flex","align-items":"center","justify-content":"left",margin:"12px 0",padding:"0 10px"}},Ce={key:0,src:U,style:{"margin-right":"4px"}},Ee={key:1,src:L,style:{"margin-right":"4px"}},Be={class:"introList"},we=["src"],Fe={style:{position:"fixed",bottom:"0",width:"100%"}},Te={key:0,class:"dark:bg-[#303137] bg-[#303137] text-[#8B8C8C] dark:text-[#6C6E79] border-t border-[#E8E8E8] dark:border-[#292A2E]",style:{padding:"0px 375px 0px 100px","box-sizing":"border-box"}},Se={class:"control dark:bg-[#303137] bg-[#FFF] text-[#8B8C8C] dark:text-[#6C6E79] border-[#E8E8E8] dark:border-[#292A2E]"},Ue={style:{display:"flex","align-items":"center"}},ze={style:{display:"flex","align-items":"center",gap:"5px","margin-right":"20px"}},De=["src"],Re={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[14px]"},He={style:{color:"#727586","margin-top":"10px",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden","text-overflow":"ellipsis",width:"180px"}},Qe={style:{display:"flex","align-items":"center",flex:"1","padding-right":"20px","margin-left":"20px"}},Le={style:{width:"100%"}},je={style:{"margin-top":"4px",display:"flex","align-items":"center",gap:"10px"}},Je=["src"],Ye=B(e({__name:"musicSquare",setup(e){const B=t(),U=l(),L=a((()=>U.isLogin));let Ye=null;const _e=i(),Ze=s(),qe=a((()=>"dark"===Ze.theme)),Ge=n();n(0);const Me=n(1),Ne=n();n("");const Oe=n(""),Ve=n([]),We=n("00:00"),Xe=n("00:00"),Ke=n(""),Pe=n(""),$e=n(0),et=n(null),tt=n([]);function lt(){Ye||(Ye=B.loading("数据加载中",{duration:0}));let e={size:50,modelType:"music",page:Me.value,order:Oe.value};_(e).then((e=>{Ne.value=e.data.count,tt.value=e.data.records,pt()})).catch((e=>{pt()}))}lt(),j({modelType:"music"}).then((e=>{0!=e.data.length?localStorage.setItem("musicGroupId",e.data[0].id):0==e.data.length&&J().then((e=>{localStorage.setItem("musicGroupId",e.data.id)}))})),Y({dictType:"music-lyrics"}).then((e=>{Ve.value=e.data.rows}));const at=n();_({size:6,modelType:"music",page:1,order:"agreeNum"}).then((e=>{at.value=e.data.records}));const it=n(""),st=n(!1),nt=n(""),ot=n(0);function rt(){const e=et.value;st.value?(st.value=!1,e.pause()):(st.value=!0,e.play())}function ct(){ot.value-1<0?(ot.value=tt.value.length-1,nt.value=tt.value[ot.value]):(ot.value=ot.value-1,nt.value=tt.value[ot.value]);const e=setTimeout((()=>{st.value=!1,rt(),clearTimeout(e)}))}function ut(){ot.value+1>tt.value.length-1?(ot.value=0,nt.value=tt.value[ot.value]):(ot.value=ot.value+1,nt.value=tt.value[ot.value]);const e=setTimeout((()=>{st.value=!1,rt(),clearTimeout(e)}))}function dt(e,t){if(!L.value)return void U.setLoginDialog(!0);if(nt.value&&nt.value.id==e.id)return void rt();Z({id:e.id,type:"music"}),lt(),e.introList=e.intro.split("\n"),nt.value=e,ot.value=t;const l=setTimeout((()=>{st.value=!1,rt(),clearTimeout(l)}))}o((()=>nt.value),((e="")=>{}));const vt=n(!1);function pt(){Ye&&(Ye.destroy(),Ye=null)}function gt(){nt.value&&(nt.value.operation=!1),vt.value=!1,tt.value.forEach((e=>{e.operation=!1}))}const mt=n(null);function xt(){const e=mt.value;if(e.scrollTop+e.clientHeight+1>=e.scrollHeight){if(30*Me.value>=Ne.value)return;Me.value++,lt()}}function yt(){Ke.value=et.value.duration,Pe.value=et.value.currentTime,Xe.value=ft(parseInt(et.value.currentTime)),We.value=ft(parseInt(et.value.duration))}function At(e){Xe.value=ft(parseInt(e.target.currentTime)),Pe.value=e.target.currentTime,function(){let e=Pe.value/Ke.value*100;$e.value=e;const t=et.value;$e.value>=100&&(st.value=!1,t.pause(),Pe.value=0,$e.value=0,Xe.value="00:00")}()}function ft(e){let t=parseInt(e/60),l=parseInt(e%60);return t=t>=10?t:"0"+t,l=l>=10?l:"0"+l,t+":"+l}const kt=n(!1);function ht(){Ge.value&&localStorage.setItem("music_rec_prompt",Ge.value),_e.push({path:"/music/creativeCenter"})}function It(){et.value.pause()}function bt(){et.value.currentTime=Pe.value,et.value.play()}return(e,t)=>(r(),c("div",G,[vt.value?(r(),c("div",{key:0,class:"mask",onClick:gt})):u("",!0),d("div",M,[d("div",N,[d("div",O,[d("div",V,[d("div",W,[d("div",X,[t[8]||(t[8]=d("div",{class:"contextBox-header"},"创建一首关于任何事物的歌词",-1)),d("div",K,[(r(!0),c(v,null,p(Ve.value.slice(0,3),(e=>(r(),c("div",{class:"contextBox-rec-item bg-gradient-to-t to-[#2c2d32] from-[#3F3C31] text-[14px] p-[20px]",onClick:t=>Ge.value=e.dictValue},[d("div",$,g(e.dictValue),1),t[4]||(t[4]=d("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAErSURBVFiF7dbBbYMwFMbxv2lzhw0YoYzABtmg7QRppPaQCaIIJEZIN8gIjOCMwAbmHir3YGhaCSNsWqUHfxcE8nv84CEAQkL+YcSSYiWLCkQMuk2yt61vn2gJAvQa9JPZ+mch4ncSEEMCYkhADJlEKHlYK1nFS06gZBUreZh8j1gRShYvEJ2gq5Xcp36AfQpdDdHJ9HNAmKsXm373AVbOELN+VZt6ALGx3dVRRJJtW7jkIBpzRKcukCtA9+tFA5fc9J2JMJBd4wOxA3aNrWbywXSF+ABg5qfczLL7Pt8ed1eDSEE38JH/BHCGe+sInBF2iI6BGGhBtD4AJ8Q4ZDROAGfEDIgzwAtxxZRH81f11eo9yV6ffft5R8nyqGShDeiGUbJ8vCkgJOSv8gnIw5o7HWqnWwAAAABJRU5ErkJggg=="},null,-1))],8,P)))),256))]),d("div",ee,[m(d("input",{class:"inp bg-[#000000]","onUpdate:modelValue":t[0]||(t[0]=e=>Ge.value=e),type:"text",placeholder:"输入创作歌词提示词！"},null,512),[[x,Ge.value]]),y(f(b),{class:"music_btn",show:kt.value,stroke:"#000"},{default:A((()=>[d("div",{class:"flex items-center",onClick:ht},t[5]||(t[5]=[d("span",{style:{"margin-top":"3px"}},"创作",-1),d("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEOSURBVDiNrZLhTcQwDIWfmwwQJiBsYLXqHjACIzABbMAINwIwAYzgDS7doAPEMj/InUqaU3uI9yfKk/P5JQ6hUt/3L0T0XPtb6mqDiG6vhZhZWoH+qhYoXgshov9L5GvDzCIRQVXvNg97H83sE0BagQosiUjaAo3jGMwMQHtqcQuwaBjKOjXfiIg20xTA+av8AjHzKc28N1VpfLw0tb2gsErEzMF7H5vlDTFzMLObkmjyzBydc28A+DQBM5suAYZhuAfwip+Pe07unXMHALw3BYDD4koBAHLOqWtBiOjYAnnveQFZau4AfNWmqn60QDlnAZAqW0Rk7lT1qcBmAALgUUSaUxORWVUfFvXvZY9vsExoA77sdzkAAAAASUVORK5CYII="},null,-1)]))])),_:1},8,["show"])]),t[9]||(t[9]=d("div",{class:"contextBox-hot-title"},"热门推荐",-1)),at.value&&at.value.length>2?(r(),c("div",{key:0,class:"content hot",ref_key:"container",ref:mt},[(r(!0),c(v,null,p(at.value,((e,l)=>(r(),c("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:e.chatId},[d("div",te,[d("div",le,[d("img",{class:"bgImg",src:e.cover,alt:"加载失败"},null,8,ae),nt.value&&nt.value.id!=e.id||!st.value?(r(),k(f(C),{key:0,onClick:t=>dt(e,l),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"])):(r(),k(f(C),{key:1,onClick:rt,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"}))]),d("div",ie,[d("div",se,g(" "==e.title||null==e.title?"匿名":e.title),1),d("div",ne,[qe.value?(r(),c("img",oe)):(r(),c("img",re)),t[6]||(t[6]=d("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),d("div",ce,[d("span",null,g(e.intro),1)])])])])))),128))],512)):u("",!0),t[10]||(t[10]=d("div",{class:"contextBox-hot-title"},"最新歌曲",-1)),tt.value&&tt.value.length>2?(r(),c("div",{key:1,class:"content",ref_key:"container",ref:mt,onScroll:xt},[(r(!0),c(v,null,p(tt.value,((e,l)=>(r(),c("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:e.chatId},[d("div",ue,[d("div",de,[d("img",{class:"bgImg",src:e.cover,alt:"加载失败"},null,8,ve),nt.value.id==e.id&&st.value?(r(),k(f(C),{key:1,onClick:rt,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"})):(r(),k(f(C),{key:0,onClick:t=>dt(e,l),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"]))]),d("div",pe,[d("div",ge,g(" "==e.title||null==e.title?"匿名":e.title),1),d("div",me,[qe.value?(r(),c("img",xe)):(r(),c("img",ye)),t[7]||(t[7]=d("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),d("div",Ae,[d("span",null,g(e.intro),1)])])])])))),128))],544)):u("",!0)]),y(q,{class:"end"})]),nt.value?(r(),c("div",fe,[d("div",{class:h(["bg-[#F0F0F0] dark:bg-[#222325] musicInfoDialog",{hasMusic:nt.value}])},[d("div",ke,[d("img",{src:z,style:{background:"#D8D8D8",position:"absolute",right:"10px",top:"10px",cursor:"pointer","border-radius":"5px"},onClick:t[1]||(t[1]=e=>nt.value="")}),d("img",{src:nt.value.cover,style:{width:"100%"}},null,8,he)]),d("div",Ie,g(" "==nt.value.title||null==nt.value.title?"匿名":nt.value.title),1),d("div",be,[qe.value?(r(),c("img",Ce)):(r(),c("img",Ee)),t[11]||(t[11]=d("span",{class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),d("div",Be,[(r(!0),c(v,null,p(nt.value.introList,(e=>(r(),c("div",{key:e,style:{"margin-bottom":"10px"}},g(e),1)))),128))])],2),d("audio",{class:"video",type:"audio/mp3",id:"video",src:it.value,onTimeupdate:t[2]||(t[2]=(...t)=>e.audioTimeUpdate&&e.audioTimeUpdate(...t))},null,40,we)])):u("",!0)])]),d("div",Fe,[nt.value?(r(),c("div",Te,[d("div",Se,[d("div",Ue,[d("div",ze,[d("img",{src:nt.value.cover,style:{"border-radius":"5px",width:"60px",height:"60px"}},null,8,De),d("div",Re,[d("div",null,g(" "==nt.value.title||null==nt.value.title?"匿名":nt.value.title),1),d("div",He,g(nt.value.intro),1)])]),d("div",null,[qe.value?(r(),c("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:D,alt:"",onClick:ct})):(r(),c("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:w,alt:"",onClick:ct}))]),d("div",null,[st.value&&qe.value?(r(),c("img",{key:0,class:"controlItem",src:R,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt})):u("",!0),st.value&&0==qe.value?(r(),c("img",{key:1,class:"controlItem",src:F,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt})):u("",!0)]),d("div",null,[!st.value&&qe.value?(r(),c("img",{key:0,class:"controlItem",src:H,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt})):u("",!0),st.value||0!=qe.value?u("",!0):(r(),c("img",{key:1,class:"controlItem",src:T,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt}))]),d("div",null,[qe.value?(r(),c("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:Q,alt:"",onClick:ut})):(r(),c("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:S,alt:"",onClick:ut}))])]),d("div",Qe,[d("div",Le,[d("div",je,[d("audio",{id:"audio",src:nt.value.mp3,onCanplay:yt,ref_key:"audioRef",ref:et,onTimeupdate:At},null,40,Je),I(" "+g(Xe.value)+" ",1),y(f(E),{value:Pe.value,"onUpdate:value":t[3]||(t[3]=e=>Pe.value=e),"on-dragstart":It,"on-dragend":bt,tooltip:!1,max:Ke.value,min:0},null,8,["value","max"]),I(" "+g(We.value),1)])])])])])):u("",!0)])])])]))}}),[["__scopeId","data-v-f86aa1ed"]]);export{Ye as default};
