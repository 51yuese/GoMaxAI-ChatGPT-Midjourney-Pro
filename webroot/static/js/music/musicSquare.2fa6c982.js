import{e,p as t,k as l,g as a,l as i,$ as s,r as o,M as n,w as r,x as c,z as u,A as v,F as d,E as p,y as g,Q as m,a0 as x,B as y,C as A,D as f,P as k,I as h,a3 as I,a1 as C,a2 as b,a4 as E,_ as B}from"../main-23bab8dd.js";import{_ as w,a as F,b as T,c as S,d as U,e as z}from"../light_music_author/light_music_author.620a5e30.js";import{_ as D,a as Q,b as R,c as H,d as L}from"../end/end.da3716db.js";import{q as j,c as J,d as Y,b as _,e as q}from"./music.67ae0f67.js";import{C as Z}from"../index/index.e75d5266.js";import"../police/police.deef576c.js";const M={class:"bg-[#ffffff] dark:bg-[#24252B] musicBody"},G={class:"mainBox"},N={class:"bg-[#F8F9F9] dark:bg-[#24252B]"},V={class:"contentBox bg-gradient-to-t to-[#333333] from-[#2c2b2b] dark:from-transparent"},O={style:{display:"flex"}},W={style:{display:"flex","flex-direction":"column",overflow:"hidden",height:"100vh",width:"100%"}},X={class:"contextBox"},K={class:"contextBox-rec"},P=["onClick"],$={class:"contextBox-rec-item-title"},ee={class:"contextBox-input"},te={class:"itemTop"},le={class:"topImg"},ae=["src"],ie={class:"topTitle"},se={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},oe={style:{display:"flex","align-items":"center",margin:"10px 0"}},ne={key:0,src:U,style:{"margin-right":"4px"}},re={key:1,src:z,style:{"margin-right":"4px"}},ce={class:"intro text-[#8B8C8C] dark:text-[#727586]"},ue={class:"itemTop"},ve={class:"topImg"},de=["src"],pe={class:"topTitle"},ge={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},me={style:{display:"flex","align-items":"center",margin:"10px 0"}},xe={key:0,src:U,style:{"margin-right":"4px"}},ye={key:1,src:z,style:{"margin-right":"4px"}},Ae={class:"intro text-[#8B8C8C] dark:text-[#727586]"},fe={key:0,class:"videoBox"},ke={style:{position:"relative"}},he=["src"],Ie={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[17px]",style:{"margin-top":"12px","font-weight":"550","text-align":"left",padding:"0 10px"}},Ce={style:{display:"flex","align-items":"center","justify-content":"left",margin:"12px 0",padding:"0 10px"}},be={key:0,src:U,style:{"margin-right":"4px"}},Ee={key:1,src:z,style:{"margin-right":"4px"}},Be={class:"introList"},we=["src"],Fe={style:{position:"fixed",bottom:"0",width:"100%"}},Te={key:0,class:"dark:bg-[#303137] bg-[#303137] text-[#8B8C8C] dark:text-[#6C6E79] border-t border-[#E8E8E8] dark:border-[#292A2E]",style:{padding:"0px 375px 0px 100px","box-sizing":"border-box"}},Se={class:"control dark:bg-[#303137] bg-[#FFF] text-[#8B8C8C] dark:text-[#6C6E79] border-[#E8E8E8] dark:border-[#292A2E]"},Ue={style:{display:"flex","align-items":"center"}},ze={style:{display:"flex","align-items":"center",gap:"5px","margin-right":"20px"}},De=["src"],Qe={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[14px]"},Re={style:{color:"#727586","margin-top":"10px",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden","text-overflow":"ellipsis",width:"180px"}},He={style:{display:"flex","align-items":"center",flex:"1","padding-right":"20px","margin-left":"20px"}},Le={style:{width:"100%"}},je={style:{"margin-top":"4px",display:"flex","align-items":"center",gap:"10px"}},Je=["src"],Ye=B(e({__name:"musicSquare",setup(e){const B=t(),U=l(),z=a((()=>U.isLogin));let Ye=null;const _e=i(),qe=s(),Ze=a((()=>"dark"===qe.theme)),Me=o();o(0);const Ge=o(1),Ne=o();o("");const Ve=o(""),Oe=o([]),We=o("00:00"),Xe=o("00:00"),Ke=o(""),Pe=o(""),$e=o(0),et=o(null),tt=o([]);function lt(){Ye||(Ye=B.loading("数据加载中",{duration:0}));let e={size:50,modelType:"music",page:Ge.value,order:Ve.value};_(e).then((e=>{Ne.value=e.data.count,tt.value=e.data.records,pt()})).catch((e=>{pt()}))}lt(),j({modelType:"music"}).then((e=>{0!=e.data.length?localStorage.setItem("musicGroupId",e.data[0].id):0==e.data.length&&J().then((e=>{localStorage.setItem("musicGroupId",e.data.id)}))})),Y({dictType:"music-lyrics"}).then((e=>{Oe.value=e.data.rows}));const at=o();_({size:6,modelType:"music",page:1,order:"agreeNum"}).then((e=>{at.value=e.data.records}));const it=o(""),st=o(!1),ot=o(""),nt=o(0);function rt(){const e=et.value;st.value?(st.value=!1,e.pause()):(st.value=!0,e.play())}function ct(){nt.value-1<0?(nt.value=tt.value.length-1,ot.value=tt.value[nt.value]):(nt.value=nt.value-1,ot.value=tt.value[nt.value]);const e=setTimeout((()=>{st.value=!1,rt(),clearTimeout(e)}))}function ut(){nt.value+1>tt.value.length-1?(nt.value=0,ot.value=tt.value[nt.value]):(nt.value=nt.value+1,ot.value=tt.value[nt.value]);const e=setTimeout((()=>{st.value=!1,rt(),clearTimeout(e)}))}function vt(e,t){if(!z.value)return void U.setLoginDialog(!0);if(ot.value&&ot.value.id==e.id)return void rt();q({id:e.id,type:"music"}),lt(),e.introList=e.intro.split("\n"),ot.value=e,nt.value=t;const l=setTimeout((()=>{st.value=!1,rt(),clearTimeout(l)}))}n((()=>ot.value),((e="")=>{}));const dt=o(!1);function pt(){Ye&&(Ye.destroy(),Ye=null)}function gt(){ot.value&&(ot.value.operation=!1),dt.value=!1,tt.value.forEach((e=>{e.operation=!1}))}const mt=o(null);function xt(){const e=mt.value;if(e.scrollTop+e.clientHeight+1>=e.scrollHeight){if(30*Ge.value>=Ne.value)return;Ge.value++,lt()}}function yt(){Ke.value=et.value.duration,Pe.value=et.value.currentTime,Xe.value=ft(parseInt(et.value.currentTime)),We.value=ft(parseInt(et.value.duration))}function At(e){Xe.value=ft(parseInt(e.target.currentTime)),Pe.value=e.target.currentTime,function(){let e=Pe.value/Ke.value*100;$e.value=e;const t=et.value;$e.value>=100&&(st.value=!1,t.pause(),Pe.value=0,$e.value=0,Xe.value="00:00")}()}function ft(e){let t=parseInt(e/60),l=parseInt(e%60);return t=t>=10?t:"0"+t,l=l>=10?l:"0"+l,t+":"+l}const kt=o(!1);function ht(){Me.value&&localStorage.setItem("music_rec_prompt",Me.value),_e.push({path:"/music/creativeCenter"})}function It(){et.value.pause()}function Ct(){et.value.currentTime=Pe.value,et.value.play()}return(e,t)=>(r(),c("div",M,[dt.value?(r(),c("div",{key:0,class:"mask",onClick:gt})):u("",!0),v("div",G,[v("div",N,[v("div",V,[v("div",O,[v("div",W,[v("div",X,[t[8]||(t[8]=v("div",{class:"contextBox-header"},"创建一首关于任何事物的歌词",-1)),v("div",K,[(r(!0),c(d,null,p(Oe.value.slice(0,3),(e=>(r(),c("div",{class:"contextBox-rec-item bg-gradient-to-t to-[#2c2d32] from-[#3F3C31] text-[14px] p-[20px]",onClick:t=>Me.value=e.dictValue},[v("div",$,g(e.dictValue),1),t[4]||(t[4]=v("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAErSURBVFiF7dbBbYMwFMbxv2lzhw0YoYzABtmg7QRppPaQCaIIJEZIN8gIjOCMwAbmHir3YGhaCSNsWqUHfxcE8nv84CEAQkL+YcSSYiWLCkQMuk2yt61vn2gJAvQa9JPZ+mch4ncSEEMCYkhADJlEKHlYK1nFS06gZBUreZh8j1gRShYvEJ2gq5Xcp36AfQpdDdHJ9HNAmKsXm373AVbOELN+VZt6ALGx3dVRRJJtW7jkIBpzRKcukCtA9+tFA5fc9J2JMJBd4wOxA3aNrWbywXSF+ABg5qfczLL7Pt8ed1eDSEE38JH/BHCGe+sInBF2iI6BGGhBtD4AJ8Q4ZDROAGfEDIgzwAtxxZRH81f11eo9yV6ffft5R8nyqGShDeiGUbJ8vCkgJOSv8gnIw5o7HWqnWwAAAABJRU5ErkJggg=="},null,-1))],8,P)))),256))]),v("div",ee,[m(v("input",{class:"inp bg-[#000000]","onUpdate:modelValue":t[0]||(t[0]=e=>Me.value=e),type:"text",placeholder:"输入创作歌词提示词！"},null,512),[[x,Me.value]]),y(f(C),{class:"music_btn",show:kt.value,stroke:"#000"},{default:A((()=>[v("div",{class:"flex items-center",onClick:ht},t[5]||(t[5]=[v("span",{style:{"margin-top":"3px"}},"创作",-1),v("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEOSURBVDiNrZLhTcQwDIWfmwwQJiBsYLXqHjACIzABbMAINwIwAYzgDS7doAPEMj/InUqaU3uI9yfKk/P5JQ6hUt/3L0T0XPtb6mqDiG6vhZhZWoH+qhYoXgshov9L5GvDzCIRQVXvNg97H83sE0BagQosiUjaAo3jGMwMQHtqcQuwaBjKOjXfiIg20xTA+av8AjHzKc28N1VpfLw0tb2gsErEzMF7H5vlDTFzMLObkmjyzBydc28A+DQBM5suAYZhuAfwip+Pe07unXMHALw3BYDD4koBAHLOqWtBiOjYAnnveQFZau4AfNWmqn60QDlnAZAqW0Rk7lT1qcBmAALgUUSaUxORWVUfFvXvZY9vsExoA77sdzkAAAAASUVORK5CYII="},null,-1)]))])),_:1},8,["show"])]),t[9]||(t[9]=v("div",{class:"contextBox-hot-title"},"热门推荐",-1)),at.value&&at.value.length>2?(r(),c("div",{key:0,class:"content hot",ref_key:"container",ref:mt},[(r(!0),c(d,null,p(at.value,((e,l)=>(r(),c("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:e.chatId},[v("div",te,[v("div",le,[v("img",{class:"bgImg",src:e.cover,alt:"加载失败"},null,8,ae),ot.value&&ot.value.id!=e.id||!st.value?(r(),k(f(b),{key:0,onClick:t=>vt(e,l),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"])):(r(),k(f(b),{key:1,onClick:rt,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"}))]),v("div",ie,[v("div",se,g(" "==e.title||null==e.title?"匿名":e.title),1),v("div",oe,[Ze.value?(r(),c("img",ne)):(r(),c("img",re)),t[6]||(t[6]=v("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),v("div",ce,[v("span",null,g(e.intro),1)])])])])))),128))],512)):u("",!0),t[10]||(t[10]=v("div",{class:"contextBox-hot-title"},"最新歌曲",-1)),tt.value&&tt.value.length>2?(r(),c("div",{key:1,class:"content",ref_key:"container",ref:mt,onScroll:xt},[(r(!0),c(d,null,p(tt.value,((e,l)=>(r(),c("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:e.chatId},[v("div",ue,[v("div",ve,[v("img",{class:"bgImg",src:e.cover,alt:"加载失败"},null,8,de),ot.value.id==e.id&&st.value?(r(),k(f(b),{key:1,onClick:rt,style:{"font-size":"30px"},icon:"gridicons:pause",class:"playImg"})):(r(),k(f(b),{key:0,onClick:t=>vt(e,l),style:{"font-size":"30px"},icon:"gridicons:play",class:"playImg"},null,8,["onClick"]))]),v("div",pe,[v("div",ge,g(" "==e.title||null==e.title?"匿名":e.title),1),v("div",me,[Ze.value?(r(),c("img",xe)):(r(),c("img",ye)),t[7]||(t[7]=v("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),v("div",Ae,[v("span",null,g(e.intro),1)])])])])))),128))],544)):u("",!0)]),y(Z,{class:"end"})]),ot.value?(r(),c("div",fe,[v("div",{class:h(["bg-[#F0F0F0] dark:bg-[#222325] musicInfoDialog",{hasMusic:ot.value}])},[v("div",ke,[v("img",{src:D,style:{background:"#D8D8D8",position:"absolute",right:"10px",top:"10px",cursor:"pointer","border-radius":"5px"},onClick:t[1]||(t[1]=e=>ot.value="")}),v("img",{src:ot.value.cover,style:{width:"100%"}},null,8,he)]),v("div",Ie,g(" "==ot.value.title||null==ot.value.title?"匿名":ot.value.title),1),v("div",Ce,[Ze.value?(r(),c("img",be)):(r(),c("img",Ee)),t[11]||(t[11]=v("span",{class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),v("div",Be,[(r(!0),c(d,null,p(ot.value.introList,(e=>(r(),c("div",{key:e,style:{"margin-bottom":"10px"}},g(e),1)))),128))])],2),v("audio",{class:"video",type:"audio/mp3",id:"video",src:it.value,onTimeupdate:t[2]||(t[2]=(...t)=>e.audioTimeUpdate&&e.audioTimeUpdate(...t))},null,40,we)])):u("",!0)])]),v("div",Fe,[ot.value?(r(),c("div",Te,[v("div",Se,[v("div",Ue,[v("div",ze,[v("img",{src:ot.value.cover,style:{"border-radius":"5px",width:"60px",height:"60px"}},null,8,De),v("div",Qe,[v("div",null,g(" "==ot.value.title||null==ot.value.title?"匿名":ot.value.title),1),v("div",Re,g(ot.value.intro),1)])]),v("div",null,[Ze.value?(r(),c("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:Q,alt:"",onClick:ct})):(r(),c("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:w,alt:"",onClick:ct}))]),v("div",null,[st.value&&Ze.value?(r(),c("img",{key:0,class:"controlItem",src:R,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt})):u("",!0),st.value&&0==Ze.value?(r(),c("img",{key:1,class:"controlItem",src:F,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt})):u("",!0)]),v("div",null,[!st.value&&Ze.value?(r(),c("img",{key:0,class:"controlItem",src:H,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt})):u("",!0),st.value||0!=Ze.value?u("",!0):(r(),c("img",{key:1,class:"controlItem",src:T,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:rt}))]),v("div",null,[Ze.value?(r(),c("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:L,alt:"",onClick:ut})):(r(),c("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:S,alt:"",onClick:ut}))])]),v("div",He,[v("div",Le,[v("div",je,[v("audio",{id:"audio",src:ot.value.mp3,onCanplay:yt,ref_key:"audioRef",ref:et,onTimeupdate:At},null,40,Je),I(" "+g(Xe.value)+" ",1),y(f(E),{value:Pe.value,"onUpdate:value":t[3]||(t[3]=e=>Pe.value=e),"on-dragstart":It,"on-dragend":Ct,tooltip:!1,max:Ke.value,min:0},null,8,["value","max"]),I(" "+g(We.value),1)])])])])])):u("",!0)])])])]))}}),[["__scopeId","data-v-de954391"]]);export{Ye as default};
