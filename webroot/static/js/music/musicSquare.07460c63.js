import{e,p as t,k as a,g as l,l as i,Z as s,r as o,L as n,$ as c,w as r,x as u,A as v,B as d,z as m,F as p,E as g,P as x,a0 as A,C as y,D as f,y as k,a1 as h,O as b,N as I,a2 as E,a4 as C,a5 as B,_ as F}from"../main-a0b53047.js";import{_ as w,a as T,b as D,c as S,d as U}from"../light_music_end/light_music_end.c20cf1cf.js";import{P as z,a as R,_ as H,b as L,c as Q,d as _,e as j,f as J}from"../end/end.a6a93fc8.js";import{c as Y,b as Z,d as M}from"./music.aee9a7ff.js";import{C as N}from"../index/index.3f49779e.js";import"../police/police.deef576c.js";const q={class:"bg-[#ffffff] dark:bg-[#24252B] musicBody"},O={class:"mainBox",style:{height:"100%"}},V={class:"bg-[#F8F9F9] dark:bg-[#24252B]",style:{height:"100%"}},G={class:"contentBox bg-[#F8F9F9] dark:from-transparent"},W={style:{display:"flex",height:"100%"}},X={style:{display:"flex","flex-direction":"column",overflow:"hidden",height:"100%",width:"100%"}},$={class:"contextBox"},K={class:"contextBox-header"},P={class:"contextBox-rec"},ee=["onClick"],te={class:"contextBox-rec-item-title"},ae={class:"contextBox-input"},le=["placeholder"],ie={style:{"margin-top":"3px"}},se={class:"contextBox-hot-title"},oe={class:"itemTop"},ne={class:"topImg"},ce=["src","alt"],re={class:"topTitle"},ue={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},ve={style:{display:"flex","align-items":"center",margin:"10px 0"}},de={key:0,src:U,style:{"margin-right":"4px"}},me={key:1,src:J,style:{"margin-right":"4px"}},pe={class:"intro text-[#8B8C8C] dark:text-[#727586]"},ge={class:"contextBox-hot-title"},xe={class:"itemTop"},Ae={class:"topImg"},ye=["src","alt"],fe={class:"topTitle"},ke={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},he={style:{display:"flex","align-items":"center",margin:"10px 0"}},be={key:0,src:U,style:{"margin-right":"4px"}},Ie={key:1,src:J,style:{"margin-right":"4px"}},Ee={class:"intro text-[#8B8C8C] dark:text-[#727586]"},Ce={key:0,class:"videoBox"},Be={style:{position:"relative"}},Fe=["src"],we={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[17px]",style:{"margin-top":"12px","font-weight":"550","text-align":"left",padding:"0 10px"}},Te={style:{display:"flex","align-items":"center","justify-content":"left",margin:"12px 0",padding:"0 10px"}},De={key:0,src:U,style:{"margin-right":"4px"}},Se={key:1,src:J,style:{"margin-right":"4px"}},Ue={class:"introList"},ze=["src"],Re={style:{position:"fixed",bottom:"0",width:"100%"}},He={key:0,class:"dark:bg-[#303137] bg-[#F2F3F7] text-[#8B8C8C] dark:text-[#6C6E79] border-t border-[#E8E8E8] dark:border-[#292A2E]",style:{padding:"0px 375px 0px 100px","box-sizing":"border-box"}},Le={class:"control dark:bg-[#303137] bg-[#F2F3F7] text-[#8B8C8C] dark:text-[#6C6E79] border-[#E8E8E8] dark:border-[#292A2E]"},Qe={style:{display:"flex","align-items":"center"}},_e={style:{display:"flex","align-items":"center",gap:"5px","margin-right":"20px"}},je=["src"],Je={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[14px]"},Ye={style:{color:"#727586","margin-top":"10px",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden","text-overflow":"ellipsis",width:"180px"}},Ze={style:{display:"flex","align-items":"center",flex:"1","padding-right":"20px","margin-left":"20px"}},Me={style:{width:"100%"}},Ne={style:{"margin-top":"4px",display:"flex","align-items":"center",gap:"10px"}},qe=["src"],Oe=F(e({__name:"musicSquare",setup(e){const F=t(),U=a(),J=l((()=>U.isLogin));let Oe=null;const Ve=i(),Ge=s(),We=l((()=>"dark"===Ge.theme)),Xe=o();o(0);const $e=o(1),Ke=o();o("");const Pe=o(""),et=o([]),tt=o("00:00"),at=o("00:00"),lt=o(""),it=o(""),st=o(0),ot=o(null),nt=o([]);function ct(){Oe||(Oe=F.loading(c("homePage.dataLoading"),{duration:0}));let e={size:50,modelType:"music",page:$e.value,order:Pe.value};Z(e).then((e=>{Ke.value=e.data.count,nt.value=e.data.records,ft()})).catch((e=>{ft()}))}ct(),Y({dictType:"music-lyrics"}).then((e=>{et.value=e.data.rows}));const rt=o();Z({size:6,modelType:"music",page:1,order:"agreeNum"}).then((e=>{rt.value=e.data.records}));const ut=o(""),vt=o(!1),dt=o(""),mt=o(0);function pt(){const e=ot.value;vt.value?(vt.value=!1,e.pause()):(vt.value=!0,e.play())}function gt(){mt.value-1<0?(mt.value=nt.value.length-1,dt.value=nt.value[mt.value]):(mt.value=mt.value-1,dt.value=nt.value[mt.value]);const e=setTimeout((()=>{vt.value=!1,pt(),clearTimeout(e)}))}function xt(){mt.value+1>nt.value.length-1?(mt.value=0,dt.value=nt.value[mt.value]):(mt.value=mt.value+1,dt.value=nt.value[mt.value]);const e=setTimeout((()=>{vt.value=!1,pt(),clearTimeout(e)}))}function At(e,t){if(!J.value)return void U.setLoginDialog(!0);if(dt.value&&dt.value.id==e.id)return void pt();M({id:e.id,type:"music"}),ct(),e.introList=e.intro.split("\n"),dt.value=e,mt.value=t;const a=setTimeout((()=>{vt.value=!1,pt(),clearTimeout(a)}))}n((()=>dt.value),((e="")=>{}));const yt=o(!1);function ft(){Oe&&(Oe.destroy(),Oe=null)}function kt(){dt.value&&(dt.value.operation=!1),yt.value=!1,nt.value.forEach((e=>{e.operation=!1}))}const ht=o(null);function bt(){const e=ht.value;if(e.scrollTop+e.clientHeight+1>=e.scrollHeight){if(30*$e.value>=Ke.value)return;$e.value++,ct()}}function It(){lt.value=ot.value.duration,it.value=ot.value.currentTime,at.value=Ct(parseInt(ot.value.currentTime)),tt.value=Ct(parseInt(ot.value.duration))}function Et(e){at.value=Ct(parseInt(e.target.currentTime)),it.value=e.target.currentTime,function(){let e=it.value/lt.value*100;st.value=e;const t=ot.value;st.value>=100&&(vt.value=!1,t.pause(),it.value=0,st.value=0,at.value="00:00")}()}function Ct(e){let t=parseInt(e/60),a=parseInt(e%60);return t=t>=10?t:"0"+t,a=a>=10?a:"0"+a,t+":"+a}const Bt=o(!1);function Ft(){Xe.value&&localStorage.setItem("music_rec_prompt",Xe.value),Ve.push({path:"/music/creativeCenter"})}function wt(){ot.value.pause()}function Tt(){ot.value.currentTime=it.value,ot.value.play()}return(e,t)=>(r(),u("div",q,[yt.value?(r(),u("div",{key:0,class:"mask",onClick:kt})):v("",!0),d("div",O,[d("div",V,[d("div",G,[d("div",W,[d("div",X,[d("div",$,[d("div",K,m(e.$t("music2.creatAsong")),1),d("div",P,[(r(!0),u(p,null,g(et.value.slice(0,3),(e=>(r(),u("div",{class:"contextBox-rec-item text-[14px] p-[20px]",onClick:t=>Xe.value=e.dictValue},[d("div",te,m(e.dictValue),1),t[4]||(t[4]=d("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAErSURBVFiF7dbBbYMwFMbxv2lzhw0YoYzABtmg7QRppPaQCaIIJEZIN8gIjOCMwAbmHir3YGhaCSNsWqUHfxcE8nv84CEAQkL+YcSSYiWLCkQMuk2yt61vn2gJAvQa9JPZ+mch4ncSEEMCYkhADJlEKHlYK1nFS06gZBUreZh8j1gRShYvEJ2gq5Xcp36AfQpdDdHJ9HNAmKsXm373AVbOELN+VZt6ALGx3dVRRJJtW7jkIBpzRKcukCtA9+tFA5fc9J2JMJBd4wOxA3aNrWbywXSF+ABg5qfczLL7Pt8ed1eDSEE38JH/BHCGe+sInBF2iI6BGGhBtD4AJ8Q4ZDROAGfEDIgzwAtxxZRH81f11eo9yV6ffft5R8nyqGShDeiGUbJ8vCkgJOSv8gnIw5o7HWqnWwAAAABJRU5ErkJggg=="},null,-1))],8,ee)))),256))]),d("div",ae,[x(d("input",{class:"inp bg-[#fff] dark:bg-[#000000]","onUpdate:modelValue":t[0]||(t[0]=e=>Xe.value=e),type:"text",placeholder:e.$t("music.text1")},null,8,le),[[A,Xe.value]]),y(k(h),{class:"music_btn",show:Bt.value,stroke:"#000"},{default:f((()=>[d("div",{class:"flex items-center",onClick:Ft},[d("span",ie,m(e.$t("music.create")),1),t[5]||(t[5]=d("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEOSURBVDiNrZLhTcQwDIWfmwwQJiBsYLXqHjACIzABbMAINwIwAYzgDS7doAPEMj/InUqaU3uI9yfKk/P5JQ6hUt/3L0T0XPtb6mqDiG6vhZhZWoH+qhYoXgshov9L5GvDzCIRQVXvNg97H83sE0BagQosiUjaAo3jGMwMQHtqcQuwaBjKOjXfiIg20xTA+av8AjHzKc28N1VpfLw0tb2gsErEzMF7H5vlDTFzMLObkmjyzBydc28A+DQBM5suAYZhuAfwip+Pe07unXMHALw3BYDD4koBAHLOqWtBiOjYAnnveQFZau4AfNWmqn60QDlnAZAqW0Rk7lT1qcBmAALgUUSaUxORWVUfFvXvZY9vsExoA77sdzkAAAAASUVORK5CYII="},null,-1))])])),_:1},8,["show"])]),d("div",se,m(e.$t("common.hotRecomm")),1),rt.value&&rt.value.length>2?(r(),u("div",{key:0,class:"content hot",ref_key:"container",ref:ht},[(r(!0),u(p,null,g(rt.value,((a,l)=>(r(),u("div",{class:"contentItem",key:a.chatId},[d("div",oe,[d("div",ne,[d("img",{class:"bgImg",src:a.cover,alt:e.$t("common.loadFail")},null,8,ce),dt.value&&dt.value.id!=a.id||!vt.value?(r(),b(k(I),{key:0,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:e=>At(a,l)},{default:f((()=>[y(k(z))])),_:2},1032,["onClick"])):(r(),b(k(I),{key:1,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:pt},{default:f((()=>[y(k(R))])),_:1}))]),d("div",re,[d("div",ue,m(" "==a.title||null==a.title?e.$t("music.anonymous"):a.title),1),d("div",ve,[We.value?(r(),u("img",de)):(r(),u("img",me)),t[6]||(t[6]=d("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),d("div",pe,[d("span",null,m(a.intro),1)])])])])))),128))],512)):v("",!0),d("div",ge,m(e.$t("music.newMusic")),1),nt.value&&nt.value.length>2?(r(),u("div",{key:1,class:"content",ref_key:"container",ref:ht,onScroll:bt},[(r(!0),u(p,null,g(nt.value,((a,l)=>(r(),u("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:a.chatId},[d("div",xe,[d("div",Ae,[d("img",{class:"bgImg",src:a.cover,alt:e.$t("common.loadFail")},null,8,ye),dt.value.id==a.id&&vt.value?(r(),b(k(I),{key:1,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:pt},{default:f((()=>[y(k(R))])),_:1})):(r(),b(k(I),{key:0,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:e=>At(a,l)},{default:f((()=>[y(k(z))])),_:2},1032,["onClick"]))]),d("div",fe,[d("div",ke,m(" "==a.title||null==a.title?e.$t("music.anonymous"):a.title),1),d("div",he,[We.value?(r(),u("img",be)):(r(),u("img",Ie)),t[7]||(t[7]=d("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),d("div",Ee,[d("span",null,m(a.intro),1)])])])])))),128))],544)):v("",!0)]),y(N,{class:"end"})]),dt.value?(r(),u("div",Ce,[d("div",{class:E(["bg-[#F0F0F0] dark:bg-[#222325] musicInfoDialog",{hasMusic:dt.value}])},[d("div",Be,[d("img",{src:H,style:{background:"#D8D8D8",position:"absolute",right:"10px",top:"10px",cursor:"pointer","border-radius":"5px"},onClick:t[1]||(t[1]=e=>dt.value="")}),d("img",{src:dt.value.cover,style:{width:"100%"}},null,8,Fe)]),d("div",we,m(" "==dt.value.title||null==dt.value.title?e.$t("music.anonymous"):dt.value.title),1),d("div",Te,[We.value?(r(),u("img",De)):(r(),u("img",Se)),t[8]||(t[8]=d("span",{class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),d("div",Ue,[(r(!0),u(p,null,g(dt.value.introList,(e=>(r(),u("div",{key:e,style:{"margin-bottom":"10px"}},m(e),1)))),128))])],2),d("audio",{class:"video",type:"audio/mp3",id:"video",src:ut.value,onTimeupdate:t[2]||(t[2]=(...t)=>e.audioTimeUpdate&&e.audioTimeUpdate(...t))},null,40,ze)])):v("",!0)])]),d("div",Re,[dt.value?(r(),u("div",He,[d("div",Le,[d("div",Qe,[d("div",_e,[d("img",{src:dt.value.cover,style:{"border-radius":"5px",width:"60px",height:"60px"}},null,8,je),d("div",Je,[d("div",null,m(" "==dt.value.title||null==dt.value.title?e.$t("music.anonymous"):dt.value.title),1),d("div",Ye,m(dt.value.intro),1)])]),d("div",null,[We.value?(r(),u("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:L,alt:"",onClick:gt})):(r(),u("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:w,alt:"",onClick:gt}))]),d("div",null,[vt.value&&We.value?(r(),u("img",{key:0,class:"controlItem",src:Q,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:pt})):v("",!0),vt.value&&0==We.value?(r(),u("img",{key:1,class:"controlItem",src:T,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:pt})):v("",!0)]),d("div",null,[!vt.value&&We.value?(r(),u("img",{key:0,class:"controlItem",src:_,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:pt})):v("",!0),vt.value||0!=We.value?v("",!0):(r(),u("img",{key:1,class:"controlItem",src:D,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:pt}))]),d("div",null,[We.value?(r(),u("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:j,alt:"",onClick:xt})):(r(),u("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:S,alt:"",onClick:xt}))])]),d("div",Ze,[d("div",Me,[d("div",Ne,[d("audio",{id:"audio",src:dt.value.mp3,onCanplay:It,ref_key:"audioRef",ref:ot,onTimeupdate:Et},null,40,qe),C(" "+m(at.value)+" ",1),y(k(B),{value:it.value,"onUpdate:value":t[3]||(t[3]=e=>it.value=e),"on-dragstart":wt,"on-dragend":Tt,tooltip:!1,max:lt.value,min:0},null,8,["value","max"]),C(" "+m(tt.value),1)])])])])])):v("",!0)])])])]))}}),[["__scopeId","data-v-230ad98e"]]);export{Oe as default};
