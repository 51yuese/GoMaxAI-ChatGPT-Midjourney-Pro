import{e,p as t,k as a,g as l,l as i,Z as s,r as o,L as n,$ as c,w as r,x as u,A as d,B as v,z as m,F as p,E as g,P as x,a0 as A,C as y,D as f,y as k,a1 as h,O as I,N as b,a2 as E,a4 as C,a5 as B,_ as F}from"../main-4156cf5e.js";import{_ as w,a as T,b as S,c as U,d as z}from"../light_music_end/light_music_end.c20cf1cf.js";import{P as D,a as R,_ as H,b as L,c as Q,d as _,e as j,f as J}from"../end/end.7ec47a1b.js";import{q as Y,c as Z,d as q,b as M,e as N}from"./music.0ed5be8a.js";import{C as G}from"../index/index.37b3d73f.js";import"../police/police.deef576c.js";const O={class:"bg-[#ffffff] dark:bg-[#24252B] musicBody"},V={class:"mainBox",style:{height:"100%"}},W={class:"bg-[#F8F9F9] dark:bg-[#24252B]",style:{height:"100%"}},X={class:"contentBox bg-[#F8F9F9] dark:from-transparent"},$={style:{display:"flex",height:"100%"}},K={style:{display:"flex","flex-direction":"column",overflow:"hidden",height:"100%",width:"100%"}},P={class:"contextBox"},ee={class:"contextBox-header"},te={class:"contextBox-rec"},ae=["onClick"],le={class:"contextBox-rec-item-title"},ie={class:"contextBox-input"},se=["placeholder"],oe={style:{"margin-top":"3px"}},ne={class:"contextBox-hot-title"},ce={class:"itemTop"},re={class:"topImg"},ue=["src","alt"],de={class:"topTitle"},ve={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},me={style:{display:"flex","align-items":"center",margin:"10px 0"}},pe={key:0,src:z,style:{"margin-right":"4px"}},ge={key:1,src:J,style:{"margin-right":"4px"}},xe={class:"intro text-[#8B8C8C] dark:text-[#727586]"},Ae={class:"contextBox-hot-title"},ye={class:"itemTop"},fe={class:"topImg"},ke=["src","alt"],he={class:"topTitle"},Ie={class:"title text-[#1E1F1F] dark:text-[#ffffff]"},be={style:{display:"flex","align-items":"center",margin:"10px 0"}},Ee={key:0,src:z,style:{"margin-right":"4px"}},Ce={key:1,src:J,style:{"margin-right":"4px"}},Be={class:"intro text-[#8B8C8C] dark:text-[#727586]"},Fe={key:0,class:"videoBox"},we={style:{position:"relative"}},Te=["src"],Se={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[17px]",style:{"margin-top":"12px","font-weight":"550","text-align":"left",padding:"0 10px"}},Ue={style:{display:"flex","align-items":"center","justify-content":"left",margin:"12px 0",padding:"0 10px"}},ze={key:0,src:z,style:{"margin-right":"4px"}},De={key:1,src:J,style:{"margin-right":"4px"}},Re={class:"introList"},He=["src"],Le={style:{position:"fixed",bottom:"0",width:"100%"}},Qe={key:0,class:"dark:bg-[#303137] bg-[#F2F3F7] text-[#8B8C8C] dark:text-[#6C6E79] border-t border-[#E8E8E8] dark:border-[#292A2E]",style:{padding:"0px 375px 0px 100px","box-sizing":"border-box"}},_e={class:"control dark:bg-[#303137] bg-[#F2F3F7] text-[#8B8C8C] dark:text-[#6C6E79] border-[#E8E8E8] dark:border-[#292A2E]"},je={style:{display:"flex","align-items":"center"}},Je={style:{display:"flex","align-items":"center",gap:"5px","margin-right":"20px"}},Ye=["src"],Ze={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[14px]"},qe={style:{color:"#727586","margin-top":"10px",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden","text-overflow":"ellipsis",width:"180px"}},Me={style:{display:"flex","align-items":"center",flex:"1","padding-right":"20px","margin-left":"20px"}},Ne={style:{width:"100%"}},Ge={style:{"margin-top":"4px",display:"flex","align-items":"center",gap:"10px"}},Oe=["src"],Ve=F(e({__name:"musicSquare",setup(e){const F=t(),z=a(),J=l((()=>z.isLogin));let Ve=null;const We=i(),Xe=s(),$e=l((()=>"dark"===Xe.theme)),Ke=o();o(0);const Pe=o(1),et=o();o("");const tt=o(""),at=o([]),lt=o("00:00"),it=o("00:00"),st=o(""),ot=o(""),nt=o(0),ct=o(null),rt=o([]);function ut(){Ve||(Ve=F.loading(c("homePage.dataLoading"),{duration:0}));let e={size:50,modelType:"music",page:Pe.value,order:tt.value};M(e).then((e=>{et.value=e.data.count,rt.value=e.data.records,ht()})).catch((e=>{ht()}))}ut(),Y({modelType:"music"}).then((e=>{0!=e.data.length?localStorage.setItem("musicGroupId",e.data[0].id):0==e.data.length&&Z().then((e=>{localStorage.setItem("musicGroupId",e.data.id)}))})),q({dictType:"music-lyrics"}).then((e=>{at.value=e.data.rows}));const dt=o();M({size:6,modelType:"music",page:1,order:"agreeNum"}).then((e=>{dt.value=e.data.records}));const vt=o(""),mt=o(!1),pt=o(""),gt=o(0);function xt(){const e=ct.value;mt.value?(mt.value=!1,e.pause()):(mt.value=!0,e.play())}function At(){gt.value-1<0?(gt.value=rt.value.length-1,pt.value=rt.value[gt.value]):(gt.value=gt.value-1,pt.value=rt.value[gt.value]);const e=setTimeout((()=>{mt.value=!1,xt(),clearTimeout(e)}))}function yt(){gt.value+1>rt.value.length-1?(gt.value=0,pt.value=rt.value[gt.value]):(gt.value=gt.value+1,pt.value=rt.value[gt.value]);const e=setTimeout((()=>{mt.value=!1,xt(),clearTimeout(e)}))}function ft(e,t){if(!J.value)return void z.setLoginDialog(!0);if(pt.value&&pt.value.id==e.id)return void xt();N({id:e.id,type:"music"}),ut(),e.introList=e.intro.split("\n"),pt.value=e,gt.value=t;const a=setTimeout((()=>{mt.value=!1,xt(),clearTimeout(a)}))}n((()=>pt.value),((e="")=>{}));const kt=o(!1);function ht(){Ve&&(Ve.destroy(),Ve=null)}function It(){pt.value&&(pt.value.operation=!1),kt.value=!1,rt.value.forEach((e=>{e.operation=!1}))}const bt=o(null);function Et(){const e=bt.value;if(e.scrollTop+e.clientHeight+1>=e.scrollHeight){if(30*Pe.value>=et.value)return;Pe.value++,ut()}}function Ct(){st.value=ct.value.duration,ot.value=ct.value.currentTime,it.value=Ft(parseInt(ct.value.currentTime)),lt.value=Ft(parseInt(ct.value.duration))}function Bt(e){it.value=Ft(parseInt(e.target.currentTime)),ot.value=e.target.currentTime,function(){let e=ot.value/st.value*100;nt.value=e;const t=ct.value;nt.value>=100&&(mt.value=!1,t.pause(),ot.value=0,nt.value=0,it.value="00:00")}()}function Ft(e){let t=parseInt(e/60),a=parseInt(e%60);return t=t>=10?t:"0"+t,a=a>=10?a:"0"+a,t+":"+a}const wt=o(!1);function Tt(){Ke.value&&localStorage.setItem("music_rec_prompt",Ke.value),We.push({path:"/music/creativeCenter"})}function St(){ct.value.pause()}function Ut(){ct.value.currentTime=ot.value,ct.value.play()}return(e,t)=>(r(),u("div",O,[kt.value?(r(),u("div",{key:0,class:"mask",onClick:It})):d("",!0),v("div",V,[v("div",W,[v("div",X,[v("div",$,[v("div",K,[v("div",P,[v("div",ee,m(e.$t("music2.creatAsong")),1),v("div",te,[(r(!0),u(p,null,g(at.value.slice(0,3),(e=>(r(),u("div",{class:"contextBox-rec-item text-[14px] p-[20px]",onClick:t=>Ke.value=e.dictValue},[v("div",le,m(e.dictValue),1),t[4]||(t[4]=v("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAErSURBVFiF7dbBbYMwFMbxv2lzhw0YoYzABtmg7QRppPaQCaIIJEZIN8gIjOCMwAbmHir3YGhaCSNsWqUHfxcE8nv84CEAQkL+YcSSYiWLCkQMuk2yt61vn2gJAvQa9JPZ+mch4ncSEEMCYkhADJlEKHlYK1nFS06gZBUreZh8j1gRShYvEJ2gq5Xcp36AfQpdDdHJ9HNAmKsXm373AVbOELN+VZt6ALGx3dVRRJJtW7jkIBpzRKcukCtA9+tFA5fc9J2JMJBd4wOxA3aNrWbywXSF+ABg5qfczLL7Pt8ed1eDSEE38JH/BHCGe+sInBF2iI6BGGhBtD4AJ8Q4ZDROAGfEDIgzwAtxxZRH81f11eo9yV6ffft5R8nyqGShDeiGUbJ8vCkgJOSv8gnIw5o7HWqnWwAAAABJRU5ErkJggg=="},null,-1))],8,ae)))),256))]),v("div",ie,[x(v("input",{class:"inp bg-[#fff] dark:bg-[#000000]","onUpdate:modelValue":t[0]||(t[0]=e=>Ke.value=e),type:"text",placeholder:e.$t("music.text1")},null,8,se),[[A,Ke.value]]),y(k(h),{class:"music_btn",show:wt.value,stroke:"#000"},{default:f((()=>[v("div",{class:"flex items-center",onClick:Tt},[v("span",oe,m(e.$t("music.create")),1),t[5]||(t[5]=v("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEOSURBVDiNrZLhTcQwDIWfmwwQJiBsYLXqHjACIzABbMAINwIwAYzgDS7doAPEMj/InUqaU3uI9yfKk/P5JQ6hUt/3L0T0XPtb6mqDiG6vhZhZWoH+qhYoXgshov9L5GvDzCIRQVXvNg97H83sE0BagQosiUjaAo3jGMwMQHtqcQuwaBjKOjXfiIg20xTA+av8AjHzKc28N1VpfLw0tb2gsErEzMF7H5vlDTFzMLObkmjyzBydc28A+DQBM5suAYZhuAfwip+Pe07unXMHALw3BYDD4koBAHLOqWtBiOjYAnnveQFZau4AfNWmqn60QDlnAZAqW0Rk7lT1qcBmAALgUUSaUxORWVUfFvXvZY9vsExoA77sdzkAAAAASUVORK5CYII="},null,-1))])])),_:1},8,["show"])]),v("div",ne,m(e.$t("common.hotRecomm")),1),dt.value&&dt.value.length>2?(r(),u("div",{key:0,class:"content hot",ref_key:"container",ref:bt},[(r(!0),u(p,null,g(dt.value,((a,l)=>(r(),u("div",{class:"contentItem",key:a.chatId},[v("div",ce,[v("div",re,[v("img",{class:"bgImg",src:a.cover,alt:e.$t("common.loadFail")},null,8,ue),pt.value&&pt.value.id!=a.id||!mt.value?(r(),I(k(b),{key:0,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:e=>ft(a,l)},{default:f((()=>[y(k(D))])),_:2},1032,["onClick"])):(r(),I(k(b),{key:1,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:xt},{default:f((()=>[y(k(R))])),_:1}))]),v("div",de,[v("div",ve,m(" "==a.title||null==a.title?e.$t("music.anonymous"):a.title),1),v("div",me,[$e.value?(r(),u("img",pe)):(r(),u("img",ge)),t[6]||(t[6]=v("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),v("div",xe,[v("span",null,m(a.intro),1)])])])])))),128))],512)):d("",!0),v("div",Ae,m(e.$t("music.newMusic")),1),rt.value&&rt.value.length>2?(r(),u("div",{key:1,class:"content",ref_key:"container",ref:bt,onScroll:Et},[(r(!0),u(p,null,g(rt.value,((a,l)=>(r(),u("div",{class:"contentItem bg-gradient-to-t to-[#2c2d32] from-[#3F3C31]",key:a.chatId},[v("div",ye,[v("div",fe,[v("img",{class:"bgImg",src:a.cover,alt:e.$t("common.loadFail")},null,8,ke),pt.value.id==a.id&&mt.value?(r(),I(k(b),{key:1,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:xt},{default:f((()=>[y(k(R))])),_:1})):(r(),I(k(b),{key:0,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:e=>ft(a,l)},{default:f((()=>[y(k(D))])),_:2},1032,["onClick"]))]),v("div",he,[v("div",Ie,m(" "==a.title||null==a.title?e.$t("music.anonymous"):a.title),1),v("div",be,[$e.value?(r(),u("img",Ee)):(r(),u("img",Ce)),t[7]||(t[7]=v("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),v("div",Be,[v("span",null,m(a.intro),1)])])])])))),128))],544)):d("",!0)]),y(G,{class:"end"})]),pt.value?(r(),u("div",Fe,[v("div",{class:E(["bg-[#F0F0F0] dark:bg-[#222325] musicInfoDialog",{hasMusic:pt.value}])},[v("div",we,[v("img",{src:H,style:{background:"#D8D8D8",position:"absolute",right:"10px",top:"10px",cursor:"pointer","border-radius":"5px"},onClick:t[1]||(t[1]=e=>pt.value="")}),v("img",{src:pt.value.cover,style:{width:"100%"}},null,8,Te)]),v("div",Se,m(" "==pt.value.title||null==pt.value.title?e.$t("music.anonymous"):pt.value.title),1),v("div",Ue,[$e.value?(r(),u("img",ze)):(r(),u("img",De)),t[8]||(t[8]=v("span",{class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),v("div",Re,[(r(!0),u(p,null,g(pt.value.introList,(e=>(r(),u("div",{key:e,style:{"margin-bottom":"10px"}},m(e),1)))),128))])],2),v("audio",{class:"video",type:"audio/mp3",id:"video",src:vt.value,onTimeupdate:t[2]||(t[2]=(...t)=>e.audioTimeUpdate&&e.audioTimeUpdate(...t))},null,40,He)])):d("",!0)])]),v("div",Le,[pt.value?(r(),u("div",Qe,[v("div",_e,[v("div",je,[v("div",Je,[v("img",{src:pt.value.cover,style:{"border-radius":"5px",width:"60px",height:"60px"}},null,8,Ye),v("div",Ze,[v("div",null,m(" "==pt.value.title||null==pt.value.title?e.$t("music.anonymous"):pt.value.title),1),v("div",qe,m(pt.value.intro),1)])]),v("div",null,[$e.value?(r(),u("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:L,alt:"",onClick:At})):(r(),u("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:w,alt:"",onClick:At}))]),v("div",null,[mt.value&&$e.value?(r(),u("img",{key:0,class:"controlItem",src:Q,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:xt})):d("",!0),mt.value&&0==$e.value?(r(),u("img",{key:1,class:"controlItem",src:T,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:xt})):d("",!0)]),v("div",null,[!mt.value&&$e.value?(r(),u("img",{key:0,class:"controlItem",src:_,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:xt})):d("",!0),mt.value||0!=$e.value?d("",!0):(r(),u("img",{key:1,class:"controlItem",src:S,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:xt}))]),v("div",null,[$e.value?(r(),u("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:j,alt:"",onClick:yt})):(r(),u("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:U,alt:"",onClick:yt}))])]),v("div",Me,[v("div",Ne,[v("div",Ge,[v("audio",{id:"audio",src:pt.value.mp3,onCanplay:Ct,ref_key:"audioRef",ref:ct,onTimeupdate:Bt},null,40,Oe),C(" "+m(it.value)+" ",1),y(k(B),{value:ot.value,"onUpdate:value":t[3]||(t[3]=e=>ot.value=e),"on-dragstart":St,"on-dragend":Ut,tooltip:!1,max:st.value,min:0},null,8,["value","max"]),C(" "+m(lt.value),1)])])])])])):d("",!0)])])])]))}}),[["__scopeId","data-v-3fac7b2e"]]);export{Ve as default};
