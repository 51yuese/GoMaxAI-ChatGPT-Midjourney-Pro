import{_ as e,a as l,b as t,c as a,d as i,e as s,f as n}from"../light_del_music/light_del_music.b0a93278.js";import{_ as r,a as o,b as c,c as u,d}from"../light_music_end/light_music_end.c20cf1cf.js";import{P as v,a as p,_ as m,b as g,c as x,d as y,e as f,f as h}from"../end/end.b479d967.js";import{e as k,r as w,k as b,g as E,p as C,ac as F,a6 as I,Z as T,$ as _,q as j,aQ as A,w as B,x as z,A as L,B as V,a2 as $,F as D,E as R,O as S,D as O,C as U,y as M,N as H,z as q,a3 as G,a1 as P,bG as N,a4 as Q,a5 as Z,db as J,an as K,_ as W}from"../main-b114ff11.js";import{g as X,h as Y,j as ee,p as le,l as te,r as ae}from"./music.eadc25d8.js";import{C as ie}from"../index1/index1.09d6b7f1.js";import"../police/police.deef576c.js";const se={class:"bg-[#F9F9FB] dark:bg-[#2B2D31] musicBody"},ne={class:"createCenterBox"},re={class:"createInfo"},oe=["onClick","src"],ce={key:3,style:{width:"100px",height:"100px"},src:e,alt:""},ue={class:"itemInfo"},de={class:"info",style:{flex:"1","margin-right":"10px"}},ve={style:{display:"flex","align-items":"center","justify-content":"space-between"}},pe={style:{display:"flex","align-items":"center"}},me={class:"text-[17px] dark:text-[#9A9EB5] text-[#1E1F1F]",style:{"font-weight":"550"}},ge={class:"model"},xe={class:"operation"},ye=["onClick"],fe={key:0,class:"operationBox bg-[#fff] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},he=["onClick"],ke={key:0,src:l,style:{"margin-right":"5px"}},we={key:1,src:t,style:{"margin-right":"5px"}},be=["onClick"],Ee={key:0,src:a,style:{"margin-right":"5px"}},Ce={key:1,src:i,style:{"margin-right":"5px"}},Fe=["onClick"],Ie={key:0,src:s,style:{"margin-right":"5px"}},Te={key:1,src:n,style:{"margin-right":"5px"}},_e={style:{display:"flex","align-items":"center",margin:"12px 0"}},je={key:0,src:d,style:{"margin-right":"4px"}},Ae={key:1,src:h,style:{"margin-right":"4px"}},Be={class:"text-[12px] text-[#8B8C8C] dark:text-[#595C6E]",style:{width:"90%",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden"}},ze={style:{width:"108px",height:"108px","border-radius":"8px",position:"relative",display:"flex","justify-content":"center","align-items":"center"}},Le={class:"itemInfo"},Ve={class:"info",style:{width:"100%"}},$e={style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between"}},De={style:{display:"flex","align-items":"center"}},Re={class:"text-[17px] dark:text-[#EEEEF0] text-[#1E1F1F]",style:{"font-weight":"550"}},Se={class:"text-[12px] text-[#1E1F1F] dark:text-[#EEEEF0] bg-[#F0F0F0] dark:bg-[#222325]",style:{padding:"1px 6px","border-radius":"6px","margin-left":"12px"}},Oe={style:{display:"flex","align-items":"center"}},Ue={style:{"margin-left":"10px","font-size":"13px",color:"#10a37f"}},Me={style:{display:"flex","align-items":"center",margin:"12px 0"}},He={key:0,src:d,style:{"margin-right":"4px"}},qe={key:1,src:h,style:{"margin-right":"4px"}},Ge={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"word-break":"keep-all","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Pe={key:0,class:"mainRight"},Ne={style:{width:"100%"}},Qe=["src"],Ze={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[17px]",style:{"margin-top":"12px","font-weight":"550"}},Je={style:{display:"flex","align-items":"center",margin:"12px 0"}},Ke={key:0,src:d,style:{"margin-right":"4px"}},We={key:1,src:h,style:{"margin-right":"4px"}},Xe={class:"introList"},Ye={class:""},el={style:{position:"absolute",width:"100%",bottom:"0","z-index":"1"}},ll={key:0,class:"control dark:bg-[#303137] bg-[#F2F3F7] text-[#8B8C8C] dark:text-[#6C6E79] border-[#E8E8E8] dark:border-[#292A2E]"},tl={style:{display:"flex","align-items":"center"}},al={style:{display:"flex","align-items":"center",gap:"5px","margin-right":"20px"}},il=["src"],sl={class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[14px]"},nl={style:{color:"#727586","font-size":"12px","margin-top":"10px",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden","text-overflow":"ellipsis",width:"180px"}},rl={style:{display:"flex","align-items":"center",flex:"1","padding-right":"20px","margin-left":"20px"}},ol={style:{width:"100%"}},cl={style:{"margin-top":"4px",display:"flex","align-items":"center",gap:"10px"}},ul=["src"],dl=W(k({__name:"myCenter",setup(e){const l=w(null),t=b();E((()=>t.isLogin));const a=w([]);let i=null;const s=C();F(),I(),w(!0),w(!1);const n=w(1),d=w(0),h=T(),k=E((()=>"dark"===h.theme)),W=w([{name:"V3"+_("music2.once2music"),value:"chirp-v3-0",title:"V3"},{name:"V3.5"+_("music2.once2music"),value:"chirp-v3-5",title:"V3.5"}]);w("").value=W.value[0].name;const dl=w(!1),vl=w([]),pl=w([]),ml=w(!1),gl=w(1),xl=w("00:00"),yl=w("00:00"),fl=w(""),hl=w(""),kl=w(0);function wl(){Y({size:20,page:n.value,modelType:"music",modelSubType:"create",order:"createAt"}).then((e=>{const{records:l}=e.data;0!=l.length&&l.forEach((e=>{if(""==e.answer&&null==e.errMsg&&0==e.children.length){let l={intro:""},i={intro:""};l.id=e.id,i.id=e.id;e.prompt.split(",").forEach((e=>{let t=e.split(" ");if(""==t[0]&&t.shift(),"prompt"==t[0])for(var a=1;a<=t.length-1;a++)l.intro=l.intro+t[a],i.intro=l.intro+t[a];"mv"==t[0]&&(l.modetitle=t[1],i.modetitle=t[1]),"title"==t[0]&&(l.name=t[1],i.name=t[1])})),vl.value.push(l),vl.value.push(i),setTimeout((()=>Rl()),300),a.value.push(e.id),1==a.value.length&&function(e,l,i){try{var n=setInterval((()=>{if(0==a.value.length)return bl.value=!0,void clearTimeout(n);ee({ids:a.value.join()}).then((e=>{e.data.forEach((e=>{if(console.log(vl.value),null!=e.errMsg){t.getUserInfo(),a.value.splice(a.value.indexOf(e.id),1),s.error(e.errMsg);for(var n=0;n<=vl.value.length-1;n++)e.id==vl.value[n].id&&vl.value.splice(n,2);pl.value.push(l),pl.value.push(i)}else if(null!=e.answer&&0!=e.children.length){a.value.splice(a.value.indexOf(e.id),1),t.getUserInfo();for(n=0;n<=vl.value.length-1;n++)e.id==vl.value[n].id&&(console.log(vl.value[n]),vl.value.splice(n,2));e.children.forEach((l=>{l.model=e.model,pl.value.push(l)})),le({ids:[e.children[0].id,e.children[1].id]})}}))}))}),3e3)}catch(r){s.error(r.message),console.log(r);const[e,l]=J("Request failed");vl.value=[],e.modetitle=Cl.value,l.modetitle=Cl.value,pl.value=[...pl.value,e,l],bl.value=!0,function(e){let l;$l.value=0,Dl.value=0,1==e?l=setInterval((()=>{$l.value+=10,Dl.value=$l.value/100*200,$l.value>=99&&(clearTimeout(l),$l.value=99,Dl.value=$l.value/100*200)}),5e3):clearTimeout(l)}(!1)}}(0,l,i)}else 0!=e.children.length&&e.children.forEach((l=>{l.model=e.model,pl.value.unshift(l)}))}))}))}X({modelType:"music"}).then((e=>{})),w(""),w(0),w(""),w("chirp-v3"),w("");const bl=w(!0);w(),w();const El=w(null);j((()=>{!async function(){var e;try{const l=await A({modelType:"music",page:1,size:10}),t=(l.data||{}).rows||[];d.value=(null==(e=t[0])?void 0:e.deduct)||0}catch(l){s.error(l.message)}}(),wl(),setTimeout((()=>Rl()),300)}));const Cl=w("V3");const Fl=w(),Il=w(0),Tl=w(!1);function _l(e,l){if(Fl.value&&Fl.value.id==e.id)return void jl();Fl.value={...e},Fl.value.introList=e.intro.split("\n"),Il.value=l;const t=setTimeout((()=>{Tl.value=!1,jl(),clearTimeout(t)}))}function jl(){const e=El.value;Tl.value?(Tl.value=!1,e.pause()):(Tl.value=!0,e.play())}function Al(){Il.value-1<0?(Il.value=pl.value.length-1,Fl.value=pl.value[Il.value]):(Il.value=Il.value-1,Fl.value=pl.value[Il.value]);const e=setTimeout((()=>{Tl.value=!1,jl(),clearTimeout(e)}))}function Bl(){Il.value+1>pl.value.length-1?(Il.value=0,Fl.value=pl.value[Il.value]):(Il.value=Il.value+1,Fl.value=pl.value[Il.value]);const e=setTimeout((()=>{Tl.value=!1,jl(),clearTimeout(e)}))}function zl(){Fl.value&&(Fl.value.operation=!1),dl.value=!1,ml.value=!1,pl.value.forEach((e=>{e.operation=!1}))}function Ll(){i&&(i.destroy(),i=null)}function Vl(e,l){let t="/api";if(i||(i=s.loading(_("ppt.DownloadingPwait"),{duration:0})),"mp4"==l){let l=e.mp4.split("/").pop();zl(),K.get(t+"/file/down",{responseType:"blob",params:{url:e.mp4}}).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",l),a.click(),Ll(),s.success(_("music2.downloadSucc"))})).catch((e=>{s.error(_("music2.downloadErro")),Ll()}))}else if("mp3"==l){let l=e.mp3.split("/").pop();zl(),K.get(t+"/file/down",{responseType:"blob",params:{url:e.mp3}}).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",l),a.click(),Ll(),s.success(_("music2.downloadSucc"))})).catch((e=>{s.error(_("music2.downloadErro")),Ll()}))}}const $l=w(0),Dl=w(0);function Rl(){let e=l.value;e.scrollTo({top:e.scrollHeight+7e3,behavior:"smooth"})}function Sl(){fl.value=El.value.duration,hl.value=El.value.currentTime,yl.value=Ul(parseInt(El.value.currentTime)),xl.value=Ul(parseInt(El.value.duration))}function Ol(e){yl.value=Ul(parseInt(e.target.currentTime)),hl.value=e.target.currentTime,function(){let e=hl.value/fl.value*100;kl.value=e}();const l=El.value;hl.value>=fl.value&&(Tl.value=!1,l.pause(),hl.value=0,kl.value=0,yl.value="00:00")}function Ul(e){let l=parseInt(e/60),t=parseInt(e%60);return l=l>=10?l:"0"+l,t=t>=10?t:"0"+t,l+":"+t}function Ml(){El.value.pause()}function Hl(){El.value.currentTime=hl.value,El.value.play()}return(e,t)=>(B(),z("div",se,[dl.value||ml.value?(B(),z("div",{key:0,class:"mask",onClick:zl})):L("",!0),V("div",ne,[V("div",{class:$(["createCenterMain",{hasMusic:Fl.value}])},[V("div",re,[V("div",{class:"mainLeft",ref_key:"createCenterRef",ref:l,onScroll:t[0]||(t[0]=e=>{var l;(l=e).target.scrollTop+l.target.clientHeight==l.target.scrollHeight&&(n.value+=1,wl())})},[(B(!0),z(D,null,R(pl.value,((l,a)=>(B(),z("div",{class:"mainItem dark:bg-[#2b2d31] bg-[#F9F9FB]",key:a},[Fl.value&&Fl.value.id!=l.id||!Tl.value?(B(),S(M(H),{key:0,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:e=>_l(l,a)},{default:O((()=>[U(M(v))])),_:2},1032,["onClick"])):(B(),S(M(H),{key:1,color:"rgba(255, 255, 255, 0.6)",size:"30px",class:"playImg",onClick:jl},{default:O((()=>[U(M(p))])),_:1})),l.cover?(B(),z("img",{key:2,onClick:e=>_l(l,a),style:{width:"100px",height:"100px","max-width":"108px"},src:l.cover,alt:""},null,8,oe)):L("",!0),l.cover?L("",!0):(B(),z("img",ce)),V("div",ue,[V("div",de,[V("div",ve,[V("div",pe,[V("div",me,q(" "==l.title||null==l.title?e.$t("music.anonymous"):l.title),1),V("div",ge,q(l.model.indexOf("v4")>-1?"V4":l.model.indexOf("v3-5")>-1?"V3.5":"V3.0"),1)]),V("div",xe,[V("div",{class:$(["collect",{collected:l.agree}]),onClick:e=>function(e){console.log(e);let l={relateId:e.id,action:"agree",relateType:"music"};0!=gl.value&&(gl.value=0,ae(l).then((l=>{null!=e.agree?pl.value.forEach((l=>{l.id==e.id&&(l.agree=null)})):pl.value.forEach((l=>{l.id==e.id&&(l.agree="agree")})),gl.value=1})))}(l)},null,10,ye),U(M(G),{icon:"ri:more-line",class:"icon text-xl text-center",onClick:e=>function(e,l){3==l&&(e.operation=!0,ml.value=!0)}(l,3)},null,8,["onClick"]),l.operation?(B(),z("div",fe,[V("div",{class:"operationItem",onClick:e=>Vl(l,"mp4"),style:{display:"flex"}},[k.value?(B(),z("img",ke)):(B(),z("img",we)),V("div",null,q(e.$t("music2.downVideo")),1)],8,he),V("div",{class:"operationItem",onClick:e=>Vl(l,"mp3"),style:{display:"flex"}},[k.value?(B(),z("img",Ee)):(B(),z("img",Ce)),V("div",null,q(e.$t("music2.downAiduo")),1)],8,be),V("div",{class:"operationItem",style:{display:"flex",color:"#ff5e55"},onClick:e=>async function(e,l){try{await te({ids:[e]}),s.success(_("music2.jiluDelSucc")),n.value=1,pl.value.splice(l,1)}catch(t){s.error(t.message)}}(l.id,a)},[k.value?(B(),z("img",Ie)):(B(),z("img",Te)),V("div",null,q(e.$t("common.delete")),1)],8,Fe)])):L("",!0)])]),V("div",_e,[k.value?(B(),z("img",je)):(B(),z("img",Ae)),t[11]||(t[11]=V("span",{class:"text-[#1E1F1F] dark:text-[#9A9EB5] text-[14px]",style:{"font-weight":"550"}},"Suno",-1))]),V("div",Be,q(l.intro),1)])])])))),128)),vl.value?(B(!0),z(D,{key:0},R(vl.value,((l,a)=>(B(),z("div",{class:"mainItem dark:bg-[#2b2d31] bg-[#FFF]",key:a},[V("div",ze,[U(M(N),null,{default:O((()=>[U(M(P),{stroke:"#76777A",size:"large"})])),_:1})]),V("div",Le,[V("div",Ve,[V("div",$e,[V("div",De,[V("div",Re,q(null==l.name?e.$t("music.anonymous"):l.name),1),V("div",Se,q(l.modetitle),1)]),V("div",Oe,[U(M(N),null,{default:O((()=>[U(M(P),{stroke:"#10A37F",size:10})])),_:1}),V("div",Ue,q(e.$t("music2.workGeningTips2")),1)])]),t[13]||(t[13]=V("div",null,null,-1)),V("div",Me,[k.value?(B(),z("img",He)):(B(),z("img",qe)),t[12]||(t[12]=V("span",{class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),V("div",Ge,q(l.intro),1)])])])))),128)):L("",!0)],544),Fl.value?(B(),z("div",Pe,[V("div",Ne,[V("img",{src:m,style:{background:"#D8D8D8",position:"absolute",right:"10px",top:"10px",cursor:"pointer","border-radius":"5px"},onClick:t[1]||(t[1]=e=>Fl.value="")}),V("img",{src:Fl.value.cover,style:{width:"100%"}},null,8,Qe)]),V("div",null,[V("div",{class:$(["musicInfoDialog",{hasMusic:Fl.value}]),style:{height:"calc(100% - 225px)",display:"flex","flex-direction":"column","align-items":"center",overflow:"scroll","border-radius":"10px"}},[V("div",Ze,q(" "==Fl.value.title?e.$t("music.anonymous"):Fl.value.title),1),V("div",Je,[k.value?(B(),z("img",Ke)):(B(),z("img",We)),t[14]||(t[14]=V("span",{class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[12px]",style:{"font-weight":"550"}},"Suno",-1))]),V("div",Xe,[(B(!0),z(D,null,R(Fl.value.introList,(e=>(B(),z("div",{key:e,style:{"margin-bottom":"10px"}},q(e),1)))),128))])],2)])])):L("",!0)]),V("div",Ye,[V("div",el,[Fl.value?(B(),z("div",ll,[V("div",tl,[V("div",al,[V("img",{src:Fl.value.cover,style:{"border-radius":"5px",width:"60px",height:"60px"}},null,8,il),V("div",sl,[V("div",null,q(" "==Fl.value.title||null==Fl.value.title?e.$t("music.anonymous"):Fl.value.title),1),V("div",nl,q(Fl.value.intro),1)])]),V("div",null,[k.value?(B(),z("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:g,alt:"",onClick:Al})):(B(),z("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:r,alt:"",onClick:Al}))]),V("div",null,[Tl.value&&k.value?(B(),z("img",{key:0,class:"controlItem",src:x,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:jl})):L("",!0),Tl.value&&0==k.value?(B(),z("img",{key:1,class:"controlItem",src:o,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:jl})):L("",!0)]),V("div",null,[!Tl.value&&k.value?(B(),z("img",{key:0,class:"controlItem",src:y,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:jl})):L("",!0),Tl.value||0!=k.value?L("",!0):(B(),z("img",{key:1,class:"controlItem",src:c,style:{margin:"0 10px",cursor:"pointer"},alt:"",onClick:jl}))]),V("div",null,[k.value?(B(),z("img",{key:0,class:"controlItem",style:{cursor:"pointer",width:"25px",height:"25px"},src:f,alt:"",onClick:Bl})):(B(),z("img",{key:1,class:"controlItem",style:{cursor:"pointer"},src:u,alt:"",onClick:Bl}))])]),V("div",rl,[V("div",ol,[V("div",cl,[V("audio",{id:"audio",src:Fl.value.mp3,onCanplay:Sl,ref_key:"audioRef",ref:El,onTimeupdate:Ol},null,40,ul),Q(" "+q(yl.value)+" ",1),U(M(Z),{value:hl.value,"onUpdate:value":t[2]||(t[2]=e=>hl.value=e),tooltip:!1,"on-dragstart":Ml,"on-dragend":Hl,max:fl.value,min:0},null,8,["value","max"]),Q(" "+q(xl.value),1)])])])])):L("",!0)]),U(ie,{class:"text-[#A3A5A6] dark:text-[#76777A]"})])],2)]),L("",!0)]))}}),[["__scopeId","data-v-9439057c"]]);export{dl as default};
