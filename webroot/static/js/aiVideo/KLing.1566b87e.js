import{e,k as t,p as a,r,bq as d,g as l,Q as i,w as s,x as o,B as n,I as p,A as v,T as x,U as u,z as g,C as m,y as c,F as b,E,G as k,D as y,dA as F,dB as f,bw as h,by as _,am as C,_ as w}from"../main-be2ae0f3.js";import{_ as z}from"../video_create/video_create.4f3c17fd.js";import{V as A}from"../VideoContentMain/VideoContentMain.a9bbbf6c.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.294d06f3.js";const B={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},j={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},D={style:{display:"flex","align-items":"stretch",height:"40px",border:"1px solid #464646","border-radius":"10px"}},T={style:{"margin-top":"12px"}},I={key:0},L={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},V={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},M=["src"],N={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},U={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},K=["src"],O={style:{"margin-top":"20px"}},S={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},G={style:{"margin-top":"20px"}},J={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},P={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},q={style:{"flex-grow":"1"}},Q={key:1,style:{"margin-top":"20px"}},R={class:"size_card new_size_card"},H={style:{"margin-top":"20px"}},W={class:"size_card"},X=["onClick"],Y={key:2,style:{"margin-top":"20px"}},Z={style:{"margin-top":"20px"}},$={class:"size_card new_size_card"},ee={key:3,style:{"margin-top":"20px"}},te={style:{padding:"0 30px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},ae={key:0},re={key:1},de={key:2},le={key:3},ie={key:4},se={key:5},oe=w(e({__name:"KLingSidebar",emits:["changeTab"],setup(e,{emit:w}){const A=t(),oe=a(),ne=r(""),pe=d("videoBase"),ve=r(0),xe=r(999),ue=r(1),ge=[{model:"kling-v1",mode:"std",duration:5}],me=[{model:"kling-v1-5"}],ce=[{model:"kling-v1-6",selectType:0}],be=[{model:"kling-v1",mode:"std",duration:10},{model:"kling-v1",mode:"pro",duration:10},{model:"kling-v1-5",mode:"std",duration:5},{model:"kling-v1-5",mode:"std",duration:10},{model:"kling-v1-6",mode:"std",duration:5},{model:"kling-v1-6",mode:"std",duration:10}],Ee=w,ke=r([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]),ye=r({});function Fe(e){e?ye.value={type:e}:ye.value.type=e}const fe=r({model:"kling-v1-6",prompt:"",image:"",image_tail:"",negative_prompt:"",cfg_scale:.5,mode:"pro",aspect_ratio:"",duration:"5",keyType:3}),he=r([{label:"kling-v1-5",value:"kling-v1-5"},{label:"kling-v1",value:"kling-v1"},{label:"kling-v1-6",value:"kling-v1-6"}]),_e=l((()=>0==ve.value?he.value.filter((e=>!me.map((e=>e.model)).includes(e.value))):he.value)),Ce=l((()=>ge.some((e=>e.model==fe.value.model&&e.mode==fe.value.mode&&e.duration==fe.value.duration)))),we=l((()=>!be.some((e=>e.model==fe.value.model&&e.mode==fe.value.mode&&e.duration==fe.value.duration)))),ze=l((()=>!ce.some((e=>e.model==fe.value.model&&ve.value==e.selectType)))),Ae=[{label:"无",value:""},{label:"简单运镜",value:"must be simple"},{label:"自下而上",value:"down_back"},{label:"向前走",value:"forward_up"},{label:"右转前进或左转前进",value:"right_turn_forward or left_turn_forward"}];function Be(e){ve.value=e}async function je(e){try{pe.uploadFile().then((t=>{"start"==e?fe.value.image=t:fe.value.image_tail=t}))}catch(t){oe.error(t.message)}}function De(){ne.value=""}function Te(){pe.create(Le,"kling").then((e=>{Ve(),e&&Ee("changeTab",1)}))}function Ie(e){fe.value.duration=e}function Le(){const e=JSON.parse(JSON.stringify(fe.value));let t="";return 1==ve.value&&""==e.image?oe.error("开始帧图片不能为空"):null==ne.value||""==ne.value?oe.error("视频场景不能为空"):(t+=ne.value,999!=xe.value&&(t+=", "+pe.videoData.value.styleData[xe.value].dictName),e.prompt=t,ye.value.type&&(e.camera_control=ye.value),Ce.value||delete e.camera_control,we.value||delete e.image_tail,ze.value||(e.mode="std"),e)}function Ve(){A.isLogin?F(fe.value).then((e=>{200===e.code?(Me.value=e.data,Ne.value=!1):Ne.value=!0})).catch((e=>{Ne.value=!0})):f(fe.value).then((e=>{Me.value=e.data}))}const Me=r({remainCount:0,freeCount:0,useIntegrate:0}),Ne=r(!1);return i((()=>fe.value),((e,t)=>{Ve()}),{deep:!0,immediate:!0}),(e,t)=>(s(),o("div",B,[n("div",j,[n("div",D,[n("div",{class:p([0==ve.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[0]||(t[0]=e=>Be(0))},"文生视频 ",2),n("div",{class:p([1==ve.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[1]||(t[1]=e=>Be(1))},"图生视频 ",2)]),n("div",T,[t[22]||(t[22]=n("div",{style:{border:"1px dashed #464646",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},[n("p",null,"功能介绍"),n("div",{style:{"font-size":"13px"}}," KLING AI 视频模型，超强想象力，高画质、长时长、功能多。 ")],-1)),1==ve.value?(s(),o("div",I,[n("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[2]||(t[2]=e=>je("start"))},[t[12]||(t[12]=n("div",{style:{display:"flex","margin-bottom":"6px"}},[n("div",null,[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传开始帧图片"),n("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==fe.value.image?(s(),o("div",L,t[11]||(t[11]=[n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),n("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(s(),o("div",V,[n("img",{src:fe.value.image,style:{width:"100%",height:"100%"}},null,8,M)]))]),we.value?(s(),o("div",{key:0,style:{"margin-top":"20px",cursor:"pointer"},onClick:t[3]||(t[3]=e=>je("end"))},[t[14]||(t[14]=n("div",{style:{display:"flex","margin-bottom":"6px"}},[n("div",null,[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片(非必传)"),n("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==fe.value.image_tail?(s(),o("div",N,t[13]||(t[13]=[n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),n("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(s(),o("div",U,[n("img",{src:fe.value.image_tail,style:{width:"100%",height:"100%"}},null,8,K)]))])):v("",!0)])):v("",!0),n("div",O,[t[15]||(t[15]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"描述你的视频场景")],-1)),n("div",S,[x(n("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>ne.value=e),style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"请输入创意描述，包含内容主体+动作/场景，一键生成视频"},null,512),[[u,ne.value]]),n("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:De}," 清空 ")])]),n("div",G,[t[16]||(t[16]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"创意想象力")],-1)),n("div",J,[n("div",P,g(fe.value.cfg_scale),1),n("div",q,[m(c(h),{value:fe.value.cfg_scale,"onUpdate:value":t[5]||(t[5]=e=>fe.value.cfg_scale=e),step:.05,max:1,min:0},null,8,["value"])])])]),ze.value?(s(),o("div",Q,[t[17]||(t[17]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"生成模式")],-1)),n("div",R,[n("div",{class:p("std"==fe.value.mode?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[6]||(t[6]=e=>fe.value.mode="std")},[n("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","std"==fe.value.mode?"text-white":""])},"高性能",2)],2),n("div",{class:p("pro"==fe.value.mode?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[7]||(t[7]=e=>fe.value.mode="pro")},[n("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","pro"==fe.value.mode?"text-white":""])},"高表现",2)],2)])])):v("",!0),n("div",H,[t[18]||(t[18]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"尺寸选择")],-1)),n("div",W,[(s(!0),o(b,null,E(ke.value,((e,t)=>(s(),o("div",{class:p(ue.value==t?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),key:e.id,onClick:a=>function(e,t){fe.value.aspect_ratio=t,ue.value=e}(t,e.value)},[n("div",{style:k([{width:e.width,height:e.height},{"border-radius":"2px","margin-bottom":"4px"}]),class:p(ue.value==t?"bg-[#FFFFFF]  border border-transparent dark:border-transparent":"bg-[#fff]  border border-transparent dark:border-[#46484F]")},null,6),n("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]",ue.value==t?"text-white":""])},g(e.value),3)],10,X)))),128))])]),Ce.value?(s(),o("div",Y,[t[19]||(t[19]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"运镜方式")],-1)),n("div",null,[m(c(_),{options:Ae,onChange:Fe})])])):v("",!0),n("div",Z,[t[20]||(t[20]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频生成时长")],-1)),n("div",$,[n("div",{class:p("5"==fe.value.duration?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[8]||(t[8]=e=>Ie("5"))},[n("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","5"==fe.value.duration?"text-white":""])},"5秒",2)],2),n("div",{class:p("10"==fe.value.duration?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[9]||(t[9]=e=>Ie("10"))},[n("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","10"==fe.value.duration?"text-white":""])},"10秒",2)],2)])]),_e.value&&_e.value.length>1?(s(),o("div",ee,[t[21]||(t[21]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频模型")],-1)),n("div",null,[m(c(_),{value:fe.value.model,"onUpdate:value":t[10]||(t[10]=e=>fe.value.model=e),options:_e.value},null,8,["value","options"])])])):v("",!0)])]),n("div",te,[m(c(C),{loading:c(pe).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:Te},{default:y((()=>[t[23]||(t[23]=n("img",{src:z,style:{"margin-right":"5px"}},null,-1)),Ne.value?(s(),o("span",ae,"模型未配置")):c(A).isLogin?Me.value&&Me.value.isVipFree?(s(),o("span",de,"会员免费")):Me.value&&Me.value.remainCount?(s(),o("span",le,"剩余"+g(Me.value.remainCount)+"次免费",1)):Me.value?(s(),o("span",ie,g(Me.value.useIntegrate)+"积分/次",1)):(s(),o("span",se,"生成")):(s(),o("span",re,"开始生成"))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-0b47e0a2"]]),ne={style:{display:"flex"}},pe=e({__name:"KLing",setup(e){const t=r();function a(){t.value&&t.value.changeTypeIndex(1)}return(e,r)=>(s(),o("div",ne,[m(oe,{onChangeTab:a}),m(A,{ref_key:"mainRef",ref:t,title:"可灵",subType:"3"},null,512)]))}});export{pe as default};
