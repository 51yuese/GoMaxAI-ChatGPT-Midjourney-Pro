import{e,g as a,k as l,p as t,r as i,b7 as o,aP as s,$ as r,aQ as n,I as d,dU as u,dV as v,L as p,w as c,x as m,C as g,B as x,aH as f,y as b,aI as y,A as h,P as _,Q as k,z as E,F as I,E as w,a2 as C,a4 as A,D as F,a7 as T,a8 as j,N as $,am as V,a1 as M,a0 as D,bS as N,bT as B,aD as S,c0 as U,c1 as L,ao as z,_ as J}from"../main-4156cf5e.js";import{_ as P}from"../aiVideoGou/aiVideoGou.56a8a6eb.js";import{_ as O}from"../uploadImg/uploadImg.66d9b869.js";import{T as G,S as K,_ as Q,a as R,C as H}from"../AI2/AI2.ab791222.js";import{_ as W,V as Y}from"../VideoContentMain/VideoContentMain.0ab2e29f.js";import{c as q,b as X,_ as Z}from"../baiduThink/baiduThink.e30f5938.js";import{N as ee}from"../text/text.b9dc4078.js";import"../KLingIcon3/KLingIcon3.6acffd30.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.c9db7ff9.js";const ae={class:"video_sub_sidebar"},le={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},te={style:{display:"flex","align-items":"center","margin-bottom":"6px",height:"66px"}},ie={style:{width:"140px",position:"relative"},class:"customBox"},oe={key:0,class:"newModel"},se={class:"custerSelect"},re=["onClick"],ne={class:"name"},de={key:0,class:"newModel"},ue={key:0,style:{"margin-bottom":"10px"}},ve={style:{display:"flex","margin-bottom":"6px","justify-content":"space-between"}},pe={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},ce={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},me={style:{"margin-top":"20px"},class:"border border-[#E8E8E8] dark:border-[#292A2E]"},ge={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},xe=["src"],fe={class:"recomBox"},be={class:"labeBox"},ye=["onClick","src"],he={style:{"margin-bottom":"16px"}},_e={class:"recomBox",style:{"margin-bottom":"6px",padding:"0"}},ke={class:"dark:text-[#EEEEF0] text-[#767676] text-[14px]"},Ee={class:"labeBox",style:{flex:"none"}},Ie={style:{width:"100%","border-radius":"6px"},class:"bg-[#FFF] dark:bg-[#17181A] border border-[#E8E8E8] dark:border-[#292A2E]"},we=["placeholder"],Ce={style:{width:"100%","text-align":"right","padding-right":"12px"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]"},Ae={class:"recomBox"},Fe={class:"labeBox"},Te=["onClick"],je={style:{color:"#6F7478"}},$e=["placeholder"],Ve={key:1,style:{"margin-top":"20px"}},Me={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},De={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Ne={class:"flexSelect bg-[#F8F9F9] dark:bg-[#17181A]"},Be={style:{width:"82px","margin-right":"10px"}},Se={style:{padding:"0 20px",position:"absolute",bottom:"20px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#17181A] border-t border-[#E8E8E8] dark:border-[#292A2E]"},Ue={key:0,class:"vipIcon",src:W,alt:""},Le={key:0,style:{color:"#fff"}},ze={key:1,style:{color:"#fff"}},Je={key:2,style:{color:"#fff"}},Pe={key:3,style:{color:"#fff"}},Oe={key:4,style:{display:"flex","align-items":"center",color:"#fff"}},Ge={key:5,style:{color:"#fff"}},Ke=!1,Qe=J(e({__name:"JMengSidebar",emits:["changeTab"],setup(e,{emit:J}){const W=a((()=>1===Y.userInfo.lifetimeVip||Y.userInfo.vipExpire&&new Date(Y.userInfo.vipExpire)>new Date)),Y=l(),Qe=t(),Re=i(""),He=o("videoBase"),We=i(0),Ye=i(999);i(1);const qe=a((()=>Y.userInfo.vipLeavelId));let Xe=i([]);s().then((e=>{Xe.value=e.data}));const Ze=[{model:"kling-v1",mode:"std",duration:5}],ea=[{model:"kling-v1-5"}],aa=[{model:"kling-v1-6",selectType:0}],la=J;i([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]);const ta=i({});function ia(e){e?ta.value={type:e}:ta.value.type=e}const oa=i({model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5});let sa=i([]),ra=i([]),na=()=>{const e=[...ra.value].sort((()=>Math.random()-.5));sa.value=e.slice(0,e.length>3?3:e.length)};U().then((e=>{var a,l;ra.value=null==(l=null==(a=e.data)?void 0:a.t2v)?void 0:l.recTags,na()}));let da=i([]),ua=i([]),va=i([]),pa=(e=1)=>{const a=[...va.value].sort((()=>Math.random()-.5));1==e?da.value=a.slice(0,a.length>5?5:a.length):ua.value=a.slice(0,a.length>5?5:a.length)};L().then((e=>{va.value=e.data,pa(),pa(2)})),i([{label:"高性能模式",value:"std"},{label:"高品质模式",value:"pro"}]),i([{label:"5S",value:"5"},{label:"10S",value:"10"}]);const ca=i([{label:"16:9",value:"16:9"},{label:"9:16",value:"9:16"},{label:"1:1",value:"1:1"},{label:"4:3",value:"4:3"},{label:"3:4",value:"3:4"},{label:"21:9",value:"21:9"}]);i([{label:"创意想象力：0",value:0},{label:"创意想象力：0.05",value:.05},{label:"创意想象力：0.1",value:.1},{label:"创意想象力：0.15",value:.15},{label:"创意想象力：0.2",value:.2},{label:"创意想象力：0.25",value:.25},{label:"创意想象力：0.3",value:.3},{label:"创意想象力：0.35",value:.35},{label:"创意想象力：0.4",value:.4},{label:"创意想象力：0.45",value:.45},{label:"创意想象力：0.5",value:.5},{label:"创意想象力：0.55",value:.55},{label:"创意想象力：0.6",value:.6},{label:"创意想象力：0.65",value:.65},{label:"创意想象力：0.7",value:.7},{label:"创意想象力：0.75",value:.75},{label:"创意想象力：0.8",value:.8},{label:"创意想象力：0.85",value:.85},{label:"创意想象力：0.9",value:.9},{label:"创意想象力：0.95",value:.95},{label:"创意想象力：1",value:1}]);let ma=i(!1);const ga=i([{label:"即梦 3.0",info:r("AIvideo.JM3text"),value:"jimeng_vgfm_t2v_l20"}]);n({modelType:"video",keyType:5}).then((e=>{console.log(e.data,"fetchQueryModelsListAPIMaps")})),a((()=>0==We.value?ga.value.filter((e=>!ea.map((e=>e.model)).includes(e.value))):ga.value));const xa=a((()=>Ze.some((e=>e.model==oa.value.model&&e.mode==oa.value.mode&&e.duration==oa.value.duration))));i(!1);const fa=a((()=>!aa.some((e=>e.model==oa.value.model&&We.value==e.selectType)))),ba=[{label:r("AIvideo.wu"),value:""},{label:r("AIvideo.simple"),value:"must be simple"},{label:r("AIvideo.down_back"),value:"down_back"},{label:r("AIvideo.forward_up"),value:"forward_up"},{label:r("AIvideo.rightOrLeft"),value:"right_turn_forward or left_turn_forward"}];function ya(e){We.value=e,0==e?(oa.value.model="jimeng_vgfm_t2v_l20",oa.value.image="",ga.value=[{label:"即梦 3.0",info:r("AIvideo.JM3text"),value:"jimeng_vgfm_t2v_l20"}],d.emit("changeTypeIndexName",r("AIvideo.textToVideo"))):(oa.value.model="jimeng_vgfm_i2v_l20",ga.value=[{label:"即梦 3.0",info:r("AIvideo.JM3text"),value:"jimeng_vgfm_i2v_l20"}],d.emit("changeTypeIndexName",r("AIvideo.imgToVideo")))}let ha=i(!1),_a=i(!1);async function ka(e){try{He.uploadFile(e).then((a=>{"start"==e?oa.value.image=a:oa.value.image_tail=a}))}catch(a){Qe.error(a.message)}}function Ea(e=""){Re.value=e}d.on("setKLvideoLoading",(e=>{"start"==e.e?ha.value=e.data:_a.value=e.data}));let Ia=i(""),wa=i("");function Ca(){Re.value?(z({text:Re.value}),Qe.success(r("chat.copied"))):Qe.error(r("draw.noDataCopy"))}function Aa(e=null){if(ja.value.isVipUsed&&-1===ja.value.userType.indexOf(qe.value)){let e=ja.value.userType.split(","),a="";return e.forEach(((l,t)=>{a+=Xe.value.filter((e=>e.id==l))[0].dictName,t<e.length-1&&(a+=",")})),void Qe.error(r("digitalMan.vipUse1")+a+r("digitalMan.vipUse2"))}let a=e||Fa();console.log(a,"param"),a&&He.create(e||Fa,"jmeng").then((e=>{Ta(),e&&la("changeTab",1)}))}function Fa(){const e=JSON.parse(JSON.stringify(oa.value));let a="";if(1==We.value){if(""==e.image)return void Qe.error(r("AIvideo.img1Nodata"));e.image_urls=[e.image]}else delete e.image_urls;if(null!=Re.value&&""!=Re.value)return a+=Re.value,999!=Ye.value&&(a+=", "+He.videoData.value.styleData[Ye.value].dictName),e.prompt=a,ta.value.type&&(e.camera_control=ta.value),xa.value||delete e.camera_control,Ke.value?e.image_urls.push(e.image_tail):delete e.image_tail,e;Qe.error(r("AIvideo.videoSceneNodata"))}function Ta(){let e=JSON.parse(JSON.stringify(oa.value)),a="";a+=Re.value,999!=Ye.value&&(a+=", "+He.videoData.value.styleData[Ye.value].dictName),e.prompt=a,ta.value.type&&(e.camera_control=ta.value),xa.value||delete e.camera_control,Ke.value||delete e.image_tail,fa.value||(e.mode="std"),Y.isLogin?u(e).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(ja.value=e.data,$a.value=!1):$a.value=!0})).catch((e=>{$a.value=!0})):v(e).then((e=>{ja.value=e.data}))}d.on("copyVideoData",(e=>{console.log(e),oa.value={model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5};for(const a in oa.value)for(const l in e)l==a&&e[l]&&(oa.value[a]=e[l]);Re.value=e.prompt,e.image?We.value=1:We.value=0})),d.on("generateVideo",(e=>{Aa(e)}));const ja=i({remainCount:0,freeCount:0,useIntegrate:0}),$a=i(!1);p((()=>oa.value),((e,a)=>{Ta()}),{deep:!0,immediate:!0});const Va=i(),Ma=i(),Da=()=>{Va.value.open()},Na=()=>{Ma.value.thinks="",Ma.value.open()};function Ba(e){Re.value+=e}return(e,a)=>(c(),m("div",ae,[g(q,{ref_key:"inspirationRef",ref:Va,onTextToImg:Ba,title:e.$t("draw.AIgenDesc"),type:"mj"},null,8,["title"]),g(X,{ref_key:"thinkRef",ref:Ma,onTextToImg:Ba,title:e.$t("draw.AIgenDesc"),type:"mj"},null,8,["title"]),x("div",le,[x("div",null,[x("div",te,[a[16]||(a[16]=x("div",{class:"dark:text-[#EEEEF0] text-[#000] text-[18px]",style:{"margin-right":"12px","font-weight":"500"}},"即梦视频",-1)),x("div",ie,[g(b(y),{value:oa.value.model,"onUpdate:value":a[0]||(a[0]=e=>oa.value.model=e),options:ga.value,onClick:a[1]||(a[1]=e=>f(ma)?ma.value=!b(ma):ma=!b(ma)),show:!1},null,8,["value","options"]),"jimeng_vgfm_i2v_l20"==oa.value.model||"jimeng_vgfm_t2v_l20"==oa.value.model?(c(),m("div",oe,"NEW")):h("",!0),_(x("div",se,[x("p",null,E(e.$t("draw.videoModelChose"))+":",1),(c(!0),m(I,null,w(ga.value,(e=>(c(),m("div",{class:C(["selectItem",oa.value.model==e.value?"active":""]),onClick:a=>{oa.value.model=e.value,f(ma)?ma.value=!1:ma=!1}},[x("div",ne,[A(E(e.label)+" ",1),"即梦 1.6"==e.label?(c(),m("div",de,"NEW ")):h("",!0)]),x("span",null,E(e.info),1),a[15]||(a[15]=x("img",{src:P,alt:""},null,-1))],10,re)))),256))],512),[[k,b(ma)]])])])]),a[24]||(a[24]=x("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]",style:{"margin-bottom":"16px"}},null,-1)),g(b(j),{class:"card-tabs","default-value":We.value,value:We.value,size:"large",animated:"","onUpdate:value":ya},{default:F((()=>[g(b(T),{name:0,tab:e.$t("AIvideo.textToVideo")},null,8,["tab"]),g(b(T),{name:1,tab:e.$t("AIvideo.imgToVideo")},null,8,["tab"])])),_:1},8,["default-value","value"]),x("div",null,[1==We.value?(c(),m("div",ue,[x("div",ve,[x("div",null,[x("div",pe,E(e.$t("AIvideo.uploadFirstImg")),1),x("div",ce,E(e.$t("draw.PuploadImgText1")),1)])]),x("div",me,[g(b(M),{show:b(ha)},{default:F((()=>[""==oa.value.image?(c(),m("div",{key:0,onClick:a[2]||(a[2]=e=>ka("start")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#17181a]"},[a[17]||(a[17]=x("img",{src:O,alt:""},null,-1)),x("div",ge,E(e.$t("AIvideo.uploadFirstImg")),1)])):(c(),m("div",{key:1,onClick:a[4]||(a[4]=e=>ka("start")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[x("img",{src:oa.value.image,style:{width:"auto",height:"100%"}},null,8,xe),g(b($),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:a[3]||(a[3]=V((e=>oa.value.image=""),["stop"]))},{default:F((()=>[g(b(G))])),_:1})]))])),_:1},8,["show"]),a[18]||(a[18]=x("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),x("div",fe,[x("span",null,E(e.$t("knowledge.recom"))+"：",1),x("div",be,[(c(!0),m(I,null,w(b(da),(e=>(c(),m("img",{class:"labeImg",onClick:a=>function(e,a="start"){"start"==a?(oa.value.image=e.imageUrl,Re.value=e.prompt+wa.value,Ia.value=e.prompt):(oa.value.image_tail=e.imageUrl,Re.value=Ia.value+e.prompt,wa.value=e.prompt)}(e),src:e.imageUrl,alt:""},null,8,ye)))),256))]),g(b($),{size:"20px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:a[5]||(a[5]=e=>b(pa)(1))},{default:F((()=>[g(b(K))])),_:1})])]),h("",!0),h("",!0)])):h("",!0),x("div",he,[x("div",_e,[x("div",ke,E(e.$t("draw.chuangyiDesc")),1),x("div",Ee,[x("div",{class:"labeItem",onClick:Na},[a[21]||(a[21]=x("img",{src:Q,alt:""},null,-1)),x("span",null,E(e.$t("draw.AIgenDesc")),1)]),x("div",{class:"labeItem",onClick:Da},[a[22]||(a[22]=x("img",{src:R,alt:""},null,-1)),x("span",null,E(e.$t("homePage.tips")),1)])])]),x("div",Ie,[_(x("textarea",{"onUpdate:modelValue":a[10]||(a[10]=e=>Re.value=e),style:{width:"100%",height:"112px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:e.$t("draw.textToImgExp")},null,8,we),[[D,Re.value]]),x("div",Ce,[g(b($),{size:"18px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:Ca},{default:F((()=>[g(b(H))])),_:1}),g(b($),{size:"18px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:a[11]||(a[11]=e=>Ea())},{default:F((()=>[g(b(G))])),_:1})]),a[23]||(a[23]=x("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),x("div",Ae,[x("span",null,E(e.$t("knowledge.recom"))+"：",1),x("div",Fe,[(c(!0),m(I,null,w(b(sa),(e=>(c(),m("div",{class:"labeItem",onClick:a=>Ea(e.descript)},E(e.name),9,Te)))),256))]),g(b($),{size:"20px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:b(na)},{default:F((()=>[g(b(K))])),_:1},8,["onClick"])])])]),g(b(B),{"arrow-placement":"right"},{default:F((()=>[g(b(N),{name:"1"},{header:F((()=>[g(b(ee),null,{default:F((()=>[A(E(e.$t("AIvideo.notDesiredPres")),1),x("span",je,E(e.$t("draw.notMust")),1)])),_:1})])),default:F((()=>[_(x("textarea",{"onUpdate:modelValue":a[12]||(a[12]=e=>oa.value.negative_prompt=e),style:{width:"100%",height:"140px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79] border border-[#E8E8E8] dark:border-[#292A2E]",placeholder:e.$t("AIvideo.notDescInput")},null,8,$e),[[D,oa.value.negative_prompt]])])),_:1})])),_:1}),xa.value?(c(),m("div",Ve,[x("div",Me,[x("div",De,E(e.$t("AIvideo.yunjinType")),1)]),x("div",null,[g(b(y),{options:ba,onChange:ia})])])):h("",!0)])]),x("div",Ne,[x("div",Be,[g(b(y),{value:oa.value.aspect_ratio,"onUpdate:value":a[13]||(a[13]=e=>oa.value.aspect_ratio=e),options:ca.value},null,8,["value","options"])])]),x("div",Se,[ja.value&&ja.value.isVipUsed?(c(),m("img",Ue)):h("",!0),g(b(S),{loading:b(He).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"64px","font-size":"15px","border-radius":"8px",padding:"12px 0","margin-top":"12px"},onClick:a[14]||(a[14]=e=>Aa())},{default:F((()=>[$a.value?(c(),m("span",Le,E(e.$t("draw.modelNotSet")),1)):b(Y).isLogin?ja.value&&ja.value.isVipFree&&W.value?(c(),m("span",Je,E(e.$t("chat.vipFree")),1)):ja.value&&ja.value.remainCount&&W.value?(c(),m("span",Pe,E(e.$t("draw.shenyu")+ja.value.remainCount+e.$t("draw.chiFree")),1)):ja.value?(c(),m("div",Oe,[x("span",null,E(e.$t("gpt.lijiGen")),1),a[25]||(a[25]=x("img",{src:Z,style:{margin:"0 5px 0 8px",transform:"translateY(-2px)"}},null,-1)),x("span",null,E(ja.value.useIntegrate),1)])):(c(),m("span",Ge,E(e.$t("draw.gen")),1)):(c(),m("span",ze,E(e.$t("draw.beginGen")),1))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-f24404aa"]]),Re={style:{display:"flex"}},He=e({__name:"JMeng",setup(e){const a=i();function l(){a.value&&a.value.changeTypeIndex(1)}return(e,t)=>(c(),m("div",Re,[g(Qe,{onChangeTab:l}),g(Y,{ref_key:"mainRef",ref:a,title:"即梦",subType:"5"},null,512)]))}});export{He as default};
