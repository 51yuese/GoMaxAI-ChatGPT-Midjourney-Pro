import{e,k as l,p as a,r as t,b6 as i,g as o,J as s,dY as r,dZ as n,M as d,w as u,x as v,B as p,A as c,aK as m,D as g,z as x,Q as b,R as f,F as y,E as k,I as _,a3 as h,y as E,C,ap as F,a0 as j,bR as I,c8 as w,aq as B,aL as T,a6 as A,a7 as z,al as M,N,bI as V,bJ as S,aF as U,_ as J}from"../main-23bab8dd.js";import{_ as D,T as L,C as R}from"../aiVideoGou/aiVideoGou.7740b7b2.js";import{_ as O}from"../uploadImg/uploadImg.66d9b869.js";import{_ as K,a as G,S as P}from"../AI2/AI2.a669895b.js";import{c as W,b as Y,_ as q}from"../baiduThink/baiduThink.42c56234.js";import{N as Q}from"../text/text.9e8e98e8.js";import{V as Z}from"../VideoContentMain/VideoContentMain.00fdca01.js";import"../KLingIcon3/KLingIcon3.528c15f9.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.6ca3ead0.js";const H={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},X={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},$={style:{display:"flex","align-items":"center","margin-bottom":"6px",height:"66px"}},ee={style:{width:"140px",position:"relative"},class:"customBox"},le={key:0,class:"newModel"},ae={class:"custerSelect"},te=["onClick"],ie={class:"name"},oe={key:0,class:"newModel"},se={key:0,style:{"margin-bottom":"10px"}},re={style:{display:"flex","margin-bottom":"6px","justify-content":"space-between"}},ne={key:0,style:{display:"flex","align-items":"center"}},de={style:{"margin-top":"20px"},class:"border border-[#E8E8E8] dark:border-[#292A2E]"},ue=["src"],ve={class:"recomBox"},pe={class:"labeBox"},ce=["onClick","src"],me={key:0,style:{display:"flex","margin-bottom":"6px","margin-top":"20px"}},ge={key:1,class:"border border-[#E8E8E8] dark:border-[#292A2E]"},xe=["src"],be={class:"recomBox"},fe={class:"labeBox"},ye=["onClick","src"],ke={style:{"margin-bottom":"16px"}},_e={style:{width:"100%","border-radius":"6px"},class:"bg-[#FFF] dark:bg-[#17181A] border border-[#E8E8E8] dark:border-[#292A2E]"},he={style:{width:"100%","text-align":"right","padding-right":"12px","padding-bottom":"14.5px"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]"},Ee={class:"recomBox"},Ce={class:"labeBox"},Fe=["onClick"],je={key:1,style:{"margin-top":"20px"}},Ie={class:"flexSelect bg-[#F8F9F9] dark:bg-[#17181A]"},we={style:{width:"82px","margin-right":"10px"}},Be={style:{padding:"0 90px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#17181A] border-t border-[#E8E8E8] dark:border-[#292A2E]"},Te={key:0},Ae={key:1},ze={key:2},Me={key:3},Ne={key:4,style:{display:"flex","align-items":"center"}},Ve={key:5},Se=J(e({__name:"JMengSidebar",emits:["changeTab"],setup(e,{emit:J}){const Z=l(),Se=a(),Ue=t(""),Je=i("videoBase"),De=t(0),Le=t(999);t(1);const Re=[{model:"kling-v1",mode:"std",duration:5}],Oe=[{model:"kling-v1-5"}],Ke=[{model:"kling-v1-6",selectType:0}],Ge=[{model:"kling-v1",mode:"std",duration:10},{model:"kling-v1",mode:"pro",duration:10},{model:"kling-v1-5",mode:"std",duration:5},{model:"kling-v1-5",mode:"std",duration:10},{model:"kling-v1-6",mode:"std",duration:5},{model:"kling-v1-6",mode:"std",duration:10}],Pe=J;t([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]);const We=t({});function Ye(e){e?We.value={type:e}:We.value.type=e}const qe=t({model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5});let Qe=t([]),Ze=t([]),He=()=>{const e=[...Ze.value].sort((()=>Math.random()-.5));Qe.value=e.slice(0,e.length>3?3:e.length)};I().then((e=>{var l,a;Ze.value=null==(a=null==(l=e.data)?void 0:l.t2v)?void 0:a.recTags,He()}));let Xe=t([]),$e=t([]),el=t([]),ll=(e=1)=>{const l=[...el.value].sort((()=>Math.random()-.5));1==e?Xe.value=l.slice(0,l.length>5?5:l.length):$e.value=l.slice(0,l.length>5?5:l.length)};w().then((e=>{el.value=e.data,ll(),ll(2)})),t([{label:"高性能模式",value:"std"},{label:"高品质模式",value:"pro"}]),t([{label:"5S",value:"5"},{label:"10S",value:"10"}]);const al=t([{label:"16:9",value:"16:9"},{label:"9:16",value:"9:16"},{label:"1:1",value:"1:1"},{label:"4:3",value:"4:3"},{label:"3:4",value:"3:4"},{label:"21:9",value:"21:9"}]);t([{label:"创意想象力：0",value:0},{label:"创意想象力：0.05",value:.05},{label:"创意想象力：0.1",value:.1},{label:"创意想象力：0.15",value:.15},{label:"创意想象力：0.2",value:.2},{label:"创意想象力：0.25",value:.25},{label:"创意想象力：0.3",value:.3},{label:"创意想象力：0.35",value:.35},{label:"创意想象力：0.4",value:.4},{label:"创意想象力：0.45",value:.45},{label:"创意想象力：0.5",value:.5},{label:"创意想象力：0.55",value:.55},{label:"创意想象力：0.6",value:.6},{label:"创意想象力：0.65",value:.65},{label:"创意想象力：0.7",value:.7},{label:"创意想象力：0.75",value:.75},{label:"创意想象力：0.8",value:.8},{label:"创意想象力：0.85",value:.85},{label:"创意想象力：0.9",value:.9},{label:"创意想象力：0.95",value:.95},{label:"创意想象力：1",value:1}]);let tl=t(!1);const il=t([{label:"即梦 3.0",info:"生动的画面动态表现，指令响应更佳",value:"jimeng_vgfm_t2v_l20"}]);o((()=>0==De.value?il.value.filter((e=>!Oe.map((e=>e.model)).includes(e.value))):il.value));const ol=o((()=>Re.some((e=>e.model==qe.value.model&&e.mode==qe.value.mode&&e.duration==qe.value.duration))));let sl=t(!1);const rl=e=>{sl.value=e},nl=o((()=>!Ge.some((e=>e.model==qe.value.model&&e.mode==qe.value.mode&&e.duration==qe.value.duration)))),dl=o((()=>!Ke.some((e=>e.model==qe.value.model&&De.value==e.selectType)))),ul=[{label:"无",value:""},{label:"简单运镜",value:"must be simple"},{label:"自下而上",value:"down_back"},{label:"向前走",value:"forward_up"},{label:"右转前进或左转前进",value:"right_turn_forward or left_turn_forward"}];function vl(e){De.value=e,0==e?(qe.value.model="jimeng_vgfm_t2v_l20",il.value={label:"即梦 3.0",info:"生动的画面动态表现，指令响应更佳",value:"jimeng_vgfm_t2v_l20"},s.emit("changeTypeIndexName","文生视频")):(qe.value.model="jimeng_vgfm_i2v_l20",il.value={label:"即梦 3.0",info:"生动的画面动态表现，指令响应更佳",value:"jimeng_vgfm_i2v_l20"},s.emit("changeTypeIndexName","图生视频"))}async function pl(e){try{Je.uploadFile().then((l=>{"start"==e?qe.value.image=l:qe.value.image_tail=l}))}catch(l){Se.error(l.message)}}function cl(e=""){Ue.value=e}let ml=t(""),gl=t("");function xl(e,l="start"){"start"==l?(qe.value.image=e.imageUrl,Ue.value=e.prompt+gl.value,ml.value=e.prompt):(qe.value.image_tail=e.imageUrl,Ue.value=ml.value+e.prompt,gl.value=e.prompt)}function bl(){Ue.value?(B({text:Ue.value}),Se.success("复制成功")):Se.error("无内容可复制")}function fl(e=null){let l=e||yl();console.log(l,"param"),l&&Je.create(e||yl,"jmeng").then((e=>{kl(),e&&Pe("changeTab",1)}))}function yl(){const e=JSON.parse(JSON.stringify(qe.value));let l="";if(1!=De.value||""!=e.image){if(null!=Ue.value&&""!=Ue.value)return l+=Ue.value,999!=Le.value&&(l+=", "+Je.videoData.value.styleData[Le.value].dictName),e.prompt=l,We.value.type&&(e.camera_control=We.value),ol.value||delete e.camera_control,nl.value||delete e.image_tail,e;Se.error("视频场景不能为空")}else Se.error("开始帧图片不能为空")}function kl(){let e=JSON.parse(JSON.stringify(qe.value)),l="";l+=Ue.value,999!=Le.value&&(l+=", "+Je.videoData.value.styleData[Le.value].dictName),e.prompt=l,We.value.type&&(e.camera_control=We.value),ol.value||delete e.camera_control,nl.value||delete e.image_tail,dl.value||(e.mode="std"),Z.isLogin?r(e).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(_l.value=e.data,hl.value=!1):hl.value=!0})).catch((e=>{hl.value=!0})):n(e).then((e=>{_l.value=e.data}))}s.on("copyVideoData",(e=>{console.log(e),qe.value={model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5};for(const l in qe.value)for(const a in e)a==l&&e[a]&&(qe.value[l]=e[a]);Ue.value=e.prompt,e.image?De.value=1:De.value=0})),s.on("generateVideo",(e=>{fl(e)}));const _l=t({remainCount:0,freeCount:0,useIntegrate:0}),hl=t(!1);d((()=>qe.value),((e,l)=>{kl()}),{deep:!0,immediate:!0});const El=t(),Cl=t(),Fl=()=>{El.value.open()},jl=()=>{Cl.value.thinks="",Cl.value.open()};function Il(e){Ue.value+=e}return(e,l)=>(u(),v("div",H,[p(W,{ref_key:"inspirationRef",ref:El,onTextToImg:Il,title:"AI生成描述",type:"mj"},null,512),p(Y,{ref_key:"thinkRef",ref:Cl,onTextToImg:Il,title:"AI生成描述",type:"mj"},null,512),c("div",X,[c("div",null,[c("div",$,[l[17]||(l[17]=c("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[18px]",style:{"margin-right":"12px"}},"即梦视频",-1)),c("div",ee,[p(g(T),{value:qe.value.model,"onUpdate:value":l[0]||(l[0]=e=>qe.value.model=e),options:il.value,onClick:l[1]||(l[1]=e=>m(tl)?tl.value=!g(tl):tl=!g(tl)),show:!1},null,8,["value","options"]),"jimeng_vgfm_i2v_l20"==qe.value.model||"jimeng_vgfm_t2v_l20"==qe.value.model?(u(),v("div",le,"NEW")):x("",!0),b(c("div",ae,[l[16]||(l[16]=c("p",null,"视频模型选择:",-1)),(u(!0),v(y,null,k(il.value,(e=>(u(),v("div",{class:_(["selectItem",qe.value.model==e.value?"active":""]),onClick:l=>{qe.value.model=e.value,m(tl)?tl.value=!1:tl=!1}},[c("div",ie,[h(E(e.label)+" ",1),"即梦 1.6"==e.label?(u(),v("div",oe,"NEW ")):x("",!0)]),c("span",null,E(e.info),1),l[15]||(l[15]=c("img",{src:D,alt:""},null,-1))],10,te)))),256))],512),[[f,g(tl)]])])])]),l[34]||(l[34]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]",style:{"margin-bottom":"16px"}},null,-1)),p(g(z),{class:"card-tabs","default-value":De.value,value:De.value,size:"large",animated:"","onUpdate:value":vl},{default:C((()=>[p(g(A),{name:0,tab:"文生视频"}),p(g(A),{name:1,tab:"图生视频"})])),_:1},8,["default-value","value"]),c("div",null,[1==De.value?(u(),v("div",se,[c("div",re,[l[19]||(l[19]=c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传首帧图片或视频"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")],-1)),nl.value?(u(),v("div",ne,[l[18]||(l[18]=c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[12px]",style:{"margin-right":"10px"}},"增加尾帧",-1)),p(g(M),{color:"#5f57fd",value:g(sl),"onUpdate:value":rl},null,8,["value"])])):x("",!0)]),c("div",de,[""==qe.value.image?(u(),v("div",{key:0,onClick:l[2]||(l[2]=e=>pl("start")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[20]||(l[20]=[c("img",{src:O,alt:""},null,-1),c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传首帧图",-1)]))):(u(),v("div",{key:1,onClick:l[4]||(l[4]=e=>pl("start")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[c("img",{src:qe.value.image,style:{width:"auto",height:"100%"}},null,8,ue),p(g(N),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[3]||(l[3]=F((e=>qe.value.image=""),["stop"]))},{default:C((()=>[p(g(L))])),_:1})])),l[22]||(l[22]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",ve,[l[21]||(l[21]=c("span",null,"推荐：",-1)),c("div",pe,[(u(!0),v(y,null,k(g(Xe),(e=>(u(),v("img",{class:"labeImg",onClick:l=>xl(e),src:e.imageUrl,alt:""},null,8,ce)))),256))]),p(g(N),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[5]||(l[5]=e=>g(ll)(1))},{default:C((()=>[p(g(P))])),_:1})])]),nl.value&&g(sl)?(u(),v("div",me,l[23]||(l[23]=[c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片或视频(非必传)"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")],-1)]))):x("",!0),nl.value&&g(sl)?(u(),v("div",ge,[""==qe.value.image_tail?(u(),v("div",{key:0,onClick:l[6]||(l[6]=e=>pl("end")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[24]||(l[24]=[c("img",{src:O,alt:""},null,-1),c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传结束帧图",-1)]))):(u(),v("div",{key:1,onClick:l[8]||(l[8]=e=>pl("end")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[c("img",{src:qe.value.image_tail,style:{width:"auto",height:"100%"}},null,8,xe),p(g(N),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[7]||(l[7]=F((e=>qe.value.image_tail=""),["stop"]))},{default:C((()=>[p(g(L))])),_:1})])),l[26]||(l[26]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",be,[l[25]||(l[25]=c("span",null,"推荐：",-1)),c("div",fe,[(u(!0),v(y,null,k(g($e),(e=>(u(),v("img",{class:"labeImg",onClick:l=>xl(e,"end"),src:e.imageUrl,alt:""},null,8,ye)))),256))]),p(g(N),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[9]||(l[9]=e=>g(ll)(2))},{default:C((()=>[p(g(P))])),_:1})])])):x("",!0)])):x("",!0),c("div",ke,[c("div",{class:"recomBox",style:{"margin-bottom":"6px",padding:"0"}},[l[29]||(l[29]=c("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[14px]"},"创意描述",-1)),c("div",{class:"labeBox",style:{flex:"none"}},[c("div",{class:"labeItem",onClick:jl},l[27]||(l[27]=[c("img",{src:K,alt:""},null,-1),c("span",null,"AI生成描述",-1)])),c("div",{class:"labeItem",onClick:Fl},l[28]||(l[28]=[c("img",{src:G,alt:""},null,-1),c("span",null,"提示词",-1)]))])]),c("div",_e,[b(c("textarea",{"onUpdate:modelValue":l[10]||(l[10]=e=>Ue.value=e),style:{width:"100%",height:"112px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"描述你想生成的画面和动作。例如：美丽的油画少女，柔光落在她的脸上         "},null,512),[[j,Ue.value]]),c("div",he,[p(g(N),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:bl},{default:C((()=>[p(g(R))])),_:1}),p(g(N),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[11]||(l[11]=e=>cl())},{default:C((()=>[p(g(L))])),_:1})]),l[31]||(l[31]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",Ee,[l[30]||(l[30]=c("span",null,"推荐：",-1)),c("div",Ce,[(u(!0),v(y,null,k(g(Qe),(e=>(u(),v("div",{class:"labeItem",onClick:l=>cl(e.descript)},E(e.name),9,Fe)))),256))]),p(g(N),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:g(He)},{default:C((()=>[p(g(P))])),_:1},8,["onClick"])])])]),p(g(S),{"arrow-placement":"right"},{default:C((()=>[p(g(V),{name:"1"},{header:C((()=>[p(g(Q),null,{default:C((()=>l[32]||(l[32]=[h("不希望呈现的内容"),c("span",{style:{color:"#6F7478"}},"（非必填）",-1)]))),_:1})])),default:C((()=>[b(c("textarea",{"onUpdate:modelValue":l[12]||(l[12]=e=>qe.value.negative_prompt=e),style:{width:"100%",height:"140px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79] border border-[#E8E8E8] dark:border-[#292A2E]",placeholder:"写下你不希望在视频中呈现的内容。例如：动画、模糊、变形、毁容、低质量、拼贴、粒状、标志、抽象、插图、计算机生成、扭曲 …"},null,512),[[j,qe.value.negative_prompt]])])),_:1})])),_:1}),ol.value?(u(),v("div",je,[l[33]||(l[33]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"运镜方式")],-1)),c("div",null,[p(g(T),{options:ul,onChange:Ye})])])):x("",!0)])]),c("div",Ie,[c("div",we,[p(g(T),{value:qe.value.aspect_ratio,"onUpdate:value":l[13]||(l[13]=e=>qe.value.aspect_ratio=e),options:al.value},null,8,["value","options"])])]),c("div",Be,[p(g(U),{loading:g(Je).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"8px",padding:"12px 0","margin-top":"12px"},onClick:l[14]||(l[14]=e=>fl())},{default:C((()=>[hl.value?(u(),v("span",Te,"模型未配置")):g(Z).isLogin?_l.value&&_l.value.isVipFree?(u(),v("span",ze,"会员免费")):_l.value&&_l.value.remainCount?(u(),v("span",Me,"剩余"+E(_l.value.remainCount)+"次免费",1)):_l.value?(u(),v("div",Ne,[l[35]||(l[35]=c("span",null,"立即生成",-1)),l[36]||(l[36]=c("img",{src:q,style:{margin:"0 5px 0 8px",transform:"translateY(-2px)"}},null,-1)),c("span",null,E(_l.value.useIntegrate),1)])):(u(),v("span",Ve,"生成")):(u(),v("span",Ae,"开始生成"))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-3b8cde7a"]]),Ue={style:{display:"flex"}},Je=e({__name:"JMeng",setup(e){const l=t();function a(){l.value&&l.value.changeTypeIndex(1)}return(e,t)=>(u(),v("div",Ue,[p(Se,{onChangeTab:a}),p(Z,{ref_key:"mainRef",ref:l,title:"即梦",subType:"5"},null,512)]))}});export{Je as default};
