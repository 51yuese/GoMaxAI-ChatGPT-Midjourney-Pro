import{e,g as a,k as l,p as t,r as o,b2 as i,aP as s,aQ as r,$ as n,I as u,dM as d,dN as v,L as p,w as c,x as m,C as g,B as x,aH as f,y as b,aI as y,A as h,P as k,Q as _,z as E,F as I,E as w,a2 as C,a4 as F,D as A,a7 as T,a8 as $,N as j,am as V,a1 as D,a0 as N,bJ as M,bK as B,aD as U,bT as S,bU as z,ao as L,_ as O}from"../main-a0b53047.js";import{_ as P}from"../aiVideoGou/aiVideoGou.56a8a6eb.js";import{_ as J}from"../uploadImg/uploadImg.66d9b869.js";import{T as K,S as G,_ as Q,a as R,C as W}from"../AI2/AI2.27a6c867.js";import{_ as H,V as Y}from"../VideoContentMain/VideoContentMain.5f9ff8d2.js";import{c as q,b as X,_ as Z}from"../baiduThink/baiduThink.7f68969a.js";import{N as ee}from"../text/text.c368b05e.js";import"../KLingIcon3/KLingIcon3.6acffd30.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.a6d67891.js";const ae={class:"video_sub_sidebar"},le={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},te={key:0},oe={style:{display:"flex","align-items":"center","margin-bottom":"6px",height:"66px"}},ie={style:{width:"140px",position:"relative"},class:"customBox"},se={key:0,class:"newModel"},re={class:"custerSelect"},ne=["onClick"],ue={class:"name"},de={key:0,class:"newModel"},ve={key:0,style:{"margin-bottom":"10px"}},pe={style:{display:"flex","margin-bottom":"6px","justify-content":"space-between"}},ce={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},me={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},ge={style:{"margin-top":"20px"},class:"border border-[#E8E8E8] dark:border-[#292A2E]"},xe={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},fe=["src"],be={class:"recomBox"},ye={class:"labeBox"},he=["onClick","src"],ke={style:{"margin-bottom":"16px"}},_e={class:"recomBox",style:{"margin-bottom":"6px",padding:"0"}},Ee={class:"dark:text-[#EEEEF0] text-[#767676] text-[14px]"},Ie={class:"labeBox",style:{flex:"none"}},we={style:{width:"100%","border-radius":"6px"},class:"bg-[#FFF] dark:bg-[#17181A] border border-[#E8E8E8] dark:border-[#292A2E]"},Ce=["placeholder"],Fe={style:{width:"100%","text-align":"right","padding-right":"12px"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]"},Ae={class:"recomBox"},Te={class:"labeBox"},$e=["onClick"],je={style:{color:"#6F7478"}},Ve=["placeholder"],De={key:1,style:{"margin-top":"20px"}},Ne={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},Me={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Be={class:"flexSelect bg-[#F8F9F9] dark:bg-[#17181A]"},Ue={style:{width:"82px","margin-right":"10px"}},Se={style:{padding:"0 20px",position:"absolute",bottom:"20px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#17181A] border-t border-[#E8E8E8] dark:border-[#292A2E]"},ze={key:0,class:"vipIcon",src:H,alt:""},Le={key:0,style:{color:"#fff"}},Oe={key:1,style:{color:"#fff"}},Pe={key:2,style:{color:"#fff"}},Je={key:3,style:{color:"#fff"}},Ke={key:4,style:{display:"flex","align-items":"center",color:"#fff"}},Ge={key:5,style:{color:"#fff"}},Qe=!1,Re=O(e({__name:"JMengSidebar",emits:["changeTab"],setup(e,{emit:O}){const H=a((()=>1===Y.userInfo.lifetimeVip||Y.userInfo.vipExpire&&new Date(Y.userInfo.vipExpire)>new Date)),Y=l(),Re=t(),We=o(""),He=i("videoBase"),Ye=o(0),qe=o(999);o(1);const Xe=a((()=>Y.userInfo.vipLeavelId));let Ze=o([]);s().then((e=>{Ze.value=e.data}));const ea=[{model:"kling-v1",mode:"std",duration:5}],aa=[{model:"kling-v1-6",selectType:0}],la=O;o([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]);const ta=o({});function oa(e){e?ta.value={type:e}:ta.value.type=e}const ia=o({model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5});let sa=o([]),ra=o([]),na=()=>{const e=[...ra.value].sort((()=>Math.random()-.5));sa.value=e.slice(0,e.length>3?3:e.length)};S().then((e=>{var a,l;ra.value=null==(l=null==(a=e.data)?void 0:a.t2v)?void 0:l.recTags,na()}));let ua=o([]),da=o([]),va=o([]),pa=(e=1)=>{const a=[...va.value].sort((()=>Math.random()-.5));1==e?ua.value=a.slice(0,a.length>5?5:a.length):da.value=a.slice(0,a.length>5?5:a.length)};z().then((e=>{va.value=e.data,pa(),pa(2)})),o([{label:"高性能模式",value:"std"},{label:"高品质模式",value:"pro"}]),o([{label:"5S",value:"5"},{label:"10S",value:"10"}]);const ca=o([{label:"16:9",value:"16:9"},{label:"9:16",value:"9:16"},{label:"1:1",value:"1:1"},{label:"4:3",value:"4:3"},{label:"3:4",value:"3:4"},{label:"21:9",value:"21:9"}]);o([{label:"创意想象力：0",value:0},{label:"创意想象力：0.05",value:.05},{label:"创意想象力：0.1",value:.1},{label:"创意想象力：0.15",value:.15},{label:"创意想象力：0.2",value:.2},{label:"创意想象力：0.25",value:.25},{label:"创意想象力：0.3",value:.3},{label:"创意想象力：0.35",value:.35},{label:"创意想象力：0.4",value:.4},{label:"创意想象力：0.45",value:.45},{label:"创意想象力：0.5",value:.5},{label:"创意想象力：0.55",value:.55},{label:"创意想象力：0.6",value:.6},{label:"创意想象力：0.65",value:.65},{label:"创意想象力：0.7",value:.7},{label:"创意想象力：0.75",value:.75},{label:"创意想象力：0.8",value:.8},{label:"创意想象力：0.85",value:.85},{label:"创意想象力：0.9",value:.9},{label:"创意想象力：0.95",value:.95},{label:"创意想象力：1",value:1}]);let ma=o(!1);const ga=o([]);r({modelType:"video",keyType:5}).then((e=>{console.log(e.data,"fetchQueryModelsListAPIMaps"),e.data&&e.data.rows&&e.data.rows[0].children&&(ga.value=e.data.rows[0].children)}));const xa=a((()=>0==Ye.value&&ga.value.length>0?(console.log(ga.value.filter((e=>e.t2v)),"文生视频videoOptions.value"),ia.value.model=ga.value.filter((e=>e.t2v))[0].value,ga.value.filter((e=>e.t2v))):1==Ye.value&&ga.value.length>0?(console.log(ga.value.filter((e=>e.i2v)),"图生视频videoOptions.value"),ia.value.model=ga.value.filter((e=>e.i2v))[0].value,ga.value.filter((e=>e.i2v))):void 0)),fa=a((()=>ea.some((e=>e.model==ia.value.model&&e.mode==ia.value.mode&&e.duration==ia.value.duration))));o(!1);const ba=a((()=>!aa.some((e=>e.model==ia.value.model&&Ye.value==e.selectType)))),ya=[{label:n("AIvideo.wu"),value:""},{label:n("AIvideo.simple"),value:"must be simple"},{label:n("AIvideo.down_back"),value:"down_back"},{label:n("AIvideo.forward_up"),value:"forward_up"},{label:n("AIvideo.rightOrLeft"),value:"right_turn_forward or left_turn_forward"}];function ha(e){Ye.value=e,0==e?u.emit("changeTypeIndexName",n("AIvideo.textToVideo")):u.emit("changeTypeIndexName",n("AIvideo.imgToVideo"))}let ka=o(!1),_a=o(!1);async function Ea(e){try{He.uploadFile(e).then((a=>{"start"==e?ia.value.image=a:ia.value.image_tail=a}))}catch(a){Re.error(a.message)}}function Ia(e=""){We.value=e}u.on("setKLvideoLoading",(e=>{"start"==e.e?ka.value=e.data:_a.value=e.data}));let wa=o(""),Ca=o("");function Fa(){We.value?(L({text:We.value}),Re.success(n("chat.copied"))):Re.error(n("draw.noDataCopy"))}function Aa(e=null){if(ja.value.isVipUsed&&-1===ja.value.userType.indexOf(Xe.value)){let e=ja.value.userType.split(","),a="";return e.forEach(((l,t)=>{a+=Ze.value.filter((e=>e.id==l))[0].dictName,t<e.length-1&&(a+=",")})),void Re.error(n("digitalMan.vipUse1")+a+n("digitalMan.vipUse2"))}let a=e||Ta();console.log(a,"param"),a&&He.create(e||Ta,"jmeng").then((e=>{$a(),e&&(la("changeTab",1),ia.value.prompt="",ia.value.image="",ia.value.image_tail="",ia.value.negative_prompt="",We.value="")}))}function Ta(){const e=JSON.parse(JSON.stringify(ia.value));let a="";if(1==Ye.value){if(""==e.image)return void Re.error(n("AIvideo.img1Nodata"));e.image_urls=[e.image]}else delete e.image_urls;if(null!=We.value&&""!=We.value)return a+=We.value,999!=qe.value&&(a+=", "+He.videoData.value.styleData[qe.value].dictName),e.prompt=a,ta.value.type&&(e.camera_control=ta.value),fa.value||delete e.camera_control,Qe.value?e.image_urls.push(e.image_tail):delete e.image_tail,e;Re.error(n("AIvideo.videoSceneNodata"))}function $a(){let e=JSON.parse(JSON.stringify(ia.value)),a="";a+=We.value,999!=qe.value&&(a+=", "+He.videoData.value.styleData[qe.value].dictName),e.prompt=a,ta.value.type&&(e.camera_control=ta.value),fa.value||delete e.camera_control,Qe.value||delete e.image_tail,ba.value||(e.mode="std"),Y.isLogin?d(e).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(ja.value=e.data,Va.value=!1):Va.value=!0})).catch((e=>{Va.value=!0})):v(e).then((e=>{ja.value=e.data}))}u.on("copyVideoData",(e=>{console.log(e),ia.value={model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5};for(const a in ia.value)for(const l in e)l==a&&e[l]&&(ia.value[a]=e[l]);We.value=e.prompt,e.image?Ye.value=1:Ye.value=0})),u.on("generateVideo",(e=>{Aa(e)}));const ja=o({remainCount:0,freeCount:0,useIntegrate:0}),Va=o(!1);p((()=>ia.value),((e,a)=>{$a()}),{deep:!0,immediate:!0});const Da=o(),Na=o(),Ma=()=>{Da.value.open()},Ba=()=>{Na.value.thinks="",Na.value.open()};function Ua(e){We.value+=e}return(e,a)=>(c(),m("div",ae,[g(q,{ref_key:"inspirationRef",ref:Da,onTextToImg:Ua,title:e.$t("draw.AIgenDesc"),type:"mj"},null,8,["title"]),g(X,{ref_key:"thinkRef",ref:Na,onTextToImg:Ua,title:e.$t("draw.AIgenDesc"),type:"mj"},null,8,["title"]),x("div",le,[xa.value&&xa.value.length>0?(c(),m("div",te,[x("div",oe,[a[16]||(a[16]=x("div",{class:"dark:text-[#EEEEF0] text-[#000] text-[18px]",style:{"margin-right":"12px","font-weight":"500"}},"即梦视频",-1)),x("div",ie,[g(b(y),{value:ia.value.model,"onUpdate:value":a[0]||(a[0]=e=>ia.value.model=e),options:xa.value,onClick:a[1]||(a[1]=e=>f(ma)?ma.value=!b(ma):ma=!b(ma)),show:!1},null,8,["value","options"]),ga.value.filter((e=>e.value==ia.value.model))[0].new?(c(),m("div",se,"NEW")):h("",!0),k(x("div",re,[x("p",null,E(e.$t("draw.videoModelChose"))+":",1),(c(!0),m(I,null,w(xa.value,(e=>(c(),m("div",{class:C(["selectItem",ia.value.model==e.value?"active":""]),onClick:a=>{ia.value.model=e.value,f(ma)?ma.value=!1:ma=!1}},[x("div",ue,[F(E(e.label)+" ",1),e.new?(c(),m("div",de,"NEW ")):h("",!0)]),x("span",null,E(e.desc),1),a[15]||(a[15]=x("img",{src:P,alt:""},null,-1))],10,ne)))),256))],512),[[_,b(ma)]])])])])):h("",!0),a[24]||(a[24]=x("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]",style:{"margin-bottom":"16px"}},null,-1)),g(b($),{class:"card-tabs","default-value":Ye.value,value:Ye.value,size:"large",animated:"","onUpdate:value":ha},{default:A((()=>[g(b(T),{name:0,tab:e.$t("AIvideo.textToVideo")},null,8,["tab"]),g(b(T),{name:1,tab:e.$t("AIvideo.imgToVideo")},null,8,["tab"])])),_:1},8,["default-value","value"]),x("div",null,[1==Ye.value?(c(),m("div",ve,[x("div",pe,[x("div",null,[x("div",ce,E(e.$t("AIvideo.uploadFirstImg")),1),x("div",me,E(e.$t("draw.PuploadImgText1")),1)])]),x("div",ge,[g(b(D),{show:b(ka)},{default:A((()=>[""==ia.value.image?(c(),m("div",{key:0,onClick:a[2]||(a[2]=e=>Ea("start")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#17181a]"},[a[17]||(a[17]=x("img",{src:J,alt:""},null,-1)),x("div",xe,E(e.$t("AIvideo.uploadFirstImg")),1)])):(c(),m("div",{key:1,onClick:a[4]||(a[4]=e=>Ea("start")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[x("img",{src:ia.value.image,style:{width:"auto",height:"100%"}},null,8,fe),g(b(j),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:a[3]||(a[3]=V((e=>ia.value.image=""),["stop"]))},{default:A((()=>[g(b(K))])),_:1})]))])),_:1},8,["show"]),a[18]||(a[18]=x("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),x("div",be,[x("span",null,E(e.$t("knowledge.recom"))+"：",1),x("div",ye,[(c(!0),m(I,null,w(b(ua),(e=>(c(),m("img",{class:"labeImg",onClick:a=>function(e,a="start"){"start"==a?(ia.value.image=e.imageUrl,We.value=e.prompt+Ca.value,wa.value=e.prompt):(ia.value.image_tail=e.imageUrl,We.value=wa.value+e.prompt,Ca.value=e.prompt)}(e),src:e.imageUrl,alt:""},null,8,he)))),256))]),g(b(j),{size:"20px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:a[5]||(a[5]=e=>b(pa)(1))},{default:A((()=>[g(b(G))])),_:1})])]),h("",!0),h("",!0)])):h("",!0),x("div",ke,[x("div",_e,[x("div",Ee,E(e.$t("draw.chuangyiDesc")),1),x("div",Ie,[x("div",{class:"labeItem",onClick:Ba},[a[21]||(a[21]=x("img",{src:Q,alt:""},null,-1)),x("span",null,E(e.$t("draw.AIgenDesc")),1)]),x("div",{class:"labeItem",onClick:Ma},[a[22]||(a[22]=x("img",{src:R,alt:""},null,-1)),x("span",null,E(e.$t("homePage.tips")),1)])])]),x("div",we,[k(x("textarea",{"onUpdate:modelValue":a[10]||(a[10]=e=>We.value=e),style:{width:"100%",height:"112px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:e.$t("draw.textToImgExp")},null,8,Ce),[[N,We.value]]),x("div",Fe,[g(b(j),{size:"18px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:Fa},{default:A((()=>[g(b(W))])),_:1}),g(b(j),{size:"18px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:a[11]||(a[11]=e=>Ia())},{default:A((()=>[g(b(K))])),_:1})]),a[23]||(a[23]=x("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),x("div",Ae,[x("span",null,E(e.$t("knowledge.recom"))+"：",1),x("div",Te,[(c(!0),m(I,null,w(b(sa),(e=>(c(),m("div",{class:"labeItem",onClick:a=>Ia(e.descript)},E(e.name),9,$e)))),256))]),g(b(j),{size:"20px",color:"#767676",style:{"margin-left":"10px",cursor:"pointer"},onClick:b(na)},{default:A((()=>[g(b(G))])),_:1},8,["onClick"])])])]),g(b(B),{"arrow-placement":"right"},{default:A((()=>[g(b(M),{name:"1"},{header:A((()=>[g(b(ee),null,{default:A((()=>[F(E(e.$t("AIvideo.notDesiredPres")),1),x("span",je,E(e.$t("draw.notMust")),1)])),_:1})])),default:A((()=>[k(x("textarea",{"onUpdate:modelValue":a[12]||(a[12]=e=>ia.value.negative_prompt=e),style:{width:"100%",height:"140px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79] border border-[#E8E8E8] dark:border-[#292A2E]",placeholder:e.$t("AIvideo.notDescInput")},null,8,Ve),[[N,ia.value.negative_prompt]])])),_:1})])),_:1}),fa.value?(c(),m("div",De,[x("div",Ne,[x("div",Me,E(e.$t("AIvideo.yunjinType")),1)]),x("div",null,[g(b(y),{options:ya,onChange:oa})])])):h("",!0)])]),x("div",Be,[x("div",Ue,[g(b(y),{value:ia.value.aspect_ratio,"onUpdate:value":a[13]||(a[13]=e=>ia.value.aspect_ratio=e),options:ca.value},null,8,["value","options"])])]),x("div",Se,[ja.value&&ja.value.isVipUsed?(c(),m("img",ze)):h("",!0),g(b(U),{loading:b(He).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"64px","font-size":"15px","border-radius":"8px",padding:"12px 0","margin-top":"12px"},onClick:a[14]||(a[14]=e=>Aa())},{default:A((()=>[Va.value?(c(),m("span",Le,E(e.$t("draw.modelNotSet")),1)):b(Y).isLogin?ja.value&&ja.value.isVipFree&&H.value?(c(),m("span",Pe,E(e.$t("chat.vipFree")),1)):ja.value&&ja.value.remainCount&&H.value?(c(),m("span",Je,E(e.$t("draw.shenyu")+ja.value.remainCount+e.$t("draw.chiFree")),1)):ja.value?(c(),m("div",Ke,[x("span",null,E(e.$t("gpt.lijiGen")),1),a[25]||(a[25]=x("img",{src:Z,style:{margin:"0 5px 0 8px",transform:"translateY(-2px)"}},null,-1)),x("span",null,E(ja.value.useIntegrate),1)])):(c(),m("span",Ge,E(e.$t("draw.gen")),1)):(c(),m("span",Oe,E(e.$t("draw.beginGen")),1))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-c66d6be9"]]),We={style:{display:"flex"}},He=e({__name:"JMeng",setup(e){const a=o();function l(){a.value&&a.value.changeTypeIndex(1)}return(e,t)=>(c(),m("div",We,[g(Re,{onChangeTab:l}),g(Y,{ref_key:"mainRef",ref:a,title:"即梦",subType:"5"},null,512)]))}});export{He as default};
