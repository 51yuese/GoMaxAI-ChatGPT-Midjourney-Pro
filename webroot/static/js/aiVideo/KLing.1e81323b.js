import{e,k as l,p as a,r as t,b6 as i,g as o,J as s,dY as n,dZ as r,M as u,w as d,x as v,B as p,A as c,aK as m,D as g,z as x,Q as b,R as f,F as y,E as k,I as h,a3 as E,y as _,C,ap as F,a0 as w,bR as I,c8 as B,aq as T,aL as j,a6 as A,a7 as U,al as z,N,bI as S,bJ as V,a4 as M,am as D,aF as J,_ as L}from"../main-23bab8dd.js";import{_ as K,T as R,C as O}from"../aiVideoGou/aiVideoGou.7740b7b2.js";import{_ as P}from"../uploadImg/uploadImg.66d9b869.js";import{_ as G,a as W,S as Y}from"../AI2/AI2.a669895b.js";import{c as q,b as Q,_ as Z}from"../baiduThink/baiduThink.42c56234.js";import{N as H}from"../text/text.9e8e98e8.js";import{V as X}from"../VideoContentMain/VideoContentMain.00fdca01.js";import"../KLingIcon3/KLingIcon3.528c15f9.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.6ca3ead0.js";const $={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},ee={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},le={key:0},ae={style:{display:"flex","align-items":"center","margin-bottom":"6px",height:"66px"}},te={style:{width:"140px",position:"relative"},class:"customBox"},ie={key:0,class:"newModel"},oe={class:"custerSelect"},se=["onClick"],ne={class:"name"},re={key:0,class:"newModel"},ue={key:0,style:{"margin-bottom":"10px"}},de={style:{display:"flex","margin-bottom":"6px","justify-content":"space-between"}},ve={key:0,style:{display:"flex","align-items":"center"}},pe={style:{"margin-top":"20px"},class:"border border-[#E8E8E8] dark:border-[#292A2E]"},ce=["src"],me={class:"recomBox"},ge={class:"labeBox"},xe=["onClick","src"],be={key:0,style:{display:"flex","margin-bottom":"6px","margin-top":"20px"}},fe={key:1,class:"border border-[#E8E8E8] dark:border-[#292A2E]"},ye=["src"],ke={class:"recomBox"},he={class:"labeBox"},Ee=["onClick","src"],_e={style:{"margin-bottom":"16px"}},Ce={style:{width:"100%","border-radius":"6px"},class:"bg-[#FFF] dark:bg-[#17181A] border border-[#E8E8E8] dark:border-[#292A2E]"},Fe={style:{width:"100%","text-align":"right","padding-right":"12px","padding-bottom":"14.5px"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]"},we={class:"recomBox"},Ie={class:"labeBox"},Be=["onClick"],Te={key:1,style:{"margin-top":"20px"}},je={class:"flexSelect bg-[#F8F9F9] dark:bg-[#17181A]"},Ae={key:0,style:{width:"120px","margin-right":"10px"}},Ue={style:{width:"78px","margin-right":"10px"}},ze={style:{width:"82px","margin-right":"10px"}},Ne={style:{width:"156px"}},Se={class:"customSlider"},Ve={style:{padding:"0 90px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#17181A] border-t border-[#E8E8E8] dark:border-[#292A2E]"},Me={key:0},De={key:1},Je={key:2},Le={key:3},Ke={key:4,style:{display:"flex","align-items":"center"}},Re={key:5},Oe=L(e({__name:"KLingSidebar",emits:["changeTab"],setup(e,{emit:L}){const X=l(),Oe=a(),Pe=t(""),Ge=i("videoBase"),We=t(0),Ye=t(999);t(1);const qe=[{model:"kling-v1",mode:"std",duration:5}],Qe=[{model:"kling-v1-5"}],Ze=[{model:"kling-v1-6",selectType:0}],He=[{model:"kling-v1",mode:"std",duration:10},{model:"kling-v1",mode:"pro",duration:10},{model:"kling-v1-5",mode:"std",duration:5},{model:"kling-v1-5",mode:"std",duration:10},{model:"kling-v1-6",mode:"std",duration:5},{model:"kling-v1-6",mode:"std",duration:10}],Xe=L;t([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]);const $e=t({});function el(e){e?$e.value={type:e}:$e.value.type=e}const ll=t({model:"kling-v1-6",prompt:"",image:"",image_tail:"",negative_prompt:"",cfg_scale:.5,mode:"pro",aspect_ratio:"16:9",duration:"5",keyType:3});let al=t([]),tl=t([]),il=()=>{const e=[...tl.value].sort((()=>Math.random()-.5));al.value=e.slice(0,e.length>3?3:e.length)};I().then((e=>{var l,a;tl.value=null==(a=null==(l=e.data)?void 0:l.t2v)?void 0:a.recTags,il()}));let ol=t([]),sl=t([]),nl=t([]),rl=(e=1)=>{const l=[...nl.value].sort((()=>Math.random()-.5));1==e?ol.value=l.slice(0,l.length>5?5:l.length):sl.value=l.slice(0,l.length>5?5:l.length)};B().then((e=>{nl.value=e.data,rl(),rl(2)}));const ul=t([{label:"高性能模式",value:"std"},{label:"高品质模式",value:"pro"}]),dl=t([{label:"5S",value:"5"},{label:"10S",value:"10"}]),vl=t([{label:"1:1",value:"1:1"},{label:"16:9",value:"16:9"},{label:"9:16",value:"9:16"}]),pl=t([{label:"创意想象力：0",value:0},{label:"创意想象力：0.05",value:.05},{label:"创意想象力：0.1",value:.1},{label:"创意想象力：0.15",value:.15},{label:"创意想象力：0.2",value:.2},{label:"创意想象力：0.25",value:.25},{label:"创意想象力：0.3",value:.3},{label:"创意想象力：0.35",value:.35},{label:"创意想象力：0.4",value:.4},{label:"创意想象力：0.45",value:.45},{label:"创意想象力：0.5",value:.5},{label:"创意想象力：0.55",value:.55},{label:"创意想象力：0.6",value:.6},{label:"创意想象力：0.65",value:.65},{label:"创意想象力：0.7",value:.7},{label:"创意想象力：0.75",value:.75},{label:"创意想象力：0.8",value:.8},{label:"创意想象力：0.85",value:.85},{label:"创意想象力：0.9",value:.9},{label:"创意想象力：0.95",value:.95},{label:"创意想象力：1",value:1}]);let cl=t(!1);const ml=t([{label:"可灵 1.6",info:"生动的画面动态表现，指令响应更佳",value:"kling-v1-6"},{label:"可灵 1.5",info:"直出1080P高清视频，画面美感提升",value:"kling-v1-5"},{label:"可灵 1.0",info:"强大的可控性生成能力，视频细节丰富",value:"kling-v1"}]),gl=o((()=>0==We.value?ml.value.filter((e=>!Qe.map((e=>e.model)).includes(e.value))):ml.value)),xl=o((()=>qe.some((e=>e.model==ll.value.model&&e.mode==ll.value.mode&&e.duration==ll.value.duration))));let bl=t(!1);const fl=e=>{bl.value=e},yl=o((()=>!He.some((e=>e.model==ll.value.model&&e.mode==ll.value.mode&&e.duration==ll.value.duration)))),kl=o((()=>!Ze.some((e=>e.model==ll.value.model&&We.value==e.selectType)))),hl=[{label:"无",value:""},{label:"简单运镜",value:"must be simple"},{label:"自下而上",value:"down_back"},{label:"向前走",value:"forward_up"},{label:"右转前进或左转前进",value:"right_turn_forward or left_turn_forward"}];function El(e){We.value=e,0==e?s.emit("changeTypeIndexName","文生视频"):s.emit("changeTypeIndexName","图生视频")}async function _l(e){try{Ge.uploadFile().then((l=>{"start"==e?ll.value.image=l:ll.value.image_tail=l}))}catch(l){Oe.error(l.message)}}function Cl(e=""){Pe.value=e}let Fl=t(""),wl=t("");function Il(e,l="start"){"start"==l?(ll.value.image=e.imageUrl,Pe.value=e.prompt+wl.value,Fl.value=e.prompt):(ll.value.image_tail=e.imageUrl,Pe.value=Fl.value+e.prompt,wl.value=e.prompt)}function Bl(){Pe.value?(T({text:Pe.value}),Oe.success("复制成功")):Oe.error("无内容可复制")}function Tl(e=null){let l=e||jl();console.log(l,"param"),l&&Ge.create(e||jl,"kling").then((e=>{Al(),e&&Xe("changeTab",1)}))}function jl(){const e=JSON.parse(JSON.stringify(ll.value));let l="";if(1!=We.value||""!=e.image){if(null!=Pe.value&&""!=Pe.value)return l+=Pe.value,999!=Ye.value&&(l+=", "+Ge.videoData.value.styleData[Ye.value].dictName),e.prompt=l,$e.value.type&&(e.camera_control=$e.value),xl.value||delete e.camera_control,yl.value||delete e.image_tail,kl.value||(e.mode="std"),e;Oe.error("视频场景不能为空")}else Oe.error("开始帧图片不能为空")}function Al(){let e=JSON.parse(JSON.stringify(ll.value)),l="";l+=Pe.value,999!=Ye.value&&(l+=", "+Ge.videoData.value.styleData[Ye.value].dictName),e.prompt=l,$e.value.type&&(e.camera_control=$e.value),xl.value||delete e.camera_control,yl.value||delete e.image_tail,kl.value||(e.mode="std"),X.isLogin?n(e).then((e=>{200===e.code?(Ul.value=e.data,zl.value=!1):zl.value=!0})).catch((e=>{zl.value=!0})):r(e).then((e=>{Ul.value=e.data}))}s.on("copyVideoData",(e=>{console.log(e),ll.value={model:"kling-v1-6",prompt:"",image:"",image_tail:"",negative_prompt:"",cfg_scale:.5,mode:"pro",aspect_ratio:"16:9",duration:"5",keyType:3};for(const l in ll.value)for(const a in e)a==l&&e[a]&&(ll.value[l]=e[a]);Pe.value=e.prompt,e.image?We.value=1:We.value=0})),s.on("generateVideo",(e=>{Tl(e)}));const Ul=t({remainCount:0,freeCount:0,useIntegrate:0}),zl=t(!1);u((()=>ll.value),((e,l)=>{Al()}),{deep:!0,immediate:!0});const Nl=t(),Sl=t(),Vl=()=>{Nl.value.open()},Ml=()=>{Sl.value.thinks="",Sl.value.open()};function Dl(e){Pe.value+=e}return(e,l)=>(d(),v("div",$,[p(q,{ref_key:"inspirationRef",ref:Nl,onTextToImg:Dl,title:"AI生成描述",type:"mj"},null,512),p(Q,{ref_key:"thinkRef",ref:Sl,onTextToImg:Dl,title:"AI生成描述",type:"mj"},null,512),c("div",ee,[gl.value&&gl.value.length>1?(d(),v("div",le,[c("div",ae,[l[21]||(l[21]=c("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[18px]",style:{"margin-right":"12px"}},"可灵视频",-1)),c("div",te,[p(g(j),{value:ll.value.model,"onUpdate:value":l[0]||(l[0]=e=>ll.value.model=e),options:gl.value,onClick:l[1]||(l[1]=e=>m(cl)?cl.value=!g(cl):cl=!g(cl)),show:!1},null,8,["value","options"]),"kling-v1-6"==ll.value.model?(d(),v("div",ie,"NEW")):x("",!0),b(c("div",oe,[l[20]||(l[20]=c("p",null,"视频模型选择:",-1)),(d(!0),v(y,null,k(gl.value,(e=>(d(),v("div",{class:h(["selectItem",ll.value.model==e.value?"active":""]),onClick:l=>{ll.value.model=e.value,m(cl)?cl.value=!1:cl=!1}},[c("div",ne,[E(_(e.label)+" ",1),"可灵 1.6"==e.label?(d(),v("div",re,"NEW ")):x("",!0)]),c("span",null,_(e.info),1),l[19]||(l[19]=c("img",{src:K,alt:""},null,-1))],10,se)))),256))],512),[[f,g(cl)]])])])])):x("",!0),l[38]||(l[38]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]",style:{"margin-bottom":"16px"}},null,-1)),p(g(U),{class:"card-tabs","default-value":We.value,value:We.value,size:"large",animated:"","onUpdate:value":El},{default:C((()=>[p(g(A),{name:0,tab:"文生视频"}),p(g(A),{name:1,tab:"图生视频"})])),_:1},8,["default-value","value"]),c("div",null,[1==We.value?(d(),v("div",ue,[c("div",de,[l[23]||(l[23]=c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传首帧图片或视频"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")],-1)),yl.value?(d(),v("div",ve,[l[22]||(l[22]=c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[12px]",style:{"margin-right":"10px"}},"增加尾帧",-1)),p(g(z),{color:"#5f57fd",value:g(bl),"onUpdate:value":fl},null,8,["value"])])):x("",!0)]),c("div",pe,[""==ll.value.image?(d(),v("div",{key:0,onClick:l[2]||(l[2]=e=>_l("start")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[24]||(l[24]=[c("img",{src:P,alt:""},null,-1),c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传首帧图",-1)]))):(d(),v("div",{key:1,onClick:l[4]||(l[4]=e=>_l("start")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[c("img",{src:ll.value.image,style:{width:"auto",height:"100%"}},null,8,ce),p(g(N),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[3]||(l[3]=F((e=>ll.value.image=""),["stop"]))},{default:C((()=>[p(g(R))])),_:1})])),l[26]||(l[26]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",me,[l[25]||(l[25]=c("span",null,"推荐：",-1)),c("div",ge,[(d(!0),v(y,null,k(g(ol),(e=>(d(),v("img",{class:"labeImg",onClick:l=>Il(e),src:e.imageUrl,alt:""},null,8,xe)))),256))]),p(g(N),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[5]||(l[5]=e=>g(rl)(1))},{default:C((()=>[p(g(Y))])),_:1})])]),yl.value&&g(bl)?(d(),v("div",be,l[27]||(l[27]=[c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片或视频(非必传)"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")],-1)]))):x("",!0),yl.value&&g(bl)?(d(),v("div",fe,[""==ll.value.image_tail?(d(),v("div",{key:0,onClick:l[6]||(l[6]=e=>_l("end")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[28]||(l[28]=[c("img",{src:P,alt:""},null,-1),c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传结束帧图",-1)]))):(d(),v("div",{key:1,onClick:l[8]||(l[8]=e=>_l("end")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[c("img",{src:ll.value.image_tail,style:{width:"auto",height:"100%"}},null,8,ye),p(g(N),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[7]||(l[7]=F((e=>ll.value.image_tail=""),["stop"]))},{default:C((()=>[p(g(R))])),_:1})])),l[30]||(l[30]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",ke,[l[29]||(l[29]=c("span",null,"推荐：",-1)),c("div",he,[(d(!0),v(y,null,k(g(sl),(e=>(d(),v("img",{class:"labeImg",onClick:l=>Il(e,"end"),src:e.imageUrl,alt:""},null,8,Ee)))),256))]),p(g(N),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[9]||(l[9]=e=>g(rl)(2))},{default:C((()=>[p(g(Y))])),_:1})])])):x("",!0)])):x("",!0),c("div",_e,[c("div",{class:"recomBox",style:{"margin-bottom":"6px",padding:"0"}},[l[33]||(l[33]=c("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[14px]"},"创意描述",-1)),c("div",{class:"labeBox",style:{flex:"none"}},[c("div",{class:"labeItem",onClick:Ml},l[31]||(l[31]=[c("img",{src:G,alt:""},null,-1),c("span",null,"AI生成描述",-1)])),c("div",{class:"labeItem",onClick:Vl},l[32]||(l[32]=[c("img",{src:W,alt:""},null,-1),c("span",null,"提示词",-1)]))])]),c("div",Ce,[b(c("textarea",{"onUpdate:modelValue":l[10]||(l[10]=e=>Pe.value=e),style:{width:"100%",height:"112px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"描述你想生成的画面和动作。例如：美丽的油画少女，柔光落在她的脸上         "},null,512),[[w,Pe.value]]),c("div",Fe,[p(g(N),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:Bl},{default:C((()=>[p(g(O))])),_:1}),p(g(N),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[11]||(l[11]=e=>Cl())},{default:C((()=>[p(g(R))])),_:1})]),l[35]||(l[35]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",we,[l[34]||(l[34]=c("span",null,"推荐：",-1)),c("div",Ie,[(d(!0),v(y,null,k(g(al),(e=>(d(),v("div",{class:"labeItem",onClick:l=>Cl(e.descript)},_(e.name),9,Be)))),256))]),p(g(N),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:g(il)},{default:C((()=>[p(g(Y))])),_:1},8,["onClick"])])])]),p(g(V),{"arrow-placement":"right"},{default:C((()=>[p(g(S),{name:"1"},{header:C((()=>[p(g(H),null,{default:C((()=>l[36]||(l[36]=[E("不希望呈现的内容"),c("span",{style:{color:"#6F7478"}},"（非必填）",-1)]))),_:1})])),default:C((()=>[b(c("textarea",{"onUpdate:modelValue":l[12]||(l[12]=e=>ll.value.negative_prompt=e),style:{width:"100%",height:"140px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79] border border-[#E8E8E8] dark:border-[#292A2E]",placeholder:"写下你不希望在视频中呈现的内容。例如：动画、模糊、变形、毁容、低质量、拼贴、粒状、标志、抽象、插图、计算机生成、扭曲 …"},null,512),[[w,ll.value.negative_prompt]])])),_:1})])),_:1}),xl.value?(d(),v("div",Te,[l[37]||(l[37]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"运镜方式")],-1)),c("div",null,[p(g(j),{options:hl,onChange:el})])])):x("",!0)])]),c("div",je,[kl.value?(d(),v("div",Ae,[p(g(j),{value:ll.value.mode,"onUpdate:value":l[13]||(l[13]=e=>ll.value.mode=e),options:ul.value},null,8,["value","options"])])):x("",!0),c("div",Ue,[p(g(j),{value:ll.value.duration,"onUpdate:value":l[14]||(l[14]=e=>ll.value.duration=e),options:dl.value},null,8,["value","options"])]),c("div",ze,[p(g(j),{value:ll.value.aspect_ratio,"onUpdate:value":l[15]||(l[15]=e=>ll.value.aspect_ratio=e),options:vl.value},null,8,["value","options"])]),p(g(D),{trigger:"click"},{trigger:C((()=>[c("div",Ne,[p(g(j),{value:ll.value.cfg_scale,"onUpdate:value":l[16]||(l[16]=e=>ll.value.cfg_scale=e),options:pl.value,show:!1},null,8,["value","options"])])])),default:C((()=>[c("div",Se,[l[39]||(l[39]=c("span",null,"想象力",-1)),p(g(M),{style:{flex:"1"},value:ll.value.cfg_scale,"onUpdate:value":l[17]||(l[17]=e=>ll.value.cfg_scale=e),step:.05,max:1,min:0},null,8,["value"])])])),_:1})]),c("div",Ve,[p(g(J),{loading:g(Ge).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"8px",padding:"12px 0","margin-top":"12px"},onClick:l[18]||(l[18]=e=>Tl())},{default:C((()=>[zl.value?(d(),v("span",Me,"模型未配置")):g(X).isLogin?Ul.value&&Ul.value.isVipFree?(d(),v("span",Je,"会员免费")):Ul.value&&Ul.value.remainCount?(d(),v("span",Le,"剩余"+_(Ul.value.remainCount)+"次免费",1)):Ul.value?(d(),v("div",Ke,[l[40]||(l[40]=c("span",null,"立即生成",-1)),l[41]||(l[41]=c("img",{src:Z,style:{margin:"0 5px 0 8px",transform:"translateY(-2px)"}},null,-1)),c("span",null,_(Ul.value.useIntegrate),1)])):(d(),v("span",Re,"生成")):(d(),v("span",De,"开始生成"))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-d599bdeb"]]),Pe={style:{display:"flex"}},Ge=e({__name:"KLing",setup(e){const l=t();function a(){l.value&&l.value.changeTypeIndex(1)}return(e,t)=>(d(),v("div",Pe,[p(Oe,{onChangeTab:a}),p(X,{ref_key:"mainRef",ref:l,title:"可灵",subType:"3"},null,512)]))}});export{Ge as default};
