import{e,g as l,k as a,p as t,r as i,b3 as o,I as s,dQ as r,dR as n,L as d,w as u,x as v,C as p,B as m,aG as c,y as g,A as x,P as b,Q as f,F as y,E as k,a1 as _,a3 as h,z as E,D as C,al as F,$ as j,bY as I,b$ as w,an as B,aH as A,a7 as T,a8 as N,N as z,bO as V,bP as M,aC as S,_ as D}from"../main-bf8e7d49.js";import{_ as U,T as J,C as L}from"../aiVideoGou/aiVideoGou.62aded3f.js";import{_ as O}from"../uploadImg/uploadImg.66d9b869.js";import{_ as P,a as R,S as G}from"../AI2/AI2.5b310847.js";import{c as W,b as Y,_ as K}from"../baiduThink/baiduThink.42dddcca.js";import{N as Q}from"../text/text.a53de645.js";import{V as $}from"../VideoContentMain/VideoContentMain.4004f4ae.js";import"../KLingIcon3/KLingIcon3.528c15f9.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.2a2fe636.js";const H={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},X={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},Z={style:{display:"flex","align-items":"center","margin-bottom":"6px",height:"66px"}},q={style:{width:"140px",position:"relative"},class:"customBox"},ee={key:0,class:"newModel"},le={class:"custerSelect"},ae=["onClick"],te={class:"name"},ie={key:0,class:"newModel"},oe={key:0,style:{"margin-bottom":"10px"}},se={style:{"margin-top":"20px"},class:"border border-[#E8E8E8] dark:border-[#292A2E]"},re=["src"],ne={class:"recomBox"},de={class:"labeBox"},ue=["onClick","src"],ve={key:0,style:{display:"flex","margin-bottom":"6px","margin-top":"20px"}},pe={key:1,class:"border border-[#E8E8E8] dark:border-[#292A2E]"},me=["src"],ce={class:"recomBox"},ge={class:"labeBox"},xe=["onClick","src"],be={style:{"margin-bottom":"16px"}},fe={style:{width:"100%","border-radius":"6px"},class:"bg-[#FFF] dark:bg-[#17181A] border border-[#E8E8E8] dark:border-[#292A2E]"},ye={style:{width:"100%","text-align":"right","padding-right":"12px","padding-bottom":"14.5px"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]"},ke={class:"recomBox"},_e={class:"labeBox"},he=["onClick"],Ee={key:1,style:{"margin-top":"20px"}},Ce={class:"flexSelect bg-[#F8F9F9] dark:bg-[#17181A]"},Fe={style:{width:"82px","margin-right":"10px"}},je={style:{padding:"0 90px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#17181A] border-t border-[#E8E8E8] dark:border-[#292A2E]"},Ie={key:0},we={key:1},Be={key:2},Ae={key:3},Te={key:4,style:{display:"flex","align-items":"center"}},Ne={key:5},ze=D(e({__name:"JMengSidebar",emits:["changeTab"],setup(e,{emit:D}){const $=l((()=>1===ze.userInfo.lifetimeVip||ze.userInfo.vipExpire&&new Date(ze.userInfo.vipExpire)>new Date)),ze=a(),Ve=t(),Me=i(""),Se=o("videoBase"),De=i(0),Ue=i(999);i(1);const Je=[{model:"kling-v1",mode:"std",duration:5}],Le=[{model:"kling-v1-5"}],Oe=[{model:"kling-v1-6",selectType:0}],Pe=[{model:"kling-v1",mode:"std",duration:10},{model:"kling-v1",mode:"pro",duration:10},{model:"kling-v1-5",mode:"std",duration:5},{model:"kling-v1-5",mode:"std",duration:10},{model:"kling-v1-6",mode:"std",duration:5},{model:"kling-v1-6",mode:"std",duration:10}],Re=D;i([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]);const Ge=i({});function We(e){e?Ge.value={type:e}:Ge.value.type=e}const Ye=i({model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5});let Ke=i([]),Qe=i([]),$e=()=>{const e=[...Qe.value].sort((()=>Math.random()-.5));Ke.value=e.slice(0,e.length>3?3:e.length)};I().then((e=>{var l,a;Qe.value=null==(a=null==(l=e.data)?void 0:l.t2v)?void 0:a.recTags,$e()}));let He=i([]),Xe=i([]),Ze=i([]),qe=(e=1)=>{const l=[...Ze.value].sort((()=>Math.random()-.5));1==e?He.value=l.slice(0,l.length>5?5:l.length):Xe.value=l.slice(0,l.length>5?5:l.length)};w().then((e=>{Ze.value=e.data,qe(),qe(2)})),i([{label:"高性能模式",value:"std"},{label:"高品质模式",value:"pro"}]),i([{label:"5S",value:"5"},{label:"10S",value:"10"}]);const el=i([{label:"16:9",value:"16:9"},{label:"9:16",value:"9:16"},{label:"1:1",value:"1:1"},{label:"4:3",value:"4:3"},{label:"3:4",value:"3:4"},{label:"21:9",value:"21:9"}]);i([{label:"创意想象力：0",value:0},{label:"创意想象力：0.05",value:.05},{label:"创意想象力：0.1",value:.1},{label:"创意想象力：0.15",value:.15},{label:"创意想象力：0.2",value:.2},{label:"创意想象力：0.25",value:.25},{label:"创意想象力：0.3",value:.3},{label:"创意想象力：0.35",value:.35},{label:"创意想象力：0.4",value:.4},{label:"创意想象力：0.45",value:.45},{label:"创意想象力：0.5",value:.5},{label:"创意想象力：0.55",value:.55},{label:"创意想象力：0.6",value:.6},{label:"创意想象力：0.65",value:.65},{label:"创意想象力：0.7",value:.7},{label:"创意想象力：0.75",value:.75},{label:"创意想象力：0.8",value:.8},{label:"创意想象力：0.85",value:.85},{label:"创意想象力：0.9",value:.9},{label:"创意想象力：0.95",value:.95},{label:"创意想象力：1",value:1}]);let ll=i(!1);const al=i([{label:"即梦 3.0",info:"生动的画面动态表现，指令响应更佳",value:"jimeng_vgfm_t2v_l20"}]);l((()=>0==De.value?al.value.filter((e=>!Le.map((e=>e.model)).includes(e.value))):al.value));const tl=l((()=>Je.some((e=>e.model==Ye.value.model&&e.mode==Ye.value.mode&&e.duration==Ye.value.duration))));let il=i(!1);const ol=l((()=>!Pe.some((e=>e.model==Ye.value.model&&e.mode==Ye.value.mode&&e.duration==Ye.value.duration)))),sl=l((()=>!Oe.some((e=>e.model==Ye.value.model&&De.value==e.selectType)))),rl=[{label:"无",value:""},{label:"简单运镜",value:"must be simple"},{label:"自下而上",value:"down_back"},{label:"向前走",value:"forward_up"},{label:"右转前进或左转前进",value:"right_turn_forward or left_turn_forward"}];function nl(e){De.value=e,0==e?(Ye.value.model="jimeng_vgfm_t2v_l20",al.value=[{label:"即梦 3.0",info:"生动的画面动态表现，指令响应更佳",value:"jimeng_vgfm_t2v_l20"}],s.emit("changeTypeIndexName","文生视频")):(Ye.value.model="jimeng_vgfm_i2v_l20",al.value=[{label:"即梦 3.0",info:"生动的画面动态表现，指令响应更佳",value:"jimeng_vgfm_i2v_l20"}],s.emit("changeTypeIndexName","图生视频"))}async function dl(e){try{Se.uploadFile().then((l=>{"start"==e?Ye.value.image=l:Ye.value.image_tail=l}))}catch(l){Ve.error(l.message)}}function ul(e=""){Me.value=e}let vl=i(""),pl=i("");function ml(e,l="start"){"start"==l?(Ye.value.image=e.imageUrl,Me.value=e.prompt+pl.value,vl.value=e.prompt):(Ye.value.image_tail=e.imageUrl,Me.value=vl.value+e.prompt,pl.value=e.prompt)}function cl(){Me.value?(B({text:Me.value}),Ve.success("复制成功")):Ve.error("无内容可复制")}function gl(e=null){let l=e||xl();console.log(l,"param"),l&&Se.create(e||xl,"jmeng").then((e=>{bl(),e&&Re("changeTab",1)}))}function xl(){const e=JSON.parse(JSON.stringify(Ye.value));let l="";if(1==De.value){if(""==e.image)return void Ve.error("开始帧图片不能为空");e.image_urls=[e.image]}else delete e.image_urls;if(null!=Me.value&&""!=Me.value)return l+=Me.value,999!=Ue.value&&(l+=", "+Se.videoData.value.styleData[Ue.value].dictName),e.prompt=l,Ge.value.type&&(e.camera_control=Ge.value),tl.value||delete e.camera_control,ol.value?e.image_urls.push(e.image_tail):delete e.image_tail,e;Ve.error("视频场景不能为空")}function bl(){let e=JSON.parse(JSON.stringify(Ye.value)),l="";l+=Me.value,999!=Ue.value&&(l+=", "+Se.videoData.value.styleData[Ue.value].dictName),e.prompt=l,Ge.value.type&&(e.camera_control=Ge.value),tl.value||delete e.camera_control,ol.value||delete e.image_tail,sl.value||(e.mode="std"),ze.isLogin?r(e).then((e=>{console.log(e.data,"fetchVideoModelFree"),200===e.code?(fl.value=e.data,yl.value=!1):yl.value=!0})).catch((e=>{yl.value=!0})):n(e).then((e=>{fl.value=e.data}))}s.on("copyVideoData",(e=>{console.log(e),Ye.value={model:"jimeng_vgfm_t2v_l20",prompt:"",image:"",image_tail:"",negative_prompt:"",aspect_ratio:"16:9",keyType:5};for(const l in Ye.value)for(const a in e)a==l&&e[a]&&(Ye.value[l]=e[a]);Me.value=e.prompt,e.image?De.value=1:De.value=0})),s.on("generateVideo",(e=>{gl(e)}));const fl=i({remainCount:0,freeCount:0,useIntegrate:0}),yl=i(!1);d((()=>Ye.value),((e,l)=>{bl()}),{deep:!0,immediate:!0});const kl=i(),_l=i(),hl=()=>{kl.value.open()},El=()=>{_l.value.thinks="",_l.value.open()};function Cl(e){Me.value+=e}return(e,l)=>(u(),v("div",H,[p(W,{ref_key:"inspirationRef",ref:kl,onTextToImg:Cl,title:"AI生成描述",type:"mj"},null,512),p(Y,{ref_key:"thinkRef",ref:_l,onTextToImg:Cl,title:"AI生成描述",type:"mj"},null,512),m("div",X,[m("div",null,[m("div",Z,[l[17]||(l[17]=m("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[18px]",style:{"margin-right":"12px"}},"即梦视频",-1)),m("div",q,[p(g(A),{value:Ye.value.model,"onUpdate:value":l[0]||(l[0]=e=>Ye.value.model=e),options:al.value,onClick:l[1]||(l[1]=e=>c(ll)?ll.value=!g(ll):ll=!g(ll)),show:!1},null,8,["value","options"]),"jimeng_vgfm_i2v_l20"==Ye.value.model||"jimeng_vgfm_t2v_l20"==Ye.value.model?(u(),v("div",ee,"NEW")):x("",!0),b(m("div",le,[l[16]||(l[16]=m("p",null,"视频模型选择:",-1)),(u(!0),v(y,null,k(al.value,(e=>(u(),v("div",{class:_(["selectItem",Ye.value.model==e.value?"active":""]),onClick:l=>{Ye.value.model=e.value,c(ll)?ll.value=!1:ll=!1}},[m("div",te,[h(E(e.label)+" ",1),"即梦 1.6"==e.label?(u(),v("div",ie,"NEW ")):x("",!0)]),m("span",null,E(e.info),1),l[15]||(l[15]=m("img",{src:U,alt:""},null,-1))],10,ae)))),256))],512),[[f,g(ll)]])])])]),l[33]||(l[33]=m("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]",style:{"margin-bottom":"16px"}},null,-1)),p(g(N),{class:"card-tabs","default-value":De.value,value:De.value,size:"large",animated:"","onUpdate:value":nl},{default:C((()=>[p(g(T),{name:0,tab:"文生视频"}),p(g(T),{name:1,tab:"图生视频"})])),_:1},8,["default-value","value"]),m("div",null,[1==De.value?(u(),v("div",oe,[l[25]||(l[25]=m("div",{style:{display:"flex","margin-bottom":"6px","justify-content":"space-between"}},[m("div",null,[m("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传首帧图片或视频"),m("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),m("div",se,[""==Ye.value.image?(u(),v("div",{key:0,onClick:l[2]||(l[2]=e=>dl("start")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[18]||(l[18]=[m("img",{src:O,alt:""},null,-1),m("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传首帧图",-1)]))):(u(),v("div",{key:1,onClick:l[4]||(l[4]=e=>dl("start")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[m("img",{src:Ye.value.image,style:{width:"auto",height:"100%"}},null,8,re),p(g(z),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[3]||(l[3]=F((e=>Ye.value.image=""),["stop"]))},{default:C((()=>[p(g(J))])),_:1})])),l[20]||(l[20]=m("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),m("div",ne,[l[19]||(l[19]=m("span",null,"推荐：",-1)),m("div",de,[(u(!0),v(y,null,k(g(He),(e=>(u(),v("img",{class:"labeImg",onClick:l=>ml(e),src:e.imageUrl,alt:""},null,8,ue)))),256))]),p(g(z),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[5]||(l[5]=e=>g(qe)(1))},{default:C((()=>[p(g(G))])),_:1})])]),ol.value&&g(il)?(u(),v("div",ve,l[21]||(l[21]=[m("div",null,[m("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片或视频(非必传)"),m("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")],-1)]))):x("",!0),ol.value&&g(il)?(u(),v("div",pe,[""==Ye.value.image_tail?(u(),v("div",{key:0,onClick:l[6]||(l[6]=e=>dl("end")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[22]||(l[22]=[m("img",{src:O,alt:""},null,-1),m("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传结束帧图",-1)]))):(u(),v("div",{key:1,onClick:l[8]||(l[8]=e=>dl("end")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[m("img",{src:Ye.value.image_tail,style:{width:"auto",height:"100%"}},null,8,me),p(g(z),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[7]||(l[7]=F((e=>Ye.value.image_tail=""),["stop"]))},{default:C((()=>[p(g(J))])),_:1})])),l[24]||(l[24]=m("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),m("div",ce,[l[23]||(l[23]=m("span",null,"推荐：",-1)),m("div",ge,[(u(!0),v(y,null,k(g(Xe),(e=>(u(),v("img",{class:"labeImg",onClick:l=>ml(e,"end"),src:e.imageUrl,alt:""},null,8,xe)))),256))]),p(g(z),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[9]||(l[9]=e=>g(qe)(2))},{default:C((()=>[p(g(G))])),_:1})])])):x("",!0)])):x("",!0),m("div",be,[m("div",{class:"recomBox",style:{"margin-bottom":"6px",padding:"0"}},[l[28]||(l[28]=m("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[14px]"},"创意描述",-1)),m("div",{class:"labeBox",style:{flex:"none"}},[m("div",{class:"labeItem",onClick:El},l[26]||(l[26]=[m("img",{src:P,alt:""},null,-1),m("span",null,"AI生成描述",-1)])),m("div",{class:"labeItem",onClick:hl},l[27]||(l[27]=[m("img",{src:R,alt:""},null,-1),m("span",null,"提示词",-1)]))])]),m("div",fe,[b(m("textarea",{"onUpdate:modelValue":l[10]||(l[10]=e=>Me.value=e),style:{width:"100%",height:"112px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"描述你想生成的画面和动作。例如：美丽的油画少女，柔光落在她的脸上         "},null,512),[[j,Me.value]]),m("div",ye,[p(g(z),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:cl},{default:C((()=>[p(g(L))])),_:1}),p(g(z),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[11]||(l[11]=e=>ul())},{default:C((()=>[p(g(J))])),_:1})]),l[30]||(l[30]=m("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),m("div",ke,[l[29]||(l[29]=m("span",null,"推荐：",-1)),m("div",_e,[(u(!0),v(y,null,k(g(Ke),(e=>(u(),v("div",{class:"labeItem",onClick:l=>ul(e.descript)},E(e.name),9,he)))),256))]),p(g(z),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:g($e)},{default:C((()=>[p(g(G))])),_:1},8,["onClick"])])])]),p(g(M),{"arrow-placement":"right"},{default:C((()=>[p(g(V),{name:"1"},{header:C((()=>[p(g(Q),null,{default:C((()=>l[31]||(l[31]=[h("不希望呈现的内容"),m("span",{style:{color:"#6F7478"}},"（非必填）",-1)]))),_:1,__:[31]})])),default:C((()=>[b(m("textarea",{"onUpdate:modelValue":l[12]||(l[12]=e=>Ye.value.negative_prompt=e),style:{width:"100%",height:"140px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79] border border-[#E8E8E8] dark:border-[#292A2E]",placeholder:"写下你不希望在视频中呈现的内容。例如：动画、模糊、变形、毁容、低质量、拼贴、粒状、标志、抽象、插图、计算机生成、扭曲 …"},null,512),[[j,Ye.value.negative_prompt]])])),_:1})])),_:1}),tl.value?(u(),v("div",Ee,[l[32]||(l[32]=m("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[m("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"运镜方式")],-1)),m("div",null,[p(g(A),{options:rl,onChange:We})])])):x("",!0)])]),m("div",Ce,[m("div",Fe,[p(g(A),{value:Ye.value.aspect_ratio,"onUpdate:value":l[13]||(l[13]=e=>Ye.value.aspect_ratio=e),options:el.value},null,8,["value","options"])])]),m("div",je,[p(g(S),{loading:g(Se).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"8px",padding:"12px 0","margin-top":"12px"},onClick:l[14]||(l[14]=e=>gl())},{default:C((()=>[yl.value?(u(),v("span",Ie,"模型未配置")):g(ze).isLogin?fl.value&&fl.value.isVipFree&&$.value?(u(),v("span",Be,"会员免费")):fl.value&&fl.value.remainCount&&$.value?(u(),v("span",Ae,"剩余"+E(fl.value.remainCount)+"次免费",1)):fl.value?(u(),v("div",Te,[l[34]||(l[34]=m("span",null,"立即生成",-1)),l[35]||(l[35]=m("img",{src:K,style:{margin:"0 5px 0 8px",transform:"translateY(-2px)"}},null,-1)),m("span",null,E(fl.value.useIntegrate),1)])):(u(),v("span",Ne,"生成")):(u(),v("span",we,"开始生成"))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-40d1eabc"]]),Ve={style:{display:"flex"}},Me=e({__name:"JMeng",setup(e){const l=i();function a(){l.value&&l.value.changeTypeIndex(1)}return(e,t)=>(u(),v("div",Ve,[p(ze,{onChangeTab:a}),p($,{ref_key:"mainRef",ref:l,title:"即梦",subType:"5"},null,512)]))}});export{Me as default};
