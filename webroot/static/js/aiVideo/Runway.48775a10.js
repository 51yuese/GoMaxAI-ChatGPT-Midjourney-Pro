import{e,k as t,b3 as a,p as r,r as d,g as i,L as s,w as l,x as n,B as o,a1 as p,C as x,y as u,A as v,P as g,$ as c,F as m,E as b,G as E,z as y,D as k,dQ as F,dR as f,ah as h,aH as _,aC as C,_ as w}from"../main-bf8e7d49.js";import{_ as z}from"../video_create/video_create.4f3c17fd.js";import{V as D}from"../VideoContentMain/VideoContentMain.4004f4ae.js";import"../KLingIcon3/KLingIcon3.528c15f9.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.2a2fe636.js";const O={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},A={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},I={style:{display:"flex","align-items":"stretch",height:"40px",border:"1px solid #464646","border-radius":"10px"}},V={style:{"margin-top":"12px"}},j={key:0},B={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},T={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},R=["src"],L={style:{"margin-top":"10px","padding-bottom":"10px"},class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},S={style:{display:"flex","align-items":"center"}},M={style:{"margin-top":"20px"}},N={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},P={style:{"margin-top":"20px"}},U={class:"size_card"},G=["onClick"],J={style:{"margin-top":"20px"}},K={class:"size_card new_size_card"},H={key:1,style:{"margin-top":"20px"}},Q={style:{padding:"0 30px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},W={key:0},$={key:1},q={key:2},X={key:3},Y={key:4},Z={key:5},ee=w(e({__name:"RunwaySidebar",emits:["generateInfo","changeTab"],setup(e,{emit:w}){const D=t(),ee=a("videoBase"),te=r(),ae=d(""),re=d(0),de=d(999),ie=d(1),se=w,le=i((()=>1===D.userInfo.lifetimeVip||D.userInfo.vipExpire&&new Date(D.userInfo.vipExpire)>new Date)),ne=d([{id:2,width:"20px",height:"12px",value:"16:9",size:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16",size:"9:16"}]),oe=d([{label:"gen2",value:"gen2"},{label:"gen3",value:"gen3"}]),pe=d({prompt:"",ratio:"16:9",model:"gen3",image:"",last_image:"",keyType:2,modelOptions:{seconds:5,image_as_end_frame:!1,flip:!1}});function xe(e){re.value=e}function ue(){ae.value=""}function ve(){ee.create(ce,"runway").then((e=>{be(),e&&se("changeTab",1)}))}function ge(e){pe.value.modelOptions.seconds=e}function ce(){const e=JSON.parse(JSON.stringify(pe.value));let t="";return 1==re.value&&""==e.modelOptions.init_image?te.error("开始帧图片不能为空"):null==ae.value||""==ae.value?te.error("视频场景不能为空"):(t+=ae.value,999!=de.value&&(t+=", "+ee.videoData.value.styleData[de.value].dictName),e.prompt=t,e.image||delete e.image,e)}const me=({focused:e,checked:t})=>{const a={};return t&&(a.background="linear-gradient(124deg, #957DF4 7%, #3C69E7 88%)"),e&&(a.boxShadow="0 0 0 2px #957df480"),a};function be(){D.isLogin?F({model:pe.value.model,keyType:2,duration:pe.value.modelOptions.seconds}).then((e=>{200===e.code?(Ee.value=e.data,ye.value=!1):ye.value=!0})).catch((e=>{ye.value=!0})):f(pe.value).then((e=>{Ee.value=e.data}))}const Ee=d({remainCount:0,freeCount:0,useIntegrate:0}),ye=d(!1);return s((()=>pe.value),((e,t)=>{be()}),{deep:!0,immediate:!0}),(e,t)=>(l(),n("div",O,[o("div",A,[o("div",I,[o("div",{class:p([0==re.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[0]||(t[0]=e=>xe(0))},"文生视频 ",2),o("div",{class:p([1==re.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[1]||(t[1]=e=>xe(1))},"图生视频 ",2)]),o("div",V,[t[15]||(t[15]=o("div",{style:{border:"1px dashed #464646",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},[o("p",null,"功能介绍"),o("div",{style:{"font-size":"13px"}}," Runway 推出新一代视频生成模型 Gen3 Alpha，具备稳定的光影效果和高质量视频输出，更多高级设置即将开放。 ")],-1)),1==re.value?(l(),n("div",j,[o("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[2]||(t[2]=e=>async function(){try{ee.uploadFile().then((e=>{pe.value.image=e}))}catch(e){te.error(e.message)}}())},[t[9]||(t[9]=o("div",{style:{display:"flex","margin-bottom":"6px"}},[o("div",null,[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传开始帧图片"),o("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==pe.value.image?(l(),n("div",B,t[8]||(t[8]=[o("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),o("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),o("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(l(),n("div",T,[o("img",{src:pe.value.image,style:{width:"100%",height:"100%"}},null,8,R)]))]),o("div",L,[o("div",S,[t[10]||(t[10]=o("div",{class:"text-[#1E1F1F] dark:text-[#EEEEF0] text-[12px]",style:{"margin-right":"10px"}}," 以图片作为尾帧 ",-1)),o("div",null,[x(u(h),{modelValue:pe.value.modelOptions.image_as_end_frame,"onUpdate:modelValue":t[3]||(t[3]=e=>pe.value.modelOptions.image_as_end_frame=e),size:"small","rail-style":me},null,8,["modelValue"])])])])])):v("",!0),o("div",M,[t[11]||(t[11]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"描述你的视频场景")],-1)),o("div",N,[g(o("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>ae.value=e),style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"请输入创意描述，包含内容主体+动作/场景，一键生成视频"},null,512),[[c,ae.value]]),o("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:ue}," 清空 ")])]),o("div",P,[t[12]||(t[12]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"尺寸选择")],-1)),o("div",U,[(l(!0),n(m,null,b(ne.value,((e,t)=>(l(),n("div",{class:p(ie.value==t?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),key:e.id,onClick:a=>function(e,t){pe.value.ratio=t,ie.value=e}(t,e.size)},[o("div",{style:E([{width:e.width,height:e.height},{"border-radius":"2px","margin-bottom":"4px"}]),class:p(ie.value==t?"bg-[#FFFFFF]  border border-transparent dark:border-transparent":"bg-[#fff]  border border-transparent dark:border-[#46484F]")},null,6),o("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]",ie.value==t?"text-white":""])},y(e.value),3)],10,G)))),128))])]),o("div",J,[t[13]||(t[13]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频生成时长")],-1)),o("div",K,[o("div",{class:p(5==pe.value.modelOptions.seconds?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[5]||(t[5]=e=>ge(5))},[o("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]",5==pe.value.modelOptions.seconds?"text-white":""])},"5秒",2)],2),o("div",{class:p(10==pe.value.modelOptions.seconds?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[6]||(t[6]=e=>ge(10))},[o("div",{class:p(["text-[12px] dark:text-[#EEEEF0] text-[#333333]",10==pe.value.modelOptions.seconds?"text-white":""])},"10秒",2)],2)])]),oe.value&&oe.value.length>1?(l(),n("div",H,[t[14]||(t[14]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频模型")],-1)),o("div",null,[x(u(_),{value:pe.value.model,"onUpdate:value":t[7]||(t[7]=e=>pe.value.model=e),options:oe.value},null,8,["value","options"])])])):v("",!0)])]),o("div",Q,[x(u(C),{loading:u(ee).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:ve},{default:k((()=>[t[16]||(t[16]=o("img",{src:z,style:{"margin-right":"5px"}},null,-1)),ye.value?(l(),n("span",W,"模型未配置")):u(D).isLogin?Ee.value&&Ee.value.isVipFree&&le.value?(l(),n("span",q,"会员免费")):Ee.value&&Ee.value.remainCount&&le.value?(l(),n("span",X,"剩余"+y(Ee.value.remainCount)+"次免费",1)):Ee.value?(l(),n("span",Y,y(Ee.value.useIntegrate)+"积分/次",1)):(l(),n("span",Z,"生成")):(l(),n("span",$,"开始生成"))])),_:1,__:[16]},8,["loading"])])]))}}),[["__scopeId","data-v-080404f8"]]),te={style:{display:"flex"}},ae=e({__name:"Runway",setup(e){const t=d();function a(){t.value&&t.value.changeTypeIndex(1)}return(e,r)=>(l(),n("div",te,[x(ee,{onChangeTab:a}),x(D,{ref_key:"mainRef",ref:t,title:"Runway",subType:"2"},null,512)]))}});export{ae as default};
