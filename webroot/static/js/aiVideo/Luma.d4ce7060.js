import{j as e,e as t,g as a,p as i,b3 as l,r,k as d,aP as s,L as o,w as n,x as p,B as u,a2 as v,z as c,A as x,P as g,a0 as m,F as y,E,y as f,C as b,aI as k,D as h,aD as _,$ as F,dO as C,dP as I,_ as $}from"../main-b114ff11.js";import{_ as w,V as A}from"../VideoContentMain/VideoContentMain.a90505db.js";import{_ as T}from"../video_create/video_create.4f3c17fd.js";import"../KLingIcon3/KLingIcon3.6acffd30.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.5446b9cc.js";const B={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},j={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},V={style:{display:"flex","align-items":"stretch",height:"40px",border:"1px solid #E0E2E9","border-radius":"10px"}},S={style:{"margin-top":"12px"}},D={style:{border:"1px dashed #E0E2E9",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},L={style:{"font-size":"13px"}},M={key:0},N={style:{display:"flex","margin-bottom":"6px"}},P={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},U={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},O={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},z={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},K={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},J={class:"text-[12px] text-[#3e6ae7]"},G={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},R=["src"],q={style:{display:"flex","margin-bottom":"6px"}},H={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Q={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},W={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},X={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},Y={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},Z={class:"text-[12px] text-[#3e6ae7]"},ee={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},te=["src"],ae={style:{"margin-top":"20px"}},ie={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},le={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},re={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},de=["placeholder"],se={style:{"margin-top":"20px"}},oe={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},ne={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},pe={class:"style_card"},ue=["onClick"],ve=["src"],ce={key:1,style:{"margin-top":"20px"}},xe={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},ge={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},me={style:{padding:"0 20px",position:"absolute",bottom:"20px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},ye={key:0,class:"vipIcon",src:w,alt:""},Ee={key:0,style:{color:"#fff"}},fe={key:1,style:{color:"#fff"}},be={key:2,style:{color:"#fff"}},ke={key:3,style:{color:"#fff"}},he={key:4,style:{color:"#fff"}},_e={key:5,style:{color:"#fff"}},Fe=$(t({__name:"SubSidebar",emits:["generateInfo","changeTab"],setup(t,{emit:$}){const w=a((()=>1===Ie.userInfo.lifetimeVip||Ie.userInfo.vipExpire&&new Date(Ie.userInfo.vipExpire)>new Date)),A=i(),Fe=l("videoBase"),Ce=r(""),Ie=d(),$e=a((()=>Ie.userInfo.vipLeavelId));let we=r([]);s().then((e=>{we.value=e.data}));const Ae=r();var Te;(Te={code:"AIVideo"},e({url:"/cm/getConfig",data:Te})).then((e=>{Ae.value=e.data.value.list.find((e=>1==e.keyType)).model.map((e=>({label:e,value:e}))),Se.value.model=Ae.value[0].value}));const Be=r(0),je=r(999),Ve=$,Se=r({prompt:"",options:{parentMessageId:0},systemMessage:"",cusromPrompt:!0,model:"luma-video",expand_prompt:!0,aspect_ratio:"16:9",image_url:"",image_end_url:"",keyType:1});function De(e){Be.value=e}async function Le(e){try{Fe.uploadFile().then((t=>{"start"==e?Se.value.image_url=t:Se.value.image_end_url=t}))}catch(t){A.error(t.message)}}function Me(e){je.value=e}function Ne(){Ce.value=""}function Pe(){if(ze.value.isVipUsed&&-1===ze.value.userType.indexOf($e.value)){let e=ze.value.userType.split(","),t="";return e.forEach(((a,i)=>{t+=we.value.filter((e=>e.id==a))[0].dictName,i<e.length-1&&(t+=",")})),void A.error(F("digitalMan.vipUse1")+t+F("digitalMan.vipUse2"))}Fe.create(Ue).then((e=>{Oe(),e&&Ve("changeTab",1)}))}function Ue(){const e=JSON.parse(JSON.stringify(Se.value));let t="";return 1==Be.value&&""==e.image_url?A.error(F("AIvideo.img1Nodata")):null==Ce.value||""==Ce.value?A.error(F("AIvideo.videoSceneNodata")):(t+=Ce.value,999!=je.value&&(t+=" ,风格："+Fe.videoData.value.styleData[je.value].dictName),e.prompt=t,e)}function Oe(){Ie.isLogin?C(Se.value).then((e=>{200===e.code?(ze.value=e.data,Ke.value=!1):Ke.value=!0})).catch((e=>{Ke.value=!0})):I(Se.value).then((e=>{ze.value=e.data}))}const ze=r({remainCount:0,freeCount:0,useIntegrate:0}),Ke=r(!1);return o((()=>Se.value),((e,t)=>{Oe()}),{deep:!0,immediate:!0}),(e,t)=>(n(),p("div",B,[u("div",j,[u("div",V,[u("div",{class:v([0==Be.value?"type_tab selected_type_tab bg-gradient-to-r from-[#574FFE] to-[#726AFB]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[0]||(t[0]=e=>De(0))},c(e.$t("AIvideo.textToVideo")),3),u("div",{class:v([1==Be.value?"type_tab selected_type_tab bg-gradient-to-r from-[#574FFE] to-[#726AFB] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[1]||(t[1]=e=>De(1))},c(e.$t("AIvideo.imgToVideo")),3)]),u("div",S,[u("div",D,[u("p",null,c(e.$t("draw.featureIntrod")),1),u("div",L,c(e.$t("AIvideo.LumaText1")),1)]),1==Be.value?(n(),p("div",M,[u("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[2]||(t[2]=e=>Le("start"))},[u("div",N,[u("div",null,[u("div",P,c(e.$t("AIvideo.uploadStarImg")),1),u("div",U,c(e.$t("draw.PuploadImgText1")),1)])]),""==Se.value.image_url?(n(),p("div",O,[u("div",z,c(e.$t("draw.cankaoImgTuo")),1),u("div",K,c(e.$t("draw.huo")),1),u("div",J,c(e.$t("digitalMan.clickUpload")),1)])):(n(),p("div",G,[u("img",{src:Se.value.image_url,style:{width:"100%",height:"100%"}},null,8,R)]))]),u("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[3]||(t[3]=e=>Le("end"))},[u("div",q,[u("div",null,[u("div",H,c(e.$t("AIvideo.uploadEndImg")),1),u("div",Q,c(e.$t("draw.PuploadImgText1")),1)])]),""==Se.value.image_end_url?(n(),p("div",W,[u("div",X,c(e.$t("draw.cankaoImgTuo")),1),u("div",Y,c(e.$t("draw.huo")),1),u("div",Z,c(e.$t("digitalMan.clickUpload")),1)])):(n(),p("div",ee,[u("img",{src:Se.value.image_end_url,style:{width:"100%",height:"100%"}},null,8,te)]))])])):x("",!0),u("div",ae,[u("div",ie,[u("div",le,c(e.$t("AIvideo.videoScene")),1)]),u("div",re,[g(u("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>Ce.value=e),style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:e.$t("AIvideo.videoSceneText1")},null,8,de),[[m,Ce.value]]),u("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:Ne},c(e.$t("common.clear")),1)])]),u("div",se,[u("div",oe,[u("div",ne,c(e.$t("draw.styleSelect")),1)]),u("div",pe,[u("div",{class:v(999==je.value?"style_item selected":"def_style_item"),onClick:t[5]||(t[5]=e=>Me(999))},[t[7]||(t[7]=u("img",{class:"style_img",src:"/static/png/noStyle-fc3e20db.png"},null,-1)),u("div",{class:v(999==je.value?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")},c(e.$t("AIvideo.unspecified")),3)],2),(n(!0),p(y,null,E(f(Fe).videoData.value.styleData,((e,t)=>(n(),p("div",{class:v(je.value==t?"style_item selected ":"def_style_item"),key:t,onClick:e=>Me(t)},[u("img",{class:"style_img",src:e.dictValue},null,8,ve),u("div",{class:v(je.value==t?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")},c(e.dictName),3)],10,ue)))),128))])]),Ae.value&&Ae.value.length>1?(n(),p("div",ce,[u("div",xe,[u("div",ge,c(e.$t("AIvideo.videoModel")),1)]),u("div",null,[b(f(k),{value:Se.value.model,"onUpdate:value":t[6]||(t[6]=e=>Se.value.model=e),options:Ae.value},null,8,["value","options"])])])):x("",!0)])]),u("div",me,[ze.value&&ze.value.isVipUsed?(n(),p("img",ye)):x("",!0),b(f(_),{loading:f(Fe).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"64px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:Pe},{default:h((()=>[t[8]||(t[8]=u("img",{src:T,style:{"margin-right":"5px"}},null,-1)),Ke.value?(n(),p("span",Ee,c(e.$t("draw.modelNotSet")),1)):f(Ie).isLogin?ze.value&&ze.value.isVipFree&&w.value?(n(),p("span",be,c(e.$t("chat.vipFree")),1)):ze.value&&ze.value.remainCount&&w.value?(n(),p("span",ke,c(e.$t("draw.shenyu")+ze.value.remainCount+e.$t("draw.chiFree")),1)):ze.value?(n(),p("span",he,c(ze.value.useIntegrate+e.$t("chat.pointsChi")),1)):(n(),p("span",_e,c(e.$t("draw.gen")),1)):(n(),p("span",fe,c(e.$t("draw.beginGen")),1))])),_:1,__:[8]},8,["loading"])])]))}}),[["__scopeId","data-v-d37a95f4"]]),Ce={style:{display:"flex"}},Ie=t({__name:"Luma",setup(e){const t=r();function a(){t.value&&t.value.changeTypeIndex(1)}return(e,i)=>(n(),p("div",Ce,[b(Fe,{onChangeTab:a}),b(A,{ref_key:"mainRef",ref:t,title:"Luma",subType:"1"},null,512)]))}});export{Ie as default};
