import{e,R as t,W as a,r,i,j as d,N as l,O as s,P as o,a8 as n,a0 as p,F as x,an as v,$ as g,a1 as u,a5 as c,bw as b,a3 as m,a4 as E,H as y,bx as k,a2 as F,aL as h,ad as f}from"../main-33bcbc1f.js";import{_}from"../video_create/video_create.4f3c17fd.js";import{g as C,V as w}from"../VideoContentMain/VideoContentMain.75c0f249.js";import"../index/index.c042e923.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.372e0cee.js";const z={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},j={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},A={style:{display:"flex","align-items":"stretch",height:"40px",border:"1px solid #464646","border-radius":"10px"}},D={style:{"margin-top":"12px"}},B={key:0},I={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},T={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},V=["src"],N={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},L={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},M=["src"],P={style:{"margin-top":"20px"}},U={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},K={style:{"margin-top":"20px"}},O={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},S={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},J={style:{"flex-grow":"1"}},R={style:{"margin-top":"20px"}},G={class:"size_card new_size_card"},H={style:{"margin-top":"20px"}},W={class:"size_card"},$=["onClick"],q={style:{"margin-top":"20px"}},Q={key:1,style:{"margin-top":"20px"}},X={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px",height:"58px","border-radius":"10px",background:"#383838",padding:"0 10px"}},Y={style:{width:"34px",height:"20px","border-radius":"6px","text-align":"center","line-height":"20px"}},Z={style:{"flex-grow":"1"}},ee={style:{"margin-top":"20px"}},te={class:"size_card new_size_card"},ae={key:2,style:{"margin-top":"20px"}},re={style:{padding:"0 30px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},ie={key:0},de={key:1},le={key:2},se={key:3},oe=f(e({__name:"KLingSidebar",emits:["changeTab"],setup(e,{emit:f}){const w=t(),oe=a(),ne=r(""),pe=i("videoBase"),xe=r(0),ve=r(999),ge=r(1),ue=f,ce=r([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]),be=r({});function me(e){e?be.value={type:e,config:{horizontal:0,vertical:0,pan:0,tilt:0,roll:0,zoom:0}}:be.value.type=e}const Ee=r({model:"kling-video_std_5",prompt:"",image:"",image_tail:"",negative_prompt:"",cfg_scale:.5,mode:"std",aspect_ratio:"",duration:"5"}),ye=r();C({code:"AIVideo"}).then((e=>{ye.value=e.data.value.list.find((e=>3==e.keyType)).model.map((e=>({label:e,value:e}))),console.log(ye),Ee.value.model=ye.value[0].value}));const ke=[{label:"无",value:""},{label:"水平运镜",value:"horizontal"},{label:"垂直运镜",value:"vertical"},{label:"水平摇镜",value:"pan"},{label:"旋转运镜",value:"roll"},{label:"变焦",value:"zoom"}];function Fe(e){xe.value=e}async function he(e){try{pe.uploadFile().then((t=>{"start"==e?Ee.value.image=t:Ee.value.image_tail=t}))}catch(t){oe.error(t.message)}}function fe(){ne.value=""}function _e(){pe.create(we,"kling").then((e=>{e&&ue("changeTab",1)}))}function Ce(e){Ee.value.duration=e}function we(){const e=JSON.parse(JSON.stringify(Ee.value));let t="";return 1==xe.value&&""==e.image?oe.error("开始帧图片不能为空"):null==ne.value||""==ne.value?oe.error("视频场景不能为空"):(t+=ne.value,999!=ve.value&&(t+=", "+pe.videoData.value.styleData[ve.value].dictName),e.prompt=t,be.value.type&&(e.camera_control=be.value),e)}const ze=d((()=>w.videoData?w.videoData.find((e=>3==e.keyType&&e.model==Ee.value.model)):{remainCount:0,freeCount:0,useIntegrate:0}));return(e,t)=>(l(),s("div",z,[o("div",j,[o("div",A,[o("div",{class:n([0==xe.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[0]||(t[0]=e=>Fe(0))},"文生视频 ",2),o("div",{class:n([1==xe.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[1]||(t[1]=e=>Fe(1))},"图生视频 ",2)]),o("div",D,[t[23]||(t[23]=o("div",{style:{border:"1px dashed #464646",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},[o("p",null,"功能介绍"),o("div",{style:{"font-size":"13px"}}," KLING AI 视频模型，超强想象力，高画质、长时长、功能多。 ")],-1)),1==xe.value?(l(),s("div",B,[o("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[2]||(t[2]=e=>he("start"))},[t[13]||(t[13]=o("div",{style:{display:"flex","margin-bottom":"6px"}},[o("div",null,[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传开始帧图片"),o("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==Ee.value.image?(l(),s("div",I,t[12]||(t[12]=[o("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),o("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),o("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(l(),s("div",T,[o("img",{src:Ee.value.image,style:{width:"100%",height:"100%"}},null,8,V)]))]),o("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[3]||(t[3]=e=>he("end"))},[t[15]||(t[15]=o("div",{style:{display:"flex","margin-bottom":"6px"}},[o("div",null,[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片(非必传)"),o("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==Ee.value.image_tail?(l(),s("div",N,t[14]||(t[14]=[o("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),o("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),o("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(l(),s("div",L,[o("img",{src:Ee.value.image_tail,style:{width:"100%",height:"100%"}},null,8,M)]))])])):p("",!0),o("div",P,[t[16]||(t[16]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"描述你的视频场景")],-1)),o("div",U,[x(o("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>ne.value=e),style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"请输入创意描述，包含内容主体+动作/场景，一键生成视频"},null,512),[[v,ne.value]]),o("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:fe}," 清空 ")])]),o("div",K,[t[17]||(t[17]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"创意想象力")],-1)),o("div",O,[o("div",S,g(Ee.value.cfg_scale),1),o("div",J,[u(c(b),{value:Ee.value.cfg_scale,"onUpdate:value":t[5]||(t[5]=e=>Ee.value.cfg_scale=e),step:.05,max:1,min:0},null,8,["value"])])])]),o("div",R,[t[18]||(t[18]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"生成模式")],-1)),o("div",G,[o("div",{class:n("std"==Ee.value.mode?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[6]||(t[6]=e=>Ee.value.mode="std")},[o("div",{class:n(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","std"==Ee.value.mode?"text-white":""])},"高性能",2)],2),o("div",{class:n("pro"==Ee.value.mode?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[7]||(t[7]=e=>Ee.value.mode="pro")},[o("div",{class:n(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","pro"==Ee.value.mode?"text-white":""])},"高表现",2)],2)])]),o("div",H,[t[19]||(t[19]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"尺寸选择")],-1)),o("div",W,[(l(!0),s(m,null,E(ce.value,((e,t)=>(l(),s("div",{class:n(ge.value==t?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),key:e.id,onClick:a=>function(e,t){Ee.value.aspect_ratio=t,ge.value=e}(t,e.value)},[o("div",{style:y([{width:e.width,height:e.height},{"border-radius":"2px","margin-bottom":"4px"}]),class:n(ge.value==t?"bg-[#FFFFFF]  border border-transparent dark:border-transparent":"bg-[#fff]  border border-transparent dark:border-[#46484F]")},null,6),o("div",{class:n(["text-[12px] dark:text-[#EEEEF0] text-[#333333]",ge.value==t?"text-white":""])},g(e.value),3)],10,$)))),128))])]),o("div",q,[t[20]||(t[20]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"运镜方式")],-1)),o("div",null,[u(c(k),{options:ke,onChange:me})])]),be.value.type?(l(),s("div",Q,[o("div",X,[o("div",Y,g(be.value.config[be.value.type]),1),o("div",Z,[u(c(b),{value:be.value.config[be.value.type],"onUpdate:value":t[8]||(t[8]=e=>be.value.config[be.value.type]=e),step:.1,min:-10,max:10},null,8,["value"])])])])):p("",!0),o("div",ee,[t[21]||(t[21]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频生成时长")],-1)),o("div",te,[o("div",{class:n("5"==Ee.value.duration?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[9]||(t[9]=e=>Ce("5"))},[o("div",{class:n(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","5"==Ee.value.duration?"text-white":""])},"5秒",2)],2),o("div",{class:n("10"==Ee.value.duration?"size_item selected dark:bg-[#383838] bg-gradient-to-b from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent border dark:border-[#1E6953] border-transparent":"size_item dark:bg-[#383838] bg-[#FFF] border dark:border-[#292A2E] border-transparent"),onClick:t[10]||(t[10]=e=>Ce("10"))},[o("div",{class:n(["text-[12px] dark:text-[#EEEEF0] text-[#333333]","10"==Ee.value.duration?"text-white":""])},"10秒",2)],2)])]),ye.value&&ye.value.length>1?(l(),s("div",ae,[t[22]||(t[22]=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[o("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频模型")],-1)),o("div",null,[u(c(k),{value:Ee.value.model,"onUpdate:value":t[11]||(t[11]=e=>Ee.value.model=e),options:ye.value},null,8,["value","options"])])])):p("",!0)])]),o("div",re,[u(c(h),{loading:c(pe).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:_e},{default:F((()=>[t[24]||(t[24]=o("img",{src:_,style:{"margin-right":"5px"}},null,-1)),ze.value&&ze.value.isVipFree?(l(),s("span",ie,"会员免费")):ze.value&&ze.value.remainCount?(l(),s("span",de,"剩余"+g(ze.value.remainCount)+"次免费",1)):ze.value?(l(),s("span",le,g(ze.value.useIntegrate)+"积分/次",1)):(l(),s("span",se,"生成"))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-9d5cb000"]]),ne={style:{display:"flex"}},pe=e({__name:"KLing",setup(e){const t=r();function a(){t.value&&t.value.changeTypeIndex(1)}return(e,r)=>(l(),s("div",ne,[u(oe,{onChangeTab:a}),u(w,{ref_key:"mainRef",ref:t,title:"可灵",subType:"3"},null,512)]))}});export{pe as default};
