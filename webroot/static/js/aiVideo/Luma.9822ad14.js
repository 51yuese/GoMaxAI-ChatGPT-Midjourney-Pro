import{e,W as t,i as a,r as l,R as s,j as r,N as i,O as d,P as n,a8 as o,a0 as p,F as x,an as u,a3 as c,a4 as v,$ as g,a5 as m,a1 as y,bx as E,a2 as b,aL as f,ad as k}from"../main-33bcbc1f.js";import{_}from"../video_create/video_create.4f3c17fd.js";import{g as C,V as F}from"../VideoContentMain/VideoContentMain.75c0f249.js";import"../index/index.c042e923.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.372e0cee.js";const h={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},j={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},B={style:{display:"flex","align-items":"stretch",height:"40px",border:"1px solid #464646","border-radius":"10px"}},D={style:{"margin-top":"12px"}},w={key:0},A={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},I={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},T=["src"],V={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},M={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},N=["src"],P={style:{"margin-top":"20px"}},S={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},L={style:{"margin-top":"20px"}},z={class:"style_card"},O=["onClick"],J=["src"],R={key:1,style:{"margin-top":"20px"}},U={style:{padding:"0 30px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},W={key:0},$={key:1},q={key:2},G={key:3},H=k(e({__name:"SubSidebar",emits:["generateInfo","changeTab"],setup(e,{emit:k}){const F=t(),H=a("videoBase"),K=l(""),Q=s(),X=l();C({code:"AIVideo"}).then((e=>{X.value=e.data.value.list.find((e=>1==e.keyType)).model.map((e=>({label:e,value:e}))),te.value.model=X.value[0].value}));const Y=l(0),Z=l(999),ee=k,te=l({prompt:"",options:{parentMessageId:0},systemMessage:"",cusromPrompt:!0,model:"luma-video",expand_prompt:!0,aspect_ratio:"16:9",image_url:"",image_end_url:""});function ae(e){Y.value=e}async function le(e){try{H.uploadFile().then((t=>{"start"==e?te.value.image_url=t:te.value.image_end_url=t}))}catch(t){F.error(t.message)}}function se(e){Z.value=e}function re(){K.value=""}function ie(){H.create(de).then((e=>{e&&ee("changeTab",1)}))}function de(){const e=JSON.parse(JSON.stringify(te.value));let t="";return 1==Y.value&&""==e.image_url?F.error("开始帧图片不能为空"):null==K.value||""==K.value?F.error("视频场景不能为空"):(t+=K.value,999!=Z.value&&(t+=" ,风格："+H.videoData.value.styleData[Z.value].dictName),e.prompt=t,e)}const ne=r((()=>Q.videoData?Q.videoData.find((e=>1==e.keyType&&e.model==te.value.model)):{remainCount:0,freeCount:0,useIntegrate:0}));return(e,t)=>(i(),d("div",h,[n("div",j,[n("div",B,[n("div",{class:o([0==Y.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[0]||(t[0]=e=>ae(0))},"文生视频 ",2),n("div",{class:o([1==Y.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[1]||(t[1]=e=>ae(1))},"图生视频 ",2)]),n("div",D,[t[15]||(t[15]=n("div",{style:{border:"1px dashed #464646",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},[n("p",null,"功能介绍"),n("div",{style:{"font-size":"13px"}}," 全新 AI 视频 Luma 重磅上线，生成效果实现大幅度提升，视频质量更高清。 ")],-1)),1==Y.value?(i(),d("div",w,[n("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[2]||(t[2]=e=>le("start"))},[t[8]||(t[8]=n("div",{style:{display:"flex","margin-bottom":"6px"}},[n("div",null,[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传开始帧图片"),n("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==te.value.image_url?(i(),d("div",A,t[7]||(t[7]=[n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),n("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(i(),d("div",I,[n("img",{src:te.value.image_url,style:{width:"100%",height:"100%"}},null,8,T)]))]),n("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[3]||(t[3]=e=>le("end"))},[t[10]||(t[10]=n("div",{style:{display:"flex","margin-bottom":"6px"}},[n("div",null,[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片(非必传)"),n("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==te.value.image_end_url?(i(),d("div",V,t[9]||(t[9]=[n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),n("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),n("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(i(),d("div",M,[n("img",{src:te.value.image_end_url,style:{width:"100%",height:"100%"}},null,8,N)]))])])):p("",!0),n("div",P,[t[11]||(t[11]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"描述你的视频场景")],-1)),n("div",S,[x(n("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>K.value=e),style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"请输入创意描述，包含内容主体+动作/场景，一键生成视频"},null,512),[[u,K.value]]),n("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:re}," 清空 ")])]),n("div",L,[t[13]||(t[13]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"风格选择")],-1)),n("div",z,[n("div",{class:o(999==Z.value?"style_item selected":"def_style_item"),onClick:t[5]||(t[5]=e=>se(999))},[t[12]||(t[12]=n("img",{class:"style_img",src:"/static/png/noStyle-fc3e20db.png"},null,-1)),n("div",{class:o(999==Z.value?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")}," 未指定",2)],2),(i(!0),d(c,null,v(m(H).videoData.value.styleData,((e,t)=>(i(),d("div",{class:o(Z.value==t?"style_item selected ":"def_style_item"),key:t,onClick:e=>se(t)},[n("img",{class:"style_img",src:e.dictValue},null,8,J),n("div",{class:o(Z.value==t?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")},g(e.dictName),3)],10,O)))),128))])]),X.value&&X.value.length>1?(i(),d("div",R,[t[14]||(t[14]=n("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[n("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频模型")],-1)),n("div",null,[y(m(E),{value:te.value.model,"onUpdate:value":t[6]||(t[6]=e=>te.value.model=e),options:X.value},null,8,["value","options"])])])):p("",!0)])]),n("div",U,[y(m(f),{loading:m(H).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:ie},{default:b((()=>[t[16]||(t[16]=n("img",{src:_,style:{"margin-right":"5px"}},null,-1)),ne.value&&ne.value.isVipFree?(i(),d("span",W,"会员免费")):ne.value&&ne.value.remainCount?(i(),d("span",$,"剩余"+g(ne.value.remainCount)+"次免费",1)):ne.value?(i(),d("span",q,g(ne.value.useIntegrate)+"积分/次",1)):(i(),d("span",G,"生成"))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-90090e5a"]]),K={style:{display:"flex"}},Q=e({__name:"Luma",setup(e){const t=l();function a(){t.value&&t.value.changeTypeIndex(1)}return(e,l)=>(i(),d("div",K,[y(H,{onChangeTab:a}),y(F,{ref_key:"mainRef",ref:t,title:"Luma",subType:"1"},null,512)]))}});export{Q as default};
