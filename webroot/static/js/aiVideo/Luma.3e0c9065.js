import{j as e,e as t,g as a,p as l,b3 as s,r as i,k as r,L as d,w as n,x as o,B as p,a1 as u,A as x,P as v,$ as c,F as g,E as m,z as y,y as E,C as b,D as f,dQ as k,dR as _,aH as C,aC as h,_ as F}from"../main-bf8e7d49.js";import{_ as j}from"../video_create/video_create.4f3c17fd.js";import{V as I}from"../VideoContentMain/VideoContentMain.4004f4ae.js";import"../KLingIcon3/KLingIcon3.528c15f9.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.2a2fe636.js";const B={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},w={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},D={style:{display:"flex","align-items":"stretch",height:"40px",border:"1px solid #464646","border-radius":"10px"}},A={style:{"margin-top":"12px"}},V={key:0},L={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},T={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},M=["src"],S={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},z={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},N=["src"],P={style:{"margin-top":"20px"}},J={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},K={style:{"margin-top":"20px"}},O={class:"style_card"},R=["onClick"],U=["src"],H={key:1,style:{"margin-top":"20px"}},Q={style:{padding:"0 30px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},W={key:0},$={key:1},q={key:2},G={key:3},X={key:4},Y={key:5},Z=F(t({__name:"SubSidebar",emits:["generateInfo","changeTab"],setup(t,{emit:F}){const I=a((()=>1===ae.userInfo.lifetimeVip||ae.userInfo.vipExpire&&new Date(ae.userInfo.vipExpire)>new Date)),Z=l(),ee=s("videoBase"),te=i(""),ae=r(),le=i();var se;(se={code:"AIVideo"},e({url:"/cm/getConfig",data:se})).then((e=>{le.value=e.data.value.list.find((e=>1==e.keyType)).model.map((e=>({label:e,value:e}))),ne.value.model=le.value[0].value}));const ie=i(0),re=i(999),de=F,ne=i({prompt:"",options:{parentMessageId:0},systemMessage:"",cusromPrompt:!0,model:"luma-video",expand_prompt:!0,aspect_ratio:"16:9",image_url:"",image_end_url:"",keyType:1});function oe(e){ie.value=e}async function pe(e){try{ee.uploadFile().then((t=>{"start"==e?ne.value.image_url=t:ne.value.image_end_url=t}))}catch(t){Z.error(t.message)}}function ue(e){re.value=e}function xe(){te.value=""}function ve(){ee.create(ce).then((e=>{ge(),e&&de("changeTab",1)}))}function ce(){const e=JSON.parse(JSON.stringify(ne.value));let t="";return 1==ie.value&&""==e.image_url?Z.error("开始帧图片不能为空"):null==te.value||""==te.value?Z.error("视频场景不能为空"):(t+=te.value,999!=re.value&&(t+=" ,风格："+ee.videoData.value.styleData[re.value].dictName),e.prompt=t,e)}function ge(){ae.isLogin?k(ne.value).then((e=>{200===e.code?(me.value=e.data,ye.value=!1):ye.value=!0})).catch((e=>{ye.value=!0})):_(ne.value).then((e=>{me.value=e.data}))}const me=i({remainCount:0,freeCount:0,useIntegrate:0}),ye=i(!1);return d((()=>ne.value),((e,t)=>{ge()}),{deep:!0,immediate:!0}),(e,t)=>(n(),o("div",B,[p("div",w,[p("div",D,[p("div",{class:u([0==ie.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[0]||(t[0]=e=>oe(0))},"文生视频 ",2),p("div",{class:u([1==ie.value?"type_tab selected_type_tab bg-gradient-to-r from-[#957DF4] to-[#3C69E7] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[1]||(t[1]=e=>oe(1))},"图生视频 ",2)]),p("div",A,[t[15]||(t[15]=p("div",{style:{border:"1px dashed #464646",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},[p("p",null,"功能介绍"),p("div",{style:{"font-size":"13px"}}," 全新 AI 视频 Luma 重磅上线，生成效果实现大幅度提升，视频质量更高清。 ")],-1)),1==ie.value?(n(),o("div",V,[p("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[2]||(t[2]=e=>pe("start"))},[t[8]||(t[8]=p("div",{style:{display:"flex","margin-bottom":"6px"}},[p("div",null,[p("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传开始帧图片"),p("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==ne.value.image_url?(n(),o("div",L,t[7]||(t[7]=[p("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),p("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),p("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(n(),o("div",T,[p("img",{src:ne.value.image_url,style:{width:"100%",height:"100%"}},null,8,M)]))]),p("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[3]||(t[3]=e=>pe("end"))},[t[10]||(t[10]=p("div",{style:{display:"flex","margin-bottom":"6px"}},[p("div",null,[p("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片(非必传)"),p("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")])],-1)),""==ne.value.image_end_url?(n(),o("div",S,t[9]||(t[9]=[p("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"将参考图拖到此处",-1),p("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},"或",-1),p("div",{class:"text-[12px] text-[#3e6ae7]"},"点击上传",-1)]))):(n(),o("div",z,[p("img",{src:ne.value.image_end_url,style:{width:"100%",height:"100%"}},null,8,N)]))])])):x("",!0),p("div",P,[t[11]||(t[11]=p("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[p("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"描述你的视频场景")],-1)),p("div",J,[v(p("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>te.value=e),style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"请输入创意描述，包含内容主体+动作/场景，一键生成视频"},null,512),[[c,te.value]]),p("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:xe}," 清空 ")])]),p("div",K,[t[13]||(t[13]=p("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[p("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"风格选择")],-1)),p("div",O,[p("div",{class:u(999==re.value?"style_item selected":"def_style_item"),onClick:t[5]||(t[5]=e=>ue(999))},[t[12]||(t[12]=p("img",{class:"style_img",src:"/static/png/noStyle-fc3e20db.png"},null,-1)),p("div",{class:u(999==re.value?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")}," 未指定",2)],2),(n(!0),o(g,null,m(E(ee).videoData.value.styleData,((e,t)=>(n(),o("div",{class:u(re.value==t?"style_item selected ":"def_style_item"),key:t,onClick:e=>ue(t)},[p("img",{class:"style_img",src:e.dictValue},null,8,U),p("div",{class:u(re.value==t?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")},y(e.dictName),3)],10,R)))),128))])]),le.value&&le.value.length>1?(n(),o("div",H,[t[14]||(t[14]=p("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[p("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"视频模型")],-1)),p("div",null,[b(E(C),{value:ne.value.model,"onUpdate:value":t[6]||(t[6]=e=>ne.value.model=e),options:le.value},null,8,["value","options"])])])):x("",!0)])]),p("div",Q,[b(E(h),{loading:E(ee).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#957DF4] to-[#3C69E7]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:ve},{default:f((()=>[t[16]||(t[16]=p("img",{src:j,style:{"margin-right":"5px"}},null,-1)),ye.value?(n(),o("span",W,"模型未配置")):E(ae).isLogin?me.value&&me.value.isVipFree&&I.value?(n(),o("span",q,"会员免费")):me.value&&me.value.remainCount&&I.value?(n(),o("span",G,"剩余"+y(me.value.remainCount)+"次免费",1)):me.value?(n(),o("span",X,y(me.value.useIntegrate)+"积分/次",1)):(n(),o("span",Y,"生成")):(n(),o("span",$,"开始生成"))])),_:1,__:[16]},8,["loading"])])]))}}),[["__scopeId","data-v-3320f491"]]),ee={style:{display:"flex"}},te=t({__name:"Luma",setup(e){const t=i();function a(){t.value&&t.value.changeTypeIndex(1)}return(e,l)=>(n(),o("div",ee,[b(Z,{onChangeTab:a}),b(I,{ref_key:"mainRef",ref:t,title:"Luma",subType:"1"},null,512)]))}});export{te as default};
