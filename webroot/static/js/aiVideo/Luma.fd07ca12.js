import{j as e,e as t,g as a,p as l,b2 as i,r as s,k as d,aP as r,aQ as o,L as n,w as v,x as u,B as p,C as c,aH as x,y as g,aI as m,A as y,P as f,Q as E,z as b,F as h,E as k,a2 as _,a4 as F,a0 as C,D as I,aD as w,$,dM as A,dN as T,_ as M}from"../main-a0b53047.js";import{_ as B}from"../aiVideoGou/aiVideoGou.56a8a6eb.js";import{_ as V,V as j}from"../VideoContentMain/VideoContentMain.5f9ff8d2.js";import{_ as S}from"../video_create/video_create.4f3c17fd.js";import"../KLingIcon3/KLingIcon3.6acffd30.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.a6d67891.js";const L={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},N={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},D={key:0},U={style:{display:"flex","align-items":"center","margin-bottom":"6px",height:"66px"}},P={style:{width:"140px",position:"relative"},class:"customBox"},O={key:0,class:"newModel"},z={class:"custerSelect"},G=["onClick"],K={class:"name"},Q={key:0,class:"newModel"},J={style:{display:"flex","align-items":"stretch",height:"40px",border:"1px solid #E0E2E9","border-radius":"10px"}},W={style:{"margin-top":"12px"}},H={style:{border:"1px dashed #E0E2E9",color:"#9E9E9E","border-radius":"10px",padding:"10px"}},R={style:{"font-size":"13px"}},q={key:0},X={style:{display:"flex","margin-bottom":"6px"}},Y={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Z={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},ee={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},te={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},ae={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},le={class:"text-[12px] text-[#3e6ae7]"},ie={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},se=["src"],de={style:{display:"flex","margin-bottom":"6px"}},re={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},oe={class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},ne={key:0,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},ve={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},ue={class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]"},pe={class:"text-[12px] text-[#3e6ae7]"},ce={key:1,style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},xe=["src"],ge={style:{"margin-top":"20px"}},me={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},ye={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},fe={style:{width:"100%",height:"94px",padding:"8px","border-radius":"8px"},class:"bg-[#FFF] dark:bg-[#111113] border border-[#E8E8E8] dark:border-[#292A2E]"},Ee=["placeholder"],be={style:{"margin-top":"20px"}},he={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},ke={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},_e={class:"style_card"},Fe=["onClick"],Ce=["src"],Ie={key:1,style:{"margin-top":"20px"}},we={style:{display:"flex","align-items":"center","margin-bottom":"6px"}},$e={class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},Ae={style:{padding:"0 20px",position:"absolute",bottom:"20px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#222325] border-t border-[#E8E8E8] dark:border-[#292A2E]"},Te={key:0,class:"vipIcon",src:V,alt:""},Me={key:0,style:{color:"#fff"}},Be={key:1,style:{color:"#fff"}},Ve={key:2,style:{color:"#fff"}},je={key:3,style:{color:"#fff"}},Se={key:4,style:{color:"#fff"}},Le={key:5,style:{color:"#fff"}},Ne=M(t({__name:"SubSidebar",emits:["generateInfo","changeTab"],setup(t,{emit:M}){const V=a((()=>1===Ue.userInfo.lifetimeVip||Ue.userInfo.vipExpire&&new Date(Ue.userInfo.vipExpire)>new Date)),j=l(),Ne=i("videoBase"),De=s(""),Ue=d(),Pe=a((()=>Ue.userInfo.vipLeavelId));let Oe=s([]);var ze;r().then((e=>{Oe.value=e.data})),(ze={code:"AIVideo"},e({url:"/cm/getConfig",data:ze})).then((e=>{We.value=e.data.value.list.find((e=>1==e.keyType)).model.map((e=>({label:e,value:e}))),Re.value.model=We.value[0].value}));const Ge=s(0),Ke=s(999),Qe=M;let Je=s(!1);const We=s([]);o({modelType:"video",keyType:1}).then((e=>{console.log(e.data,"fetchQueryModelsListAPIMaps"),e.data&&e.data.rows&&e.data.rows[0].children&&(We.value=e.data.rows[0].children)}));const He=a((()=>0==Ge.value&&We.value.length>0?(console.log(We.value.filter((e=>e.t2v)),"文生视频videoOptions.value"),Re.value.model=We.value.filter((e=>e.t2v))[0].value,We.value.filter((e=>e.t2v))):1==Ge.value&&We.value.length>0?(console.log(We.value.filter((e=>e.i2v)),"图生视频videoOptions.value"),Re.value.model=We.value.filter((e=>e.i2v))[0].value,We.value.filter((e=>e.i2v))):void 0)),Re=s({prompt:"",options:{parentMessageId:0},systemMessage:"",cusromPrompt:!0,model:"luma-video",expand_prompt:!0,aspect_ratio:"16:9",image_url:"",image_end_url:"",keyType:1});function qe(e){Ge.value=e}async function Xe(e){try{Ne.uploadFile().then((t=>{"start"==e?Re.value.image_url=t:Re.value.image_end_url=t}))}catch(t){j.error(t.message)}}function Ye(e){Ke.value=e}function Ze(){De.value=""}function et(){if(lt.value.isVipUsed&&-1===lt.value.userType.indexOf(Pe.value)){let e=lt.value.userType.split(","),t="";return e.forEach(((a,l)=>{t+=Oe.value.filter((e=>e.id==a))[0].dictName,l<e.length-1&&(t+=",")})),void j.error($("digitalMan.vipUse1")+t+$("digitalMan.vipUse2"))}Ne.create(tt).then((e=>{at(),e&&Qe("changeTab",1)}))}function tt(){const e=JSON.parse(JSON.stringify(Re.value));let t="";return 1==Ge.value&&""==e.image_url?j.error($("AIvideo.img1Nodata")):null==De.value||""==De.value?j.error($("AIvideo.videoSceneNodata")):(t+=De.value,999!=Ke.value&&(t+=" ,风格："+Ne.videoData.value.styleData[Ke.value].dictName),e.prompt=t,e)}function at(){Ue.isLogin?A(Re.value).then((e=>{200===e.code?(lt.value=e.data,it.value=!1):it.value=!0})).catch((e=>{it.value=!0})):T(Re.value).then((e=>{lt.value=e.data}))}const lt=s({remainCount:0,freeCount:0,useIntegrate:0}),it=s(!1);return n((()=>Re.value),((e,t)=>{at()}),{deep:!0,immediate:!0}),(e,t)=>(v(),u("div",L,[p("div",N,[He.value&&He.value.length>0?(v(),u("div",D,[p("div",U,[t[10]||(t[10]=p("div",{class:"dark:text-[#EEEEF0] text-[#000] text-[18px]",style:{"margin-right":"12px","font-weight":"500"}},"Luma视频",-1)),p("div",P,[c(g(m),{value:Re.value.model,"onUpdate:value":t[0]||(t[0]=e=>Re.value.model=e),options:He.value,onClick:t[1]||(t[1]=e=>x(Je)?Je.value=!g(Je):Je=!g(Je)),show:!1},null,8,["value","options"]),We.value.filter((e=>e.value==Re.value.model))[0].new?(v(),u("div",O,"NEW")):y("",!0),f(p("div",z,[p("p",null,b(e.$t("draw.videoModelChose"))+":",1),(v(!0),u(h,null,k(He.value,(e=>(v(),u("div",{class:_(["selectItem",Re.value.model==e.value?"active":""]),onClick:t=>{Re.value.model=e.value,x(Je)?Je.value=!1:Je=!1}},[p("div",K,[F(b(e.label)+" ",1),e.new?(v(),u("div",Q,"NEW ")):y("",!0)]),p("span",null,b(e.desc),1),t[9]||(t[9]=p("img",{src:B,alt:""},null,-1))],10,G)))),256))],512),[[E,g(Je)]])])])])):y("",!0),p("div",J,[p("div",{class:_([0==Ge.value?"type_tab selected_type_tab bg-gradient-to-r from-[#574FFE] to-[#726AFB]  ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[2]||(t[2]=e=>qe(0))},b(e.$t("AIvideo.textToVideo")),3),p("div",{class:_([1==Ge.value?"type_tab selected_type_tab bg-gradient-to-r from-[#574FFE] to-[#726AFB] ":"type_tab","dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"]),onClick:t[3]||(t[3]=e=>qe(1))},b(e.$t("AIvideo.imgToVideo")),3)]),p("div",W,[p("div",H,[p("p",null,b(e.$t("draw.featureIntrod")),1),p("div",R,b(e.$t("AIvideo.LumaText1")),1)]),1==Ge.value?(v(),u("div",q,[p("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[4]||(t[4]=e=>Xe("start"))},[p("div",X,[p("div",null,[p("div",Y,b(e.$t("AIvideo.uploadStarImg")),1),p("div",Z,b(e.$t("draw.PuploadImgText1")),1)])]),""==Re.value.image_url?(v(),u("div",ee,[p("div",te,b(e.$t("draw.cankaoImgTuo")),1),p("div",ae,b(e.$t("draw.huo")),1),p("div",le,b(e.$t("digitalMan.clickUpload")),1)])):(v(),u("div",ie,[p("img",{src:Re.value.image_url,style:{width:"100%",height:"100%"}},null,8,se)]))]),p("div",{style:{"margin-top":"20px",cursor:"pointer"},onClick:t[5]||(t[5]=e=>Xe("end"))},[p("div",de,[p("div",null,[p("div",re,b(e.$t("AIvideo.uploadEndImg")),1),p("div",oe,b(e.$t("draw.PuploadImgText1")),1)])]),""==Re.value.image_end_url?(v(),u("div",ne,[p("div",ve,b(e.$t("draw.cankaoImgTuo")),1),p("div",ue,b(e.$t("draw.huo")),1),p("div",pe,b(e.$t("digitalMan.clickUpload")),1)])):(v(),u("div",ce,[p("img",{src:Re.value.image_end_url,style:{width:"100%",height:"100%"}},null,8,xe)]))])])):y("",!0),p("div",ge,[p("div",me,[p("div",ye,b(e.$t("AIvideo.videoScene")),1)]),p("div",fe,[f(p("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>De.value=e),style:{width:"100%",height:"55px",resize:"none","background-color":"transparent"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:e.$t("AIvideo.videoSceneText1")},null,8,Ee),[[C,De.value]]),p("div",{style:{width:"100%","text-align":"right",cursor:"pointer"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",onClick:Ze},b(e.$t("common.clear")),1)])]),p("div",be,[p("div",he,[p("div",ke,b(e.$t("draw.styleSelect")),1)]),p("div",_e,[p("div",{class:_(999==Ke.value?"style_item selected":"def_style_item"),onClick:t[7]||(t[7]=e=>Ye(999))},[t[11]||(t[11]=p("img",{class:"style_img",src:"/static/png/noStyle-fc3e20db.png"},null,-1)),p("div",{class:_(999==Ke.value?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")},b(e.$t("AIvideo.unspecified")),3)],2),(v(!0),u(h,null,k(g(Ne).videoData.value.styleData,((e,t)=>(v(),u("div",{class:_(Ke.value==t?"style_item selected ":"def_style_item"),key:t,onClick:e=>Ye(t)},[p("img",{class:"style_img",src:e.dictValue},null,8,Ce),p("div",{class:_(Ke.value==t?"style_name bg-gradient-to-b from-transparent to-[#3C69E7]":"def_style_name")},b(e.dictName),3)],10,Fe)))),128))])]),We.value&&We.value.length>1?(v(),u("div",Ie,[p("div",we,[p("div",$e,b(e.$t("AIvideo.videoModel")),1)]),p("div",null,[c(g(m),{value:Re.value.model,"onUpdate:value":t[8]||(t[8]=e=>Re.value.model=e),options:We.value},null,8,["value","options"])])])):y("",!0)])]),p("div",Ae,[lt.value&&lt.value.isVipUsed?(v(),u("img",Te)):y("",!0),c(g(w),{loading:g(Ne).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"64px","font-size":"15px","border-radius":"10px",padding:"12px 0","margin-top":"12px"},onClick:et},{default:I((()=>[t[12]||(t[12]=p("img",{src:S,style:{"margin-right":"5px"}},null,-1)),it.value?(v(),u("span",Me,b(e.$t("draw.modelNotSet")),1)):g(Ue).isLogin?lt.value&&lt.value.isVipFree&&V.value?(v(),u("span",Ve,b(e.$t("chat.vipFree")),1)):lt.value&&lt.value.remainCount&&V.value?(v(),u("span",je,b(e.$t("draw.shenyu")+lt.value.remainCount+e.$t("draw.chiFree")),1)):lt.value?(v(),u("span",Se,b(lt.value.useIntegrate+e.$t("chat.pointsChi")),1)):(v(),u("span",Le,b(e.$t("draw.gen")),1)):(v(),u("span",Be,b(e.$t("draw.beginGen")),1))])),_:1,__:[12]},8,["loading"])])]))}}),[["__scopeId","data-v-b9066bdd"]]),De={style:{display:"flex"}},Ue=t({__name:"Luma",setup(e){const t=s();function a(){t.value&&t.value.changeTypeIndex(1)}return(e,l)=>(v(),u("div",De,[c(Ne,{onChangeTab:a}),c(j,{ref_key:"mainRef",ref:t,title:"Luma",subType:"1"},null,512)]))}});export{Ue as default};
