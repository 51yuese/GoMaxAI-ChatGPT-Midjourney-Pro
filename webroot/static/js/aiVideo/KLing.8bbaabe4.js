import{e,g as l,k as a,p as t,r as i,b3 as o,I as s,dQ as n,dR as r,L as u,w as d,x as v,C as p,B as c,aG as m,y as g,A as x,P as b,Q as f,F as y,E as k,a1 as h,a3 as E,z as _,D as C,al as F,$ as w,bY as I,b$ as B,an as A,aH as j,a7 as T,a8 as U,ah as N,N as z,bO as S,bP as V,a4 as D,ai as M,aC as L,_ as O}from"../main-bf8e7d49.js";import{_ as P,T as J,C as K}from"../aiVideoGou/aiVideoGou.62aded3f.js";import{_ as R}from"../uploadImg/uploadImg.66d9b869.js";import{_ as G,a as W,S as Y}from"../AI2/AI2.5b310847.js";import{c as Q,b as $,_ as H}from"../baiduThink/baiduThink.42dddcca.js";import{N as X}from"../text/text.a53de645.js";import{V as Z}from"../VideoContentMain/VideoContentMain.4004f4ae.js";import"../KLingIcon3/KLingIcon3.528c15f9.js";import"../index/index.5b75f753.js";import"../Popconfirm/Popconfirm.2a2fe636.js";const q={class:"video_sub_sidebar border-[#E8E8E8] dark:border-[#24252b] bg-[#f2f2f5] dark:bg-[#222325]"},ee={class:"scroll_card",style:{height:"100%","overflow-y":"scroll"}},le={key:0},ae={style:{display:"flex","align-items":"center","margin-bottom":"6px",height:"66px"}},te={style:{width:"140px",position:"relative"},class:"customBox"},ie={key:0,class:"newModel"},oe={class:"custerSelect"},se=["onClick"],ne={class:"name"},re={key:0,class:"newModel"},ue={key:0,style:{"margin-bottom":"10px"}},de={style:{display:"flex","margin-bottom":"6px","justify-content":"space-between"}},ve={key:0,style:{display:"flex","align-items":"center"}},pe={style:{"margin-top":"20px"},class:"border border-[#E8E8E8] dark:border-[#292A2E]"},ce=["src"],me={class:"recomBox"},ge={class:"labeBox"},xe=["onClick","src"],be={key:0,style:{display:"flex","margin-bottom":"6px","margin-top":"20px"}},fe={key:1,class:"border border-[#E8E8E8] dark:border-[#292A2E]"},ye=["src"],ke={class:"recomBox"},he={class:"labeBox"},Ee=["onClick","src"],_e={style:{"margin-bottom":"16px"}},Ce={style:{width:"100%","border-radius":"6px"},class:"bg-[#FFF] dark:bg-[#17181A] border border-[#E8E8E8] dark:border-[#292A2E]"},Fe={style:{width:"100%","text-align":"right","padding-right":"12px","padding-bottom":"14.5px"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]"},we={class:"recomBox"},Ie={class:"labeBox"},Be=["onClick"],Ae={key:1,style:{"margin-top":"20px"}},je={class:"flexSelect bg-[#F8F9F9] dark:bg-[#17181A]"},Te={key:0,style:{width:"120px","margin-right":"10px"}},Ue={style:{width:"78px","margin-right":"10px"}},Ne={style:{width:"82px","margin-right":"10px"}},ze={style:{width:"156px"}},Se={class:"customSlider"},Ve={style:{padding:"0 90px",position:"absolute",bottom:"12px",left:"0px",width:"100%"},class:"bg-[#F8F9F9] dark:bg-[#17181A] border-t border-[#E8E8E8] dark:border-[#292A2E]"},De={key:0},Me={key:1},Le={key:2},Oe={key:3},Pe={key:4,style:{display:"flex","align-items":"center"}},Je={key:5},Ke=O(e({__name:"KLingSidebar",emits:["changeTab"],setup(e,{emit:O}){const Z=l((()=>1===Ke.userInfo.lifetimeVip||Ke.userInfo.vipExpire&&new Date(Ke.userInfo.vipExpire)>new Date)),Ke=a(),Re=t(),Ge=i(""),We=o("videoBase"),Ye=i(0),Qe=i(999);i(1);const $e=[{model:"kling-v1",mode:"std",duration:5}],He=[{model:"kling-v1-5"}],Xe=[{model:"kling-v1-6",selectType:0}],Ze=[{model:"kling-v1",mode:"std",duration:10},{model:"kling-v1",mode:"pro",duration:10},{model:"kling-v1-5",mode:"std",duration:5},{model:"kling-v1-5",mode:"std",duration:10},{model:"kling-v1-6",mode:"std",duration:5},{model:"kling-v1-6",mode:"std",duration:10}],qe=O;i([{id:1,width:"16px",height:"16px",value:"1:1"},{id:2,width:"20px",height:"12px",value:"16:9"},{id:3,width:"12px",height:"20px",value:"9:16"}]);const el=i({});function ll(e){e?el.value={type:e}:el.value.type=e}const al=i({model:"kling-v1-6",prompt:"",image:"",image_tail:"",negative_prompt:"",cfg_scale:.5,mode:"pro",aspect_ratio:"16:9",duration:"5",keyType:3});let tl=i([]),il=i([]),ol=()=>{const e=[...il.value].sort((()=>Math.random()-.5));tl.value=e.slice(0,e.length>3?3:e.length)};I().then((e=>{var l,a;il.value=null==(a=null==(l=e.data)?void 0:l.t2v)?void 0:a.recTags,ol()}));let sl=i([]),nl=i([]),rl=i([]),ul=(e=1)=>{const l=[...rl.value].sort((()=>Math.random()-.5));1==e?sl.value=l.slice(0,l.length>5?5:l.length):nl.value=l.slice(0,l.length>5?5:l.length)};B().then((e=>{rl.value=e.data,ul(),ul(2)}));const dl=i([{label:"高性能模式",value:"std"},{label:"高品质模式",value:"pro"}]),vl=i([{label:"5S",value:"5"},{label:"10S",value:"10"}]),pl=i([{label:"1:1",value:"1:1"},{label:"16:9",value:"16:9"},{label:"9:16",value:"9:16"}]),cl=i([{label:"创意想象力：0",value:0},{label:"创意想象力：0.05",value:.05},{label:"创意想象力：0.1",value:.1},{label:"创意想象力：0.15",value:.15},{label:"创意想象力：0.2",value:.2},{label:"创意想象力：0.25",value:.25},{label:"创意想象力：0.3",value:.3},{label:"创意想象力：0.35",value:.35},{label:"创意想象力：0.4",value:.4},{label:"创意想象力：0.45",value:.45},{label:"创意想象力：0.5",value:.5},{label:"创意想象力：0.55",value:.55},{label:"创意想象力：0.6",value:.6},{label:"创意想象力：0.65",value:.65},{label:"创意想象力：0.7",value:.7},{label:"创意想象力：0.75",value:.75},{label:"创意想象力：0.8",value:.8},{label:"创意想象力：0.85",value:.85},{label:"创意想象力：0.9",value:.9},{label:"创意想象力：0.95",value:.95},{label:"创意想象力：1",value:1}]);let ml=i(!1);const gl=i([{label:"可灵 1.6",info:"生动的画面动态表现，指令响应更佳",value:"kling-v1-6"},{label:"可灵 1.5",info:"直出1080P高清视频，画面美感提升",value:"kling-v1-5"},{label:"可灵 1.0",info:"强大的可控性生成能力，视频细节丰富",value:"kling-v1"}]),xl=l((()=>0==Ye.value?gl.value.filter((e=>!He.map((e=>e.model)).includes(e.value))):gl.value)),bl=l((()=>$e.some((e=>e.model==al.value.model&&e.mode==al.value.mode&&e.duration==al.value.duration))));let fl=i(!1);const yl=e=>{fl.value=e},kl=l((()=>!Ze.some((e=>e.model==al.value.model&&e.mode==al.value.mode&&e.duration==al.value.duration)))),hl=l((()=>!Xe.some((e=>e.model==al.value.model&&Ye.value==e.selectType)))),El=[{label:"无",value:""},{label:"简单运镜",value:"must be simple"},{label:"自下而上",value:"down_back"},{label:"向前走",value:"forward_up"},{label:"右转前进或左转前进",value:"right_turn_forward or left_turn_forward"}];function _l(e){Ye.value=e,0==e?s.emit("changeTypeIndexName","文生视频"):s.emit("changeTypeIndexName","图生视频")}async function Cl(e){try{We.uploadFile().then((l=>{"start"==e?al.value.image=l:al.value.image_tail=l}))}catch(l){Re.error(l.message)}}function Fl(e=""){Ge.value=e}let wl=i(""),Il=i("");function Bl(e,l="start"){"start"==l?(al.value.image=e.imageUrl,Ge.value=e.prompt+Il.value,wl.value=e.prompt):(al.value.image_tail=e.imageUrl,Ge.value=wl.value+e.prompt,Il.value=e.prompt)}function Al(){Ge.value?(A({text:Ge.value}),Re.success("复制成功")):Re.error("无内容可复制")}function jl(e=null){let l=e||Tl();console.log(l,"param"),l&&We.create(e||Tl,"kling").then((e=>{Ul(),e&&qe("changeTab",1)}))}function Tl(){const e=JSON.parse(JSON.stringify(al.value));let l="";if(1!=Ye.value||""!=e.image){if(null!=Ge.value&&""!=Ge.value)return l+=Ge.value,999!=Qe.value&&(l+=", "+We.videoData.value.styleData[Qe.value].dictName),e.prompt=l,el.value.type&&(e.camera_control=el.value),bl.value||delete e.camera_control,kl.value||delete e.image_tail,hl.value||(e.mode="std"),e;Re.error("视频场景不能为空")}else Re.error("开始帧图片不能为空")}function Ul(){let e=JSON.parse(JSON.stringify(al.value)),l="";l+=Ge.value,999!=Qe.value&&(l+=", "+We.videoData.value.styleData[Qe.value].dictName),e.prompt=l,el.value.type&&(e.camera_control=el.value),bl.value||delete e.camera_control,kl.value||delete e.image_tail,hl.value||(e.mode="std"),Ke.isLogin?n(e).then((e=>{200===e.code?(Nl.value=e.data,zl.value=!1):zl.value=!0})).catch((e=>{zl.value=!0})):r(e).then((e=>{Nl.value=e.data}))}s.on("copyVideoData",(e=>{console.log(e),al.value={model:"kling-v1-6",prompt:"",image:"",image_tail:"",negative_prompt:"",cfg_scale:.5,mode:"pro",aspect_ratio:"16:9",duration:"5",keyType:3};for(const l in al.value)for(const a in e)a==l&&e[a]&&(al.value[l]=e[a]);Ge.value=e.prompt,e.image?Ye.value=1:Ye.value=0})),s.on("generateVideo",(e=>{jl(e)}));const Nl=i({remainCount:0,freeCount:0,useIntegrate:0}),zl=i(!1);u((()=>al.value),((e,l)=>{Ul()}),{deep:!0,immediate:!0});const Sl=i(),Vl=i(),Dl=()=>{Sl.value.open()},Ml=()=>{Vl.value.thinks="",Vl.value.open()};function Ll(e){Ge.value+=e}return(e,l)=>(d(),v("div",q,[p(Q,{ref_key:"inspirationRef",ref:Sl,onTextToImg:Ll,title:"AI生成描述",type:"mj"},null,512),p($,{ref_key:"thinkRef",ref:Vl,onTextToImg:Ll,title:"AI生成描述",type:"mj"},null,512),c("div",ee,[xl.value&&xl.value.length>1?(d(),v("div",le,[c("div",ae,[l[21]||(l[21]=c("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[18px]",style:{"margin-right":"12px"}},"可灵视频",-1)),c("div",te,[p(g(j),{value:al.value.model,"onUpdate:value":l[0]||(l[0]=e=>al.value.model=e),options:xl.value,onClick:l[1]||(l[1]=e=>m(ml)?ml.value=!g(ml):ml=!g(ml)),show:!1},null,8,["value","options"]),"kling-v1-6"==al.value.model?(d(),v("div",ie,"NEW")):x("",!0),b(c("div",oe,[l[20]||(l[20]=c("p",null,"视频模型选择:",-1)),(d(!0),v(y,null,k(xl.value,(e=>(d(),v("div",{class:h(["selectItem",al.value.model==e.value?"active":""]),onClick:l=>{al.value.model=e.value,m(ml)?ml.value=!1:ml=!1}},[c("div",ne,[E(_(e.label)+" ",1),"可灵 1.6"==e.label?(d(),v("div",re,"NEW ")):x("",!0)]),c("span",null,_(e.info),1),l[19]||(l[19]=c("img",{src:P,alt:""},null,-1))],10,se)))),256))],512),[[f,g(ml)]])])])])):x("",!0),l[38]||(l[38]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]",style:{"margin-bottom":"16px"}},null,-1)),p(g(U),{class:"card-tabs","default-value":Ye.value,value:Ye.value,size:"large",animated:"","onUpdate:value":_l},{default:C((()=>[p(g(T),{name:0,tab:"文生视频"}),p(g(T),{name:1,tab:"图生视频"})])),_:1},8,["default-value","value"]),c("div",null,[1==Ye.value?(d(),v("div",ue,[c("div",de,[l[23]||(l[23]=c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传首帧图片或视频"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")],-1)),kl.value?(d(),v("div",ve,[l[22]||(l[22]=c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[12px]",style:{"margin-right":"10px"}},"增加尾帧",-1)),p(g(N),{color:"#5f57fd",value:g(fl),"onUpdate:value":yl},null,8,["value"])])):x("",!0)]),c("div",pe,[""==al.value.image?(d(),v("div",{key:0,onClick:l[2]||(l[2]=e=>Cl("start")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[24]||(l[24]=[c("img",{src:R,alt:""},null,-1),c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传首帧图",-1)]))):(d(),v("div",{key:1,onClick:l[4]||(l[4]=e=>Cl("start")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[c("img",{src:al.value.image,style:{width:"auto",height:"100%"}},null,8,ce),p(g(z),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[3]||(l[3]=F((e=>al.value.image=""),["stop"]))},{default:C((()=>[p(g(J))])),_:1})])),l[26]||(l[26]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",me,[l[25]||(l[25]=c("span",null,"推荐：",-1)),c("div",ge,[(d(!0),v(y,null,k(g(sl),(e=>(d(),v("img",{class:"labeImg",onClick:l=>Bl(e),src:e.imageUrl,alt:""},null,8,xe)))),256))]),p(g(z),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[5]||(l[5]=e=>g(ul)(1))},{default:C((()=>[p(g(Y))])),_:1})])]),kl.value&&g(fl)?(d(),v("div",be,l[27]||(l[27]=[c("div",null,[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"上传结束帧图片或视频(非必传)"),c("div",{class:"dark:text-[#6C6E79] text-[#8B8C8C] text-[10px]"},"(上传jpg/png/mp4文件，且不超过10MB) ")],-1)]))):x("",!0),kl.value&&g(fl)?(d(),v("div",fe,[""==al.value.image_tail?(d(),v("div",{key:0,onClick:l[6]||(l[6]=e=>Cl("end")),style:{height:"134px",padding:"8px","border-radius":"8px",display:"flex","flex-direction":"column","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#17181a]"},l[28]||(l[28]=[c("img",{src:R,alt:""},null,-1),c("div",{class:"text-[12px] text-[#8B8C8C] dark:text-[#6C6E79]",style:{"margin-top":"12px"}},"上传结束帧图",-1)]))):(d(),v("div",{key:1,onClick:l[8]||(l[8]=e=>Cl("end")),style:{height:"134px","border-radius":"8px",display:"flex","align-items":"center",cursor:"pointer","justify-content":"center"},class:"bg-[#FFF] dark:bg-[#393936] resultImg"},[c("img",{src:al.value.image_tail,style:{width:"auto",height:"100%"}},null,8,ye),p(g(z),{size:"18px",color:"#fff",style:{cursor:"pointer"},onClick:l[7]||(l[7]=F((e=>al.value.image_tail=""),["stop"]))},{default:C((()=>[p(g(J))])),_:1})])),l[30]||(l[30]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",ke,[l[29]||(l[29]=c("span",null,"推荐：",-1)),c("div",he,[(d(!0),v(y,null,k(g(nl),(e=>(d(),v("img",{class:"labeImg",onClick:l=>Bl(e,"end"),src:e.imageUrl,alt:""},null,8,Ee)))),256))]),p(g(z),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[9]||(l[9]=e=>g(ul)(2))},{default:C((()=>[p(g(Y))])),_:1})])])):x("",!0)])):x("",!0),c("div",_e,[c("div",{class:"recomBox",style:{"margin-bottom":"6px",padding:"0"}},[l[33]||(l[33]=c("div",{class:"dark:text-[#EEEEF0] text-[#fff] text-[14px]"},"创意描述",-1)),c("div",{class:"labeBox",style:{flex:"none"}},[c("div",{class:"labeItem",onClick:Ml},l[31]||(l[31]=[c("img",{src:G,alt:""},null,-1),c("span",null,"AI生成描述",-1)])),c("div",{class:"labeItem",onClick:Dl},l[32]||(l[32]=[c("img",{src:W,alt:""},null,-1),c("span",null,"提示词",-1)]))])]),c("div",Ce,[b(c("textarea",{"onUpdate:modelValue":l[10]||(l[10]=e=>Ge.value=e),style:{width:"100%",height:"112px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79]",placeholder:"描述你想生成的画面和动作。例如：美丽的油画少女，柔光落在她的脸上         "},null,512),[[w,Ge.value]]),c("div",Fe,[p(g(z),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:Al},{default:C((()=>[p(g(K))])),_:1}),p(g(z),{size:"18px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:l[11]||(l[11]=e=>Fl())},{default:C((()=>[p(g(J))])),_:1})]),l[35]||(l[35]=c("div",{class:"border-b border-[#E8E8E8] dark:border-[#292A2E]"},null,-1)),c("div",we,[l[34]||(l[34]=c("span",null,"推荐：",-1)),c("div",Ie,[(d(!0),v(y,null,k(g(tl),(e=>(d(),v("div",{class:"labeItem",onClick:l=>Fl(e.descript)},_(e.name),9,Be)))),256))]),p(g(z),{size:"20px",color:"#fff",style:{"margin-left":"10px",cursor:"pointer"},onClick:g(ol)},{default:C((()=>[p(g(Y))])),_:1},8,["onClick"])])])]),p(g(V),{"arrow-placement":"right"},{default:C((()=>[p(g(S),{name:"1"},{header:C((()=>[p(g(X),null,{default:C((()=>l[36]||(l[36]=[E("不希望呈现的内容"),c("span",{style:{color:"#6F7478"}},"（非必填）",-1)]))),_:1,__:[36]})])),default:C((()=>[b(c("textarea",{"onUpdate:modelValue":l[12]||(l[12]=e=>al.value.negative_prompt=e),style:{width:"100%",height:"140px",resize:"none","background-color":"transparent",padding:"24px 14px 0"},class:"text-[12px] text-[#8B8C8C] dark-[#6C6E79] border border-[#E8E8E8] dark:border-[#292A2E]",placeholder:"写下你不希望在视频中呈现的内容。例如：动画、模糊、变形、毁容、低质量、拼贴、粒状、标志、抽象、插图、计算机生成、扭曲 …"},null,512),[[w,al.value.negative_prompt]])])),_:1})])),_:1}),bl.value?(d(),v("div",Ae,[l[37]||(l[37]=c("div",{style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[c("div",{class:"dark:text-[#EEEEF0] text-[#1E1F1F] text-[12px]"},"运镜方式")],-1)),c("div",null,[p(g(j),{options:El,onChange:ll})])])):x("",!0)])]),c("div",je,[hl.value?(d(),v("div",Te,[p(g(j),{value:al.value.mode,"onUpdate:value":l[13]||(l[13]=e=>al.value.mode=e),options:dl.value},null,8,["value","options"])])):x("",!0),c("div",Ue,[p(g(j),{value:al.value.duration,"onUpdate:value":l[14]||(l[14]=e=>al.value.duration=e),options:vl.value},null,8,["value","options"])]),c("div",Ne,[p(g(j),{value:al.value.aspect_ratio,"onUpdate:value":l[15]||(l[15]=e=>al.value.aspect_ratio=e),options:pl.value},null,8,["value","options"])]),p(g(M),{trigger:"click"},{trigger:C((()=>[c("div",ze,[p(g(j),{value:al.value.cfg_scale,"onUpdate:value":l[16]||(l[16]=e=>al.value.cfg_scale=e),options:cl.value,show:!1},null,8,["value","options"])])])),default:C((()=>[c("div",Se,[l[39]||(l[39]=c("span",null,"想象力",-1)),p(g(D),{style:{flex:"1"},value:al.value.cfg_scale,"onUpdate:value":l[17]||(l[17]=e=>al.value.cfg_scale=e),step:.05,max:1,min:0},null,8,["value"])])])),_:1})]),c("div",Ve,[p(g(L),{loading:g(We).videoData.value.generate,tertiary:"",class:"bg-gradient-to-r from-[#574FFE] to-[#726AFB]",style:{width:"100%",height:"40px","font-size":"15px","border-radius":"8px",padding:"12px 0","margin-top":"12px"},onClick:l[18]||(l[18]=e=>jl())},{default:C((()=>[zl.value?(d(),v("span",De,"模型未配置")):g(Ke).isLogin?Nl.value&&Nl.value.isVipFree&&Z.value?(d(),v("span",Le,"会员免费")):Nl.value&&Nl.value.remainCount&&Z.value?(d(),v("span",Oe,"剩余"+_(Nl.value.remainCount)+"次免费",1)):Nl.value?(d(),v("div",Pe,[l[40]||(l[40]=c("span",null,"立即生成",-1)),l[41]||(l[41]=c("img",{src:H,style:{margin:"0 5px 0 8px",transform:"translateY(-2px)"}},null,-1)),c("span",null,_(Nl.value.useIntegrate),1)])):(d(),v("span",Je,"生成")):(d(),v("span",Me,"开始生成"))])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-e0d531f5"]]),Re={style:{display:"flex"}},Ge=e({__name:"KLing",setup(e){const l=i();function a(){l.value&&l.value.changeTypeIndex(1)}return(e,t)=>(d(),v("div",Re,[p(Ke,{onChangeTab:a}),p(Z,{ref_key:"mainRef",ref:l,title:"可灵",subType:"3"},null,512)]))}});export{Ge as default};
