import{b as e,c as l,q as a,d as i,e as o,f as s,s as n,g as u,h as r,i as d,_ as c,a as p}from"../aboutUs copy/aboutUs copy.d0a1c112.js";import{a as v}from"../index/index.338961db.js";import{e as g,a5 as A,o as f,p as m,k as h,g as y,l as x,ab as k,a9 as I,Z as C,r as w,L as b,I as B,b1 as S,s as D,aY as F,aX as L,w as U,x as N,B as T,a1 as R,F as O,E,z as M,A as H,P as V,$ as z,O as Q,al as G,y as J,a2 as K,aN as j,_ as q,C as Y,D as P,ai as X,J as Z,a3 as W,ba as _,G as $,bo as ee,aq as le,am as ae,v as te,ao as ie,ag as oe,an as se,bp as ne,bq as ue,br as re,q as de,aj as ce,a_ as pe}from"../main-bf8e7d49.js";import{u as ve}from"../useUpload/useUpload.c9debee5.js";import{a as ge,u as Ae,b as fe,c as me,d as he,e as ye,f as xe,g as ke,h as Ie,_ as Ce}from"../sendBox_3/sendBox_3.27c30081.js";import{_ as we}from"../sendBox_2 copy/sendBox_2 copy.b5b6aeb0.js";import{f as be}from"../music/music.8a9fd455.js";import{C as Be}from"../index/index.ac6b70c4.js";import"../police/police.deef576c.js";const Se={class:"main"},De={class:"applicationBox"},Fe={class:"appBox"},Le={key:0,src:"/static/svg/default-98ef1eb8.svg",alt:""},Ue={key:1,src:"/static/svg/default copy-cbe05553.svg",alt:""},Ne=["onClick"],Te=["src"],Re={style:{"margin-left":"9px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",width:"120px"}},Oe={key:0,src:"/static/svg/otherApp-5647880d.svg",alt:""},Ee={key:1,src:"/static/svg/otherApp copy-8f52f424.svg",alt:""},Me={key:0,class:"recordingBox"},He={class:"todayList"},Ve=["onClick"],ze={style:{width:"100%"}},Qe={key:0,class:"itemTitle cursor"},Ge=["onBlur"],Je={style:{display:"flex","align-items":"center"}},Ke={class:"historyList"},je=["onClick"],qe={style:{width:"100%"}},Ye={key:0,class:"itemTitle cursor"},Pe=["onBlur"],Xe={style:{display:"flex","align-items":"center"}},Ze=q(g({__name:"conversationList",setup(e){const{isMobile:l}=A(),a=f(),t=m(),i=h(),o=y((()=>i.isLogin));x(),k();const s=I(),n=C(),u=y((()=>"dark"===n.theme)),r=y((()=>s.groupList)),d=w(100);b(r,(()=>d.value=d.value+1));const c=w([]),p=w([]),v=w([]);async function g(){c.value=[],p.value=[],v.value=[],await S({modelType:"chat"}).then((e=>{0!=e.data.length?function(e){let l=(new Date).getDate();l<10&&(l="0"+l);const{data:a}=e;c.value=a,a.forEach((e=>{if(e.title=e.title.slice(0,7),null!=e.lastTime){let a=e.lastTime.split(" ")[0].split("-")[2];l==a?p.value=[...p.value,e]:v.value=[...v.value,e]}if(null===e.lastTime){let a=e.createdAt.split(" ")[0].split("-")[2];l==a?p.value=[...p.value,e]:v.value=[...v.value,e]}}))}(e):le()}))}g(),B.on("updateMessageList",(e=>{console.log(e),e&&g()})),B.on("DataListFn",(e=>{e&&(g(),$())}));const q=w([]),Y=w(!1);B.on("ExploreApp",(e=>{q.value.forEach((l=>{l.id==e.id&&(Y.value=!0,W(l))})),Y.value?Y.value=!1:(q.value.unshift(e),q.value=q.value.splice(0,2),W(e),localStorage.setItem("ExploreApp",JSON.stringify(q.value)))})),localStorage.getItem("ExploreApp")?q.value=JSON.parse(localStorage.getItem("ExploreApp")):D({type:"recommend"}).then((e=>{q.value=e.data,q.value=q.value.splice(0,2)})),B.on("reOpenChar",(e=>{X(e,1)}));const P=w();function X(e,l){let a;a=l?{groupId:e.uuid,logType:1}:{groupId:e.id,logType:1},B.emit("create",!1),B.emit("exploreApp",!1),B.emit("uuid",e),F(a).then((async a=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await s.setActiveGroup(e.id),P.value=l?e.uuid:e.id,Z.value&&(Z.value=null),ue.value&&(ue.value=!1),B.emit("modelType",e.config),B.emit("setModel",JSON.parse(e.config).modelInfo);let t=a.data.filter((e=>null!=e.conversationOptions));0==t.length?(B.emit("chatLogList",t),B.emit("haveLog",!1)):B.emit("chatLogList",a.data)}))}const Z=w();async function W(e,l){if(!o.value)return void i.setLoginDialog(!0);let t;if(t=l?await a.isSession(e.modelId):await a.isSession(e.id),0==t){await a.addNewChat(e.id),a.updateGptsStore(!1);const l=await L();P.value&&(P.value=null),ue.value&&(ue.value=!1),l.data.forEach((l=>{l.modelId==e.id&&(localStorage.setItem("chatLogId",JSON.stringify(l)),Z.value=l.modelId,B.emit("exploreApp",!1),B.emit("uuid",l),_(l))}))}else{P.value&&(P.value=null),ue.value&&(ue.value=!1);(await L()).data.forEach((a=>{l?a.modelId==e.modelId&&(localStorage.setItem("chatLogId",JSON.stringify(a)),Z.value=a.modelId,B.emit("exploreApp",!1),B.emit("uuid",a),_(a)):a.modelId==e.id&&(localStorage.setItem("chatLogId",JSON.stringify(a)),Z.value=a.modelId,B.emit("exploreApp",!1),B.emit("uuid",a),_(a))}))}}function _(e){let l={groupId:e.id};F(l).then((async l=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await s.setActiveGroup(e.id);let a=l.data.filter((e=>null!=e.conversationOptions));a.length,B.emit("chatLogList",a)}))}function $(){if(localStorage.getItem("chatLogId")){let e,l=JSON.parse(localStorage.getItem("chatLogId"));l.config&&(e=JSON.parse(l.config).modelInfo.modelType),P.value=l,l.gptsApp||"app"==e?(Z.value=l.modelId,_(l)):(P.value=l.id,X(l))}else S({modelType:"chat"}).then((e=>{X(e.data[0])}))}B.on("openNewApp",(e=>{W(e)})),B.on("reOpenGpts",(e=>{W(e,1)})),$();const ee=w(!1);async function le(){try{if(!o.value)return i.setLoginDialog(!0),void B.emit("register",0);ee.value=!0,await s.updateChatTab("history"),await s.addNewChatGroup(),await s.queryMyGroup(),await g(),X(c.value[0]),ee.value=!1,l.value&&n.setSiderCollapsed(!0)}catch(e){ee.value=!1}}async function ae(e,l){if(0==p.value.length&&1==v.value.length||1==p.value.length&&0==v.value.length)t.error("至少保留一个对话");else{if(await s.deleteGroup(e),await s.queryMyGroup(),0==l){if(p.value=p.value.filter((l=>l.id!=e.id)),e.id==P.value){if(0==p.value.length)return void X(v.value[0]);X(p.value[0])}}else if(1==l&&(v.value=v.value.filter((l=>l.id!=e.id)),e.id==P.value)){if(0==v.value.length)return void X(p.value[0]);X(v.value[0])}t.success("删除成功")}}const te=w(null),ie=w("");function oe(e,l){setTimeout((()=>{te.value[0].focus()}),100),e.edit=!0,ie.value=e.title}function se(e,l){if(e.edit=null,e.title==ie.value)return;let a={groupId:e.id,title:ie.value};j(a).then((a=>{200===a.code&&(0==l?p.value.forEach((l=>{l.id==e.id&&(l.title=ie.value)})):1==l&&v.value.forEach((l=>{l.id==e.id&&(l.title=ie.value)})))}))}function ne(){7==ie.value.length&&t.warning("最大不能超过七个字")}const ue=w(!1);function re(){if(!o.value)return i.setLoginDialog(!0),void B.emit("register",0);P.value&&(P.value=null),Z.value&&(Z.value=null),ue.value=!0,B.emit("exploreApp",!0)}return(e,l)=>(U(),N("div",Se,[T("div",De,[T("div",Fe,[T("div",{class:R(["cursor",[u.value?"appItem":"appItem1"]]),onClick:le},[u.value?(U(),N("img",Le)):(U(),N("img",Ue)),l[2]||(l[2]=T("p",{style:{"margin-left":"9px","margin-top":"2px"}},"智能问答",-1))],2),0!=q.value.length&&o.value?(U(),N(O,{key:0},E(2,((e,l)=>T("div",{class:R(["cursor",[u.value?"appItem":"appItem1",Z.value==q.value[l].id?"select":"NotSelect"]]),key:l,style:{display:"flex","align-items":"center"},onClick:e=>W(q.value[l])},[T("img",{style:{width:"16px",height:"16px","border-radius":"50%"},src:q.value[l].logo,alt:""},null,8,Te),T("p",Re,M(q.value[l].modelName),1)],10,Ne))),64)):H("",!0)]),T("div",{class:R(["otherApp",[u.value?"appItem":"appItem1",ue.value?"select":"NotSelect"]]),onClick:re},[u.value?(U(),N("img",Oe)):(U(),N("img",Ee)),l[3]||(l[3]=T("p",{style:{"margin-left":"9px","margin-top":"2px"},class:"cursor"},"探索应用",-1))],2)]),o.value?(U(),N("div",Me,[T("div",He,[l[4]||(l[4]=T("div",{class:"todayTitle"},"今天",-1)),(U(!0),N(O,null,E(p.value,(e=>(U(),N("div",{class:R([u.value?"Item":"Item1",P.value==e.id?"select":"NotSelect"]),key:e.id,onClick:l=>X(e)},[T("div",ze,[e.edit?H("",!0):(U(),N("p",Qe,M(e.title),1)),e.edit?V((U(),N("input",{key:1,maxlength:"7","onUpdate:modelValue":l[0]||(l[0]=e=>ie.value=e),onInput:ne,class:"editInp dark:bg-[#111113] bg-[#FFFFFF]",ref_for:!0,ref_key:"inputRef",ref:te,type:"text",onBlur:l=>se(e,0)},null,40,Ge)),[[z,ie.value]]):H("",!0)]),T("div",Je,[P.value==e.id?(U(),Q(J(K),{key:0,icon:"hugeicons:delete-02",class:"hot-icon1 cursor del",onClick:G((l=>ae(e,0)),["stop"])},null,8,["onClick"])):H("",!0),P.value==e.id?(U(),Q(J(K),{key:1,icon:"solar:pen-2-linear",class:R(["hot-icon1 cursor",u.value?"pen":"pen1"]),onClick:G((l=>oe(e)),["stop"])},null,8,["class","onClick"])):H("",!0),P.value!=e.id?(U(),Q(J(K),{key:2,icon:"hugeicons:delete-02",class:"hot-icon cursor del",onClick:G((l=>ae(e,0)),["stop"])},null,8,["onClick"])):H("",!0),P.value!=e.id?(U(),Q(J(K),{key:3,icon:"solar:pen-2-linear",class:R(["hot-icon cursor",u.value?"pen":"pen1"]),onClick:G((l=>oe(e)),["stop"])},null,8,["class","onClick"])):H("",!0)])],10,Ve)))),128))]),T("div",Ke,[l[5]||(l[5]=T("div",{class:"historyTitle"},"历史",-1)),(U(!0),N(O,null,E(v.value,(e=>(U(),N("div",{class:R([u.value?"Item":"Item1",P.value==e.id?"select":"NotSelect"]),key:e.id,onClick:l=>X(e)},[T("div",qe,[e.edit?H("",!0):(U(),N("p",Ye,M(e.title),1)),e.edit?V((U(),N("input",{key:1,maxlength:"7","onUpdate:modelValue":l[1]||(l[1]=e=>ie.value=e),onInput:ne,class:"editInp dark:bg-[#111113] bg-[#FFFFFF]",ref_for:!0,ref_key:"inputRef",ref:te,type:"text",onBlur:l=>se(e,1)},null,40,Pe)),[[z,ie.value]]):H("",!0)]),T("div",Xe,[P.value==e.id?(U(),Q(J(K),{key:0,onClick:G((l=>ae(e,1)),["stop"]),icon:"hugeicons:delete-02",class:"hot-icon1 cursor del"},null,8,["onClick"])):H("",!0),P.value==e.id?(U(),Q(J(K),{key:1,icon:"solar:pen-2-linear",onClick:G((l=>oe(e)),["stop"]),class:R(["hot-icon1 cursor",u.value?"pen":"pen1"])},null,8,["onClick","class"])):H("",!0),P.value!=e.id?(U(),Q(J(K),{key:2,icon:"hugeicons:delete-02",onClick:G((l=>ae(e,1)),["stop"]),class:"hot-icon cursor del"},null,8,["onClick"])):H("",!0),P.value!=e.id?(U(),Q(J(K),{key:3,icon:"solar:pen-2-linear",onClick:G((l=>oe(e)),["stop"]),class:R(["hot-icon cursor",u.value?"pen":"pen1"])},null,8,["onClick","class"])):H("",!0)])],10,je)))),128))])])):H("",!0)]))}}),[["__scopeId","data-v-16482125"]]),We={class:"mindMapSiderBarMain"},_e={class:"inputBox dark:bg-[#111113] bg-[#FFFFFF] border dark:border-[#2D2E33] border-[#EBEBEB] dark:text-[#6C6E79] text-[#8B8C8C]"},$e={style:{width:"100%","text-align":"end","margin-top":"15px"}},el={key:0,class:"loader"},ll={class:"dark:bg-[#111113] bg-[#FFFFFF] border dark:border-[#2D2E33] border-[#EBEBEB] dark:text-[#6C6E79] text-[#8B8C8C]",style:{"margin-top":"6px",padding:"8px",height:"284px","border-radius":"12px"}},al=q(g({__name:"mindSiderBarContent",props:{demoValue:String},emits:["value","CreateMind"],setup(e,{emit:l}){const a=m(),t=e,i=l,o=w();function s(){B.emit("newValue",o.value)}b(t,(e=>{e.demoValue&&(o.value=e.demoValue)}));const n=w(),u=w(!1);function r(){n.value?(u.value=!0,i("CreateMind",n.value),n.value=""):a.error("提示词不能为空")}return B.on("loadingFalse",(e=>{u.value=e})),(e,l)=>(U(),N("div",We,[l[4]||(l[4]=T("div",{class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},[T("div",{style:{display:"flex","align-items":"center"}},[T("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),T("p",{style:{"margin-left":"4px","margin-top":"3px","font-size":"12px"}},"内容主题")])],-1)),T("div",_e,[V(T("textarea",{class:"inp",name:"",id:"",cols:"30","onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),rows:"10",placeholder:"请输入您想要生成内容的描述，AI将为您输出一份完整的思维导图"},null,512),[[z,n.value]]),T("div",$e,[T("p",{onClick:l[1]||(l[1]=e=>n.value=""),style:{cursor:"pointer","font-size":"12px"},class:"dark:text-[#6C6E79] text-[#8B8C8C]"}," 清空 ")])]),T("div",{class:"btn bg-gradient-to-r from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent dark:bg-[#36373e]",onClick:r,style:{cursor:"pointer",display:"flex","justify-content":"center","align-items":"center"}},[u.value?(U(),N("div",el)):H("",!0),l[3]||(l[3]=T("p",{style:{"margin-left":"6px"}},"生成导图",-1))]),l[5]||(l[5]=T("div",{class:"",style:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"16px"}},[T("div",{style:{display:"flex","align-items":"center"}},[T("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),T("p",{style:{"margin-left":"4px","margin-top":"3px","font-size":"12px"}},"内容大纲")])],-1)),T("div",ll,[V(T("textarea",{onInput:s,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value=e),name:"",id:"",cols:"30",rows:"10",placeholder:"# Ai智能工具\n## 部分功能\n- 支持AI聊天\n- 支持微应用\n- 支持自定义创建\n- 支持DEL绘画\n- 支持Midjourney\n- 更多功 能等你探索\n## 更多内容\n-在上面输入您想要生成的内容\n- 点击生成大纲即可\n",class:"contentInp"},null,544),[[z,o.value]])])]))}}),[["__scopeId","data-v-41ea105a"]]),tl={class:"flex"},il={class:"itemName"},ol={key:0,style:{"margin-left":"4px"}},sl={class:"buttonBox"},nl={style:{display:"flex","align-items":"center",gap:"10px"}},ul={class:"y-pop"},rl=q(g({__name:"recordItem",props:{item:Object,selectChatId:Object},emits:["changeTitle","deleteItem"],setup(e,{emit:l}){const a=C();y((()=>"dark"===a.theme));const t=e,i=l,o=w();b(t,(e=>{e.selectChatId&&(o.value=e.selectChatId)})),B.on("changeTitle",(e=>{e&&j(e).then((e=>{200===e.code&&i("changeTitle")}))})),o.value=t.selectChatId;const s=w(),n=w(null);return(e,l)=>(U(),N("div",{class:R(["record-item",[o.value.id==t.item.id?"active":""]])},[T("div",tl,[T("div",il,[t.item.isInp?V((U(),N("input",{key:1,maxlength:"9","onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),onFocus:l[1]||(l[1]=G((()=>{}),["stop"])),onBlur:l[2]||(l[2]=e=>function(e){if(e.isInp=!1,!s.value)return;let l={groupId:e.id,title:s.value};j(l).then((l=>{200===l.code&&(e.title=s.value)}))}(t.item)),ref_key:"inpRef",ref:n,style:{"margin-left":"4px","background-color":"transparent"},placeholder:"请输入文件名称",type:"text"},null,544)),[[z,s.value]]):(U(),N("p",ol,M(t.item.title),1))])]),T("div",sl,[T("div",nl,[Y(J(X),{style:{"border-radius":"8px",width:"126px"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:P((()=>l[5]||(l[5]=[T("div",{class:"more-blo"},[T("div",{class:"more"})],-1)]))),default:P((()=>[T("div",ul,[T("div",{class:"blo",onClick:l[3]||(l[3]=G((e=>(t.item.isInp=!0,void setTimeout((()=>{n.value.focus()}),100))),["stop"]))},l[6]||(l[6]=[T("div",{class:"edit"},null,-1),T("div",{class:"t t1"},"重命名",-1)])),T("div",{class:"blo",onClick:l[4]||(l[4]=G((e=>{return l=t.item,void i("deleteItem",l);var l}),["stop"]))},l[7]||(l[7]=[T("div",{class:"dele"},null,-1),T("div",{class:"t t2"},"删除",-1)]))])])),_:1})])])],2))}}),[["__scopeId","data-v-ae28e1e9"]]),dl={class:"DocumentBox"},cl={class:"topBox"},pl={class:"inpBox dark:bg-[#222325] bg-[#fff]"},vl={key:0,src:"/static/svg/search-a5fa3211.svg",alt:""},gl={key:1,src:"/static/svg/search copy-726f56f2.svg",alt:""},Al={class:"record"},fl={class:"today"},ml=["onClick"],hl={class:"histroy"},yl=["onClick"],xl=q(g({__name:"documentSiderBarContent",props:{changeModelisSuccess:Number,modelInfo:Object},emits:["documentChatLog","handleModelInfo"],setup(e,{emit:l}){var a;const t=Z().appContext.config.globalProperties,i=w(!0);t.$mitt.on("expand",(e=>{i.value=!!e}));const o=h(),{isMobile:s}=A(),n=y((()=>o.isLogin)),u=C(),r=y((()=>"dark"===u.theme)),d=l,c=m(),p=I(),v=w("");w([]);const g=e;b((()=>g.changeModelisSuccess),(e=>{e&&L()}));const f=w([]),x=w([]),k=w([]),D=w(null==(a=g.modelInfo)?void 0:a.model);async function L(){f.value=[],x.value=[],k.value=[],await S({modelType:"file"}).then((e=>{0!=e.data.length?(f.value=e,R(e,0),M.value=e.data[0],H(e.data[0])):Q()}))}function R(e,l){1==l&&(x.value=[],k.value=[]);let a=(new Date).getDate();a<10&&(a="0"+a);const{data:t}=e;t.forEach((e=>{if(e.title=e.title.slice(0,7),null!=e.lastTime){let l=e.lastTime.split(" ")[0].split("-")[2];a==l?x.value=[...x.value,e]:k.value=[...k.value,e]}if(null===e.lastTime){let l=e.createdAt.split(" ")[0].split("-")[2];a==l?x.value=[...x.value,e]:k.value=[...k.value,e]}}))}L();const M=w();function H(e){let l={groupId:e.id,logType:1};F(l).then((async l=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await p.setActiveGroup(e.id);let a=l.data.filter((e=>null!=e.conversationOptions));M.value=e,d("documentChatLog",a),d("handleModelInfo",e)}))}async function Q(){try{if(!n.value)return void o.setLoginDialog(!0);await p.updateChatTab("history"),await p.addNewChatGroupDoc({title:"文档分析对话",model:D.value,modelType:"file"}),await p.queryMyGroupDoc(),await L(),H(f.value.data[0]),s.value&&u.setSiderCollapsed(!0)}catch(e){c.error("创建失败")}}function G(e){K("today",e)}function J(e){K("history",e)}async function K(e,l){if(0==x.value.length&&1==k.value.length||1==x.value.length&&0==k.value.length)c.error("至少保留一个对话");else{if(await p.deleteGroup(l),"today"==e){if(x.value=x.value.filter((e=>e.id!=l.id)),M.value.id==l.id){if(0==x.value.length)return void H(k.value[0]);H(x.value[0])}}else if("history"==e&&(k.value=k.value.filter((e=>e.id!=l.id)),M.value.id==l.id)){if(0==k.value.length)return void H(x.value[0]);H(k.value[0])}c.success("删除成功")}}function j(){L()}return B.on("setFileModel",(e=>{D.value=null==e?void 0:e.model})),b(v,(e=>{if(e){R({data:f.value.data.filter((e=>{if(-1!=e.title.indexOf(v.value))return e}))},1)}else R(f.value,1)})),(e,l)=>(U(),N("div",dl,[T("div",cl,[T("div",{class:"createDocument",onClick:Q},l[2]||(l[2]=[T("p",{class:"text-[#574FFE] dark:text-[#259656]",style:{"font-size":"28px","font-weight":"400"}},"+",-1),T("p",{class:"title"},"新建文档",-1)])),T("div",pl,[r.value?(U(),N("img",vl)):(U(),N("img",gl)),V(T("input",{onInput:l[0]||(l[0]=(...l)=>e.inputSearch&&e.inputSearch(...l)),"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),type:"text",placeholder:"输入名称搜索文档"},null,544),[[z,v.value]])])]),T("div",Al,[T("div",fl,[l[4]||(l[4]=T("div",{class:"recordTitle"},"今天",-1)),(U(!0),N(O,null,E(x.value,(e=>(U(),N("div",{key:e.id,onClick:l=>H(e)},[Y(rl,{onChangeTitle:j,onDeleteItem:G,selectChatId:M.value,item:e},{default:P((()=>l[3]||(l[3]=[W(">")]))),_:2,__:[3]},1032,["selectChatId","item"])],8,ml)))),128))]),T("div",hl,[l[5]||(l[5]=T("div",{class:"recordTitle"},"历史",-1)),(U(!0),N(O,null,E(k.value,(e=>(U(),N("div",{key:e.id,onClick:l=>H(e)},[Y(rl,{onChangeTitle:j,onDeleteItem:J,selectChatId:M.value,item:e},null,8,["selectChatId","item"])],8,yl)))),128))])])]))}}),[["__scopeId","data-v-a7dad007"]]),kl={key:0,style:{"border-radius":"20px 0 0 20px"}},Il={class:"y-box"},Cl={class:"vipTime dark:bg-[#24252b] bg-transparent"},wl=q(g({__name:"newSiderBar",props:{currentRoute:String,changeModelisSuccess:Number,demoValue:String,modelInfo:Object},emits:["documentChatLog","handleModelInfo","value","CreateMind"],setup(e,{emit:l}){const a=Z().appContext.config.globalProperties,t=w(!0);a.$mitt.on("expand",(e=>{t.value=!!e}));const i=y((()=>n.isLogin)),o=C();y((()=>"dark"===o.theme));const s=y((()=>"dark"==o.theme?"#36373E":"rgba(142, 145, 166, 0.15)"));x(),k();const n=h();y((()=>n.globalConfig.clientLogoPath));const u=y((()=>n.userInfo));y((()=>n.userInfo.vipExpire)),!u.value||!u.value.lifetimeVip||u.value.lifetimeVip,_();const r=w(!1),d=w(!1);B.on("closeSideBar",(e=>{r.value=e,e?d.value=e:setTimeout((()=>{d.value=e}),100)}));const c=e,p=w();b(c,(e=>{e.demoValue&&(p.value=e.demoValue)}));const v=w(0);b(c,(e=>{e.changeModelisSuccess&&(v.value=e.changeModelisSuccess)}));const g=l;function A(e){g("documentChatLog",e)}function f(e){g("handleModelInfo",e)}function m(e){g("CreateMind",e)}return(e,l)=>t.value?(U(),N("div",kl,[T("div",{class:R(["dark:bg-[#24252b] bg-[#fff]",r.value?"close":"siderMain"])},[T("div",{class:"mainBox1",style:$(d.value?{display:"none"}:"")},[T("div",Il,["/chat"==c.currentRoute?(U(),Q(Ze,{key:0})):H("",!0),"/mindMap"==c.currentRoute?(U(),Q(al,{key:1,onCreateMind:m,demoValue:p.value},null,8,["demoValue"])):H("",!0),"/document"==c.currentRoute&&i.value?(U(),Q(xl,{key:2,changeModelisSuccess:v.value,onDocumentChatLog:A,onHandleModelInfo:f,modelInfo:c.modelInfo},null,8,["changeModelisSuccess","modelInfo"])):H("",!0)]),T("div",{class:"vipTimeBg",style:$({"border-top":`2px solid ${s.value}`})},[T("p",Cl,M(1==u.value.lifetimeVip?"会员到期时间:永久会员":u.value.vipExpire?"会员到期时间:"+J(ee)(u.value.vipExpire,"YYYY-MM-DD"):"暂未开通会员"),1)],4)],4)],2)])):H("",!0)}}),[["__scopeId","data-v-b4180133"]]),bl={class:"contentBox"},Bl=q(g({__name:"documentContent",emits:["uploadIsSuccess"],setup(e,{emit:l}){const a=h(),t=y((()=>a.isLogin)),i=C(),o=le(),s=m(),n=w("/api/file/upload2Local"),u=l,{selectFile:r,upload:d}=ve();function c(){t.value?async function(e=1){let l;if(1===e){if(l=await r(),!l)return void s.error("选择文件错误")}else l=e;A.value=!0;const a=new FormData;a.append("file",l),await ae.post(n.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;v.value=e.split(".").pop(),p.value=e.split("/ai/")[1],g.value=l.data.data,A.value=!1,u("uploadIsSuccess",g.value)}1!==e&&o.updateRecordDialog(!1)}))}():a.setLoginDialog(!0)}y((()=>"dark"===i.theme));const p=w(""),v=w(""),g=w(""),A=w(!1);return(e,l)=>(U(),N("div",bl,[T("div",{class:"upLoadBox"},[l[1]||(l[1]=T("span",{style:{"font-size":"48px","font-weight":"500",color:"#000000"}},"文档解读",-1)),l[2]||(l[2]=T("span",{style:{"font-size":"18px",color:"#6A6A6A"}},"文档描述语文档描述语文档描述语文档描述语文档描述语文档描述语文档描述语",-1)),T("div",{onClick:c,style:{padding:"48px",width:"720px","border-radius":"12px",border:"1px dashed #726AFB",display:"flex","flex-direction":"column","align-items":"center","margin-top":"24px",cursor:"pointer"}},l[0]||(l[0]=[T("img",{src:"data:image/png;base64,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",alt:""},null,-1),T("div",{style:{"text-align":"center","margin-top":"8px","font-size":"16px","font-weight":"500"}},[T("p",null,"上传文档")],-1),T("div",{style:{"font-size":"12px","margin-top":"24px"},class:"text-[#6A6A6A] dark:text-[#6C6E79]"},[T("p",null,"支持PDF、JPG、PNG、DOC、TXT、XLS、PPT等17种文档格式"),T("p",null,"请不要上传敏感数据，比如私密、隐私文档等内容（最大1MB）")],-1)]))])]))}}),[["__scopeId","data-v-49dbf792"]]),Sl={class:"messageBox"},Dl={style:{width:"100%",display:"flex","justify-content":"flex-end","margin-top":"24px"}},Fl={key:0},Ll={key:0,style:{display:"flex","justify-content":"flex-end"}},Ul=["src"],Nl={key:1,class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{padding:"8px","border-radius":"8px",display:"flex","align-items":"center"}},Tl={style:{"margin-left":"5px"}},Rl={style:{"font-size":"15px"}},Ol={style:{"font-size":"12px"}},El=["innerHTML"],Ml=["innerHTML"],Hl={key:0,class:"model-line"},Vl=["src"],zl={class:"name"},Ql={style:{"margin-top":"24px",display:"flex","align-items":"flex-start","flex-direction":"column"}},Gl={style:{display:"flex","align-items":"flex-start"}},Jl={key:0,class:"chatLeft"},Kl=["innerHTML"],jl={style:{display:"flex","align-items":"center"}},ql=["onClick"],Yl={key:0,src:me,alt:""},Pl={key:1,src:he,alt:""},Xl=["onClick"],Zl={key:0,src:ye,alt:""},Wl={key:1,src:xe,alt:""},_l=["onClick"],$l={key:0,src:ke,alt:""},ea={key:1,src:Ie,alt:""},la={class:"sticky bottom-0 left-0 flex justify-center"},aa=q(g({__name:"documentChatLog",props:{dataList:Array,modelInfo:Object,handleSendMessage:String},emits:["haveNotData","chatDataLength"],setup(e,{expose:l,emit:a}){var i;const o=Z().appContext.config.globalProperties,{updateGroupChat:s,updateGroupChatSome:n}=ge(),{usingContext:u}=Ae(),r=I(),d=m(),c=h(),p=C(),v=y((()=>"dark"===p.theme)),g=w(""),A=w(""),f=le(),{usingNetwork:x}=fe();let k=new AbortController;const S=w({name:"",logo:""});o.$mitt.on("modelData",(e=>{S.value=e})),y((()=>{var e;return JSON.parse((null==(e=W.value)?void 0:e.config)||"{}")})),te({keys:["dialogueTail","robotAvatar"]}).then((e=>{g.value=e.data.dialogueTail,A.value=e.data.robotAvatar}));const D=a,F=e,L=w("");F.modelInfo&&(L.value=null==(i=F.modelInfo)?void 0:i.model),B.on("setFileModel",(e=>{L.value=null==e?void 0:e.model}));const V=w(),z=w(),Q=w(!1),G=w(!1);b(F,(e=>{if(e.dataList&&0==e.dataList.length&&(Q.value=!0),e.handleSendMessage){de(e.handleSendMessage)}})),b((()=>F.dataList),((e,l)=>{var a;String(e)!==String(l)&&(V.value=e,a=V.value,V.value=a.filter((e=>null!=e.conversationOptions)),V.value.forEach((e=>{let{text:l}=e;null!=l&&(e.text=ie(l))})),setTimeout((()=>{pe()}),100))}),{immediate:!0}),b(z,(e=>{let l=ce.value;l.scrollTop=l.scrollHeight})),ie.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});const K=y((()=>r.chatList)),j=w(!1),q=y((()=>r.active)),X=w(!0),W=y((()=>r.groupList.find((e=>e.uuid===q.value)))),_=y((()=>Number(null==r?void 0:r.activeModelKeyType))),ee=y((()=>K.value.filter((e=>!e.inversion&&!e.error)))),ae=w();async function de(e){var l,a;if(G.value)return;let i=e;if(!i||""===i.trim())return;k=new AbortController,ie.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});let o={dateTime:(new Date).toLocaleString(),text:"AI思考中",inversion:!0,error:!1,conversationOptions:null,requestOptions:{prompt:i,options:null}};V.value=[...V.value,o],Q.value&&D("chatDataLength",V.value),setTimeout((()=>{pe()}),100);let p={};p={groupId:+q.value,usingNetwork:x.value};const v=null==(l=ee.value[ee.value.length-1])?void 0:l.conversationOptions;v&&u.value&&!x.value&&(p={...v,...p});let g=null;g=V.value.length>1?V.value[V.value.length-2]:V.value[0];const A=(null==(a=null==g?void 0:g.conversationOptions)?void 0:a.parentMessageId)||"";console.log(g),p={...p,model:L.value,type:"file",parentMessageId:A};let m="",h="",y=0;const I=w("");let C=null;j.value=!0;let b={};f.updateIsChatIn(!0);try{const e=async()=>{G.value=!0,ae.value=setInterval((async()=>{var e;if(m[y]&&h.length<m.length&&(h+=m[y]),m[y]&&(X.value=!1,V.value[V.value.length-1].text=h,z.value=h,V.value[V.value.length-1].text=ie(V.value[V.value.length-1].text),V.value[V.value.length-1].conversationOptions={parentMessageId:C.id},I.value=h,y++),!j.value&&h.length>=m.length&&(I.value="",y=0,z.value="",h="",ae.value&&clearInterval(ae.value),ae.value=null,B.emit("getUserInfo",!0),G.value=!1,X.value=!0,n(K.value.length-1,{loading:!1}),f.updateIsChatIn(!1),b&&c.updateUserBanance(b),2===K.value.length&&!(null==(e=null==W?void 0:W.value)?void 0:e.appId))){const e=K.value[1].text.length>15?K.value[1].text.slice(0,15):K.value[1].text;await r.updateGroupInfo({groupId:+q.value,title:e}),await r.queryMyGroup()}}),16),await ue({prompt:i??"",appId:W.value?W.value.appId:0,options:p,signal:k.signal,onDownloadProgress:({event:e})=>{var l;const a=e.target,{responseText:t}=a;if([1,7].includes(_.value)){const e=t.lastIndexOf("\n",t.length-2);let l=t;-1!==e&&(l=t.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("OpenAI timed out waiting for response")&&d.warning("会话超时了、告知管理员吧~~~")}}if([2,3].includes(_.value)){const e=t.toString().split("\n").filter((e=>""!==e.trim()));let l="",a={};for(const t of e)try{const e=JSON.parse(t);l=e.text,a=e}catch(i){}a.result=l,C=a}if([4].includes(_.value)){const e=t.lastIndexOf("\n",t.length);let l=t;-1!==e&&(l=t.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("xunfeizhipu timed out waiting for response")&&d.warning("会话超时了、告知管理员吧~~~")}}try{if([1,7].includes(_.value)&&(m=C.text,j.value=!C.is_end,(null==(l=null==C?void 0:C.detail)?void 0:l.usage)&&(X.value=C.is_end,b=null==C?void 0:C.userBanance)),[2,3].includes(_.value)){const{result:e,is_end:l}=C;m=e,j.value=!l,(null==C?void 0:C.userBanance)&&(b=null==C?void 0:C.userBanance)}if([4].includes(_.value)){const{text:e,is_end:l}=C;m=e,j.value=!l,(null==C?void 0:C.userBanance)&&(b=null==C?void 0:C.userBanance)}}catch(i){console.log(i)}}})};await e()}catch(S){V.value[V.value.length-1].text=S.message,f.updateIsChatIn(!1),clearInterval(ae.value),j.value=!1,(402===S.code||(null==S?void 0:S.message.includes("余额不足"))||(null==S?void 0:S.message.includes("免费额度已经使用完毕")))&&f.updateVipDialog(!0);let e=(null==S?void 0:S.message)??t("common.wrong");if("Request failed with status code 401"===e&&(e="非法操作、请先登录后再进行问答使用！"),null==S?void 0:S.message.includes("canceled"))return n(K.value.length-1,{loading:!1}),void setTimeout((()=>{c.getUserBalance()}),200);const l=K.value[K.value.length-1];if((null==l?void 0:l.text)&&""!==l.text)return void n(K.value.length-1,{text:`${"AI思考中"===l.text?"":l.text}\n[${e}]`,error:!1,loading:!1});s(K.value.length-1,{dateTime:(new Date).toLocaleString(),text:e,inversion:!1,error:!0,loading:!1,conversationOptions:null,requestOptions:{prompt:i,options:{...p}}})}finally{j.value=!1,G.value=!1}}const ce=w(null);function pe(){let e=ce.value;e&&e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})}function ve(){G.value&&(k.abort(),G.value=!1,j.value=!1,X.value=!0,clearInterval(ae.value))}return l({clearChatData:()=>{V.value.length=0,G.value=!1}}),(e,l)=>{const a=oe("SvgIcon");return U(),N("div",Sl,[T("div",{class:"chatLogBox",ref_key:"toTop",ref:ce},[(U(!0),N(O,null,E(V.value,(e=>{var a,t,i,o,s,n,u,r,c,p,g,A,f,m,h,y;return U(),N("div",{class:"LogItem",key:e.chatId},[T("div",Dl,[-1!=(null==(a=e.requestOptions)?void 0:a.prompt.indexOf("http"))?(U(),N("div",Fl,[-1!=(null==(t=e.requestOptions)?void 0:t.prompt.indexOf("png"))||-1!=(null==(i=e.requestOptions)?void 0:i.prompt.indexOf("jpg"))||-1!=(null==(o=e.requestOptions)?void 0:o.prompt.indexOf("jpeg"))?(U(),N("div",Ll,[T("img",{style:{width:"150px",height:"auto"},src:null==(s=e.requestOptions)?void 0:s.prompt.split(" ")[0],alt:""},null,8,Ul)])):(U(),N("div",Nl,[l[0]||(l[0]=T("div",{style:{"background-color":"#10a37f",padding:"4px","border-radius":"4px",display:"flex"}},[T("img",{style:{width:"30px",height:"30px"},src:"/static/svg/file-16b3e23d.svg",alt:""})],-1)),T("div",Tl,[T("p",Rl,M(null==(u=null==(n=e.requestOptions)?void 0:n.prompt)?void 0:u.split("/ai/")[1].split(" ")[0]),1),T("p",Ol,M(null==(A=null==(g=null==(p=null==(c=null==(r=e.requestOptions)?void 0:r.prompt)?void 0:c.split("/ai/")[1])?void 0:p.split(" ")[0])?void 0:g.split(".")[1])?void 0:A.split(" ")[0]),1)])])),(null==(f=e.requestOptions)?void 0:f.prompt.split(" ")[1])?(U(),N("div",{key:2,class:"chatRight1 dark:bg-[#222325] bg-[#F0F0F0] markdown-body-generate",innerHTML:null==(m=e.requestOptions)?void 0:m.prompt.split(" ")[1]},null,8,El)):H("",!0)])):H("",!0),-1==(null==(h=e.requestOptions)?void 0:h.prompt.indexOf("http"))?(U(),N("div",{key:1,class:"chatRight dark:bg-[#222325] bg-[#F0F0F0]",innerHTML:null==(y=e.requestOptions)?void 0:y.prompt},null,8,Ml)):H("",!0)]),S.value.name?(U(),N("div",Hl,[T("img",{class:"img",src:S.value.logo,alt:""},null,8,Vl),T("span",zl,M(S.value.name),1)])):H("",!0),T("div",Ql,[T("div",Gl,[null==e.text||""==e.text?(U(),N("div",Jl," 接口错误，请联系管理员处理~ ")):(U(),N("div",{key:1,class:"chatLeft markdown-body-generate markdown-body-text",innerHTML:e.text},null,8,Kl))]),T("div",jl,[T("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:R(v.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){if(e.text){const{text:l}=e;se({text:l}),d.success("复制成功")}else d.error("复制失败")}(e)},[Y(J(re),{trigger:"hover",placement:"bottom",style:$([{"border-radius":"8px"},v.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:P((()=>[v.value?(U(),N("img",Yl)):(U(),N("img",Pl))])),default:P((()=>[l[1]||(l[1]=T("span",null,"复制",-1))])),_:1,__:[1]},8,["style"])],10,ql),T("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:R(v.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){let{prompt:l}=e.requestOptions;de(l)}(e)},[Y(J(re),{trigger:"hover",placement:"bottom",style:$([{"border-radius":"8px"},v.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:P((()=>[v.value?(U(),N("img",Zl)):(U(),N("img",Wl))])),default:P((()=>[l[2]||(l[2]=T("span",null,"刷新",-1))])),_:1,__:[2]},8,["style"])],10,Xl),T("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:R(v.value?"handleIcon":"handleIcon1"),onClick:l=>async function(e){var l;let a={id:e.chatId};await ne(a).then((l=>{var a;V.value=null==(a=V.value)?void 0:a.filter((l=>l.chatId!=e.chatId)),d.success("删除成功")})).catch((e=>{d.error("删除失败")})),0==(null==(l=V.value)?void 0:l.length)&&D("haveNotData")}(e)},[Y(J(re),{trigger:"hover",placement:"bottom",style:$([{"border-radius":"8px"},v.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:P((()=>[v.value?(U(),N("img",$l)):(U(),N("img",ea))])),default:P((()=>[l[3]||(l[3]=T("span",null,"删除",-1))])),_:1,__:[3]},8,["style"])],10,_l)])])])})),128)),T("div",la,[G.value?(U(),N("div",{key:0,onClick:ve,class:"stopBox"},[Y(a,{icon:"ri:stop-circle-line"}),l[4]||(l[4]=T("p",{style:{"margin-left":"8px"}},"停止输出",-1))])):H("",!0)])],512)])}}}),[["__scopeId","data-v-6359a07c"]]),ta="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACKSURBVCiRnZK7DYAwDERfQcEAjEPBRmSXZIOUyVYMwAjQXJCBRHxOsizLPt05MZwxARFYgE05AiMVdIDXYCu85g6EB4IlHpZsY32oR+TZDgxAVp1VW2LELF0iAT3glNOlv9Dw7mTdNfo3pSyFWTnXlGo7FUuptdOv1/vyTwGD7gUxcLmIgokXt7cDc/V1fVYJawsAAAAASUVORK5CYII=",ia={class:"mainBox"},oa={class:"bg-[#ffffff] dark:bg-[#19191B] border dark:border-[#57585e] border-[#E0E2E9]",style:{"border-radius":"15px",width:"850px",position:"relative"}},sa={style:{flex:"1",display:"flex","flex-direction":"column"}},na={key:0,class:"fileBox",style:{position:"relative"}},ua={class:"file bg-[#FFFFFF] dark:bg-[#111113]"},ra={key:0,style:{width:"60px",height:"60px",position:"relative"}},da=["src"],ca={key:0,style:{position:"absolute",left:"20px",top:"20px"}},pa={key:1,style:{"background-color":"#F5F5F5",width:"211px",height:"50px","border-radius":"8px",display:"flex","justify-content":"center","align-items":"center",position:"relative",padding:"6px 9px"}},va={key:0,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIGSURBVFiF7Za/axRBFMe/b2YjR9ziAoecveI/cGgMSbGFhaXkCKcIcmCvIGIlpLSzsrK/H4HcHaRIxOIQPTeghYWFxRUHphC02CLiRWbnWRyR4/bn5Ha5Jp9y3uO9z+7OvB1gwVBUoNHol6yLyzfY16XYAkq+2dq6/iNTgXbPfQaNbRAKSQU04BCJa1r57+5V176ZCojZhVZnUAPjRZrmp7CvLksJd6fzfn1uASHkE9MiE6jIZO2bSgQEmLlyNgEAgG0qERDIAJvJ6jd3B9VFCQCAJYRoppHIS+C/RKszqOUqQMx2nASRaLa6Hx/nJsDMFYI8AGEclUOgl1ESgUHU7rps6HBM0BtSy19/BV+JSywXxx8cx1HTa5ZhszBshvikSPckiaHv+ydRiT+9Cx6AL1kLTOoQVZkZQkR/VR8YzQrkeQpSEf8GCGPNuI2JeTCsqUyC3wKIOwlzCDCUr2l4f3P1KCzc2OsfS1UY5ycA2EuCv7e7bnhUhS+bsPA9cC6QOAcIOAIwNCnKQAUpN2aCAHm/vT9X63Uncs6H0eq5D4nxOgMBLi6vFB61O67ZrZfxIG1q8iieXFBzI7gJY36r80JMgdoBAWJ8zkuAiQ8TBbSmp8hkxs1251d379wcJQrUNlcPNXALwNdsOpMH6OeXVk7S3Yimaez1S6QKZ/7RAEDYU58zzT8KgKqaT0KI9QAAAABJRU5ErkJggg==",alt:""},ga={key:1,style:{position:"absolute",left:"20px",top:"20px"}},Aa={class:"infoBox",style:{display:"flex","flex-direction":"column","justify-content":"space-between","font-size":"14px",color:"#3D3D3D",width:"160px"}},fa={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ma={class:"size"},ha={key:2,style:{"background-color":"#F5F5F5",width:"211px",height:"50px","border-radius":"8px",display:"flex","justify-content":"center","align-items":"center",position:"relative",padding:"6px 9px"}},ya={key:0,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAJ7SURBVEiJzdVfaFJRHAfw71XvTW9r4tJNZAzZbHPBZkKDFi4abA++KbtuBQ0aVA9B4Wu9xXrbg1D0EEU99LDWjPYyjVa4aCOKWLPhclLUQkQQpoJcNv/dnm540fxzU+n7dM7vnPv7cLgcDgE+PtdFEMRjiAxJSGBvP3b3Wb/1eqW9koKxXizIp00mvza57b1XC1qXtJHyq46A535TUQA4Simu2ALLT5uKAoCWoqfs28sLTUUBoIOkJ5mAZ7FhaB4c8hxXVFdTCsYR8LgLa7J6oTmOgzsWwhEpVWp5ovfTk0uhk9MP64oCwF5mH3uZ/dKLHJflhw39p39LWfRB7xhWBu3QUnRVzYy0Cu/NU5jVD4tHL3QYMabqgs/EVISNtAo+E4NTrVqca+8Tj04HXyLL5f+cwEirSu6zKHV4d8IBLUUjlctgZueVeNQd+4bzX73Icnno5a3wmSaKYItSB++ADWpSgUT2ANatJawlI+JRHh7/8gKpXAZa6rAA5sEWKYlomsXw54WKYFUoAKwmwrBuLQngGe1xATjqdyPIxqtpV/2VWUtGBPCjvnFRYE0oD7vCG4LazR/rNYE1o4zGgBtdQ4LaHcNZWJS6xqCMxoD5fitkhARBNo5R/3NE0yxapCS8A7aa4KrQYtCN1UQYo363KLgi6uw0F4HRNAsAgnmLlMTKoB2MxvBvqLPTDFfPGcgICTZTMQHIh4fDBynIJTLM91thU/eIR+e6LQCA9WQEI5uLRWAhPLQxjyAbh4yQYK57pCxa9j29tfsB+kOtcH5/i1QuU7YRf19n9afxJvFLPHp792PZj0vBl0OvK+77/x7xZqA/G+hkAYT5yW/WQP+G8QaljwAAAABJRU5ErkJggg==",alt:""},xa={key:1,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAdCAYAAABbjRdIAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAINSURBVEiJzdRLaBNBHMfx7+w2KSa1KYJYQUIPSiFghPYiCIJGEEXE1gfoRVAEL71Z8OQxBw/14gNa6MGLeOihRYQcCoKIIlQUkpb4iFBMW4gPsLXZ18x4sAYqtt1Ns9EfLAzs/vnMzv/PCFayOJBJKa2GgMNAhIApz397kBp7fWG9bwyAyqUDW5VWk8DReiAA23HP5/vSwxti0XjkJNBZD/IHeKXQl765LoZmz2ah37Ecd7Bwet/1tbEGx7ac7HR/+nJTMA3Cctzhwpm9x0LBDCFWgxrDtuX4dH96f8OxjkQMwxAIQe1B64jjycmZsz29AC2Nw+J0JOJ/exUDfQKYCqVna6WpmO9jNHYkMTqTyFIBc9dudHUJOfsWlGw8Fuk5ROvxi2jPRbT8utHUlwWq97PIUt7fhn1vayWqUsZ6eAt7YgTRuoXY1SyifZuv2sDTuHz7Gvr7VwC84ivig/eIHjyF/Wh0w9rAf6Ydq7aWs0VUpYyZ7PZVu+lpFLE2cJ1wMHNnV20dzZxDxBN4My991QbuWWxgCFmcQrQlMLtSyE8fcF7kwsHkxzxmdy8oifP8MfbYHfD8HWPwaRy5AdZy0DKgydfV/3k3um+eoj6XwXPDx9RcCTVXqhuCf9EzU/AuVEXxvoZVf7gTwEIYjhDMt8N4Dds++mzREEYGyAH1T8DquEBOYBwRd58sAfwEdaeu9dF+Uf0AAAAASUVORK5CYII=",alt:""},ka={key:2,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIKSURBVFiF5ZVNSFRRFMd/82Z8ODqOZPNBFCiICQYaJH6gDlJQ2EJBXLiNCaK1LgQRJsVFEuHCjYIJ4kor+sD8ILAGhkTEhUQogiAogTkKqfj5fC1uMOHM9J6jb0brD5dzOee8c37v3gMX/neZjjuqO1X3gcKsCVyxFHxYyZeNHe55y02bevKl447Dfa7E2hwgw0ZpYSbj/WNqakwAZyFHGiX5Nxjrfq+mJAQAwGmjrLiA0b4JNTkhAABOOxU3sxkZHFTlhAAAuOxUXi/lg29CtcQFIBhh9p1p3KnJZtjnU8P6RaQ6jXo/w0AgYuhuiosiYNJQAIC9wyj+XcIihs+AljQBHDZ44RXLYdNX1OsR+V6Pdq7mFUgSuNNDez2yW8U3dqt27vm/gr9JNuv7S0MAkpOgox4GHkFZTpwBZDO01UKOG8wSNFZB3tU4AZglaLgvGipHsLQGsgVaayHzchwAHt+G8t9H/mwEml/B8jpYk6C9Dq5lGAjwoAKq8sW+5xP452FjG5pfCnspFVqqhTUEwJMr7OtpeDsT8q9tQdMQ/NwRJ3AryyAAgPGv0OsP9y+vQ9s72D04Wb0TAQQWoOtj9Pi3FXg6LIYTYF85A4DgFkwtiubPR0PFo2lqUUAsBcE/pw2g+RYoR/DkjXahPxVYEEuPLvZb8G8CWGS+q7BqQK8fisyKAXUvuH4BNACC/1h6aasAAAAASUVORK5CYII=",alt:""},Ia={key:3,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAItSURBVFiF5ZZNaBNBFIC/zbqbvyIWq6FSSCj2FEHB1hqLP1ijngUvRVDw56QipaAHwb2IEr0qKoXeRApFL1Zj8SAo8VBtFZQI0l4qVasU0mqSahwPU4k2Ocwm04biu7ydt/PmffNm3szA/y7GQoPoPBbCMl8DaysasTWaYi67z0icnVHp7im1GI0VBwfweWOEQo9Ez5VgZQA6JODfSuOapDjhBGoDICE6aAk/FEccX20AAOoC29kQeSAOOnZtAACC/l20RwaF46xYGoBsrhxEJ8HwfeE4JfHKUlUlL97C6Ltyf/biNbcAzxcXAKBQKG+fKfxcaNKzBKHVsCcGzU2uXavPgG3B1R5oqJfti7fg6Utl9+oz0BKWwf8Eja535V49QMMqqZ8MS/3m/RIDTGekPncU0uOu0q8H4NNXqTPf4HKva3cNSzC/+RJ9RRgXol4FK+vA54VcHjKz0razFU51yW9DuA6uDtB9GOKxYnv2O0xOyQpIj0NkHexog5G0awC1JdjdDtk89A7INNsWpF5B31156vm8sG0jBP2uAdQycGcQDsRhf4cst3uPi7u/PylPwpNdcDsBA0PSlssrDV36Jowf34TpGVGfw7w0N8G18zD3A75Mw4XrMPHx3z4F2oyhm8N/m/Rdx2MTkHwmg9oWnDmk5Kb3PXCjH0xTlqZtKbnovY5zeTh9CTZHIT1WAwCQeyA1qtx98d+Eyw/gl5gEPusPJabwiA/6x13u8huf8I9edeOjigAAAABJRU5ErkJggg==",alt:""},Ca={key:4,style:{position:"absolute",left:"20px",top:"20px"}},wa={class:"infoBox",style:{display:"flex","flex-direction":"column","justify-content":"space-between","font-size":"14px",color:"#3D3D3D",width:"160px"}},ba={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Ba={class:"size"},Sa={key:0,style:{width:"20px",height:"20px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAArCAYAAAD/lEFzAAAAAXNSR0IArs4c6QAAAmFJREFUWEft2LuqFEEQxvF/eUHxmhuaKl5AQfGCoYEPIJj5AOJdxEQUFT2K4COY+BBiIF7QVBThRCa+gB7FA2o731JnacfdneqezZyJlmW6+0d1d3VNGz2flNIqYC9wAtDvZ8BrM/tZ27XVNlQ7Bx0A7gC7vK/3wBXgjZn9rum/GpWB7gGCrXbAL4GAy7WwKtQM0EpgesGKUQFQb1gRqgDUCxZGVYCqYSFUD1AVrBPVAUrAjyYlrPMcJYTSwDKwHsj7Dy/+magOkJLjO+AzcAzY7GH5CjwHtnnuWpPlqhBsKqoDpM5fAreAQ8A5YIsP/gV4CLwCrgGHsxymVzphE1EBkJLjBeCDg5QoNzlqCVBCFWxHE8EHreTaCfsHFQSNsnUz+AbgogNzlCD3m6z+3UHtrD8T9heqBKRzLaUkyFSUmS2V9intGFXTOIJqHdyhiI1QNSBv1xmplZ1XNEZKaS2w3xdnftp3LshopAphNy2ldNS39sHSrVuKCs7KR6FuAGeaLby1NMnVoAKwZaGuA2czVGdyy6YjvKbaFeiMNTZC7QMWgD3eUEfH1UjVWBupCWvsLrDT//8klM4m1ddH/DB9CixG6uu+KJ9KldG7s/Ff5HlKpzpmplM/9MwDlUVtPH5n6TJLN09UPs6ACq2JVmUYbTN+b5i+aMiGSA2RmhCBIU9Fl8UQqSFS0z5G9d0Xjc5/USVcAs637hJ0j7BgZrqBKX767r6NDtIVtX7r0ZTdBh6Z2bdi0RxKF9XXx/2GZbsDFoHTwFsz06Va8dMrUhotpaTvxVPASR/9CfC4Nkrq4w/WMdkx8DYhDAAAAABJRU5ErkJggg==",alt:""},Da={key:1,style:{width:"20px",height:"20px"},src:we,alt:""},Fa={class:"btnBox"},La=q(g({__name:"documentSend",props:{changeChatLog:Boolean,modelInfo:Object,fileUrl:String},emits:["handleSend","handleInp"],setup(e,{emit:l}){y((()=>a.isLogin)),x(),k();const a=h(),t=m(),i=C(),o=y((()=>"dark"===i.theme)),s=l,n=w(),u=w(),{selectFile:r,upload:d}=ve(),c=le(),p=w("/api/file/upload2Local");function v(){(n.value||u.value)&&(n.value?u.value?n.value&&u.value&&s("handleSend",u.value+" "+n.value):s("handleSend",n.value):(console.log(u.value,"fileMessage.value"),s("handleSend",u.value+" 请用中文分析一下上传的这个文件")),Q.value=!1,S.value="",L.value="",n.value="",u.value="")}function g(e){n.value&&("Enter"===e.key&&e.shiftKey?(e.preventDefault(),n.value=n.value+"\n"):"Enter"!==e.key||e.ctrlKey||e.shiftKey?"Enter"===e.key&&(e.preventDefault(),v()):(e.preventDefault(),v()))}const A=e;function f(){u.value?s("handleInp",u.value+" "+n.value):s("handleInp",n.value)}B.on("sendSuccess",(()=>{n.value="",u.value=""}));const I=w(!1);b(A,(e=>{if(Q.value=!1,e.modelInfo&&(I.value=e.modelInfo.canUpload),e.fileUrl){let l=e.fileUrl;L.value=l,u.value=l,Q.value=!0,F.value=l.split(".").pop(),S.value=l.split("/ai/")[1],R.value=!1}})),B.on("setFileModel",(e=>{I.value=e.canUpload}));const S=w(""),D=w(""),F=w(""),L=w(""),R=w(!1);async function O(e=1){let l;if(E.value=!1,1===e){if(l=await r(),!l)return void t.error("选择文件错误")}else l=e;R.value=!0,Q.value=!0;const a=new FormData;a.append("file",l),await ae.post(p.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{if(a.data){D.value=function(e){if(0===e)return"0 Bytes";const l=1024,a=["Bytes","KB","MB","GB","TB"],t=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,t)).toFixed(2))+" "+a[t]}(l.size);let{data:e}=a.data;F.value=e.split(".").pop(),S.value=e.split("/ai/")[1],L.value=a.data.data,u.value=e,s("handleInp",L.value),R.value=!1}1!==e&&c.updateRecordDialog(!1)}))}const E=w(!1),Q=w(!1);return(e,l)=>(U(),N("div",ia,[T("div",oa,[T("div",{class:"inpBox",style:$(Q.value?"height: 208px;":"")},[T("div",sa,[Q.value?(U(),N("div",na,[T("div",ua,["png"==F.value||"jpeg"==F.value||"jpg"==F.value?(U(),N("div",ra,[T("img",{src:L.value,style:{width:"60px",height:"60px","border-radius":"5px"},alt:""},null,8,da),R.value?(U(),N("div",ca,l[7]||(l[7]=[T("div",{class:"loader"},null,-1)]))):H("",!0),L.value?(U(),N("img",{key:1,src:ta,onClick:l[0]||(l[0]=e=>{Q.value=!1,L.value=""}),style:{position:"absolute",right:"-6px",top:"-6px",cursor:"pointer"},alt:""})):H("",!0)])):"txt"==F.value?(U(),N("div",pa,[R.value?H("",!0):(U(),N("img",va)),R.value?(U(),N("div",ga,l[8]||(l[8]=[T("div",{class:"loader"},null,-1)]))):H("",!0),R.value?H("",!0):(U(),N("img",{key:2,src:ta,onClick:l[1]||(l[1]=e=>{Q.value=!1,S.value=""}),style:{position:"absolute",right:"-6px",top:"-6px",cursor:"pointer"},alt:""})),T("div",Aa,[T("span",fa,M(S.value),1),T("span",ma,M(F.value+"·"+D.value),1)])])):(U(),N("div",ha,[R.value||"xls"!=F.value&&"xlsx"!=F.value?H("",!0):(U(),N("img",ya)),R.value||"ppt"!=F.value&&"pptx"!=F.value?H("",!0):(U(),N("img",xa)),R.value||"doc"!=F.value&&"docx"!=F.value?H("",!0):(U(),N("img",ka)),R.value||"pdf"!=F.value?H("",!0):(U(),N("img",Ia)),R.value?(U(),N("div",Ca,l[9]||(l[9]=[T("div",{class:"loader"},null,-1)]))):H("",!0),R.value?H("",!0):(U(),N("img",{key:5,src:ta,onClick:l[2]||(l[2]=e=>{Q.value=!1,S.value=""}),style:{position:"absolute",right:"-6px",top:"-6px",cursor:"pointer"},alt:""})),T("div",wa,[T("span",ba,M(S.value),1),T("span",Ba,M(F.value+"·"+D.value),1)])]))])])):H("",!0),V(T("textarea",{style:$(Q.value?"height: 72px;margin-top:10px;":""),onKeydown:g,class:"inp","onUpdate:modelValue":l[3]||(l[3]=e=>n.value=e),type:"text",name:"",id:"",placeholder:"在此输入您想了解的内容，输入shift+回车换行",onInput:f},null,36),[[z,n.value]])]),T("div",{class:"dark:bg-[#23A559]",style:$([{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(54px)"},(n.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;")+(Q.value?"transform: translateY(146px);":"")]),onClick:v},[o.value?(U(),N("img",Sa)):(U(),N("img",Da))],4),o.value&&E.value?(U(),N("div",{key:0,class:"upLoadModel1",onClick:l[4]||(l[4]=e=>O(1))},l[10]||(l[10]=[T("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#222325"}},[T("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:Ce,alt:""}),T("p",null,"从电脑中上传")],-1)]))):H("",!0),!o.value&&E.value?(U(),N("div",{key:1,class:"upLoadModel",onClick:l[5]||(l[5]=e=>O(1))},l[11]||(l[11]=[T("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#f0f0f0"}},[T("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:Ce,alt:""}),T("p",null,"从电脑中上传")],-1)]))):H("",!0),T("div",Fa,[I.value?(U(),N("div",{key:0,class:"btnItem1",onClick:l[6]||(l[6]=e=>function(e=1){O(e)}(1))},l[12]||(l[12]=[T("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEhSURBVDiNrdQ9SgNRFMXxnzjgFCkssgJBsQzR1uzBFCmyAAtdgBvQBailKdxBQLcgSppUInY2gqQJCimiGGIxNxDCDE4kp3nM/71z7uV9DCvU+pLrd3GADXzi5z9F99AL8zTGd7SXDTrECBN0cIJzDIM1ywa1ootRhM6rji8Myoad4hWNgvl+FKsWBSQ4wvYCu4hOasEq+MC4KKiCW9leXAVL0Q32FF0kwaa4zgtK8RCm+wjeDDbFY3xXYn4SLM0L64SpG5Wr0ckk2Mx0GewugnM1jj2YLajhO8zJ3Lod2Z4mClSVnUq/YL6BN9npltJAdlr1BT5/aVtlw5phGOIMx7gJlndp/1Rb9ubm32AP+2XMazkslf0dtvCMl2U7Wol+AUlkSfZe6/hdAAAAAElFTkSuQmCC"},null,-1)]))):H("",!0)])],4)])]))}}),[["__scopeId","data-v-4ad9ecdd"]]),Ua={style:{display:"flex",height:"100%"},class:"bg-[#fff] dark:bg-[#1b1c22]"},Na={class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{width:"466px",height:"394px","border-radius":"24px"}},Ta={style:{display:"flex","justify-content":"space-between",padding:"16px"}},Ra={style:{flex:"1",display:"flex","justify-content":"center",height:"calc(100% - 56px)","align-items":"center","padding-bottom":"24px"}},Oa={style:{padding:"24px 24px 12px 24px","border-radius":"12px","background-color":"#fff",border:"1px solid #e8e8e8","text-align":"center"}},Ea=["src"],Ma={style:{width:"100%",overflow:"hidden",height:"100%",position:"relative"}},Ha={class:"fixedBox"},Va=["onClick"],za=["src"],Qa={style:{"margin-left":"8px","margin-top":"3px"}},Ga=q(g({__name:"index",setup(t){const g=h(),A=y((()=>g.isLogin)),f=w(""),m=k(),x=le(),I=w(!0),b=w(""),S=w(""),D=w(""),F=w(""),L=w(""),V=w(""),z=w(!0),G=C(),K=w(),j=y((()=>"dark"===G.theme));be({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{b.value=e.data.copyrightTitle,S.value=e.data.icpNumber,D.value=e.data.policeFilingNumber,F.value=e.data.icpUrl,L.value=e.data.policeFilingUrl})),de((()=>{B.emit("setSliderMenus"),f.value=m.path}));const q=w([]);function X(e){0==e.length?(I.value=!0,z.value=!0,K.value.clearChatData()):z.value=!1,q.value=e}function Z(){q.value=[]}const W=w(),_=w();function ee(e){te.value="",se.value="",_.value=e,W.value=JSON.parse(e.config).modelInfo}const ae=w(0),te=w();function ie(e){console.log(e),e&&(te.value=e)}const se=w();function ne(e){0==q.value.length&&(z.value=!1),se.value=e,V.value="fileType"}function ue(e){e&&(I.value=!1)}const re=w(!1),ve=w(""),ge=async()=>{ve.value=await(async()=>await pe({keys:["wechatImage"]}).then((e=>e.data)))(),re.value=!0},Ae=[{title:"帮助与常见问题解答",id:0,iconDark:a,iconLight:i},{title:"条款与政策",id:1,iconDark:o,iconLight:s},{title:"反馈与建议",id:2,iconDark:n,iconLight:u},{title:"关于我们",id:3,iconDark:r,iconLight:d}],fe=w(!1);function me(){fe.value=!fe.value}return(a,t)=>{const i=oe("SelectBlo");return U(),N("div",Ua,[Y(v),Y(J(ce),{show:re.value,"onUpdate:show":t[2]||(t[2]=e=>re.value=e)},{default:P((()=>[T("div",Na,[T("div",Ta,[t[3]||(t[3]=T("p",{style:{"font-size":"17px","font-weight":"bold"}},"客服",-1)),j.value?(U(),N("img",{key:0,src:c,style:{cursor:"pointer"},alt:"",onClick:t[0]||(t[0]=e=>re.value=!1)})):(U(),N("img",{key:1,src:p,style:{cursor:"pointer"},alt:"",onClick:t[1]||(t[1]=e=>re.value=!1)}))]),T("div",Ra,[T("div",Oa,[T("img",{src:ve.value,alt:"",style:{width:"200px",height:"200px"}},null,8,Ea),t[4]||(t[4]=T("p",{style:{color:"#8b8c8c","margin-top":"12px"}}," 请使用微信扫描上方二维码 ",-1))])])])])),_:1},8,["show"]),Y(wl,{changeModelisSuccess:ae.value,onHandleModelInfo:ee,onDocumentChatLog:X,currentRoute:f.value,modelInfo:W.value,style:{width:"0"}},null,8,["changeModelisSuccess","currentRoute","modelInfo"]),T("div",Ma,[Y(i),z.value||!A.value?(U(),Q(Bl,{key:0,onUploadIsSuccess:ie})):H("",!0),Y(aa,{ref_key:"documentChatLogRef",ref:K,onChatDataLength:ue,onHaveNotData:Z,dataList:q.value,modelInfo:W.value,handleSendMessage:se.value},null,8,["dataList","modelInfo","handleSendMessage"]),Y(La,{onHandleSend:ne,fileUrl:te.value,modelInfo:W.value,style:$(0!=q.value.length||te.value?"":"position: absolute;left:-999px;bottom:-999px")},null,8,["fileUrl","modelInfo","style"]),Y(Be,{"is-show-dialogue-tail":"",class:"end",style:{bottom:"14px","z-index":"200"}}),T("div",Ha,[T("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:ge},t[5]||(t[5]=[T("img",{src:e,alt:""},null,-1)])),T("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:me,style:{"margin-top":"12px"}},t[6]||(t[6]=[T("img",{src:l,alt:""},null,-1)])),fe.value?(U(),N("div",{key:0,class:R(j.value?"helpBoxD":"helpBoxL")},[(U(),N(O,null,E(Ae,(e=>T("div",{class:R(j.value?"hlepItemD":"hlepItemL"),key:e.id,style:{display:"flex","align-items":"center"},onClick:l=>function(e){0==e.id?fe.value=!1:1==e.id?(window.open("/policy","_blank"),fe.value=!1):2==e.id?(x.updateFeedbackDialog(!0),fe.value=!1):3==e.id&&(B.emit("aboutIsShow",!0),fe.value=!1)}(e)},[T("img",{src:j.value?e.iconDark:e.iconLight,alt:""},null,8,za),T("div",Qa,M(e.title),1)],10,Va))),64))],2)):H("",!0)])])])}}}),[["__scopeId","data-v-b2903c55"]]);export{Ga as default};
