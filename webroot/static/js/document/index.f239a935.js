import{q as e,a as l,b as a,c as i,s as o,d as s,e as n,f as u,_ as r,g as d,h as c,i as p}from"../aboutUs copy/aboutUs copy.f440c040.js";import{a as v}from"../index/index.e2ca6bfe.js";import{e as g,a6 as A,o as f,p as m,k as h,g as x,l as y,ac as k,aa as I,Z as C,r as w,L as b,I as B,b0 as S,s as D,b1 as U,aX as F,w as L,x as T,B as N,a2 as R,F as E,E as O,z as H,A as M,P as V,a0 as z,O as Q,am as G,y as K,a3 as J,aR as j,_ as Y,C as q,D as Z,aj as P,J as X,a4 as W,be as _,G as $,bs as ee,ar as le,$ as te,an as ae,v as ie,ap as oe,ah as se,aK as ne,ao as ue,bt as re,bu as de,aP as ce,q as pe,ak as ve,aZ as ge}from"../main-b114ff11.js";import{u as Ae}from"../useUpload/useUpload.c4974038.js";import{a as fe,u as me,b as he,c as xe,d as ye,e as ke,f as Ie,g as Ce,h as we,_ as be}from"../sendBox_3/sendBox_3.5d37f4d1.js";import{_ as Be}from"../sendBox_2 copy/sendBox_2 copy.b5b6aeb0.js";import{f as Se}from"../music/music.eadc25d8.js";import{C as De}from"../index/index.f026a9b2.js";import"../police/police.deef576c.js";const Ue={class:"main"},Fe={class:"applicationBox"},Le={class:"appBox"},Te={key:0,src:"/static/svg/default-98ef1eb8.svg",alt:""},Ne={key:1,src:"/static/svg/default copy-cbe05553.svg",alt:""},Re=["onClick"],Ee=["src"],Oe={style:{"margin-left":"9px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",width:"120px"}},He={key:0,src:"/static/svg/otherApp-5647880d.svg",alt:""},Me={key:1,src:"/static/svg/otherApp copy-8f52f424.svg",alt:""},Ve={key:0,class:"recordingBox"},ze={class:"todayList"},Qe=["onClick"],Ge={style:{width:"100%"}},Ke={key:0,class:"itemTitle cursor"},Je=["onBlur"],je={style:{display:"flex","align-items":"center"}},Ye={class:"historyList"},qe=["onClick"],Ze={style:{width:"100%"}},Pe={key:0,class:"itemTitle cursor"},Xe=["onBlur"],We={style:{display:"flex","align-items":"center"}},_e=Y(g({__name:"conversationList",setup(e){const{isMobile:l}=A(),t=f(),a=m(),i=h(),o=x((()=>i.isLogin));y(),k();const s=I(),n=C(),u=x((()=>"dark"===n.theme)),r=x((()=>s.groupList)),d=w(100);b(r,(()=>d.value=d.value+1));const c=w([]),p=w([]),v=w([]);async function g(){c.value=[],p.value=[],v.value=[],await S({modelType:"chat"}).then((e=>{0!=e.data.length?function(e){let l=(new Date).getDate();l<10&&(l="0"+l);const{data:t}=e;c.value=t,t.forEach((e=>{if(e.title=e.title.slice(0,7),null!=e.lastTime){let t=e.lastTime.split(" ")[0].split("-")[2];l==t?p.value=[...p.value,e]:v.value=[...v.value,e]}if(null===e.lastTime){let t=e.createdAt.split(" ")[0].split("-")[2];l==t?p.value=[...p.value,e]:v.value=[...v.value,e]}}))}(e):le()}))}g(),B.on("updateMessageList",(e=>{console.log(e),e&&g()})),B.on("DataListFn",(e=>{e&&(g(),$())}));const Y=w([]),q=w(!1);B.on("ExploreApp",(e=>{Y.value.forEach((l=>{l.id==e.id&&(q.value=!0,W(l))})),q.value?q.value=!1:(Y.value.unshift(e),Y.value=Y.value.splice(0,2),W(e),localStorage.setItem("ExploreApp",JSON.stringify(Y.value)))})),localStorage.getItem("ExploreApp")?Y.value=JSON.parse(localStorage.getItem("ExploreApp")):D({type:"recommend"}).then((e=>{Y.value=e.data,Y.value=Y.value.splice(0,2)})),B.on("reOpenChar",(e=>{P(e,1)}));const Z=w();function P(e,l){let t;t=l?{groupId:e.uuid,logType:1}:{groupId:e.id,logType:1},B.emit("create",!1),B.emit("exploreApp",!1),B.emit("uuid",e),U(t).then((async t=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await s.setActiveGroup(e.id),Z.value=l?e.uuid:e.id,X.value&&(X.value=null),ue.value&&(ue.value=!1),B.emit("modelType",e.config),B.emit("setModel",JSON.parse(e.config).modelInfo);let a=t.data.filter((e=>null!=e.conversationOptions));0==a.length?(B.emit("chatLogList",a),B.emit("haveLog",!1)):B.emit("chatLogList",t.data)}))}const X=w();async function W(e,l){if(!o.value)return void i.setLoginDialog(!0);let a;if(a=l?await t.isSession(e.modelId):await t.isSession(e.id),0==a){await t.addNewChat(e.id),t.updateGptsStore(!1);const l=await F();Z.value&&(Z.value=null),ue.value&&(ue.value=!1),l.data.forEach((l=>{l.modelId==e.id&&(localStorage.setItem("chatLogId",JSON.stringify(l)),X.value=l.modelId,B.emit("exploreApp",!1),B.emit("uuid",l),_(l))}))}else{Z.value&&(Z.value=null),ue.value&&(ue.value=!1);(await F()).data.forEach((t=>{l?t.modelId==e.modelId&&(localStorage.setItem("chatLogId",JSON.stringify(t)),X.value=t.modelId,B.emit("exploreApp",!1),B.emit("uuid",t),_(t)):t.modelId==e.id&&(localStorage.setItem("chatLogId",JSON.stringify(t)),X.value=t.modelId,B.emit("exploreApp",!1),B.emit("uuid",t),_(t))}))}}function _(e){let l={groupId:e.id};U(l).then((async l=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await s.setActiveGroup(e.id);let t=l.data.filter((e=>null!=e.conversationOptions));t.length,B.emit("chatLogList",t)}))}function $(){if(localStorage.getItem("chatLogId")){let e,l=JSON.parse(localStorage.getItem("chatLogId"));l.config&&(e=JSON.parse(l.config).modelInfo.modelType),Z.value=l,l.gptsApp||"app"==e?(X.value=l.modelId,_(l)):(Z.value=l.id,P(l))}else S({modelType:"chat"}).then((e=>{P(e.data[0])}))}B.on("openNewApp",(e=>{W(e)})),B.on("reOpenGpts",(e=>{W(e,1)})),$();const ee=w(!1);async function le(){try{if(!o.value)return i.setLoginDialog(!0),void B.emit("register",0);ee.value=!0,await s.updateChatTab("history"),await s.addNewChatGroup(),await s.queryMyGroup(),await g(),P(c.value[0]),ee.value=!1,l.value&&n.setSiderCollapsed(!0)}catch(e){ee.value=!1}}async function te(e,l){if(0==p.value.length&&1==v.value.length||1==p.value.length&&0==v.value.length)a.error("至少保留一个对话");else{if(await s.deleteGroup(e),await s.queryMyGroup(),0==l){if(p.value=p.value.filter((l=>l.id!=e.id)),e.id==Z.value){if(0==p.value.length)return void P(v.value[0]);P(p.value[0])}}else if(1==l&&(v.value=v.value.filter((l=>l.id!=e.id)),e.id==Z.value)){if(0==v.value.length)return void P(p.value[0]);P(v.value[0])}a.success("删除成功")}}const ae=w(null),ie=w("");function oe(e,l){setTimeout((()=>{ae.value[0].focus()}),100),e.edit=!0,ie.value=e.title}function se(e,l){if(e.edit=null,e.title==ie.value)return;let t={groupId:e.id,title:ie.value};j(t).then((t=>{200===t.code&&(0==l?p.value.forEach((l=>{l.id==e.id&&(l.title=ie.value)})):1==l&&v.value.forEach((l=>{l.id==e.id&&(l.title=ie.value)})))}))}function ne(){7==ie.value.length&&a.warning("最大不能超过七个字")}const ue=w(!1);function re(){if(!o.value)return i.setLoginDialog(!0),void B.emit("register",0);Z.value&&(Z.value=null),X.value&&(X.value=null),ue.value=!0,B.emit("exploreApp",!0)}return(e,l)=>(L(),T("div",Ue,[N("div",Fe,[N("div",Le,[N("div",{class:R(["cursor",[u.value?"appItem":"appItem1"]]),onClick:le},[u.value?(L(),T("img",Te)):(L(),T("img",Ne)),l[2]||(l[2]=N("p",{style:{"margin-left":"9px","margin-top":"2px"}},"智能问答",-1))],2),0!=Y.value.length&&o.value?(L(),T(E,{key:0},O(2,((e,l)=>N("div",{class:R(["cursor",[u.value?"appItem":"appItem1",X.value==Y.value[l].id?"select":"NotSelect"]]),key:l,style:{display:"flex","align-items":"center"},onClick:e=>W(Y.value[l])},[N("img",{style:{width:"16px",height:"16px","border-radius":"50%"},src:Y.value[l].logo,alt:""},null,8,Ee),N("p",Oe,H(Y.value[l].modelName),1)],10,Re))),64)):M("",!0)]),N("div",{class:R(["otherApp",[u.value?"appItem":"appItem1",ue.value?"select":"NotSelect"]]),onClick:re},[u.value?(L(),T("img",He)):(L(),T("img",Me)),l[3]||(l[3]=N("p",{style:{"margin-left":"9px","margin-top":"2px"},class:"cursor"},"探索应用",-1))],2)]),o.value?(L(),T("div",Ve,[N("div",ze,[l[4]||(l[4]=N("div",{class:"todayTitle"},"今天",-1)),(L(!0),T(E,null,O(p.value,(e=>(L(),T("div",{class:R([u.value?"Item":"Item1",Z.value==e.id?"select":"NotSelect"]),key:e.id,onClick:l=>P(e)},[N("div",Ge,[e.edit?M("",!0):(L(),T("p",Ke,H(e.title),1)),e.edit?V((L(),T("input",{key:1,maxlength:"7","onUpdate:modelValue":l[0]||(l[0]=e=>ie.value=e),onInput:ne,class:"editInp dark:bg-[#111113] bg-[#FFFFFF]",ref_for:!0,ref_key:"inputRef",ref:ae,type:"text",onBlur:l=>se(e,0)},null,40,Je)),[[z,ie.value]]):M("",!0)]),N("div",je,[Z.value==e.id?(L(),Q(K(J),{key:0,icon:"hugeicons:delete-02",class:"hot-icon1 cursor del",onClick:G((l=>te(e,0)),["stop"])},null,8,["onClick"])):M("",!0),Z.value==e.id?(L(),Q(K(J),{key:1,icon:"solar:pen-2-linear",class:R(["hot-icon1 cursor",u.value?"pen":"pen1"]),onClick:G((l=>oe(e)),["stop"])},null,8,["class","onClick"])):M("",!0),Z.value!=e.id?(L(),Q(K(J),{key:2,icon:"hugeicons:delete-02",class:"hot-icon cursor del",onClick:G((l=>te(e,0)),["stop"])},null,8,["onClick"])):M("",!0),Z.value!=e.id?(L(),Q(K(J),{key:3,icon:"solar:pen-2-linear",class:R(["hot-icon cursor",u.value?"pen":"pen1"]),onClick:G((l=>oe(e)),["stop"])},null,8,["class","onClick"])):M("",!0)])],10,Qe)))),128))]),N("div",Ye,[l[5]||(l[5]=N("div",{class:"historyTitle"},"历史",-1)),(L(!0),T(E,null,O(v.value,(e=>(L(),T("div",{class:R([u.value?"Item":"Item1",Z.value==e.id?"select":"NotSelect"]),key:e.id,onClick:l=>P(e)},[N("div",Ze,[e.edit?M("",!0):(L(),T("p",Pe,H(e.title),1)),e.edit?V((L(),T("input",{key:1,maxlength:"7","onUpdate:modelValue":l[1]||(l[1]=e=>ie.value=e),onInput:ne,class:"editInp dark:bg-[#111113] bg-[#FFFFFF]",ref_for:!0,ref_key:"inputRef",ref:ae,type:"text",onBlur:l=>se(e,1)},null,40,Xe)),[[z,ie.value]]):M("",!0)]),N("div",We,[Z.value==e.id?(L(),Q(K(J),{key:0,onClick:G((l=>te(e,1)),["stop"]),icon:"hugeicons:delete-02",class:"hot-icon1 cursor del"},null,8,["onClick"])):M("",!0),Z.value==e.id?(L(),Q(K(J),{key:1,icon:"solar:pen-2-linear",onClick:G((l=>oe(e)),["stop"]),class:R(["hot-icon1 cursor",u.value?"pen":"pen1"])},null,8,["onClick","class"])):M("",!0),Z.value!=e.id?(L(),Q(K(J),{key:2,icon:"hugeicons:delete-02",onClick:G((l=>te(e,1)),["stop"]),class:"hot-icon cursor del"},null,8,["onClick"])):M("",!0),Z.value!=e.id?(L(),Q(K(J),{key:3,icon:"solar:pen-2-linear",onClick:G((l=>oe(e)),["stop"]),class:R(["hot-icon cursor",u.value?"pen":"pen1"])},null,8,["onClick","class"])):M("",!0)])],10,qe)))),128))])])):M("",!0)]))}}),[["__scopeId","data-v-16482125"]]),$e={class:"mindMapSiderBarMain"},el={class:"inputBox dark:bg-[#111113] bg-[#FFFFFF] border dark:border-[#2D2E33] border-[#EBEBEB] dark:text-[#6C6E79] text-[#8B8C8C]"},ll={style:{width:"100%","text-align":"end","margin-top":"15px"}},tl={key:0,class:"loader"},al={class:"dark:bg-[#111113] bg-[#FFFFFF] border dark:border-[#2D2E33] border-[#EBEBEB] dark:text-[#6C6E79] text-[#8B8C8C]",style:{"margin-top":"6px",padding:"8px",height:"284px","border-radius":"12px"}},il=Y(g({__name:"mindSiderBarContent",props:{demoValue:String},emits:["value","CreateMind"],setup(e,{emit:l}){const t=m(),a=e,i=l,o=w();function s(){B.emit("newValue",o.value)}b(a,(e=>{e.demoValue&&(o.value=e.demoValue)}));const n=w(),u=w(!1);function r(){n.value?(u.value=!0,i("CreateMind",n.value),n.value=""):t.error("提示词不能为空")}return B.on("loadingFalse",(e=>{u.value=e})),(e,l)=>(L(),T("div",$e,[l[4]||(l[4]=N("div",{class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},[N("div",{style:{display:"flex","align-items":"center"}},[N("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),N("p",{style:{"margin-left":"4px","margin-top":"3px","font-size":"12px"}},"内容主题")])],-1)),N("div",el,[V(N("textarea",{class:"inp",name:"",id:"",cols:"30","onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),rows:"10",placeholder:"请输入您想要生成内容的描述，AI将为您输出一份完整的思维导图"},null,512),[[z,n.value]]),N("div",ll,[N("p",{onClick:l[1]||(l[1]=e=>n.value=""),style:{cursor:"pointer","font-size":"12px"},class:"dark:text-[#6C6E79] text-[#8B8C8C]"}," 清空 ")])]),N("div",{class:"btn bg-gradient-to-r from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent dark:bg-[#36373e]",onClick:r,style:{cursor:"pointer",display:"flex","justify-content":"center","align-items":"center"}},[u.value?(L(),T("div",tl)):M("",!0),l[3]||(l[3]=N("p",{style:{"margin-left":"6px"}},"生成导图",-1))]),l[5]||(l[5]=N("div",{class:"",style:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"16px"}},[N("div",{style:{display:"flex","align-items":"center"}},[N("div",{style:{width:"4px",height:"8px","border-radius":"4px"},class:"bg-[#000] dark:bg-[#fff]"}),N("p",{style:{"margin-left":"4px","margin-top":"3px","font-size":"12px"}},"内容大纲")])],-1)),N("div",al,[V(N("textarea",{onInput:s,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value=e),name:"",id:"",cols:"30",rows:"10",placeholder:"# Ai智能工具\n## 部分功能\n- 支持AI聊天\n- 支持微应用\n- 支持自定义创建\n- 支持DEL绘画\n- 支持Midjourney\n- 更多功 能等你探索\n## 更多内容\n-在上面输入您想要生成的内容\n- 点击生成大纲即可\n",class:"contentInp"},null,544),[[z,o.value]])])]))}}),[["__scopeId","data-v-41ea105a"]]),ol={class:"flex"},sl={class:"itemName"},nl={key:0,style:{"margin-left":"4px"}},ul={class:"buttonBox"},rl={style:{display:"flex","align-items":"center",gap:"10px"}},dl={class:"y-pop"},cl=Y(g({__name:"recordItem",props:{item:Object,selectChatId:Object},emits:["changeTitle","deleteItem"],setup(e,{emit:l}){const t=C();x((()=>"dark"===t.theme));const a=e,i=l,o=w();b(a,(e=>{e.selectChatId&&(o.value=e.selectChatId)})),B.on("changeTitle",(e=>{e&&j(e).then((e=>{200===e.code&&i("changeTitle")}))})),o.value=a.selectChatId;const s=w(),n=w(null);return(e,l)=>(L(),T("div",{class:R(["record-item",[o.value.id==a.item.id?"active":""]])},[N("div",ol,[N("div",sl,[a.item.isInp?V((L(),T("input",{key:1,maxlength:"9","onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),onFocus:l[1]||(l[1]=G((()=>{}),["stop"])),onBlur:l[2]||(l[2]=e=>function(e){if(e.isInp=!1,!s.value)return;let l={groupId:e.id,title:s.value};j(l).then((l=>{200===l.code&&(e.title=s.value)}))}(a.item)),ref_key:"inpRef",ref:n,style:{"margin-left":"4px","background-color":"transparent"},placeholder:"请输入文件名称",type:"text"},null,544)),[[z,s.value]]):(L(),T("p",nl,H(a.item.title),1))])]),N("div",ul,[N("div",rl,[q(K(P),{style:{"border-radius":"8px",width:"126px",padding:"8px !important"},placement:"bottom-start",overlap:!1,trigger:"hover","show-arrow":!1},{trigger:Z((()=>l[5]||(l[5]=[N("div",{class:"more-blo"},[N("div",{class:"more"})],-1)]))),default:Z((()=>[N("div",dl,[N("div",{class:"blo",onClick:l[3]||(l[3]=G((e=>(a.item.isInp=!0,void setTimeout((()=>{n.value.focus()}),100))),["stop"]))},l[6]||(l[6]=[N("div",{class:"edit"},null,-1),N("div",{class:"t t1"},"重命名",-1)])),N("div",{class:"blo",onClick:l[4]||(l[4]=G((e=>{return l=a.item,void i("deleteItem",l);var l}),["stop"]))},l[7]||(l[7]=[N("div",{class:"dele"},null,-1),N("div",{class:"t t2"},"删除",-1)]))])])),_:1})])])],2))}}),[["__scopeId","data-v-1efae428"]]),pl={class:"DocumentBox"},vl={class:"topBox"},gl={class:"title"},Al={class:"inpBox dark:bg-[#222325] bg-[#fff]"},fl={key:0,src:"/static/svg/search-a5fa3211.svg",alt:""},ml={key:1,src:"/static/svg/search copy-726f56f2.svg",alt:""},hl={class:"record"},xl={class:"today"},yl={class:"recordTitle"},kl=["onClick"],Il={class:"histroy"},Cl={class:"recordTitle"},wl=["onClick"],bl=Y(g({__name:"documentSiderBarContent",props:{changeModelisSuccess:Number,modelInfo:Object},emits:["documentChatLog","handleModelInfo"],setup(e,{emit:l}){var t;const a=X().appContext.config.globalProperties,i=w(!0);a.$mitt.on("expand",(e=>{i.value=!!e}));const o=h(),{isMobile:s}=A(),n=x((()=>o.isLogin)),u=C(),r=x((()=>"dark"===u.theme)),d=l,c=m(),p=I(),v=w("");w([]);const g=e;b((()=>g.changeModelisSuccess),(e=>{e&&F()}));const f=w([]),y=w([]),k=w([]),D=w(null==(t=g.modelInfo)?void 0:t.model);async function F(){f.value=[],y.value=[],k.value=[],await S({modelType:"file"}).then((e=>{0!=e.data.length?(f.value=e,R(e,0),M.value=e.data[0],Q(e.data[0])):G()}))}function R(e,l){1==l&&(y.value=[],k.value=[]);let t=(new Date).getDate();t<10&&(t="0"+t);const{data:a}=e;a.forEach((e=>{if(e.title=e.title.slice(0,7),null!=e.lastTime){let l=e.lastTime.split(" ")[0].split("-")[2];t==l?y.value=[...y.value,e]:k.value=[...k.value,e]}if(null===e.lastTime){let l=e.createdAt.split(" ")[0].split("-")[2];t==l?y.value=[...y.value,e]:k.value=[...k.value,e]}}))}F();const M=w();function Q(e){let l={groupId:e.id,logType:1};U(l).then((async l=>{localStorage.setItem("chatLogId",JSON.stringify(e)),await p.setActiveGroup(e.id);let t=l.data.filter((e=>null!=e.conversationOptions));M.value=e,d("documentChatLog",t),d("handleModelInfo",e)}))}async function G(){try{if(!n.value)return void o.setLoginDialog(!0);await p.updateChatTab("history"),await p.addNewChatGroupDoc({title:"文档分析对话",model:D.value,modelType:"file"}),await p.queryMyGroupDoc(),await F(),Q(f.value.data[0]),s.value&&u.setSiderCollapsed(!0)}catch(e){c.error("创建失败")}}function K(e){j("today",e)}function J(e){j("history",e)}async function j(e,l){if(0==y.value.length&&1==k.value.length||1==y.value.length&&0==k.value.length)c.error("至少保留一个对话");else{if(await p.deleteGroup(l),"today"==e){if(y.value=y.value.filter((e=>e.id!=l.id)),M.value.id==l.id){if(0==y.value.length)return void Q(k.value[0]);Q(y.value[0])}}else if("history"==e&&(k.value=k.value.filter((e=>e.id!=l.id)),M.value.id==l.id)){if(0==k.value.length)return void Q(y.value[0]);Q(k.value[0])}c.success("删除成功")}}function Y(){F()}return B.on("setFileModel",(e=>{D.value=null==e?void 0:e.model})),b(v,(e=>{if(e){R({data:f.value.data.filter((e=>{if(-1!=e.title.indexOf(v.value))return e}))},1)}else R(f.value,1)})),(e,l)=>(L(),T("div",pl,[N("div",vl,[N("div",{class:"createDocument",onClick:G},[l[2]||(l[2]=N("p",{class:"text-[#574FFE] dark:text-[#259656]",style:{"font-size":"28px","font-weight":"400"}},"+",-1)),N("p",gl,H(e.$t("gpt.creatDocumen")),1)]),N("div",Al,[r.value?(L(),T("img",fl)):(L(),T("img",ml)),V(N("input",{onInput:l[0]||(l[0]=(...l)=>e.inputSearch&&e.inputSearch(...l)),"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),type:"text",placeholder:"输入名称搜索文档"},null,544),[[z,v.value]])])]),N("div",hl,[N("div",xl,[N("div",yl,H(e.$t("gpt.toDay")),1),(L(!0),T(E,null,O(y.value,(e=>(L(),T("div",{key:e.id,onClick:l=>Q(e)},[q(cl,{onChangeTitle:Y,onDeleteItem:K,selectChatId:M.value,item:e},{default:Z((()=>l[3]||(l[3]=[W(">")]))),_:2,__:[3]},1032,["selectChatId","item"])],8,kl)))),128))]),N("div",Il,[N("div",Cl,H(e.$t("gpt.history")),1),(L(!0),T(E,null,O(k.value,(e=>(L(),T("div",{key:e.id,onClick:l=>Q(e)},[q(cl,{onChangeTitle:Y,onDeleteItem:J,selectChatId:M.value,item:e},null,8,["selectChatId","item"])],8,wl)))),128))])])]))}}),[["__scopeId","data-v-7cd013db"]]),Bl={key:0,style:{"border-radius":"20px 0 0 20px"}},Sl={class:"y-box"},Dl={class:"vipTime dark:bg-[#24252b] bg-transparent"},Ul=Y(g({__name:"newSiderBar",props:{currentRoute:String,changeModelisSuccess:Number,demoValue:String,modelInfo:Object},emits:["documentChatLog","handleModelInfo","value","CreateMind"],setup(e,{emit:l}){const t=X().appContext.config.globalProperties,a=w(!0);t.$mitt.on("expand",(e=>{a.value=!!e}));const i=x((()=>n.isLogin)),o=C();x((()=>"dark"===o.theme));const s=x((()=>"dark"==o.theme?"#36373E":"rgba(142, 145, 166, 0.15)"));y(),k();const n=h();x((()=>n.globalConfig.clientLogoPath));const u=x((()=>n.userInfo));x((()=>n.userInfo.vipExpire)),!u.value||!u.value.lifetimeVip||u.value.lifetimeVip,_();const r=w(!1),d=w(!1);B.on("closeSideBar",(e=>{r.value=e,e?d.value=e:setTimeout((()=>{d.value=e}),100)}));const c=e,p=w();b(c,(e=>{e.demoValue&&(p.value=e.demoValue)}));const v=w(0);b(c,(e=>{e.changeModelisSuccess&&(v.value=e.changeModelisSuccess)}));const g=l;function A(e){g("documentChatLog",e)}function f(e){g("handleModelInfo",e)}function m(e){g("CreateMind",e)}return(e,l)=>a.value?(L(),T("div",Bl,[N("div",{class:R(["dark:bg-[#24252b] bg-[#fff]",r.value?"close":"siderMain"])},[N("div",{class:"mainBox1",style:$(d.value?{display:"none"}:"")},[N("div",Sl,["/chat"==c.currentRoute?(L(),Q(_e,{key:0})):M("",!0),"/mindMap"==c.currentRoute?(L(),Q(il,{key:1,onCreateMind:m,demoValue:p.value},null,8,["demoValue"])):M("",!0),"/document"==c.currentRoute&&i.value?(L(),Q(bl,{key:2,changeModelisSuccess:v.value,onDocumentChatLog:A,onHandleModelInfo:f,modelInfo:c.modelInfo},null,8,["changeModelisSuccess","modelInfo"])):M("",!0)]),N("div",{class:"vipTimeBg",style:$({"border-top":`2px solid ${s.value}`})},[N("p",Dl,H(1==u.value.lifetimeVip?"会员到期时间:永久会员":u.value.vipExpire?"会员到期时间:"+K(ee)(u.value.vipExpire,"YYYY-MM-DD"):"暂未开通会员"),1)],4)],4)],2)])):M("",!0)}}),[["__scopeId","data-v-b4180133"]]),Fl={class:"contentBox"},Ll={class:"upLoadBox"},Tl={style:{"font-size":"48px","font-weight":"500",color:"#000000"}},Nl={style:{"font-size":"18px",color:"#6A6A6A"}},Rl={style:{"text-align":"center","margin-top":"8px","font-size":"16px","font-weight":"500"}},El={style:{"font-size":"12px","margin-top":"24px"},class:"text-[#6A6A6A] dark:text-[#6C6E79]"},Ol=Y(g({__name:"documentContent",emits:["uploadIsSuccess"],setup(e,{emit:l}){const t=h(),a=x((()=>t.isLogin)),i=C(),o=le(),s=m(),n=w("/api/file/upload2Local"),u=l,{selectFile:r,upload:d}=Ae();function c(){a.value?async function(e=1){let l;if(1===e){if(l=await r(),!l)return void s.error(te("chat.choseFileErro"))}else l=e;A.value=!0;const t=new FormData;t.append("file",l),await ae.post(n.value,t,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;v.value=e.split(".").pop(),p.value=e.split("/ai/")[1],g.value=l.data.data,A.value=!1,u("uploadIsSuccess",g.value)}1!==e&&o.updateRecordDialog(!1)}))}():t.setLoginDialog(!0)}x((()=>"dark"===i.theme));const p=w(""),v=w(""),g=w(""),A=w(!1);return(e,l)=>(L(),T("div",Fl,[N("div",Ll,[N("span",Tl,H(e.$t("gpt.documenTitle")),1),N("span",Nl,H(e.$t("gpt.documenText1")),1),N("div",{onClick:c,style:{padding:"48px",width:"720px","border-radius":"12px",border:"1px dashed #726AFB",display:"flex","flex-direction":"column","align-items":"center","margin-top":"24px",cursor:"pointer"}},[l[0]||(l[0]=N("img",{src:"data:image/png;base64,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",alt:""},null,-1)),N("div",Rl,[N("p",null,H(e.$t("gpt.documenUpload")),1)]),N("div",El,[N("p",null,H(e.$t("gpt.documenUploadText1")),1),N("p",null,H(e.$t("gpt.documenUploadText2")),1)])])])]))}}),[["__scopeId","data-v-1aa266e4"]]),Hl={class:"messageBox"},Ml={style:{width:"100%",display:"flex","justify-content":"flex-end","margin-top":"24px"}},Vl={key:0},zl={key:0,style:{display:"flex","justify-content":"flex-end"}},Ql=["src"],Gl={key:1,class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{padding:"8px","border-radius":"8px",display:"flex","align-items":"center"}},Kl={style:{"margin-left":"5px"}},Jl={style:{"font-size":"15px"}},jl={style:{"font-size":"12px"}},Yl=["innerHTML"],ql=["innerHTML"],Zl={key:0,class:"model-line"},Pl=["src"],Xl={class:"name"},Wl={style:{"margin-top":"24px",display:"flex","align-items":"flex-start","flex-direction":"column"}},_l={style:{display:"flex","align-items":"flex-start"}},$l={key:0,class:"chatLeft"},et=["innerHTML"],lt={style:{display:"flex","align-items":"center"}},tt=["onClick"],at={key:0,src:xe,alt:""},it={key:1,src:ye,alt:""},ot=["onClick"],st={key:0,src:ke,alt:""},nt={key:1,src:Ie,alt:""},ut=["onClick"],rt={key:0,src:Ce,alt:""},dt={key:1,src:we,alt:""},ct={class:"sticky bottom-0 left-0 flex justify-center"},pt=Y(g({__name:"documentChatLog",props:{dataList:Array,modelInfo:Object,handleSendMessage:String},emits:["haveNotData","chatDataLength"],setup(e,{expose:l,emit:a}){var i;const o=X().appContext.config.globalProperties,{updateGroupChat:s,updateGroupChatSome:n}=fe(),{usingContext:u}=me(),r=I(),d=m(),c=h(),p=C(),v=x((()=>"dark"===p.theme)),g=w(""),A=w(""),f=le(),{usingNetwork:y}=he();let k=new AbortController;const S=w({name:"",logo:""});o.$mitt.on("modelData",(e=>{S.value=e})),x((()=>{var e;return JSON.parse((null==(e=W.value)?void 0:e.config)||"{}")})),ie({keys:["dialogueTail","robotAvatar"]}).then((e=>{g.value=e.data.dialogueTail,A.value=e.data.robotAvatar}));const D=a,U=e,F=w("");U.modelInfo&&(F.value=null==(i=U.modelInfo)?void 0:i.model),B.on("setFileModel",(e=>{F.value=null==e?void 0:e.model}));const V=w(),z=w(),Q=w(!1),G=w(!1);b(U,(e=>{if(e.dataList&&0==e.dataList.length&&(Q.value=!0),e.handleSendMessage){ae(e.handleSendMessage)}})),b((()=>U.dataList),((e,l)=>{var t;String(e)!==String(l)&&(V.value=e,t=V.value,V.value=t.filter((e=>null!=e.conversationOptions)),V.value.forEach((e=>{let{text:l}=e;null!=l&&(e.text=oe(l))})),setTimeout((()=>{pe()}),100))}),{immediate:!0}),b(z,(e=>{let l=ce.value;l.scrollTop=l.scrollHeight})),oe.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});const J=x((()=>r.chatList)),j=w(!1),Y=x((()=>r.active)),P=w(!0),W=x((()=>r.groupList.find((e=>e.uuid===Y.value)))),_=x((()=>Number(null==r?void 0:r.activeModelKeyType))),ee=x((()=>J.value.filter((e=>!e.inversion&&!e.error)))),te=w();async function ae(e){var l,a;if(G.value)return;let i=e;if(!i||""===i.trim())return;k=new AbortController,oe.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});let o={dateTime:(new Date).toLocaleString(),text:"AI思考中",inversion:!0,error:!1,conversationOptions:null,requestOptions:{prompt:i,options:null}};V.value=[...V.value,o],Q.value&&D("chatDataLength",V.value),setTimeout((()=>{pe()}),100);let p={};p={groupId:+Y.value,usingNetwork:y.value};const v=null==(l=ee.value[ee.value.length-1])?void 0:l.conversationOptions;v&&u.value&&!y.value&&(p={...v,...p});let g=null;g=V.value.length>1?V.value[V.value.length-2]:V.value[0];const A=(null==(a=null==g?void 0:g.conversationOptions)?void 0:a.parentMessageId)||"";console.log(g),p={...p,model:F.value,type:"file",parentMessageId:A};let m="",h="",x=0;const I=w("");let C=null;j.value=!0;let b={};f.updateIsChatIn(!0);try{const e=async()=>{G.value=!0,te.value=setInterval((async()=>{var e;if(m[x]&&h.length<m.length&&(h+=m[x]),m[x]&&(P.value=!1,V.value[V.value.length-1].text=h,z.value=h,V.value[V.value.length-1].text=oe(V.value[V.value.length-1].text),V.value[V.value.length-1].conversationOptions={parentMessageId:C.id},I.value=h,x++),!j.value&&h.length>=m.length&&(I.value="",x=0,z.value="",h="",te.value&&clearInterval(te.value),te.value=null,B.emit("getUserInfo",!0),G.value=!1,P.value=!0,n(J.value.length-1,{loading:!1}),f.updateIsChatIn(!1),b&&c.updateUserBanance(b),2===J.value.length&&!(null==(e=null==W?void 0:W.value)?void 0:e.appId))){const e=J.value[1].text.length>15?J.value[1].text.slice(0,15):J.value[1].text;await r.updateGroupInfo({groupId:+Y.value,title:e}),await r.queryMyGroup()}}),16),await de({prompt:i??"",appId:W.value?W.value.appId:0,options:p,signal:k.signal,onDownloadProgress:({event:e})=>{var l;const t=e.target,{responseText:a}=t;if([1,7].includes(_.value)){const e=a.lastIndexOf("\n",a.length-2);let l=a;-1!==e&&(l=a.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("OpenAI timed out waiting for response")&&d.warning("会话超时了、告知管理员吧~~~")}}if([2,3].includes(_.value)){const e=a.toString().split("\n").filter((e=>""!==e.trim()));let l="",t={};for(const a of e)try{const e=JSON.parse(a);l=e.text,t=e}catch(i){}t.result=l,C=t}if([4].includes(_.value)){const e=a.lastIndexOf("\n",a.length);let l=a;-1!==e&&(l=a.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("xunfeizhipu timed out waiting for response")&&d.warning("会话超时了、告知管理员吧~~~")}}try{if([1,7].includes(_.value)&&(m=C.text,j.value=!C.is_end,(null==(l=null==C?void 0:C.detail)?void 0:l.usage)&&(P.value=C.is_end,b=null==C?void 0:C.userBanance)),[2,3].includes(_.value)){const{result:e,is_end:l}=C;m=e,j.value=!l,(null==C?void 0:C.userBanance)&&(b=null==C?void 0:C.userBanance)}if([4].includes(_.value)){const{text:e,is_end:l}=C;m=e,j.value=!l,(null==C?void 0:C.userBanance)&&(b=null==C?void 0:C.userBanance)}}catch(i){console.log(i)}}})};await e()}catch(S){V.value[V.value.length-1].text=S.message,f.updateIsChatIn(!1),clearInterval(te.value),j.value=!1,(402===S.code||(null==S?void 0:S.message.includes("余额不足"))||(null==S?void 0:S.message.includes("免费额度已经使用完毕")))&&f.updateVipDialog(!0);let e=(null==S?void 0:S.message)??t("common.wrong");if("Request failed with status code 401"===e&&(e="非法操作、请先登录后再进行问答使用！"),null==S?void 0:S.message.includes("canceled"))return n(J.value.length-1,{loading:!1}),void setTimeout((()=>{c.getUserBalance()}),200);const l=J.value[J.value.length-1];if((null==l?void 0:l.text)&&""!==l.text)return void n(J.value.length-1,{text:`${"AI思考中"===l.text?"":l.text}\n[${e}]`,error:!1,loading:!1});s(J.value.length-1,{dateTime:(new Date).toLocaleString(),text:e,inversion:!1,error:!0,loading:!1,conversationOptions:null,requestOptions:{prompt:i,options:{...p}}})}finally{j.value=!1,G.value=!1}}const ce=w(null);function pe(){let e=ce.value;e&&e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})}function ve(){G.value&&(k.abort(),G.value=!1,j.value=!1,P.value=!0,clearInterval(te.value))}return l({clearChatData:()=>{V.value.length=0,G.value=!1}}),(e,l)=>{const t=se("SvgIcon");return L(),T("div",Hl,[N("div",{class:"chatLogBox",ref_key:"toTop",ref:ce},[(L(!0),T(E,null,O(V.value,(e=>{var t,a,i,o,s,n,u,r,c,p,g,A,f,m,h,x;return L(),T("div",{class:"LogItem",key:e.chatId},[N("div",Ml,[-1!=(null==(t=e.requestOptions)?void 0:t.prompt.indexOf("http"))?(L(),T("div",Vl,[-1!=(null==(a=e.requestOptions)?void 0:a.prompt.indexOf("png"))||-1!=(null==(i=e.requestOptions)?void 0:i.prompt.indexOf("jpg"))||-1!=(null==(o=e.requestOptions)?void 0:o.prompt.indexOf("jpeg"))?(L(),T("div",zl,[N("img",{style:{width:"150px",height:"auto"},src:null==(s=e.requestOptions)?void 0:s.prompt.split(" ")[0],alt:""},null,8,Ql)])):(L(),T("div",Gl,[l[0]||(l[0]=N("div",{style:{"background-color":"#10a37f",padding:"4px","border-radius":"4px",display:"flex"}},[N("img",{style:{width:"30px",height:"30px"},src:"/static/svg/file-16b3e23d.svg",alt:""})],-1)),N("div",Kl,[N("p",Jl,H(null==(u=null==(n=e.requestOptions)?void 0:n.prompt)?void 0:u.split("/ai/")[1].split(" ")[0]),1),N("p",jl,H(null==(A=null==(g=null==(p=null==(c=null==(r=e.requestOptions)?void 0:r.prompt)?void 0:c.split("/ai/")[1])?void 0:p.split(" ")[0])?void 0:g.split(".")[1])?void 0:A.split(" ")[0]),1)])])),(null==(f=e.requestOptions)?void 0:f.prompt.split(" ")[1])?(L(),T("div",{key:2,class:"chatRight1 dark:bg-[#222325] bg-[#F0F0F0] markdown-body-generate",innerHTML:null==(m=e.requestOptions)?void 0:m.prompt.split(" ")[1]},null,8,Yl)):M("",!0)])):M("",!0),-1==(null==(h=e.requestOptions)?void 0:h.prompt.indexOf("http"))?(L(),T("div",{key:1,class:"chatRight dark:bg-[#222325] bg-[#F0F0F0]",innerHTML:null==(x=e.requestOptions)?void 0:x.prompt},null,8,ql)):M("",!0)]),S.value.name?(L(),T("div",Zl,[N("img",{class:"img",src:S.value.logo,alt:""},null,8,Pl),N("span",Xl,H(S.value.name),1)])):M("",!0),N("div",Wl,[N("div",_l,[null==e.text||""==e.text?(L(),T("div",$l," 接口错误，请联系管理员处理~ ")):(L(),T("div",{key:1,class:"chatLeft markdown-body-generate markdown-body-text",innerHTML:e.text},null,8,et))]),N("div",lt,[N("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:R(v.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){if(e.text){const{text:l}=e;ue({text:l}),d.success("复制成功")}else d.error("复制失败")}(e)},[q(K(ne),{trigger:"hover",placement:"bottom",style:$([{"border-radius":"8px"},v.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:Z((()=>[v.value?(L(),T("img",at)):(L(),T("img",it))])),default:Z((()=>[l[1]||(l[1]=N("span",null,"复制",-1))])),_:1,__:[1]},8,["style"])],10,tt),N("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:R(v.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){let{prompt:l}=e.requestOptions;ae(l)}(e)},[q(K(ne),{trigger:"hover",placement:"bottom",style:$([{"border-radius":"8px"},v.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:Z((()=>[v.value?(L(),T("img",st)):(L(),T("img",nt))])),default:Z((()=>[l[2]||(l[2]=N("span",null,"刷新",-1))])),_:1,__:[2]},8,["style"])],10,ot),N("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:R(v.value?"handleIcon":"handleIcon1"),onClick:l=>async function(e){var l;let t={id:e.chatId};await re(t).then((l=>{var t;V.value=null==(t=V.value)?void 0:t.filter((l=>l.chatId!=e.chatId)),d.success("删除成功")})).catch((e=>{d.error("删除失败")})),0==(null==(l=V.value)?void 0:l.length)&&D("haveNotData")}(e)},[q(K(ne),{trigger:"hover",placement:"bottom",style:$([{"border-radius":"8px"},v.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:Z((()=>[v.value?(L(),T("img",rt)):(L(),T("img",dt))])),default:Z((()=>[l[3]||(l[3]=N("span",null,"删除",-1))])),_:1,__:[3]},8,["style"])],10,ut)])])])})),128)),N("div",ct,[G.value?(L(),T("div",{key:0,onClick:ve,class:"stopBox"},[q(t,{icon:"ri:stop-circle-line"}),l[4]||(l[4]=N("p",{style:{"margin-left":"8px"}},"停止输出",-1))])):M("",!0)])],512)])}}}),[["__scopeId","data-v-6359a07c"]]),vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACKSURBVCiRnZK7DYAwDERfQcEAjEPBRmSXZIOUyVYMwAjQXJCBRHxOsizLPt05MZwxARFYgE05AiMVdIDXYCu85g6EB4IlHpZsY32oR+TZDgxAVp1VW2LELF0iAT3glNOlv9Dw7mTdNfo3pSyFWTnXlGo7FUuptdOv1/vyTwGD7gUxcLmIgokXt7cDc/V1fVYJawsAAAAASUVORK5CYII=",gt={class:"mainBox"},At={class:"bg-[#ffffff] dark:bg-[#19191B] border dark:border-[#57585e] border-[#E0E2E9]",style:{"border-radius":"15px",width:"850px",position:"relative"}},ft={style:{flex:"1",display:"flex","flex-direction":"column"}},mt={key:0,class:"fileBox",style:{position:"relative"}},ht={class:"file bg-[#FFFFFF] dark:bg-[#111113]"},xt={key:0,style:{width:"60px",height:"60px",position:"relative"}},yt=["src"],kt={key:0,style:{position:"absolute",left:"20px",top:"20px"}},It={key:1,style:{"background-color":"#F5F5F5",width:"211px",height:"50px","border-radius":"8px",display:"flex","justify-content":"center","align-items":"center",position:"relative",padding:"6px 9px"}},Ct={key:0,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIGSURBVFiF7Za/axRBFMe/b2YjR9ziAoecveI/cGgMSbGFhaXkCKcIcmCvIGIlpLSzsrK/H4HcHaRIxOIQPTeghYWFxRUHphC02CLiRWbnWRyR4/bn5Ha5Jp9y3uO9z+7OvB1gwVBUoNHol6yLyzfY16XYAkq+2dq6/iNTgXbPfQaNbRAKSQU04BCJa1r57+5V176ZCojZhVZnUAPjRZrmp7CvLksJd6fzfn1uASHkE9MiE6jIZO2bSgQEmLlyNgEAgG0qERDIAJvJ6jd3B9VFCQCAJYRoppHIS+C/RKszqOUqQMx2nASRaLa6Hx/nJsDMFYI8AGEclUOgl1ESgUHU7rps6HBM0BtSy19/BV+JSywXxx8cx1HTa5ZhszBshvikSPckiaHv+ydRiT+9Cx6AL1kLTOoQVZkZQkR/VR8YzQrkeQpSEf8GCGPNuI2JeTCsqUyC3wKIOwlzCDCUr2l4f3P1KCzc2OsfS1UY5ycA2EuCv7e7bnhUhS+bsPA9cC6QOAcIOAIwNCnKQAUpN2aCAHm/vT9X63Uncs6H0eq5D4nxOgMBLi6vFB61O67ZrZfxIG1q8iieXFBzI7gJY36r80JMgdoBAWJ8zkuAiQ8TBbSmp8hkxs1251d379wcJQrUNlcPNXALwNdsOpMH6OeXVk7S3Yimaez1S6QKZ/7RAEDYU58zzT8KgKqaT0KI9QAAAABJRU5ErkJggg==",alt:""},wt={key:1,style:{position:"absolute",left:"20px",top:"20px"}},bt={class:"infoBox",style:{display:"flex","flex-direction":"column","justify-content":"space-between","font-size":"14px",color:"#3D3D3D",width:"160px"}},Bt={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},St={class:"size"},Dt={key:2,style:{"background-color":"#F5F5F5",width:"211px",height:"50px","border-radius":"8px",display:"flex","justify-content":"center","align-items":"center",position:"relative",padding:"6px 9px"}},Ut={key:0,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAJ7SURBVEiJzdVfaFJRHAfw71XvTW9r4tJNZAzZbHPBZkKDFi4abA++KbtuBQ0aVA9B4Wu9xXrbg1D0EEU99LDWjPYyjVa4aCOKWLPhclLUQkQQpoJcNv/dnm540fxzU+n7dM7vnPv7cLgcDgE+PtdFEMRjiAxJSGBvP3b3Wb/1eqW9koKxXizIp00mvza57b1XC1qXtJHyq46A535TUQA4Simu2ALLT5uKAoCWoqfs28sLTUUBoIOkJ5mAZ7FhaB4c8hxXVFdTCsYR8LgLa7J6oTmOgzsWwhEpVWp5ovfTk0uhk9MP64oCwF5mH3uZ/dKLHJflhw39p39LWfRB7xhWBu3QUnRVzYy0Cu/NU5jVD4tHL3QYMabqgs/EVISNtAo+E4NTrVqca+8Tj04HXyLL5f+cwEirSu6zKHV4d8IBLUUjlctgZueVeNQd+4bzX73Icnno5a3wmSaKYItSB++ADWpSgUT2ANatJawlI+JRHh7/8gKpXAZa6rAA5sEWKYlomsXw54WKYFUoAKwmwrBuLQngGe1xATjqdyPIxqtpV/2VWUtGBPCjvnFRYE0oD7vCG4LazR/rNYE1o4zGgBtdQ4LaHcNZWJS6xqCMxoD5fitkhARBNo5R/3NE0yxapCS8A7aa4KrQYtCN1UQYo363KLgi6uw0F4HRNAsAgnmLlMTKoB2MxvBvqLPTDFfPGcgICTZTMQHIh4fDBynIJTLM91thU/eIR+e6LQCA9WQEI5uLRWAhPLQxjyAbh4yQYK57pCxa9j29tfsB+kOtcH5/i1QuU7YRf19n9afxJvFLPHp792PZj0vBl0OvK+77/x7xZqA/G+hkAYT5yW/WQP+G8QaljwAAAABJRU5ErkJggg==",alt:""},Ft={key:1,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAdCAYAAABbjRdIAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAINSURBVEiJzdRLaBNBHMfx7+w2KSa1KYJYQUIPSiFghPYiCIJGEEXE1gfoRVAEL71Z8OQxBw/14gNa6MGLeOihRYQcCoKIIlQUkpb4iFBMW4gPsLXZ18x4sAYqtt1Ns9EfLAzs/vnMzv/PCFayOJBJKa2GgMNAhIApz397kBp7fWG9bwyAyqUDW5VWk8DReiAA23HP5/vSwxti0XjkJNBZD/IHeKXQl765LoZmz2ah37Ecd7Bwet/1tbEGx7ac7HR/+nJTMA3Cctzhwpm9x0LBDCFWgxrDtuX4dH96f8OxjkQMwxAIQe1B64jjycmZsz29AC2Nw+J0JOJ/exUDfQKYCqVna6WpmO9jNHYkMTqTyFIBc9dudHUJOfsWlGw8Fuk5ROvxi2jPRbT8utHUlwWq97PIUt7fhn1vayWqUsZ6eAt7YgTRuoXY1SyifZuv2sDTuHz7Gvr7VwC84ivig/eIHjyF/Wh0w9rAf6Ydq7aWs0VUpYyZ7PZVu+lpFLE2cJ1wMHNnV20dzZxDxBN4My991QbuWWxgCFmcQrQlMLtSyE8fcF7kwsHkxzxmdy8oifP8MfbYHfD8HWPwaRy5AdZy0DKgydfV/3k3um+eoj6XwXPDx9RcCTVXqhuCf9EzU/AuVEXxvoZVf7gTwEIYjhDMt8N4Dds++mzREEYGyAH1T8DquEBOYBwRd58sAfwEdaeu9dF+Uf0AAAAASUVORK5CYII=",alt:""},Lt={key:2,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIKSURBVFiF5ZVNSFRRFMd/82Z8ODqOZPNBFCiICQYaJH6gDlJQ2EJBXLiNCaK1LgQRJsVFEuHCjYIJ4kor+sD8ILAGhkTEhUQogiAogTkKqfj5fC1uMOHM9J6jb0brD5dzOee8c37v3gMX/neZjjuqO1X3gcKsCVyxFHxYyZeNHe55y02bevKl447Dfa7E2hwgw0ZpYSbj/WNqakwAZyFHGiX5Nxjrfq+mJAQAwGmjrLiA0b4JNTkhAABOOxU3sxkZHFTlhAAAuOxUXi/lg29CtcQFIBhh9p1p3KnJZtjnU8P6RaQ6jXo/w0AgYuhuiosiYNJQAIC9wyj+XcIihs+AljQBHDZ44RXLYdNX1OsR+V6Pdq7mFUgSuNNDez2yW8U3dqt27vm/gr9JNuv7S0MAkpOgox4GHkFZTpwBZDO01UKOG8wSNFZB3tU4AZglaLgvGipHsLQGsgVaayHzchwAHt+G8t9H/mwEml/B8jpYk6C9Dq5lGAjwoAKq8sW+5xP452FjG5pfCnspFVqqhTUEwJMr7OtpeDsT8q9tQdMQ/NwRJ3AryyAAgPGv0OsP9y+vQ9s72D04Wb0TAQQWoOtj9Pi3FXg6LIYTYF85A4DgFkwtiubPR0PFo2lqUUAsBcE/pw2g+RYoR/DkjXahPxVYEEuPLvZb8G8CWGS+q7BqQK8fisyKAXUvuH4BNACC/1h6aasAAAAASUVORK5CYII=",alt:""},Tt={key:3,style:{position:"relative","margin-right":"8px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAItSURBVFiF5ZZNaBNBFIC/zbqbvyIWq6FSSCj2FEHB1hqLP1ijngUvRVDw56QipaAHwb2IEr0qKoXeRApFL1Zj8SAo8VBtFZQI0l4qVasU0mqSahwPU4k2Ocwm04biu7ydt/PmffNm3szA/y7GQoPoPBbCMl8DaysasTWaYi67z0icnVHp7im1GI0VBwfweWOEQo9Ez5VgZQA6JODfSuOapDjhBGoDICE6aAk/FEccX20AAOoC29kQeSAOOnZtAACC/l20RwaF46xYGoBsrhxEJ8HwfeE4JfHKUlUlL97C6Ltyf/biNbcAzxcXAKBQKG+fKfxcaNKzBKHVsCcGzU2uXavPgG3B1R5oqJfti7fg6Utl9+oz0BKWwf8Eja535V49QMMqqZ8MS/3m/RIDTGekPncU0uOu0q8H4NNXqTPf4HKva3cNSzC/+RJ9RRgXol4FK+vA54VcHjKz0razFU51yW9DuA6uDtB9GOKxYnv2O0xOyQpIj0NkHexog5G0awC1JdjdDtk89A7INNsWpF5B31156vm8sG0jBP2uAdQycGcQDsRhf4cst3uPi7u/PylPwpNdcDsBA0PSlssrDV36Jowf34TpGVGfw7w0N8G18zD3A75Mw4XrMPHx3z4F2oyhm8N/m/Rdx2MTkHwmg9oWnDmk5Kb3PXCjH0xTlqZtKbnovY5zeTh9CTZHIT1WAwCQeyA1qtx98d+Eyw/gl5gEPusPJabwiA/6x13u8huf8I9edeOjigAAAABJRU5ErkJggg==",alt:""},Nt={key:4,style:{position:"absolute",left:"20px",top:"20px"}},Rt={class:"infoBox",style:{display:"flex","flex-direction":"column","justify-content":"space-between","font-size":"14px",color:"#3D3D3D",width:"160px"}},Et={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Ot={class:"size"},Ht={key:0,style:{width:"20px",height:"20px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAArCAYAAAD/lEFzAAAAAXNSR0IArs4c6QAAAmFJREFUWEft2LuqFEEQxvF/eUHxmhuaKl5AQfGCoYEPIJj5AOJdxEQUFT2K4COY+BBiIF7QVBThRCa+gB7FA2o731JnacfdneqezZyJlmW6+0d1d3VNGz2flNIqYC9wAtDvZ8BrM/tZ27XVNlQ7Bx0A7gC7vK/3wBXgjZn9rum/GpWB7gGCrXbAL4GAy7WwKtQM0EpgesGKUQFQb1gRqgDUCxZGVYCqYSFUD1AVrBPVAUrAjyYlrPMcJYTSwDKwHsj7Dy/+magOkJLjO+AzcAzY7GH5CjwHtnnuWpPlqhBsKqoDpM5fAreAQ8A5YIsP/gV4CLwCrgGHsxymVzphE1EBkJLjBeCDg5QoNzlqCVBCFWxHE8EHreTaCfsHFQSNsnUz+AbgogNzlCD3m6z+3UHtrD8T9heqBKRzLaUkyFSUmS2V9intGFXTOIJqHdyhiI1QNSBv1xmplZ1XNEZKaS2w3xdnftp3LshopAphNy2ldNS39sHSrVuKCs7KR6FuAGeaLby1NMnVoAKwZaGuA2czVGdyy6YjvKbaFeiMNTZC7QMWgD3eUEfH1UjVWBupCWvsLrDT//8klM4m1ddH/DB9CixG6uu+KJ9KldG7s/Ff5HlKpzpmplM/9MwDlUVtPH5n6TJLN09UPs6ACq2JVmUYbTN+b5i+aMiGSA2RmhCBIU9Fl8UQqSFS0z5G9d0Xjc5/USVcAs637hJ0j7BgZrqBKX767r6NDtIVtX7r0ZTdBh6Z2bdi0RxKF9XXx/2GZbsDFoHTwFsz06Va8dMrUhotpaTvxVPASR/9CfC4Nkrq4w/WMdkx8DYhDAAAAABJRU5ErkJggg==",alt:""},Mt={key:1,style:{width:"20px",height:"20px"},src:Be,alt:""},Vt={class:"btnBox"},zt=Y(g({__name:"documentSend",props:{changeChatLog:Boolean,modelInfo:Object,fileUrl:String},emits:["handleSend","handleInp"],setup(e,{emit:l}){x((()=>t.isLogin)),y(),k();const t=h(),a=m(),i=C(),o=x((()=>"dark"===i.theme)),s=l,n=w(),u=w(),{selectFile:r,upload:d}=Ae(),c=le(),p=w("/api/file/upload2Local");function v(){if(console.log(f.value,"makeConfig.valuemakeConfig.value"),f.value.isVipUsed&&-1===f.value.userType.indexOf(g.value)){let e=f.value.userType.split(","),l="";return e.forEach(((t,a)=>{l+=A.value.filter((e=>e.id==t))[0].dictName,a<e.length-1&&(l+=",")})),void a.error("该模型仅限"+l+"可用")}(n.value||u.value)&&(n.value?u.value?n.value&&u.value&&s("handleSend",u.value+" "+n.value):s("handleSend",n.value):(console.log(u.value,"fileMessage.value"),s("handleSend",u.value+" 请用中文分析一下上传的这个文件")),J.value=!1,F.value="",O.value="",n.value="",u.value="")}const g=x((()=>t.userInfo.vipLeavelId));let A=w([]),f=w(null);function I(e){if(console.log(f.value,"makeConfig.valuemakeConfig.value"),f.value.isVipUsed&&-1===f.value.userType.indexOf(g.value)){let e=f.value.userType.split(","),l="";return e.forEach(((t,a)=>{l+=A.value.filter((e=>e.id==t))[0].dictName,a<e.length-1&&(l+=",")})),void a.error("该模型仅限"+l+"可用")}n.value&&("Enter"===e.key&&e.shiftKey?(e.preventDefault(),n.value=n.value+"\n"):"Enter"!==e.key||e.ctrlKey||e.shiftKey?"Enter"===e.key&&(e.preventDefault(),v()):(e.preventDefault(),v()))}ce().then((e=>{A.value=e.data}));const S=e;function D(){u.value?s("handleInp",u.value+" "+n.value):s("handleInp",n.value)}B.on("sendSuccess",(()=>{n.value="",u.value=""}));const U=w(!1);b(S,(e=>{if(J.value=!1,e.modelInfo&&(U.value=e.modelInfo.canUpload),e.fileUrl){let l=e.fileUrl;O.value=l,u.value=l,J.value=!0,E.value=l.split(".").pop(),F.value=l.split("/ai/")[1],Q.value=!1}})),B.on("setFileModel",(e=>{U.value=e.canUpload,f.value=e}));const F=w(""),R=w(""),E=w(""),O=w(""),Q=w(!1);async function G(e=1){let l;if(K.value=!1,1===e){if(l=await r(),!l)return void a.error("选择文件错误")}else l=e;Q.value=!0,J.value=!0;const t=new FormData;t.append("file",l),await ae.post(p.value,t,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{if(t.data){R.value=function(e){if(0===e)return"0 Bytes";const l=1024,t=["Bytes","KB","MB","GB","TB"],a=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,a)).toFixed(2))+" "+t[a]}(l.size);let{data:e}=t.data;E.value=e.split(".").pop(),F.value=e.split("/ai/")[1],O.value=t.data.data,u.value=e,s("handleInp",O.value),Q.value=!1}1!==e&&c.updateRecordDialog(!1)}))}const K=w(!1),J=w(!1);return(e,l)=>(L(),T("div",gt,[N("div",At,[N("div",{class:"inpBox",style:$(J.value?"height: 208px;":"")},[N("div",ft,[J.value?(L(),T("div",mt,[N("div",ht,["png"==E.value||"jpeg"==E.value||"jpg"==E.value?(L(),T("div",xt,[N("img",{src:O.value,style:{width:"60px",height:"60px","border-radius":"5px"},alt:""},null,8,yt),Q.value?(L(),T("div",kt,l[7]||(l[7]=[N("div",{class:"loader"},null,-1)]))):M("",!0),O.value?(L(),T("img",{key:1,src:vt,onClick:l[0]||(l[0]=e=>{J.value=!1,O.value=""}),style:{position:"absolute",right:"-6px",top:"-6px",cursor:"pointer"},alt:""})):M("",!0)])):"txt"==E.value?(L(),T("div",It,[Q.value?M("",!0):(L(),T("img",Ct)),Q.value?(L(),T("div",wt,l[8]||(l[8]=[N("div",{class:"loader"},null,-1)]))):M("",!0),Q.value?M("",!0):(L(),T("img",{key:2,src:vt,onClick:l[1]||(l[1]=e=>{J.value=!1,F.value=""}),style:{position:"absolute",right:"-6px",top:"-6px",cursor:"pointer"},alt:""})),N("div",bt,[N("span",Bt,H(F.value),1),N("span",St,H(E.value+"·"+R.value),1)])])):(L(),T("div",Dt,[Q.value||"xls"!=E.value&&"xlsx"!=E.value?M("",!0):(L(),T("img",Ut)),Q.value||"ppt"!=E.value&&"pptx"!=E.value?M("",!0):(L(),T("img",Ft)),Q.value||"doc"!=E.value&&"docx"!=E.value?M("",!0):(L(),T("img",Lt)),Q.value||"pdf"!=E.value?M("",!0):(L(),T("img",Tt)),Q.value?(L(),T("div",Nt,l[9]||(l[9]=[N("div",{class:"loader"},null,-1)]))):M("",!0),Q.value?M("",!0):(L(),T("img",{key:5,src:vt,onClick:l[2]||(l[2]=e=>{J.value=!1,F.value=""}),style:{position:"absolute",right:"-6px",top:"-6px",cursor:"pointer"},alt:""})),N("div",Rt,[N("span",Et,H(F.value),1),N("span",Ot,H(E.value+"·"+R.value),1)])]))])])):M("",!0),V(N("textarea",{style:$(J.value?"height: 72px;margin-top:10px;":""),onKeydown:I,class:"inp","onUpdate:modelValue":l[3]||(l[3]=e=>n.value=e),type:"text",name:"",id:"",placeholder:"在此输入您想了解的内容，输入shift+回车换行",onInput:D},null,36),[[z,n.value]])]),N("div",{class:"dark:bg-[#23A559]",style:$([{display:"flex","align-items":"center","justify-content":"center","border-radius":"50%",cursor:"pointer",width:"40px",height:"40px",transform:"translateY(54px)"},(n.value?"background:linear-gradient(90deg, #574FFE 0%, #726AFB 100%);":"background:#EAEAEA;")+(J.value?"transform: translateY(146px);":"")]),onClick:v},[o.value?(L(),T("img",Ht)):(L(),T("img",Mt))],4),o.value&&K.value?(L(),T("div",{key:0,class:"upLoadModel1",onClick:l[4]||(l[4]=e=>G(1))},l[10]||(l[10]=[N("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#222325"}},[N("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:be,alt:""}),N("p",null,"从电脑中上传")],-1)]))):M("",!0),!o.value&&K.value?(L(),T("div",{key:1,class:"upLoadModel",onClick:l[5]||(l[5]=e=>G(1))},l[11]||(l[11]=[N("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#f0f0f0"}},[N("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:be,alt:""}),N("p",null,"从电脑中上传")],-1)]))):M("",!0),N("div",Vt,[U.value?(L(),T("div",{key:0,class:"btnItem1",onClick:l[6]||(l[6]=e=>function(e=1){G(e)}(1))},l[12]||(l[12]=[N("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEhSURBVDiNrdQ9SgNRFMXxnzjgFCkssgJBsQzR1uzBFCmyAAtdgBvQBailKdxBQLcgSppUInY2gqQJCimiGGIxNxDCDE4kp3nM/71z7uV9DCvU+pLrd3GADXzi5z9F99AL8zTGd7SXDTrECBN0cIJzDIM1ywa1ootRhM6rji8Myoad4hWNgvl+FKsWBSQ4wvYCu4hOasEq+MC4KKiCW9leXAVL0Q32FF0kwaa4zgtK8RCm+wjeDDbFY3xXYn4SLM0L64SpG5Wr0ckk2Mx0GewugnM1jj2YLajhO8zJ3Lod2Z4mClSVnUq/YL6BN9npltJAdlr1BT5/aVtlw5phGOIMx7gJlndp/1Rb9ubm32AP+2XMazkslf0dtvCMl2U7Wol+AUlkSfZe6/hdAAAAAElFTkSuQmCC"},null,-1)]))):M("",!0)])],4)])]))}}),[["__scopeId","data-v-51386820"]]),Qt={style:{display:"flex",height:"100%"},class:"bg-[#fff] dark:bg-[#1b1c22]"},Gt={class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{width:"466px",height:"394px","border-radius":"24px"}},Kt={style:{display:"flex","justify-content":"space-between",padding:"16px"}},Jt={style:{"font-size":"17px","font-weight":"bold"}},jt={style:{flex:"1",display:"flex","justify-content":"center",height:"calc(100% - 56px)","align-items":"center","padding-bottom":"24px"}},Yt={style:{padding:"24px 24px 12px 24px","border-radius":"12px","background-color":"#fff",border:"1px solid #e8e8e8","text-align":"center"}},qt=["src"],Zt={style:{color:"#8b8c8c","margin-top":"12px"}},Pt={style:{width:"100%",overflow:"hidden",height:"100%",position:"relative"}},Xt={class:"fixedBox"},Wt=["onClick"],_t=["src"],$t={style:{"margin-left":"8px","margin-top":"3px"}},ea=Y(g({__name:"index",setup(t){const g=h(),A=x((()=>g.isLogin)),f=w(""),m=k(),y=le(),I=w(!0),b=w(""),S=w(""),D=w(""),U=w(""),F=w(""),V=w(""),z=w(!0),G=C(),J=w(),j=x((()=>"dark"===G.theme));Se({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{b.value=e.data.copyrightTitle,S.value=e.data.icpNumber,D.value=e.data.policeFilingNumber,U.value=e.data.icpUrl,F.value=e.data.policeFilingUrl})),pe((()=>{B.emit("setSliderMenus"),f.value=m.path}));const Y=w([]);function P(e){0==e.length?(I.value=!0,z.value=!0,J.value.clearChatData()):z.value=!1,Y.value=e}function X(){Y.value=[]}const W=w(),_=w();function ee(e){ie.value="",ne.value="",_.value=e,W.value=JSON.parse(e.config).modelInfo}const ae=w(0),ie=w();function oe(e){console.log(e),e&&(ie.value=e)}const ne=w();function ue(e){0==Y.value.length&&(z.value=!1),ne.value=e,V.value="fileType"}function re(e){e&&(I.value=!1)}const de=w(!1),ce=w(""),Ae=async()=>{ce.value=await(async()=>await ge({keys:["wechatImage"]}).then((e=>e.data)))(),de.value=!0},fe=[{title:te("chat.helpText1"),id:0,iconDark:e,iconLight:l},{title:te("chat.helpText2"),id:1,iconDark:a,iconLight:i},{title:te("chat.helpText3"),id:2,iconDark:o,iconLight:s},{title:te("chat.helpText4"),id:3,iconDark:n,iconLight:u}],me=w(!1);function he(){me.value=!me.value}return(e,l)=>{const t=se("SelectBlo");return L(),T("div",Qt,[q(v),q(K(ve),{show:de.value,"onUpdate:show":l[2]||(l[2]=e=>de.value=e)},{default:Z((()=>[N("div",Gt,[N("div",Kt,[N("p",Jt,H(e.$t("common.customService")),1),j.value?(L(),T("img",{key:0,src:r,style:{cursor:"pointer"},alt:"",onClick:l[0]||(l[0]=e=>de.value=!1)})):(L(),T("img",{key:1,src:d,style:{cursor:"pointer"},alt:"",onClick:l[1]||(l[1]=e=>de.value=!1)}))]),N("div",jt,[N("div",Yt,[N("img",{src:ce.value,alt:"",style:{width:"200px",height:"200px"}},null,8,qt),N("p",Zt,H(e.$t("common.PuseQRcode")),1)])])])])),_:1},8,["show"]),q(Ul,{changeModelisSuccess:ae.value,onHandleModelInfo:ee,onDocumentChatLog:P,currentRoute:f.value,modelInfo:W.value,style:{width:"0"}},null,8,["changeModelisSuccess","currentRoute","modelInfo"]),N("div",Pt,[q(t),z.value||!A.value?(L(),Q(Ol,{key:0,onUploadIsSuccess:oe})):M("",!0),q(pt,{ref_key:"documentChatLogRef",ref:J,onChatDataLength:re,onHaveNotData:X,dataList:Y.value,modelInfo:W.value,handleSendMessage:ne.value},null,8,["dataList","modelInfo","handleSendMessage"]),q(zt,{onHandleSend:ue,fileUrl:ie.value,modelInfo:W.value,style:$(0!=Y.value.length||ie.value?"":"position: absolute;left:-999px;bottom:-999px")},null,8,["fileUrl","modelInfo","style"]),q(De,{"is-show-dialogue-tail":"",class:"end",style:{bottom:"14px","z-index":"200"}}),N("div",Xt,[N("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:Ae},l[3]||(l[3]=[N("img",{src:c,alt:""},null,-1)])),N("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:he,style:{"margin-top":"12px"}},l[4]||(l[4]=[N("img",{src:p,alt:""},null,-1)])),me.value?(L(),T("div",{key:0,class:R(j.value?"helpBoxD":"helpBoxL")},[(L(),T(E,null,O(fe,(e=>N("div",{class:R(j.value?"hlepItemD":"hlepItemL"),key:e.id,style:{display:"flex","align-items":"center"},onClick:l=>function(e){0==e.id?me.value=!1:1==e.id?(window.open("/policy","_blank"),me.value=!1):2==e.id?(y.updateFeedbackDialog(!0),me.value=!1):3==e.id&&(B.emit("aboutIsShow",!0),me.value=!1)}(e)},[N("img",{src:j.value?e.iconDark:e.iconLight,alt:""},null,8,_t),N("div",$t,H(e.title),1)],10,Wt))),64))],2)):M("",!0)])])])}}}),[["__scopeId","data-v-495e398a"]]);export{ea as default};
