import{b as e,c as l,A as a,_ as i,a as s,q as n,d as o,e as u,f as r,s as d,g as c,h as v,i as p}from"../aboutUs copy/aboutUs copy.00e842a0.js";import{n as g,a as f}from"../newNavBar/newNavBar.8c605fac.js";import{e as m,R as h,j as x,av as y,ax as b,W as k,r as I,N as w,O as C,P as L,a3 as F,a4 as O,as as D,ad as S,aI as _,Z as B,ac as T,A as M,au as j,a1 as U,a0 as E,_ as N,$ as q,a8 as A,a2 as H,H as z,a5 as R,b8 as P,at as G,b9 as J,b6 as K,S as $,aM as V,F as X,an as Z,k as W,ag as Y,a6 as Q,ar as ee,a_ as le}from"../main-33bcbc1f.js";import{u as ae}from"../useUpload/useUpload.b031f059.js";import{_ as te}from"../file/file.977b36cf.js";import{b as ie,u as se,c as ne,d as oe,e as ue,f as re,g as de,h as ce,i as ve,j as pe,k as ge,_ as fe,a as me}from"../sendBox_3/sendBox_3.8102d3c8.js";import{a as he}from"../music/music.8ead5ca7.js";import"../start copy/start copy.af33bdaf.js";const xe={class:"contentBox"},ye={class:"upLoadBox"},be={key:0,src:"/static/svg/fileD-0ccbe29a.svg",alt:"",style:{width:"80px",height:"80px"}},ke={key:1,src:"/static/svg/file copy-7aceb648.svg",alt:"",style:{width:"80px",height:"80px"}},Ie={style:{padding:"48px",width:"720px","border-radius":"12px",border:"1px dashed #10A37F",display:"flex","flex-direction":"column","align-items":"center","margin-top":"24px"}},we={class:"imgBox"},Ce=["src"],Le=S(m({__name:"documentContent",emits:["uploadIsSuccess"],setup(e,{emit:l}){const a=h(),t=x((()=>a.isLogin)),i=y(),s=b(),n=k(),o=I("/api/file/upload2Local"),u=l,{selectFile:r,upload:d}=ae(),c=x((()=>"dark"===i.theme)),v=[{id:0,imgurl:"/static/svg/pdf-42416cf9.svg"},{id:1,imgurl:"/static/svg/jpg-92ed99c6.svg"},{id:2,imgurl:"/static/svg/png-adcf3ca5.svg"},{id:3,imgurl:"/static/svg/doc-e5077b2b.svg"},{id:4,imgurl:"/static/svg/docTxt-287d976d.svg"},{id:5,imgurl:"/static/svg/xls-16755e1f.svg"},{id:9,imgurl:"/static/svg/ppt-3fa6be75.svg"}];function p(){t.value?async function(e=1){let l;if(1===e){if(l=await r(),!l)return void n.error("选择文件错误")}else l=e;S.value=!0;const a=new FormData;a.append("file",l),await D.post(o.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;f.value=e.split(".").pop(),g.value=e.split("/ai/")[1],m.value=l.data.data,S.value=!1,u("uploadIsSuccess",m.value)}1!==e&&s.updateRecordDialog(!1)}))}():a.setLoginDialog(!0)}const g=I(""),f=I(""),m=I(""),S=I(!1);return(e,l)=>(w(),C("div",xe,[L("div",ye,[c.value?(w(),C("img",be)):(w(),C("img",ke)),L("div",Ie,[L("div",we,[(w(),C(F,null,O(v,(e=>L("img",{style:{width:"32px",height:"32px"},key:e.id,src:e.imgurl,alt:""},null,8,Ce))),64))]),l[1]||(l[1]=L("div",{style:{"text-align":"center","margin-top":"8px","font-size":"12px"}},[L("p",null,"将文档拖到此处"),L("p",null,"或")],-1)),L("div",{class:"btnBox bg-gradient-to-r from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent dark:bg-[#36373e]",onClick:p},l[0]||(l[0]=[L("img",{src:"/static/svg/upload-f6d62db0.svg",alt:""},null,-1),L("p",{style:{"margin-left":"4px"}},"上传文档",-1)])),l[2]||(l[2]=L("div",{style:{"font-size":"10px","margin-top":"24px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},[L("p",null,"支持PDF、JPG、PNG、DOC、TXT、XLS、PPT等17种文档格式"),L("p",null,"请不要上传敏感数据，比如私密、隐私文档等内容（最大1MB）")],-1))])])]))}}),[["__scopeId","data-v-622ef0bb"]]),Fe={class:"messageBox"},Oe={style:{width:"100%",display:"flex","justify-content":"flex-end","margin-top":"24px"}},De={key:0},Se={key:0},_e=["src"],Be={key:1,class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{padding:"8px","border-radius":"8px",display:"flex","align-items":"center"}},Te={style:{"margin-left":"5px"}},Me={style:{"font-size":"15px"}},je={style:{"font-size":"12px"}},Ue=["innerHTML"],Ee=["innerHTML"],Ne={style:{"margin-top":"24px",display:"flex","align-items":"flex-start","flex-direction":"column"}},qe={style:{display:"flex","align-items":"flex-start"}},Ae={class:"border dark:border-[#25262A] border-[#EAEAEA]",style:{"border-radius":"50%",width:"34px",height:"34px"}},He=["src"],ze={key:0,class:"chatLeft"},Re=["innerHTML"],Pe={style:{display:"flex","align-items":"center","margin-top":"12px","margin-left":"45px"}},Ge=["onClick"],Je={key:0,src:oe,alt:""},Ke={key:1,src:ue,alt:""},$e=["onClick"],Ve={key:0,src:re,alt:""},Xe={key:1,src:de,alt:""},Ze=["onClick"],We={key:0,src:ce,alt:""},Ye={key:1,src:ve,alt:""},Qe={class:"AItip dark:bg-[#222325] bg-[#F0F0F0]"},el={style:{display:"flex","align-items":"center"}},ll={key:0,src:pe,alt:""},al={key:1,src:ge,alt:""},tl={style:{"margin-left":"4px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},il={class:"sticky bottom-0 left-0 flex justify-center"},sl=S(m({__name:"documentChatLog",props:{dataList:Array,modelInfo:Object,handleSendMessage:String},emits:["haveNotData","chatDataLength"],setup(e,{emit:l}){var a;const{updateGroupChat:i,updateGroupChatSome:s}=ie(),{usingContext:n}=se(),o=_(),u=k(),r=h(),d=y(),c=x((()=>"dark"===d.theme)),v=I(""),p=I(""),g=b(),{usingNetwork:f}=ne();let m=new AbortController;B({keys:["dialogueTail","robotAvatar"]}).then((e=>{v.value=e.data.dialogueTail,p.value=e.data.robotAvatar}));const D=l,S=e,$=I("");S.modelInfo&&($.value=null==(a=S.modelInfo)?void 0:a.model),T.on("setFileModel",(e=>{$.value=null==e?void 0:e.model}));const V=I(),X=I(),Z=I(!1),W=I(!1);M(S,(e=>{if(e.dataList&&0==e.dataList.length&&(Z.value=!0),e.handleSendMessage){de(e.handleSendMessage)}})),M((()=>S.dataList),((e,l)=>{var a;String(e)!==String(l)&&(V.value=e,a=V.value,V.value=a.filter((e=>null!=e.conversationOptions)),V.value.forEach((e=>{let{text:l}=e;null!=l&&(e.text=j(l))})),setTimeout((()=>{ve()}),100))}),{immediate:!0}),M(X,(e=>{let l=ce.value;l.scrollTop=l.scrollHeight})),j.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});const Y=x((()=>o.chatList)),Q=I(!1),ee=x((()=>o.active)),le=I(!0),ae=x((()=>o.groupList.find((e=>e.uuid===ee.value)))),oe=x((()=>Number(null==o?void 0:o.activeModelKeyType))),ue=x((()=>Y.value.filter((e=>!e.inversion&&!e.error)))),re=I();async function de(e){var l,a;if(W.value)return;let d=e;if(!d||""===d.trim())return;m=new AbortController,j.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});let c={dateTime:(new Date).toLocaleString(),text:"AI思考中",inversion:!0,error:!1,conversationOptions:null,requestOptions:{prompt:d,options:null}};V.value=[...V.value,c],Z.value&&D("chatDataLength",V.value),setTimeout((()=>{ve()}),100);let v={};v={groupId:+ee.value,usingNetwork:f.value};const p=null==(l=ue.value[ue.value.length-1])?void 0:l.conversationOptions;p&&n.value&&!f.value&&(v={...p,...v});let h=null;h=V.value.length>1?V.value[V.value.length-2]:V.value[0];const x=(null==(a=null==h?void 0:h.conversationOptions)?void 0:a.parentMessageId)||"";console.log(h),v={...v,model:$.value,type:"file",parentMessageId:x};let y="",b="",k=0;const w=I("");let C=null;Q.value=!0;let L={};g.updateIsChatIn(!0);try{const e=async()=>{re.value=setInterval((async()=>{var e;if(W.value=!0,y[k]&&b.length<y.length&&(b+=y[k]),y[k]&&(le.value=!1,V.value[V.value.length-1].text=b,X.value=b,V.value[V.value.length-1].text=j(V.value[V.value.length-1].text),V.value[V.value.length-1].conversationOptions={parentMessageId:C.id},w.value=b,k++),!Q.value&&b.length>=y.length&&(w.value="",k=0,X.value="",b="",re.value&&clearInterval(re.value),re.value=null,T.emit("getUserInfo",!0),W.value=!1,le.value=!0,s(Y.value.length-1,{loading:!1}),g.updateIsChatIn(!1),L&&r.updateUserBanance(L),2===Y.value.length&&!(null==(e=null==ae?void 0:ae.value)?void 0:e.appId))){const e=Y.value[1].text.length>15?Y.value[1].text.slice(0,15):Y.value[1].text;await o.updateGroupInfo({groupId:+ee.value,title:e}),await o.queryMyGroup()}}),16),await K({prompt:d??"",appId:ae.value?ae.value.appId:0,options:v,signal:m.signal,onDownloadProgress:({event:e})=>{var l;const a=e.target,{responseText:t}=a;if([1,7].includes(oe.value)){const e=t.lastIndexOf("\n",t.length-2);let l=t;-1!==e&&(l=t.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("OpenAI timed out waiting for response")&&u.warning("会话超时了、告知管理员吧~~~")}}if([2,3].includes(oe.value)){const e=t.toString().split("\n").filter((e=>""!==e.trim()));let l="",a={};for(const t of e)try{const e=JSON.parse(t);l=e.text,a=e}catch(i){}a.result=l,C=a}if([4].includes(oe.value)){const e=t.lastIndexOf("\n",t.length);let l=t;-1!==e&&(l=t.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("xunfeizhipu timed out waiting for response")&&u.warning("会话超时了、告知管理员吧~~~")}}try{if([1,7].includes(oe.value)&&(y=C.text,Q.value=!C.is_end,(null==(l=null==C?void 0:C.detail)?void 0:l.usage)&&(le.value=C.is_end,L=null==C?void 0:C.userBanance)),[2,3].includes(oe.value)){const{result:e,is_end:l}=C;y=e,Q.value=!l,(null==C?void 0:C.userBanance)&&(L=null==C?void 0:C.userBanance)}if([4].includes(oe.value)){const{text:e,is_end:l}=C;y=e,Q.value=!l,(null==C?void 0:C.userBanance)&&(L=null==C?void 0:C.userBanance)}}catch(i){console.log(i)}}})};await e()}catch(F){V.value[V.value.length-1].text=F.message,g.updateIsChatIn(!1),clearInterval(re.value),Q.value=!1,(402===F.code||(null==F?void 0:F.message.includes("余额不足"))||(null==F?void 0:F.message.includes("免费额度已经使用完毕")))&&g.updateVipDialog(!0);let e=(null==F?void 0:F.message)??t("common.wrong");if("Request failed with status code 401"===e&&(e="非法操作、请先登录后再进行问答使用！"),null==F?void 0:F.message.includes("canceled"))return s(Y.value.length-1,{loading:!1}),void setTimeout((()=>{r.getUserBalance()}),200);const l=Y.value[Y.value.length-1];if((null==l?void 0:l.text)&&""!==l.text)return void s(Y.value.length-1,{text:`${"AI思考中"===l.text?"":l.text}\n[${e}]`,error:!1,loading:!1});i(Y.value.length-1,{dateTime:(new Date).toLocaleString(),text:e,inversion:!1,error:!0,loading:!1,conversationOptions:null,requestOptions:{prompt:d,options:{...v}}})}finally{Q.value=!1,W.value=!1}}const ce=I(null);function ve(){let e=ce.value;e&&e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})}function pe(){W.value&&(m.abort(),W.value=!1,Q.value=!1,le.value=!0,clearInterval(re.value))}return(e,l)=>{const a=N("SvgIcon");return w(),C("div",Fe,[L("div",{class:"chatLogBox",ref_key:"toTop",ref:ce},[(w(!0),C(F,null,O(V.value,(e=>{var a,t,i,s,n,o,r,d,g,f,m,h,x,y,b,k;return w(),C("div",{class:"LogItem",key:e.chatId},[L("div",Oe,[-1!=(null==(a=e.requestOptions)?void 0:a.prompt.indexOf("http"))?(w(),C("div",De,[-1!=(null==(t=e.requestOptions)?void 0:t.prompt.indexOf("png"))||-1!=(null==(i=e.requestOptions)?void 0:i.prompt.indexOf("jpg"))||-1!=(null==(s=e.requestOptions)?void 0:s.prompt.indexOf("jpeg"))?(w(),C("div",Se,[L("img",{style:{width:"150px",height:"auto"},src:null==(n=e.requestOptions)?void 0:n.prompt.split(" ")[0],alt:""},null,8,_e)])):(w(),C("div",Be,[l[0]||(l[0]=L("div",{style:{"background-color":"#10a37f",padding:"4px","border-radius":"4px",display:"flex"}},[L("img",{style:{width:"30px",height:"30px"},src:te,alt:""})],-1)),L("div",Te,[L("p",Me,q(null==(r=null==(o=e.requestOptions)?void 0:o.prompt)?void 0:r.split("/ai/")[1].split(" ")[0]),1),L("p",je,q(null==(h=null==(m=null==(f=null==(g=null==(d=e.requestOptions)?void 0:d.prompt)?void 0:g.split("/ai/")[1])?void 0:f.split(" ")[0])?void 0:m.split(".")[1])?void 0:h.split(" ")[0]),1)])])),(null==(x=e.requestOptions)?void 0:x.prompt.split(" ")[1])?(w(),C("div",{key:2,class:"chatRight1 dark:bg-[#222325] bg-[#F0F0F0] markdown-body-generate",innerHTML:null==(y=e.requestOptions)?void 0:y.prompt.split(" ")[1]},null,8,Ue)):E("",!0)])):E("",!0),-1==(null==(b=e.requestOptions)?void 0:b.prompt.indexOf("http"))?(w(),C("div",{key:1,class:"chatRight dark:bg-[#222325] bg-[#F0F0F0]",innerHTML:null==(k=e.requestOptions)?void 0:k.prompt},null,8,Ee)):E("",!0)]),L("div",Ne,[L("div",qe,[L("div",Ae,[L("img",{src:p.value,alt:""},null,8,He)]),null==e.text||""==e.text?(w(),C("div",ze," 接口错误，请联系管理员处理~ ")):(w(),C("div",{key:1,class:"chatLeft markdown-body-generate markdown-body-text dark:bg-[#222325] bg-[#fff]",innerHTML:e.text,style:{"line-height":"15px","margin-top":"13px"}},null,8,Re))]),L("div",Pe,[L("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:A(c.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){if(e.text){const{text:l}=e;G({text:l}),u.success("复制成功")}else u.error("复制失败")}(e)},[U(R(P),{trigger:"hover",placement:"bottom",style:z([{"border-radius":"8px"},c.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:H((()=>[c.value?(w(),C("img",Je)):(w(),C("img",Ke))])),default:H((()=>[l[1]||(l[1]=L("span",null,"复制",-1))])),_:1},8,["style"])],10,Ge),L("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:A(c.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){let{prompt:l}=e.requestOptions;de(l)}(e)},[U(R(P),{trigger:"hover",placement:"bottom",style:z([{"border-radius":"8px"},c.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:H((()=>[c.value?(w(),C("img",Ve)):(w(),C("img",Xe))])),default:H((()=>[l[2]||(l[2]=L("span",null,"刷新",-1))])),_:1},8,["style"])],10,$e),L("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:A(c.value?"handleIcon":"handleIcon1"),onClick:l=>async function(e){var l;let a={id:e.chatId};await J(a).then((l=>{var a;V.value=null==(a=V.value)?void 0:a.filter((l=>l.chatId!=e.chatId)),u.success("删除成功")})).catch((e=>{u.error("删除失败")})),0==(null==(l=V.value)?void 0:l.length)&&D("haveNotData")}(e)},[U(R(P),{trigger:"hover",placement:"bottom",style:z([{"border-radius":"8px"},c.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:H((()=>[c.value?(w(),C("img",We)):(w(),C("img",Ye))])),default:H((()=>[l[3]||(l[3]=L("span",null,"删除",-1))])),_:1},8,["style"])],10,Ze),L("div",Qe,[L("div",el,[c.value?(w(),C("img",ll)):(w(),C("img",al))]),L("p",tl,q(v.value),1)])])])])})),128)),L("div",il,[W.value?(w(),C("div",{key:0,onClick:pe,class:"stopBox"},[U(a,{icon:"ri:stop-circle-line"}),l[4]||(l[4]=L("p",{style:{"margin-left":"8px"}},"停止输出",-1))])):E("",!0)])],512)])}}}),[["__scopeId","data-v-94e46567"]]),nl={class:"mainBox"},ol={class:"bg-[#ffffff] dark:bg-[#19191B]",style:{padding:"0 12px","border-radius":"24px"}},ul={key:0,class:"fileBox",style:{position:"relative"}},rl={class:"file bg-[#FFFFFF] dark:bg-[#111113]"},dl={key:0,style:{width:"24px",height:"24px","border-radius":"6px",display:"flex","justify-content":"center","align-items":"center"}},cl=["src"],vl={key:0,style:{position:"absolute"}},pl={key:1,style:{"background-color":"#10a37f",width:"24px",height:"24px","border-radius":"6px",display:"flex","justify-content":"center","align-items":"center"}},gl={key:0,style:{position:"relative"},src:te,alt:""},fl={key:1,style:{position:"absolute"}},ml={style:{flex:"1","margin-left":"8px"}},hl={style:{"font-size":"12px","line-height":"15px"}},xl={style:{"font-size":"10px","line-height":"4px","margin-top":"4px"}},yl={class:"inpBox"},bl=S(m({__name:"documentSend",props:{changeChatLog:Boolean,modelInfo:Object,fileUrl:String},emits:["handleSend","handleInp"],setup(e,{emit:l}){x((()=>a.isLogin)),$(),V();const a=h(),t=k(),i=y(),s=x((()=>"dark"===i.theme)),n=l,o=I(),u=I(),{selectFile:r,upload:d}=ae(),c=b(),v=I("/api/file/upload2Local");function p(){(o.value||u.value)&&(o.value?u.value?o.value&&u.value&&n("handleSend",u.value+" "+o.value):n("handleSend",o.value):(console.log(u.value,"fileMessage.value"),n("handleSend",u.value+" 请用中文分析一下上传的这个文件")),N.value=!1,O.value="",_.value="",o.value="",u.value="")}function g(e){o.value&&("Enter"===e.key&&e.shiftKey?(e.preventDefault(),o.value=o.value+"\n"):"Enter"!==e.key||e.ctrlKey||e.shiftKey?"Enter"===e.key&&(e.preventDefault(),p()):(e.preventDefault(),p()))}const f=e;function m(){u.value?n("handleInp",u.value+" "+o.value):n("handleInp",o.value)}T.on("sendSuccess",(()=>{o.value="",u.value=""}));const F=I(!1);M(f,(e=>{if(N.value=!1,e.modelInfo&&(F.value=e.modelInfo.canUpload),e.fileUrl){let l=e.fileUrl;_.value=l,u.value=l,N.value=!0,S.value=l.split(".").pop(),O.value=l.split("/ai/")[1],B.value=!1}})),T.on("setFileModel",(e=>{F.value=e.canUpload}));const O=I(""),S=I(""),_=I(""),B=I(!1);async function j(e=1){let l;if(U.value=!1,1===e){if(l=await r(),!l)return void t.error("选择文件错误")}else l=e;B.value=!0,N.value=!0;const a=new FormData;a.append("file",l),await D.post(v.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;S.value=e.split(".").pop(),O.value=e.split("/ai/")[1],_.value=l.data.data,u.value=e,n("handleInp",_.value),B.value=!1}1!==e&&c.updateRecordDialog(!1)}))}const U=I(!1),N=I(!1);function H(){N.value=!1,u.value=""}return(e,l)=>(w(),C("div",nl,[L("div",ol,[N.value?(w(),C("div",ul,[L("div",rl,["png"==S.value||"jpeg"==S.value||"jpg"==S.value?(w(),C("div",dl,[L("img",{src:_.value,alt:""},null,8,cl),B.value?(w(),C("div",vl,l[4]||(l[4]=[L("div",{class:"loader"},null,-1)]))):E("",!0)])):(w(),C("div",pl,[B.value?E("",!0):(w(),C("img",gl)),B.value?(w(),C("div",fl,l[5]||(l[5]=[L("div",{class:"loader"},null,-1)]))):E("",!0)])),L("div",ml,[L("p",hl,q(O.value),1),L("p",xl,q("png"==S.value||"jpeg"==S.value||"jpg"==S.value?"图片":"文档"),1)])]),L("div",{style:{position:"absolute",top:"10px",right:"5px",cursor:"pointer"},class:"closeFile",onClick:H}," × ")])):E("",!0),L("div",yl,[F.value?(w(),C("img",{key:0,onClick:l[0]||(l[0]=e=>function(e=1){j(e)}(1)),style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:fe,alt:""})):E("",!0),X(L("textarea",{onKeydown:g,class:"inp","onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),type:"text",name:"",id:"",placeholder:"在此输入您想了解的内容，输入shift+回车换行",onInput:m},null,544),[[Z,o.value]]),s.value?(w(),C("img",{key:1,class:A(o.value||u.value?"bg-[#fff]":"dark:bg-[#46484F]"),style:{"border-radius":"50%",cursor:"pointer",width:"24px",height:"24px"},src:"/static/svg/sendBox_2-563d9c6b.svg",alt:"",onClick:p},null,2)):(w(),C("img",{key:2,class:A(o.value||u.value?"bg-[#000]":"dark:bg-[#46484F] bg-[#CDCECE]"),style:{"border-radius":"50%",cursor:"pointer",width:"24px",height:"24px"},src:me,alt:"",onClick:p},null,2)),s.value&&U.value?(w(),C("div",{key:3,class:"upLoadModel1",onClick:l[2]||(l[2]=e=>j(1))},l[6]||(l[6]=[L("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#222325"}},[L("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:fe,alt:""}),L("p",null,"从电脑中上传")],-1)]))):E("",!0),!s.value&&U.value?(w(),C("div",{key:4,class:"upLoadModel",onClick:l[3]||(l[3]=e=>j(1))},l[7]||(l[7]=[L("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#f0f0f0"}},[L("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:fe,alt:""}),L("p",null,"从电脑中上传")],-1)]))):E("",!0)])])]))}}),[["__scopeId","data-v-a4f905ca"]]),kl={style:{display:"flex"},class:"bg-[#F8F9F9] dark:bg-[#1b1c22]"},Il={class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{width:"466px",height:"394px","border-radius":"24px"}},wl={style:{display:"flex","justify-content":"space-between",padding:"16px"}},Cl={style:{flex:"1",display:"flex","justify-content":"center",height:"calc(100% - 56px)","align-items":"center","padding-bottom":"24px"}},Ll={style:{padding:"24px 24px 12px 24px","border-radius":"12px","background-color":"#fff",border:"1px solid #e8e8e8","text-align":"center"}},Fl=["src"],Ol={style:{width:"100%",overflow:"hidden",height:"100vh",position:"relative"}},Dl={style:{display:"flex","justify-content":"center","margin-top":"24px",position:"absolute",bottom:"80px",width:"100%"}},Sl={style:{color:"#eeeeee"},class:"end"},_l={style:{display:"flex"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},Bl={key:0,style:{display:"flex","margin-left":"8px"}},Tl=["href"],Ml={key:1,style:{display:"flex","margin-left":"8px"}},jl=["href"],Ul={class:"fixedBox"},El=["onClick"],Nl=["src"],ql={style:{"margin-left":"8px","margin-top":"3px"}},Al=S(m({__name:"index",setup(t){const m=h(),k=x((()=>m.isLogin)),D=I(""),S=V(),_=b(),B=I(!0),M=I(""),j=I(""),N=I(""),P=I(""),G=I(""),J=I(""),K=I(!0),$=y(),X=x((()=>"dark"===$.theme));he({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{M.value=e.data.copyrightTitle,j.value=e.data.icpNumber,N.value=e.data.policeFilingNumber,P.value=e.data.icpUrl,G.value=e.data.policeFilingUrl})),W((()=>{D.value=S.path}));const Z=I([]);function ae(e){0==e.length?(B.value=!0,K.value=!0):K.value=!1,Z.value=e}function te(){Z.value=[]}const ie=I(),se=I();function ne(e){re.value="",ce.value="",se.value=e,ie.value=JSON.parse(e.config).modelInfo}const oe=I(0);function ue(){oe.value++}const re=I();function de(e){console.log(e),e&&(re.value=e)}const ce=I();function ve(e){0==Z.value.length&&(K.value=!1),ce.value=e,J.value="fileType"}function pe(e){e&&(B.value=!1)}const ge=I(!1),fe=I(""),me=async()=>{fe.value=await(async()=>await le({keys:["wechatImage"]}).then((e=>e.data)))(),ge.value=!0},xe=[{title:"帮助与常见问题解答",id:0,iconDark:n,iconLight:o},{title:"条款与政策",id:1,iconDark:u,iconLight:r},{title:"反馈与建议",id:2,iconDark:d,iconLight:c},{title:"关于我们",id:3,iconDark:v,iconLight:p}],ye=I(!1);function be(){ye.value=!ye.value}return(t,n)=>(w(),C("div",kl,[U(a),U(R(ee),{show:ge.value,"onUpdate:show":n[2]||(n[2]=e=>ge.value=e)},{default:H((()=>[L("div",Il,[L("div",wl,[n[3]||(n[3]=L("p",{style:{"font-size":"17px","font-weight":"bold"}},"客服",-1)),X.value?(w(),C("img",{key:0,src:i,style:{cursor:"pointer"},alt:"",onClick:n[0]||(n[0]=e=>ge.value=!1)})):(w(),C("img",{key:1,src:s,style:{cursor:"pointer"},alt:"",onClick:n[1]||(n[1]=e=>ge.value=!1)}))]),L("div",Cl,[L("div",Ll,[L("img",{src:fe.value,alt:"",style:{width:"200px",height:"200px"}},null,8,Fl),n[4]||(n[4]=L("p",{style:{color:"#8b8c8c","margin-top":"12px"}}," 请使用微信扫描上方二维码 ",-1))])])])])),_:1},8,["show"]),U(g,{changeModelisSuccess:oe.value,onHandleModelInfo:ne,onDocumentChatLog:ae,currentRoute:D.value,modelInfo:ie.value},null,8,["changeModelisSuccess","currentRoute","modelInfo"]),L("div",Ol,[U(f,{onChangeModelSuccess:ue,modelInfo:ie.value,currentRoute:D.value},null,8,["modelInfo","currentRoute"]),K.value||!k.value?(w(),Y(Le,{key:0,onUploadIsSuccess:de})):E("",!0),U(sl,{onChatDataLength:pe,onHaveNotData:te,dataList:Z.value,modelInfo:ie.value,handleSendMessage:ce.value},null,8,["dataList","modelInfo","handleSendMessage"]),U(bl,{onHandleSend:ve,fileUrl:re.value,modelInfo:ie.value,style:z(0!=Z.value.length||re.value?"":"position: absolute;left:-999px;bottom:-999px")},null,8,["fileUrl","modelInfo","style"]),L("div",Dl,[L("div",Sl,[L("div",_l,[Q(" 版权所有 © "+q(M.value)+" ",1),j.value?(w(),C("div",Bl,[L("a",{href:P.value||"#"},q(j.value),9,Tl)])):E("",!0),N.value?(w(),C("div",Ml,[L("a",{href:G.value||"#"},q(N.value),9,jl)])):E("",!0)])])]),L("div",Ul,[L("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:me},n[5]||(n[5]=[L("img",{src:e,alt:""},null,-1)])),L("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:be,style:{"margin-top":"12px"}},n[6]||(n[6]=[L("img",{src:l,alt:""},null,-1)])),ye.value?(w(),C("div",{key:0,class:A(X.value?"helpBoxD":"helpBoxL")},[(w(),C(F,null,O(xe,(e=>L("div",{class:A(X.value?"hlepItemD":"hlepItemL"),key:e.id,style:{display:"flex","align-items":"center"},onClick:l=>function(e){0==e.id?ye.value=!1:1==e.id?(window.open("/policy","_blank"),ye.value=!1):2==e.id?(_.updateFeedbackDialog(!0),ye.value=!1):3==e.id&&(T.emit("aboutIsShow",!0),ye.value=!1)}(e)},[L("img",{src:X.value?e.iconDark:e.iconLight,alt:""},null,8,Nl),L("div",ql,q(e.title),1)],10,El))),64))],2)):E("",!0)])])]))}}),[["__scopeId","data-v-d26dfd41"]]);export{Al as default};
