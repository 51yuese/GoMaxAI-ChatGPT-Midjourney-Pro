import{b as e,c as l,A as a,_ as i,a as s,q as n,d as o,e as u,f as r,s as d,g as c,h as p,i as v}from"../aboutUs copy/aboutUs copy.d03804cf.js";import{a as g,n as f}from"../newNavBar/newNavBar.b4b748dd.js";import{e as m,R as h,j as x,a7 as y,au as b,aj as k,r as I,N as w,O as C,P as F,Z as L,_ as O,ap as D,a1 as S,aN as B,ad as _,a0 as j,A as T,ar as M,U,a4 as N,af as E,$ as q,a8 as A,W as H,H as R,X as z,bd as P,aq as G,be as J,bb as K,S as V,aQ as X,F as $,ab as Q,k as W,ak as Z,ai as Y,am as ee,b4 as le}from"../main-6c725c30.js";import{u as ae}from"../useUpload/useUpload.94c17c32.js";import{_ as te}from"../file/file.977b36cf.js";import{b as ie,u as se,c as ne,d as oe,e as ue,f as re,g as de,h as ce,i as pe,j as ve,k as ge,_ as fe,a as me}from"../sendBox_3/sendBox_3.cef6ccc8.js";import{a as he}from"../music/music.7f933b9b.js";import"../start copy/start copy.b80ca035.js";import"../OptionsOutline/OptionsOutline.c3969d7e.js";const xe={class:"contentBox"},ye={class:"upLoadBox"},be={key:0,src:"/static/svg/fileD-0ccbe29a.svg",alt:"",style:{width:"80px",height:"80px"}},ke={key:1,src:"/static/svg/file copy-7aceb648.svg",alt:"",style:{width:"80px",height:"80px"}},Ie={style:{padding:"48px",width:"720px","border-radius":"12px",border:"1px dashed #10A37F",display:"flex","flex-direction":"column","align-items":"center","margin-top":"24px"}},we={class:"imgBox"},Ce=["src"],Fe=S(m({__name:"documentContent",emits:["uploadIsSuccess"],setup(e,{emit:l}){const a=h(),t=x((()=>a.isLogin)),i=y(),s=b(),n=k(),o=I("/api/file/upload2Local"),u=l,{selectFile:r,upload:d}=ae(),c=x((()=>"dark"===i.theme)),p=[{id:0,imgurl:"/static/svg/pdf-42416cf9.svg"},{id:1,imgurl:"/static/svg/jpg-92ed99c6.svg"},{id:2,imgurl:"/static/svg/png-adcf3ca5.svg"},{id:3,imgurl:"/static/svg/doc-e5077b2b.svg"},{id:4,imgurl:"/static/svg/docTxt-287d976d.svg"},{id:5,imgurl:"/static/svg/xls-16755e1f.svg"},{id:9,imgurl:"/static/svg/ppt-3fa6be75.svg"}];function v(){t.value?async function(e=1){let l;if(1===e){if(l=await r(),!l)return void n.error("选择文件错误")}else l=e;S.value=!0;const a=new FormData;a.append("file",l),await D.post(o.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;f.value=e.split(".").pop(),g.value=e.split("/ai/")[1],m.value=l.data.data,S.value=!1,u("uploadIsSuccess",m.value)}1!==e&&s.updateRecordDialog(!1)}))}():a.setLoginDialog(!0)}const g=I(""),f=I(""),m=I(""),S=I(!1);return(e,l)=>(w(),C("div",xe,[F("div",ye,[c.value?(w(),C("img",be)):(w(),C("img",ke)),F("div",Ie,[F("div",we,[(w(),C(L,null,O(p,(e=>F("img",{style:{width:"32px",height:"32px"},key:e.id,src:e.imgurl,alt:""},null,8,Ce))),64))]),l[1]||(l[1]=F("div",{style:{"text-align":"center","margin-top":"8px","font-size":"12px"}},[F("p",null,"将文档拖到此处"),F("p",null,"或")],-1)),F("div",{class:"btnBox bg-gradient-to-r from-[#957DF4] to-[#3C69E7] dark:from-transparent dark:to-transparent dark:bg-[#36373e]",onClick:v},l[0]||(l[0]=[F("img",{src:"/static/svg/upload-f6d62db0.svg",alt:""},null,-1),F("p",{style:{"margin-left":"4px"}},"上传文档",-1)])),l[2]||(l[2]=F("div",{style:{"font-size":"10px","margin-top":"24px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},[F("p",null,"支持PDF、JPG、PNG、DOC、TXT、XLS、PPT等17种文档格式"),F("p",null,"请不要上传敏感数据，比如私密、隐私文档等内容（最大1MB）")],-1))])])]))}}),[["__scopeId","data-v-622ef0bb"]]),Le={class:"messageBox"},Oe={style:{width:"100%",display:"flex","justify-content":"flex-end","margin-top":"24px"}},De={key:0},Se={key:0},Be=["src"],_e={key:1,class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{padding:"8px","border-radius":"8px",display:"flex","align-items":"center"}},je={style:{"margin-left":"5px"}},Te={style:{"font-size":"15px"}},Me={style:{"font-size":"12px"}},Ue=["innerHTML"],Ne=["innerHTML"],Ee={style:{"margin-top":"24px",display:"flex","align-items":"flex-start","flex-direction":"column"}},qe={style:{display:"flex","align-items":"flex-start"}},Ae={class:"border dark:border-[#25262A] border-[#EAEAEA]",style:{"border-radius":"50%",width:"34px",height:"34px"}},He=["src"],Re={key:0,class:"chatLeft"},ze=["innerHTML"],Pe={style:{display:"flex","align-items":"center","margin-top":"12px","margin-left":"45px"}},Ge=["onClick"],Je={key:0,src:oe,alt:""},Ke={key:1,src:ue,alt:""},Ve=["onClick"],Xe={key:0,src:re,alt:""},$e={key:1,src:de,alt:""},Qe=["onClick"],We={key:0,src:ce,alt:""},Ze={key:1,src:pe,alt:""},Ye={class:"AItip dark:bg-[#222325] bg-[#F0F0F0]"},el={style:{display:"flex","align-items":"center"}},ll={key:0,src:ve,alt:""},al={key:1,src:ge,alt:""},tl={style:{"margin-left":"4px"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},il={class:"sticky bottom-0 left-0 flex justify-center"},sl=S(m({__name:"documentChatLog",props:{dataList:Array,modelInfo:Object,handleSendMessage:String},emits:["haveNotData","chatDataLength"],setup(e,{emit:l}){var a;const{updateGroupChat:i,updateGroupChatSome:s}=ie(),{usingContext:n}=se(),o=B(),u=k(),r=h(),d=y(),c=x((()=>"dark"===d.theme)),p=I(""),v=I(""),g=b(),{usingNetwork:f}=ne();let m=new AbortController;_({keys:["dialogueTail","robotAvatar"]}).then((e=>{p.value=e.data.dialogueTail,v.value=e.data.robotAvatar}));const D=l,S=e,V=I("");S.modelInfo&&(V.value=null==(a=S.modelInfo)?void 0:a.model),j.on("setFileModel",(e=>{V.value=null==e?void 0:e.model}));const X=I(),$=I(),Q=I(!1),W=I(!1);T(S,(e=>{if(e.dataList&&0==e.dataList.length&&(Q.value=!0),e.handleSendMessage){de(e.handleSendMessage)}})),T((()=>S.dataList),((e,l)=>{var a;String(e)!==String(l)&&(X.value=e,a=X.value,X.value=a.filter((e=>null!=e.conversationOptions)),X.value.forEach((e=>{let{text:l}=e;null!=l&&(e.text=M(l))})),setTimeout((()=>{pe()}),100))}),{immediate:!0}),T($,(e=>{let l=ce.value;l.scrollTop=l.scrollHeight})),M.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});const Z=x((()=>o.chatList)),Y=I(!1),ee=x((()=>o.active)),le=I(!0),ae=x((()=>o.groupList.find((e=>e.uuid===ee.value)))),oe=x((()=>Number(null==o?void 0:o.activeModelKeyType))),ue=x((()=>Z.value.filter((e=>!e.inversion&&!e.error)))),re=I();async function de(e){var l,a;if(W.value)return;let d=e;if(!d||""===d.trim())return;m=new AbortController,M.setOptions({pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});let c={dateTime:(new Date).toLocaleString(),text:"AI思考中",inversion:!0,error:!1,conversationOptions:null,requestOptions:{prompt:d,options:null}};X.value=[...X.value,c],Q.value&&D("chatDataLength",X.value),setTimeout((()=>{pe()}),100);let p={};p={groupId:+ee.value,usingNetwork:f.value};const v=null==(l=ue.value[ue.value.length-1])?void 0:l.conversationOptions;v&&n.value&&!f.value&&(p={...v,...p});let h=null;h=X.value.length>1?X.value[X.value.length-2]:X.value[0];const x=(null==(a=null==h?void 0:h.conversationOptions)?void 0:a.parentMessageId)||"";console.log(h),p={...p,model:V.value,type:"file",parentMessageId:x};let y="",b="",k=0;const w=I("");let C=null;Y.value=!0;let F={};g.updateIsChatIn(!0);try{const e=async()=>{re.value=setInterval((async()=>{var e;if(W.value=!0,y[k]&&b.length<y.length&&(b+=y[k]),y[k]&&(le.value=!1,X.value[X.value.length-1].text=b,$.value=b,X.value[X.value.length-1].text=M(X.value[X.value.length-1].text),X.value[X.value.length-1].conversationOptions={parentMessageId:C.id},w.value=b,k++),!Y.value&&b.length>=y.length&&(w.value="",k=0,$.value="",b="",re.value&&clearInterval(re.value),re.value=null,j.emit("getUserInfo",!0),W.value=!1,le.value=!0,s(Z.value.length-1,{loading:!1}),g.updateIsChatIn(!1),F&&r.updateUserBanance(F),2===Z.value.length&&!(null==(e=null==ae?void 0:ae.value)?void 0:e.appId))){const e=Z.value[1].text.length>15?Z.value[1].text.slice(0,15):Z.value[1].text;await o.updateGroupInfo({groupId:+ee.value,title:e}),await o.queryMyGroup()}}),16),await K({prompt:d??"",appId:ae.value?ae.value.appId:0,options:p,signal:m.signal,onDownloadProgress:({event:e})=>{var l;const a=e.target,{responseText:t}=a;if([1,7].includes(oe.value)){const e=t.lastIndexOf("\n",t.length-2);let l=t;-1!==e&&(l=t.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("OpenAI timed out waiting for response")&&u.warning("会话超时了、告知管理员吧~~~")}}if([2,3].includes(oe.value)){const e=t.toString().split("\n").filter((e=>""!==e.trim()));let l="",a={};for(const t of e)try{const e=JSON.parse(t);l=e.text,a=e}catch(i){}a.result=l,C=a}if([4].includes(oe.value)){const e=t.lastIndexOf("\n",t.length);let l=t;-1!==e&&(l=t.substring(e));try{C=JSON.parse(l)}catch(i){l.includes("xunfeizhipu timed out waiting for response")&&u.warning("会话超时了、告知管理员吧~~~")}}try{if([1,7].includes(oe.value)&&(y=C.text,Y.value=!C.is_end,(null==(l=null==C?void 0:C.detail)?void 0:l.usage)&&(le.value=C.is_end,F=null==C?void 0:C.userBanance)),[2,3].includes(oe.value)){const{result:e,is_end:l}=C;y=e,Y.value=!l,(null==C?void 0:C.userBanance)&&(F=null==C?void 0:C.userBanance)}if([4].includes(oe.value)){const{text:e,is_end:l}=C;y=e,Y.value=!l,(null==C?void 0:C.userBanance)&&(F=null==C?void 0:C.userBanance)}}catch(i){console.log(i)}}})};await e()}catch(L){X.value[X.value.length-1].text=L.message,g.updateIsChatIn(!1),clearInterval(re.value),Y.value=!1,(402===L.code||(null==L?void 0:L.message.includes("余额不足"))||(null==L?void 0:L.message.includes("免费额度已经使用完毕")))&&g.updateVipDialog(!0);let e=(null==L?void 0:L.message)??t("common.wrong");if("Request failed with status code 401"===e&&(e="非法操作、请先登录后再进行问答使用！"),null==L?void 0:L.message.includes("canceled"))return s(Z.value.length-1,{loading:!1}),void setTimeout((()=>{r.getUserBalance()}),200);const l=Z.value[Z.value.length-1];if((null==l?void 0:l.text)&&""!==l.text)return void s(Z.value.length-1,{text:`${"AI思考中"===l.text?"":l.text}\n[${e}]`,error:!1,loading:!1});i(Z.value.length-1,{dateTime:(new Date).toLocaleString(),text:e,inversion:!1,error:!0,loading:!1,conversationOptions:null,requestOptions:{prompt:d,options:{...p}}})}finally{Y.value=!1,W.value=!1}}const ce=I(null);function pe(){let e=ce.value;e&&e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})}function ve(){W.value&&(m.abort(),W.value=!1,Y.value=!1,le.value=!0,clearInterval(re.value))}return(e,l)=>{const a=E("SvgIcon");return w(),C("div",Le,[F("div",{class:"chatLogBox",ref_key:"toTop",ref:ce},[(w(!0),C(L,null,O(X.value,(e=>{var a,t,i,s,n,o,r,d,g,f,m,h,x,y,b,k;return w(),C("div",{class:"LogItem",key:e.chatId},[F("div",Oe,[-1!=(null==(a=e.requestOptions)?void 0:a.prompt.indexOf("http"))?(w(),C("div",De,[-1!=(null==(t=e.requestOptions)?void 0:t.prompt.indexOf("png"))||-1!=(null==(i=e.requestOptions)?void 0:i.prompt.indexOf("jpg"))||-1!=(null==(s=e.requestOptions)?void 0:s.prompt.indexOf("jpeg"))?(w(),C("div",Se,[F("img",{style:{width:"150px",height:"auto"},src:null==(n=e.requestOptions)?void 0:n.prompt.split(" ")[0],alt:""},null,8,Be)])):(w(),C("div",_e,[l[0]||(l[0]=F("div",{style:{"background-color":"#10a37f",padding:"4px","border-radius":"4px",display:"flex"}},[F("img",{style:{width:"30px",height:"30px"},src:te,alt:""})],-1)),F("div",je,[F("p",Te,q(null==(r=null==(o=e.requestOptions)?void 0:o.prompt)?void 0:r.split("/ai/")[1].split(" ")[0]),1),F("p",Me,q(null==(h=null==(m=null==(f=null==(g=null==(d=e.requestOptions)?void 0:d.prompt)?void 0:g.split("/ai/")[1])?void 0:f.split(" ")[0])?void 0:m.split(".")[1])?void 0:h.split(" ")[0]),1)])])),(null==(x=e.requestOptions)?void 0:x.prompt.split(" ")[1])?(w(),C("div",{key:2,class:"chatRight1 dark:bg-[#222325] bg-[#F0F0F0] markdown-body-generate",innerHTML:null==(y=e.requestOptions)?void 0:y.prompt.split(" ")[1]},null,8,Ue)):N("",!0)])):N("",!0),-1==(null==(b=e.requestOptions)?void 0:b.prompt.indexOf("http"))?(w(),C("div",{key:1,class:"chatRight dark:bg-[#222325] bg-[#F0F0F0]",innerHTML:null==(k=e.requestOptions)?void 0:k.prompt},null,8,Ne)):N("",!0)]),F("div",Ee,[F("div",qe,[F("div",Ae,[F("img",{src:v.value,alt:""},null,8,He)]),null==e.text||""==e.text?(w(),C("div",Re," 接口错误，请联系管理员处理~ ")):(w(),C("div",{key:1,class:"chatLeft markdown-body-generate markdown-body-text dark:bg-[#222325] bg-[#fff]",innerHTML:e.text,style:{"line-height":"15px","margin-top":"13px"}},null,8,ze))]),F("div",Pe,[F("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:A(c.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){if(e.text){const{text:l}=e;G({text:l}),u.success("复制成功")}else u.error("复制失败")}(e)},[U(z(P),{trigger:"hover",placement:"bottom",style:R([{"border-radius":"8px"},c.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:H((()=>[c.value?(w(),C("img",Je)):(w(),C("img",Ke))])),default:H((()=>[l[1]||(l[1]=F("span",null,"复制",-1))])),_:1},8,["style"])],10,Ge),F("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:A(c.value?"handleIcon":"handleIcon1"),onClick:l=>function(e){let{prompt:l}=e.requestOptions;de(l)}(e)},[U(z(P),{trigger:"hover",placement:"bottom",style:R([{"border-radius":"8px"},c.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:H((()=>[c.value?(w(),C("img",Xe)):(w(),C("img",$e))])),default:H((()=>[l[2]||(l[2]=F("span",null,"刷新",-1))])),_:1},8,["style"])],10,Ve),F("div",{style:{display:"flex","align-items":"center",cursor:"pointer",padding:"4px"},class:A(c.value?"handleIcon":"handleIcon1"),onClick:l=>async function(e){var l;let a={id:e.chatId};await J(a).then((l=>{var a;X.value=null==(a=X.value)?void 0:a.filter((l=>l.chatId!=e.chatId)),u.success("删除成功")})).catch((e=>{u.error("删除失败")})),0==(null==(l=X.value)?void 0:l.length)&&D("haveNotData")}(e)},[U(z(P),{trigger:"hover",placement:"bottom",style:R([{"border-radius":"8px"},c.value?"background:#fff;color:#000":"background:#000;color:#fff;"])},{trigger:H((()=>[c.value?(w(),C("img",We)):(w(),C("img",Ze))])),default:H((()=>[l[3]||(l[3]=F("span",null,"删除",-1))])),_:1},8,["style"])],10,Qe),F("div",Ye,[F("div",el,[c.value?(w(),C("img",ll)):(w(),C("img",al))]),F("p",tl,q(p.value),1)])])])])})),128)),F("div",il,[W.value?(w(),C("div",{key:0,onClick:ve,class:"stopBox"},[U(a,{icon:"ri:stop-circle-line"}),l[4]||(l[4]=F("p",{style:{"margin-left":"8px"}},"停止输出",-1))])):N("",!0)])],512)])}}}),[["__scopeId","data-v-94e46567"]]),nl={class:"mainBox"},ol={class:"bg-[#F8F9F9] dark:bg-[#19191B]",style:{padding:"0 12px","border-radius":"24px"}},ul={key:0,class:"fileBox",style:{position:"relative"}},rl={class:"file bg-[#FFFFFF] dark:bg-[#111113]"},dl={key:0,style:{width:"24px",height:"24px","border-radius":"6px",display:"flex","justify-content":"center","align-items":"center"}},cl=["src"],pl={key:0,style:{position:"absolute"}},vl={key:1,style:{"background-color":"#10a37f",width:"24px",height:"24px","border-radius":"6px",display:"flex","justify-content":"center","align-items":"center"}},gl={key:0,style:{position:"relative"},src:te,alt:""},fl={key:1,style:{position:"absolute"}},ml={style:{flex:"1","margin-left":"8px"}},hl={style:{"font-size":"12px","line-height":"15px"}},xl={style:{"font-size":"10px","line-height":"4px","margin-top":"4px"}},yl={class:"inpBox"},bl=S(m({__name:"documentSend",props:{changeChatLog:Boolean,modelInfo:Object,fileUrl:String},emits:["handleSend","handleInp"],setup(e,{emit:l}){x((()=>a.isLogin)),V(),X();const a=h(),t=k(),i=y(),s=x((()=>"dark"===i.theme)),n=l,o=I(),u=I(),{selectFile:r,upload:d}=ae(),c=b(),p=I("/api/file/upload2Local");function v(){(o.value||u.value)&&(o.value?u.value?o.value&&u.value&&n("handleSend",u.value+" "+o.value):n("handleSend",o.value):(console.log(u.value,"fileMessage.value"),n("handleSend",u.value+" 请分析一下上传的这个文件")),E.value=!1,O.value="",B.value="",o.value="",u.value="")}function g(e){o.value&&("Enter"===e.key&&e.shiftKey?(e.preventDefault(),o.value=o.value+"\n"):"Enter"!==e.key||e.ctrlKey||e.shiftKey?"Enter"===e.key&&(e.preventDefault(),v()):(e.preventDefault(),v()))}const f=e;function m(){u.value?n("handleInp",u.value+" "+o.value):n("handleInp",o.value)}j.on("sendSuccess",(()=>{o.value="",u.value=""}));const L=I(!1);T(f,(e=>{if(E.value=!1,e.modelInfo&&(L.value=e.modelInfo.canUpload),e.fileUrl){let l=e.fileUrl;B.value=l,u.value=l,E.value=!0,S.value=l.split(".").pop(),O.value=l.split("/ai/")[1],_.value=!1}})),j.on("setFileModel",(e=>{L.value=e.canUpload}));const O=I(""),S=I(""),B=I(""),_=I(!1);async function M(e=1){let l;if(U.value=!1,1===e){if(l=await r(),!l)return void t.error("选择文件错误")}else l=e;_.value=!0,E.value=!0;const a=new FormData;a.append("file",l),await D.post(p.value,a,{headers:{"Content-Type":"multipart/form-data"}}).then((l=>{if(l.data){let{data:e}=l.data;S.value=e.split(".").pop(),O.value=e.split("/ai/")[1],B.value=l.data.data,u.value=e,n("handleInp",B.value),_.value=!1}1!==e&&c.updateRecordDialog(!1)}))}const U=I(!1),E=I(!1);function H(){E.value=!1,u.value=""}return(e,l)=>(w(),C("div",nl,[F("div",ol,[E.value?(w(),C("div",ul,[F("div",rl,["png"==S.value||"jpeg"==S.value||"jpg"==S.value?(w(),C("div",dl,[F("img",{src:B.value,alt:""},null,8,cl),_.value?(w(),C("div",pl,l[4]||(l[4]=[F("div",{class:"loader"},null,-1)]))):N("",!0)])):(w(),C("div",vl,[_.value?N("",!0):(w(),C("img",gl)),_.value?(w(),C("div",fl,l[5]||(l[5]=[F("div",{class:"loader"},null,-1)]))):N("",!0)])),F("div",ml,[F("p",hl,q(O.value),1),F("p",xl,q("png"==S.value||"jpeg"==S.value||"jpg"==S.value?"图片":"文档"),1)])]),F("div",{style:{position:"absolute",top:"10px",right:"5px",cursor:"pointer"},class:"closeFile",onClick:H}," × ")])):N("",!0),F("div",yl,[L.value?(w(),C("img",{key:0,onClick:l[0]||(l[0]=e=>function(e=1){M(e)}(1)),style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:fe,alt:""})):N("",!0),$(F("textarea",{onKeydown:g,class:"inp","onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),type:"text",name:"",id:"",placeholder:"在此输入您想了解的内容，输入shift+回车换行",onInput:m},null,544),[[Q,o.value]]),s.value?(w(),C("img",{key:1,class:A(o.value||u.value?"bg-[#fff]":"dark:bg-[#46484F]"),style:{"border-radius":"50%",cursor:"pointer",width:"24px",height:"24px"},src:"/static/svg/sendBox_2-563d9c6b.svg",alt:"",onClick:v},null,2)):(w(),C("img",{key:2,class:A(o.value||u.value?"bg-[#000]":"dark:bg-[#46484F] bg-[#CDCECE]"),style:{"border-radius":"50%",cursor:"pointer",width:"24px",height:"24px"},src:me,alt:"",onClick:v},null,2)),s.value&&U.value?(w(),C("div",{key:3,class:"upLoadModel1",onClick:l[2]||(l[2]=e=>M(1))},l[6]||(l[6]=[F("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#222325"}},[F("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:fe,alt:""}),F("p",null,"从电脑中上传")],-1)]))):N("",!0),!s.value&&U.value?(w(),C("div",{key:4,class:"upLoadModel",onClick:l[3]||(l[3]=e=>M(1))},l[7]||(l[7]=[F("div",{style:{display:"flex",padding:"8px","border-radius":"12px","background-color":"#f0f0f0"}},[F("img",{style:{"margin-right":"5px",width:"20px",height:"20px",cursor:"pointer"},src:fe,alt:""}),F("p",null,"从电脑中上传")],-1)]))):N("",!0)])])]))}}),[["__scopeId","data-v-5cdb51c7"]]),kl={style:{display:"flex"},class:"bg-[#F8F9F9] dark:bg-[#1b1c22]"},Il={class:"dark:bg-[#19191B] bg-[#F8F9F9]",style:{width:"466px",height:"394px","border-radius":"24px"}},wl={style:{display:"flex","justify-content":"space-between",padding:"16px"}},Cl={style:{flex:"1",display:"flex","justify-content":"center",height:"calc(100% - 56px)","align-items":"center","padding-bottom":"24px"}},Fl={style:{padding:"24px 24px 12px 24px","border-radius":"12px","background-color":"#fff",border:"1px solid #e8e8e8","text-align":"center"}},Ll=["src"],Ol={style:{width:"100%",overflow:"hidden",height:"100vh",position:"relative"}},Dl={style:{display:"flex","justify-content":"center","margin-top":"24px",position:"absolute",bottom:"80px",width:"100%"}},Sl={style:{color:"#eeeeee"},class:"end"},Bl={style:{display:"flex"},class:"text-[#8B8C8C] dark:text-[#6C6E79]"},_l={key:0,style:{display:"flex","margin-left":"8px"}},jl=["href"],Tl={key:1,style:{display:"flex","margin-left":"8px"}},Ml=["href"],Ul={class:"fixedBox"},Nl=["onClick"],El=["src"],ql={style:{"margin-left":"8px","margin-top":"3px"}},Al=S(m({__name:"index",setup(t){const m=h(),k=x((()=>m.isLogin)),D=I(""),S=X(),B=b(),_=I(!0),T=I(""),M=I(""),E=I(""),P=I(""),G=I(""),J=I(""),K=I(!0),V=y(),$=x((()=>"dark"===V.theme));he({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{T.value=e.data.copyrightTitle,M.value=e.data.icpNumber,E.value=e.data.policeFilingNumber,P.value=e.data.icpUrl,G.value=e.data.policeFilingUrl})),W((()=>{D.value=S.path}));const Q=I([]);function ae(e){0==e.length?(_.value=!0,K.value=!0):K.value=!1,Q.value=e}function te(){Q.value=[]}const ie=I(),se=I();function ne(e){re.value="",ce.value="",se.value=e,ie.value=JSON.parse(e.config).modelInfo}const oe=I(0);function ue(){oe.value++}const re=I();function de(e){console.log(e),e&&(re.value=e)}const ce=I();function pe(e){0==Q.value.length&&(K.value=!1),ce.value=e,J.value="fileType"}function ve(e){e&&(_.value=!1)}const ge=I(!1),fe=I(""),me=async()=>{fe.value=await(async()=>await le({keys:["wechatImage"]}).then((e=>e.data)))(),ge.value=!0},xe=[{title:"帮助与常见问题解答",id:0,iconDark:n,iconLight:o},{title:"条款与政策",id:1,iconDark:u,iconLight:r},{title:"反馈与建议",id:2,iconDark:d,iconLight:c},{title:"关于我们",id:3,iconDark:p,iconLight:v}],ye=I(!1);function be(){ye.value=!ye.value}return(t,n)=>(w(),C("div",kl,[U(a),U(z(ee),{show:ge.value,"onUpdate:show":n[2]||(n[2]=e=>ge.value=e)},{default:H((()=>[F("div",Il,[F("div",wl,[n[3]||(n[3]=F("p",{style:{"font-size":"17px","font-weight":"bold"}},"客服",-1)),$.value?(w(),C("img",{key:0,src:i,style:{cursor:"pointer"},alt:"",onClick:n[0]||(n[0]=e=>ge.value=!1)})):(w(),C("img",{key:1,src:s,style:{cursor:"pointer"},alt:"",onClick:n[1]||(n[1]=e=>ge.value=!1)}))]),F("div",Cl,[F("div",Fl,[F("img",{src:fe.value,alt:"",style:{width:"200px",height:"200px"}},null,8,Ll),n[4]||(n[4]=F("p",{style:{color:"#8b8c8c","margin-top":"12px"}}," 请使用微信扫描上方二维码 ",-1))])])])])),_:1},8,["show"]),F("div",Ol,[U(g,{onChangeModelSuccess:ue,modelInfo:ie.value,currentRoute:D.value},null,8,["modelInfo","currentRoute"]),K.value||!k.value?(w(),Z(Fe,{key:0,onUploadIsSuccess:de})):N("",!0),U(sl,{onChatDataLength:ve,onHaveNotData:te,dataList:Q.value,modelInfo:ie.value,handleSendMessage:ce.value},null,8,["dataList","modelInfo","handleSendMessage"]),U(bl,{onHandleSend:pe,fileUrl:re.value,modelInfo:ie.value,style:R(0!=Q.value.length||re.value?"":"position: absolute;left:-999px;bottom:-999px")},null,8,["fileUrl","modelInfo","style"]),F("div",Dl,[F("div",Sl,[F("div",Bl,[Y(" 版权所有 © "+q(T.value)+" ",1),M.value?(w(),C("div",_l,[F("a",{href:P.value||"#"},q(M.value),9,jl)])):N("",!0),E.value?(w(),C("div",Tl,[F("a",{href:G.value||"#"},q(E.value),9,Ml)])):N("",!0)])])]),F("div",Ul,[F("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:me},n[5]||(n[5]=[F("img",{src:e,alt:""},null,-1)])),F("div",{class:"fixedIcon border border-[#E8E8E8] dark:border-[#2C2D31]",onClick:be,style:{"margin-top":"12px"}},n[6]||(n[6]=[F("img",{src:l,alt:""},null,-1)])),ye.value?(w(),C("div",{key:0,class:A($.value?"helpBoxD":"helpBoxL")},[(w(),C(L,null,O(xe,(e=>F("div",{class:A($.value?"hlepItemD":"hlepItemL"),key:e.id,style:{display:"flex","align-items":"center"},onClick:l=>function(e){0==e.id?ye.value=!1:1==e.id?(window.open("/policy","_blank"),ye.value=!1):2==e.id?(B.updateFeedbackDialog(!0),ye.value=!1):3==e.id&&(j.emit("aboutIsShow",!0),ye.value=!1)}(e)},[F("img",{src:$.value?e.iconDark:e.iconLight,alt:""},null,8,El),F("div",ql,q(e.title),1)],10,Nl))),64))],2)):N("",!0)])]),U(f,{changeModelisSuccess:oe.value,onHandleModelInfo:ne,onDocumentChatLog:ae,currentRoute:D.value},null,8,["changeModelisSuccess","currentRoute"])]))}}),[["__scopeId","data-v-6392891c"]]);export{Al as default};
