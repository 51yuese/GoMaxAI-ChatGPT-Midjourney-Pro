
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.ca191689.js";import{d as l,U as a,r as t,C as r,V as i,e as o,ah as s,o as d,f as n,m as u,g as p,h as c,q as g,i as m,Y as f,j as y,t as x,ae as b,a4 as v,a1 as h,a2 as F}from"../main-6fd6ef79.js";import{u as w}from"../utcformatTime/utcformatTime.f6db2c52.js";import{T as _,l as k}from"./linkFox.fac8cb03.js";const U={class:"search_condition"},z={style:{display:"flex","align-items":"center"}},C={style:{"margin-top":"22px","margin-left":"12px"}},V={style:{"margin-top":"22px"}},j={style:{"margin-top":"12px"}},E={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},A={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)"}},S={style:{width:"100%"}},Y={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},q=l({__name:"gallery",setup(l){const h=a(),F=t(),q=t(0);t(!1);const B=t(!1),I=t(!1),M=r({id:0,style:"",styleEn:"",imageUrl:"",status:0,extendField:{}}),N=r({style:"",page:1,size:15}),R=t([]);async function T(){try{B.value=!0;const e=await k.getGallery(N),{rows:l,count:a}=e.data;q.value=a,B.value=!1,R.value=l}catch(e){B.value=!1}}function D(e){N.style="",T()}const G=r({style:[{required:!0,message:"类型不能为空",trigger:"blur"}],imageUrl:[{required:!0,message:"请上传图片",trigger:"blur"}]});function P(e){I.value=!0,M.id=e.id,M.style=e.style,M.styleEn=e.styleEn,M.imageUrl=e.imageUrl,M.extendField={}}function L(){var e;if(0==h.isUserModifyPermissions())return b.error("非超级管理员无权限操作！");null==(e=F.value)||e.validate((e=>{e&&k.saveGallery(M).then((e=>{e.data&&b({type:"success",message:"操作成功！"}),I.value=!1,T()}))}))}function O(e){M.imageUrl=e.data}return i((()=>T())),(l,a)=>{const t=o("el-input"),r=o("el-button"),i=o("RefreshRight"),b=o("el-icon"),h=o("el-table-column"),k=o("el-image"),H=o("el-table"),J=o("el-pagination"),K=o("el-row"),Q=v,W=o("ElsSwitch"),X=o("el-form-item"),Z=o("ElsTreeSelect"),$=e,ee=o("el-form"),le=o("el-dialog"),ae=s("loading");return d(),n("div",null,[u("div",U,[u("div",z,[u("div",null,[a[10]||(a[10]=u("div",{class:"search_title"},"搜索关键字",-1)),u("div",null,[p(t,{modelValue:N.style,"onUpdate:modelValue":a[0]||(a[0]=e=>N.style=e),placeholder:"请输入分类",clearable:"",style:{width:"192px"}},null,8,["modelValue"])])]),u("div",C,[p(r,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:T},{default:c((()=>a[11]||(a[11]=[g("查询 ")]))),_:1})]),u("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:D},[p(b,{color:"#3B82F6",size:"20"},{default:c((()=>[p(i)])),_:1})])]),u("div",V,[p(r,{style:{"background-color":"transparent",border:"1px solid #3B82F6","border-radius":"8px",color:"#3B82F6"},onClick:a[1]||(a[1]=e=>P(new(m(_))))},{default:c((()=>a[12]||(a[12]=[g("添加内容 ")]))),_:1})])]),u("div",j,[f((d(),y(H,{border:"",height:"66vh",data:R.value,style:{width:"100%"},size:"large"},{default:c((()=>[p(h,{fixed:"",prop:"id",label:"ID",width:"80"}),p(h,{prop:"style",label:"类型",width:"200"}),p(h,{prop:"styleEn",label:"类型(英文)",width:"200"}),p(h,{prop:"imageUrl",align:"center",label:"图片"},{default:c((e=>[p(k,{style:{height:"80px","margin-right":"5px","border-radius":"8px"},"preview-teleported":"",fit:"contain","preview-src-list":[e.row.imageUrl],src:e.row.imageUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])])),_:1}),p(h,{prop:"status",label:"是否启用",width:"100"},{default:c((e=>[g(x(1===e.row.status?"启用":"未启用"),1)])),_:1}),p(h,{prop:"createdAt",label:"创建时间",width:"200",align:"center"},{default:c((e=>[g(x(m(w)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)])),_:1}),p(h,{fixed:"right",label:"操作",width:"250",align:"center"},{default:c((e=>[p(r,{link:"",type:"primary",size:"small",onClick:l=>P(e.row)},{default:c((()=>a[13]||(a[13]=[g(" 编辑 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[ae,B.value]]),p(K,{class:"flex justify-end mt-5"},{default:c((()=>[p(J,{class:"mr-5",total:q.value,onSizeChange:T,"page-sizes":[15,30,50,100],onCurrentChange:T,"page-size":N.size,"onUpdate:pageSize":a[2]||(a[2]=e=>N.size=e),"current-page":N.page,"onUpdate:currentPage":a[3]||(a[3]=e=>N.page=e),layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","page-size","current-page"])])),_:1})]),p(le,{modelValue:I.value,"onUpdate:modelValue":a[9]||(a[9]=e=>I.value=e),width:"650","show-close":!1,"destroy-on-close":""},{header:c((({close:e,titleId:l,titleClass:t})=>[u("div",E,[u("div",null,x(M.id?"编辑内容":"新增内容"),1),u("div",{onClick:a[4]||(a[4]=e=>I.value=!1),style:{cursor:"pointer"}},[p(b,null,{default:c((()=>[p(Q,{name:"close"})])),_:1})])])])),default:c((()=>[u("div",A,[p(ee,{model:M,"label-width":"100",ref_key:"formRef",ref:F},{default:c((()=>[p(X,{label:"是否启用"},{default:c((()=>[p(W,{modelValue:M.status,"onUpdate:modelValue":a[5]||(a[5]=e=>M.status=e)},null,8,["modelValue"])])),_:1}),p(X,{label:"分类",prop:"style",rules:G.style},{default:c((()=>[u("div",S,[p(Z,{url:"linkFox/categoryList_admin",size:"large",multiple:"",modelValue:M.style,"onUpdate:modelValue":a[6]||(a[6]=e=>M.style=e),ref:"treeRef","value-separator":"-",labelField:"categoryName",valueField:"categoryName",parentIdField:"",childFieldName:"children","default-expand-all":""},null,8,["modelValue"])])])),_:1},8,["rules"]),p(X,{label:"图片",prop:"imageUrl",required:""},{default:c((()=>[p($,{url:M.imageUrl,"onUpdate:url":a[7]||(a[7]=e=>M.imageUrl=e),action:"/api/linkfox/upload",notip:!0,onOnSuccess:O},null,8,["url"])])),_:1})])),_:1},8,["model"])]),u("div",Y,[p(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:a[8]||(a[8]=e=>I.value=!1)},{default:c((()=>a[14]||(a[14]=[g("取消 ")]))),_:1}),p(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:L},{default:c((()=>a[15]||(a[15]=[g(" 确定 ")]))),_:1})])])),_:1},8,["modelValue"])])}}});"function"==typeof F&&F(q);const B=h(q,[["__scopeId","data-v-18c878b1"]]);export{B as default};
