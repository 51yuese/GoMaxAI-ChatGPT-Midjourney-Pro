
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{m as e}from"../marked.esm/marked.esm.3c8fbedb.js";import{l as t}from"./linkFox.fac8cb03.js";import{d as l,U as a,r,C as s,V as i,e as o,ah as d,o as p,f as n,m as u,g as c,h as m,q as y,Y as g,i as w,j as f,t as h,F as v,J as x,k,a1 as b,a2 as z}from"../main-6fd6ef79.js";import{u as _}from"../utcformatTime/utcformatTime.f6db2c52.js";const U={class:"search_condition"},B={style:{display:"flex","align-items":"center"}},T={style:{"margin-left":"12px"}},F={style:{"margin-top":"22px","margin-left":"12px"}},I={style:{"margin-left":"12px","margin-top":"22px"}},A={style:{"margin-top":"12px"}},j=l({__name:"task",setup(l){a();const b=new e.Renderer;e.setOptions({renderer:b,gfm:!0,pedantic:!1,sanitize:!1});const z=r(!1);r();const j=r(0),V=s({taskType:"",status:"",page:1,size:15}),C=r([]);async function D(){z.value=!0;try{const e=await t.queryTaskAll(V);z.value=!1;const{rows:l,count:a}=e.data;j.value=a,C.value=l}catch(e){z.value=!1}}function Y(){V.taskType="",V.status="",D()}return i((()=>{D()})),(e,t)=>{const l=o("el-option"),a=o("el-select"),r=o("el-button"),s=o("el-table-column"),i=o("el-tag"),b=o("el-image"),q=o("el-table"),M=o("el-pagination"),S=o("el-row"),E=d("loading");return p(),n("div",null,[u("div",U,[u("div",B,[u("div",null,[t[4]||(t[4]=u("div",{class:"search_title"},"类型",-1)),u("div",null,[c(a,{modelValue:V.taskType,"onUpdate:modelValue":t[0]||(t[0]=e=>V.taskType=e),placeholder:"请选择类型",style:{width:"200px"}},{default:m((()=>[c(l,{label:"AI穿衣",value:1}),c(l,{label:"智能抠图",value:2}),c(l,{label:"互动抠图",value:3})])),_:1},8,["modelValue"])])]),u("div",T,[t[5]||(t[5]=u("div",{class:"search_title"},"状态",-1)),u("div",null,[c(a,{modelValue:V.status,"onUpdate:modelValue":t[1]||(t[1]=e=>V.status=e),placeholder:"请选择类型",style:{width:"200px"}},{default:m((()=>[c(l,{label:"等待中",value:1}),c(l,{label:"绘制中",value:2}),c(l,{label:"绘制完成",value:3}),c(l,{label:"绘制失败",value:4}),c(l,{label:"已取消",value:5})])),_:1},8,["modelValue"])])]),u("div",F,[c(r,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:D},{default:m((()=>t[6]||(t[6]=[y("查询 ")]))),_:1})]),u("div",I,[c(r,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","border-radius":"8px",border:"1px solid #3B82F6","background-color":"transparent"},onClick:Y},{default:m((()=>t[7]||(t[7]=[y("重置 ")]))),_:1})])])]),u("div",A,[g((p(),f(q,{height:"66vh",border:"",data:w(C),style:{width:"100%"},size:"large","tooltip-options":{}},{default:m((()=>[c(s,{fixed:"",prop:"id",label:"ID",width:"120"}),c(s,{fixed:"",prop:"userId",label:"用户ID",width:"120"}),c(s,{fixed:"",prop:"taskId",label:"任务ID",width:"120"}),c(s,{fixed:"",prop:"taskType",label:"类型",width:"120"},{default:m((e=>[y(h(["","AI穿衣","智能抠图","互动抠图"][e.row.taskType]),1)])),_:1}),c(s,{prop:"status",label:"状态",width:"200"},{default:m((e=>[c(i,{type:3===e.row.status?"success":"primary"},{default:m((()=>[y(h(["","已创建","绘制中","绘制完成","绘制失败","已取消"][e.row.status]),1)])),_:2},1032,["type"])])),_:1}),c(s,{prop:"fileInfo.thumbImg",align:"center",label:"绘图结果"},{default:m((e=>{var t;return[1===e.row.status?(p(),n(v,{key:0},[y(" 等待中 ")],64)):(p(),n(v,{key:1},[1===e.row.taskType||2===e.row.taskType?(p(!0),n(v,{key:0},x(null==(t=e.row)?void 0:t.resultBody,(e=>(p(),f(b,{style:{height:"80px","margin-right":"5px","border-radius":"8px"},"preview-teleported":"",fit:"contain","preview-src-list":[e.thumb],src:e.thumb,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])))),256)):(p(),n(v,{key:1},[e.row.resultBody.maskUrl?(p(),f(b,{key:0,style:{height:"80px","margin-right":"5px","border-radius":"8px"},"preview-teleported":"",fit:"contain","preview-src-list":[e.row.resultBody.maskUrl],src:e.row.resultBody.maskUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])):k("",!0),e.row.resultBody.scoreUrl?(p(),f(b,{key:1,style:{height:"80px","margin-right":"5px","border-radius":"8px"},"preview-teleported":"",fit:"contain","preview-src-list":[e.row.resultBody.scoreUrl],src:e.row.resultBody.scoreUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])):k("",!0),e.row.resultBody.imageUrl?(p(),f(b,{key:2,style:{height:"80px","margin-right":"5px","border-radius":"8px"},"preview-teleported":"",fit:"contain","preview-src-list":[e.row.resultBody.imageUrl],src:e.row.resultBody.imageUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])):k("",!0),e.row.resultBody.featureUrl?(p(),f(b,{key:3,style:{height:"80px","margin-right":"5px","border-radius":"8px"},"preview-teleported":"",fit:"contain","preview-src-list":[e.row.resultBody.featureUrl],src:e.row.resultBody.featureUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])):k("",!0)],64))],64))]})),_:1}),c(s,{prop:"createdAt",label:"创建时间",align:"center",width:"200"},{default:m((e=>[y(h(w(_)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)])),_:1})])),_:1},8,["data"])),[[E,w(z)]]),c(S,{class:"flex justify-end mt-5"},{default:m((()=>[c(M,{"current-page":V.page,"onUpdate:currentPage":t[2]||(t[2]=e=>V.page=e),"page-size":V.size,"onUpdate:pageSize":t[3]||(t[3]=e=>V.size=e),class:"mr-5","page-sizes":[15,30,45,60],layout:"total, sizes, prev, pager, next, jumper",total:w(j),onSizeChange:D,onCurrentChange:D},null,8,["current-page","page-size","total"])])),_:1})])])}}});"function"==typeof z&&z(j);const V=b(j,[["__scopeId","data-v-33d2dc6f"]]);export{V as default};
