
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{ap as e,d as a,u as t,r as l,F as i,o,l as r,V as d,b as s,e as n,f as c,h as u,i as p,j as m,g,w as f,J as y,t as b,P as x,x as v,_ as h,q as _}from"../main-46c178e9.js";import{u as w}from"../utcformatTime/utcformatTime.f6db2c52.js";import{T as F}from"../aiMusic/aiMusic.57ade686.js";const V=a=>e.get("dict/page",{params:a}),k=a=>e.post("dict/save",a),z=a=>e.post("dict/delete",a),C={class:"search_condition"},N={style:{display:"flex","align-items":"center"}},j={style:{"margin-top":"22px","margin-left":"12px"}},P={style:{"margin-top":"22px"}},U={style:{"margin-top":"12px"}},A={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},M={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)"}},T=["src"],B={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},q=a({__name:"videoStyle",setup(e){const a=t();l();const h=l(0);l(!1);const _=l(!1),q=l(!1),E=l("/api/file/upload"),I=i({id:0,ids:[],dictType:"video-style",dictName:"",dictValue:""}),Y=i({dictType:"video-style",dictName:"",page:1,size:15}),D=l([]);async function G(){try{_.value=!0;const e=await V(Y),{rows:a,count:t}=e.data;h.value=t,_.value=!1,D.value=a}catch(e){_.value=!1}}function S(e){Y.dictName="",G()}const J=i({dictType:[{required:!0,message:"类型不能为空",trigger:"blur"}],dictName:[{required:!0,message:"名称不能为空",trigger:"blur"}],dictValue:[{required:!0,message:"内容不能为空",trigger:"blur"}]});function R(e){q.value=!0,I.id=e.id,I.ids=[],I.dictName=e.dictName,I.dictValue=e.dictValue}async function K(){if(0==a.isUserModifyPermissions())return x.error("非超级管理员无权限操作！");(await k(I)).data&&x({type:"success",message:"操作成功！"}),q.value=!1,G()}const W=(e,a)=>{I.dictValue=e.data},H=e=>["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)?e.size/1024>300?(x.error("当前限制文件最大不超过 300KB!"),!1):void 0:(x.error("当前系统仅支持 PNG、JPEG、GIF、和 WebP 格式的图片!"),!1);return o((()=>G())),(e,t)=>{const l=r("el-input"),i=r("el-button"),o=r("RefreshRight"),V=r("el-icon"),k=r("el-table-column"),L=r("el-popconfirm"),O=r("el-table"),Q=r("el-pagination"),X=r("el-row"),Z=v,$=r("el-form-item"),ee=r("Plus"),ae=r("el-upload"),te=r("el-form"),le=r("el-dialog"),ie=d("loading");return s(),n("div",null,[c("div",C,[c("div",N,[c("div",null,[t[8]||(t[8]=c("div",{class:"search_title"},"搜索关键字",-1)),c("div",null,[u(l,{modelValue:Y.dictName,"onUpdate:modelValue":t[0]||(t[0]=e=>Y.dictName=e),placeholder:"请输入字典关键字",clearable:"",style:{width:"192px"}},null,8,["modelValue"])])]),c("div",j,[u(i,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:G},{default:p((()=>t[9]||(t[9]=[m("查询 ")]))),_:1})]),c("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:S},[u(V,{color:"#3B82F6",size:"20"},{default:p((()=>[u(o)])),_:1})])]),c("div",P,[u(i,{style:{"background-color":"transparent",border:"1px solid #3B82F6","border-radius":"8px",color:"#3B82F6"},onClick:t[1]||(t[1]=e=>R(new(g(F))))},{default:p((()=>t[10]||(t[10]=[m("添加风格 ")]))),_:1})])]),c("div",U,[f((s(),y(O,{border:"",height:"66vh",data:D.value,style:{width:"100%"},size:"large"},{default:p((()=>[u(k,{fixed:"",prop:"id",label:"ID",width:"80"}),u(k,{prop:"dictName",label:"名称",width:"150"}),u(k,{prop:"dictValue",label:"内容",align:"center"}),u(k,{prop:"createdAt",label:"创建时间",width:"200",align:"center"},{default:p((e=>[m(b(g(w)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)])),_:1}),u(k,{fixed:"right",label:"操作",width:"250",align:"center"},{default:p((e=>[u(i,{link:"",type:"primary",size:"small",onClick:a=>R(e.row)},{default:p((()=>t[11]||(t[11]=[m(" 编辑 ")]))),_:2},1032,["onClick"]),u(L,{title:"确认删除?","confirm-button-text":"确认删除",onConfirm:t=>async function(e){if(0==a.isUserModifyPermissions())return x.error("非超级管理员无权限操作！");I.ids.push(e.id),(await z(I)).data&&x({type:"success",message:"操作成功！"}),G()}(e.row)},{reference:p((()=>[u(i,{link:"",type:"danger"},{default:p((()=>t[12]||(t[12]=[m(" 删除 ")]))),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[ie,_.value]]),u(X,{class:"flex justify-end mt-5"},{default:p((()=>[u(Q,{class:"mr-5",total:h.value,onSizeChange:G,"page-sizes":[15,30,50,100],onCurrentChange:G,"page-size":Y.size,"onUpdate:pageSize":t[2]||(t[2]=e=>Y.size=e),"current-page":Y.page,"onUpdate:currentPage":t[3]||(t[3]=e=>Y.page=e),layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","page-size","current-page"])])),_:1})]),u(le,{modelValue:q.value,"onUpdate:modelValue":t[7]||(t[7]=e=>q.value=e),width:"650","show-close":!1,"destroy-on-close":""},{header:p((({close:e,titleId:a,titleClass:l})=>[c("div",A,[c("div",null,b(I.id?"编辑内容":"新增内容"),1),c("div",{onClick:t[4]||(t[4]=e=>q.value=!1),style:{cursor:"pointer"}},[u(V,null,{default:p((()=>[u(Z,{name:"close"})])),_:1})])])])),default:p((()=>[c("div",M,[u(te,{model:I},{default:p((()=>[u($,{label:"风格名",rules:J.dictName},{default:p((()=>[u(l,{size:"large",modelValue:I.dictName,"onUpdate:modelValue":t[5]||(t[5]=e=>I.dictName=e),placeholder:"请输入风格名"},null,8,["modelValue"])])),_:1},8,["rules"]),u($,{label:"风格图片",prop:"dictValue"},{default:p((()=>[u(ae,{class:"style-uploader",action:E.value,"show-file-list":!1,"on-success":W,"before-upload":H},{default:p((()=>[I.dictValue?(s(),n("img",{key:0,src:I.dictValue,style:{width:"100px"},class:"style_path"},null,8,T)):(s(),y(V,{key:1,class:"style-uploader-icon"},{default:p((()=>[u(ee)])),_:1}))])),_:1},8,["action"])])),_:1})])),_:1},8,["model"])]),c("div",B,[u(i,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:t[6]||(t[6]=e=>q.value=!1)},{default:p((()=>t[13]||(t[13]=[m("取消 ")]))),_:1}),u(i,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:K},{default:p((()=>t[14]||(t[14]=[m(" 确定 ")]))),_:1})])])),_:1},8,["modelValue"])])}}});"function"==typeof _&&_(q);const E=h(q,[["__scopeId","data-v-88eb9008"]]);export{E as default};
