
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import e from"../components/mjIncantationClassify.e699cf79.js";import a from"../components/mjDetail.26641695.js";import{A as l}from"../mj/mj.ecba9aa7.js";import{u as t}from"../utcformatTime/utcformatTime.f6db2c52.js";import{d as o,U as r,r as s,C as n,V as i,e as d,ah as p,o as u,f as c,g as m,m as f,h as y,q as g,Y as v,j as x,t as b,i as _,ae as w,a1 as h,a2 as j}from"../main-98fa617f.js";const k={class:"search_add_card"},z={style:{display:"flex","align-items":"center"}},C={style:{"margin-left":"10px"}},F={style:{"margin-top":"22px","margin-left":"12px"}},A=o({__name:"incantation-classify",setup(o){const h=r(),j=s(),A=s(),V=s(!1),U=s([]),B=s(0),I=n({level:0,page:1,size:20,type:"",keyword:"",dataType:1});s();const M=async()=>{try{V.value=!0;const e=await l.queryMjIncantClassify(I),{rows:a,count:t}=e.data;V.value=!1,B.value=t,U.value=a}catch(e){V.value=!1}},R=async()=>{A.value.open()},T=e=>{Object.assign(I,{level:2,page:1,size:20,type:"",keyword:"",dataType:1}),M()};return i((()=>{M()})),(o,r)=>{const s=d("el-input"),n=d("el-option"),i=d("el-select"),D=d("el-button"),q=d("RefreshRight"),E=d("el-icon"),O=d("el-table-column"),P=d("el-popconfirm"),S=d("el-table"),N=d("el-pagination"),Y=d("el-row"),G=p("loading");return u(),c("div",null,[m(e,{ref_key:"mjManagerRef",ref:A,onFresh:M},null,512),m(a,{ref_key:"mjDetailRef",ref:j},null,512),f("div",k,[f("div",z,[f("div",null,[r[4]||(r[4]=f("div",{class:"condition_name"},"关键字",-1)),m(s,{modelValue:I.keyword,"onUpdate:modelValue":r[0]||(r[0]=e=>I.keyword=e),style:{width:"192px"},placeholder:"分类关键字[模糊搜索]",clearable:""},null,8,["modelValue"])]),f("div",C,[r[5]||(r[5]=f("div",{class:"condition_name"},"所属类型",-1)),m(i,{modelValue:I.type,"onUpdate:modelValue":r[1]||(r[1]=e=>I.type=e)},{default:y((()=>[m(n,{value:"text",label:"普通"}),m(n,{value:"style",label:"风格"})])),_:1},8,["modelValue"])]),f("div",F,[m(D,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:M},{default:y((()=>r[6]||(r[6]=[g("查询 ")]))),_:1})]),f("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:T},[m(E,{color:"#3B82F6",size:"20"},{default:y((()=>[m(q)])),_:1})])]),f("div",null,[m(D,{style:{"border-radius":"8px",border:"1px solid #3B82F6",color:"#3B82F6","font-size":"15px",height:"32px","margin-top":"25px"},onClick:R},{default:y((()=>r[7]||(r[7]=[g(" 添加字典分类 ")]))),_:1})])]),f("div",null,[v((u(),x(S,{border:"",data:U.value,height:"64vh",width:"100%"},{default:y((()=>[m(O,{prop:"classifyName",label:"分类名称"}),m(O,{prop:"level",label:"级别"},{default:y((e=>[f("p",null,b(1===e.row.level?"一级":2===e.row.level?"二级":"未知"),1)])),_:1}),m(O,{prop:"type",label:"类型"},{default:y((e=>[f("p",null,b("text"===e.row.type?"普通":"style"===e.row.type?"风格":"未知"),1)])),_:1}),m(O,{prop:"createdAt",label:"创建时间"},{default:y((e=>[f("p",null,b(_(t)(e.row.createdAt)),1)])),_:1}),m(O,{prop:"updatedAt",label:"更新时间"},{default:y((e=>[f("p",null,b(_(t)(e.row.updatedAt)),1)])),_:1}),m(O,{fixed:"right",label:"操作",width:"280",align:"center"},{default:y((e=>[m(D,{link:"",type:"primary",size:"small",onClick:a=>(async e=>{A.value.open(e.id)})(e.row)},{default:y((()=>r[8]||(r[8]=[g(" 编辑 ")]))),_:2},1032,["onClick"]),m(P,{width:"300px",title:"删除后不可找回，确定删除?","confirm-button-text":"确认",onConfirm:a=>(async e=>{if(0==h.isUserModifyPermissions())return w.error("非超级管理员无权限操作！");await l.removeMjIncantClassify({id:e.id}),w.success("删除咒语分类成功！"),await M()})(e.row)},{reference:y((()=>[m(D,{link:"",type:"danger",disabled:1===e.row.inner,size:"small"},{default:y((()=>r[9]||(r[9]=[g(" 删除 ")]))),_:2},1032,["disabled"])])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[G,V.value]]),m(Y,{class:"flex justify-end mt-5 pb-5"},{default:y((()=>[m(N,{"current-page":I.page,"onUpdate:currentPage":r[2]||(r[2]=e=>I.page=e),"page-size":I.size,"onUpdate:pageSize":r[3]||(r[3]=e=>I.size=e),class:"mr-5","page-sizes":[15,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:M,onCurrentChange:M},null,8,["current-page","page-size","total"])])),_:1})])])}}});"function"==typeof j&&j(A);const V=h(A,[["__scopeId","data-v-fea0a199"]]);export{V as default};
