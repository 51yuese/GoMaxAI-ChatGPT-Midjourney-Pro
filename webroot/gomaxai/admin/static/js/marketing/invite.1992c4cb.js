
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as a,r as l,G as t,x as i,j as d,o as n,c as r,b as s,f as o,g as p,h as u,Q as c,P as v,U as g,p as m,k as f,_ as b}from"../main-043c96ab.js";const y=e=>(m("data-v-e308cd20"),e=e(),f(),e),w=y((()=>s("div",{style:{color:"#20295","font-size":"15px","font-weight":"bold","margin-bottom":"16px"}},"邀请奖励",-1))),x=y((()=>s("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 邀请注册赠送 ",-1))),V={style:{display:"flex","align-items":"center","justify-content":"space-between"}},h={style:{display:"flex","align-items":"center","justify-content":"space-between"}},R={style:{"margin-top":"16px"}},_=y((()=>s("div",{style:{color:"#20295","font-size":"15px","font-weight":"bold","margin-bottom":"16px","margin-top":"32px"}},"邀请记录",-1))),z={class:"search_add_card"},S={style:{display:"flex","align-items":"center"}},F=y((()=>s("div",{class:"condition_name"},"用户信息",-1))),I={style:{"margin-left":"10px"}},k=y((()=>s("div",{class:"condition_name"},"邀请人信息",-1))),U={style:{"margin-left":"10px"}},C=y((()=>s("div",{class:"condition_name"},"邀请人时间",-1))),j={style:{"margin-left":"10px"}},q=b(e({__name:"invite",setup(e){const m=a(),f=l(),b=l([]),y=l(0),q=t({keyword:"",inviterKeyword:"",startTime:"",page:1,size:10}),A=t({inviteSendStatus:0,inviteRewards:"",inviteRewardVip:"",InvitedRewards:"",invitedRewardVip:""}),D=l({inviteRewards:[{required:!0,trigger:"blur",message:"请输入邀请人所获得的积分数量"}],inviteRewardVip:[{required:!0,trigger:"blur",message:"请输入邀请人所获得的会员天数"}],InvitedRewards:[{required:!0,trigger:"blur",message:"请输入被邀请人所获得的积分数量"}],invitedRewardVip:[{required:!0,trigger:"blur",message:"请输入被邀请人所获得的会员天数"}]});async function E(){const e=await c.queryConfig({keys:["inviteSendStatus","inviteRewards","inviteRewardVip","InvitedRewards","invitedRewardVip"]});e.data.inviteSendStatus&&(e.data.inviteSendStatus=Number(e.data.inviteSendStatus)),Object.assign(A,e.data)}async function P(){var e;null==(e=f.value)||e.validate((async e=>{if(e){if(0==m.isUserModifyPermissions())return v.error("非超级管理员无权限操作！");try{await c.setConfig({settings:(a=A,Object.keys(a).map((e=>({configKey:e,configVal:a[e]}))))}),v.success("变更配置信息成功")}catch(l){}E()}else v.error("请填写完整信息");var a}))}async function B(){await g.getInviteLog(q)}function K(){}return i((()=>{B(),E()})),(e,a)=>{const l=d("el-switch"),t=d("el-form-item"),i=d("el-input"),c=d("el-form"),v=d("el-button"),g=d("el-date-picker"),m=d("RefreshRight"),E=d("el-icon"),O=d("el-table-column"),G=d("el-table"),L=d("el-pagination"),M=d("el-row");return n(),r("div",null,[w,s("div",null,[o(c,{ref_key:"formRef",ref:f,rules:D.value,model:A,"label-position":"top"},{default:p((()=>[o(t,{prop:"inviteSendStatus"},{default:p((()=>[x,o(l,{modelValue:A.inviteSendStatus,"onUpdate:modelValue":a[0]||(a[0]=e=>A.inviteSendStatus=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),s("div",V,[o(t,{label:"邀请者赠送积分",prop:"inviteRewards",style:{width:"48%"}},{default:p((()=>[o(i,{size:"large",modelValue:A.inviteRewards,"onUpdate:modelValue":a[1]||(a[1]=e=>A.inviteRewards=e),placeholder:"邀请人获得的积分数量",clearable:""},null,8,["modelValue"])])),_:1}),o(t,{label:"邀请者赠送会员天数",prop:"inviteRewardVip",style:{width:"48%"}},{default:p((()=>[o(i,{size:"large",modelValue:A.inviteRewardVip,"onUpdate:modelValue":a[2]||(a[2]=e=>A.inviteRewardVip=e),placeholder:"邀请人获得的vip天数",clearable:""},null,8,["modelValue"])])),_:1})]),s("div",h,[o(t,{label:"被邀请者赠送积分",prop:"InvitedRewards",style:{width:"48%"}},{default:p((()=>[o(i,{size:"large",modelValue:A.InvitedRewards,"onUpdate:modelValue":a[3]||(a[3]=e=>A.InvitedRewards=e),placeholder:"被邀请人获得的积分数量",clearable:""},null,8,["modelValue"])])),_:1}),o(t,{label:"被邀请者赠送会员天数",prop:"invitedRewardVip",style:{width:"48%"}},{default:p((()=>[o(i,{size:"large",modelValue:A.invitedRewardVip,"onUpdate:modelValue":a[4]||(a[4]=e=>A.invitedRewardVip=e),placeholder:"被邀请人获得的vip天数",clearable:""},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model"]),s("div",R,[o(v,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:P},{default:p((()=>[u("保存设置 ")])),_:1})])]),_,s("div",z,[s("div",S,[s("div",null,[F,o(i,{modelValue:q.userInfo,"onUpdate:modelValue":a[5]||(a[5]=e=>q.userInfo=e),placeholder:"用户名/呢称/手机号/邮箱",style:{width:"200px"}},null,8,["modelValue"])]),s("div",I,[k,o(i,{modelValue:q.inviterInfo,"onUpdate:modelValue":a[6]||(a[6]=e=>q.inviterInfo=e),placeholder:"用户名/呢称/手机号/邮箱",style:{width:"200px"}},null,8,["modelValue"])]),s("div",U,[C,o(g,{modelValue:q.inviterDate,"onUpdate:modelValue":a[7]||(a[7]=e=>q.inviterDate=e),type:"datetime",placeholder:"请输入邀请人时间","prefix-icon":"Calendar"},null,8,["modelValue"])]),s("div",j,[o(v,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",height:"32px",background:"#EFF6FF",color:"#60A5FA","border-radius":"8px","margin-top":"25px"},onClick:B},{default:p((()=>[u(" 查询 ")])),_:1})]),s("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:K},[o(E,{color:"#3B82F6",size:"20"},{default:p((()=>[o(m)])),_:1})])])]),s("div",null,[o(G,{border:"","highlight-current-row":"",data:b.value,style:{width:"100%"},"max-height":"70vh"},{default:p((()=>[o(O,{label:"排序ID"}),o(O,{label:"邀请人头像"}),o(O,{label:"邀请人用户名"}),o(O,{label:"邀请人手机号"}),o(O,{label:"邀请人昵称"}),o(O,{label:"邀请人邮箱"}),o(O,{label:"新用户名"}),o(O,{label:"新用户昵称"}),o(O,{label:"新用户手机号"}),o(O,{label:"新用户邮箱"}),o(O,{label:"注册时间"})])),_:1},8,["data"])]),o(M,{class:"flex justify-end mt-3"},{default:p((()=>[o(L,{"current-page":q.page,"onUpdate:currentPage":a[8]||(a[8]=e=>q.page=e),"page-size":q.size,"onUpdate:pageSize":a[9]||(a[9]=e=>q.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:B,onCurrentChange:B},null,8,["current-page","page-size","total"])])),_:1})])}}}),[["__scopeId","data-v-e308cd20"]]);export{q as default};
