
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{A as e}from"../mj/mj.1531a3c1.js";import{A as l}from"../chat/chat.a4998925.js";import{u as a}from"../utcformatTime/utcformatTime.f6db2c52.js";import{e as r,W as t,f as o}from"../index/index.21f4f4e7.js";import{d as n,u as i,x as s,r as u,G as d,j as c,V as p,o as f,c as m,b as g,f as w,g as v,W as h,X as y,e as b,h as _,w as I,J as k,t as x,P as z,p as j,k as C,_ as F,q as P}from"../main-043c96ab.js";const U=e=>(j("data-v-56237e5e"),e=e(),C(),e),V={class:"search_condition"},A={style:{display:"flex","align-items":"center"}},D=U((()=>g("div",{class:"search_title"},"推荐状态",-1))),M={style:{"margin-left":"12px"}},Y=U((()=>g("div",{class:"search_title"},"绘制状态",-1))),E={style:{"margin-top":"22px","margin-left":"12px"}},S={style:{"margin-top":"12px"}},$={key:0},q={key:1},J={key:0},L={key:1},R={key:0},T={key:1},W={key:0},B={key:1},G={key:0},N={class:"answer"},O=n({__name:"draw",setup(n){const j=i();s((()=>{O()}));const C=u(0),F=u(!1),P=d({rec:null,status:null,page:1,size:10}),U=u([]);async function O(){try{F.value=!0;const l=await e.queryAdminDrawList(P),{rows:a,count:r}=l.data;C.value=r,a.forEach((e=>{e.fileInfo=JSON.parse(e.fileInfo)})),U.value=a,F.value=!1}catch(l){F.value=!1}}function X(){P.rec=null,P.status=null,O()}return(e,n)=>{const i=c("el-option"),s=c("el-select"),u=c("el-button"),d=c("RefreshRight"),H=c("el-icon"),K=c("el-table-column"),Q=c("el-image"),Z=c("el-tag"),ee=c("el-popover"),le=c("el-popconfirm"),ae=c("el-table"),re=c("el-pagination"),te=c("el-row"),oe=p("loading");return f(),m("div",null,[g("div",V,[g("div",A,[g("div",null,[D,g("div",null,[w(s,{modelValue:P.rec,"onUpdate:modelValue":n[0]||(n[0]=e=>P.rec=e),placeholder:"请选择推荐状态",clearable:"",style:{width:"192px"}},{default:v((()=>[(f(!0),m(h,null,y(b(r),(e=>(f(),k(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),g("div",M,[Y,g("div",null,[w(s,{modelValue:P.status,"onUpdate:modelValue":n[1]||(n[1]=e=>P.status=e),placeholder:"请选择绘制状态",clearable:"",style:{width:"192px"}},{default:v((()=>[(f(!0),m(h,null,y(b(t),(e=>(f(),k(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),g("div",E,[w(u,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:O},{default:v((()=>[_("查询 ")])),_:1})]),g("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:X},[w(H,{color:"#3B82F6",size:"20"},{default:v((()=>[w(d)])),_:1})])])]),g("div",S,[I((f(),k(ae,{border:"",data:b(U),height:"70vh",style:{width:"100%"}},{default:v((()=>[w(K,{prop:"id",align:"center",label:"ID",width:"70"}),w(K,{prop:"fileInfo.thumbImg",align:"center",label:"绘图结果",width:"120"},{default:v((e=>{var l,a;return[w(Q,{style:{height:"80px","border-radius":"8px"},"preview-teleported":"",fit:"contain","preview-src-list":[null==(l=e.row)?void 0:l.imageUrl],src:null==(a=e.row)?void 0:a.imageUrl,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])]})),_:1}),w(K,{prop:"userInfo.username",align:"center",label:"用户名",width:"120"},{default:v((e=>[null==e.row.userInfo?(f(),m("div",$," -- ")):(f(),m("div",q,x(null==e.row.userInfo.username?"--":e.row.userInfo.username),1))])),_:1}),w(K,{prop:"userInfo.phone",align:"center",label:"手机号",width:"120"},{default:v((e=>[null==e.row.userInfo?(f(),m("div",J," -- ")):(f(),m("div",L,x(null==e.row.userInfo.phone?"--":e.row.userInfo.phone),1))])),_:1}),w(K,{prop:"userInfo.nickname",align:"center",label:"昵称",width:"120"},{default:v((e=>[null==e.row.userInfo?(f(),m("div",R," -- ")):(f(),m("div",T,x(null==e.row.userInfo.nickname?"--":e.row.userInfo.nickname),1))])),_:1}),w(K,{prop:"userInfo.email",label:"邮箱",align:"center"},{default:v((e=>[null==e.row.userInfo?(f(),m("div",W," -- ")):(f(),m("div",B,x(""==e.row.userInfo.email?"--":e.row.userInfo.email),1))])),_:1}),w(K,{prop:"fileInfo.thumbImg",align:"center",label:"推荐状态",width:"90"},{default:v((e=>[w(Z,{type:1==e.row.rec?"success":"warning"},{default:v((()=>[_(x(1==e.row.rec?"已推荐":"未推荐"),1)])),_:2},1032,["type"])])),_:1}),w(K,{prop:"status",align:"center",label:"图片状态",width:"105"},{default:v((e=>[w(Z,{type:100===e.row.status?"success":"primary"},{default:v((()=>[_(x(b(o)[e.row.status]),1)])),_:2},1032,["type"])])),_:1}),w(K,{prop:"originPrompt",align:"center",label:"图片描述"},{default:v((e=>[null==e.row.originPrompt||""==e.row.originPrompt?(f(),m("div",G,"--")):(f(),k(ee,{key:1,placement:"top",content:e.row.originPrompt,width:400,trigger:"click"},{reference:v((()=>[g("div",N,x(e.row.originPrompt),1)])),_:2},1032,["content"]))])),_:1}),w(K,{prop:"fileInfo.thumbImg",align:"center",label:"绘图尺寸",width:"180"},{default:v((e=>{var l,a,r,t,o;return[_(x((null==(l=e.row)?void 0:l.fileInfo)?`${null==(r=null==(a=e.row)?void 0:a.fileInfo)?void 0:r.width}*${null==(o=null==(t=e.row)?void 0:t.fileInfo)?void 0:o.height}`:"---"),1)]})),_:1}),w(K,{prop:"createdAt",label:"提问时间",align:"center",width:"200"},{default:v((e=>[_(x(b(a)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)])),_:1}),w(K,{fixed:"right",label:"操作",width:"110",align:"center"},{default:v((e=>[w(le,{title:`确认${1===e.row.rec?"取消推荐":"推荐"}图片吗！`,width:"260","icon-color":"red",onConfirm:a=>async function(e){if(0==j.isUserModifyPermissions())return z.error("非超级管理员无权限操作！");await l.recMjDrawImg({id:e}),z.success("图片推荐成功"),O()}(e.row.id)},{reference:v((()=>[w(u,{link:"",type:"primary",size:"small"},{default:v((()=>[_(" 推荐 ")])),_:1})])),_:2},1032,["title","onConfirm"]),w(le,{title:"`确认删除此条记录么！",width:"260","icon-color":"red",onConfirm:a=>async function(e){if(0==j.isUserModifyPermissions())return z.error("非超级管理员无权限操作！");await l.delChatLog({id:e}),z.success("删除成功"),O()}(e.row.id)},{reference:v((()=>[w(u,{link:"",type:"danger",size:"small"},{default:v((()=>[_(" 删除 ")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[oe,b(F)]]),w(te,{class:"flex justify-end mt-5"},{default:v((()=>[w(re,{"current-page":P.page,"onUpdate:currentPage":n[2]||(n[2]=e=>P.page=e),"page-size":P.size,"onUpdate:pageSize":n[3]||(n[3]=e=>P.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:b(C),onSizeChange:O,onCurrentChange:O},null,8,["current-page","page-size","total"])])),_:1})])])}}});"function"==typeof P&&P(O);const X=F(O,[["__scopeId","data-v-56237e5e"]]);export{X as default};
