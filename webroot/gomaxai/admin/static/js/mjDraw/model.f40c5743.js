
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.ca191689.js";import{d as l,aa as a,r as o,C as t,V as d,e as r,ah as i,o as s,f as n,m as u,g as p,i as c,h as m,F as g,J as f,j as v,q as y,Y as b,s as x,ae as h,a4 as _,a1 as w}from"../main-6fd6ef79.js";import{A as k}from"../mj/mj.12ac1474.js";const V={class:"dialogue_model_box"},F={class:"search_condition"},z={style:{display:"flex","align-items":"center"}},C={style:{"margin-left":"20px"}},U={style:{"margin-left":"20px"}},j={style:{"margin-left":"20px"}},A={style:{"margin-top":"22px","margin-left":"12px"}},N={style:{"margin-top":"12px"}},q={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},B={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)"}},E={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},M=w(l({__name:"model",setup(l){const w=a(!1),M=a(!1),O=o(),R=o({}),T=o([]),S=a(0),W=t({keyword:"",type:"",version:"",style:"",page:1,size:10,disabled:0}),I=o({name:"",cover:"",description:"",disabled:1}),L=t({name:[{required:!0,message:"请输入模型名称",trigger:"blur"}],cover:[{required:!0,message:"请上传模型封面",trigger:"blur"}],description:[{required:!0,message:"请输入模型描述",trigger:"blur"}]});function P(){W.keyword="",W.type="",W.version="",W.style="",W.disabled=0,D()}function D(){W.page=1,J()}async function H(){await k.saveWorkflowModel(I.value),h.success("修改成功"),w.value=!1}async function J(){M.value=!0;const{data:e}=await k.getWorkflowModels(W);T.value=e.rows,S.value=e.count,M.value=!1}function K(e){I.value.cover=e.data}return d((()=>{J(),async function(){const{data:e}=await k.getWorkflowDicts({});R.value=e}()})),(l,a)=>{const o=r("el-input"),t=r("el-option"),d=r("el-select"),h=r("el-button"),k=r("RefreshRight"),X=r("el-icon"),Y=r("el-image"),G=r("el-table-column"),Q=r("el-tag"),Z=r("el-table"),$=r("el-pagination"),ee=r("el-row"),le=_,ae=r("el-form-item"),oe=e,te=r("el-switch"),de=r("el-form"),re=r("el-dialog"),ie=i("loading");return s(),n("div",V,[u("div",F,[u("div",z,[u("div",null,[a[13]||(a[13]=u("div",{class:"search_title"}," 模型关键字 ",-1)),u("div",null,[p(o,{modelValue:c(W).keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>c(W).keyword=e),placeholder:"请输入模型模型关键字",style:{width:"150px"}},null,8,["modelValue"])])]),u("div",C,[a[14]||(a[14]=u("div",{class:"search_title"}," 模型类型 ",-1)),u("div",null,[p(d,{modelValue:c(W).type,"onUpdate:modelValue":a[1]||(a[1]=e=>c(W).type=e),placeholder:"请选择模型类型",style:{width:"150px"}},{default:m((()=>[p(t,{label:"大模型（CHECKPOINT）",value:"1"}),p(t,{label:"-lora模型（LORA）",value:"2"})])),_:1},8,["modelValue"])])]),u("div",U,[a[15]||(a[15]=u("div",{class:"search_title"}," 模型版本 ",-1)),u("div",null,[p(d,{modelValue:c(W).version,"onUpdate:modelValue":a[2]||(a[2]=e=>c(W).version=e),placeholder:"请选择模型版本",style:{width:"150px"}},{default:m((()=>[p(t,{label:"1.5",value:"1"}),p(t,{label:"XL",value:"2"})])),_:1},8,["modelValue"])])]),u("div",j,[a[16]||(a[16]=u("div",{class:"search_title"}," 风格画风 ",-1)),u("div",null,[p(d,{modelValue:c(W).style,"onUpdate:modelValue":a[3]||(a[3]=e=>c(W).style=e),placeholder:"请选择模型风格画风",style:{width:"150px"}},{default:m((()=>[(s(!0),n(g,null,f(c(R).style,(e=>(s(),v(t,{key:e.id,label:e.dictName,value:e.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),u("div",A,[p(h,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:D},{default:m((()=>a[17]||(a[17]=[y(" 查询 ")]))),_:1})]),u("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:P},[p(X,{color:"#3B82F6",size:"20"},{default:m((()=>[p(k)])),_:1})])])]),u("div",N,[b((s(),v(Z,{border:"",data:c(T),style:{"font-size":"13px",width:"100%"},"max-height":"75vh"},{default:m((()=>[p(G,{prop:"cover",label:"封面地址"},{default:m((({row:e})=>[p(Y,{src:e.cover,style:{width:"80px",height:"80px"}},null,8,["src"])])),_:1}),p(G,{prop:"name",label:"模型名称"}),p(G,{prop:"styleName",label:"风格画风"}),p(G,{prop:"effectCategoryName",label:"作用类别"}),p(G,{prop:"effectMainBodyName",label:"作用主体"}),p(G,{prop:"version",label:"模型版本"}),p(G,{prop:"description",label:"模型描述",width:"300"}),p(G,{prop:"disabled",label:"是否禁用",width:"100"},{default:m((({row:e})=>[0===e.disabled?(s(),v(Q,{key:0,type:"success"},{default:m((()=>a[18]||(a[18]=[y(" 启用 ")]))),_:1})):(s(),v(Q,{key:1,type:"danger"},{default:m((()=>a[19]||(a[19]=[y(" 禁用 ")]))),_:1}))])),_:1}),p(G,{label:"操作",fixed:"right",width:"160"},{default:m((e=>[p(h,{style:{border:"none",color:"#3B82F6","font-size":"13px","background-color":"transparent"},onClick:l=>{return a=e.row,I.value=a,void(w.value=!0);var a}},{default:m((()=>a[20]||(a[20]=[y(" 编辑 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[ie,c(M)]]),p(ee,{class:"flex justify-end mt-5"},{default:m((()=>[p($,{"current-page":c(W).page,"onUpdate:currentPage":a[4]||(a[4]=e=>c(W).page=e),"page-size":c(W).size,"onUpdate:pageSize":a[5]||(a[5]=e=>c(W).size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:c(S),onSizeChange:J,onCurrentChange:J},null,8,["current-page","page-size","total"])])),_:1})]),p(re,{modelValue:c(w),"onUpdate:modelValue":a[12]||(a[12]=e=>x(w)?w.value=e:null),width:"750","show-close":!1,"destroy-on-close":""},{header:m((()=>[u("div",q,[a[21]||(a[21]=u("div",null," 修改模型 ",-1)),u("div",{style:{cursor:"pointer"},onClick:a[6]||(a[6]=e=>w.value=!1)},[p(X,null,{default:m((()=>[p(le,{name:"close"})])),_:1})])])])),default:m((()=>[u("div",B,[p(de,{ref_key:"formRef",ref:O,rules:c(L),model:c(I),"label-width":"auto",style:{"max-width":"750px"}},{default:m((()=>[p(ae,{label:"模型名称",prop:"keyType"},{default:m((()=>[p(o,{modelValue:c(I).name,"onUpdate:modelValue":a[7]||(a[7]=e=>c(I).name=e),size:"large",placeholder:"请输入模型名称"},null,8,["modelValue"])])),_:1}),p(ae,{label:"模型封面",prop:"cover"},{default:m((()=>[p(oe,{url:c(I).cover,"onUpdate:url":a[8]||(a[8]=e=>c(I).cover=e),action:"/api/file/upload",notip:!0,onOnSuccess:K},null,8,["url"])])),_:1}),p(ae,{label:"模型描述",prop:"keyType"},{default:m((()=>[p(o,{modelValue:c(I).description,"onUpdate:modelValue":a[9]||(a[9]=e=>c(I).description=e),type:"textarea",size:"large",placeholder:"请输入模型描述"},null,8,["modelValue"])])),_:1}),p(ae,{label:"模型描述",prop:"keyType"},{default:m((()=>[p(te,{modelValue:c(I).disabled,"onUpdate:modelValue":a[10]||(a[10]=e=>c(I).disabled=e),"active-value":0,"inactive-value":1},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])]),u("div",E,[p(h,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:a[11]||(a[11]=e=>w.value=!1)},{default:m((()=>a[22]||(a[22]=[y(" 取消 ")]))),_:1}),p(h,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:H},{default:m((()=>a[23]||(a[23]=[y(" 确定修改 ")]))),_:1})])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d29b2e05"]]);export{M as default};
