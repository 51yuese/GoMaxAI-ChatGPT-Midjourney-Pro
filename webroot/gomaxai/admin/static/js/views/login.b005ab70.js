
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.a1f5770d.js";import{d as a,u as r,o as s,r as l,a as o,c as t,b as i,e as n,f as g,t as d,g as m,w as u,v as p,h as c,i as b,j as f,k as v,l as x,m as h,n as w,p as y,_,q}from"../main-fe71c3b2.js";const F={class:"login_box"},k={class:"login_left"},V={style:{"text-align":"left","margin-top":"20%","margin-left":"50%",transform:"translate(-27%)"}},z={class:"greeting"},P={style:{"margin-left":"50%",transform:"translate(-27%)"}},S={class:"flex-bar"},N={style:{"text-align":"left","margin-top":"40px"}},I={class:"copyright"},U={class:"login_right"},j={style:{color:"#FFF","font-size":"40px","margin-top":"20px"}},A=a({name:"Login"}),L=a({...A,setup(a){var _;const q=v(),A=h(),L=r();s((()=>{!async function(){const{data:e}=await t.queryConfig({keys:["siteName","clientLogoPath","clientFavoIconPath","siteDescribtion","siteKeyword","qqNumber","vxNumber"]});B.value=e}()})),new URL("/gomaxai/admin/static/png/login-banner-2c1ede93.png",self.location).href;const C=l("login"),E=l(!1);l((null==(_=q.query.redirect)?void 0:_.toString())??"/"),o();const K=l(),R=l({username:localStorage.login_username||"",password:"",remember:!!localStorage.login_username}),D=l({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]}),B=l({});function G(){K.value&&K.value.validate((e=>{e&&(E.value=!0,L.login(R.value).then((()=>{E.value=!1,R.value.remember?localStorage.setItem("login_username",R.value.username):localStorage.removeItem("login_username"),A.push("/")})).catch((()=>{E.value=!1})))}))}l();const H=l({username:"",captcha:"",password:"",checkPassword:""});return l({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(e,a,r)=>{a!==H.value.password?r(new Error("两次输入的密码不一致")):r()}}]}),l(),l({username:localStorage.login_username||"",captcha:"",newPassword:""}),l({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]}),(a,r)=>{const s=x("el-input"),l=x("el-form-item"),o=x("el-checkbox"),t=x("el-button"),v=x("el-form"),h=e;return i(),n("div",F,[g("div",k,[g("div",V,[g("div",z,"欢迎使用 "+d(m(B).siteName)+" ! 👋🏻",1),r[3]||(r[3]=g("div",{class:"tips"},"输入您的用户名和密码即可登录！",-1))]),g("div",P,[u(c(v,{ref_key:"loginFormRef",ref:K,model:m(R),rules:m(D),class:"login-form",autocomplete:"on","label-position":"top","hide-required-asterisk":""},{default:b((()=>[g("div",null,[c(l,{prop:"username",label:"用户名"},{default:b((()=>[c(s,{size:"large",modelValue:m(R).username,"onUpdate:modelValue":r[0]||(r[0]=e=>m(R).username=e),placeholder:"请输入用户名",text:"",tabindex:"1",autocomplete:"on"},null,8,["modelValue"])])),_:1}),c(l,{prop:"password",label:"密码"},{default:b((()=>[c(s,{size:"large",modelValue:m(R).password,"onUpdate:modelValue":r[1]||(r[1]=e=>m(R).password=e),type:"password",placeholder:"请输入密码",tabindex:"2",autocomplete:"on","show-password":"",onKeyup:w(G,["enter"])},null,8,["modelValue"])])),_:1})]),g("div",S,[c(o,{modelValue:m(R).remember,"onUpdate:modelValue":r[2]||(r[2]=e=>m(R).remember=e),style:{"font-size":"13px"}},{default:b((()=>r[4]||(r[4]=[f(" 记住我 ")]))),_:1},8,["modelValue"])]),g("div",N,[c(t,{bg:"",text:"",loading:m(E),type:"primary",size:"large",style:{width:"400px","font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"16px"},onClick:y(G,["prevent"])},{default:b((()=>r[5]||(r[5]=[f(" 登录 ")]))),_:1},8,["loading"])])])),_:1},8,["model","rules"]),[[p,"login"===m(C)]])]),g("div",I,[c(h)])]),g("div",U,[r[7]||(r[7]=g("div",{style:{"margin-top":"20%"}},[g("img",{src:"/gomaxai/admin/static/png/login_logo-082f52d9.png"})],-1)),g("div",j,[f(d(m(B).siteName)+" ",1),r[6]||(r[6]=g("span",{style:{border:"4px solid var(--type-gray-white, #FFF)",padding:"0 6px","border-radius":"16px"}},"Ai",-1))])])])}}});"function"==typeof q&&q(L);const C=_(L,[["__scopeId","data-v-f22e13a0"]]);export{C as default};
