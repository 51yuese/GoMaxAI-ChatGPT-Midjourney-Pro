
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as a,aa as l,C as r,V as o,e as d,ah as t,o as n,f as i,m as u,g as s,i as p,h as c,q as m,ai as g,Y as f,j as b,t as x,s as y,ae as v,a4 as h,a1 as _}from"../main-537e5929.js";import{a as k}from"./access.9d885d33.js";const V={class:"search_add_card"},w={style:{display:"flex","align-items":"center"}},F={style:{"margin-left":"10px"}},C={style:{"margin-top":"12px"}},z={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},U={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)","overflow-y":"scroll","overflow-x":"hidden"}},B={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},S=_(e({__name:"saas-manage",setup(e){const _=a(),S=l(!1),j=l(!1),A=l(0),q=l("添加代理商"),H=a([]),N=a({}),E=r({page:1,size:10,keyword:""});function I(){E.page=1,E.keyword="",D()}function P(){N.value={},j.value=!0,q.value="添加代理商"}async function D(){const{data:e}=await k.getSaasPage(E);H.value=e.rows}return o((()=>{D()})),(e,a)=>{const l=d("el-input"),r=d("el-button"),o=d("el-icon"),R=d("el-table-column"),Y=d("el-link"),G=d("el-popconfirm"),J=d("el-space"),K=d("el-table"),L=d("el-pagination"),M=d("el-row"),O=h,Q=d("el-form-item"),T=d("el-form"),W=d("el-dialog"),X=t("loading");return n(),i("div",null,[u("div",V,[u("div",w,[u("div",null,[a[13]||(a[13]=u("div",{class:"condition_name"}," 代理商搜索 ",-1)),s(l,{modelValue:p(E).keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>p(E).keyword=e),placeholder:"代理商名称或代理商域名",clearable:""},null,8,["modelValue"])]),u("div",F,[s(r,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",height:"32px",background:"#EFF6FF",color:"#60A5FA","border-radius":"8px","margin-top":"25px"},onClick:D},{default:c((()=>a[14]||(a[14]=[m(" 查询 ")]))),_:1})]),u("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:I},[s(o,{color:"#3B82F6",size:"20"},{default:c((()=>[s(p(g))])),_:1})])]),u("div",null,[s(r,{style:{"border-radius":"8px",border:"1px solid #3B82F6",color:"#3B82F6","font-size":"15px",height:"32px","margin-top":"25px"},onClick:P},{default:c((()=>a[15]||(a[15]=[m(" 添加代理商 ")]))),_:1})])]),u("div",C,[f((n(),b(K,{border:"",data:p(H),height:"66vh",width:"100%"},{default:c((()=>[s(R,{prop:"id",label:"SaasID"}),s(R,{prop:"name",label:"代理商名"}),s(R,{prop:"domain",label:"绑定域名"}),s(R,{prop:"cardBank",label:"银行名称"}),s(R,{prop:"cardNum",label:"银行卡号"}),s(R,{prop:"cardHolder",label:"持卡人"}),s(R,{prop:"userCount",label:"用户数"}),s(R,{prop:"createdAt",label:"创建时间"}),s(R,{label:"操作"},{default:c((({row:e})=>[s(J,null,{default:c((()=>[s(Y,{type:"primary",underline:!1,onClick:a=>function(e){N.value={id:e.id,name:e.name,domain:e.domain,remark:e.remark},j.value=!0,q.value="编辑代理商"}(e)},{default:c((()=>a[16]||(a[16]=[m(" 编辑 ")]))),_:2},1032,["onClick"]),s(G,{title:"确认删除该SAAS节点？",onConfirm:a=>async function(e){await k.deleteSaas({ids:[e]}),await D()}(e.id)},{reference:c((()=>[s(Y,{type:"danger",underline:!1},{default:c((()=>a[17]||(a[17]=[m(" 删除 ")]))),_:1})])),_:2},1032,["onConfirm"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[X,p(S)]]),s(M,{class:"flex justify-end mt-5 pb-5"},{default:c((()=>[s(L,{"current-page":p(E).page,"onUpdate:currentPage":a[1]||(a[1]=e=>p(E).page=e),"page-size":p(E).size,"onUpdate:pageSize":a[2]||(a[2]=e=>p(E).size=e),class:"mr-5","page-sizes":[15,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:p(A),onSizeChange:D,onCurrentChange:D},null,8,["current-page","page-size","total"])])),_:1})]),s(W,{modelValue:p(j),"onUpdate:modelValue":a[12]||(a[12]=e=>y(j)?j.value=e:null),"show-close":!1,width:"500px"},{header:c((()=>[u("div",z,[u("div",null,x(p(q)),1),u("div",{style:{cursor:"pointer"},onClick:a[3]||(a[3]=e=>j.value=!1)},[s(o,null,{default:c((()=>[s(O,{name:"close"})])),_:1})])])])),default:c((()=>[u("div",U,[s(T,{ref_key:"formRef",ref:_,model:p(N),"label-width":"120px"},{default:c((()=>[s(Q,{label:"代理商名称",prop:"name",rules:[{required:!0,message:"请输入代理商名称",trigger:"blur"}]},{default:c((()=>[s(l,{modelValue:p(N).name,"onUpdate:modelValue":a[4]||(a[4]=e=>p(N).name=e),placeholder:"请输入代理商名称"},null,8,["modelValue"])])),_:1}),s(Q,{label:"分配域名",prop:"domain",rules:[{required:!0,message:"请输入分配域名",trigger:"blur"}]},{default:c((()=>[s(l,{modelValue:p(N).domain,"onUpdate:modelValue":a[5]||(a[5]=e=>p(N).domain=e),placeholder:"请输入分配域名"},null,8,["modelValue"])])),_:1}),s(Q,{label:"收款银行",prop:"cardBank",rules:[{required:!0,message:"请输入收款银行",trigger:"blur"}]},{default:c((()=>[s(l,{modelValue:p(N).cardBank,"onUpdate:modelValue":a[6]||(a[6]=e=>p(N).cardBank=e),placeholder:"请输入收款银行"},null,8,["modelValue"])])),_:1}),s(Q,{label:"收款人姓名",prop:"cardHolder",rules:[{required:!0,message:"请输入收款人姓名",trigger:"blur"}]},{default:c((()=>[s(l,{modelValue:p(N).cardHolder,"onUpdate:modelValue":a[7]||(a[7]=e=>p(N).cardHolder=e),placeholder:"请输入收款人姓名"},null,8,["modelValue"])])),_:1}),s(Q,{label:"收款卡号",prop:"cardNum",rules:[{required:!0,message:"请输入银行卡号",trigger:"blur"}]},{default:c((()=>[s(l,{modelValue:p(N).cardNum,"onUpdate:modelValue":a[8]||(a[8]=e=>p(N).cardNum=e),placeholder:"请输入银行卡号"},null,8,["modelValue"])])),_:1}),s(Q,{label:"备注"},{default:c((()=>[s(l,{modelValue:p(N).remark,"onUpdate:modelValue":a[9]||(a[9]=e=>p(N).remark=e),type:"textarea",placeholder:"备注"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])]),u("div",B,[s(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:a[10]||(a[10]=e=>j.value=!1)},{default:c((()=>a[18]||(a[18]=[m(" 取消 ")]))),_:1}),s(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:a[11]||(a[11]=e=>async function(e){await(null==e?void 0:e.validate((async e=>{e&&(await k.saveSaas(N.value),v.success("提交成功！"),j.value=!1,await D())})))}(p(_)))},{default:c((()=>a[19]||(a[19]=[m(" 确定 ")]))),_:1})])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-9bff5ba5"]]);export{S as default};
