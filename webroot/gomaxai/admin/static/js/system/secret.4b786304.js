
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as a,G as l,x as t,j as s,o as n,c as u,f as o,g as c,b as i,h as f,W as d,X as r,Q as y,P as p,J as m,K as g,q as v}from"../main-4d5ea9bc.js";const h={class:"flex justify-between"},V=i("b",null,"key池管理",-1),K={class:"flex justify-between",style:{width:"100%"}},b=e({__name:"secret",setup(e){const v=a([]),b=l({chatGptKey:[]});a({chatGptKey:[{required:!0,trigger:"blur",message:"请填写您的chatGpt的key"}]});const k=a();async function x(){const e=await y.queryGptKeys();v.value=e.data.map((e=>({configKey:e.configKey,configVal:e.configVal,status:e.status}))),0===e.data.length&&_(),b.chatGptKey=v.value}function _(){v.value.push({configKey:"",configVal:"",status:1})}function G(){var e;null==(e=k.value)||e.validate((async e=>{if(e){try{await y.setGptKeys({configs:v.value}),p.success("变更配置信息成功")}catch(a){}x()}else p.error("请填写完整信息")}))}return t((()=>{x()})),(e,a)=>{const l=s("el-button"),t=s("el-input"),y=s("el-switch"),p=s("el-form-item"),x=s("el-col"),w=s("el-row"),C=s("el-form"),j=s("el-card");return n(),u("div",null,[o(j,{style:{margin:"20px"}},{header:c((()=>[i("div",h,[V,o(l,{class:"button",text:"",onClick:G},{default:c((()=>[f(" 保存设置 ")])),_:1})])])),default:c((()=>[o(C,{ref_key:"formRef",ref:k,model:b,"label-width":"80px"},{default:c((()=>[o(w,null,{default:c((()=>[o(x,{xs:24,md:21,lg:16,xl:13},{default:c((()=>[(n(!0),u(d,null,r(v.value,((e,a)=>(n(),m(p,{key:e.configKey,label:`key-${a+1}`,prop:"chatGptKey"},{default:c((()=>[i("div",K,[o(t,{modelValue:e.configVal,"onUpdate:modelValue":a=>e.configVal=a,placeholder:"请填写您的ChatGpt-Key",clearable:"",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),1!==v.value.length?(n(),m(l,{key:0,type:"danger",plain:"",class:"ml-1",onClick:e=>function(e){v.value.splice(e,1)}(a)},{default:c((()=>[f(" 删除 ")])),_:2},1032,["onClick"])):g("",!0),o(y,{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,class:"ml-5","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["label"])))),128))])),_:1})])),_:1}),o(l,{class:"mt-5",style:{"margin-left":"80px"},onClick:_},{default:c((()=>[f(" 添加key ")])),_:1})])),_:1},8,["model"])])),_:1})])}}});"function"==typeof v&&v(b);export{b as default};
