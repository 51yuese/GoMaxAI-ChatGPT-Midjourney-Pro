
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as t,G as a,r,x as s,j as l,o as i,c as n,b as o,f as d,g as u,h as g,Q as f,P as p,q as c}from"../main-7fe883cc.js";const m=o("div",{style:{display:"flex","align-items":"center","margin-bottom":"16px"}},[o("div",{style:{"font-size":"15px","font-weight":"bold"}},"注册赠送")],-1),S=o("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 注册赠送 ",-1),x={style:{"margin-top":"16px"}},y=e({__name:"register",setup(e){const c=t(),y=a({registerSendStatus:0,registerRewards:""}),b=r();async function v(){const e=await f.queryConfig({keys:["registerSendStatus","registerRewards"]});e.data.registerSendStatus&&(e.data.registerSendStatus=Number(e.data.registerSendStatus)),Object.assign(y,e.data)}async function _(){if(0==c.isUserModifyPermissions())return p.error("非超级管理员无权限操作！");if(0!=y.registerSendStatus)if(y.registerRewards<=0)p.error("开启邀请赠送选项后需填写此项");else{try{await f.setConfig({settings:(e=y,Object.keys(e).map((t=>({configKey:t,configVal:e[t]}))))}),p.success("变更配置信息成功")}catch(t){}var e;v()}else p.error("开启注册赠送后当前配置才能生效")}return s((()=>{v()})),(e,t)=>{const a=l("el-switch"),r=l("el-form-item"),s=l("el-col"),f=l("el-row"),p=l("el-input"),c=l("el-form"),v=l("el-button");return i(),n("div",null,[m,o("div",null,[d(c,{ref_key:"formRef",ref:b,model:y,"label-position":"top"},{default:u((()=>[o("div",null,[d(f,null,{default:u((()=>[d(s,{xs:24,md:20,lg:15,xl:8},{default:u((()=>[d(r,{prop:"registerSendStatus"},{default:u((()=>[S,d(a,{modelValue:y.registerSendStatus,"onUpdate:modelValue":t[0]||(t[0]=e=>y.registerSendStatus=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(f,null,{default:u((()=>[d(s,{xs:24,md:20,lg:15,xl:8},{default:u((()=>[d(r,{label:"注册赠送积分",prop:"registerSendIntegral"},{default:u((()=>[d(p,{size:"large",modelValue:y.registerRewards,"onUpdate:modelValue":t[1]||(t[1]=e=>y.registerRewards=e),placeholder:"首次注册赠送积分数量",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])])),_:1},8,["model"]),o("div",x,[d(v,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:_},{default:u((()=>[g("保存设置 ")])),_:1})])])])}}});"function"==typeof c&&c(y);export{y as default};
