
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,U as a,r as l,C as t,V as o,e as s,o as r,f as i,g as u,h as d,m as n,j as c,F as p,J as m,q as f,t as b,X as g,ae as h,a1 as v,a2 as x}from"../main-9d6c7d62.js";const y=["src"],_=["src"],w=["src"],N=["src"],P={style:{"margin-top":"50px"}},V=e({__name:"siteBase",setup(e){const v=a(),x=l("/api/file/upload"),V=t({siteName:"",clientLogoPath:"",clientFavoIconPath:"",siteDescribtion:"",siteKeyword:"",qqNumber:"",vxNumber:"",robotAvatar:"",userDefautlAvatar:"",buyCramiAddress:"",siteRobotName:"",isShowAppCatIcon:"",subSiteName:"",clientHomePath:""}),A=l({siteName:[{required:!0,trigger:"blur",message:"请填写网站名称"}]}),k=l();async function D(){const e=await g.queryConfig({keys:["siteName","subSiteName","clientLogoPath","clientHomePath","clientFavoIconPath","siteDescribtion","siteKeyword","qqNumber","vxNumber","robotAvatar","userDefautlAvatar","buyCramiAddress","siteRobotName","isShowAppCatIcon"]});Object.assign(V,e.data)}function F(){var e;null==(e=k.value)||e.validate((async e=>{if(e){if(0==v.isUserModifyPermissions())return h.error("非超级管理员无权限操作！");try{await g.setConfig({settings:(a=V,Object.keys(a).map((e=>({configKey:e,configVal:a[e]}))))}),h.success("变更配置信息成功")}catch(l){}D()}else h.error("请填写完整信息");var a}))}const z=e=>["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)?e.size/1024>300?(h.error("当前限制文件最大不超过 300KB!"),!1):void 0:(h.error("当前系统仅支持 PNG、JPEG、GIF、和 WebP 格式的图片!"),!1),C=(e,a)=>{V.clientFavoIconPath=e.data},I=(e,a)=>{V.clientLogoPath=e.data},j=(e,a)=>{V.robotAvatar=e.data},U=(e,a)=>{V.userDefautlAvatar=e.data},q=[{label:"ChatGpt聊天",path:"/chat"},{label:"Dall-E2绘画",path:"/draw/dall"},{label:"Midjourney绘画",path:"/draw/midjourney"},{label:"mj公共预览页",path:"/market"},{label:"mind思维导图",path:"/mindMap"},{label:"应用中心",path:"/gpt"},{label:"不指定首页",path:""}];return o((()=>{D()})),(e,a)=>{const l=s("el-input"),t=s("el-form-item"),o=s("el-col"),g=s("el-row"),h=s("Plus"),v=s("el-icon"),D=s("el-upload"),K=s("el-radio"),R=s("el-radio-group"),L=s("el-form"),S=s("el-button");return r(),i("div",null,[u(L,{ref_key:"formRef",ref:k,rules:A.value,model:V,"label-width":"150px","label-position":"top"},{default:d((()=>[u(g,null,{default:d((()=>[u(o,{xs:24,md:20,lg:15,xl:8},{default:d((()=>[u(t,{label:"网站名称",prop:"siteName"},{default:d((()=>[u(l,{size:"large",modelValue:V.siteName,"onUpdate:modelValue":a[0]||(a[0]=e=>V.siteName=e),placeholder:"请输入网站名称网站名称",clearable:""},null,8,["modelValue"])])),_:1}),u(t,{label:"网站副标题",prop:"siteName"},{default:d((()=>[u(l,{size:"large",modelValue:V.subSiteName,"onUpdate:modelValue":a[1]||(a[1]=e=>V.subSiteName=e),placeholder:"请输入网站副标题",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(t,null,{default:d((()=>[a[6]||(a[6]=n("div",null," 网站图标 ",-1)),u(D,{class:"avatar-uploader",style:{"margin-left":"33px"},action:x.value,"show-file-list":!1,"on-success":C,"before-upload":z},{default:d((()=>[V.clientFavoIconPath?(r(),i("img",{key:0,src:V.clientFavoIconPath,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,y)):(r(),c(v,{key:1,class:"avatar-uploader-icon"},{default:d((()=>[u(h)])),_:1}))])),_:1},8,["action"]),a[7]||(a[7]=n("div",{style:{"font-size":"13px",color:"#737897","margin-left":"12px","margin-top":"65px"}},"建议尺寸：64*64像素，支持ico格式",-1))])),_:1}),u(t,null,{default:d((()=>[a[8]||(a[8]=n("div",null," 网站LOGO ",-1)),u(D,{class:"avatar-uploader",action:x.value,"show-file-list":!1,"on-success":I,"before-upload":z},{default:d((()=>[V.clientLogoPath?(r(),i("img",{key:0,src:V.clientLogoPath,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,_)):(r(),c(v,{key:1,class:"avatar-uploader-icon"},{default:d((()=>[u(h)])),_:1}))])),_:1},8,["action"])])),_:1}),u(g,null,{default:d((()=>[u(o,{xs:24,md:20,lg:15,xl:8},{default:d((()=>[u(t,{label:"网站描述",prop:"siteDescribtion"},{default:d((()=>[u(l,{size:"large",modelValue:V.siteDescribtion,"onUpdate:modelValue":a[2]||(a[2]=e=>V.siteDescribtion=e),placeholder:"请输入网站描述",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(g,null,{default:d((()=>[u(o,{xs:24,md:20,lg:15,xl:8},{default:d((()=>[u(t,{label:"网站关键词",prop:"siteKeyword"},{default:d((()=>[u(l,{size:"large",modelValue:V.siteKeyword,"onUpdate:modelValue":a[3]||(a[3]=e=>V.siteKeyword=e),placeholder:"请输入网站关键词",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(g,null,{default:d((()=>[u(o,{xs:24,md:20,lg:15,xl:8},{default:d((()=>[u(t,{label:"机器人名称",prop:"siteRobotName"},{default:d((()=>[u(l,{size:"large",modelValue:V.siteRobotName,"onUpdate:modelValue":a[4]||(a[4]=e=>V.siteRobotName=e),placeholder:"默认[Ai Robot]、首页默认展示状态下的名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(g,null,{default:d((()=>[u(o,{xs:24,md:24,lg:24,xl:24},{default:d((()=>[u(t,{label:"设置指定首页",prop:"clientHomePath"},{default:d((()=>[u(R,{modelValue:V.clientHomePath,"onUpdate:modelValue":a[5]||(a[5]=e=>V.clientHomePath=e)},{default:d((()=>[(r(),i(p,null,m(q,(e=>u(K,{key:e.path,size:"small",border:"",label:e.path},{default:d((()=>[f(b(e.label),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(t,{prop:"robotAvatar"},{default:d((()=>[a[9]||(a[9]=n("div",null," 机器人头像 ",-1)),u(D,{class:"avatar-uploader",style:{"margin-left":"34px"},action:x.value,"show-file-list":!1,"on-success":j,"before-upload":z},{default:d((()=>[V.robotAvatar?(r(),i("img",{key:0,src:V.robotAvatar,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,w)):(r(),c(v,{key:1,class:"avatar-uploader-icon"},{default:d((()=>[u(h)])),_:1}))])),_:1},8,["action"]),a[10]||(a[10]=n("div",{style:{"font-size":"13px",color:"#737897","margin-left":"12px","margin-top":"65px"}},"建议尺寸：64*64像素，支持ico格式",-1))])),_:1}),u(t,{prop:"userDefautlAvatar"},{default:d((()=>[a[11]||(a[11]=n("div",null," 用户默认头像 ",-1)),u(D,{class:"avatar-uploader",action:x.value,"show-file-list":!1,"on-success":U,"before-upload":z},{default:d((()=>[V.userDefautlAvatar?(r(),i("img",{key:0,src:V.userDefautlAvatar,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,N)):(r(),c(v,{key:1,class:"avatar-uploader-icon"},{default:d((()=>[u(h)])),_:1}))])),_:1},8,["action"])])),_:1})])),_:1},8,["rules","model"]),n("div",P,[u(S,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:F},{default:d((()=>a[12]||(a[12]=[f("保存设置 ")]))),_:1})])])}}});"function"==typeof x&&x(V);const A=v(V,[["__scopeId","data-v-2d005930"]]);export{A as default};
