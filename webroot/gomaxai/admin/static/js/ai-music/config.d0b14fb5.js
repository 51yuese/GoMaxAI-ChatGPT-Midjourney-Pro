
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,U as i,C as s,r as a,V as r,e as t,o as l,j as u,h as c,g as p,i as o,aj as d,k as m,m as n,q as f,ak as y,X as b,ae as g,a1 as F,a2 as V}from"../main-98fa617f.js";const U={style:{"margin-top":"16px"}},_=e({__name:"config",setup(e){const F=i(),V=s({musicLyricsPrice:"",musicLyricsVipFree:"",musicCreatePrice:"",musicCreateVipFree:"",musicUploadPrice:"",musicUploadFree:"",musicTimeoutMs:5,musicUserType:""}),_=a(),v=a(!1);async function C(){const e=await b.queryConfig({keys:["musicLyricsPrice","musicLyricsVipFree","musicCreatePrice","musicCreateVipFree","musicUploadPrice","musicUploadVipFree","musicTimeoutMs","musicUserType"]});Object.assign(V,e.data),v.value=!0}function P(){var e;null==(e=_.value)||e.validate().then((async e=>{if(e)if(e){if(0==F.isUserModifyPermissions())return g.error("非超级管理员无权限操作！");try{await b.setConfig({settings:(i=V,Object.keys(i).map((e=>({configKey:e,configVal:i[e]}))))}),g.success("变更配置信息成功")}catch(s){}C()}else g.error("请填写完整信息");var i}))}return r((()=>{C()})),(e,i)=>{const s=t("ElsCaption"),a=t("ElsRow"),r=t("ElsInputNumber"),b=t("els-select"),g=t("ElsForm"),F=t("el-button");return l(),u(o(y),{style:{width:"1000px"}},{default:c((()=>[p(g,{modelValue:V,"onUpdate:modelValue":i[0]||(i[0]=e=>V=e),ref_key:"formRef",ref:_,labelWidth:"120",labelPosition:"top",size:"large"},{default:c((()=>[p(s,{type:"left",title:"歌词生成"}),p(a,{gutter:20},{default:c((()=>[p(o(d),{prop:"musicLyricsPrice",label:"单次消耗积分",required:""}),p(o(d),{prop:"musicLyricsVipFree",label:"会员免费次数",required:""})])),_:1}),p(s,{type:"left",title:"音乐生成"}),p(a,{gutter:20},{default:c((()=>[p(o(d),{prop:"musicCreatePrice",label:"单次消耗积分",required:""}),p(o(d),{prop:"musicCreateVipFree",label:"会员免费次数",required:""})])),_:1}),p(s,{type:"left",title:"上传音乐"}),p(a,{gutter:20},{default:c((()=>[p(o(d),{prop:"musicUploadPrice",label:"单次消耗积分",required:""}),p(o(d),{prop:"musicUploadVipFree",label:"会员免费次数",required:""})])),_:1}),p(s,{type:"left",title:"其他设置"}),p(a,{gutter:20},{default:c((()=>[p(r,{prop:"musicTimeoutMs",label:"超时时间（分钟）"}),v.value?(l(),u(b,{key:0,label:"会员类型",prop:"musicUserType",clearable:"",url:"dict/list?dictType=vip-leavel",multiple:"","label-field":"dictName","value-field":"id"})):m("",!0)])),_:1})])),_:1},8,["modelValue"]),n("div",U,[p(F,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:P},{default:c((()=>i[1]||(i[1]=[f("保存设置 ")]))),_:1})])])),_:1})}}});"function"==typeof V&&V(_);const v=F(_,[["__scopeId","data-v-9c07ef4f"]]);export{v as default};
