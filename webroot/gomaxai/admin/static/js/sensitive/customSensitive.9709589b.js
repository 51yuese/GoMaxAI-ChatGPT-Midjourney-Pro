
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,U as a,r as l,C as o,V as r,e as t,ah as d,o as s,f as i,m as n,g as u,h as p,q as c,Y as g,j as f,ae as m,a4 as v,a1 as x}from"../main-98fa617f.js";import{A as b}from"../badWords/badWords.32155cbc.js";const y={style:{"margin-top":"38px"}},w={class:"search_condition"},h={style:{display:"flex","align-items":"center"}},F={style:{"margin-top":"22px","margin-left":"12px"}},_={style:{"margin-top":"22px"}},z={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},k={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)"}},C={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},V=x(e({__name:"customSensitive",setup(e){const x=a(),V=l([]),U=l(!1),j=l(0),B=l(!1),A=o({word:""}),W=o({word:"",page:1,size:10}),S=l(),q=o({word:[{required:!0,message:"请输入您要添加的敏感词",trigger:"blur"}]});async function E(){U.value=!0;try{const e=await b.queryBadWords(W);U.value=!1;const{rows:a,count:l}=e.data;j.value=l,V.value=a}catch(e){U.value=!1}}function P(){W.word="",W.page=1,W.size=10,E()}function R(){A.word="",B.value=!0}function I(){S.value.validate((async e=>{if(!e)return;if(0==x.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");const a=await b.addBadWords(A);200==a.code?(m({type:"success",message:"敏感词添加成功"}),B.value=!1,E()):m({type:"error",message:a.data})}))}return r((()=>{E()})),(e,a)=>{const l=t("el-alert"),o=t("el-input"),r=t("el-button"),M=t("RefreshRight"),T=t("el-icon"),Y=t("el-table-column"),D=t("el-popconfirm"),G=t("el-table"),H=t("el-pagination"),J=t("el-row"),K=v,L=t("el-form-item"),N=t("el-form"),O=t("el-dialog"),Q=d("loading");return s(),i("div",null,[n("div",null,[n("div",y,[u(l,{closable:!1,"show-icon":"",title:"敏感词说明",description:"当前为自定义敏感词、触发敏感词将自动拦截、如配置过三方平台、自定义检测将在三方平台通过后最后进行检测！",type:"warning"})]),n("div",w,[n("div",h,[n("div",null,[a[7]||(a[7]=n("div",{class:"search_title"},"敏感词",-1)),n("div",null,[u(o,{modelValue:W.word,"onUpdate:modelValue":a[0]||(a[0]=e=>W.word=e),placeholder:"敏感词[模糊搜索]"},null,8,["modelValue"])])]),n("div",F,[u(r,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:E},{default:p((()=>a[8]||(a[8]=[c("查询 ")]))),_:1})]),n("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:P},[u(T,{color:"#3B82F6",size:"20"},{default:p((()=>[u(M)])),_:1})])]),n("div",_,[u(r,{style:{"background-color":"transparent",border:"1px solid #3B82F6","border-radius":"8px",color:"#3B82F6"},onClick:R},{default:p((()=>a[9]||(a[9]=[c("添加敏感词 ")]))),_:1})])])]),n("div",null,[g((s(),f(G,{border:"",data:V.value,height:"55vh",style:{width:"100%"},"tooltip-options":{}},{default:p((()=>[u(Y,{fixed:"",prop:"word",label:"敏感词"}),u(Y,{fixed:"",label:"操作",width:"150"},{default:p((e=>[u(D,{title:"确认删除此敏感词么?","icon-color":"red",onConfirm:a=>async function(e){if(0==x.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");(await b.delBadWords({id:e.id})).success&&m({type:"success",message:"删除敏感词成功成功！"}),visible.value=!1,E()}(e.row)},{reference:p((()=>[u(r,{link:"",type:"danger",size:"small"},{default:p((()=>a[10]||(a[10]=[c(" 删除 ")]))),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[Q,U.value]]),u(J,{class:"flex justify-end mt-5"},{default:p((()=>[u(H,{"current-page":W.page,"onUpdate:currentPage":a[1]||(a[1]=e=>W.page=e),"page-size":W.size,"onUpdate:pageSize":a[2]||(a[2]=e=>W.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:j.value,onSizeChange:E,onCurrentChange:E},null,8,["current-page","page-size","total"])])),_:1})]),u(O,{modelValue:B.value,"onUpdate:modelValue":a[6]||(a[6]=e=>B.value=e),width:"650","show-close":!1,"destroy-on-close":""},{header:p((({close:e,titleId:l,titleClass:o})=>[n("div",z,[a[11]||(a[11]=n("div",null," 添加敏感词 ",-1)),n("div",{onClick:a[3]||(a[3]=e=>B.value=!1),style:{cursor:"pointer"}},[u(T,null,{default:p((()=>[u(K,{name:"close"})])),_:1})])])])),default:p((()=>[n("div",k,[u(N,{ref_key:"addSensitivelFormRef",ref:S,rules:q,model:A,"label-width":"auto",style:{"max-width":"750px"}},{default:p((()=>[u(L,{label:"敏感词",prop:"word"},{default:p((()=>[u(o,{modelValue:A.word,"onUpdate:modelValue":a[4]||(a[4]=e=>A.word=e),size:"large",placeholder:"请输入添加的敏感词"},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])]),n("div",C,[u(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:a[5]||(a[5]=e=>B.value=!1)},{default:p((()=>a[12]||(a[12]=[c("取消 ")]))),_:1}),u(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:I},{default:p((()=>a[13]||(a[13]=[c(" 确认添加 ")]))),_:1})])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-da6b2144"]]);export{V as default};
