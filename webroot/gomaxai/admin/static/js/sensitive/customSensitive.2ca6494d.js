
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as a,r as l,G as o,x as r,j as t,V as d,o as s,c as i,b as n,f as u,g as p,h as c,w as g,J as f,P as m,y as v,p as x,k as y,_ as b}from"../main-7fe883cc.js";import{A as w}from"../badWords/badWords.7c75411e.js";const h=e=>(x("data-v-d6d194e3"),e=e(),y(),e),F={style:{"margin-top":"38px"}},_={class:"search_condition"},k={style:{display:"flex","align-items":"center"}},z=h((()=>n("div",{class:"search_title"},"敏感词",-1))),C={style:{"margin-top":"22px","margin-left":"12px"}},V={style:{"margin-top":"22px"}},j={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},B=h((()=>n("div",null," 添加敏感词 ",-1))),U={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)"}},W={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},A=b(e({__name:"customSensitive",setup(e){const x=a(),y=l([]),b=l(!1),h=l(0),A=l(!1),P=o({word:""}),S=o({word:"",page:1,size:10}),E=l(),R=o({word:[{required:!0,message:"请输入您要添加的敏感词",trigger:"blur"}]});async function q(){b.value=!0;try{const e=await w.queryBadWords(S);b.value=!1;const{rows:a,count:l}=e.data;h.value=l,y.value=a}catch(e){b.value=!1}}function I(){S.word="",S.page=1,S.size=10,q()}function M(){P.word="",A.value=!0}function G(){E.value.validate((async e=>{if(!e)return;if(0==x.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");const a=await w.addBadWords(P);200==a.code?(m({type:"success",message:"敏感词添加成功"}),A.value=!1,q()):m({type:"error",message:a.data})}))}return r((()=>{q()})),(e,a)=>{const l=t("el-alert"),o=t("el-input"),r=t("el-button"),J=t("RefreshRight"),D=t("el-icon"),H=t("el-table-column"),K=t("el-popconfirm"),L=t("el-table"),N=t("el-pagination"),O=t("el-row"),Q=v,T=t("el-form-item"),X=t("el-form"),Y=t("el-dialog"),Z=d("loading");return s(),i("div",null,[n("div",null,[n("div",F,[u(l,{closable:!1,"show-icon":"",title:"敏感词说明",description:"当前为自定义敏感词、触发敏感词将自动拦截、如配置过三方平台、自定义检测将在三方平台通过后最后进行检测！",type:"warning"})]),n("div",_,[n("div",k,[n("div",null,[z,n("div",null,[u(o,{modelValue:S.word,"onUpdate:modelValue":a[0]||(a[0]=e=>S.word=e),placeholder:"敏感词[模糊搜索]"},null,8,["modelValue"])])]),n("div",C,[u(r,{text:"",bg:"",style:{"font-size":"15px",color:"#60A5FA","background-color":"#EFF6FF","border-radius":"8px"},onClick:q},{default:p((()=>[c("查询 ")])),_:1})]),n("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:I},[u(D,{color:"#3B82F6",size:"20"},{default:p((()=>[u(J)])),_:1})])]),n("div",V,[u(r,{style:{"background-color":"transparent",border:"1px solid #3B82F6","border-radius":"8px",color:"#3B82F6"},onClick:M},{default:p((()=>[c("添加敏感词 ")])),_:1})])])]),n("div",null,[g((s(),f(L,{border:"",data:y.value,height:"55vh",style:{width:"100%"},"tooltip-options":{}},{default:p((()=>[u(H,{fixed:"",prop:"word",label:"敏感词"}),u(H,{fixed:"",label:"操作",width:"150"},{default:p((e=>[u(K,{title:"确认删除此敏感词么?","icon-color":"red",onConfirm:a=>async function(e){if(0==x.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");(await w.delBadWords({id:e.id})).success&&m({type:"success",message:"删除敏感词成功成功！"}),visible.value=!1,q()}(e.row)},{reference:p((()=>[u(r,{link:"",type:"danger",size:"small"},{default:p((()=>[c(" 删除 ")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[Z,b.value]]),u(O,{class:"flex justify-end mt-5"},{default:p((()=>[u(N,{"current-page":S.page,"onUpdate:currentPage":a[1]||(a[1]=e=>S.page=e),"page-size":S.size,"onUpdate:pageSize":a[2]||(a[2]=e=>S.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:h.value,onSizeChange:q,onCurrentChange:q},null,8,["current-page","page-size","total"])])),_:1})]),u(Y,{modelValue:A.value,"onUpdate:modelValue":a[6]||(a[6]=e=>A.value=e),width:"650","show-close":!1,"destroy-on-close":""},{header:p((({close:e,titleId:l,titleClass:o})=>[n("div",j,[B,n("div",{onClick:a[3]||(a[3]=e=>A.value=!1),style:{cursor:"pointer"}},[u(D,null,{default:p((()=>[u(Q,{name:"close"})])),_:1})])])])),default:p((()=>[n("div",U,[u(X,{ref_key:"addSensitivelFormRef",ref:E,rules:R,model:P,"label-width":"auto",style:{"max-width":"750px"}},{default:p((()=>[u(T,{label:"敏感词",prop:"word"},{default:p((()=>[u(o,{modelValue:P.word,"onUpdate:modelValue":a[4]||(a[4]=e=>P.word=e),size:"large",placeholder:"请输入添加的敏感词"},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])]),n("div",W,[u(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:a[5]||(a[5]=e=>A.value=!1)},{default:p((()=>[c("取消 ")])),_:1}),u(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:G},{default:p((()=>[c(" 确认添加 ")])),_:1})])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d6d194e3"]]);export{A as default};
