
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.a3be0458.js";import{A as a}from"./chat.c20eb950.js";import{d as l,r as t,C as s,V as r,e as u,ah as o,o as n,f as d,g as i,h as c,F as m,J as p,j as f,i as v,q as y,Y as _,m as g,t as w,k as b,ae as h,ag as k,a2 as x}from"../main-98fa617f.js";import{R as z,D as V}from"../index/index.cfc6c5fc.js";const j={class:"flex draw_container"},C={class:"draw_head"},I={class:"draw_footer flex mt-3 justify-between items-center"},A=l({__name:"draw",setup(l){const x=t(!1),A=t(),U=t(0),D=t([]),L=s({userId:"",rec:"",model:"DALL-E2",page:1,size:14}),P=t([]);async function q(){x.value=!0;try{const e=await a.queryDrawAll(L),{rows:l,count:t}=e.data;x.value=!1,U.value=t,P.value=l}catch(e){x.value=!1}}async function E(e){const a=await k.queryAllUser({size:30,username:e});D.value=a.data.rows}return r((()=>{q()})),(l,t)=>{const s=u("el-alert"),r=e,k=u("el-option"),F=u("el-select"),R=u("el-form-item"),S=u("el-button"),J=u("el-form"),M=u("el-image"),Y=u("el-tag"),B=u("Plus"),G=u("el-icon"),H=u("Minus"),K=u("el-pagination"),N=u("el-row"),O=o("loading");return n(),d("div",null,[i(r,{bottomPadding:"20px"},{default:c((()=>[i(s,{closable:!1,"show-icon":"",title:"DALL-E2绘画说明",description:"此处的midjourney模型选择是老版本的历史数据、新版迁移至新菜单分开！",type:"success"})])),_:1}),i(r,null,{default:c((()=>[i(J,{ref_key:"formRef",ref:A,inline:!0,model:L},{default:c((()=>[i(R,{label:"用户名称",prop:"userId"},{default:c((()=>[i(F,{modelValue:L.userId,"onUpdate:modelValue":t[0]||(t[0]=e=>L.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"用户姓名[模糊搜索]","remote-show-suffix":"","remote-method":E},{default:c((()=>[(n(!0),d(m,null,p(D.value,(e=>(n(),f(k,{key:e.id,label:e.username,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(R,{label:"图片状态",prop:"rec"},{default:c((()=>[i(F,{modelValue:L.rec,"onUpdate:modelValue":t[1]||(t[1]=e=>L.rec=e),placeholder:"请选择图片状态",clearable:""},{default:c((()=>[(n(!0),d(m,null,p(v(z),(e=>(n(),f(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(R,{label:"绘画模型",prop:"model"},{default:c((()=>[i(F,{modelValue:L.model,"onUpdate:modelValue":t[2]||(t[2]=e=>L.model=e),placeholder:"请选择绘画模型",clearable:""},{default:c((()=>[(n(!0),d(m,null,p(v(V),(e=>(n(),f(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(R,null,{default:c((()=>[i(S,{type:"primary",onClick:q},{default:c((()=>t[6]||(t[6]=[y(" 查询 ")]))),_:1}),i(S,{onClick:t[3]||(t[3]=e=>{return null==(a=A.value)||a.resetFields(),void q();var a})},{default:c((()=>t[7]||(t[7]=[y(" 重置 ")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),_((n(),f(r,{style:{width:"100%"},bottomPadding:"20px"},{default:c((()=>[g("div",j,[(n(!0),d(m,null,p(P.value,(e=>(n(),d("div",{key:e.id,style:{height:"280px"},class:"draw_img_container flex border"},[g("div",C,[i(M,{fit:"contain","preview-src-list":[e.answer],src:e.thumbImg,lazy:"",class:"draw_img","hide-on-click-modal":""},null,8,["preview-src-list","src"])]),g("div",I,[i(Y,{class:"ml-2",type:e.rec?"success":"info"},{default:c((()=>[y(w(e.rec?"已推荐":"未推荐"),1)])),_:2},1032,["type"]),i(S,{type:"warning",plain:"",size:"small",onClick:l=>async function(e){const l=await a.recDrawImg({id:e});h.success(l.data),q()}(e.id)},{default:c((()=>[y(w(e.rec?"取消推荐":"加入推荐")+" ",1),e.rec?b("",!0):(n(),f(G,{key:0},{default:c((()=>[i(B)])),_:1})),e.rec?(n(),f(G,{key:1},{default:c((()=>[i(H)])),_:1})):b("",!0)])),_:2},1032,["onClick"])])])))),128))]),i(N,{class:"flex justify-end mt-5"},{default:c((()=>[i(K,{"current-page":L.page,"onUpdate:currentPage":t[4]||(t[4]=e=>L.page=e),"page-size":L.size,"onUpdate:pageSize":t[5]||(t[5]=e=>L.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:q,onCurrentChange:q},null,8,["current-page","page-size","total"])])),_:1})])),_:1})),[[O,x.value]])])}}});"function"==typeof x&&x(A);export{A as default};
