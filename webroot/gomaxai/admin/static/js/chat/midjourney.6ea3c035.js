
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e}from"../index/index.8a03bf1e.js";import{A as a}from"./chat.c5162e5c.js";import{d as l,r as s,C as t,V as r,e as u,ah as o,o as n,f as i,g as d,h as c,F as f,J as m,j as p,i as v,q as y,Y as _,m as g,t as b,k as w,ae as h,ag as k,a2 as x}from"../main-a14f6586.js";import{R as z,c as j}from"../index/index.82d04ab0.js";const V={class:"flex draw_container"},I={class:"draw_head"},C={class:"draw_footer flex mt-3 justify-between items-center"},U=l({__name:"midjourney",setup(l){const x=s(!1),U=s(),A=s(0),q=s([]),M=t({userId:"",rec:"",status:3,page:1,size:10}),P=s([]);async function D(){x.value=!0;try{const e=await a.queryMjDrawAll(M),{rows:l,count:s}=e.data;x.value=!1,A.value=s,P.value=l}catch(e){x.value=!1}}async function F(e){const a=await k.queryAllUser({size:30,username:e});q.value=a.data.rows}return r((()=>{D()})),(l,s)=>{const t=u("el-option"),r=u("el-select"),k=u("el-form-item"),R=u("el-button"),S=u("el-form"),E=e,J=u("el-image"),Y=u("el-tag"),B=u("Plus"),G=u("el-icon"),H=u("Minus"),K=u("el-pagination"),L=u("el-row"),N=o("loading");return n(),i("div",null,[d(E,null,{default:c((()=>[d(S,{ref_key:"formRef",ref:U,inline:!0,model:M},{default:c((()=>[d(k,{label:"用户名称",prop:"userId"},{default:c((()=>[d(r,{modelValue:M.userId,"onUpdate:modelValue":s[0]||(s[0]=e=>M.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"用户姓名[模糊搜索]","remote-show-suffix":"","remote-method":F},{default:c((()=>[(n(!0),i(f,null,m(q.value,(e=>(n(),p(t,{key:e.id,label:e.username,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(k,{label:"推荐状态",prop:"rec"},{default:c((()=>[d(r,{modelValue:M.rec,"onUpdate:modelValue":s[1]||(s[1]=e=>M.rec=e),placeholder:"请选择推荐状态",clearable:""},{default:c((()=>[(n(!0),i(f,null,m(v(z),(e=>(n(),p(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(k,{label:"绘制状态",prop:"status"},{default:c((()=>[d(r,{modelValue:M.status,"onUpdate:modelValue":s[2]||(s[2]=e=>M.status=e),placeholder:"请选择图片绘制状态",clearable:""},{default:c((()=>[(n(!0),i(f,null,m(v(j),(e=>(n(),p(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(k,null,{default:c((()=>[d(R,{type:"primary",onClick:D},{default:c((()=>s[6]||(s[6]=[y(" 查询 ")]))),_:1}),d(R,{onClick:s[3]||(s[3]=e=>{return null==(a=U.value)||a.resetFields(),void D();var a})},{default:c((()=>s[7]||(s[7]=[y(" 重置 ")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),_((n(),p(E,{style:{width:"100%"},bottomPadding:"20px"},{default:c((()=>[g("div",V,[(n(!0),i(f,null,m(P.value,(e=>(n(),i("div",{key:e.id,style:{height:"280px"},class:"draw_img_container flex border"},[g("div",I,[d(J,{fit:"contain","preview-src-list":[e.fileInfo.cosUrl],src:e.fileInfo.thumbImg,lazy:"",class:"draw_img","hide-on-click-modal":""},null,8,["preview-src-list","src"])]),g("div",C,[d(Y,{class:"ml-2",type:e.rec?"success":"info"},{default:c((()=>[y(b(e.rec?"已推荐":"未推荐"),1)])),_:2},1032,["type"]),d(R,{type:"warning",plain:"",size:"small",onClick:l=>async function(e){const l=await a.recMjDrawImg({id:e});h.success(l.data),D()}(e.id)},{default:c((()=>[y(b(e.rec?"取消推荐":"加入推荐")+" ",1),e.rec?w("",!0):(n(),p(G,{key:0},{default:c((()=>[d(B)])),_:1})),e.rec?(n(),p(G,{key:1},{default:c((()=>[d(H)])),_:1})):w("",!0)])),_:2},1032,["onClick"])])])))),128))]),d(L,{class:"flex justify-end mt-5"},{default:c((()=>[d(K,{"current-page":M.page,"onUpdate:currentPage":s[4]||(s[4]=e=>M.page=e),"page-size":M.size,"onUpdate:pageSize":s[5]||(s[5]=e=>M.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:A.value,onSizeChange:D,onCurrentChange:D},null,8,["current-page","page-size","total"])])),_:1})])),_:1})),[[N,x.value]])])}}});"function"==typeof x&&x(U);export{U as default};
