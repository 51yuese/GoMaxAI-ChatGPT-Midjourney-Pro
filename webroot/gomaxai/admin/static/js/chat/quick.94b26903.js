
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as l,b as a,e as t,o,j as n,h as i,g as u,i as d,m as r,t as s,q as p,s as m,f as c,F as f,J as b,k as g,al as y,P as v,a2 as h}from"../main-9d6c7d62.js";const k=["title"],V={style:{"flex-grow":"1"}},_={style:{display:"ruby-text",width:"100%"}},w=e({__name:"quick",setup(e){const h=l(),w=l(),E=l(),U={id:0,name:"",icon:"",prompt:"",isRelease:0,sortIndex:0,config:{placeholder:"",format:"",tags:[]}},x=l(),q=l(),C=l(),R=l(),D=l([{name:"查询",color:"primary",icon:"search",action:"Search"},{name:"新增快捷工具",color:"primary",icon:"edit",action:()=>(q.value="新增快捷工具",x.value=a.cloneObj(U),C.value=!0,Promise.resolve(!0))}]);function I(){const e=function(e){if(!e)return[];const l=/{{([^}]+)}}/g,a=[];let t;for(;null!==(t=l.exec(e));){const e=t[1].trim();if("输入内容"!==e){let l=[],t=!0;const o={key:e,tag:"input"};l.length>0&&(o.options=l),o.required=t,a.push(o)}}return a}(x.value.config.format);e.forEach((e=>{const l=x.value.config.tags.find((l=>l.key==e.key));l&&Object.assign(e,l)})),x.value.config.tags=e}function j(){return new Promise(((e,l)=>{R.value.validate().then((l=>{l?E.value.save().then((l=>{h.value.searchData(),e(l)})):e(!1)}))}))}return(e,l)=>{const U=t("ElsInput"),F=t("ElsMenuTool"),z=t("ElsFormQuery"),M=t("ElsColumn"),O=t("ElsColumnImage"),P=t("ElsColumnBool"),T=t("el-button"),Y=t("ElsTable"),H=t("ElsCaption"),S=t("ElsSwitch"),$=t("ElsUpload"),A=t("ElsTextarea"),B=t("ElsFormItem"),J=t("ElInput"),L=t("ElsOption"),Q=t("ElsSelect"),W=t("ElsForm"),G=t("ElsDialog"),K=t("ElsContainer");return o(),n(K,{ref_key:"containerRef",ref:R},{default:i((()=>[u(z,{ref_key:"queryRef",ref:w},{default:i((()=>[u(U,{prop:"name",placeholder:"请输入名称"}),u(F,{data:d(D),text:"",bg:""},null,8,["data"])])),_:1},512),u(Y,{url:"/admin/model/quick/list",ref_key:"tableRef",ref:h},{default:i((()=>[u(M,{prop:"id",label:"ID",sortable:"",width:"100",sortExpress:"desc"}),u(M,{prop:"name",label:"名称",width:"200"}),u(O,{prop:"icon",label:"图标"}),u(M,{prop:"prompt",label:"预设内容"},{default:i((({row:e})=>[r("div",{style:{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2","white-space":"normal"},title:e.prompt},s(e.prompt),9,k)])),_:1}),u(P,{prop:"isRelease",label:"是否发布",width:"100"}),u(M,{prop:"createdAt",label:"创建时间",width:"200",dateFormatter:"YYYY-MM-DD HH:mm:ss"}),u(M,{label:"操作",width:"200"},{default:i((({row:e})=>[u(T,{link:"",type:"primary",size:"small",onClick:l=>function(e){q.value="修改快捷工具",x.value=a.cloneObj(e),C.value=!0,x.value.config||(x.value.config={placeholder:"",format:"",tags:[]})}(e)},{default:i((()=>l[4]||(l[4]=[p("编辑")]))),_:2},1032,["onClick"]),u(T,{link:"",type:"primary",size:"small",onClick:l=>function(e){`/admin/model/quick/rec?id=${e.id}&rec=${1==e.isRelease?0:1}`.get().then((e=>{h.value.loadData(),v.success("操作成功")}))}(e)},{default:i((()=>[p(s(e.isRelease?"取消发布":"发布"),1)])),_:2},1032,["onClick"]),u(T,{link:"",type:"danger",size:"small",onClick:l=>function(e){y.confirm("确认删除？").then((()=>{`/admin/model/quick/delete?id=${e.id}`.get().then((e=>{h.value.searchData(),v.success("删除成功")}))}))}(e)},{default:i((()=>l[5]||(l[5]=[p("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},512),u(G,{modelValue:d(C),"onUpdate:modelValue":l[3]||(l[3]=e=>m(C)?C.value=e:null),title:d(q),confirm:j,"content-height":"350"},{default:i((()=>[u(W,{modelValue:d(x),"onUpdate:modelValue":l[2]||(l[2]=e=>m(x)?x.value=e:null),ref_key:"formRef",ref:E,saveUrl:"/admin/model/quick/save",labelWidth:"120",style:{padding:"10px"}},{default:i((()=>[u(H,{type:"left"},{default:i((()=>l[6]||(l[6]=[p("预设配置")]))),_:1}),u(S,{label:"是否发布",prop:"isRelease"}),u(U,{label:"名称",prop:"name",required:""}),u($,{label:"图标",prop:"icon",type:"Pic",required:""}),u(A,{label:"预设内容",prop:"prompt",rows:5}),d(x).config?(o(),c(f,{key:0},[u(H,{type:"left"},{default:i((()=>l[7]||(l[7]=[p("高级配置")]))),_:1}),u(W,{modelValue:d(x).config,"onUpdate:modelValue":l[1]||(l[1]=e=>d(x).config=e)},{default:i((()=>[u(B,{label:"输入提示"},{default:i((()=>[r("div",V,[u(U,{prop:"placeholder"}),l[8]||(l[8]=p(" (输入提示指的是对话输入框中的提示) "))])])),_:1}),u(B,{label:"格式化内容",prop:"format"},{default:i((()=>[u(J,{type:"textarea",modelValue:d(x).config.format,"onUpdate:modelValue":l[0]||(l[0]=e=>d(x).config.format=e),label:"输入提示",prop:"placeholder",onInput:I,rows:5},null,8,["modelValue"]),l[9]||(l[9]=r("div",null,"格式化内容指的是用户在使用快捷工具时候会提前预设好内容，根据选择的配置将内容填充完成",-1)),l[10]||(l[10]=r("div",{style:{"font-size":"12px",color:"#b1b1b1"},innerHTML:" 比如:请根据我提供的健身需求：“{{输入内容}}”，我的个人情况是：性别{{性别}}、{{健身历史}}，希望频次为{{频次}}，制定合适的健身计划，并推荐合适的健身动作，并附带动作指导和注意事项，并提醒量力而行"},null,-1))])),_:1}),(o(!0),c(f,null,b(d(x).config.tags,(e=>(o(),c("div",null,[u(H,{type:"left"},{default:i((()=>[p(s(e.key),1)])),_:2},1024),r("div",_,[u(Q,{label:"显示组件",modelValue:e.tag,"onUpdate:modelValue":l=>e.tag=l,width:"100"},{default:i((()=>[u(L,{value:"input"},{default:i((()=>l[11]||(l[11]=[p("输入框")]))),_:1}),u(L,{value:"select"},{default:i((()=>l[12]||(l[12]=[p("下拉框")]))),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),"select"==e.tag?(o(),n(S,{key:0,label:"多选",modelValue:e.mutiple,"onUpdate:modelValue":l=>e.mutiple=l},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),"select"==e.tag?(o(),n(U,{key:1,label:"组件配置",modelValue:e.options,"onUpdate:modelValue":l=>e.options=l,tip:"多选逗号分隔",width:"200"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),u(S,{label:"必填",modelValue:e.required,"onUpdate:modelValue":l=>e.required=l},null,8,["modelValue","onUpdate:modelValue"])])])))),256))])),_:1},8,["modelValue"])],64)):g("",!0)])),_:1},8,["modelValue"])])),_:1},8,["modelValue","title"])])),_:1},512)}}});"function"==typeof h&&h(w);export{w as default};
