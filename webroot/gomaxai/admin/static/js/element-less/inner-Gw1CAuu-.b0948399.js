
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e,d as a,B as l,C as n,r as t,E as o,u,G as r,H as d,e as m,i,o as v,j as s,h as y,I as p,f as c,F as f,J as g,K as I,c as V,k as N,L as h,g as b,M as k,N as C,w as T,l as x,v as _,O as D,q as j,m as M,t as O,n as F,b as U}from"../main-527fe521.js";const P=["innerHTML"],A={class:"els-dynamic-r-mobile-title"},H=["onClick"],w=e(a({__name:"innerObjectArray",props:{nodeItem:{default:()=>n([])},nodeItemModifiers:{}},emits:["update:nodeItem"],setup(e){const a=e,{setValue:l}=u(),n=o(e,"nodeItem"),{isMobile:d,componentProps:p,getArrayNodeValue:N,renderProps:k,getGlobalData:C,getRootNode:T,getParentNode:x,getCurrNode:_,getNodeValue:D}=r(a,n),j=t(),F=V((()=>{const e={...n.value.config.arrayConfig};return k(e)}));function w(){return U.cloneObj(n.value.arrayObjData)}const R=V((()=>n.value.config.arrayConfig));function z(e){let a=n.value.config.arrayConfig.itemComponentTitle;try{if(!a.startsWith(":"))return a;if(a=a.substring(1),!a)return"";const l=D(e);return new Function("globalData,rootNode,parentNode,currNode,item,utils",a.indexOf("return")>-1?a:`return ${a}`)(C(),T(),x(),_(),l,U)}catch(l){return"加载异常"}}return l({getCurrNode:()=>N(n.value.children),getParentNode:()=>N(n.value.children)}),(e,a)=>{var l;const t=m("van-cell-group"),o=m("els-form"),u=m("els-list");return v(),c("div",{class:"els-dynamic-array",style:h(null==(l=n.value.config.advancedConfig)?void 0:l.style)},[b(u,I({modelValue:n.value.children,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value.children=e),ref_key:"list",ref:j,onAdd:w,sortable:!i(d),isRemove:!i(d),hasForm:!1,"item-class-name":[{"els-dynamic-r-array":"Object"===n.value.arrayDataTypeName||"DynamicRender"===n.value.componentTypeName},{"els-dynamic-r-array-mobile":i(d)}],borderType:R.value.borderType,style:[{"max-width":R.value.maxWidth?R.value.maxWidth+"px":""},{"max-height":R.value.maxHeight?R.value.maxHeight+"px":""},{display:"Horizontal"===R.value.arrangementType?"flex":""}],class:["els-dynamic-array-render",{horizontal:"Horizontal"===R.value.arrangementType}]},F.value),{itemTitle:y((({$item:e})=>[M("div",{innerHTML:z(e)},null,8,P)])),default:y((({element:e,$item:a,$index:l})=>[(v(),c("div",{key:e.itemKey,class:"els-dynamic-array-inner"},[b(o,I({modelValue:n.value.children[l],"onUpdate:modelValue":e=>n.value.children[l]=e},i(p)),{default:y((()=>[i(d)?(v(),s(t,{title:n.value.keyName,key:e.itemKey},{title:y((()=>[M("div",A,[M("span",null,O(n.value.keyName+" "+(l+1)),1),M("span",{class:"els-dynamic-remove",onClick:e=>{return a=l,void j.value.remove(a);var a}},"删除",8,H)])])),default:y((()=>[(v(!0),c(f,null,g(a,((e,a)=>(v(),s(W,{nodeItem:e,key:e.keyID,arrayIndex:l,index:a},null,8,["nodeItem","arrayIndex","index"])))),128))])),_:2},1032,["title"])):(v(!0),c(f,{key:1},g(a,((e,a)=>(v(),s(W,{nodeItem:e,key:e.keyID,arrayIndex:l,index:a},null,8,["nodeItem","arrayIndex","index"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])]))])),_:1},16,["modelValue","sortable","isRemove","item-class-name","borderType","style","class"])],4)}}}),[["__scopeId","data-v-6019eb35"]]),R=a({inheritAttrs:!1,__name:"innerItem",props:l({currDepath:{},parentNode:{},currNode:{},nodeType:{}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{},modelValue:{},modelModifiers:{}}),emits:l(["update:modelValue","valueChange"],["update:nodeItem","update:modelValue"]),setup(e,{emit:a}){const l=o(e,"nodeItem"),n=a,u=t(),m=o(e,"modelValue"),c=e,f=k(),V=t(),h=t({}),{isMobile:D,componentProps:j}=r(c,l,m,h);l.value.slots&&l.value.slots.length&&l.value.slots.forEach((e=>{"String"===l.value.dataTypeName?h.value[e.name]="":h.value[e.name]={}})),C((()=>{V.value=m.value})),T(V,(e=>{n("update:modelValue",e),n("valueChange",e)}),{deep:!0,immediate:!0});const M=t("");return C((()=>{M.value=l.value.componentName})),d(l,u),(e,a)=>{var n;return M.value?(v(),s(p(M.value),I({key:0},Object.assign({},i(j),i(f)),{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),ref_key:"dyComponent",ref:u}),x({_:2},[g(null==(n=l.value.slots)?void 0:n.filter((e=>e.children.length)),(e=>({name:e.name,fn:y((a=>[b(_,{config:e.children,modelValue:h.value[e.name],"onUpdate:modelValue":a=>h.value[e.name]=a,globalData:Object.assign({},a,{componentValue:V.value}),isMobile:i(D)},null,8,["config","modelValue","onUpdate:modelValue","globalData","isMobile"])]))})))]),1040,["modelValue"])):N("",!0)}}}),z=e(a({__name:"innerArray",props:l({parentNode:{}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=e,{getValue:l}=u(),n=l("dataTypeData",[]),t=o(e,"nodeItem"),{isMobile:d,formProps:p,componentProps:f,renderDisabled:g}=r(a,t);function N(e){if(t.value.config.advancedConfig&&t.value.config.advancedConfig.eventChange){new Function("val,parentNode,currNode",t.value.config.advancedConfig.eventChange)(e,a.parentNode,t.value)}}function k(){const e=n.find((e=>e.value===t.value.arrayDataType));return e&&e.defaultValue?e.defaultValue:"String"==t.value.arrayDataTypeName?t.value.defaultValue?t.value.defaultValue:"":"Bool"==t.value.arrayDataTypeName?"true"===t.value.defaultValue:"Number"===t.value.arrayDataTypeName?null!=t.value.defaultValue&&""!==t.value.defaultValue?parseFloat(t.value.defaultValue):0:"Object"===t.value.arrayDataTypeName?{}:"Array"===t.value.arrayDataTypeName?[]:{}}function C(){return k()}function x(e){let a=[],l=k();if(void 0===e||""===e)a.push(l);else for(let n=0;n<e;n++)a.push(l);t.value.value=a}T((()=>t.value.value),(e=>{e&&Array.isArray(e)||x(t.value.config.arrayConfig.arrayDefaultLength)}),{immediate:!0}),T((()=>t.value.config.arrayConfig.arrayDefaultLength),(e=>{x(e)}));const _=V((()=>{const e=Object.assign({},f.value,p.value);return delete e.label,e})),D=V((()=>"Object"===t.value.arrayDataTypeName));return(e,a)=>{const l=m("els-list");return v(),c("div",{class:F(["els-dynamic-array-render",{horizontal:"Horizontal"===t.value.config.arrayConfig.arrangementType}]),style:{"flex-grow":"1"}},[b(l,{modelValue:t.value.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.value=e),onAdd:C,"item-class-name":"Object"===t.value.arrayDataTypeName||"DynamicRender"===t.value.componentTypeName?"els-dynamic-r-array":"",borderType:t.value.config.arrayConfig.borderType,style:h([{"max-width":t.value.config.arrayConfig.maxWidth?t.value.config.arrayConfig.maxWidth+"px":""},{"max-height":t.value.config.arrayConfig.maxHeight?t.value.config.arrayConfig.maxHeight+"px":""},{display:"Horizontal"===t.value.config.arrayConfig.arrangementType?"flex":""},{"flex-wrap":"wrap"},{gap:"5px"},{overflow:"scroll"},{"padding-right":i(d)||D.value?"0px":"20px"}])},{default:y((({element:a,index:l})=>[(v(),s(R,I({class:{"els-dynamic-r-array-item":"ElsDynamicRender"===t.value.componentName}},_.value,{key:l,"parent-node":e.parentNode,"curr-node":t.value,disabled:i(g)(),modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,prop:`[${l}]`,requiredMessage:"不能为空",nodeItem:t.value,style:t.value.config.advancedConfig.style,onValueChange:N}),null,16,["class","parent-node","curr-node","disabled","modelValue","onUpdate:modelValue","prop","nodeItem","style"]))])),_:1},8,["modelValue","item-class-name","borderType","style"])],2)}}}),[["__scopeId","data-v-3263eab3"]]),S=a({inheritAttrs:!1,__name:"innerWrap",props:l({index:{},parentNode:{}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=o(e,"nodeItem"),l=e,{getValue:n,setValue:m}=u(),h=t(),{renderIf:b,componentProps:k,getNodeValue:C,getCurrNode:T}=r(l,a),x=n("getResult",(()=>({}))),_=V((()=>x(a.value.children))),D=n("getFormPropIndex",(()=>""));return d(a,h),a.value.keyCode&&"Object"===a.value.dataType?m({getCurrNode:()=>C(a.value.children),getParentNode:()=>T(),getFormPropIndex:()=>{let e=D();return e+=`[${l.index}].children`,e}}):m({getFormPropIndex:()=>{let e=D();return e+=`[${l.index}].children`,e}}),(e,l)=>{var n,t,o,u,r;return"ElsFormQuery"===(null==(n=a.value)?void 0:n.componentName)?(v(),c(f,{key:0},[i(b)()?(v(),s(p(null==(t=a.value)?void 0:t.componentName),I({key:0,style:null==(o=a.value.config.advancedConfig)?void 0:o.style},i(k),{ref_key:"dyComponent",ref:h,modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e)}),{default:y((()=>[(v(!0),c(f,null,g(a.value.children,((e,a)=>(v(),s(W,{nodeItem:e,index:-1,key:e.keyID},null,8,["nodeItem"])))),128))])),_:1},16,["style","modelValue"])):N("",!0)],64)):(v(),c(f,{key:1},[i(b)()?(v(),s(p(null==(u=a.value)?void 0:u.componentName),I({key:0,style:null==(r=a.value.config.advancedConfig)?void 0:r.style},i(k),{ref_key:"dyComponent",ref:h}),{default:y((()=>[(v(!0),c(f,null,g(a.value.children,((e,a)=>(v(),s(W,{nodeItem:e,index:a,key:e.keyID},null,8,["nodeItem","index"])))),128))])),_:1},16,["style"])):N("",!0)],64))}}}),$=["innerHTML"],G=a({inheritAttrs:!1,__name:"show",props:{nodeItem:{default:()=>n([])},nodeItemModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:nodeItem","update:modelValue"],setup(e){const a=o(e,"nodeItem"),l=t(),n=o(e,"modelValue"),u=t({}),V=e,{isMobile:h,componentProps:k,renderContent:T}=r(V,a,n,u);d(a,l);const x=t(""),M=t(a.value.config.baseConfig.innerContent);return C((()=>{x.value=a.value.componentName})),(e,t)=>{const o=m("els-tip");return x.value?(v(),s(p(x.value),I({key:0,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e)},i(k),{ref_key:"dyComponent",ref:l}),{default:y((()=>[M.value?(v(),c("span",{key:0,innerHTML:i(T)(M.value)},null,8,$)):N("",!0),a.value.slots&&a.value.slots.length?(v(!0),c(f,{key:1},g(a.value.slots,(a=>D(e.$slots,a.name,{},(()=>[b(_,{config:a.children,modelValue:u.value[a.name],"onUpdate:modelValue":e=>u.value[a.name]=e,isMobile:i(h)},null,8,["config","modelValue","onUpdate:modelValue","isMobile"])])))),256)):N("",!0)])),_:3},16,["modelValue"])):(v(),s(o,{key:1,type:"danger"},{default:y((()=>[j("未设置组件名")])),_:1}))}}}),L=e(a({__name:"form",props:l({isRoot:{type:Boolean}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=t(),l=e,n=o(e,"nodeItem"),{setValue:V}=u(),{isMobile:N,getNodeValue:h,getCurrNode:b,componentProps:k}=r(l,n);return d(n,a),V({getCurrNode:()=>h(n.value.children),getParentNode:()=>b()}),(e,l)=>{const t=m("els-form");return i(N)&&!e.isRoot?(v(),s(t,I({key:0,modelValue:n.value.children,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value.children=e)},i(k),{ref_key:"dyComponent",ref:a,key:n.value.keyID}),{default:y((()=>[(v(),s(p("van-cell-group"),{title:n.value.keyName},{default:y((()=>[(v(!0),c(f,null,g(n.value.children,((e,a)=>(v(),s(W,{index:a,nodeItem:e,key:e.keyID},null,8,["index","nodeItem"])))),128))])),_:1},8,["title"]))])),_:1},16,["modelValue"])):(v(),s(t,I({key:1,modelValue:n.value.children,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value.children=e)},i(k),{ref_key:"dyComponent",ref:a,key:n.value.keyID}),{default:y((()=>[(v(!0),c(f,null,g(n.value.children,((e,a)=>(v(),s(W,{index:a,nodeItem:e,key:e.keyID},null,8,["index","nodeItem"])))),128))])),_:1},16,["modelValue"]))}}}),[["__scopeId","data-v-edf3b5f1"]]),E=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),W=e(a({inheritAttrs:!1,__name:"inner",props:l({index:{},arrayIndex:{default:-1}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=e,{getValue:l,setValue:n}=u(),t=o(e,"nodeItem"),{isMobile:d,formProps:g,getCurrNode:k,renderIf:C,renderValueChange:T}=r(a,t),x=V((()=>{var e;return"Object"!==t.value.dataTypeName&&"Object"!=t.value.arrayDataTypeName||"ElsCaption"!=(null==(e=t.value.config.baseConfig)?void 0:e.componentName)}));return a.arrayIndex>-1&&n({getCurrNode:()=>k()}),(e,a)=>{var l;const n=m("els-caption"),o=m("els-form-node");return i(C)()?(v(),c(f,{key:0},["Object"!==t.value.dataTypeName&&"Object"!=t.value.arrayDataTypeName||"ElsCaption"!=(null==(l=t.value.config.baseConfig)?void 0:l.componentName)?N("",!0):(v(),s(n,I({key:0},t.value.config.baseConfig,{title:t.value.config.baseConfig.title||t.value.keyName}),null,16,["title"])),t.value.componentTypeName&&"Show"===t.value.componentGroup&&t.value.keyCode?(v(),s(G,{key:1,nodeItem:t.value,style:h(t.value.config.advancedConfig.style),modelValue:t.value.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.value=e),title:t.value.keyName},null,8,["nodeItem","style","modelValue","title"])):t.value.componentTypeName&&"Show"===t.value.componentGroup?(v(),s(G,{key:2,nodeItem:t.value,style:h(t.value.config.advancedConfig.style),title:t.value.keyName},null,8,["nodeItem","style","title"])):"Container"==t.value.componentGroup?(v(),s(S,{key:3,parentNode:t.value,nodeItem:t.value,index:e.index},null,8,["parentNode","nodeItem","index"])):"Array"===t.value.dataTypeName&&"Object"!==t.value.arrayDataType||"Array"===t.value.dataTypeName&&t.value.componentTypeName?(v(),s(o,I({key:4,childCreateFormItem:!1,createFormItem:x.value},i(g),{prop:void 0,childType:"Array"===t.value.dataTypeName?"":t.value.componentTypeName}),{default:y((()=>[b(z,{nodeItem:t.value},null,8,["nodeItem"])])),_:1},16,["createFormItem","childType"])):"Object"==t.value.dataTypeName||"Array"===t.value.dataTypeName&&"Object"===t.value.arrayDataType?(v(),s(o,I({key:5,childCreateFormItem:!1,createFormItem:!i(d)&&x.value},i(g),{childType:"Array"===t.value.dataTypeName?"":t.value.componentTypeName}),{default:y((()=>["Object"==t.value.dataTypeName&&t.value.componentTypeName?(v(),c(f,{key:0},[i(d)?(v(),s(p("van-cell-group"),{key:0,title:t.value.keyName},{default:y((()=>["Object"==t.value.dataTypeName&&t.value.componentTypeName?(v(),s(R,{key:0,nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.value=e),onValueChange:a[2]||(a[2]=e=>i(T)(e))},null,8,["nodeItem","modelValue"])):N("",!0)])),_:1},8,["title"])):(v(),s(R,{key:1,nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.value=e),onValueChange:a[4]||(a[4]=e=>i(T)(e))},null,8,["nodeItem","modelValue"]))],64)):"Object"==t.value.dataTypeName?(v(),s(L,{key:1,nodeItem:t.value},null,8,["nodeItem"])):(v(),s(w,{key:2,nodeItem:t.value},null,8,["nodeItem"]))])),_:1},16,["createFormItem","childType"])):i(d)&&t.value.componentTypeName&&"Form"===t.value.componentGroup?(v(),s(R,I({key:6,nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[5]||(a[5]=e=>t.value.value=e)},i(g),{onValueChange:a[6]||(a[6]=e=>i(T)(e))}),null,16,["nodeItem","modelValue"])):t.value.componentTypeName&&"Form"===t.value.componentGroup?(v(),s(o,I({key:7,childCreateFormItem:!1,createFormItem:x.value},i(g),{childType:t.value.componentTypeName}),{default:y((()=>[b(R,{nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[7]||(a[7]=e=>t.value.value=e),onValueChange:a[8]||(a[8]=e=>i(T)(e))},null,8,["nodeItem","modelValue"])])),_:1},16,["createFormItem","childType"])):N("",!0)],64)):N("",!0)}}}),[["__scopeId","data-v-8a4dba28"]]),B=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{E as f,B as i};
