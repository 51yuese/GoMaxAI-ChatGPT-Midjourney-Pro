
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as e,d as a,B as l,C as n,r as t,E as o,u,G as r,H as d,e as i,i as m,o as s,j as v,h as y,I as p,f as c,F as f,J as g,K as I,L as h,k as V,c as N,M as b,g as k,N as C,O as T,w as x,l as _,v as D,Q as M,q as O,m as j,t as F,n as U,b as P}from"../main-537e5929.js";const A=["innerHTML"],H={class:"els-dynamic-r-mobile-title"},w=["onClick"],$=e(a({__name:"innerObjectArray",props:{nodeItem:{default:()=>n([])},nodeItemModifiers:{}},emits:["update:nodeItem"],setup(e){const a=e,{setValue:l}=u(),n=o(e,"nodeItem"),{isMobile:d,componentProps:p,getArrayNodeValue:V,renderProps:C,getGlobalData:T,getRootNode:x,getParentNode:_,getCurrNode:D,getNodeValue:M}=r(a,n),O=t(),U=N((()=>{const e={...n.value.config.arrayConfig};return C(e)}));function $(){return P.cloneObj(n.value.arrayObjData)}const R=N((()=>n.value.config.arrayConfig));function z(e){let a=n.value.config.arrayConfig.itemComponentTitle;try{if(!a.startsWith(":"))return function(e){let a=n.value.config.arrayConfig.itemComponentTitle;if(a.indexOf("{{")>-1&&a.indexOf("}}")>-1){const l=/{{([^}]+)}}/g,n=a.replace(l,((e,a)=>`\${${a}}`)),t=M(e);return new Function("globalData,rootNode,parentNode,currNode,item,utils",`return \`${n}\``)(T(),x(),_(),D(),t,P)}return a}(e);if(a=a.substring(1),!a)return"";const l=M(e);return new Function("globalData,rootNode,parentNode,currNode,item,utils",a.indexOf("return")>-1?a:`return ${a}`)(T(),x(),_(),D(),l,P)}catch(l){return"计算属性"}}return l({getCurrNode:()=>V(n.value.children),getParentNode:()=>V(n.value.children)}),(e,a)=>{var l;const t=i("van-cell-group"),o=i("els-form"),u=i("els-list");return s(),c("div",{class:"els-dynamic-array",style:b(null==(l=n.value.config.advancedConfig)?void 0:l.style)},[k(u,I({modelValue:n.value.children,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value.children=e),ref_key:"list",ref:O,onAdd:$,sortable:!m(d),isRemove:!m(d),hasForm:!1,"item-class-name":[{"els-dynamic-r-array":"Object"===n.value.arrayDataTypeName||"DynamicRender"===n.value.componentTypeName},{"els-dynamic-r-array-mobile":m(d)}],borderType:R.value.borderType,style:[{"max-width":R.value.maxWidth?R.value.maxWidth+"px":""},{"max-height":R.value.maxHeight?R.value.maxHeight+"px":""},{display:"Horizontal"===R.value.arrangementType?"flex":""}],class:["els-dynamic-array-render",{horizontal:"Horizontal"===R.value.arrangementType}]},U.value),{collapseHeader:y((({$item:e})=>[n.value.slots&&n.value.slots.length&&n.value.slots[0].children.length?(s(),v(h,{key:0,config:n.value.slots[0].children,globalData:m(M)(e),isMobile:m(d)},null,8,["config","globalData","isMobile"])):(s(),c("div",{key:1,innerHTML:z(e)},null,8,A))])),default:y((({element:e,$item:a,$index:l})=>[(s(),c("div",{key:e.itemKey,class:"els-dynamic-array-inner"},[k(o,I({modelValue:n.value.children[l],"onUpdate:modelValue":e=>n.value.children[l]=e},m(p)),{default:y((()=>[m(d)?(s(),v(t,{title:n.value.keyName,key:e.itemKey},{title:y((()=>[j("div",H,[j("span",null,F(n.value.keyName+" "+(l+1)),1),j("span",{class:"els-dynamic-remove",onClick:e=>{return a=l,void O.value.remove(a);var a}},"删除",8,w)])])),default:y((()=>[(s(!0),c(f,null,g(a,((e,a)=>(s(),v(B,{nodeItem:e,key:e.keyID,arrayIndex:l,index:a},null,8,["nodeItem","arrayIndex","index"])))),128))])),_:2},1032,["title"])):(s(!0),c(f,{key:1},g(a,((e,a)=>(s(),v(B,{nodeItem:e,key:e.keyID,arrayIndex:l,index:a},null,8,["nodeItem","arrayIndex","index"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])]))])),_:1},16,["modelValue","sortable","isRemove","item-class-name","borderType","style","class"])],4)}}}),[["__scopeId","data-v-0e20a405"]]),R=a({inheritAttrs:!1,__name:"innerItem",props:l({currDepath:{},parentNode:{},currNode:{},nodeType:{}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{},modelValue:{},modelModifiers:{}}),emits:l(["update:modelValue","valueChange"],["update:nodeItem","update:modelValue"]),setup(e,{emit:a}){const l=o(e,"nodeItem"),n=a,u=t(),i=o(e,"modelValue"),c=e,f=C(),h=t(),N=t({}),{isMobile:b,componentProps:M}=r(c,l,i,N);l.value.slots&&l.value.slots.length&&l.value.slots.forEach((e=>{"String"===l.value.dataTypeName?N.value[e.name]="":N.value[e.name]={}})),T((()=>{h.value=i.value})),x(h,(e=>{n("update:modelValue",e),n("valueChange",e)}),{deep:!0,immediate:!0});const O=t("");return T((()=>{O.value=l.value.componentName})),d(l,u),(e,a)=>{var n;return O.value?(s(),v(p(O.value),I({key:0},Object.assign({},m(M),m(f)),{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),ref_key:"dyComponent",ref:u}),_({_:2},[g(null==(n=l.value.slots)?void 0:n.filter((e=>e.children.length)),(e=>({name:e.name,fn:y((a=>[k(D,{config:e.children,modelValue:N.value[e.name],"onUpdate:modelValue":a=>N.value[e.name]=a,globalData:Object.assign({},a,{componentValue:h.value}),isMobile:m(b)},null,8,["config","modelValue","onUpdate:modelValue","globalData","isMobile"])]))})))]),1040,["modelValue"])):V("",!0)}}}),z=e(a({__name:"innerArray",props:l({parentNode:{}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=e,{getValue:l}=u(),n=l("dataTypeData",[]),t=o(e,"nodeItem"),{isMobile:d,formProps:p,componentProps:f,renderDisabled:g}=r(a,t);function h(e){if(t.value.config.advancedConfig&&t.value.config.advancedConfig.eventChange){new Function("val,parentNode,currNode",t.value.config.advancedConfig.eventChange)(e,a.parentNode,t.value)}}function V(){const e=n.find((e=>e.value===t.value.arrayDataType));return e&&e.defaultValue?e.defaultValue:"String"==t.value.arrayDataTypeName?t.value.defaultValue?t.value.defaultValue:"":"Bool"==t.value.arrayDataTypeName?"true"===t.value.defaultValue:"Number"===t.value.arrayDataTypeName?null!=t.value.defaultValue&&""!==t.value.defaultValue?parseFloat(t.value.defaultValue):0:"Object"===t.value.arrayDataTypeName?{}:"Array"===t.value.arrayDataTypeName?[]:{}}function C(){return V()}function T(e){let a=[],l=V();if(void 0===e||""===e)a.push(l);else for(let n=0;n<e;n++)a.push(l);t.value.value=a}x((()=>t.value.value),(e=>{e&&Array.isArray(e)||T(t.value.config.arrayConfig.arrayDefaultLength)}),{immediate:!0}),x((()=>t.value.config.arrayConfig.arrayDefaultLength),(e=>{T(e)}));const _=N((()=>{const e=Object.assign({},f.value,p.value);return delete e.label,e})),D=N((()=>"Object"===t.value.arrayDataTypeName));return(e,a)=>{const l=i("els-list");return s(),c("div",{class:U(["els-dynamic-array-render",{horizontal:"Horizontal"===t.value.config.arrayConfig.arrangementType}]),style:{"flex-grow":"1"}},[k(l,{modelValue:t.value.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.value=e),onAdd:C,"item-class-name":"Object"===t.value.arrayDataTypeName||"DynamicRender"===t.value.componentTypeName?"els-dynamic-r-array":"",borderType:t.value.config.arrayConfig.borderType,style:b([{"max-width":t.value.config.arrayConfig.maxWidth?t.value.config.arrayConfig.maxWidth+"px":""},{"max-height":t.value.config.arrayConfig.maxHeight?t.value.config.arrayConfig.maxHeight+"px":""},{display:"Horizontal"===t.value.config.arrayConfig.arrangementType?"flex":""},{"flex-wrap":"wrap"},{gap:"5px"},{overflow:"scroll"},{"padding-right":m(d)||D.value?"0px":"20px"}])},{default:y((({element:a,index:l})=>[(s(),v(R,I({class:{"els-dynamic-r-array-item":"ElsDynamicRender"===t.value.componentName}},_.value,{key:l,"parent-node":e.parentNode,"curr-node":t.value,disabled:m(g)(),modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,prop:`[${l}]`,requiredMessage:"不能为空",nodeItem:t.value,style:t.value.config.advancedConfig.style,onValueChange:h}),null,16,["class","parent-node","curr-node","disabled","modelValue","onUpdate:modelValue","prop","nodeItem","style"]))])),_:1},8,["modelValue","item-class-name","borderType","style"])],2)}}}),[["__scopeId","data-v-3263eab3"]]),S=a({inheritAttrs:!1,__name:"innerWrap",props:l({index:{},parentNode:{}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=o(e,"nodeItem"),l=e,{getValue:n,setValue:i}=u(),h=t(),{renderIf:b,componentProps:k,getNodeValue:C,getCurrNode:T}=r(l,a),x=n("getResult",(()=>({}))),_=N((()=>x(a.value.children))),D=n("getFormPropIndex",(()=>""));return d(a,h),a.value.keyCode&&"Object"===a.value.dataType?i({getCurrNode:()=>C(a.value.children),getParentNode:()=>T(),getFormPropIndex:()=>{let e=D();return e+=`[${l.index}].children`,e}}):i({getFormPropIndex:()=>{let e=D();return e+=`[${l.index}].children`,e}}),(e,l)=>{var n,t,o,u,r;return"ElsFormQuery"===(null==(n=a.value)?void 0:n.componentName)?(s(),c(f,{key:0},[m(b)()?(s(),v(p(null==(t=a.value)?void 0:t.componentName),I({key:0,style:null==(o=a.value.config.advancedConfig)?void 0:o.style},m(k),{ref_key:"dyComponent",ref:h,modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e)}),{default:y((()=>[(s(!0),c(f,null,g(a.value.children,((e,a)=>(s(),v(B,{nodeItem:e,index:-1,key:e.keyID},null,8,["nodeItem"])))),128))])),_:1},16,["style","modelValue"])):V("",!0)],64)):(s(),c(f,{key:1},[m(b)()?(s(),v(p(null==(u=a.value)?void 0:u.componentName),I({key:0,style:null==(r=a.value.config.advancedConfig)?void 0:r.style},m(k),{ref_key:"dyComponent",ref:h}),{default:y((()=>[(s(!0),c(f,null,g(a.value.children,((e,a)=>(s(),v(B,{nodeItem:e,index:a,key:e.keyID},null,8,["nodeItem","index"])))),128))])),_:1},16,["style"])):V("",!0)],64))}}}),G=["innerHTML"],L=a({inheritAttrs:!1,__name:"show",props:{nodeItem:{default:()=>n([])},nodeItemModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:nodeItem","update:modelValue"],setup(e){const a=o(e,"nodeItem"),l=t(),n=o(e,"modelValue"),u=t({}),h=e,{isMobile:N,componentProps:b,renderContent:C}=r(h,a,n,u);d(a,l);const x=t(""),_=t(a.value.config.baseConfig.innerContent);return T((()=>{x.value=a.value.componentName})),(e,t)=>{const o=i("els-tip");return x.value?(s(),v(p(x.value),I({key:0,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e)},m(b),{ref_key:"dyComponent",ref:l}),{default:y((()=>[_.value?(s(),c("span",{key:0,innerHTML:m(C)(_.value)},null,8,G)):V("",!0),a.value.slots&&a.value.slots.length?(s(!0),c(f,{key:1},g(a.value.slots,(a=>M(e.$slots,a.name,{},(()=>[k(D,{config:a.children,modelValue:u.value[a.name],"onUpdate:modelValue":e=>u.value[a.name]=e,isMobile:m(N)},null,8,["config","modelValue","onUpdate:modelValue","isMobile"])])))),256)):V("",!0)])),_:3},16,["modelValue"])):(s(),v(o,{key:1,type:"danger"},{default:y((()=>[O("未设置组件名")])),_:1}))}}}),E=e(a({__name:"form",props:l({isRoot:{type:Boolean}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=t(),l=e,n=o(e,"nodeItem"),{setValue:N}=u(),{isMobile:b,getNodeValue:k,getCurrNode:C,componentProps:T}=r(l,n);return d(n,a),N({getCurrNode:()=>k(n.value.children),getParentNode:()=>C()}),(e,l)=>{const t=i("els-form");return m(b)&&!e.isRoot?(s(),v(t,I({key:0,modelValue:n.value.children,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value.children=e)},m(T),{ref_key:"dyComponent",ref:a,key:n.value.keyID}),{default:y((()=>[(s(),v(p("van-cell-group"),{title:n.value.keyName},{default:y((()=>[(s(!0),c(f,null,g(n.value.children,((e,a)=>(s(),v(B,{index:a,nodeItem:e,key:e.keyID},null,8,["index","nodeItem"])))),128))])),_:1},8,["title"]))])),_:1},16,["modelValue"])):(s(),v(t,I({key:1,modelValue:n.value.children,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value.children=e)},m(T),{ref_key:"dyComponent",ref:a,key:n.value.keyID}),{collapseHeader:y((()=>[n.value.slots&&n.value.slots.length&&n.value.slots[0].children.length?(s(),v(h,{key:0,config:n.value.slots[0].children,globalData:m(k)(n.value.children),isMobile:m(b)},null,8,["config","globalData","isMobile"])):V("",!0)])),default:y((()=>[(s(!0),c(f,null,g(n.value.children,((e,a)=>(s(),v(B,{index:a,nodeItem:e,key:e.keyID},null,8,["index","nodeItem"])))),128))])),_:1},16,["modelValue"]))}}}),[["__scopeId","data-v-cd64a0a5"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"})),B=e(a({inheritAttrs:!1,__name:"inner",props:l({index:{},arrayIndex:{default:-1}},{nodeItem:{default:()=>n([])},nodeItemModifiers:{}}),emits:["update:nodeItem"],setup(e){const a=e,{getValue:l,setValue:n}=u(),t=o(e,"nodeItem"),{isMobile:d,formProps:g,getCurrNode:h,renderIf:C,renderValueChange:T}=r(a,t),x=N((()=>{var e;return"Object"!==t.value.dataTypeName&&"Object"!=t.value.arrayDataTypeName||"ElsCaption"!=(null==(e=t.value.config.baseConfig)?void 0:e.componentName)}));return a.arrayIndex>-1&&n({getCurrNode:()=>h()}),(e,a)=>{var l;const n=i("els-caption"),o=i("els-form-node");return m(C)()?(s(),c(f,{key:0},["Object"!==t.value.dataTypeName&&"Object"!=t.value.arrayDataTypeName||"ElsCaption"!=(null==(l=t.value.config.baseConfig)?void 0:l.componentName)?V("",!0):(s(),v(n,I({key:0},t.value.config.baseConfig,{title:t.value.config.baseConfig.title||t.value.keyName}),null,16,["title"])),t.value.componentTypeName&&"Show"===t.value.componentGroup&&t.value.keyCode?(s(),v(L,{key:1,nodeItem:t.value,style:b(t.value.config.advancedConfig.style),modelValue:t.value.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.value=e),title:t.value.keyName},null,8,["nodeItem","style","modelValue","title"])):t.value.componentTypeName&&"Show"===t.value.componentGroup?(s(),v(L,{key:2,nodeItem:t.value,style:b(t.value.config.advancedConfig.style),title:t.value.keyName},null,8,["nodeItem","style","title"])):"Container"==t.value.componentGroup?(s(),v(S,{key:3,parentNode:t.value,nodeItem:t.value,index:e.index},null,8,["parentNode","nodeItem","index"])):"Array"===t.value.dataTypeName&&"Object"!==t.value.arrayDataType||"Array"===t.value.dataTypeName&&t.value.componentTypeName?(s(),v(o,I({key:4,childCreateFormItem:!1,createFormItem:x.value},m(g),{prop:void 0,childType:"Array"===t.value.dataTypeName?"":t.value.componentTypeName}),{default:y((()=>[k(z,{nodeItem:t.value},null,8,["nodeItem"])])),_:1},16,["createFormItem","childType"])):"Object"==t.value.dataTypeName||"Array"===t.value.dataTypeName&&"Object"===t.value.arrayDataType?(s(),v(o,I({key:5,childCreateFormItem:!1,createFormItem:!m(d)&&x.value},m(g),{childType:"Array"===t.value.dataTypeName?"":t.value.componentTypeName}),{default:y((()=>["Object"==t.value.dataTypeName&&t.value.componentTypeName?(s(),c(f,{key:0},[m(d)?(s(),v(p("van-cell-group"),{key:0,title:t.value.keyName},{default:y((()=>["Object"==t.value.dataTypeName&&t.value.componentTypeName?(s(),v(R,{key:0,nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.value=e),onValueChange:a[2]||(a[2]=e=>m(T)(e))},null,8,["nodeItem","modelValue"])):V("",!0)])),_:1},8,["title"])):(s(),v(R,{key:1,nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.value=e),onValueChange:a[4]||(a[4]=e=>m(T)(e))},null,8,["nodeItem","modelValue"]))],64)):"Object"==t.value.dataTypeName?(s(),v(E,{key:1,nodeItem:t.value},null,8,["nodeItem"])):(s(),v($,{key:2,nodeItem:t.value},null,8,["nodeItem"]))])),_:1},16,["createFormItem","childType"])):m(d)&&t.value.componentTypeName&&"Form"===t.value.componentGroup?(s(),v(R,I({key:6,nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[5]||(a[5]=e=>t.value.value=e)},m(g),{onValueChange:a[6]||(a[6]=e=>m(T)(e))}),null,16,["nodeItem","modelValue"])):t.value.componentTypeName&&"Form"===t.value.componentGroup?(s(),v(o,I({key:7,childCreateFormItem:!1,createFormItem:x.value},m(g),{childType:t.value.componentTypeName}),{default:y((()=>[k(R,{nodeItem:t.value,modelValue:t.value.value,"onUpdate:modelValue":a[7]||(a[7]=e=>t.value.value=e),onValueChange:a[8]||(a[8]=e=>m(T)(e))},null,8,["nodeItem","modelValue"])])),_:1},16,["createFormItem","childType"])):V("",!0)],64)):V("",!0)}}}),[["__scopeId","data-v-8a4dba28"]]),K=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));export{W as f,K as i};
