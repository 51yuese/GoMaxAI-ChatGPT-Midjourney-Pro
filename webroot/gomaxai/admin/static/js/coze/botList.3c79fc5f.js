
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as l,b as a,e as o,o as t,j as i,h as d,g as s,i as n,q as r,t as u,m as p,s as b,f,k as c,F as m,al as y,P as g,a2 as v}from"../main-98fa617f.js";const _={style:{padding:"0 20px"}},h=e({__name:"botList",setup(e){const v=l(),h=l(),I=l(),E={id:0,name:"",botId:"",iconFileUrl:"",description:"",isRelease:0,userType:"",tags:"",appId:"",apiKey:"",botType:"coze",onboardingInfo:{prologue:"",suggested_questions:[""]}},k=l(),T=l(),V=l(),q=l(),w=l([{name:"查询",color:"primary",icon:"search",action:"Search"},{name:"新增配置",color:"primary",icon:"edit",action:()=>(T.value="新增配置",k.value=a.cloneObj(E),k.value.botId=a.Guid32(),V.value=!0,Promise.resolve(!0))}]);function D(){return new Promise(((e,l)=>{q.value.validate().then((l=>{l?I.value.save().then((l=>{v.value.searchData(),"/coze/updateBot".post(k.value),e(l)})):e(!1)}))}))}const C=l([{label:"扣子",value:"coze"},{label:"FastGPT",value:"fast"},{label:"Dify",value:"dify"}]);return(e,l)=>{const E=o("ElsSelect"),F=o("ElsInput"),U=o("ElsMenuTool"),z=o("ElsFormQuery"),R=o("ElsColumn"),x=o("el-tag"),P=o("ElsColumnImage"),j=o("ElsColumnBool"),Y=o("el-button"),$=o("ElsTable"),A=o("ElsCaption"),B=o("ElsSwitch"),G=o("ElsRadioButton"),K=o("ElsRow"),L=o("ElsUpload"),M=o("els-select"),N=o("ElsTextarea"),S=o("ElsInputNumber"),W=o("ElsWangEditor"),H=o("els-input"),O=o("ElsList"),Q=o("ElsFormItem"),J=o("ElsForm"),X=o("ElsDialog"),Z=o("ElsContainer");return t(),i(Z,{ref_key:"containerRef",ref:q},{default:d((()=>[s(z,{ref_key:"queryRef",ref:h},{default:d((()=>[s(E,{prop:"botType",placeholder:"类型",data:n(C),clearable:""},null,8,["data"]),s(F,{prop:"name",placeholder:"请输入名称"}),s(U,{data:n(w),text:"",bg:""},null,8,["data"])])),_:1},512),s($,{url:"/admin/coze/bot/list",ref_key:"tableRef",ref:v},{default:d((()=>[s(R,{prop:"id",label:"ID",sortable:"",width:"100",sortExpress:"desc"}),s(R,{prop:"botType",label:"类型",width:"100"},{default:d((({row:e})=>["dify"==e.botType?(t(),i(x,{key:0},{default:d((()=>l[4]||(l[4]=[r("Dify")]))),_:1})):"fast"==e.botType?(t(),i(x,{key:1},{default:d((()=>l[5]||(l[5]=[r("FastGPT")]))),_:1})):(t(),i(x,{key:2},{default:d((()=>l[6]||(l[6]=[r("扣子")]))),_:1}))])),_:1}),s(R,{prop:"name",label:"名称",width:"200"}),s(R,{prop:"tags",label:"分类",width:"100"}),s(P,{prop:"iconFileUrl",label:"图标"}),s(R,{prop:"userId",label:"角色",width:"100"},{default:d((({row:e})=>[e.userId?(t(),i(x,{key:1,type:"success"},{default:d((()=>l[8]||(l[8]=[r("用户")]))),_:1})):(t(),i(x,{key:0},{default:d((()=>l[7]||(l[7]=[r("官方")]))),_:1}))])),_:1}),s(R,{prop:"description",label:"说明"}),s(j,{prop:"isRelease",label:"是否发布",width:"100"}),s(R,{prop:"createdAt",label:"创建时间",width:"200",dateFormatter:"YYYY-MM-DD HH:mm:ss"}),s(R,{label:"操作",width:"200"},{default:d((({row:e})=>[s(Y,{link:"",type:"primary",size:"small",onClick:l=>function(e){T.value="修改配置",k.value=a.cloneObj(e),k.value.onboardingInfo||(k.value.onboardingInfo={prologue:"",suggested_questions:[""]}),k.value.onboardingInfo.suggested_questions||(k.value.onboardingInfo.suggested_questions=[""]),V.value=!0}(e)},{default:d((()=>l[9]||(l[9]=[r("编辑")]))),_:2},1032,["onClick"]),s(Y,{link:"",type:"primary",size:"small",onClick:l=>function(e){`/admin/coze/bot/rec?id=${e.id}&rec=${1==e.publish_flag?0:1}`.get().then((e=>{v.value.loadData(),g.success("操作成功")}))}(e)},{default:d((()=>[r(u(e.publish_flag?"取消推荐":"推荐"),1)])),_:2},1032,["onClick"]),s(Y,{link:"",type:"danger",size:"small",onClick:l=>function(e){y.confirm("确认删除？").then((()=>{`/admin/coze/bot/delete?id=${e.id}`.get().then((e=>{v.value.searchData(),g.success("删除成功")}))}))}(e)},{default:d((()=>l[10]||(l[10]=[r("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},512),s(X,{modelValue:n(V),"onUpdate:modelValue":l[3]||(l[3]=e=>b(V)?V.value=e:null),title:n(T),confirm:D,"content-height":"350"},{default:d((()=>[p("div",_,[s(J,{modelValue:n(k),"onUpdate:modelValue":l[2]||(l[2]=e=>b(k)?k.value=e:null),ref_key:"formRef",ref:I,saveUrl:"/admin/coze/bot/save",labelWidth:"120"},{default:d((()=>[s(A,{type:"left",title:"基础信息"}),s(B,{label:"是否发布",prop:"isRelease"}),s(G,{prop:"botType",label:"类型",data:n(C)},null,8,["data"]),"dify"==n(k).botType||"fast"==n(k).botType?(t(),f(m,{key:0},[s(K,null,{default:d((()=>[s(F,{label:"AppID",prop:"appId",required:""}),s(F,{label:"AppKey",prop:"apiKey",required:""})])),_:1}),"fast"==n(k).botType?(t(),i(F,{key:0,label:"使用模型",prop:"model",required:""})):c("",!0)],64)):(t(),i(F,{key:1,label:"智能体ID",prop:"botId",required:"",tip:"扣子智能体ID"})),s(F,{label:"名称",prop:"name",required:""}),s(L,{label:"图标",prop:"iconFileUrl",type:"Pic",required:""}),s(M,{label:"会员类型",prop:"userType",url:"dict/list?dictType=vip-leavel",multiple:"","label-field":"dictName","value-field":"id"}),s(E,{label:"分类",prop:"tags",url:"/admin/category/allList?type=2","label-field":"name","value-field":"name"}),s(N,{label:"说明",prop:"description"}),s(K,null,{default:d((()=>[s(S,{label:"会员单日次数",prop:"vipFreeNum",min:-1,tip:"-1免费","tip-position":"right"}),s(S,{label:"消耗的积分量",prop:"deduct",min:0})])),_:1}),s(A,{type:"left",title:"开场白"}),s(W,{modelValue:n(k).onboardingInfo.prologue,"onUpdate:modelValue":l[0]||(l[0]=e=>n(k).onboardingInfo.prologue=e),height:"150",label:"开场白文案"},null,8,["modelValue"]),s(Q,{label:"开场白预置问题"},{default:d((()=>[s(O,{modelValue:n(k).onboardingInfo.suggested_questions,"onUpdate:modelValue":l[1]||(l[1]=e=>n(k).onboardingInfo.suggested_questions=e),labelWidth:"0"},{default:d((({element:e,$index:l})=>[s(H,{placeholder:"输入开场白引导问题",aIndex:l,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,required:"",clearable:""},null,8,["aIndex","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["modelValue","title"])])),_:1},512)}}});"function"==typeof v&&v(h);export{h as default};
