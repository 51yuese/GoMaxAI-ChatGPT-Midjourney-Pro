
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as l,b as a,e as o,o as t,j as n,h as s,g as i,i as r,q as d,t as u,m as p,s as c,al as m,P as f,a2 as b}from"../main-a14f6586.js";const g={style:{padding:"0 20px"}},h=e({__name:"botList",setup(e){const b=l(),h=l(),_=l(),v={id:0,name:"",botId:"",iconFileUrl:"",description:"",isRelease:0,tags:"",onboardingInfo:{prologue:"",suggested_questions:[""]}},y=l(),I=l(),E=l(),V=l(),k=l([{name:"查询",color:"primary",icon:"search",action:"Search"},{name:"新增配置",color:"primary",icon:"edit",action:()=>(I.value="新增配置",y.value=a.cloneObj(v),E.value=!0,Promise.resolve(!0))}]);function q(){return new Promise(((e,l)=>{V.value.validate().then((l=>{l?_.value.save().then((l=>{b.value.searchData(),"/coze/updateBot".post(y.value),e(l)})):e(!1)}))}))}return(e,l)=>{const v=o("ElsInput"),w=o("ElsMenuTool"),C=o("ElsFormQuery"),U=o("ElsColumn"),D=o("ElsColumnImage"),x=o("el-tag"),z=o("ElsColumnBool"),F=o("el-button"),R=o("ElsTable"),j=o("ElsCaption"),P=o("ElsSwitch"),Y=o("ElsUpload"),$=o("ElsSelect"),L=o("ElsTextarea"),M=o("ElsWangEditor"),S=o("els-input"),T=o("ElsList"),W=o("ElsFormItem"),B=o("ElsForm"),H=o("ElsDialog"),O=o("ElsContainer");return t(),n(O,{ref_key:"containerRef",ref:V},{default:s((()=>[i(C,{ref_key:"queryRef",ref:h},{default:s((()=>[i(v,{prop:"name",placeholder:"请输入名称"}),i(w,{data:r(k),text:"",bg:""},null,8,["data"])])),_:1},512),i(R,{url:"/admin/coze/bot/list",ref_key:"tableRef",ref:b},{default:s((()=>[i(U,{prop:"id",label:"ID",sortable:"",width:"100",sortExpress:"desc"}),i(U,{prop:"name",label:"名称",width:"200"}),i(U,{prop:"tags",label:"分类",width:"100"}),i(D,{prop:"iconFileUrl",label:"图标"}),i(U,{prop:"userId",label:"角色",width:"100"},{default:s((({row:e})=>[e.userId?(t(),n(x,{key:1,type:"success"},{default:s((()=>l[5]||(l[5]=[d("用户")]))),_:1})):(t(),n(x,{key:0},{default:s((()=>l[4]||(l[4]=[d("官方")]))),_:1}))])),_:1}),i(U,{prop:"description",label:"说明"}),i(z,{prop:"isRelease",label:"是否发布",width:"100"}),i(U,{prop:"createdAt",label:"创建时间",width:"200",dateFormatter:"YYYY-MM-DD HH:mm:ss"}),i(U,{label:"操作",width:"200"},{default:s((({row:e})=>[i(F,{link:"",type:"primary",size:"small",onClick:l=>function(e){I.value="修改配置",y.value=a.cloneObj(e),y.value.onboardingInfo||(y.value.onboardingInfo={prologue:"",suggested_questions:[""]}),y.value.onboardingInfo.suggested_questions||(y.value.onboardingInfo.suggested_questions=[""]),E.value=!0}(e)},{default:s((()=>l[6]||(l[6]=[d("编辑")]))),_:2},1032,["onClick"]),i(F,{link:"",type:"primary",size:"small",onClick:l=>function(e){`/admin/coze/bot/rec?id=${e.id}&rec=${1==e.publish_flag?0:1}`.get().then((e=>{b.value.loadData(),f.success("操作成功")}))}(e)},{default:s((()=>[d(u(e.publish_flag?"取消推荐":"推荐"),1)])),_:2},1032,["onClick"]),i(F,{link:"",type:"danger",size:"small",onClick:l=>function(e){m.confirm("确认删除？").then((()=>{`/admin/coze/bot/delete?id=${e.id}`.get().then((e=>{b.value.searchData(),f.success("删除成功")}))}))}(e)},{default:s((()=>l[7]||(l[7]=[d("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},512),i(H,{modelValue:r(E),"onUpdate:modelValue":l[3]||(l[3]=e=>c(E)?E.value=e:null),title:r(I),confirm:q,"content-height":"350"},{default:s((()=>[p("div",g,[i(B,{modelValue:r(y),"onUpdate:modelValue":l[2]||(l[2]=e=>c(y)?y.value=e:null),ref_key:"formRef",ref:_,saveUrl:"/admin/coze/bot/save",labelWidth:"120"},{default:s((()=>[i(j,{type:"left",title:"基础信息"}),i(P,{label:"是否发布",prop:"isRelease"}),i(v,{label:"智能体ID",prop:"botId",required:"",tip:"扣子智能体ID"}),i(v,{label:"名称",prop:"name",required:""}),i(Y,{label:"图标",prop:"iconFileUrl",type:"Pic",required:""}),i($,{label:"分类",prop:"tags",url:"/admin/category/allList?type=2","label-field":"name","value-field":"name"}),i(L,{label:"说明",prop:"description"}),i(j,{type:"left",title:"开场白"}),i(M,{modelValue:r(y).onboardingInfo.prologue,"onUpdate:modelValue":l[0]||(l[0]=e=>r(y).onboardingInfo.prologue=e),height:"150",label:"开场白文案"},null,8,["modelValue"]),i(W,{label:"开场白预置问题"},{default:s((()=>[i(T,{modelValue:r(y).onboardingInfo.suggested_questions,"onUpdate:modelValue":l[1]||(l[1]=e=>r(y).onboardingInfo.suggested_questions=e),labelWidth:"0"},{default:s((({element:e,$index:l})=>[i(S,{placeholder:"输入开场白引导问题",aIndex:l,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,required:"",clearable:""},null,8,["aIndex","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["modelValue","title"])])),_:1},512)}}});"function"==typeof b&&b(h);export{h as default};
