
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as l,r as a,G as p,x as t,j as d,o as i,c as r,b as u,f as o,g as y,H as c,K as n,h as s,Q as A,P as h,p as f,k as m,_ as W,q as _}from"../main-043c96ab.js";const b=e=>(f("data-v-33cfdf01"),e=e(),m(),e),C=b((()=>u("div",{style:{"font-size":"15px",color:"#20295A","font-weight":"500","margin-top":"32px"}}," 支付参数设置 ",-1))),g={style:{display:"flex","align-items":"center","margin-top":"16px","margin-bottom":"24px"}},I=b((()=>u("div",{style:{color:"#9FA3B8","font-size":"15px"}},"启用当前支付",-1))),P={style:{"margin-top":"3px","margin-left":"12px"}},x={style:{display:"flex","align-items":"center","margin-top":"30px","margin-bottom":"16px"}},V={key:0},v={key:1},S={style:{"margin-top":"16px"}},U=e({__name:"wechat",setup(e){const f=l(),m=a(0),W=p({payWechatStatus:"",payWeChatMchId:"",payWeChatSecret:"",payWeChatNotifyUrl:"",payWeChatH5Url:"",payWeChatPublicKey:"",payWeChatPrivateKey:"",payWeChatAppId:"",payWeMiniAppId:"",WE_APP_APPID:"",payAliPublicSecret:"",payAliWebAppId:"",payAliWebSecret:"",payAliAppAppId:"",payAliAppSecret:""}),_=a({payWechatStatus:[{required:!0,trigger:"change",message:"请选择当前支付开启状态"}]}),b=a();async function U(){const e=await A.queryConfig({keys:["payWeChatSecret","payWeChatNotifyUrl","payWeChatH5Url","payWeChatAppId","payWeMiniAppId","payWechatStatus","payWeChatMchId","payWeChatPublicKey","payWeChatPrivateKey","WE_APP_APPID","payAliPublicSecret","payAliWebAppId","payAliWebSecret","payAliAppAppId","payAliAppSecret"]});Object.assign(W,e.data)}function K(){var e;null==(e=b.value)||e.validate((async e=>{if(!W.payWeChatAppId&&!W.payWeMiniAppId)return h.error("微信公众号AppId 和 微信小程序AppId 必填一个");if(e){if(0==f.isUserModifyPermissions())return h.error("非超级管理员无权限操作！");try{var l={payWechatStatus:W.payWechatStatus,payWeChatNotifyUrl:W.payWeChatNotifyUrl};0==m.value?(l.payWeChatMchId=W.payWeChatMchId,l.payWeChatSecret=W.payWeChatSecret,l.payWeChatPublicKey=W.payWeChatPublicKey,l.payWeChatPrivateKey=W.payWeChatPrivateKey,l.payWeChatH5Url=W.payWeChatH5Url,l.payWeChatAppId=W.payWeChatAppId,l.payWeMiniAppId=W.payWeMiniAppId,l.WE_APP_APPID=W.WE_APP_APPID):1==m.value&&(l.payAliPublicSecret=W.payAliPublicSecret,l.payAliWebAppId=W.payAliWebAppId,l.payAliWebSecret=W.payAliWebSecret,l.payAliAppAppId=W.payAliAppAppId,l.payAliAppSecret=W.payAliAppSecret),await A.setConfig({settings:(a=l,Object.keys(a).map((e=>({configKey:e,configVal:a[e]}))))}),h.success("变更配置信息成功")}catch(p){}U()}else h.error("请填写完整信息");var a}))}function z(e){m.value=e}return t((()=>{U()})),(e,l)=>{const a=d("el-alert"),p=d("el-switch"),t=d("el-input"),A=d("el-form-item"),h=d("el-col"),f=d("el-row"),U=d("el-form"),M=d("el-button");return i(),r("div",null,[u("div",null,[o(a,{closable:!1,"show-icon":"",title:"官方微信支付参数说明",description:"官方微信支付设置、同时开启多个支付、我们以微信支付优先级为最高、在pc端我们会调用native支付、在微信环境内、我们将调用Jsapi支付、请确认您的微信支付已经申请了支付权限、所有的支付通知地址统一为 https://域名/api/pay/notify 将域名修改为您的域名即可！",type:"warning"})]),u("div",null,[u("div",null,[C,u("div",g,[I,u("div",P,[o(p,{modelValue:W.payWechatStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>W.payWechatStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])])]),u("div",null,[o(U,{ref_key:"formRef",ref:b,rules:_.value,model:W,"label-width":"140px","label-position":"top"},{default:y((()=>[o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付通知地址",prop:"payWeChatNotifyUrl"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeChatNotifyUrl,"onUpdate:modelValue":l[1]||(l[1]=e=>W.payWeChatNotifyUrl=e),placeholder:"请填写支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u("div",x,[u("div",{class:c(0==m.value?"type_title":"def_type_title"),onClick:l[2]||(l[2]=e=>z(0))},"微信支付",2),u("div",{class:c(1==m.value?"type_title":"def_type_title"),onClick:l[3]||(l[3]=e=>z(1))},"支付宝支付",2)]),0==m.value?(i(),r("div",V,[o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信支付商户ID",prop:"payWeChatMchId"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeChatMchId,"onUpdate:modelValue":l[4]||(l[4]=e=>W.payWeChatMchId=e),placeholder:"请填写微信支付商户ID",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信支付商户秘钥",prop:"payWeChatSecret"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeChatSecret,"onUpdate:modelValue":l[5]||(l[5]=e=>W.payWeChatSecret=e),placeholder:"请填写Secret秘钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"公钥地址",prop:"payWeChatPublicKey"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeChatPublicKey,"onUpdate:modelValue":l[6]||(l[6]=e=>W.payWeChatPublicKey=e),type:"textarea",rows:6,placeholder:"请填写支付公钥信息（cert.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"私钥地址",prop:"payWeChatPrivateKey"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeChatPrivateKey,"onUpdate:modelValue":l[7]||(l[7]=e=>W.payWeChatPrivateKey=e),type:"textarea",rows:6,placeholder:"请填写支付私钥地址（key.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"H5支付通知地址",prop:"payWeChatH5Url"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeChatH5Url,"onUpdate:modelValue":l[8]||(l[8]=e=>W.payWeChatH5Url=e),placeholder:"请填写H5支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信公众号AppId",prop:"payWeChatAppId"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeChatAppId,"onUpdate:modelValue":l[9]||(l[9]=e=>W.payWeChatAppId=e),placeholder:"请填写微信公众号AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信小程序AppId",prop:"payWeMiniAppId"},{default:y((()=>[o(t,{size:"large",modelValue:W.payWeMiniAppId,"onUpdate:modelValue":l[10]||(l[10]=e=>W.payWeMiniAppId=e),placeholder:"请填写微信小程序AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信App AppId",prop:"WE_APP_APPID"},{default:y((()=>[o(t,{size:"large",modelValue:W.WE_APP_APPID,"onUpdate:modelValue":l[11]||(l[11]=e=>W.WE_APP_APPID=e),placeholder:"请填写微信App AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])):n("",!0),1==m.value?(i(),r("div",v,[o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝支付公钥",prop:"payAliPublicSecret"},{default:y((()=>[o(t,{size:"large",modelValue:W.payAliPublicSecret,"onUpdate:modelValue":l[12]||(l[12]=e=>W.payAliPublicSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝支付公钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝网页支付应用id",prop:"payAliWebAppId"},{default:y((()=>[o(t,{size:"large",modelValue:W.payAliWebAppId,"onUpdate:modelValue":l[13]||(l[13]=e=>W.payAliWebAppId=e),placeholder:"请填写支付宝网页支付应用id",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝网页支付私钥（PKCS1格式）",prop:"payAliWebSecret"},{default:y((()=>[o(t,{size:"large",modelValue:W.payAliWebSecret,"onUpdate:modelValue":l[14]||(l[14]=e=>W.payAliWebSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝网页支付私钥（PKCS1格式）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝App支付应用id",prop:"payAliAppAppId"},{default:y((()=>[o(t,{size:"large",modelValue:W.payAliAppAppId,"onUpdate:modelValue":l[15]||(l[15]=e=>W.payAliAppAppId=e),placeholder:"请填写支付宝App支付应用id",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝App支付私钥（PKCS1格式）",prop:"payAliAppSecret"},{default:y((()=>[o(t,{size:"large",modelValue:W.payAliAppSecret,"onUpdate:modelValue":l[16]||(l[16]=e=>W.payAliAppSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝App支付私钥（PKCS1格式）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])):n("",!0)])),_:1},8,["rules","model"])])]),u("div",S,[o(M,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:K},{default:y((()=>[s("保存设置")])),_:1})])])}}});"function"==typeof _&&_(U);const K=W(U,[["__scopeId","data-v-33cfdf01"]]);export{K as default};
