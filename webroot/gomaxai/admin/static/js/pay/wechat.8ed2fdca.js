
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as l,r as a,F as p,o as t,l as d,b as i,e as r,f as u,h as o,i as y,H as c,K as n,j as s,c as A,P as h,_ as m,q as W}from"../main-fe71c3b2.js";const f={style:{display:"flex","align-items":"center","margin-top":"16px","margin-bottom":"24px"}},_={style:{"margin-top":"3px","margin-left":"12px"}},b={style:{display:"flex","align-items":"center","margin-top":"30px","margin-bottom":"16px"}},C={key:0},g={key:1},I={style:{"margin-top":"16px"}},P=e({__name:"wechat",setup(e){const m=l(),W=a(0),P=p({payWechatStatus:"",payWeChatMchId:"",payWeChatSecret:"",payWeChatNotifyUrl:"",payWeChatH5Url:"",payWeChatPublicKey:"",payWeChatPrivateKey:"",payWeChatAppId:"",payWeMiniAppId:"",WE_APP_APPID:"",payAliPublicSecret:"",payAliWebAppId:"",payAliWebSecret:"",payAliAppAppId:"",payAliAppSecret:""}),x=a({payWechatStatus:[{required:!0,trigger:"change",message:"请选择当前支付开启状态"}]}),V=a();async function v(){const e=await A.queryConfig({keys:["payWeChatSecret","payWeChatNotifyUrl","payWeChatH5Url","payWeChatAppId","payWeMiniAppId","payWechatStatus","payWeChatMchId","payWeChatPublicKey","payWeChatPrivateKey","WE_APP_APPID","payAliPublicSecret","payAliWebAppId","payAliWebSecret","payAliAppAppId","payAliAppSecret"]});Object.assign(P,e.data)}function S(){var e;null==(e=V.value)||e.validate((async e=>{if(!P.payWeChatAppId&&!P.payWeMiniAppId)return h.error("微信公众号AppId 和 微信小程序AppId 必填一个");if(e){if(0==m.isUserModifyPermissions())return h.error("非超级管理员无权限操作！");try{var l={payWechatStatus:P.payWechatStatus,payWeChatNotifyUrl:P.payWeChatNotifyUrl};0==W.value?(l.payWeChatMchId=P.payWeChatMchId,l.payWeChatSecret=P.payWeChatSecret,l.payWeChatPublicKey=P.payWeChatPublicKey,l.payWeChatPrivateKey=P.payWeChatPrivateKey,l.payWeChatH5Url=P.payWeChatH5Url,l.payWeChatAppId=P.payWeChatAppId,l.payWeMiniAppId=P.payWeMiniAppId,l.WE_APP_APPID=P.WE_APP_APPID):1==W.value&&(l.payAliPublicSecret=P.payAliPublicSecret,l.payAliWebAppId=P.payAliWebAppId,l.payAliWebSecret=P.payAliWebSecret,l.payAliAppAppId=P.payAliAppAppId,l.payAliAppSecret=P.payAliAppSecret),await A.setConfig({settings:(a=l,Object.keys(a).map((e=>({configKey:e,configVal:a[e]}))))}),h.success("变更配置信息成功")}catch(p){}v()}else h.error("请填写完整信息");var a}))}function U(e){W.value=e}return t((()=>{v()})),(e,l)=>{const a=d("el-alert"),p=d("el-switch"),t=d("el-input"),A=d("el-form-item"),h=d("el-col"),m=d("el-row"),v=d("el-form"),K=d("el-button");return i(),r("div",null,[u("div",null,[o(a,{closable:!1,"show-icon":"",title:"官方微信支付参数说明",description:"官方微信支付设置、同时开启多个支付、我们以微信支付优先级为最高、在pc端我们会调用native支付、在微信环境内、我们将调用Jsapi支付、请确认您的微信支付已经申请了支付权限、所有的支付通知地址统一为 https://域名/api/pay/notify 将域名修改为您的域名即可！",type:"warning"})]),u("div",null,[u("div",null,[l[18]||(l[18]=u("div",{style:{"font-size":"15px",color:"#20295A","font-weight":"500","margin-top":"32px"}}," 支付参数设置 ",-1)),u("div",f,[l[17]||(l[17]=u("div",{style:{color:"#9FA3B8","font-size":"15px"}},"启用当前支付",-1)),u("div",_,[o(p,{modelValue:P.payWechatStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>P.payWechatStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])])]),u("div",null,[o(v,{ref_key:"formRef",ref:V,rules:x.value,model:P,"label-width":"140px","label-position":"top"},{default:y((()=>[o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付通知地址",prop:"payWeChatNotifyUrl"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeChatNotifyUrl,"onUpdate:modelValue":l[1]||(l[1]=e=>P.payWeChatNotifyUrl=e),placeholder:"请填写支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u("div",b,[u("div",{class:c(0==W.value?"type_title":"def_type_title"),onClick:l[2]||(l[2]=e=>U(0))},"微信支付",2),u("div",{class:c(1==W.value?"type_title":"def_type_title"),onClick:l[3]||(l[3]=e=>U(1))},"支付宝支付",2)]),0==W.value?(i(),r("div",C,[o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信支付商户ID",prop:"payWeChatMchId"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeChatMchId,"onUpdate:modelValue":l[4]||(l[4]=e=>P.payWeChatMchId=e),placeholder:"请填写微信支付商户ID",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信支付商户秘钥",prop:"payWeChatSecret"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeChatSecret,"onUpdate:modelValue":l[5]||(l[5]=e=>P.payWeChatSecret=e),placeholder:"请填写Secret秘钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"公钥地址",prop:"payWeChatPublicKey"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeChatPublicKey,"onUpdate:modelValue":l[6]||(l[6]=e=>P.payWeChatPublicKey=e),type:"textarea",rows:6,placeholder:"请填写支付公钥信息（cert.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"私钥地址",prop:"payWeChatPrivateKey"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeChatPrivateKey,"onUpdate:modelValue":l[7]||(l[7]=e=>P.payWeChatPrivateKey=e),type:"textarea",rows:6,placeholder:"请填写支付私钥地址（key.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"H5支付通知地址",prop:"payWeChatH5Url"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeChatH5Url,"onUpdate:modelValue":l[8]||(l[8]=e=>P.payWeChatH5Url=e),placeholder:"请填写H5支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信公众号AppId",prop:"payWeChatAppId"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeChatAppId,"onUpdate:modelValue":l[9]||(l[9]=e=>P.payWeChatAppId=e),placeholder:"请填写微信公众号AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信小程序AppId",prop:"payWeMiniAppId"},{default:y((()=>[o(t,{size:"large",modelValue:P.payWeMiniAppId,"onUpdate:modelValue":l[10]||(l[10]=e=>P.payWeMiniAppId=e),placeholder:"请填写微信小程序AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"微信App AppId",prop:"WE_APP_APPID"},{default:y((()=>[o(t,{size:"large",modelValue:P.WE_APP_APPID,"onUpdate:modelValue":l[11]||(l[11]=e=>P.WE_APP_APPID=e),placeholder:"请填写微信App AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])):n("",!0),1==W.value?(i(),r("div",g,[o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝支付公钥",prop:"payAliPublicSecret"},{default:y((()=>[o(t,{size:"large",modelValue:P.payAliPublicSecret,"onUpdate:modelValue":l[12]||(l[12]=e=>P.payAliPublicSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝支付公钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝网页支付应用id",prop:"payAliWebAppId"},{default:y((()=>[o(t,{size:"large",modelValue:P.payAliWebAppId,"onUpdate:modelValue":l[13]||(l[13]=e=>P.payAliWebAppId=e),placeholder:"请填写支付宝网页支付应用id",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝网页支付私钥（PKCS1格式）",prop:"payAliWebSecret"},{default:y((()=>[o(t,{size:"large",modelValue:P.payAliWebSecret,"onUpdate:modelValue":l[14]||(l[14]=e=>P.payAliWebSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝网页支付私钥（PKCS1格式）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝App支付应用id",prop:"payAliAppAppId"},{default:y((()=>[o(t,{size:"large",modelValue:P.payAliAppAppId,"onUpdate:modelValue":l[15]||(l[15]=e=>P.payAliAppAppId=e),placeholder:"请填写支付宝App支付应用id",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(m,null,{default:y((()=>[o(h,{xs:24,md:20,lg:15,xl:8},{default:y((()=>[o(A,{label:"支付宝App支付私钥（PKCS1格式）",prop:"payAliAppSecret"},{default:y((()=>[o(t,{size:"large",modelValue:P.payAliAppSecret,"onUpdate:modelValue":l[16]||(l[16]=e=>P.payAliAppSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝App支付私钥（PKCS1格式）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])):n("",!0)])),_:1},8,["rules","model"])])]),u("div",I,[o(K,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:S},{default:y((()=>l[19]||(l[19]=[s("保存设置")]))),_:1})])])}}});"function"==typeof W&&W(P);const x=m(P,[["__scopeId","data-v-33cfdf01"]]);export{x as default};
