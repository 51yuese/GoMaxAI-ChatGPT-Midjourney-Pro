
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,U as t,C as p,r,V as i,e as a,o as l,j as s,h as o,g as u,i as d,aj as n,k as c,m as f,q as y,ak as b,X as m,ae as g,a1 as F,a2 as V}from"../main-98fa617f.js";const P={style:{"margin-top":"16px"}},T=e({__name:"config",setup(e){const F=t(),V=p({pptOutlinePrice:"",pptOutlineVipFree:"",pptCreatePrice:"",pptCreateVipFree:"",pptThesisPrice:"",pptThesisVipFree:"",pptEditorPrice:"",pptEditorVipFree:"",pptTimeoutMs:5,pptUserType:""}),T=r(!1),_=r();async function h(){const e=await m.queryConfig({keys:["pptOutlinePrice","pptOutlineVipFree","pptTimeoutMs","pptUserType","pptCreatePrice","pptCreateVipFree","pptThesisPrice","pptThesisVipFree","pptEditorPrice","pptEditorVipFree"]});Object.assign(V,e.data),T.value=!0}function v(){var e;null==(e=_.value)||e.validate().then((async e=>{if(e)if(e){if(0==F.isUserModifyPermissions())return g.error("非超级管理员无权限操作！");try{await m.setConfig({settings:(t=V,Object.keys(t).map((e=>({configKey:e,configVal:t[e]}))))}),g.success("变更配置信息成功")}catch(p){}h()}else g.error("请填写完整信息");var t}))}return i((()=>{h()})),(e,t)=>{const p=a("ElsCaption"),r=a("ElsRow"),i=a("ElsInputNumber"),m=a("els-select"),g=a("ElsForm"),F=a("el-button");return l(),s(d(b),{style:{width:"1000px"}},{default:o((()=>[u(g,{modelValue:V,"onUpdate:modelValue":t[0]||(t[0]=e=>V=e),ref_key:"formRef",ref:_,labelWidth:"120",labelPosition:"top",size:"large"},{default:o((()=>[u(p,{type:"left",title:"大纲生成"}),u(r,{gutter:20},{default:o((()=>[u(d(n),{prop:"pptOutlinePrice",label:"单次消耗积分",required:""}),u(d(n),{prop:"pptOutlineVipFree",label:"会员免费次数",required:""})])),_:1}),u(p,{type:"left",title:"PPT生成"}),u(r,{gutter:20},{default:o((()=>[u(d(n),{prop:"pptCreatePrice",label:"单次消耗积分",required:""}),u(d(n),{prop:"pptCreateVipFree",label:"会员免费次数",required:""})])),_:1}),u(p,{type:"left",title:"编辑器"}),u(r,{gutter:20},{default:o((()=>[u(d(n),{prop:"pptEditorPrice",label:"单次消耗积分",required:""}),u(d(n),{prop:"pptEditorVipFree",label:"会员免费次数",required:""})])),_:1}),u(p,{type:"left",title:"其他设置"}),u(r,{gutter:20},{default:o((()=>[u(i,{prop:"pptTimeoutMs",label:"超时时间（分钟）"}),T.value?(l(),s(m,{key:0,label:"会员类型",prop:"pptUserType",clearable:"",url:"dict/list?dictType=vip-leavel",multiple:"","label-field":"dictName","value-field":"id"})):c("",!0)])),_:1})])),_:1},8,["modelValue"]),f("div",P,[u(F,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:v},{default:o((()=>t[1]||(t[1]=[y("保存设置 ")]))),_:1})])])),_:1})}}});"function"==typeof V&&V(T);const _=F(T,[["__scopeId","data-v-31a748ba"]]);export{_ as default};
