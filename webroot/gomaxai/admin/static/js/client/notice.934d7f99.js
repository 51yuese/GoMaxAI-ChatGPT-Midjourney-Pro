
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as t,a as i,F as o,B as n,r as a,o as s,l,b as c,e as r,f as p,h as u,i as d,j as f,c as g,P as m,_ as y,q as x}from"../main-46c178e9.js";/* empty css                     */const v={style:{"margin-top":"16px"}},b={style:{display:"flex","align-items":"center",margin:"16px 0"}},h=e({__name:"notice",setup(e){const y=t(),x=i(),h=o({isAutoOpenNotice:"",noticeInfo:"",noticeTitle:""});async function A(){const e=await g.queryConfig({keys:["noticeInfo","noticeTitle","isAutoOpenNotice"]}),{noticeInfo:t,noticeTitle:i,isAutoOpenNotice:o}=e.data;t&&Object.assign(h,{noticeInfo:t,noticeTitle:i,isAutoOpenNotice:o})}async function I(){if(0==y.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");if(null!=h.noticeInfo){try{await g.setConfig({settings:(e=h,Object.keys(e).map((t=>({configKey:t,configVal:e[t]}))))}),m.success("变更配置信息成功")}catch(t){}var e;A()}else m.error("请填写公告具体信息")}return n((()=>x.settings.app.colorScheme)),a({noticeInfo:[{required:!0,trigger:"blur",message:"请填写公告具体信息"}]}),a(),a("/api/file/upload"),s((()=>{A()})),(e,t)=>{const i=l("el-alert"),o=l("el-input"),n=l("el-switch"),a=l("el-button");return c(),r("div",null,[p("div",v,[u(i,{closable:!1,"show-icon":"",title:"公告设置说明",description:"这里的公告设置是对应用户端的公告页面的、你可以使用MD语法或直接使用Html标签进行发布、您也可以直接粘贴上传图片、作为图床使用、其他地方比如上传商品等地方的图片也可以暂时在此作为临时方案。",type:"warning"})]),p("div",null,[t[2]||(t[2]=p("div",{style:{color:"#20295A","font-size":"15px","margin-top":"24px","margin-bottom":"12px"}}," 公告内容 ",-1)),u(o,{style:{width:"100%",height:"55vh"},type:"textarea",modelValue:h.noticeInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>h.noticeInfo=e),placeholder:"请输入公告内容",clearable:""},null,8,["modelValue"])]),p("div",null,[p("div",b,[t[3]||(t[3]=p("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 自动打开公告 ",-1)),u(n,{modelValue:h.isAutoOpenNotice,"onUpdate:modelValue":t[1]||(t[1]=e=>h.isAutoOpenNotice=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),u(a,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:I},{default:d((()=>t[4]||(t[4]=[f("保存设置 ")]))),_:1})])])}}});"function"==typeof x&&x(h);const A=y(h,[["__scopeId","data-v-1f76abeb"]]);export{A as default};
