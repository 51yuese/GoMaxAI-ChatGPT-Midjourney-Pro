
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,T as a,W as l,ao as t,a7 as n,r as s,ap as u,c as i,w as o,a8 as r,V as c,ad as d,aq as v,e as p,o as f,f as h,m,a0 as g,g as b,h as y,i as _,s as k,$ as w,q as z,t as T,k as S,F as C,J as E,n as j,j as H,a4 as R,a1 as V}from"../main-a14f6586.js";const x={class:"container"},L={key:0,class:"tips"},q={class:"tip"},D={class:"tip"},I={class:"tip"},K={class:"tip"},M=["onClick","onMouseover"],U={class:"info"},A={class:"title"},B={class:"breadcrumb"},F={class:"path"},J=e({name:"Search"}),O=V(e({...J,setup(e){const V=a(),J=l(),O=t(),W=n(),$=s(!1),G=s(""),N=s([]),P=s(-1),Q=s(),X=s(),Y=s([]);function Z(e){return Y.value.push(e)}u((()=>{Y.value=[]}));const ee=i((()=>{let e=[];return e=N.value.filter((e=>{let a=!1;return e.title&&("function"==typeof e.title?e.title().includes(G.value)&&(a=!0):e.title.includes(G.value)&&(a=!0)),e.path.includes(G.value)&&(a=!0),e.breadcrumb.some((e=>{let a=!1;return e&&("function"==typeof e?e().includes(G.value)&&(a=!0):e.includes(G.value)&&(a=!0)),a}))&&(a=!0),a})),e}));function ae(e,a,l,t){e.forEach((e=>{var n,s,u,i,o,r,c;if(!1!==(null==(n=e.meta)?void 0:n.sidebar)){const n=v(t)||[];e.children&&function(e){var a;let l=!0;return(null==(a=e.children)?void 0:a.every((e=>{var a;return!1===(null==(a=e.meta)?void 0:a.sidebar)})))&&(l=!1),l}(e)?(n.push(null==(s=e.meta)?void 0:s.title),ae(e.children,a?[a,e.path].join("/"):e.path,(null==(u=e.meta)?void 0:u.icon)??l,n)):(n.push(null==(i=e.meta)?void 0:i.title),N.value.push({path:a?[a,e.path].join("/"):e.path,icon:(null==(o=e.meta)?void 0:o.icon)??l,title:null==(r=e.meta)?void 0:r.title,link:null==(c=e.meta)?void 0:c.link,breadcrumb:n}))}}))}function le(e,a,l){e.forEach((e=>{var t,n,s,u,i;const o=v(l)||[];e.children&&e.children.length>0?(o.push(null==(t=e.meta)?void 0:t.title),le(e.children,(null==(n=e.meta)?void 0:n.icon)??a,o)):(o.push(null==(s=e.meta)?void 0:s.title),N.value.push({icon:(null==(u=e.meta)?void 0:u.icon)??a,title:null==(i=e.meta)?void 0:i.title,path:e.path,breadcrumb:o}))}))}function te(){ee.value.length&&(P.value-=1,P.value<0&&(P.value=ee.value.length-1),ue())}function ne(){ee.value.length&&(P.value+=1,P.value>ee.value.length-1&&(P.value=0),ue())}function se(){-1!==P.value&&Y.value[P.value].click()}function ue(){let e=0;if(-1!==P.value){e=X.value.scrollTop;const a=Y.value[P.value].offsetTop,l=Y.value[P.value].clientHeight,t=X.value.scrollTop,n=X.value.clientHeight;a+l>t+n?e=a+l-n:a<=t&&(e=a)}X.value.scrollTo({top:e})}return o((()=>$.value),(e=>{e?(document.body.classList.add("hidden"),X.value.scrollTop=0,r("up",te),r("down",ne),r("enter",se),setTimeout((()=>{Q.value.focus()}),500)):(document.body.classList.remove("hidden"),r.unbind("up",te),r.unbind("down",ne),r.unbind("enter",se),setTimeout((()=>{G.value="",P.value=-1}),500))})),o((()=>ee.value),(()=>{P.value=-1,Y.value=[],ue()})),c((()=>{d.on("global-search-toggle",(()=>{$.value=!$.value})),r("alt+s",(e=>{J.settings.navSearch.enable&&J.settings.navSearch.enableHotkeys&&(e.preventDefault(),$.value=!0)})),r("esc",(e=>{J.settings.navSearch.enable&&J.settings.navSearch.enableHotkeys&&(e.preventDefault(),$.value=!1)})),"filesystem"!==J.settings.app.routeBaseOn?O.routes.forEach((e=>{e.children&&ae(e.children)})):W.menus.forEach((e=>{le(e.children)}))})),(e,a)=>{const l=R,t=p("el-icon"),n=p("el-input"),s=p("el-tag");return f(),h("div",{id:"search",class:j({searching:_($)}),onClick:a[3]||(a[3]=e=>_($)&&_(d).emit("global-search-toggle"))},[m("div",x,[m("div",{class:"search-box",onClick:a[2]||(a[2]=g((()=>{}),["stop"]))},[b(n,{ref_key:"searchInputRef",ref:Q,modelValue:_(G),"onUpdate:modelValue":a[0]||(a[0]=e=>k(G)?G.value=e:null),placeholder:"搜索页面，支持标题、URL模糊查询",clearable:"",onKeydown:[a[1]||(a[1]=w((e=>_(d).emit("global-search-toggle")),["esc"])),w(g(te,["prevent"]),["up"]),w(g(ne,["prevent"]),["down"]),w(g(se,["prevent"]),["enter"])]},{prefix:y((()=>[b(t,null,{default:y((()=>[b(l,{name:"ep:search"})])),_:1})])),_:1},8,["modelValue","onKeydown"]),"pc"===_(J).mode?(f(),h("div",L,[m("div",q,[b(s,{type:"info",size:"large"},{default:y((()=>[z(T("mac"===_(J).os?"⌥":"Alt")+" + S ",1)])),_:1}),b(s,{type:"info",size:"large"},{default:y((()=>a[4]||(a[4]=[z(" 唤醒搜索面板 ")]))),_:1})]),m("div",D,[b(s,{type:"info",size:"large"},{default:y((()=>[b(t,null,{default:y((()=>[b(l,{name:"search-up"})])),_:1})])),_:1}),b(s,{type:"info",size:"large"},{default:y((()=>[b(t,null,{default:y((()=>[b(l,{name:"search-down"})])),_:1})])),_:1}),b(s,{type:"info",size:"large"},{default:y((()=>a[5]||(a[5]=[z(" 切换搜索结果 ")]))),_:1})]),m("div",I,[b(s,{type:"info",size:"large"},{default:y((()=>[b(t,null,{default:y((()=>[b(l,{name:"search-enter"})])),_:1})])),_:1}),b(s,{type:"info",size:"large"},{default:y((()=>a[6]||(a[6]=[z(" 访问页面 ")]))),_:1})]),m("div",K,[b(s,{type:"info",size:"large"},{default:y((()=>a[7]||(a[7]=[z(" ESC ")]))),_:1}),b(s,{type:"info",size:"large"},{default:y((()=>a[8]||(a[8]=[z(" 退出 ")]))),_:1})])])):S("",!0)]),m("div",{ref_key:"searchResultRef",ref:X,class:"result"},[(f(!0),h(C,null,E(_(ee),((e,a)=>(f(),h("a",{key:e.path,ref_for:!0,ref:Z,class:j(["item",{actived:a===_(P)}]),onClick:a=>{return l=e.path,void((t=e.link)?window.open(t,"_blank"):V.push(l));var l,t},onMouseover:e=>P.value=a},[b(t,{class:"icon"},{default:y((()=>[e.icon?(f(),H(l,{key:0,name:e.icon},null,8,["name"])):S("",!0)])),_:2},1024),m("div",U,[m("div",A,T(e.title??"[ 无标题 ]"),1),m("div",B,[(f(!0),h(C,null,E(e.breadcrumb,((e,a)=>(f(),h("span",{key:a},[z(T(e??"[ 无标题 ]")+" ",1),b(t,null,{default:y((()=>[b(l,{name:"ep:arrow-right"})])),_:1})])))),128))]),m("div",F,T(e.path),1)])],42,M)))),128))],512)])],2)}}}),[["__scopeId","data-v-7119310d"]]);export{O as default};
