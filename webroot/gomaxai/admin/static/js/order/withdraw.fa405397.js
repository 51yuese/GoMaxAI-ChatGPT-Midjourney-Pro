
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as l,e as a,o as t,f as i,F as s,J as r,j as n,M as o,k as d,m as p,g as u,h as c,Y as m,Z as g,n as h,i as f,ae as y,a4 as x,a1 as v,aa as b,U as w,C as k,V as _,ah as V,s as C,q as F,ai as z,t as S}from"../main-98fa617f.js";import{o as $}from"./order.2cb78a02.js";const j={class:"upload-container"},U={class:"mask"},I={class:"actions"},M=["onClick"],T=["onClick"],Y=["onClick"],A=["onClick"],D={key:0,class:"el-upload__tip"},R={style:{display:"inline-block"}},B=e({name:"ImagesUpload"}),N=v(e({...B,props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:Array,default:()=>[]},max:{type:Number,default:3},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","onSuccess"],setup(e,{emit:v}){const b=e,w=v,k=l({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function _(){k.value.imageViewerVisible=!1}function V(e,l){const a=b.url;"left"===l&&0!==e&&(a[e]=a.splice(e-1,1,a[e])[0]),"right"===l&&e!==a.length-1&&(a[e]=a.splice(e+1,1,a[e])[0]),w("update:url",a)}const C=e=>{const l=e.name.split(".").at(-1),a=b.ext.includes(l),t=e.size/1024/1024<b.size;return a||y.error(`上传图片只支持 ${b.ext.join(" / ")} 格式！`),t||y.error(`上传图片大小不能超过 ${b.size}MB！`),a&&t&&(k.value.progress.preview=URL.createObjectURL(e)),a&&t},F=e=>{k.value.progress.percent=~~e.percent},z=e=>{k.value.progress.preview="",k.value.progress.percent=0,w("onSuccess",e)};return(l,y)=>{const v=a("el-image"),S=x,$=a("el-icon"),B=a("el-progress"),N=a("el-upload"),H=a("el-alert"),O=a("el-image-viewer");return t(),i("div",j,[(t(!0),i(s,null,r(e.url,((l,a)=>(t(),i("div",{key:a,class:"images"},[a<e.max?(t(),n(v,{key:0,src:l,style:o(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):d("",!0),p("div",U,[p("div",I,[p("span",{title:"预览",onClick:e=>function(e){k.value.dialogImageIndex=e,k.value.imageViewerVisible=!0}(a)},[u($,null,{default:c((()=>[u(S,{name:"ep:zoom-in"})])),_:1})],8,M),p("span",{title:"移除",onClick:e=>function(e){const l=b.url;l.splice(e,1),w("update:url",l)}(a)},[u($,null,{default:c((()=>[u(S,{name:"ep:delete"})])),_:1})],8,T),m(p("span",{title:"左移",class:h({disabled:0===a}),onClick:e=>V(a,"left")},[u($,null,{default:c((()=>[u(S,{name:"ep:back"})])),_:1})],10,Y),[[g,e.url.length>1]]),m(p("span",{title:"右移",class:h({disabled:a===e.url.length-1}),onClick:e=>V(a,"right")},[u($,null,{default:c((()=>[u(S,{name:"ep:right"})])),_:1})],10,A),[[g,e.url.length>1]])])])])))),128)),m(u(N,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":C,"on-progress":F,"on-success":z,drag:"",class:"images-upload"},{default:c((()=>[p("div",{class:"image-slot",style:o(`width:${e.width}px;height:${e.height}px;`)},[u($,null,{default:c((()=>[u(S,{name:"ep:plus"})])),_:1})],4),m(p("div",{class:"progress",style:o(`width:${e.width}px;height:${e.height}px;`)},[u(v,{src:f(k).progress.preview,style:o(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),u(B,{type:"circle",width:.8*Math.min(e.width,e.height),percentage:f(k).progress.percent},null,8,["width","percentage"])],4),[[g,f(k).progress.percent]])])),_:1},8,["headers","action","data","name"]),[[g,e.url.length<e.max]]),e.notip?d("",!0):(t(),i("div",D,[p("div",R,[u(H,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"success","show-icon":"",closable:!1},null,8,["title"])])])),f(k).imageViewerVisible?(t(),n(O,{key:1,"url-list":e.url,"initial-index":f(k).dialogImageIndex,teleported:"",onClose:_},null,8,["url-list","initial-index"])):d("",!0)])}}}),[["__scopeId","data-v-8831ea14"]]),H={class:"search_add_card"},O={style:{display:"flex","align-items":"center"}},q={style:{"margin-right":"20px"}},E={style:{"margin-right":"20px"}},L={style:{"margin-left":"10px"}},P={style:{"margin-top":"12px"}},J={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},Q={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)","overflow-y":"scroll","overflow-x":"hidden"}},Z={class:"flex",style:{gap:"10px","flex-wrap":"wrap"}},G={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},K=v(e({__name:"withdraw",setup(e){const o=b(!1),g=b(0),h=l([]),v=w(),j=k({page:1,size:20,settleStatus:null,timeType:0,startTime:"",endTime:""}),U=l([]),I={0:"未结算",1:"等待打款",2:"打款完成",3:"打款失败"};function M(e){j.startTime=e[0],j.endTime=e[1]}function T(){j.startTime="",j.endTime="",U.value=[]}function Y(){j.page=1,j.settleStatus=null,T(),A()}async function A(){const{data:e}=await $.withdrawPage(j);h.value=e.rows,g.value=e.count}_((()=>{A()}));const D={1:"等待打款",2:"打款完成",3:"打款失败"},R=l(),B=b(!1),K=k({ids:[],payRemark:"",status:null,appendix:[]});function W(e){K.appendix.push(e.data)}return(e,l)=>{const b=a("el-option"),w=a("el-select"),k=a("el-date-picker"),_=a("el-button"),X=a("el-icon"),ee=a("el-table-column"),le=a("el-link"),ae=a("el-table"),te=a("el-pagination"),ie=a("el-row"),se=x,re=a("el-form-item"),ne=a("el-input"),oe=a("el-image"),de=N,pe=a("el-form"),ue=a("el-dialog"),ce=V("loading");return t(),i("div",null,[p("div",H,[p("div",O,[p("div",q,[l[11]||(l[11]=p("div",{class:"condition_name"}," 是否结算 ",-1)),u(w,{modelValue:f(j).settleStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>f(j).settleStatus=e),placeholder:"是否结算",clearable:"",style:{width:"100px"}},{default:c((()=>[(t(),i(s,null,r(I,((e,l)=>u(b,{key:l,label:e,value:l},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),p("div",E,[l[12]||(l[12]=p("div",{class:"condition_name"}," 时间类型 ",-1)),u(w,{modelValue:f(j).timeType,"onUpdate:modelValue":l[1]||(l[1]=e=>f(j).timeType=e),placeholder:"是否结算",clearable:"",style:{width:"100px"}},{default:c((()=>[u(b,{label:"创建时间",value:0}),u(b,{label:"打款时间",value:1})])),_:1},8,["modelValue"])]),p("div",null,[l[13]||(l[13]=p("div",{class:"condition_name"}," 创建时间 ",-1)),u(k,{modelValue:f(U),"onUpdate:modelValue":l[2]||(l[2]=e=>C(U)?U.value=e:null),type:"datetimerange","start-placeholder":"账单开始时间","end-placeholder":"账单开始时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],onChange:M,onClear:T},null,8,["modelValue","default-time"])]),p("div",L,[u(_,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",height:"32px",background:"#EFF6FF",color:"#60A5FA","border-radius":"8px","margin-top":"25px"},onClick:A},{default:c((()=>l[14]||(l[14]=[F(" 查询 ")]))),_:1})]),p("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:Y},[u(X,{color:"#3B82F6",size:"20"},{default:c((()=>[u(f(z))])),_:1})])])]),p("div",P,[m((t(),n(ae,{border:"",data:f(h),height:"66vh",width:"100%","show-overflow-tooltip":""},{default:c((()=>[u(ee,{prop:"applyId",label:"申请人ID"}),u(ee,{prop:"applyUserName",label:"申请人用户名"}),u(ee,{prop:"cardBank",label:"提现银行"}),u(ee,{prop:"cardNum",label:"提现卡号"}),u(ee,{prop:"cardHolder",label:"提现持卡人"}),u(ee,{prop:"remark",label:"提现备注"}),u(ee,{prop:"totalMondy",label:"提现金额"}),u(ee,{prop:"settleStatus",label:"结算状态"},{default:c((({row:e})=>[F(S(I[e.settleStatus]),1)])),_:1}),f(v).isSuperAdmin?(t(),n(ee,{key:0,label:"操作"},{default:c((({row:e})=>[u(le,{type:"primary",underline:!1,onClick:l=>function(e){B.value=!0,K.ids=[e.id],K.payRemark="",K.appendix=[],R.value=e}(e)},{default:c((()=>l[15]||(l[15]=[F(" 打款 ")]))),_:2},1032,["onClick"])])),_:1})):d("",!0)])),_:1},8,["data"])),[[ce,f(o)]]),u(ie,{class:"flex justify-end mt-5 pb-5"},{default:c((()=>[u(te,{"current-page":f(j).page,"onUpdate:currentPage":l[3]||(l[3]=e=>f(j).page=e),"page-size":f(j).size,"onUpdate:pageSize":l[4]||(l[4]=e=>f(j).size=e),class:"mr-5","page-sizes":[20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:f(g),onSizeChange:A,onCurrentChange:A},null,8,["current-page","page-size","total"])])),_:1})]),u(ue,{modelValue:f(B),"onUpdate:modelValue":l[10]||(l[10]=e=>C(B)?B.value=e:null),"show-close":!1,width:"500px"},{header:c((()=>[p("div",J,[l[16]||(l[16]=p("div",null," 处理申请 ",-1)),p("div",{style:{cursor:"pointer"},onClick:l[5]||(l[5]=e=>B.value=!1)},[u(X,null,{default:c((()=>[u(se,{name:"close"})])),_:1})])])])),default:c((()=>[p("div",Q,[u(pe,{model:f(K),"label-width":"120px"},{default:c((()=>[u(re,{label:"用户申请备注："},{default:c((()=>[F(S(f(R).remark||"无"),1)])),_:1}),u(re,{label:"提现状态：",prop:"status",rules:[{required:!0,message:"请选择提现状态",trigger:"blur"}]},{default:c((()=>[u(w,{modelValue:f(K).status,"onUpdate:modelValue":l[6]||(l[6]=e=>f(K).status=e)},{default:c((()=>[(t(),i(s,null,r(D,((e,l)=>u(b,{key:l,label:e,value:l},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),u(re,{label:"备注："},{default:c((()=>[u(ne,{modelValue:f(K).payRemark,"onUpdate:modelValue":l[7]||(l[7]=e=>f(K).payRemark=e),type:"textarea",placeholder:"备注"},null,8,["modelValue"])])),_:1}),u(re,{label:"打款凭证：",prop:"appendix"},{default:c((()=>[p("div",Z,[(t(!0),i(s,null,r(f(K).appendix,((e,l)=>(t(),n(oe,{key:l,style:{width:"150px",height:"150px"},src:e,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":f(K).appendix,"initial-index":l,fit:"cover"},null,8,["src","preview-src-list","initial-index"])))),128)),u(de,{action:"/api/file/upload",notip:!0,onOnSuccess:W})])])),_:1})])),_:1},8,["model"])]),p("div",G,[u(_,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:l[8]||(l[8]=e=>B.value=!1)},{default:c((()=>l[17]||(l[17]=[F(" 取消 ")]))),_:1}),u(_,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:l[9]||(l[9]=l=>async function(e){await(null==e?void 0:e.validate((async e=>{e&&(await $.withdrawApproval(K),y.success("操作成功"))})))}(e.formRef))},{default:c((()=>l[18]||(l[18]=[F(" 确定 ")]))),_:1})])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-3c41a90d"]]);export{K as default};
