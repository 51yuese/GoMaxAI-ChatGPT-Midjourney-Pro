
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as l,b as a,e as o,o as t,j as n,h as i,g as r,i as s,q as u,s as d,m as c,al as m,P as p,a2 as f}from"../main-6fd6ef79.js";const v={style:{padding:"10px"}},h=e({__name:"list",setup(e){const f=l(),h=l(),b=l(),_={id:0,name:"",code:"",config:[],value:[],isRelease:0,desc:""},g=l(),y=l(),E=l(),V=l(),k=l([{name:"查询",color:"primary",icon:"search",action:"Search"},{name:"新增配置",color:"primary",icon:"edit",action:()=>(y.value="新增配置",g.value=a.cloneObj(_),E.value=!0,Promise.resolve(!0))}]);function w(){return new Promise(((e,l)=>{V.value.validate().then((l=>{l?b.value.save().then((l=>{f.value.searchData(),e(l)})):e(!1)}))}))}const C=l(!1);return(e,l)=>{const _=o("ElsInput"),D=o("ElsMenuTool"),R=o("ElsFormQuery"),x=o("ElsColumn"),U=o("ElsColumnBool"),j=o("el-button"),q=o("ElsTable"),F=o("ElsSwitch"),Y=o("ElsTextarea"),I=o("ElButton"),M=o("ElsFormItem"),P=o("ElsForm"),S=o("ElsDialog"),T=o("ElsDynamicDesignerView"),z=o("ElsContainer");return t(),n(z,{ref_key:"containerRef",ref:V},{default:i((()=>[r(R,{ref_key:"queryRef",ref:h},{default:i((()=>[r(_,{prop:"code",placeholder:"请输入配置编码"}),r(D,{data:s(k),text:"",bg:""},null,8,["data"])])),_:1},512),r(q,{url:"/admin/cm/config/list",ref_key:"tableRef",ref:f},{default:i((()=>[r(x,{prop:"id",label:"ID",sortable:"",width:"100"}),r(x,{prop:"name",label:"名称",width:"200"}),r(x,{prop:"code",label:"配置编码",width:"200"}),r(x,{prop:"desc",label:"说明"}),r(U,{prop:"isRelease",label:"是否启用",width:"100"}),r(x,{prop:"createdAt",label:"创建时间",width:"200",dateFormatter:"YYYY-MM-DD HH:mm:ss"}),r(x,{label:"操作",width:"200"},{default:i((({row:e})=>[r(j,{link:"",type:"primary",size:"small",onClick:l=>function(e){y.value="修改配置",g.value=a.cloneObj(e),E.value=!0}(e)},{default:i((()=>l[6]||(l[6]=[u("编辑")]))),_:2},1032,["onClick"]),r(j,{link:"",type:"danger",size:"small",onClick:l=>function(e){m.confirm("确认删除？").then((()=>{`/admin/cm/config/delete?id=${e.id}`.get().then((e=>{f.value.searchData(),p.success("删除成功")}))}))}(e)},{default:i((()=>l[7]||(l[7]=[u("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},512),r(S,{modelValue:s(E),"onUpdate:modelValue":l[2]||(l[2]=e=>d(E)?E.value=e:null),title:s(y),confirm:w,"content-height":"350"},{default:i((()=>[r(P,{modelValue:s(g),"onUpdate:modelValue":l[1]||(l[1]=e=>d(g)?g.value=e:null),ref_key:"formRef",ref:b,saveUrl:"/admin/cm/config/save"},{default:i((()=>[r(F,{label:"是否发布",prop:"isRelease"}),r(_,{label:"名称",prop:"name",required:""}),r(_,{label:"配置编码",prop:"code",required:""}),r(Y,{label:"说明",prop:"desc"}),r(M,{label:"配置"},{default:i((()=>[r(I,{onClick:l[0]||(l[0]=e=>C.value=!s(C))},{default:i((()=>l[8]||(l[8]=[u("配置")]))),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue","title"]),r(S,{modelValue:s(C),"onUpdate:modelValue":l[5]||(l[5]=e=>d(C)?C.value=e:null),title:"配置",width:"90%",top:"10px"},{default:i((()=>[c("div",v,[r(T,{height:"80vh",label:"配置",prop:"config",modelValue:s(g).config,"onUpdate:modelValue":l[3]||(l[3]=e=>s(g).config=e),onSave:l[4]||(l[4]=()=>C.value=!s(C))},null,8,["modelValue"])])])),_:1},8,["modelValue"])])),_:1},512)}}});"function"==typeof f&&f(h);export{h as default};
