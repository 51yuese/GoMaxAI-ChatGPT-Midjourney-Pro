
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as l,b as a,e as o,o as t,j as n,h as i,g as u,i as r,q as d,s,m as c,Y as m,al as p,P as f,Z as v,a2 as h}from"../main-98fa617f.js";const b={style:{padding:"10px"}},g=e({__name:"list",setup(e){const h=l(),g=l(),V=l(),_={id:0,name:"",code:"",config:[],value:{},templateValue:{},isRelease:0,desc:""},y=l(),E=l(),k=l(),w=l(),C=l([{name:"查询",color:"primary",icon:"search",action:"Search"},{name:"新增配置",color:"primary",icon:"edit",action:()=>(E.value="新增配置",y.value=a.cloneObj(_),k.value=!0,Promise.resolve(!0))}]);function D(){return new Promise(((e,l)=>{w.value.validate().then((l=>{l?V.value.save().then((l=>{h.value.searchData(),e(l)})):e(!1)}))}))}const R=l(!1);return(e,l)=>{const _=o("ElsInput"),U=o("ElsMenuTool"),x=o("ElsFormQuery"),Y=o("ElsColumn"),j=o("ElsColumnBool"),q=o("el-button"),F=o("ElsTable"),B=o("ElsSwitch"),I=o("ElsTextarea"),M=o("ElButton"),P=o("ElsFormItem"),S=o("ElsForm"),T=o("ElsDialog"),z=o("ElsDynamicRender"),H=o("ElsDynamicDesignerView"),O=o("ElsContainer");return t(),n(O,{ref_key:"containerRef",ref:w},{default:i((()=>[u(x,{ref_key:"queryRef",ref:g},{default:i((()=>[u(_,{prop:"code",placeholder:"请输入配置编码"}),u(U,{data:r(C),text:"",bg:""},null,8,["data"])])),_:1},512),u(F,{url:"/admin/cm/config/list",ref_key:"tableRef",ref:h},{default:i((()=>[u(Y,{prop:"id",label:"ID",sortable:"",width:"100"}),u(Y,{prop:"name",label:"名称",width:"200"}),u(Y,{prop:"code",label:"配置编码",width:"200"}),u(Y,{prop:"desc",label:"说明"}),u(j,{prop:"isRelease",label:"是否启用",width:"100"}),u(Y,{prop:"createdAt",label:"创建时间",width:"200",dateFormatter:"YYYY-MM-DD HH:mm:ss"}),u(Y,{label:"操作",width:"200"},{default:i((({row:e})=>[u(q,{link:"",type:"primary",size:"small",onClick:l=>function(e){E.value="修改配置",y.value=a.cloneObj(e),k.value=!0}(e)},{default:i((()=>l[7]||(l[7]=[d("编辑")]))),_:2},1032,["onClick"]),u(q,{link:"",type:"danger",size:"small",onClick:l=>function(e){p.confirm("确认删除？").then((()=>{`/admin/cm/config/delete?id=${e.id}`.get().then((e=>{h.value.searchData(),f.success("删除成功")}))}))}(e)},{default:i((()=>l[8]||(l[8]=[d("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},512),u(T,{modelValue:r(k),"onUpdate:modelValue":l[2]||(l[2]=e=>s(k)?k.value=e:null),title:r(E),confirm:D,"content-height":"350"},{default:i((()=>[u(S,{modelValue:r(y),"onUpdate:modelValue":l[1]||(l[1]=e=>s(y)?y.value=e:null),ref_key:"formRef",ref:V,saveUrl:"/admin/cm/config/save"},{default:i((()=>[u(B,{label:"是否发布",prop:"isRelease"}),u(_,{label:"名称",prop:"name",required:""}),u(_,{label:"配置编码",prop:"code",required:""}),u(I,{label:"说明",prop:"desc"}),u(P,{label:"配置"},{default:i((()=>[u(M,{onClick:l[0]||(l[0]=e=>R.value=!r(R))},{default:i((()=>l[9]||(l[9]=[d("配置")]))),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue","title"]),u(T,{modelValue:r(R),"onUpdate:modelValue":l[6]||(l[6]=e=>s(R)?R.value=e:null),title:"配置",width:"90%",top:"10px"},{default:i((()=>[c("div",b,[m(c("div",null,[u(z,{modelValue:r(y).templateValue,"onUpdate:modelValue":l[3]||(l[3]=e=>r(y).templateValue=e),defaultValueConfig:{Number:0,Bool:!1},config:r(y).config},null,8,["modelValue","config"])],512),[[v,!1]]),u(H,{height:"80vh",label:"配置",prop:"config",modelValue:r(y).config,"onUpdate:modelValue":l[4]||(l[4]=e=>r(y).config=e),onSave:l[5]||(l[5]=()=>R.value=!r(R))},null,8,["modelValue"])])])),_:1},8,["modelValue"])])),_:1},512)}}});"function"==typeof h&&h(g);export{g as default};
