
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,r as l,b as a,e as o,o as n,j as r,h as t,g as i,i as s,q as d,s as u,b4 as c,P as m,a1 as p}from"../main-527fe521.js";const f=e({__name:"list",setup(e){const p=l(),f=l(),b=l(),v={id:0,name:"",code:"",config:[],value:[],isRelease:0,desc:""},y=l(),h=l(),g=l(),_=l(),k=l([{name:"查询",color:"primary",icon:"search",action:"Search"},{name:"新增配置",color:"primary",icon:"edit",action:()=>(h.value="新增配置",y.value=a.cloneObj(v),g.value=!0,Promise.resolve(!0))}]);function E(){return new Promise(((e,l)=>{_.value.validate().then((l=>{l?b.value.save().then((l=>{p.value.searchData(),e(l)})):e(!1)}))}))}return(e,l)=>{const v=o("ElsInput"),w=o("ElsMenuTool"),C=o("ElsFormQuery"),V=o("ElsColumn"),D=o("ElsColumnBool"),R=o("el-button"),q=o("ElsTable"),T=o("ElsSwitch"),j=o("ElsTextarea"),F=o("ElsDynamicDesigner"),U=o("ElsForm"),Y=o("ElsDialog"),x=o("ElsContainer");return n(),r(x,{ref_key:"containerRef",ref:_},{default:t((()=>[i(C,{ref_key:"queryRef",ref:f},{default:t((()=>[i(v,{prop:"code",placeholder:"请输入配置编码"}),i(w,{data:s(k),text:"",bg:""},null,8,["data"])])),_:1},512),i(q,{url:"/admin/cm/config/list",ref_key:"tableRef",ref:p},{default:t((()=>[i(V,{prop:"id",label:"ID",sortable:"",width:"100"}),i(V,{prop:"name",label:"名称",width:"200"}),i(V,{prop:"code",label:"配置编码",width:"200"}),i(V,{prop:"desc",label:"说明"}),i(D,{prop:"isRelease",label:"是否启用",width:"100"}),i(V,{prop:"createdAt",label:"创建时间",width:"200",dateFormatter:"YYYY-MM-DD HH:mm:ss"}),i(V,{label:"操作",width:"200"},{default:t((({row:e})=>[i(R,{link:"",type:"primary",size:"small",onClick:l=>function(e){h.value="修改配置",y.value=a.cloneObj(e),g.value=!0}(e)},{default:t((()=>l[3]||(l[3]=[d("编辑")]))),_:2},1032,["onClick"]),i(R,{link:"",type:"danger",size:"small",onClick:l=>function(e){c.confirm("确认删除？").then((()=>{`/admin/cm/config/delete?id=${e.id}`.get().then((e=>{p.value.searchData(),m.success("删除成功")}))}))}(e)},{default:t((()=>l[4]||(l[4]=[d("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},512),i(Y,{modelValue:s(g),"onUpdate:modelValue":l[2]||(l[2]=e=>u(g)?g.value=e:null),title:s(h),confirm:E},{default:t((()=>[i(U,{modelValue:s(y),"onUpdate:modelValue":l[1]||(l[1]=e=>u(y)?y.value=e:null),ref_key:"formRef",ref:b,saveUrl:"/admin/cm/config/save"},{default:t((()=>[i(T,{label:"是否发布",prop:"isRelease"}),i(v,{label:"名称",prop:"name",required:""}),i(v,{label:"配置编码",prop:"code",required:""}),i(j,{label:"说明",prop:"desc"}),i(F,{label:"配置",prop:"config",modelValue:s(y).config,"onUpdate:modelValue":l[0]||(l[0]=e=>s(y).config=e),visibleFields:["keyName","keyCode","keyCode","dataType","componentType","required","oper","config"]},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue","title"])])),_:1},512)}}});"function"==typeof p&&p(f);export{f as default};
