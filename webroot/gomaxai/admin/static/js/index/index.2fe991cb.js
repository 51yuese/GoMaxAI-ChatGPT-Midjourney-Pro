
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{at as e,au as n,r as l,av as t,i as u,c as a,w as i,aa as o,aw as r,V as c,ax as s}from"../main-98fa617f.js";function v(l){return!!e()&&(n(l),!0)}function d(e){return"function"==typeof e?e():u(e)}const f="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const m=Object.prototype.toString,p=()=>{};const y=f?window:void 0,w=f?window.document:void 0,b=f?window.navigator:void 0;function g(e){var n;const l=d(e);return null!=(n=null==l?void 0:l.$el)?n:l}function F(...e){let n,l,t,u;if("string"==typeof e[0]||Array.isArray(e[0])?([l,t,u]=e,n=y):[n,l,t,u]=e,!n)return p;Array.isArray(l)||(l=[l]),Array.isArray(t)||(t=[t]);const a=[],o=()=>{a.forEach((e=>e())),a.length=0},r=i((()=>[g(n),d(u)]),(([e,n])=>{if(o(),!e)return;const u=(i=n,"[object Object]"===m.call(i)?{...n}:n);var i;a.push(...l.flatMap((n=>t.map((l=>((e,n,l,t)=>(e.addEventListener(n,l,t),()=>e.removeEventListener(n,l,t)))(e,n,l,u))))))}),{immediate:!0,flush:"post"}),c=()=>{r(),o()};return v(c),c}function S(e){const n=function(){const e=l(!1),n=r();return n&&c((()=>{e.value=!0}),n),e}();return a((()=>(n.value,Boolean(e()))))}function E(e,n={}){const{controls:l=!1,navigator:t=b}=n,u=S((()=>t&&"permissions"in t)),a=o(),i="string"==typeof e?{name:e}:e,r=o(),c=()=>{var e,n;r.value=null!=(n=null==(e=a.value)?void 0:e.state)?n:"prompt"};F(a,"change",c);const v=function(e){let n;function l(){return n||(n=e()),n}return l.reset=async()=>{const e=n;n=void 0,e&&await e},l}((async()=>{if(u.value){if(!a.value)try{a.value=await t.permissions.query(i)}catch(e){a.value=void 0}finally{c()}return l?s(a.value):void 0}}));return v(),l?{state:r,isSupported:u,query:v}:r}function h(e={}){const{navigator:n=b,read:u=!1,source:i,copiedDuring:o=1500,legacy:r=!1}=e,c=S((()=>n&&"clipboard"in n)),s=E("clipboard-read"),m=E("clipboard-write"),p=a((()=>c.value||r)),y=l(""),w=l(!1),g=function(e,n,u={}){const{immediate:a=!0}=u,i=l(!1);let o=null;function r(){o&&(clearTimeout(o),o=null)}function c(){i.value=!1,r()}function s(...l){r(),i.value=!0,o=setTimeout((()=>{i.value=!1,o=null,e(...l)}),d(n))}return a&&(i.value=!0,f&&s()),v(c),{isPending:t(i),start:s,stop:c}}((()=>w.value=!1),o);function h(e){return"granted"===e||"prompt"===e}return p.value&&u&&F(["copy","cut"],(function(){var e,l,t;c.value&&h(s.value)?n.clipboard.readText().then((e=>{y.value=e})):y.value=null!=(t=null==(l=null==(e=null==document?void 0:document.getSelection)?void 0:e.call(document))?void 0:l.toString())?t:""})),{isSupported:p,text:y,copied:w,copy:async function(e=d(i)){p.value&&null!=e&&(c.value&&h(m.value)?await n.clipboard.writeText(e):function(e){const n=document.createElement("textarea");n.value=null!=e?e:"",n.style.position="absolute",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),n.remove()}(e),y.value=e,w.value=!0,g.start())}}}const k=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function x(e,n={}){const{document:t=w,autoExit:u=!1}=n,i=a((()=>{var n;return null!=(n=g(e))?n:null==t?void 0:t.querySelector("html")})),o=l(!1),r=a((()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find((e=>t&&e in t||i.value&&e in i.value)))),c=a((()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find((e=>t&&e in t||i.value&&e in i.value)))),s=a((()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find((e=>t&&e in t||i.value&&e in i.value)))),d=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find((e=>t&&e in t)),f=S((()=>i.value&&t&&void 0!==r.value&&void 0!==c.value&&void 0!==s.value)),m=()=>{if(s.value){if(t&&null!=t[s.value])return t[s.value];{const e=i.value;if(null!=(null==e?void 0:e[s.value]))return Boolean(e[s.value])}}return!1};async function p(){if(f.value&&o.value){if(c.value)if(null!=(null==t?void 0:t[c.value]))await t[c.value]();else{const e=i.value;null!=(null==e?void 0:e[c.value])&&await e[c.value]()}o.value=!1}}async function y(){if(!f.value||o.value)return;m()&&await p();const e=i.value;r.value&&null!=(null==e?void 0:e[r.value])&&(await e[r.value](),o.value=!0)}const b=()=>{const e=m();(!e||e&&d&&(null==t?void 0:t[d])===i.value)&&(o.value=e)};return F(t,k,b,!1),F((()=>g(i)),k,b,!1),u&&v(p),{isSupported:f,isFullscreen:o,enter:y,exit:p,toggle:async function(){await(o.value?p():y())}}}export{x as a,h as u};
