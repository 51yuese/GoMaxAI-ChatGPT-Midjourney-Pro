
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as l,F as s,r as a,B as t,o as i,l as o,b as u,e as r,f as c,h as d,i as n,g as p,j as m,c as f,P as g,q as y}from"../main-fe71c3b2.js";const O={style:{"margin-top":"32px","margin-bottom":"24px"}},x={style:{"margin-top":"16px"}},b=e({__name:"ali",setup(e){const y=l(),b=s({aliOssStatus:"",aliOssAccessKeyId:"",aliOssAccessKeySecret:"",aliOssRegion:"",aliOssBucket:""}),_=a();async function h(){const e=await f.queryConfig({keys:["aliOssAccessKeySecret","aliOssRegion","aliOssBucket","aliOssAccessKeyId","aliOssStatus"]});Object.assign(b,e.data)}function V(){var e;null==(e=_.value)||e.validate((async e=>{if(e){if(0==y.isUserModifyPermissions())return g.error("非超级管理员无权限操作！");try{await f.setConfig({settings:(l=b,Object.keys(l).map((e=>({configKey:e,configVal:l[e]}))))}),g.success("变更配置信息成功")}catch(s){}h()}else g.error("请填写完整信息");var l}))}const S=t((()=>[{required:1===Number(b.aliOssStatus),message:"开启配置后请填写此项",trigger:"change"}]));return i((()=>{h()})),(e,l)=>{const s=o("el-alert"),a=o("el-switch"),t=o("el-form-item"),i=o("el-col"),f=o("el-row"),g=o("el-input"),y=o("el-form"),h=o("el-button");return u(),r("div",null,[c("div",O,[d(s,{closable:!1,"show-icon":"",title:"阿里云COS参数说明",description:"阿里云的对象存储oss服务、前往阿里云申请oss服务 https://oss.console.aliyun.com/ 、如果同时开启多个存储服务、腾讯云高于阿里云优先级！",type:"warning"})]),c("div",null,[d(y,{ref_key:"formRef",ref:_,model:b,"label-width":"120px","label-position":"top"},{default:n((()=>[d(f,null,{default:n((()=>[d(i,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{prop:"aliOssStatus"},{default:n((()=>[l[5]||(l[5]=c("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 启用状态 ",-1)),d(a,{modelValue:b.aliOssStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>b.aliOssStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(i,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"accessKeyId",prop:"aliOssAccessKeyId",rules:p(S)},{default:n((()=>[d(g,{size:"large",modelValue:b.aliOssAccessKeyId,"onUpdate:modelValue":l[1]||(l[1]=e=>b.aliOssAccessKeyId=e),placeholder:"请填写SecretId",clearable:""},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(i,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"keySecret",prop:"aliOssAccessKeySecret",rules:p(S)},{default:n((()=>[d(g,{size:"large",modelValue:b.aliOssAccessKeySecret,"onUpdate:modelValue":l[2]||(l[2]=e=>b.aliOssAccessKeySecret=e),placeholder:"请填写SecretKey",clearable:""},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(i,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"存储桶名称",prop:"aliOssBucket",rules:p(S)},{default:n((()=>[d(g,{size:"large",modelValue:b.aliOssBucket,"onUpdate:modelValue":l[3]||(l[3]=e=>b.aliOssBucket=e),placeholder:"请填写存储桶名称",clearable:""},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(i,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"所属地域",prop:"aliOssRegion",rules:p(S)},{default:n((()=>[d(g,{size:"large",modelValue:b.aliOssRegion,"onUpdate:modelValue":l[4]||(l[4]=e=>b.aliOssRegion=e),placeholder:"请填写所属地域(oss-cn-shanghai)",clearable:""},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})])),_:1},8,["model"])]),c("div",x,[d(h,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:V},{default:n((()=>l[6]||(l[6]=[m("保存设置")]))),_:1})])])}}});"function"==typeof y&&y(b);export{b as default};
