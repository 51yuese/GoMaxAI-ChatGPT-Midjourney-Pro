
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as l,G as t,r as a,C as o,x as r,j as s,o as i,c as u,b as c,f as d,g as n,e as p,h,Q as v,P as m,q as f}from"../main-7fe883cc.js";const g={style:{"margin-top":"32px","margin-bottom":"24px"}},y=c("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 启用状态 ",-1),x={style:{"margin-top":"16px"}},b=e({__name:"chevereto",setup(e){const f=l(),b=t({cheveretoStatus:"",cheveretoUploadPath:"",cheveretoKey:""}),_=a();async function V(){const e=await v.queryConfig({keys:["cheveretoKey","cheveretoUploadPath","cheveretoStatus"]});Object.assign(b,e.data)}function U(){var e;null==(e=_.value)||e.validate((async e=>{if(e){if(0==f.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");try{await v.setConfig({settings:(l=b,Object.keys(l).map((e=>({configKey:e,configVal:l[e]}))))}),m.success("变更配置信息成功")}catch(t){}V()}else m.error("请填写完整信息");var l}))}const K=o((()=>[{required:1===Number(b.cheveretoStatus),message:"开启配置后请填写此项",trigger:"change"}]));return r((()=>{V()})),(e,l)=>{const t=s("el-alert"),a=s("el-switch"),o=s("el-form-item"),r=s("el-col"),v=s("el-row"),m=s("el-input"),f=s("el-form"),V=s("el-button");return i(),u("div",null,[c("div",g,[d(t,{closable:!1,"show-icon":"",title:"chevereto图床配置说明",description:"chevereto图床官方文档 https://v4-docs.chevereto.com/developer/api/api-v1.html 同时开启多个存储会以菜单排序优先级开启使用",type:"warning"})]),c("div",null,[d(f,{ref_key:"formRef",ref:_,model:b,"label-width":"100px","label-position":"top"},{default:n((()=>[d(v,null,{default:n((()=>[d(r,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(o,{prop:"cheveretoStatus"},{default:n((()=>[y,d(a,{modelValue:b.cheveretoStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>b.cheveretoStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(v,null,{default:n((()=>[d(r,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(o,{label:"上传地址",prop:"cheveretoUploadPath",rules:p(K)},{default:n((()=>[d(m,{size:"large",modelValue:b.cheveretoUploadPath,"onUpdate:modelValue":l[1]||(l[1]=e=>b.cheveretoUploadPath=e),placeholder:"请填写您的图床上传地址",clearable:""},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1}),d(v,null,{default:n((()=>[d(r,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(o,{label:"ApiKey",prop:"cheveretoKey",rules:p(K)},{default:n((()=>[d(m,{size:"large",modelValue:b.cheveretoKey,"onUpdate:modelValue":l[2]||(l[2]=e=>b.cheveretoKey=e),placeholder:"请填写ApiKey",clearable:""},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})])),_:1},8,["model"])]),c("div",x,[d(V,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:U},{default:n((()=>[h("保存设置")])),_:1})])])}}});"function"==typeof f&&f(b);export{b as default};
