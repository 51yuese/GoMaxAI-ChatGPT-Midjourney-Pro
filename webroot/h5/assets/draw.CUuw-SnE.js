var t,e;import{_ as s,O as i,P as o,aC as r,a as d,b as n,w as a,d as h,K as c,ah as l,i as u,aG as p,aH as y}from"./index-5HZnFt5a.js";const k=s({name:"uv-sticky",mixins:[i,o,{props:{offsetTop:{type:[String,Number],default:0},customNavHeight:{type:[String,Number],default:44},disabled:{type:Boolean,default:!1},bgColor:{type:String,default:"transparent"},zIndex:{type:[String,Number],default:""},index:{type:[String,Number],default:""},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.sticky}}],data:()=>({cssSticky:!1,stickyTop:0,elId:"",left:0,width:"auto",height:"auto",fixed:!1}),computed:{style(){const t={};return this.disabled?t.position="static":this.cssSticky?(t.position="sticky",t.zIndex=this.uZindex,t.top=this.$uv.addUnit(this.stickyTop)):t.height=this.fixed?this.height+"px":"auto",t.backgroundColor=this.bgColor,this.$uv.deepMerge(t,this.$uv.addStyle(this.customStyle))},stickyContent(){const t={};return this.cssSticky||(t.position=this.fixed?"fixed":"static",t.top=this.stickyTop+"px",t.left=this.left+"px",t.width="auto"==this.width?"auto":this.width+"px",t.zIndex=this.uZindex),t},uZindex(){return this.zIndex?this.zIndex:970}},created(){this.elId=this.$uv.guid()},mounted(){this.init()},methods:{init(){this.getStickyTop(),this.checkSupportCssSticky(),this.cssSticky||!this.disabled&&this.initObserveContent()},initObserveContent(){this.$uvGetRect("#"+this.elId).then((t=>{this.height=t.height,this.left=t.left,this.width=t.width,this.$nextTick((()=>{this.observeContent()}))}))},observeContent(){this.disconnectObserver("contentObserver");const t=r({thresholds:[.95,.98,1]});t.relativeToViewport({top:-this.stickyTop}),t.observe(`#${this.elId}`,(t=>{this.setFixed(t.boundingClientRect.top)})),this.contentObserver=t},setFixed(t){const e=t<=this.stickyTop;this.fixed=e},disconnectObserver(t){const e=this[t];e&&e.disconnect()},getStickyTop(){this.stickyTop=this.$uv.getPx(this.offsetTop)+this.$uv.getPx(this.customNavHeight)},async checkSupportCssSticky(){this.checkCssStickyForH5()&&(this.cssSticky=!0),"android"===this.$uv.os()&&Number(this.$uv.sys().system)>8&&(this.cssSticky=!0),"ios"===this.$uv.os()&&(this.cssSticky=!0)},checkComputedStyle(){},checkCssStickyForH5(){const t=["","-webkit-","-ms-","-moz-","-o-"],e=t.length,s=document.createElement("div");for(let i=0;i<e;i++)if(s.style.position=t[i]+"sticky",""!==s.style.position)return!0;return!1}},unmounted(){this.disconnectObserver("contentObserver")}},[["render",function(t,e,s,i,o,r){const p=u;return d(),n(p,{class:"uv-sticky",id:o.elId,style:c([r.style])},{default:a((()=>[h(p,{style:c([r.stickyContent]),class:"uv-sticky__content"},{default:a((()=>[l(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["id","style"])}],["__scopeId","data-v-18793e9c"]]),w={getWorkFlowPage:()=>p("/api/midjourney/workflow-page",{page:1,size:99,status:1,keyword:"",typeUrl:"workflow-page"}),getWorkFlowUsedPage:()=>p("/api/midjourney/workflow-used-page",{page:1,size:99,status:1,keyword:"",typeUrl:"workflow-used-page"}),getWorkFlowFavorite:()=>p("/api/midjourney/workflow-favorite",{page:1,size:99,status:1,keyword:"",typeUrl:"workflow-favorite"}),getWorkFlowForm:t=>p("/api/midjourney/workflow-form",{workflowId:t,versionId:""}),getWorkFlowModel:t=>p("/api/midjourney/workflow-model-detail",{ids:t}),getWorkFlowDetail:t=>p("/api/midjourney/workflow-detail",{id:t}),workFlowTaskSubmit:t=>y("/api/midjourney/workflow-task-submit",t),getDrawList:t=>p("/api/midjourney/drawList",t),getDetailByIds:t=>p("/api/midjourney/getDetailByIds",{jobIds:t})};export{k as _,w as d};
