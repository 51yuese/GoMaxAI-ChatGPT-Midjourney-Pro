import{_ as a,R as e,u as l,S as t,r as s,a as i,b as o,w as n,d as u,L as c,e as r,t as d,g as m,az as f,bm as p,bl as v,a1 as _,aA as y,j as h,i as g,Q as k,q as b,s as x,o as V,B as w,F as C,m as U,p as j,ab as F,a7 as S,a0 as $,a9 as I,c as P,a4 as R,G as A,K as E,aK as M,a6 as z,U as D,X as K,Y as L,a2 as Y,aW as q,k as B,a5 as G}from"./index-5HZnFt5a.js";import{_ as H}from"./is-vip.81A82wTA.js";import{a as Q}from"./index.BIXFsUHK.js";import{_ as W}from"./video-play.Msq2Y7fy.js";import{_ as X}from"./trash.CZ3Tbgel.js";import{_ as J}from"./upload-img-icon.C_3Nycwj.js";import{m as N}from"./digital-man.CbE7ZGLY.js";const O=a({__name:"human",props:{modelValue:{},modelModifiers:{}},emits:e(["change"],["update:modelValue"]),setup(a,{expose:e,emit:b}){const{t:x}=l(),V=t(a,"modelValue"),w=b,C=s(!1),U=()=>{C.value=!0},j=()=>{C.value=!1},F=async()=>{const a=f("myVideo");C.value?a.pause():a.play()},S=s(""),$=()=>{V.value="",S.value="",w("change","")},I=async()=>{const{code:a,data:e}=await p();200===a&&await P(e)},P=async a=>{const{code:e,data:l}=await v(a);200===e&&(V.value=_(l),S.value=await R(a.duration),w("change",l))},R=async a=>{const e=Math.floor(a/60),l=Math.floor(a%60);return`${String(e).padStart(2,"0")}:${String(l).padStart(2,"0")}`};return e({uploadFile:P}),(a,e)=>{const l=y,t=h,s=g,f=k;return i(),o(s,{class:"form-upload-human-card"},{default:n((()=>[V.value?(i(),o(s,{key:0,class:"upload-video-box"},{default:n((()=>[u(s,{class:"video-box"},{default:n((()=>[u(l,{class:"video",id:"myVideo",src:V.value,controls:!1,"show-center-play-btn":!1,onPlay:U,onPause:j},null,8,["src"]),u(s,{class:"video-play",onClick:F},{default:n((()=>[C.value?c("",!0):(i(),o(t,{key:0,class:"icon",src:W}))])),_:1})])),_:1}),u(s,{class:"del-icon",onClick:$},{default:n((()=>[u(t,{class:"icon",src:X})])),_:1}),u(s,{class:"time"},{default:n((()=>[r(d(S.value),1)])),_:1})])),_:1})):(i(),o(s,{key:1,class:"upload-img",onClick:I},{default:n((()=>[u(t,{src:J}),u(s,{class:"tip-list"},{default:n((()=>[u(f,null,{default:n((()=>[r(d(m(x)("human.creating.upload.text")),1)])),_:1}),u(f,null,{default:n((()=>[r(d(m(x)("human.guide.container.text2")),1)])),_:1})])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-955381af"]]),T=a({__name:"creating",setup(a){const{t:e}=l(),t=b(),f=s(null),p=s({name:"",videoUrl:"",description:""}),v=x((()=>!!t.token)),y=x((()=>{const a=S("userInfo")||{};return 1===a.lifetimeVip||a.vipExpire&&new Date(a.vipExpire)>new Date})),W=x((()=>T.value&&T.value.isVipFree&&y.value)),X=x((()=>T.value&&T.value.remainCount&&y.value)),J=a=>{p.value.videoUrl=_(a),M("human-file-path")},T=s({}),Z=async()=>{if(!(await z(T.value,ea.value)))return;const a=p.value;if($(a.name))return void D({title:e("human.creating.form.toast1"),icon:"none"});if($(a.videoUrl))return void D({title:e("human.creating.form.toast2"),icon:"none"});K({title:e("human.creating.loading"),mask:!0});const{code:l}=await N.sceneCreated(a);200===l&&(L(),D({title:e("app.http.success"),icon:"success"}),Y({url:"/pagesA/my/task/index?tab=4&type=2"}))},aa=()=>{Y({url:"/pagesA/digital-man/protocol"})},ea=s([]);return V((()=>{(async()=>{const{data:a}=await N.getVideoCloneFree();T.value=I(a)})(),(async()=>{var a;await F();const e=S("human-file-path");$(e)||null==(a=f.value)||a.uploadFile(e)})()})),w((()=>{(async()=>{const{data:a}=await P.getVipLeavel();ea.value=R(a)})()})),(a,l)=>{const t=C("ai-bindphone"),s=C("ai-privacy"),_=U(j("uv-icon"),A),y=g,b=k,x=q,V=h,w=B;return i(),o(y,{class:"digital-man-page container-bg"},{default:n((()=>[u(t,{ref:"aiPrivacyRef"},null,512),u(s,{ref:"aiPrivacyRef"},null,512),u(Q,{bg:!1},{left:n((()=>[u(_,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:l[0]||(l[0]=e=>a.$tools.back())})])),center:n((()=>[u(y,{class:"header-title"},{default:n((()=>[r(d(m(e)("human.creating.title")),1)])),_:1})])),_:1}),u(y,{class:"main-container",style:E(`height: ${a.$tools.height().contentHeight}px;`)},{default:n((()=>[u(y,{class:"container"},{default:n((()=>[u(y,{class:"form-item"},{default:n((()=>[u(y,{class:"title-box"},{default:n((()=>[u(b,{class:"title"},{default:n((()=>[r(d(m(e)("human.creating.form.title1")),1)])),_:1})])),_:1}),u(y,{class:"form-li inputs"},{default:n((()=>[u(x,{class:"input",type:"text",placeholder:m(e)("human.creating.form.placeholder"),modelValue:p.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>p.value.name=a)},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),u(y,{class:"form-item"},{default:n((()=>[u(y,{class:"title-box"},{default:n((()=>[u(b,{class:"title"},{default:n((()=>[r(d(m(e)("human.creating.form.title2")),1)])),_:1})])),_:1}),u(y,{class:"form-li upload"},{default:n((()=>[u(y,{class:"content"},{default:n((()=>[u(O,{ref_key:"uploadRef",ref:f,modelValue:p.value.videoUrl,"onUpdate:modelValue":l[2]||(l[2]=a=>p.value.videoUrl=a),onChange:J},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),u(y,{class:"footer"},{default:n((()=>[u(y,{class:"tip-box"},{default:n((()=>[u(b,null,{default:n((()=>[r(d(m(e)("app.ai.tips.text")),1)])),_:1}),u(b,{class:"link",onClick:aa},{default:n((()=>[r(d(m(e)("app.ai.tips.href")),1)])),_:1})])),_:1}),v.value?(i(),o(w,{key:0,class:"btn-primary-creat",onClick:Z},{default:n((()=>[T.value.isVipUsed?(i(),o(V,{key:0,class:"vip-icon",src:H})):c("",!0),u(b,null,{default:n((()=>[r(d(m(e)("my.feedback.form.btn")),1)])),_:1}),W.value?(i(),o(b,{key:1},{default:n((()=>[r("("+d(m(e)("human.guide.btn.text"))+")",1)])),_:1})):X.value?(i(),o(b,{key:2},{default:n((()=>[r("("+d(m(e)("video.index.model.free"))+d(T.value.remainCount)+d(m(e)("video.index.model.time"))+")",1)])),_:1})):T.value?(i(),o(b,{key:3},{default:n((()=>[r("("+d(T.value.useIntegrate)+d(m(e)("my.vip.score"))+")",1)])),_:1})):c("",!0)])),_:1})):(i(),o(w,{key:1,class:"btn-primary-creat",onClick:m(G)},{default:n((()=>[r(d(m(e)("my.login")),1)])),_:1},8,["onClick"]))])),_:1})])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-2f0c88e5"]]);export{T as default};
