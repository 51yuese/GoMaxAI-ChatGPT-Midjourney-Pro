import{_ as a,u as e,r as l,m as s,G as c,p as t,a as o,b as n,w as u,d,e as r,t as i,T as v,g as p,L as f,j as _,i as m,s as h,aw as k,M as b,ax as x,h as y,a0 as C,U as j,aX as g,k as w,Q as U}from"./index-5HZnFt5a.js";import{_ as T}from"./new.BGSq1aH5.js";import{_ as I}from"./dump.dPDEymx_.js";import{a as L}from"./index.BIXFsUHK.js";import{_ as P,a as R,b as V}from"./my-item.AXCVt8MA.js";import{_ as z,a as O,b as Q,c as S,d as Y,e as $}from"./addChat.DRTE-l9I.js";import{_ as F}from"./uni-icons.mAW8qLNS.js";import{_ as G}from"./air.BsGE5UBU.js";const K=a({__name:"header",props:{data:{type:Object,default:()=>({})}},emits:["create","clear"],setup(a,{emit:h}){const{t:k}=e(),b=h,x=l(!1),y=()=>{x.value=!x.value},C=()=>{b("create"),x.value=!1},j=()=>{b("clear"),x.value=!1};return(e,l)=>{const h=s(t("uv-icon"),c),b=_,g=m;return o(),n(L,{height:55,bg:!1},{left:u((()=>[d(g,{class:"back"},{default:u((()=>[d(h,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:l[0]||(l[0]=a=>e.$tools.back())}),d(g,{class:"nav-info"},{default:u((()=>{var e;return[d(b,{src:null==(e=a.data)?void 0:e.iconFileUrl},null,8,["src"]),d(g,{class:"info"},{default:u((()=>[d(g,{class:"name uv-line-1"},{default:u((()=>{var e;return[r(i(null==(e=a.data)?void 0:e.name),1)]})),_:1}),d(g,{class:"desc uv-line-1"},{default:u((()=>{var e;return[r(i(null==(e=a.data)?void 0:e.description),1)]})),_:1})])),_:1})]})),_:1})])),_:1})])),right:u((()=>[d(g,{class:"icons"},{default:u((()=>[d(g,{onClick:v(y,["stop","prevent"])},{default:u((()=>[d(h,{name:"more-dot-fill",size:"32rpx",color:"#000000"})])),_:1})])),_:1}),x.value?(o(),n(g,{key:0,class:"operate"},{default:u((()=>[d(g,{class:"item",onClick:C},{default:u((()=>[d(g,{class:"action"},{default:u((()=>[r(i(p(k)("chat.header.create")),1)])),_:1}),d(b,{src:T})])),_:1}),d(g,{class:"item",onClick:j},{default:u((()=>[d(g,{class:"action"},{default:u((()=>[r(i(p(k)("chat.header.clear")),1)])),_:1}),d(b,{src:I})])),_:1})])),_:1})):f("",!0)])),_:1})}}},[["__scopeId","data-v-882494bf"]]),M=a({__name:"chat-input",props:{data:{type:Object,default:()=>({})}},emits:["send","clear","cancel","create"],setup(a,{expose:s,emit:c}){const t=a,{t:v}=e(),T=c,I=h((()=>{var a,e;return null==(e=null==(a=t.data.config)?void 0:a.modelInfo)?void 0:e.canUpload})),L=l(!1),K=async()=>{L.value=!L.value},M=async()=>{ea.value=await y.upload(),K().then()},N=l(!1),X=()=>{N.value=!N.value},q=l(0),A=({touches:a})=>{const e=a[0].clientY;q.value=e||0},B=l(!1),D=({touches:a})=>{const e=a[0].clientY,l=q.value-e>=16;B.value=l,E.value.state(l)},E=l(null),H=l(!1),J=()=>{H.value=!0,B.value=!1,E.value.start()},W=()=>{Z(),E.value.stop()},Z=()=>{q.value=0,H.value=!1},aa=a=>{ea.value&&(a=ea.value+" "+a),T("send",a),la.value="",ea.value=""},ea=l(""),la=l(""),sa=()=>{let a=la.value;ea.value&&(a=ea.value+" "+a),C(a)?j({title:v("chat.index.input.placeholder"),icon:"none"}):(T("send",a),la.value="",ea.value="")},ca=()=>{T("cancel")};let ta=()=>{T("create"),K()};const oa=()=>{T("clear"),K()},na=l(!1);return s({setLoading:a=>{na.value=a}}),(a,e)=>{const l=_,s=m,c=g,t=w,h=U;return o(),n(s,{class:"chat-input-box"},{default:u((()=>[k(d(s,{class:"container"},{default:u((()=>[N.value?(o(),n(s,{key:0,class:"speech-icon keyboard",onClick:X},{default:u((()=>[d(l,{src:P})])),_:1})):(o(),n(s,{key:1,class:"speech-icon",onClick:X},{default:u((()=>[d(l,{src:z})])),_:1})),N.value?(o(),n(s,{key:2,class:"textarea-box text",onLongpress:J,onTouchstartPassive:A,onTouchend:W,onTouchmovePassive:D},{default:u((()=>[r(i(p(v)("chat.index.input.hold")),1)])),_:1})):(o(),n(s,{key:3,class:"textarea-box"},{default:u((()=>[d(c,{modelValue:la.value,"onUpdate:modelValue":e[0]||(e[0]=a=>la.value=a),placeholder:p(v)("chat.index.input.placeholder"),disabled:na.value,maxlength:-1,"auto-height":"",adjustPosition:!1},null,8,["modelValue","placeholder","disabled"])])),_:1})),d(s,{class:"btn-box"},{default:u((()=>[L.value?(o(),n(l,{key:0,src:O,class:"add-icon",onClick:K})):(o(),n(l,{key:1,src:Q,class:"add-icon",onClick:K})),na.value?(o(),n(t,{key:2,class:"btn-send pause",onClick:ca},{default:u((()=>[d(l,{src:F,class:"pause"})])),_:1})):(o(),n(t,{key:3,class:b(["btn-send",la.value?"":"btn-disabled"]),onClick:sa},{default:u((()=>[d(l,{src:G,class:"air"})])),_:1},8,["class"]))])),_:1})])),_:1},512),[[x,!H.value]]),H.value?(o(),n(s,{key:0,class:"recording-box"},{default:u((()=>[B.value?(o(),n(s,{key:0,class:"tip-box cancel"},{default:u((()=>[r(i(p(v)("chat.index.input.cancel")),1)])),_:1})):(o(),n(s,{key:1,class:"tip-box"},{default:u((()=>[r(i(p(v)("chat.index.input.upCancel")),1)])),_:1})),d(s,{class:b(["hold-box",B.value?"is-cancel":""])},{default:u((()=>[d(l,{src:R}),d(l,{src:R}),d(l,{src:R}),d(l,{src:R}),d(l,{src:R}),d(l,{src:R}),d(l,{src:R})])),_:1},8,["class"])])),_:1})):f("",!0),d(s,{class:b(["dropdown-box",L.value&&!na.value?"is-dropdown":""])},{default:u((()=>[I.value?(o(),n(s,{key:0,class:"dropdown-card",onClick:M},{default:u((()=>[d(l,{src:S,class:"icon"}),d(h,null,{default:u((()=>[r(i(p(v)("chat.index.input.fileUpload")),1)])),_:1})])),_:1})):f("",!0),d(s,{class:"dropdown-card",onClick:oa},{default:u((()=>[d(l,{src:Y,class:"icon"}),d(h,null,{default:u((()=>[r(i(p(v)("chat.index.input.clearRecord")),1)])),_:1})])),_:1}),d(s,{class:"dropdown-card",onClick:p(ta)},{default:u((()=>[d(l,{src:$,class:"icon"}),d(h,null,{default:u((()=>[r(i(p(v)("chat.header.create")),1)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["class"]),d(V,{ref_key:"atsRef",ref:E,onSend:aa,onStop:Z},null,512)])),_:1})}}},[["__scopeId","data-v-6f58c48b"]]);export{M as c,K as p};
