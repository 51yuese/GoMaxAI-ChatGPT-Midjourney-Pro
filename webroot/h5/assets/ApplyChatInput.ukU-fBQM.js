import{_ as a,r as e,o as s,m as t,p as o,a as l,b as n,w as u,d as c,M as r,e as d,L as i,g as p,U as f,ab as m,ay as v,h as y,j as _,i as b,k as g,Q as h}from"./index-5HZnFt5a.js";import{_ as C}from"./uv-textarea.CFQj21ZG.js";import{_ as k,a as j,b as w,c as x,d as S,e as I}from"./addChat.DRTE-l9I.js";import{_ as A}from"./uni-icons.mAW8qLNS.js";import{_ as P}from"./air.BsGE5UBU.js";import{d as T}from"./dialog.CErO1ANM.js";import{E as O}from"./MyChatItem.CWl-ZwNN.js";import{a as U}from"./apps.NDkBLVtm.js";const B=a({__name:"ApplyChatInput",props:{count:{type:Number,default:0},group:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},inputStatus:{type:Boolean,default:!1},showClear:{type:Boolean,default:!0},blurTo:{type:Boolean,default:!1},from:{type:String,default:""},groupKey:{type:String,default:""},currentConversation:{type:Object,default:()=>({})}},emits:["change","input","height","clear","cancel"],setup(a,{emit:B}){const K=e(!1),G=B,R=a;s((()=>{}));let V=()=>{O.emit("inputCreateGroup"),z()};const H=e(""),M=e(!1),N=e("");function Q(){let a=H.value;N.value&&(a=N.value+" "+a),a?(G("input",a),H.value="",N.value="",F()):f({title:"请输入你的问题",icon:"none"})}function z(){M.value=!M.value,m((()=>{G("height")}))}async function E(){v({title:"提示",content:`确定清空该${"APPS_CHAT_GROUP"===R.groupKey?"智能体":"应用"}对话吗？`,confirmColor:"#10A37F",confirmText:"确定",cancelText:"取消",success:async a=>{var e,s;a.confirm&&("APPS_CHAT_GROUP"===R.groupKey?await U.clear({conversationId:null==(e=R.currentConversation)?void 0:e.conversationId}):await T.clear({groupId:R.group.id,type:(null==(s=R.group)?void 0:s.modelName)?"gpts":"chat"}),M.value=!1,G("clear"))}})}const F=()=>{K.value=!1};async function L(){N.value=await y.upload(),z()}const $=()=>{G("cancel")};return(e,s)=>{const f=_,m=t(o("uv-textarea"),C),v=b,y=g,T=h;return l(),n(v,{class:"apply-chat-input"},{default:u((()=>[c(v,{class:"input-view"},{default:u((()=>[c(f,{src:k,class:"speech-icon"}),c(v,{class:"input-box"},{default:u((()=>[c(m,{placeholder:"请输入你的问题",border:"surround",modelValue:H.value,"onUpdate:modelValue":s[0]||(s[0]=a=>H.value=a),focus:!a.blurTo&&"dialog"!==a.from,placeholderStyle:"color: #767676; font-size: 28rpx;",customStyle:{background:"#fff",borderRadius:N.value?"0 0 24rpx 24rpx":"0",boxShadow:"none",border:"none",height:"100%"},height:"46rpx",disabledColor:"#ffffff",disabled:R.inputStatus,safeAreaInsetBottom:"",adjustPosition:!1},null,8,["modelValue","focus","customStyle","disabled"])])),_:1}),M.value?(l(),n(f,{key:0,src:j,class:"add-icon",onClick:z})):(l(),n(f,{key:1,src:w,class:"add-icon",onClick:z})),R.inputStatus?(l(),n(y,{key:2,class:"btn-send pause",onClick:$},{default:u((()=>[c(f,{src:A,class:"pause"})])),_:1})):(l(),n(y,{key:3,class:r(["btn-send",H.value?"":"btn-disabled"]),onClick:Q},{default:u((()=>[c(f,{src:P,class:"air"})])),_:1},8,["class"]))])),_:1}),c(v,{class:r(["dropdown-box",M.value&&!R.inputStatus?"is-dropdown":""])},{default:u((()=>{var e,s;return[(null==(s=null==(e=R.config)?void 0:e.modelInfo)?void 0:s.canUpload)?(l(),n(v,{key:0,class:"dropdown-card",onClick:L},{default:u((()=>[c(f,{src:x,class:"icon"}),c(T,null,{default:u((()=>[d("文件上传")])),_:1})])),_:1})):i("",!0),a.showClear?(l(),n(v,{key:1,class:"dropdown-card",onClick:E},{default:u((()=>[c(f,{src:S,class:"icon"}),c(T,null,{default:u((()=>[d("清除记录")])),_:1})])),_:1})):i("",!0),c(v,{class:"dropdown-card",onClick:p(V)},{default:u((()=>[c(f,{src:I,class:"icon"}),c(T,null,{default:u((()=>[d("新建对话")])),_:1})])),_:1},8,["onClick"])]})),_:1},8,["class"]),M.value&&!R.inputStatus?(l(),n(v,{key:0,class:"tips"},{default:u((()=>[d("内容由AI生成，仅供参考")])),_:1})):i("",!0)])),_:1})}}},[["__scopeId","data-v-e0fbc681"]]);export{B as A};
