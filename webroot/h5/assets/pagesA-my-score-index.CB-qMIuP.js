import{_ as e,q as a,l as s,u as l,r as t,C as n,s as r,a8 as c,F as o,m as i,p as u,b as d,w as f,G as y,n as p,i as m,W as v,a as g,d as k,e as b,t as x,g as z,H as j,I as D,J as L,x as T,U as _,a5 as I,Q as w,j as U,V as A,M as X,Y as E}from"./index-5HZnFt5a.js";import{a as H}from"./index.BIXFsUHK.js";import{p as q}from"./package.Coykl0sX.js";const F=e({__name:"index",setup(e){const F=a();s();const{t:h}=l(),G=t([]),P=t({}),V=t({});n((()=>{!async function(){const{data:e}=await q.packageV4({type:1});G.value=e,e.length>0&&(P.value=e[0])}()}));const B=r((()=>{var e;return!!(null==(e=F.userInfo)?void 0:e.id)}));async function C(){const{data:e}=await T.sign();_({title:h("my.score.sign.toast1")+`🎉  \n  🎁 ${h("my.score.sign.toast2")}${e}${h("my.score.sign.toast3")}`,icon:"success"})}const M=t(null);c((()=>{null!==M.value&&(clearInterval(M.value),M.value=null)}));const W=t(),R=t("");async function Z(){var e;if(!(null==(e=F.userInfo)?void 0:e.openId))return void _({title:h("my.vip.bind.wechat"),icon:"error"});const a={goodsId:P.value.id,payType:"jsapi",userId:F.userInfo.id},{code:s,data:l}=await q.buy(a);console.log("data",l),200===s&&200===l.status&&(V.value=l,WeixinJSBridge.invoke("getBrandWCPayRequest",l,(function(e){"get_brand_wcpay_request:ok"===e.err_msg?(_({title:h("my.vip.wechat.payment.success"),icon:"none"}),M.value=setInterval((()=>{q.query({orderId:V.value.orderId}).then((e=>{1===e.data.status&&(E(),_({title:h("my.vip.payment.success"),icon:"success"}),clearInterval(M.value),M.value=null,F.getUserInfo())}))}),1e3),F.getUserInfo()):"get_brand_wcpay_request:cancel"==e.err_msg?_({title:h("my.vip.payment.cancel"),icon:"none"}):_({title:h("my.vip.payment.fail"),icon:"none"})})))}function S(){B.value?Z():I()}return(e,a)=>{const s=o("ai-bindphone"),l=o("ai-privacy"),t=i(u("uv-icon"),y),n=w,r=i(u("uv-avatar"),p),c=m,T=U,_=A,E=i(u("uv-popup"),v);return g(),d(c,{class:"page-score-vip"},{default:f((()=>[k(s,{ref:"aiPrivacyRef"},null,512),k(l,{ref:"aiPrivacyRef"},null,512),k(H,null,{left:f((()=>[k(t,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:a[0]||(a[0]=a=>e.$tools.back())})])),center:f((()=>[k(n,null,{default:f((()=>[b(x(z(h)("my.score.title")),1)])),_:1})])),_:1}),k(c,{class:"container"},{default:f((()=>[k(c,{class:"items-center",style:{position:"relative","margin-top":"30rpx","align-items":"flex-start"}},{default:f((()=>[B.value?(g(),d(r,{key:0,src:z(F).userInfo.avatar,size:"110rpx"},null,8,["src"])):(g(),d(r,{key:1,src:z(F).userInfo.avatar,size:"110rpx",onClick:z(I)},null,8,["src","onClick"])),k(c,{style:{"margin-left":"36rpx",width:"100%"}},{default:f((()=>[k(c,{class:"flex-between"},{default:f((()=>[B.value?(g(),d(c,{key:0,class:"info-nickname"},{default:f((()=>[b(x(z(F).userInfo.nickname),1)])),_:1})):(g(),d(c,{key:1,class:"info-nickname",onClick:z(I)},{default:f((()=>[b(x(z(h)("my.login")),1)])),_:1},8,["onClick"])),k(t,{name:"info-circle",label:z(h)("my.score.description"),color:"#767676","label-color":"#767676"},null,8,["label"])])),_:1}),k(c,{class:"info-phone"},{default:f((()=>[b(x(z(h)("my.score.remaining"))+"："+x(z(F).userInfo.score||0),1)])),_:1})])),_:1})])),_:1})])),_:1}),k(c,{class:"bg-card"},{default:f((()=>[k(c,{class:"container"},{default:f((()=>[k(T,{src:"/h5/assets/score-sign-D86cXeuy.png",style:{width:"100%"},mode:"widthFix",onClick:C}),k(_,{"scroll-x":"true"},{default:f((()=>[k(c,{style:{padding:"30rpx 0",display:"inline-flex"}},{default:f((()=>[(g(!0),j(L,null,D(G.value,((e,a)=>(g(),d(c,{class:X(["score-card",P.value.id===e.id?"card_active":""]),onClick:a=>{return s=e,void(P.value=s);var s}},{default:f((()=>[k(c,{class:"card-score"},{default:f((()=>[k(T,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA8CAMAAAAAPFkHAAAC+lBMVEUAAAD354/vrz37+cPtsUr676r3wz7/65f58rH79bXzs0b/1UDysEb59cD1wD3Wgi3397/XgDD69bv55oj698DckDX69rz676X3wT/67Z/pqTXZhS7676P49bz47J3387P3xjz397/XgCj/97f6+ML68az676T67Z/1zGPzulL4yD3qqzbhmjLekTHVgS36+ML56pb56I345YL8zkHxvTninTPWgS769r/68av57ZrutTnWhC766pD44nnyrkjjnzPbjC/79r358Knck0D698D0tEf5xUP8zELVgC369r369Lj65ID0tEb7zzz37J3kpTX58rn57KP11mzWgC3333zkpTXVgCr2xlP52l/69br1xFL698D54Xf533D53m353Wn522H69r353Wb53GP1wlH69LP54HT64W364m/68rD65HL68a353GX69LX576X56I7654v55IH543v75XX632j42Vz69bf57qL64Gr56pX42Frxu0768ar57Jv565j56pL65oj55H775XT643D2yVnek0H57J353IH64G3zv1D65ZX753fwuE3utUzim0T+1kD900DWgS358Kf57p/55YX55YT64nD52GT41WPtv2D30Fzrr0roqUn1wzvbjjn6+ML63oX23YT54YH54HH53HD41G/42Wr30GD3y1violPkoUfmpEb2vEX7yUL5yjzxuznknjPZiC7256bx04vxz4LtxXn31HTyz2z63mbyxmDqtVb2yFXtuVTssUrzsUfpq0fjn0X4wUT8zkLflz/70D7vtjjinjjqrjf04Z/24ZP644352n7uyX7643fpum/3zGD40l/mrFrywVjtu1b511TmrlL4zkvjpEvgmkr1t0b5xUPhnEHssTfpqTXelDLglzHcjjD48LT46qL03Jb024v01Hz52Xb113L01Wzwx2f1z2bqt133zFjwvFf52Fb30VPqsVDmrk/yxk751E3qrUrnpjXmozT56Y/y0oTuwWn4x0rvvknzwkLXgy3rzSGnAAAAV3RSTlMAIBB/QDAgEN9/f39wYGBgICDv79/fv7+/j4+Hf3BwYFBAIBDv7+/v7+/v7+/v79/f39/f39/fz8/Pz8+/v7+/v6+vr5+fn5+fj4+Pj39gYFBQUFBAMDCppK1VAAAE30lEQVRIx+3WZVRTYRgH8GFhd3d3d3d3g/Mu3MZQGbIBinMoQzcEZLgZg7EN6ZKUEgykxO6kxO7uOsfnxjbvNmQev/r/eM/9nfd93ufueUf5n39LzcUd6tSp06lmt790DaY0XbXJ0c5u3TqHHq06WlvsGk9vvmaVTjq479nQs42VZbL66tVkucHNrVd7S5YcZEbu9do6pkZVssMBQjoeSj2Xnn4u9R4ut257MK3rnzdLyFMXbkn94zQazcG4y2n3ULlNGNpiZdXy1GWp/wcRh4rFR/YmzWubUOjhERrcqAp594L0hIxjYwhVpPIF6eT0ULGssmZi8lCs9IOPDTmcl74g+fzrA83X27g7Jm/5y6g2JrlyGqQ4LHikWdpy9RpMimzMJUvIF4v3qRTtzMguWJ2x5iUU/NBJvG+/IFjRxER2aw5rrrqQ74e9GBNOD4wxsr4gBdcVs03PCO3Kfakaq/PILojL9qhLkt9sBl8g8HysMF12FEjH2Di8KdEAXVy2r1+/3jsg6IjO+go8nZ3zFY2MKwW5KVXqh78UgUmgO3asXbs2gGhyiMDZGXn7c5wRnQPSMfYg0ZbzALmeLpi0t7c/ij+O5DsjSFZKitGOm4I8pVs0Bl0y+4TqKXJeCdL7rYjYMYJwn6WkkHdcE6Rduj+xs0C0ypt+HB/1G1Um93xmMPH8DMLl0ipSyK3tBNIuVmNDlAqUFox/gqKcgyUy4nkIwg2nlVdMJtG5IB2kulfQ41FGoWdLzlmERqOfrGhB/ghhJtyXEl99NH6wUGRUYIwRpdNPlg8g0dp26xxS9aXuUGJw8+bNrq68QKqBcul0xsk75WQKcyjtBPESDZZUKu1R6HqYxbrK0dGdNDoD6B0SRQfYuTicSpSwpOrm80yatysLct1PT0EGJCf3N6Lu7mnEBxGNbvbmMRtRTnb2kwjviHyR/kukM1hByckjyBt2d9/zhaABaJV4K6myHE3+MZ2U8Bks3rtPyZNIdDTM29NErTT0eKL1Z2s4pQyExWN///ipLYlORSd1HN4cLnE8vICgFwQiSmXw2Myiso+LSLQ9SLfLeFFRNJBA2Ww2kxnE0UuJGOSWorKyFSS6ZIPb3r3peFXUrEwknMFCIdPW9qihNeFspu27oqJ+FFKsQXqd1lBxK1JfVT3m0nlMW6DHdIv6grQtLC2FUklp5QW3w3PD/OX4qa8+fUJjRJXI9E0F+bqwsNT43lroBdfKAzVpAvv4qbNLcohHF8NAbvyRVDiWYhRrkELhV+OxT9VVKjnDBnkjKSmpIcU4bUB6OB0lLUtqDMgtWm3S8Gom1Gqw0OOzU+hL8zaEjsobWq22M8U0HdG7jB96xQyU4PJ9YqK2NcVcxoMUi0OzTOTFM9hurxUkJvatZZZaDeHz4VrZl3GEDEOc2ZiUFxQkwhmZt81ACgSCsEiJHj7biTCYqHy1Wy4vWFD5H7Rm+/cLPOF28Ax7FBmZEfloZxjCYmPy2m5IPUrlsRqKSQTmbTgXph/8PnH5Xi43lsaxnkdIcHSGTr7Ky8uTy0H+OcsnGCQPk1tuJCQk5A3rTKk6S3tHGOTG199yi4sTEmbVoliSanX7XJFEX7oEQ4ITH5+bm1s8E4OW4foTj0Nu374dHx/fuiEOLdc16tedMb9u/RrVKP/zL/kF72YnXgFgadAAAAAASUVORK5CYII=",style:{width:"44rpx",height:"44rpx"},mode:"widthFix"}),b(" "+x(e.score),1)])),_:2},1024),k(c,{class:"card-price"},{default:f((()=>[k(n,null,{default:f((()=>[b("￥")])),_:1}),b(x(parseInt(e.price)),1)])),_:2},1024),k(c,{style:{color:"#9E9E9E","font-size":"20rpx","margin-top":"24rpx"}},{default:f((()=>[b(x(z(h)("my.score.forever")),1)])),_:1})])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1}),k(c,{class:"package-desc",style:{color:"#767676"}},{default:f((()=>[k(c,null,{default:f((()=>[b(x(z(h)("my.score.package.desc1")),1)])),_:1}),k(c,{style:{"font-weight":"bold",margin:"30rpx 0 20rpx 0",color:"#333333"}},{default:f((()=>[b(x(z(h)("my.score.package.title")),1)])),_:1}),k(c,null,{default:f((()=>[b(x(z(h)("my.score.package.desc2")),1)])),_:1}),k(c,null,{default:f((()=>[b(x(z(h)("my.score.package.desc3")),1)])),_:1}),k(c,null,{default:f((()=>[b(x(z(h)("my.score.package.desc4")),1)])),_:1}),k(c,null,{default:f((()=>[b(x(z(h)("my.score.package.desc5")),1)])),_:1})])),_:1})])),_:1})])),_:1}),k(c,{class:"bottom-toolbar"},{default:f((()=>[k(c,{class:"container flex-between"},{default:f((()=>[k(c,null,{default:f((()=>[k(c,{class:"bottom-price items-center"},{default:f((()=>[k(c,{style:{"margin-right":"28rpx"}},{default:f((()=>[k(n,null,{default:f((()=>[b("￥")])),_:1}),b(" "+x(P.value.price),1)])),_:1}),k(n,null,{default:f((()=>[b(x(z(h)("my.score.other"))+x(P.value.score)+x(z(h)("my.vip.score")),1)])),_:1})])),_:1}),k(c,{class:"bottom-desc"},{default:f((()=>[b(x(z(h)("my.vip.consent"))+" ",1),k(n,{style:{color:"#0066FF"}},{default:f((()=>[b(x(z(h)("my.vip.agreement")),1)])),_:1})])),_:1})])),_:1}),k(c,{class:"payment-btn",onClick:S},{default:f((()=>[b(x(z(h)("my.score.immediately.pay")),1)])),_:1})])),_:1})])),_:1}),k(E,{ref_key:"qrcodeRef",ref:W,"custom-style":"border-radius: 30rpx;"},{default:f((()=>[k(c,{class:"accountBox"},{default:f((()=>[k(c,{class:"accountTitle a"},{default:f((()=>[b(x(z(h)("my.vip.recharge")),1)])),_:1}),k(c,{class:"accountCode"},{default:f((()=>[k(T,{class:"accountImg",src:R.value,"show-menu-by-longpress":""},null,8,["src"])])),_:1}),k(c,{class:"accountTitle b"},{default:f((()=>[b(x(z(h)("my.vip.qrcode")),1)])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-2a3bff2b"]]);export{F as default};
