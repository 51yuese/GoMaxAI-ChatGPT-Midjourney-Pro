import{_ as a,u as e,r as t,s as l,B as s,C as o,a8 as i,F as r,m as n,p as c,b as u,w as d,a0 as v,a9 as g,a4 as p,U as f,G as m,i as A,a as h,d as k,e as y,t as _,g as x,H as w,J as b,I as j,K as C,a1 as B,a2 as I,j as S,V as P}from"./index-5HZnFt5a.js";import{_ as E}from"./uv-button.CiJ2J5v4.js";import{_ as F,a as M}from"./my-work-1.BS8iud04.js";import{_ as z}from"./video-create-fail.379UvUbK.js";import{_ as T}from"./re-edit-1.DlF31W5H.js";import{_ as D}from"./create-again-1.BJYmOOmv.js";import{a as R}from"./index.BIXFsUHK.js";import{v as Z}from"./video.HkJGK1YS.js";import{V as $}from"./VideoList.B5B144pj.js";import"./uv-loading-icon.D2OVaaMI.js";import"./z-paging.B8jSxtUa.js";import"./uv-image.B14LvnqC.js";import"./play.DdU5vgv-.js";const G=a({__name:"creating",setup(a){const{t:G}=e(),H=t(null),N=t({}),U=t(""),V=t(0);async function J(){var a,e;const t=await Q();if(v(t))return void(N.value={errMsg:G("app.error")});const l=p(t);if(l.length<=0)return void(N.value={errMsg:G("app.error")});const s=g(l[0]);N.value=s;const o=p(null==s?void 0:s.children);((null==o?void 0:o.length)<=0||!(null==(a=o[0])?void 0:a.cover))&&v(H.value)&&v(s.errMsg)&&(H.value=setInterval((()=>{V.value<100&&(V.value=V.value+.5),J()}),2e3)),((null==o?void 0:o.length)>0&&(null==(e=o[0])?void 0:e.cover)||(null==s?void 0:s.errMsg))&&X()}const Q=async()=>new Promise((a=>{Z.getVideoTask({ids:[U.value]}).then((e=>{a(e.data)})).catch((e=>{f({title:e.message||G("app.http.error"),icon:"none"}),a("")}))})),K=l((()=>{var a;const e=N.value,t=p(null==e?void 0:e.children);return(t.length<=0||!(null==(a=t[0])?void 0:a.cover))&&v(null==e?void 0:e.errMsg)})),L=l((()=>{var a,e;const t=p(null==(a=N.value)?void 0:a.children);return t.length<=0?"":B(null==(e=t[0])?void 0:e.cover)}));function X(){clearInterval(H.value),H.value=null}const W=()=>{I({url:"/pages/video/task?id="+N.value.id})};return s((a=>{U.value=null==a?void 0:a.id})),o((async()=>{await J()})),i((()=>{X()})),(a,e)=>{const t=r("ai-bindphone"),l=r("ai-privacy"),s=n(c("uv-icon"),m),o=A,i=S,v=n(c("uv-button"),E),g=P;return h(),u(o,{class:"creating-container container-bg"},{default:d((()=>[k(t,{ref:"aiPrivacyRef"},null,512),k(l,{ref:"aiPrivacyRef"},null,512),k(R,{bg:!1},{left:d((()=>[k(s,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:e[0]||(e[0]=e=>a.$tools.back()),class:"arrow-left"})])),center:d((()=>[k(o,{class:"creating-title"},{default:d((()=>[y(_(x(G)("video.creating.title")),1)])),_:1})])),_:1}),k(o,{style:C(`height: ${a.$tools.height().contentHeight}px;padding: 0 26rpx;`)},{default:d((()=>[k(o,{class:"status-container"},{default:d((()=>[K.value?(h(),w(b,{key:0},[k(i,{src:F}),k(o,{class:"status-word"},{default:d((()=>[y(_(x(G)("video.creating.wait")),1)])),_:1}),k(o,{class:"vip"},{default:d((()=>[y(_(x(G)("video.creating.vip")),1)])),_:1}),k(o,{class:"arrow-box"},{default:d((()=>[k(o,{class:"arrow"},{default:d((()=>[(h(),w(b,null,j(12,(a=>k(o,{class:"item",key:a}))),64))])),_:1})])),_:1}),k(v,{text:x(G)("video.creating.vip.btn"),onClick:e[1]||(e[1]=e=>a.$tools.to("/pagesA/my/vip/index",!0)),customStyle:{width:"312rpx",height:"70rpx",borderRadius:"35rpx",background:"linear-gradient(90deg, #574FFE 0%, #726AFB 100%)",border:"none"},customTextStyle:{fontSize:"28rpx",color:"#fff"}},null,8,["text","customStyle"])],64)):N.value.errMsg?(h(),w(b,{key:1},[k(i,{class:"status-icon",src:z}),k(o,{class:"fail"},{default:d((()=>[y(_(x(G)("music.index.task.fail")),1)])),_:1})],64)):(h(),u(o,{key:2,class:"cover",style:C({backgroundImage:`url(${L.value})`}),onClick:W},{default:d((()=>[k(i,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEPSURBVFiF7Zctc8JQEEXPdjo18XgwmNSg6uv50zX1IOAnFFNDDIhbER6TyTDpJrwPBNe9zU7m7M3My1546oFk3kZJS2AGvAEHYGdm52wQkt6BuldugG8zO9wL8eLs6wMAVMDnBTAthKTZPy21pLWkKhmEUxWwnupKLIigSa7EhoAJrqSACHK7khICnK6khggadCUXBAy4khMiqJb0URoCYN69BEtBQPt5ikNcf3ylIPZm1oTDawGAjZltu4WcEA3wZWa//Qe5IPa0DtzcxFJDuLavlBCD06eGGL17xoZwTz8WwvPCuzZvD8QRONHmjVuaNH1X3tyxBFa9crTcMSaBzYHF5fhDe/VGSWBPPZT+APkSakj054wuAAAAAElFTkSuQmCC"})])),_:1},8,["style"]))])),_:1}),k(o,{class:"btn-container"},{default:d((()=>[k(o,{onClick:e[2]||(e[2]=e=>a.$tools.back())},{default:d((()=>[k(i,{src:T}),k(o,null,{default:d((()=>[y(_(x(G)("video.creating.btn.edit")),1)])),_:1})])),_:1}),k(o,{onClick:e[3]||(e[3]=e=>a.$tools.to("/pages/video/index",!0))},{default:d((()=>[k(i,{src:D}),k(o,null,{default:d((()=>[y(_(x(G)("video.creating.btn.continue")),1)])),_:1})])),_:1}),k(o,{onClick:e[4]||(e[4]=e=>a.$tools.to("/pagesA/my/task/index?tab=2",!0))},{default:d((()=>[k(i,{src:M}),k(o,null,{default:d((()=>[y(_(x(G)("video.creating.btn.mine")),1)])),_:1})])),_:1})])),_:1}),k(o,{class:"example"},{default:d((()=>[y(_(x(G)("video.creating.example")),1)])),_:1}),k(g,{"scroll-y":!0,style:C(`height: calc(${a.$tools.height().contentHeight}px - 810rpx)`)},{default:d((()=>[k($)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-157aa0c2"]]);export{G as default};
