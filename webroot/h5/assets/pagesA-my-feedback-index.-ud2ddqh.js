var e,t,a,o;import{_ as l,O as s,P as i,a as n,b as r,K as c,i as d,m as u,G as m,p,W as f,w as h,d as g,e as y,t as v,T as b,L as _,ah as k,H as S,J as $,I as x,Q as C,u as T,r as w,F as V,g as B,X as I,ar as U,Y as A,av as j,U as z,k as O}from"./index-5HZnFt5a.js";import{_ as P}from"./uv-input.DP28rKYF.js";import{_ as M,a as N}from"./uv-form.mH_GK6sY.js";import{_ as E}from"./uv-textarea.CFQj21ZG.js";import{_ as q}from"./uv-line.rnRAS3LR.js";import{_ as G}from"./uv-loading-icon.D2OVaaMI.js";import{a as H}from"./image.D5XIlWM3.js";import{a as L}from"./index.BIXFsUHK.js";import"./props.CsYLBIgk.js";const R={props:{lang:String,sessionFrom:String,sendMessageTitle:String,sendMessagePath:String,sendMessageImg:String,showMessageCard:Boolean,appParameter:String,formType:String,openType:String}},F={props:{openType:String},emits:["getphonenumber","getuserinfo","error","opensetting","launchapp","contact","chooseavatar","addgroupapp","chooseaddress","subscribe","login","im"],methods:{onGetPhoneNumber(e){this.$emit("getphonenumber",e.detail)},onGetUserInfo(e){this.$emit("getuserinfo",e.detail)},onError(e){this.$emit("error",e.detail)},onOpenSetting(e){this.$emit("opensetting",e.detail)},onLaunchApp(e){this.$emit("launchapp",e.detail)},onContact(e){this.$emit("contact",e.detail)},onChooseavatar(e){this.$emit("chooseavatar",e.detail)},onAgreeprivacyauthorization(e){this.$emit("agreeprivacyauthorization",e.detail)},onAddgroupapp(e){this.$emit("addgroupapp",e.detail)},onChooseaddress(e){this.$emit("chooseaddress",e.detail)},onSubscribe(e){this.$emit("subscribe",e.detail)},onLogin(e){this.$emit("login",e.detail)},onIm(e){this.$emit("im",e.detail)}}};const J=l({name:"uv-gap",mixins:[s,i,{props:{bgColor:{type:String,default:"transparent"},height:{type:[String,Number],default:20},marginTop:{type:[String,Number],default:0},marginBottom:{type:[String,Number],default:0},...null==(t=null==(e=uni.$uv)?void 0:e.props)?void 0:t.gap}}],computed:{gapStyle(){const e={backgroundColor:this.bgColor,height:this.$uv.addUnit(this.height),marginTop:this.$uv.addUnit(this.marginTop),marginBottom:this.$uv.addUnit(this.marginBottom)};return this.$uv.deepMerge(e,this.$uv.addStyle(this.customStyle))}}},[["render",function(e,t,a,o,l,s){const i=d;return n(),r(i,{class:"uv-gap",style:c([s.gapStyle])},null,8,["style"])}]]);const K=l({name:"uv-action-sheet",mixins:[F,R,s,i,{props:{title:{type:String,default:""},description:{type:String,default:""},actions:{type:Array,default:()=>[]},cancelText:{type:String,default:""},closeOnClickAction:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},openType:{type:String,default:""},closeOnClickOverlay:{type:Boolean,default:!0},round:{type:[Boolean,String,Number],default:0},...null==(o=null==(a=uni.$uv)?void 0:a.props)?void 0:o.actionSheet}}],emits:["close","select"],computed:{itemStyle(){return e=>{let t={};return this.actions[e].color&&(t.color=this.actions[e].color),this.actions[e].fontSize&&(t.fontSize=this.$uv.addUnit(this.actions[e].fontSize)),this.actions[e].disabled&&(t.color="#c0c4cc"),t}}},methods:{open(){this.$refs.popup.open()},close(){this.$refs.popup.close()},popupChange(e){e.show||this.$emit("close")},cancel(){this.close()},selectHandler(e){const t=this.actions[e];!t||t.disabled||t.loading||(this.$emit("select",t),this.closeOnClickAction&&this.close())}}},[["render",function(e,t,a,o,l,s){const i=C,T=u(p("uv-icon"),m),w=d,V=u(p("uv-line"),q),B=u(p("uv-loading-icon"),G),I=u(p("uv-gap"),J),U=u(p("uv-popup"),f);return n(),r(U,{ref:"popup",mode:"bottom",safeAreaInsetBottom:e.safeAreaInsetBottom,round:e.round,"close-on-click-overlay":e.closeOnClickOverlay,onChange:s.popupChange},{default:h((()=>[g(w,{class:"uv-action-sheet"},{default:h((()=>[e.title?(n(),r(w,{key:0,class:"uv-action-sheet__header"},{default:h((()=>[g(i,{class:"uv-action-sheet__header__title uv-line-1"},{default:h((()=>[y(v(e.title),1)])),_:1}),g(w,{class:"uv-action-sheet__header__icon-wrap",onClick:b(s.cancel,["stop"])},{default:h((()=>[g(T,{name:"close",size:"17",color:"#c8c9cc",bold:""})])),_:1},8,["onClick"])])),_:1})):_("",!0),e.description?(n(),r(i,{key:1,class:"uv-action-sheet__description",style:c([{marginTop:`${e.title&&e.description?0:"18px"}`}])},{default:h((()=>[y(v(e.description),1)])),_:1},8,["style"])):_("",!0),k(e.$slots,"default",{},(()=>[e.description?(n(),r(V,{key:0})):_("",!0),g(w,{class:"uv-action-sheet__item-wrap"},{default:h((()=>[(n(!0),S($,null,x(e.actions,((t,a)=>(n(),r(w,{key:a},{default:h((()=>[g(w,{class:"uv-action-sheet__item-wrap__item",onClick:b((e=>s.selectHandler(a)),["stop"]),"hover-class":t.disabled||t.loading?"":"uv-action-sheet--hover","hover-stay-time":150},{default:h((()=>[t.loading?(n(),r(B,{key:1,"custom-class":"van-action-sheet__loading",size:"18",mode:"circle"})):(n(),S($,{key:0},[g(i,{class:"uv-action-sheet__item-wrap__item__name",style:c([s.itemStyle(a)])},{default:h((()=>[y(v(t.name),1)])),_:2},1032,["style"]),t.subname?(n(),r(i,{key:0,class:"uv-action-sheet__item-wrap__item__subname"},{default:h((()=>[y(v(t.subname),1)])),_:2},1024)):_("",!0)],64))])),_:2},1032,["onClick","hover-class"]),a!==e.actions.length-1?(n(),r(V,{key:0})):_("",!0)])),_:2},1024)))),128))])),_:1})]),!0),e.cancelText?(n(),r(I,{key:2,bgColor:"#eaeaec",height:"6"})):_("",!0),g(w,{"hover-class":"uv-action-sheet--hover"},{default:h((()=>[e.cancelText?(n(),r(i,{key:0,onTouchmove:t[0]||(t[0]=b((()=>{}),["stop","prevent"])),"hover-stay-time":150,class:"uv-action-sheet__cancel-text",onClick:s.cancel},{default:h((()=>[y(v(e.cancelText),1)])),_:1},8,["onClick"])):_("",!0)])),_:1})])),_:3})])),_:3},8,["safeAreaInsetBottom","round","close-on-click-overlay","onChange"])}],["__scopeId","data-v-13aa83ac"]]),Q=l({__name:"index",setup(e){const{t:t}=T(),a=w(),o=w(),l={background:"#fff"},s=[{name:t("my.feedback.type.name1"),value:"bug"},{name:t("my.feedback.type.name2"),value:"advice"},{name:t("my.feedback.type.name3"),value:"suggestion"}],i={feedType:{type:"string",required:!0,message:t("my.feedback.form.text1"),trigger:["blur","change"]},description:{type:"string",required:!0,message:t("my.feedback.form.text1"),trigger:["blur","change"]},telephone:{type:"string",required:!0,message:t("my.feedback.form.text4"),trigger:["blur","change"]}},c=w(""),f=w({feedType:"",images:[]});function b(){o.value.open()}function _(e){c.value=e.name,f.value.feedType=e.value}function k(){a.value.validate().then((async e=>{I({title:t("my.feedback.loading")}),await U.feedback(f.value),A(),j()})).catch((e=>{z({icon:"error",title:t("my.feedback.toast")})}))}return(e,S)=>{const $=V("ai-bindphone"),x=V("ai-privacy"),T=u(p("uv-icon"),m),w=C,I=u(p("uv-input"),P),U=u(p("uv-form-item"),M),A=u(p("uv-textarea"),E),j=O,z=u(p("uv-form"),N),q=u(p("uv-action-sheet"),K),G=d;return n(),r(G,{class:"feedback-container"},{default:h((()=>[g($,{ref:"aiPrivacyRef"},null,512),g(x,{ref:"aiPrivacyRef"},null,512),g(L,{bg:!1},{left:h((()=>[g(T,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:S[0]||(S[0]=t=>e.$tools.back())})])),center:h((()=>[g(w,null,{default:h((()=>[y(v(B(t)("my.feedback.title")),1)])),_:1})])),_:1}),g(G,{class:"container"},{default:h((()=>[g(z,{labelPosition:"top",model:f.value,rules:i,ref_key:"formRef",ref:a,labelStyle:{width:"150rpx",color:"#9E9E9E"}},{default:h((()=>[g(U,{label:B(t)("my.feedback.form.label1"),prop:"feedType",onClick:b},{default:h((()=>[g(I,{modelValue:c.value,"onUpdate:modelValue":S[1]||(S[1]=e=>c.value=e),disabled:"",placeholder:B(t)("my.feedback.form.text1"),border:"bottom",suffixIcon:"arrow-down",customStyle:l},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),g(U,{label:B(t)("my.feedback.form.label2"),prop:"description"},{default:h((()=>[g(A,{modelValue:f.value.description,"onUpdate:modelValue":S[2]||(S[2]=e=>f.value.description=e),placeholder:B(t)("my.feedback.form.text2"),border:"bottom",customStyle:l},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),g(U,{label:B(t)("my.feedback.form.label3"),prop:"images"},{default:h((()=>[g(H,{modelValue:f.value.images,"onUpdate:modelValue":S[3]||(S[3]=e=>f.value.images=e),title:B(t)("my.feedback.form.text3")},null,8,["modelValue","title"])])),_:1},8,["label"]),g(U,{label:B(t)("my.feedback.form.label4"),prop:"telephone"},{default:h((()=>[g(I,{modelValue:f.value.telephone,"onUpdate:modelValue":S[4]||(S[4]=e=>f.value.telephone=e),placeholder:B(t)("my.feedback.form.text4"),border:"bottom",customStyle:l},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),g(U,{label:B(t)("my.feedback.form.label5"),prop:"wechat"},{default:h((()=>[g(I,{modelValue:f.value.wechat,"onUpdate:modelValue":S[5]||(S[5]=e=>f.value.wechat=e),placeholder:B(t)("my.feedback.form.text5"),border:"bottom",customStyle:l},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),g(j,{class:"btn-primary",style:{"margin-top":"60rpx"},onClick:k},{default:h((()=>[y(v(B(t)("my.feedback.form.btn")),1)])),_:1})])),_:1},8,["model"]),g(q,{ref_key:"typeSelect",ref:o,actions:s,title:B(t)("my.feedback.action.sheet"),onSelect:_},null,8,["title"])])),_:1})])),_:1})}}},[["__scopeId","data-v-712642fe"]]);export{Q as default};
