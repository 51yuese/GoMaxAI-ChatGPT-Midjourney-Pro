import{_ as e,u as a,r as l,m as s,p as t,F as r,H as o,d as i,w as n,J as c,G as d,i as u,a as p,e as m,t as f,g as v,I as g,Q as x,b as _,M as h,a2 as y,$ as k,ay as w,X as b,Y as C,h as j,j as z}from"./index-5HZnFt5a.js";import{_ as R}from"./uv-loading-icon.D2OVaaMI.js";import{_ as V}from"./z-paging.B8jSxtUa.js";import{_ as $}from"./reserve.D_MUsVaL.js";import{_ as M,a as A}from"./card-down.JLabKawd.js";import{_ as E}from"./play.DdU5vgv-.js";import{a as F}from"./index.BIXFsUHK.js";import{d as G}from"./dialog.CErO1ANM.js";const I=e({__name:"works",setup(e){const{t:I}=a(),L=l(),P=l([]);async function Q(e,a){const{code:l,data:s}=await G.taskLog({page:e,size:a,modelType:"music"});200===l?L.value.complete(s.records):L.value.complete(!1)}function T(e){w({title:I("app.tip.title"),content:I("my.task.music.works.content"),success:async a=>{a.confirm&&(b({title:I("my.task.index.human.del")}),await G.delChatLog({id:e.id}),L.value.refresh(),C())}})}return(e,a)=>{const l=s(t("uv-icon"),d),w=x,b=r("ai-bindphone"),C=r("ai-privacy"),G=z,H=u,J=s(t("uv-loading-icon"),R),S=s(t("z-paging"),V);return p(),o(c,null,[i(F,null,{left:n((()=>[i(l,{name:"arrow-left",size:"30rpx",onClick:e.$tools.back},null,8,["onClick"])])),center:n((()=>[i(w,{style:{"font-weight":"500","font-size":"34rpx"}},{default:n((()=>[m(f(v(I)("my.task.music.works.title")),1)])),_:1})])),_:1}),i(H,{class:"container"},{default:n((()=>[i(b,{ref:"aiPrivacyRef"},null,512),i(C,{ref:"aiPrivacyRef"},null,512),i(S,{ref_key:"pagingRef",ref:L,modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e),onQuery:Q,fixed:!1,height:`calc(100vh - ${e.$tools.height(!0)}px)`},{default:n((()=>[(p(!0),o(c,null,g(P.value,(a=>{var l,s;return p(),o(c,null,[0===a.children.length||(null==(l=null==a?void 0:a.children)?void 0:l.length)>0&&!(null==(s=null==a?void 0:a.children[0])?void 0:s.mp4)?(p(),_(H,{key:0,class:"card-box"},{default:n((()=>[i(H,{style:{position:"relative",background:"#fff"},class:"reserve"},{default:n((()=>[i(G,{src:$,mode:"center"}),i(H,{class:"flex-center absolute-index1 mask"},{default:n((()=>[a.errMsg?(p(),_(H,{key:0},{default:n((()=>[m(f(a.errMsg),1)])),_:2},1024)):(p(),_(J,{key:1,text:v(I)("app.generation.loading"),textSize:"30rpx"},null,8,["text"]))])),_:2},1024),i(H,{class:"absolute-index3"},{default:n((()=>[i(G,{src:M,style:{width:"64rpx",height:"64rpx"},onClick:e=>T(a)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),i(H,{class:"flex-between",style:{"margin-top":"28rpx"}},{default:n((()=>[i(H,{class:"card-model"},{default:n((()=>[m(f(a.model),1)])),_:2},1024),i(H,{class:"card-time"},{default:n((()=>{var a;return[m(f(null==(a=e.children)?void 0:a.createdAt),1)]})),_:1})])),_:2},1024),i(H,{class:"uv-line-1 card-prompt"},{default:n((()=>{var e;return[m(f(null==(e=a.prompt)?void 0:e.replace(new RegExp("prompt ","g"),"")),1)]})),_:2},1024)])),_:2},1024)):(p(!0),o(c,{key:1},g(a.children,(e=>(p(),_(H,{class:"card-box"},{default:n((()=>[i(H,{style:{position:"relative"}},{default:n((()=>[e.cover?(p(),_(G,{key:0,src:e.cover},null,8,["src"])):(p(),_(G,{key:1,src:$,mode:"center"})),i(H,{class:h(["flex-center absolute-index1",e.cover?"":"mask"]),onClick:a=>function(e){y({url:"/pages/video/play?id="+e.id,success:a=>{setTimeout((()=>{k("musicVideo",{data:e.mp4})}),500)}})}(e)},{default:n((()=>[i(G,{src:E,style:{width:"100rpx",height:"100rpx"}})])),_:2},1032,["class","onClick"]),i(H,{class:"absolute-index2"},{default:n((()=>[i(G,{src:M,style:{width:"64rpx",height:"64rpx"},onClick:e=>T(a)},null,8,["onClick"])])),_:2},1024),i(H,{class:"absolute-index3"},{default:n((()=>[i(G,{src:A,style:{width:"64rpx",height:"64rpx"},onClick:a=>function(e){j.download(e.mp4,"mp4")}(e)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),i(H,{class:"flex-between",style:{"margin-top":"28rpx"}},{default:n((()=>[i(H,{class:"card-model"},{default:n((()=>[m(f(a.model),1)])),_:2},1024),i(H,{class:"card-time"},{default:n((()=>[m(f(null==e?void 0:e.createdAt),1)])),_:2},1024)])),_:2},1024),i(H,{class:"uv-line-1 card-prompt"},{default:n((()=>{var e;return[m(f(null==(e=a.prompt)?void 0:e.replace(new RegExp("prompt ","g"),"")),1)]})),_:2},1024)])),_:2},1024)))),256))],64)})),256))])),_:1},8,["modelValue","height"])])),_:1})],64)}}},[["__scopeId","data-v-a38e5e52"]]);export{I as default};
