import{_ as e,r as a,s as l,o as s,B as t,E as n,a0 as o,F as i,m as u,p as c,b as d,w as r,ab as f,ac as v,G as p,i as m,a as g,d as y,e as k,K as x,H as A,I as _,J as b,L as w,ad as U,a4 as C,a2 as h,X as P,Y as J,U as E,j as M,t as V,T as Y,M as z}from"./index-5HZnFt5a.js";import{_ as T}from"./uv-tabs.CxaWShil.js";import{_ as W}from"./z-paging.B8jSxtUa.js";import{a as j}from"./index.BIXFsUHK.js";import{m as Z,c as B,i as I,v as O}from"./video-pay.J-yzeUW5.js";import{_ as X}from"./sound-pay.Vvxa2jSR.js";import{m as R}from"./digital-man.CbE7ZGLY.js";import"./uv-badge.vue_vue_type_style_index_0_scoped_d4ba6c2a_lang.C03jWKDg.js";import"./uv-modal.Clrzaq6u.js";import"./uv-line.rnRAS3LR.js";import"./uv-loading-icon.D2OVaaMI.js";import"./uv-input.DP28rKYF.js";const F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAA3lBMVEUAAABmXv9mXvthWf9pYftuZvtoX/9hWfxmXv1bU/5oYPxwaPxbU/xxaf9iWv1lXf1YUP5xafpZUf9YUP5xavteVv5bU/5vZ/xuZPplXf1aUv9waPtbVf9gWP1qYfxuZfxxaftXUP9kXPxbU/5uZvxrY/xkXP1aUv9kXP1waPxya/teVv1ZUf1fWP1YUf1pYPtxafpwZ/xrY/xlXf1YUP1ZUv5kXf1zavtgWP5yaftaUv9oYPxeVv1hWf1qYvxbU/5tZftZUf5lXfxwaPtgWP1sZPxjW/1vZ/tYUP5tZfxEffRrAAAAO3RSTlMAIIBAYEAQYN+/QN9gIN+P32BA7+/f368w76+AMO/v37+PUO/v37+fn5+PgIBwcHBwUL+vUM/Pz7+PYG2fiegAAAN3SURBVGjetZrpcqJAFIUvUXBBxCWOW4xGE7fEJessJiohRub9X2i6rbZ6EISG5p7fSX11+kOgPIJwlFR/Zj4P35rN7HBsLtJ5RYNEkzKLHx/fJJ/fn8esVqusmU+K0B8TAg2F8KwOuTbz0oWUzHPn64MxaFxNGOcprckg7t+/SBjE24RzLmJjMrV3DvE64Vmv19eLWIgCQbwLNlmT3D1Gv54IgkECnHAGzZMaTcaIAiI1odk9GeKMqxpDCDnhjN2u2xBlzBhAvAmn3KbFGPcbBojqZEfyd9sWQGitzWYTv8luu61rocp/MEZEJ7zJdts1QpRTxkbCyZbmNlC/MqAMOSe0i24E+Dj0kHVCo5/30qIAeSc09XOMB4sAZJ2w7Nv+jD+WFdKkWCxmWZpBTihkv/S9sAYEEuxE4X99EeiEQvYNvw+IFdrEC/E24RCfSyxnuSAxm3AnJJNTRsWypJp4nextW/UpkqgTStHdjBdCSNqJbdtlF6RkWck7sd1V5paF4MRdRataFoYTUsX4735iYTihabuKYDihOVYpOBaWE24l5zg4Tmjqx9Ny8JzYl+yO4jiITuxHoLlxMJ3YE6CpOphObJ2dFpITFvVwWrhO7Cm9NzqITth5aY6D5oQFQHGwndgG8Y7mhJsvOJhO2Mdx7nVSKxyS8UTjkEbaN+WyT5Ml3Hib5EAiPk6mMMKCcEodcklDvE56UHJoUJv8hCq+k0tEyJ5DXvGd6JDDd9KDFr6TCdzgO5nC3At5TZ0J8Ch5FvUkPk6W8IL/PClDBf95ooKC/zwxAPCfJxpACduJTl+JsJ1M6csdthMVSEp4Tvhr/QjXyW+gecF1osIhVUwnl+wVp4XppMf+oYDppHy8o2I44afF8oDnpM0fDiUMJ7wIs4LlZOn6KgrHie4esHCcnMxcJQwnPXCnguHEM6SNknfCi/DLOGknfvvGVcJO/JeaeaiTIl8EmqFOymHThvx+sm+HjjTy+0k9bG6S37S2uhY0ACazad0agRPgIAkn3UbYmCnvpGuEz7KyTuqayMAs56QNQikMJJwsJEZ/wSZEuXCUXDwnEwOipJKL3uROhajp16I5uUtDnMw6wk0oIma0+46gkwsF4kfL/OqENbmupxlCgpMyO+edZMf9JH9Exppg/IiMF1LymZk5Hmabzbfhs7no58XP6B/M5kBYmWQf1AAAAABJRU5ErkJggg==",S=e({__name:"index",setup(e){const S=U(),N=a(null),H=a(null),G=[{key:"renaming",name:"重命名"},{key:"del",name:"删除"}],D=[{name:"我的视频",id:"0"},{name:"我的数字人",id:"1"},{name:"我的声音",id:"2"}],L=a(0),q=e=>{var a,l;o(e)||(Ae(),2===e||o(ke.value)||null==(a=ke.value)||a.stop(),L.value=Number(e),null==(l=N.value)||l.reload())},K=l((()=>{const e=L.value;return 0===e?"请输入作品名称":1===e?"请输入数字人名称":2===e?"请输入声音名称":void 0})),Q=a(0),$=a([]),ee=async(e,a)=>{const l=L.value;0===l?await ae({page:e,size:a}):1===l?await le({page:e,size:a}):2===l&&await se({page:e,size:a})},ae=async e=>{var a;const{data:l}=await R.myWorks(e),s=C(null==l?void 0:l.rows);null==(a=N.value)||a.complete(s);s.some((e=>o(e.fileUrl)))&&0===L.value&&(H.value=setTimeout((()=>{ae(e)}),3e3))},le=async e=>{var a;const{data:l}=await R.getMyVideos(e),s=C(null==l?void 0:l.rows);null==(a=N.value)||a.complete(s);s.some((e=>o(e.fileUrl)))&&1===L.value&&(H.value=setTimeout((()=>{le(e)}),3e3))},se=async e=>{var a;const{data:l}=await R.getMyVoices(e),s=C(null==l?void 0:l.rows);null==(a=N.value)||a.complete(s);s.some((e=>o(e.fileUrl)))&&2===L.value&&(H.value=setTimeout((()=>{se(e)}),3e3))},te=()=>{const e=L.value;0===e?h({url:"/pagesA/digital-man/video"}):1===e?h({url:"/pagesA/human/creating"}):2===e&&h({url:"/pagesA/sound/create"})},ne=a(null),oe=e=>{var a,l;const s=L.value;0===s?null==(a=ne.value)||a.play(e.name,e.fileUrl):1===s?null==(l=ne.value)||l.play(e.name,e.fileUrl):2===s&&ye(e)},ie=a(null),ue=e=>{var a;const l=L.value;ce.value=e,0===l?fe.value="作品删除后，不可恢复。确认删除？":1===l?fe.value="数字人删除后，不可恢复。确认删除？":2===l&&(fe.value="声音删除后，不可恢复。确认删除？"),null==(a=ie.value)||a.open()},ce=a({}),de=e=>{var a,l;"renaming"===e.key&&(null==(a=pe.value)||a.open()),"del"===e.key&&(null==(l=re.value)||l.open())},re=a(null),fe=a(""),ve=async e=>{var a,l;const s=null==(a=ce.value)?void 0:a.id;if(o(s))return;P({title:"删除中..."});const t=L.value;let n;if(0===t){const{code:e}=await R.deleteVideo({id:s});n=e}else if(1===t){const{code:e}=await R.deleteVideo({id:s});n=e}else if(2===t){const{code:e}=await R.deleteVoice({id:s});n=e}if(J(),200!==n)return e(!1);E({title:"删除成功"}),e(!0),null==(l=N.value)||l.reload()},pe=a(null),me=async(e,a)=>{var l,s;const t=null==(l=ce.value)?void 0:l.id;if(o(t))return a(!1);const n=L.value;let i;if(P({title:"保存中..."}),0===n){const{code:a}=await R.updateVideo({id:t,name:e});i=a}else if(1===n){const{code:a}=await R.updateVideo({id:t,name:e});i=a}else if(2===n){const{code:a}=await R.updateVoice({id:t,name:e});i=a}if(J(),200!==i)return a(!1);E({title:"修改成功"}),a(!0),null==(s=N.value)||s.reload()},ge=a({}),ye=async e=>{var a,l;const s=$.value;if(ge.value=e,e.isPlaying)await f(),null==(a=ke.value)||a.pause(),e.isPlaying=!1;else{for(let e=0;e<s.length;e++)s[e].isPlaying=!1,s[e].progress=0;await f(),null==(l=ke.value)||l.play(),e.isPlaying=!0}},ke=a(null),xe=async({type:e,data:a})=>{const l=ge.value;"update"===e&&(l.progress=a.plan),"ended"===e&&(l.isPlaying=!1),"stop"===e&&(l.isPlaying=!1)},Ae=()=>{o(H.value)||(clearTimeout(H.value),H.value=null)};return s((()=>{(async()=>{await f();const e=await v(S,".apps-tabs");Q.value=e.height})()})),t((({type:e})=>{q(e)})),n((()=>{var e;Ae(),o(ke.value)||null==(e=ke.value)||e.stop()})),(e,a)=>{const l=i("ai-bindphone"),s=i("ai-privacy"),t=u(c("uv-icon"),p),n=m,o=u(c("uv-tabs"),T),f=M,v=u(c("z-paging"),W);return g(),d(n,{class:"my-assets-page container-bg"},{default:r((()=>[y(l,{ref:"aiPrivacyRef"},null,512),y(s,{ref:"aiPrivacyRef"},null,512),y(j,{bg:!1},{left:r((()=>[y(t,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:a[0]||(a[0]=a=>e.$tools.back())})])),center:r((()=>[y(n,{class:"header-title"},{default:r((()=>[k("我的资产")])),_:1})])),_:1}),y(n,{class:"main-container",style:x(`height: ${e.$tools.height().contentHeight}px;`)},{default:r((()=>[y(n,{class:"apps-tabs"},{default:r((()=>[y(o,{list:D,keyName:"name",lineWidth:"100rpx",current:L.value,activeStyle:{color:"#000000",fontSize:"32rpx",fontWeight:600},inactiveStyle:{color:"#767676",fontSize:"32rpx"},onChange:a[1]||(a[1]=e=>q(e.id))},null,8,["current"])])),_:1}),y(n,{class:"scroll-inner",style:x({height:`calc(100% - ${Q.value}px)`})},{default:r((()=>[y(v,{ref_key:"pagingRef",ref:N,modelValue:$.value,"onUpdate:modelValue":a[2]||(a[2]=e=>$.value=e),fixed:!1,height:"100%","show-loading-more-no-more-view":!1,"loading-more-default-as-loading":!0,"default-page-size":100,"hide-empty-view":"",onQuery:ee},{default:r((()=>[0===L.value?(g(),d(n,{key:0,class:"assets-paging-content"},{default:r((()=>[y(n,{class:"item add",onClick:te},{default:r((()=>[y(n,{class:"content"},{default:r((()=>[y(n,{class:"box"},{default:r((()=>[y(n,{class:"icon-box"},{default:r((()=>[y(f,{class:"icon",src:F})])),_:1}),y(n,{class:"name"},{default:r((()=>[k("创建作品")])),_:1})])),_:1})])),_:1})])),_:1}),(g(!0),A(b,null,_($.value,(e=>(g(),A(b,{key:e.id},[e.fileUrl?(g(),d(n,{key:0,class:"item li",onClick:a=>oe(e),onLongpress:a=>ue(e)},{default:r((()=>[y(f,{class:"cover",src:e.cover,mode:"aspectFill"},null,8,["src"]),y(n,{class:"content"},{default:r((()=>[y(n,{class:"title-box"},{default:r((()=>[k(V(e.name),1)])),_:2},1024),y(n,{class:"icon-box",onClick:Y((a=>ue(e)),["stop"])},{default:r((()=>[y(t,{name:"more-dot-fill",color:"#fff",bold:"",size:"20"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick","onLongpress"])):(g(),d(n,{key:1,class:"item generation"},{default:r((()=>[k("作品生成中...")])),_:1}))],64)))),128))])),_:1})):w("",!0),1===L.value?(g(),d(n,{key:1,class:"assets-paging-content"},{default:r((()=>[y(n,{class:"item add",onClick:te},{default:r((()=>[y(n,{class:"content"},{default:r((()=>[y(n,{class:"box"},{default:r((()=>[y(n,{class:"icon-box"},{default:r((()=>[y(f,{class:"icon",src:F})])),_:1}),y(n,{class:"name"},{default:r((()=>[k("创建数字人")])),_:1})])),_:1})])),_:1})])),_:1}),(g(!0),A(b,null,_($.value,(e=>(g(),A(b,{key:e.id},[e.fileUrl?(g(),d(n,{key:0,class:"item li",onClick:a=>oe(e),onLongpress:a=>ue(e)},{default:r((()=>[y(f,{class:"cover",src:e.cover,mode:"aspectFill"},null,8,["src"]),y(n,{class:"content"},{default:r((()=>[y(n,{class:"title-box"},{default:r((()=>[k(V(e.name),1)])),_:2},1024),y(n,{class:"icon-box",onClick:Y((a=>ue(e)),["stop"])},{default:r((()=>[y(t,{name:"more-dot-fill",color:"#fff",bold:"",size:"20"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick","onLongpress"])):(g(),d(n,{key:1,class:"item generation"},{default:r((()=>[k("数字人生成中...")])),_:1}))],64)))),128))])),_:1})):w("",!0),2===L.value?(g(),d(n,{key:2,class:"assets-paging-content sound"},{default:r((()=>[y(n,{class:"item add",onClick:te},{default:r((()=>[y(n,{class:"content"},{default:r((()=>[y(n,{class:"box"},{default:r((()=>[y(n,{class:"icon-box"},{default:r((()=>[y(f,{class:"icon",src:F})])),_:1}),y(n,{class:"name"},{default:r((()=>[k("快速克隆声音")])),_:1})])),_:1})])),_:1})])),_:1}),(g(!0),A(b,null,_($.value,(e=>(g(),A(b,{key:e.id},[e.fileUrl?(g(),d(n,{key:0,class:z(["item sound",e.isPlaying?"is-pay":""]),onClick:a=>oe(e),onLongpress:a=>ue(e)},{default:r((()=>[y(f,{class:"cover",src:e.cover,mode:"aspectFill"},null,8,["src"]),y(n,{class:"content"},{default:r((()=>[y(n,{class:"title-box"},{default:r((()=>[y(n,{class:"view"},{default:r((()=>[k(V(e.name),1)])),_:2},1024)])),_:2},1024),y(n,{class:"audio-sound-box"},{default:r((()=>[y(n,{class:"sound-box",onClick:Y((a=>ye(e)),["stop"])},{default:r((()=>[y(n,{class:"progress",style:x({width:e.progress+"%"})},null,8,["style"]),y(n,{class:"icon-box"},{default:r((()=>[e.isPlaying?(g(),d(t,{key:0,name:"pause",color:"#A5A5A5",size:"10"})):(g(),d(t,{key:1,name:"play-right-fill",color:"#A5A5A5",size:"10"}))])),_:2},1024),y(n,{class:"tag"},{default:r((()=>[k("热情甜美")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick","onLongpress"])):(g(),d(n,{key:1,class:"item generation"},{default:r((()=>[k("声音人生成中...")])),_:1}))],64)))),128))])),_:1})):w("",!0)])),_:1},8,["modelValue"])])),_:1},8,["style"])])),_:1},8,["style"]),y(Z,{ref_key:"moreRef",ref:ie,data:G,onChange:de},null,512),y(B,{ref_key:"modalRef",ref:re,content:fe.value,onConfirm:ve},null,8,["content"]),y(I,{ref_key:"inputRef",ref:pe,placeholder:K.value,content:ce.value.name,onConfirm:me},null,8,["placeholder","content"]),y(O,{ref_key:"videoPayRef",ref:ne},null,512),y(X,{ref_key:"soundPayRef",ref:ke,modelValue:ge.value.fileUrl,"onUpdate:modelValue":a[3]||(a[3]=e=>ge.value.fileUrl=e),onChange:xe},null,8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-2d3cadc9"]]);export{S as default};
