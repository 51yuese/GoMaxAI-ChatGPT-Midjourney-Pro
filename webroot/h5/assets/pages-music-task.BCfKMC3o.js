var a,e;import{_ as A,O as l,P as t,a as s,b as u,w as i,d as o,K as n,af as c,i as d,u as r,r as v,as as m,B as g,at as f,a8 as p,F as h,m as y,p as B,G as C,e as b,t as w,g as k,j as S,V as x}from"./index-5HZnFt5a.js";import{_ as M}from"./uv-image.B14LvnqC.js";import{a as V}from"./index.BIXFsUHK.js";import{v as U}from"./video.HkJGK1YS.js";import{d as z}from"./dialog.CErO1ANM.js";const I=A({name:"uv-slider",mixins:[l,t,{props:{value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},activeColor:{type:String,default:"#2979ff"},backgroundColor:{type:String,default:"#c0c4cc"},blockSize:{type:[Number,String],default:18},blockColor:{type:String,default:"#ffffff"},disabled:{type:Boolean,default:!1},showValue:{type:Boolean,default:!1},...null==(e=null==(a=uni.$uv)?void 0:a.props)?void 0:e.slider}}],computed:{sliderValue(){return this.value||this.modelValue}},methods:{changingHandler(a){const{value:e}=a.detail;this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("changing",e)},changeHandler(a){const{value:e}=a.detail;this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e)}}},[["render",function(a,e,A,l,t,r){const v=c,m=d;return s(),u(m,{class:"uv-slider",style:n([a.$uv.addStyle(a.customStyle)])},{default:i((()=>[o(v,{min:a.min,max:a.max,step:a.step,value:r.sliderValue,activeColor:a.activeColor,backgroundColor:a.backgroundColor,blockSize:a.$uv.getPx(a.blockSize),blockColor:a.blockColor,showValue:a.showValue,disabled:a.disabled,onChanging:r.changingHandler,onChange:r.changeHandler},null,8,["min","max","step","value","activeColor","backgroundColor","blockSize","blockColor","showValue","disabled","onChanging","onChange"])])),_:1},8,["style"])}]]),R=A({__name:"task",setup(a){const{t:e}=r(),A=v(0),l=v({}),t=v(0),c=m(),R=v(0),E=v(!0),j=v(!1),L=v(""),N=v(1),_=v(20),G=v([]),J=v(0);async function T(a){const{data:e}=await U.fetchVideoModelDetail({id:a,modelType:"misic"});l.value=e,c.src=e.mp3,c.autoplay=!1,c.onCanplay((()=>{t.value=c.duration||e.duration})),c.onPlay((()=>{t.value=c.duration,j.value=!0})),c.onTimeUpdate((()=>{R.value=c.currentTime})),c.onEnded((()=>{c.play()}))}const Y=a=>{const e=Math.floor(a/60),A=Math.floor(a%60);return`${e.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},P=()=>{j.value?c.pause():c.play(),j.value=!j.value};const D=()=>{0===J.value?J.value=G.value.length-1:J.value--,T(G.value[J.value])},$=()=>{J.value===G.value.length-1?J.value=0:J.value++,T(G.value[J.value])};function O(a){R.value=Math.round(100*a)/100,c.seek(R.value)}return g((a=>{A.value=Number(null==a?void 0:a.id),L.value=null==a?void 0:a.from,N.value=null==a?void 0:a.pageNum,_.value=null==a?void 0:a.pageSize,"my"===L.value?async function(){var a;const e=await z.taskLog({page:N.value,size:_.value,modelType:"music"});200===e.code&&(G.value=null==(a=e.data.records)?void 0:a.reduce(((a,e)=>a.concat(e.children.map((a=>a.id)))),[])),J.value=G.value.findIndex((a=>a===A.value)),T(A.value)}():async function(){var a;const e=await U.getList({page:N.value,size:_.value,modelType:"music"});200===e.code&&(G.value=null==(a=e.data.records)?void 0:a.reduce(((a,e)=>a.concat(e.id)),[])),J.value=G.value.findIndex((a=>a===A.value)),T(A.value)}()})),f((()=>{c.pause(),c.destroy()})),p((()=>{c.pause(),c.destroy()})),(a,A)=>{const c=h("ai-bindphone"),r=h("ai-privacy"),v=y(B("uv-icon"),C),m=d,g=S,f=x,p=y(B("uv-image"),M),U=y(B("uv-slider"),I);return s(),u(m,{class:"music-task-container container-bg"},{default:i((()=>[o(c,{ref:"aiPrivacyRef"},null,512),o(r,{ref:"aiPrivacyRef"},null,512),o(V,{bg:!1},{left:i((()=>[o(v,{name:"arrow-left",color:"#000",size:"22",onClick:a.$tools.back},null,8,["onClick"])])),center:i((()=>[o(m,{class:"music-task-title"},{default:i((()=>[b(w(k(e)("my.task.music.task.title")),1)])),_:1})])),_:1}),o(m,{style:n(`height: calc(${a.$tools.height().contentHeight}px);display: flex;flex-direction: column;`)},{default:i((()=>[o(f,{"scroll-y":!0,style:n(`height: calc(${a.$tools.height().contentHeight}px - 430rpx);`)},{default:i((()=>[E.value?(s(),u(m,{key:0,class:"music-word"},{default:i((()=>[b(w(l.value.intro),1)])),_:1})):(s(),u(m,{key:1,class:"picture-container"},{default:i((()=>[o(g,{mode:"widthFix",src:l.value.cover},null,8,["src"])])),_:1}))])),_:1},8,["style"]),o(m,{class:"music-info"},{default:i((()=>[o(m,{class:"music-title"},{default:i((()=>[o(m,{class:"music-name uv-line-1"},{default:i((()=>[b(w(l.value.title),1)])),_:1}),o(m,{class:"music-version"},{default:i((()=>[b(w(l.value.model),1)])),_:1})])),_:1}),o(m,{class:"music-user"},{default:i((()=>[o(p,{src:l.value.avatar,width:"44rpx",height:"44rpx",radius:"50%",lazyLoad:"",observeLazyLoad:""},null,8,["src"]),o(m,null,{default:i((()=>[b(w(l.value.nickname),1)])),_:1})])),_:1}),o(m,{class:"music-process"},{default:i((()=>[o(m,{class:"time"},{default:i((()=>[b(w(Y(parseInt(R.value))),1)])),_:1}),o(U,{modelValue:R.value,"onUpdate:modelValue":A[0]||(A[0]=a=>R.value=a),min:0,max:parseInt(t.value),step:1,customStyle:{width:"550rpx"},activeColor:"#6b63fc","block-size":"12",onChange:O,backgroundColor:"#767676","block-color":"#6b63fc"},null,8,["modelValue","max"]),o(m,{class:"time"},{default:i((()=>[b(w(Y(parseInt(t.value))),1)])),_:1})])),_:1}),o(m,{class:"music-control"},{default:i((()=>[o(g,{class:"word-image",mode:"widthFix",onClick:A[1]||(A[1]=a=>E.value=!E.value),src:`/static/music-word-${E.value?"":"in"}active${E.value?"":"-1"}.png`},null,8,["src"]),o(g,{class:"switch-image",mode:"widthFix",onClick:D,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoBAMAAAB+0KVeAAAALVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBoCg+AAAADnRSTlMAn0AggN8wz+9gEL9vr/kewscAAACkSURBVCjPxdIxCsJAEAXQwSyBBEuxXGzsYxG8xTb2i11uYWOfI0jukQvYW1sIChbyzyDMJhAyv880M/MYfjWydBX9drJsKu03fLrRMo+TDh7YjbgH3nN0AF4zzCLBOyweYDGPBAMs1rBYtBZLD4s1LJYtwRXYZSQoR4YSGOYXguIYSsNQgkWNtSiOoTRTPCfT2N/wDN8ukcZedVj3jyS6PCtZuP6WKeCQ1xm0uwAAAABJRU5ErkJggg=="}),o(g,{class:"pause-image",mode:"widthFix",onClick:P,src:`/static/music-${j.value?"pause":"play"}-1.png`},null,8,["src"]),o(g,{class:"switch-image",mode:"widthFix",onClick:$,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoBAMAAAB+0KVeAAAAMFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABaPxwLAAAAD3RSTlMAn0DfIBCvgO+/j3BgMM8U9ItRAAAAo0lEQVQoz2MYaMCyUAHBcZu2AUwH//8WABNj7f//B8zY//+/EUyQ9///j2CG/P///xdABZmQBf85YBH8341N8H8qNsHPClgE///CJvh/CjbBHwdQBaEGBGAR/G+LTfBzABbB/wrEqjTBYuZ3LE767IBFsACLj0yw+P07WtBBDcQULMAS8iboEVcPMhBd0ANoIDwx2EMTA4vYAUSyuTZzA8MAAwCdvPl1BXRIWwAAAABJRU5ErkJggg=="}),o(g,{class:"list-image",mode:"widthFix",onClick:a.$tools.back,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABGCAMAAAC5UjdUAAAAM1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACjBUbJAAAAEHRSTlMA3yC/QJ+AXxDvzzBwj69Q/bRGHwAAAVFJREFUSMft1ttugzAMgGE7doKdBOr3f9oRbzCNNCB2tUO/m6q0P0YJSMDLzxaIKtyTzYwY7jA3y+3EdLu6Mh1In2zIf2M7wnFiM6yidcpFMvVTZJhgAG/iV3OAUZLurlgMN7cSJ7ijICb4x/hcgU60CwscBLsUDomoXVDptnKhcwVefgkJpwQ6yS6kb9yWxzlyP4GK5/IEL79cEBir6R2sIsIHIhgjVMOV0MOTBzZq2DxGEfml2ORJSQ2if5RBogszy5ZA4FXOvAqDgq3hPUndA9aJyFwt7ImEVab9Oe5NVlsGW0JOlRw8IdrmY9yTuCLLRrGBZygkU5u2pGFcfBk5wUixDJ+JJMsCbLUawchivCchmvpKzabjIbP/RVhaIpikfS+Qh3vP2QtHGRpbZlUIefQKRVrBTajmK1TNMLGPR4EnynZUUqriR9J28sDwF70BzXIgL+ByMaYAAAAASUVORK5CYII="},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-7753a4f1"]]);export{R as default};
