import{_ as e,r as a,m as l,p as s,F as t,H as r,d as o,w as i,J as n,G as c,i as d,a as u,e as p,I as f,Q as m,b as v,t as x,M as _,a2 as g,$ as h,ay as y,X as k,Y as w,h as b,j as C}from"./index-5HZnFt5a.js";import{_ as j}from"./uv-loading-icon.D2OVaaMI.js";import{_ as z}from"./z-paging.B8jSxtUa.js";import{_ as R}from"./reserve.D_MUsVaL.js";import{_ as V,a as $}from"./card-down.JLabKawd.js";import{_ as M}from"./play.DdU5vgv-.js";import{a as A}from"./index.BIXFsUHK.js";import{d as E}from"./dialog.CErO1ANM.js";const F=e({__name:"works",setup(e){const F=a(),G=a([]);async function I(e,a){const{code:l,data:s}=await E.taskLog({page:e,size:a,modelType:"video"});200===l?F.value.complete(s.records):F.value.complete(!1)}function L(e){y({title:"提示",content:"确定删除该作品？",success:async a=>{a.confirm&&(k({title:"删除中..."}),await E.delChatLog({id:e.id}),F.value.refresh(),w())}})}return(e,a)=>{const y=l(s("uv-icon"),c),k=m,w=t("ai-bindphone"),E=t("ai-privacy"),P=C,Q=d,T=l(s("uv-loading-icon"),j),H=l(s("z-paging"),z);return u(),r(n,null,[o(A,null,{left:i((()=>[o(y,{name:"arrow-left",size:"30rpx",onClick:e.$tools.back},null,8,["onClick"])])),center:i((()=>[o(k,{style:{"font-weight":"500","font-size":"34rpx"}},{default:i((()=>[p("我的作品")])),_:1})])),_:1}),o(Q,{class:"container"},{default:i((()=>[o(w,{ref:"aiPrivacyRef"},null,512),o(E,{ref:"aiPrivacyRef"},null,512),o(H,{ref_key:"pagingRef",ref:F,modelValue:G.value,"onUpdate:modelValue":a[0]||(a[0]=e=>G.value=e),onQuery:I,fixed:!1,height:`calc(100vh - ${e.$tools.height(!0)}px)`},{default:i((()=>[(u(!0),r(n,null,f(G.value,(a=>{var l,s;return u(),r(n,null,[0===a.children.length||(null==(l=null==a?void 0:a.children)?void 0:l.length)>0&&!(null==(s=null==a?void 0:a.children[0])?void 0:s.mp4)?(u(),v(Q,{key:0,class:"card-box"},{default:i((()=>[o(Q,{style:{position:"relative",background:"#fff"},class:"reserve"},{default:i((()=>[o(P,{src:R,mode:"center"}),o(Q,{class:"flex-center absolute-index1 mask"},{default:i((()=>[a.errMsg?(u(),v(Q,{key:0},{default:i((()=>[p(x(a.errMsg),1)])),_:2},1024)):(u(),v(T,{key:1,text:"生成中..",textSize:"30rpx"}))])),_:2},1024),o(Q,{class:"absolute-index3"},{default:i((()=>[o(P,{src:V,style:{width:"64rpx",height:"64rpx"},onClick:e=>L(a)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),o(Q,{class:"flex-between",style:{"margin-top":"28rpx"}},{default:i((()=>[o(Q,{class:"card-model"},{default:i((()=>[p(x(a.model),1)])),_:2},1024),o(Q,{class:"card-time"},{default:i((()=>[p(x(e.children.createdAt),1)])),_:1})])),_:2},1024),o(Q,{class:"uv-line-1 card-prompt"},{default:i((()=>{var e;return[p(x(null==(e=a.prompt)?void 0:e.replace(new RegExp("prompt ","g"),"")),1)]})),_:2},1024)])),_:2},1024)):(u(!0),r(n,{key:1},f(a.children,(e=>(u(),v(Q,{class:"card-box"},{default:i((()=>[o(Q,{style:{position:"relative"}},{default:i((()=>[e.cover?(u(),v(P,{key:0,src:e.cover},null,8,["src"])):(u(),v(P,{key:1,src:R,mode:"center"})),o(Q,{class:_(["flex-center absolute-index1",e.cover?"":"mask"]),onClick:a=>function(e){g({url:"/pages/video/play?id="+e.id,success:a=>{setTimeout((()=>{h("musicVideo",{data:e.mp4})}),500)}})}(e)},{default:i((()=>[o(P,{src:M,style:{width:"100rpx",height:"100rpx"}})])),_:2},1032,["class","onClick"]),o(Q,{class:"absolute-index2"},{default:i((()=>[o(P,{src:V,style:{width:"64rpx",height:"64rpx"},onClick:e=>L(a)},null,8,["onClick"])])),_:2},1024),o(Q,{class:"absolute-index3"},{default:i((()=>[o(P,{src:$,style:{width:"64rpx",height:"64rpx"},onClick:a=>function(e){b.download(e.mp4,"mp4")}(e)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),o(Q,{class:"flex-between",style:{"margin-top":"28rpx"}},{default:i((()=>[o(Q,{class:"card-model"},{default:i((()=>[p(x(a.model),1)])),_:2},1024),o(Q,{class:"card-time"},{default:i((()=>[p(x(e.createdAt),1)])),_:2},1024)])),_:2},1024),o(Q,{class:"uv-line-1 card-prompt"},{default:i((()=>{var e;return[p(x(null==(e=a.prompt)?void 0:e.replace(new RegExp("prompt ","g"),"")),1)]})),_:2},1024)])),_:2},1024)))),256))],64)})),256))])),_:1},8,["modelValue","height"])])),_:1})],64)}}},[["__scopeId","data-v-83e8f89f"]]);export{F as default};
