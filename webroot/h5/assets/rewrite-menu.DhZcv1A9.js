import{_ as e,u as a,r as t,m as l,G as o,p as s,a as u,b as r,w as n,d as i,e as d,t as p,T as c,g as m,L as f,X as v,Y as _,j as g,i as y,W as w,K as h,H as x,J as b,I as j,V as k}from"./index-5HZnFt5a.js";import{_ as C}from"./uv-navbar.BqnHoo3Z.js";import{_ as I}from"./uv-input.DP28rKYF.js";import{_ as K}from"./uv-modal.Clrzaq6u.js";import{_ as S,a as z}from"./edit.ClCNdCUx.js";import{_ as G}from"./dump.dPDEymx_.js";import{d as V}from"./dialog.CErO1ANM.js";const N=e({__name:"rewrite-record",props:{data:{type:Object,default:()=>({})},groupKey:{type:String,default:""}},emits:["update","detail"],setup(e,{emit:w}){const{t:h}=a(),x=t(!1),b=t(),j=t(""),k=e,C=w;function N(){j.value=k.data.title||"",b.value.open()}async function B(){v({title:h("app.api.loading")}),"params"===k.groupKey?await V.updateNewChatGroup({groupId:k.data.id,title:j.value}):await V.update({groupId:k.data.id,title:j.value}),_(),x.value=!1,C("update"),b.value.close()}async function F(){await V.deleteGroup({groupId:k.data.id}),x.value=!1,C("update")}const H=()=>{x.value=!x.value},R=()=>{C("detail",k.data.id)};return(a,t)=>{const v=g,_=y,w=l(s("uv-icon"),o),k=l(s("uv-input"),I),C=l(s("uv-modal"),K);return u(),r(_,{class:"record-item",onClick:R},{default:n((()=>[i(v,{src:S}),i(_,{class:"name uv-line-1"},{default:n((()=>[d(p(e.data.title),1)])),_:1}),i(_,{onClick:c(H,["stop","prevent"])},{default:n((()=>[i(w,{name:"more-dot-fill",size:"28rpx",color:"#000000",bold:""})])),_:1}),x.value?(u(),r(_,{key:0,class:"operate"},{default:n((()=>[i(_,{class:"item",onClick:c(N,["stop","prevent"])},{default:n((()=>[i(_,{class:"action"},{default:n((()=>[d(p(m(h)("chat.rewrite.menu.edit")),1)])),_:1}),i(v,{src:z})])),_:1}),i(_,{class:"item",onClick:c(F,["stop","prevent"])},{default:n((()=>[i(_,{class:"action"},{default:n((()=>[d(p(m(h)("chat.rewrite.menu.clear")),1)])),_:1}),i(v,{src:G})])),_:1})])),_:1})):f("",!0),i(C,{ref_key:"groupNameRef",ref:b,title:m(h)("chat.rewrite.menu.modal"),showCancelButton:!0,onConfirm:B},{default:n((()=>[i(k,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e)},null,8,["modelValue"])])),_:1},8,["title"])])),_:1})}}},[["__scopeId","data-v-22a6ae36"]]),B=e({__name:"rewrite-menu",props:{groupKey:{type:String,default:""}},emits:["new","change"],setup(e,{expose:c,emit:f}){const{t:v}=a(),_=t(),g=t([]),I=t(""),K=f,S=async()=>{const{data:e}=await V.getAppsGroup({modelId:I.value});g.value=e};const z=async()=>{var e;K("new"),null==(e=_.value)||e.close()},G=e=>{var a;null==(a=_.value)||a.close(),K("change",e)};return c({show:function(e){var a;I.value=e,S(),null==(a=_.value)||a.open()}}),(a,t)=>{const c=y,f=l(s("uv-navbar"),C),I=l(s("uv-icon"),o),K=k,V=l(s("uv-popup"),w);return u(),r(V,{ref_key:"popupRef",ref:_,mode:"left","z-index":"2999999",customStyle:{width:"600rpx"}},{default:n((()=>[i(f,{fixed:!1},{left:n((()=>[i(c,{class:"title"},{default:n((()=>[d(p(m(v)("chat.rewrite.menu.title")),1)])),_:1})])),_:1}),i(K,{"scroll-y":"",style:h({height:`${a.$tools.height().contentHeight}px`,padding:"0 26rpx",boxSizing:"border-box"})},{default:n((()=>[i(c,{class:"new-btn",onClick:z},{default:n((()=>[i(I,{name:"plus",color:"#574FFE",size:"28rpx",bold:""}),i(c,null,{default:n((()=>[d(p(m(v)("chat.rewrite.menu.create")),1)])),_:1})])),_:1}),(u(!0),x(b,null,j(g.value,((a,t)=>(u(),r(N,{key:t,data:a,groupKey:e.groupKey,onUpdate:S,onDetail:G},null,8,["data","groupKey"])))),128))])),_:1},8,["style"])])),_:1},512)}}},[["__scopeId","data-v-60915df1"]]);export{B as M};
