import{_ as a,u as t,r as e,s,B as o,C as l,a8 as i,F as r,m as n,p as c,b as u,w as d,a0 as f,a9 as p,U as m,G as g,i as v,a as _,d as b,e as x,t as y,g as h,H as w,J as j,I as k,K as $,a4 as C,j as I,V as R}from"./index-5HZnFt5a.js";import{_ as F}from"./uv-button.CiJ2J5v4.js";import{_ as S,a as z}from"./my-work-1.BS8iud04.js";import{_ as A}from"./video-create-fail.379UvUbK.js";import{_ as B}from"./re-edit-1.DlF31W5H.js";import{_ as D}from"./create-again-1.BJYmOOmv.js";import{a as H}from"./index.BIXFsUHK.js";import{D as P}from"./DrawList.hgrUbjMs.js";import{m as T}from"./mj.CpUrlHRv.js";import"./uv-loading-icon.D2OVaaMI.js";import"./z-paging.B8jSxtUa.js";import"./uv-image.B14LvnqC.js";const q=a({__name:"creating",setup(a){const{t:q}=t(),E=e(null),G=e({}),J=e("");async function K(){const a=await L();if(f(a))return void(G.value={failReason:q("app.error")});const t=C(a);if(t.length<=0)return void(G.value={failReason:q("app.error")});const e=p(t[0]);G.value=e,4!=e.status&&10!=e.status&&(E.value=setTimeout((()=>{K()}),3e3)),4!=e.status&&10!=e.status||U()}const L=async()=>new Promise((a=>{T.getDetailByIds({jobIds:J.value}).then((t=>{a(t.data)})).catch((t=>{m({title:t.message||q("app.http.error"),icon:"none"}),a("")}))}));function U(){clearTimeout(E.value),E.value=null}return s((()=>{const a=p(G.value);return a.progress<100&&!(null==a?void 0:a.failReason)})),o((a=>{J.value=null==a?void 0:a.id})),l((async()=>{await K()})),i((()=>{U()})),(a,t)=>{const e=r("ai-bindphone"),s=r("ai-privacy"),o=n(c("uv-icon"),g),l=v,i=I,f=n(c("uv-button"),F),p=R;return _(),u(l,{class:"creating-container container-bg"},{default:d((()=>[b(e,{ref:"aiPrivacyRef"},null,512),b(s,{ref:"aiPrivacyRef"},null,512),b(H,{bg:!1},{left:d((()=>[b(o,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:t[0]||(t[0]=t=>a.$tools.back()),class:"arrow-left"})])),center:d((()=>[b(l,{class:"creating-title"},{default:d((()=>[x(y(h(q)("draw.creating.title")),1)])),_:1})])),_:1}),b(l,{style:$(`height: ${a.$tools.height().contentHeight}px;padding: 0 26rpx;`)},{default:d((()=>[b(l,{class:"status-container"},{default:d((()=>[4!=G.value.status&&10!=G.value.status?(_(),w(j,{key:0},[b(i,{class:"creatingImg",src:S}),b(l,{class:"status-word"},{default:d((()=>[x(y(h(q)("draw.creating.progress")),1)])),_:1}),b(l,{class:"vip"},{default:d((()=>[x(y(h(q)("video.creating.vip")),1)])),_:1}),b(l,{class:"arrow-box"},{default:d((()=>[b(l,{class:"arrow"},{default:d((()=>[(_(),w(j,null,k(12,(a=>b(l,{class:"item",key:a}))),64))])),_:1})])),_:1}),b(f,{text:h(q)("video.creating.vip.btn"),onClick:t[1]||(t[1]=t=>a.$tools.to("/pagesA/my/vip/index",!0)),customStyle:{width:"312rpx",height:"70rpx",borderRadius:"35rpx",background:"linear-gradient(90deg, #574FFE 0%, #726AFB 100%)",border:"none"},customTextStyle:{fontSize:"28rpx",color:"#fff"}},null,8,["text","customStyle"])],64)):4==G.value.status?(_(),w(j,{key:1},[b(i,{class:"status-icon",src:A}),b(l,{class:"fail"},{default:d((()=>[x(y(h(q)("music.index.task.fail")),1)])),_:1})],64)):(_(!0),w(j,{key:2},k(G.value.responseResult,(t=>(_(),u(i,{src:t.thumb,mode:"widthFix",onClick:e=>a.$tools.previewImage(t.url)},null,8,["src","onClick"])))),256))])),_:1}),b(l,{class:"btn-container"},{default:d((()=>[b(l,{onClick:t[2]||(t[2]=t=>a.$tools.to("/pages/draw/task?jobId="+G.value.jobId))},{default:d((()=>[b(i,{src:B}),b(l,null,{default:d((()=>[x(y(h(q)("draw.creating.btn.edit")),1)])),_:1})])),_:1}),b(l,{onClick:t[3]||(t[3]=t=>a.$tools.to("/pages/draw/index",!0))},{default:d((()=>[b(i,{src:D}),b(l,null,{default:d((()=>[x(y(h(q)("video.creating.btn.continue")),1)])),_:1})])),_:1}),b(l,{onClick:t[4]||(t[4]=t=>a.$tools.to("/pagesA/my/task/index?tab=1",!0))},{default:d((()=>[b(i,{src:z}),b(l,null,{default:d((()=>[x(y(h(q)("video.creating.btn.mine")),1)])),_:1})])),_:1})])),_:1}),b(l,{class:"example"},{default:d((()=>[x(y(h(q)("video.creating.example")),1)])),_:1}),b(p,{"scroll-y":!0,style:$(`height: calc(${a.$tools.height().contentHeight}px - 810rpx)`)},{default:d((()=>[b(P)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-79d25f4d"]]);export{q as default};
