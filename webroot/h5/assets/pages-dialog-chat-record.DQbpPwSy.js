import{_ as a,a as e,b as l,w as t,d as o,e as u,t as n,j as s,i,r as d,o as r,F as c,m as f,p as m,H as p,L as A,J as v,G as g,an as y,ao as h,I as _,N as k,h as C}from"./index-5HZnFt5a.js";import{_ as b}from"./uv-button.CiJ2J5v4.js";import{_ as w}from"./uv-modal.Clrzaq6u.js";import{a as x}from"./index.BIXFsUHK.js";import{d as j}from"./dialog.CErO1ANM.js";import"./uv-loading-icon.D2OVaaMI.js";import"./uv-line.rnRAS3LR.js";const E=a({__name:"RecordPiece",props:{data:{type:Object,default:()=>({})},isTody:{type:Boolean,default:!1}},emits:["change"],setup(a,{emit:d}){const r=d;return(d,c)=>{const f=s,m=i;return e(),l(m,{class:"piece",onClick:c[0]||(c[0]=e=>{return l=a.data,void r("change",l);var l})},{default:t((()=>[o(m,{class:"left"},{default:t((()=>[o(f,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAJ+SURBVFiF7ZdBbtpAFIb/Z4O9LLtWogvnBKUXKEQ9QNoNkm0hmRsQ9QCkFyjJCYwwBqmLtrlAS27ABarQLrqm3dli/LrAUGNiMANUWfDtxvP03sd4Br8BTpzYD8qa8H3fAVAlIuOQBZl5AuDOtu1uLiHXdUuapnUAOIcUWStMNAqC4G2z2ZwmnxfSgbqut5l5IdMlolshxDQdJ4OqqiUAVWZ2mLmm63obwOWKaHLguq6hado9AERRdN5oNEaHEEkzHA6NKIru4+FL27bHizklGajrehWYL+exZADANM0JEY3iWkZybkVICHEGLDfeUVnUEEJUks/X9lAWruuWAJQk60/TmzeLXEKpdy6F53m59qSyLQAAmLm6jwywPGFbybVCQRDcapp2A+CJpM+fIAhGBxOK339LUmYncr2y/8mjE8p97Hu93hkRPZcpIoT45TjO94MJ+b7/CsCdjAwAKIqCwWDw2rKsr1tjc+Z8KiuzIIqiZ3nicq1QsVj8NJvN3kVRZMjIENHPcrn88WBC9XpdAPggI7Mrj+6UrQipqjoG1luCY7CooarqyjdSSQWNAYCZa/1+/2j/zJ7n1Zi5BgBBEKyc3rWe2vf9KwDteNhdNFIJfluW9SVP4cFg8Aap718s4gAAEV1blpXdwiYSdZh50wqNwzA839Tj9Pv9FhF1NuTohmF4mc6ReQ3yPK+mquoFMxtEtGwdmLmCeaOWKRVfoVxg3g6nfwyAu6xVzhTKwvf9CoBvWVJJGQBd27abu+TfWegBqQmAayL6wcwX+Hef21lGWigh9RmA8cD0e9u2r2TySgsB88a/UCi0FEV5Ee+zMRHdmKY52SfviRP78BcgDPIcfIV9AAAAAABJRU5ErkJggg=="}),o(m,{class:"intro uv-line-1"},{default:t((()=>[u(n(a.data.title),1)])),_:1})])),_:1}),o(m,{class:"time"},{default:t((()=>{var e,l;return[u(n(a.isTody?null==(e=a.data.updatedAt)?void 0:e.split(" ")[1].substring(0,5):null==(l=a.data.updatedAt)?void 0:l.split(" ")[0]),1)]})),_:1})])),_:1})}}},[["__scopeId","data-v-0038a59f"]]),F=a({__name:"record",setup(a){const s=d([]),F=d([]),I=d(!1),B=d(null),R=d([]),V=d([]),U=()=>{I.value=!0};async function N(){const{data:a}=await j.create({modelType:"chat"});T(a)}function T(a){k("CHAT_CHAT_GROUP",a),C.to("/pages/dialog/chat/chat",!0)}const Q=()=>{I.value=!1,s.value=[],F.value=[]},L=()=>{B.value.close()},S=async()=>{const a=s.value.concat(F.value);for(let e of a)await j.del({groupId:e});B.value.close(),I.value=!1,s.value=[],F.value=[],W()};async function W(){const{data:a}=await j.getChatGroup({modelType:"chat"});!function(a){R.value=[],V.value=[];let e=(new Date).getDate();e<10&&(e="0"+e),a.forEach((a=>{if(a.title=a.title.slice(0,7),null!=a.lastTime){let l=a.lastTime.split(" ")[0].split("-")[2];e==l?R.value=[...R.value,a]:V.value=[...V.value,a]}if(null===a.lastTime){let l=a.createdAt.split(" ")[0].split("-")[2];e==l?R.value=[...R.value,a]:V.value=[...V.value,a]}}))}(a)}return r((()=>{W()})),(a,d)=>{const r=c("ai-bindphone"),k=c("ai-privacy"),C=f(m("uv-icon"),g),j=i,W=f(m("uv-checkbox"),y),q=f(m("uv-checkbox-group"),h),J=f(m("uv-button"),b),z=f(m("uv-modal"),w);return e(),p(v,null,[o(j,null,{default:t((()=>[o(r,{ref:"aiPrivacyRef"},null,512),o(k,{ref:"aiPrivacyRef"},null,512),o(x,null,{left:t((()=>[o(j,{class:"back"},{default:t((()=>[o(C,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:d[0]||(d[0]=e=>a.$tools.back())}),o(j,null,{default:t((()=>[u("对话记录")])),_:1})])),_:1})])),right:t((()=>[I.value?A("",!0):(e(),l(C,{key:0,name:"/static/trash.png",size:"44rpx",onClick:U}))])),_:1}),o(j,{class:"container"},{default:t((()=>[R.value.length>0?(e(),l(j,{key:0,class:"part"},{default:t((()=>[o(j,{class:"time"},{default:t((()=>[u("今天")])),_:1}),o(j,{class:"content"},{default:t((()=>[o(q,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=a=>s.value=a),iconPlacement:"right",shape:"circle",size:"32rpx",placement:"column"},{default:t((()=>[(e(!0),p(v,null,_(R.value,(a=>(e(),p(v,{key:a.id},[I.value?(e(),l(W,{key:1,name:a.id},{default:t((()=>[o(E,{data:a,isTody:!0},null,8,["data"])])),_:2},1032,["name"])):(e(),l(E,{key:0,data:a,onChange:T,isTody:!0},null,8,["data"]))],64)))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):A("",!0),o(j,{class:"part"},{default:t((()=>[o(j,{class:"time"},{default:t((()=>[u("历史")])),_:1}),o(j,{class:"content"},{default:t((()=>[o(q,{modelValue:F.value,"onUpdate:modelValue":d[2]||(d[2]=a=>F.value=a),iconPlacement:"right",shape:"circle",size:"32rpx",placement:"column"},{default:t((()=>[(e(!0),p(v,null,_(V.value,(a=>(e(),p(v,{key:a.id},[I.value?(e(),l(W,{key:1,name:a.id},{default:t((()=>[o(E,{data:a},null,8,["data"])])),_:2},1032,["name"])):(e(),l(E,{key:0,data:a,onChange:T},null,8,["data"]))],64)))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),I.value?A("",!0):(e(),l(J,{key:1,type:"primary",icon:"plus",text:"新建会话",customStyle:{borderRadius:"30rpx",color:"#fff",background:"linear-gradient(90deg, #574FFE 0%, #726AFB 100%)",width:"236rpx",height:"96rpx",position:"fixed",bottom:"40rpx",left:"calc(50vw - 118rpx)"},onClick:N,iconSize:"40rpx",iconColor:"#fff"},null,8,["customStyle"]))])),_:1})])),_:1}),I.value?(e(),l(j,{key:0,class:"operate"},{default:t((()=>[o(j,{onClick:Q},{default:t((()=>[u("取消")])),_:1}),o(j,{style:{color:"#EA0000"},onClick:d[3]||(d[3]=a=>{var e;return null==(e=B.value)?void 0:e.open()})},{default:t((()=>[u("删除（"+n(s.value.length+F.value.length)+"）",1)])),_:1})])),_:1})):A("",!0),o(j,{class:"modal"},{default:t((()=>[o(z,{ref_key:"modal",ref:B,title:"删除内容",width:"410rpx",onConfirm:a.confirm},{default:t((()=>[o(j,{class:"modal-content"},{default:t((()=>[u(" 删除后内容将无法恢复，确认删除选中内容？ ")])),_:1})])),confirmButton:t((()=>[o(j,{class:"btns"},{default:t((()=>[o(J,{type:"primary",text:"取消",onClick:L,customStyle:{border:"none",borderRadius:"20rpx",color:"#574FFE",background:"#F5F5FF",width:"190rpx"}}),o(J,{type:"primary",text:"确定",onClick:S,customStyle:{border:"none",borderRadius:"20rpx",color:"#ffffff",background:"#EA0000",width:"190rpx"}})])),_:1})])),_:1},8,["onConfirm"])])),_:1})],64)}}},[["__scopeId","data-v-da92a631"]]);export{F as default};
