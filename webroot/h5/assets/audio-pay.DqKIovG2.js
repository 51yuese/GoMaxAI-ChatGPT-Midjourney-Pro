import{_ as a,u as e,r as l,E as o,a0 as s,m as u,G as t,p as n,a as r,b as i,w as v,d,e as c,t as p,g as m,ab as f,as as _,a1 as y,i as g}from"./index-5HZnFt5a.js";import{_ as x}from"./uv-line-progress.D7X4wFI6.js";import{_ as b}from"./uv-modal.Clrzaq6u.js";const k=a({__name:"audio-pay",setup(a,{expose:k}){const{t:C}=e(),T=l(""),h=l(null),M=l(null),S=l({}),j=l(!1),w=()=>{j.value?M.value.pause():M.value.play()},A=l(0),E=l("00:00"),z=l("00:00"),F=a=>{var e;const l=_();l.sessionCategory="soloAmbient",l.src=a;const o=y(null==(e=S.value)?void 0:e.duration),u=s(o)?"00:00":P(o);l.onCanplay((()=>{z.value=s(l.duration)?u:P(l.duration)})),l.onPlay((()=>{z.value=s(l.duration)?u:P(l.duration),j.value=!0})),l.onPause((()=>{j.value=!1})),l.onStop((()=>{l.seek(0),E.value="00:00",j.value=!1})),l.onEnded((()=>{l.seek(0),E.value="00:00",j.value=!1})),l.onError((()=>{l.seek(0),E.value="00:00",j.value=!1})),l.onTimeUpdate((()=>{if(l.duration>0){const a=l.currentTime/l.duration*100;A.value=Math.min(a,100).toFixed(2),E.value=P(l.currentTime)}else E.value="00:00"})),M.value=l,f((()=>{var a;null==(a=M.value)||a.play()}))},P=a=>{if(s(a))return"00:00";const e=Math.floor(a/60),l=Math.floor(a%60);return`${String(e).padStart(2,"0")}:${String(l).padStart(2,"0")}`},U=()=>{var a,e;null==(a=M.value)||a.stop(),null==(e=h.value)||e.close()};return o((()=>{var a;s(M.value)||(null==(a=M.value)||a.stop(),M.value=null)})),k({play:async a=>{var e;S.value=a,T.value=s(a.name)?C("digitalMan.video.modal.play.title1"):a.name,null==(e=h.value)||e.open(),await f(),F(a.fileUrl)}}),(a,e)=>{const l=u(n("uv-icon"),t),o=g,s=u(n("uv-line-progress"),x),f=u(n("uv-modal"),b);return r(),i(f,{ref_key:"modalRef",ref:h,class:"pagesA-video-modal",title:T.value,confirmColor:"#726AFB",confirmText:m(C)("digitalMan.video.modal.text"),onConfirm:U},{default:v((()=>[d(o,{class:"slot-content"},{default:v((()=>[d(o,{class:"sound-box"},{default:v((()=>[d(o,{class:"audio-sound-play"},{default:v((()=>[d(o,{class:"icon-box",onClick:w},{default:v((()=>[j.value?(r(),i(l,{key:0,name:"pause",color:"#000",size:"18"})):(r(),i(l,{key:1,name:"play-right-fill",color:"#000",size:"18"}))])),_:1}),d(o,{class:"time-box"},{default:v((()=>[c(p(E.value)+" / "+p(z.value),1)])),_:1}),d(o,{class:"progress-box"},{default:v((()=>[d(s,{percentage:A.value,showText:!1},null,8,["percentage"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["title","confirmText"])}}},[["__scopeId","data-v-212081bd"]]);export{k as a};
