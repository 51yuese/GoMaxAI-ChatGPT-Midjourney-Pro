var e,a;import{_ as l,u as t,r as s,E as i,m as n,G as o,p as u,a as c,b as d,w as r,d as m,H as v,J as p,I as y,K as f,e as g,t as k,g as h,a4 as A,ay as w,U as x,a0 as b,i as I,j as _,v as S,M as C,V as L,O as M,P as z,L as V,Q as R,bh as Y,T as E,a2 as Z,$ as G,h as U,s as j,o as D,bi as N,X as B,Y as T,B as O,F as W}from"./index-5HZnFt5a.js";import{a as Q}from"./index.BIXFsUHK.js";import{_ as F}from"./z-paging.B8jSxtUa.js";import{_ as P}from"./reserve.D_MUsVaL.js";import{_ as H}from"./video-create-fail.379UvUbK.js";import{d as J}from"./dialog.CErO1ANM.js";import{m as X}from"./mj.CpUrlHRv.js";import{_ as q}from"./uv-line.rnRAS3LR.js";import{m as K,c as $,i as ee,v as ae}from"./video-pay.J-yzeUW5.js";import{a as le}from"./audio-pay.DqKIovG2.js";import{m as te}from"./digital-man.CbE7ZGLY.js";import"./uv-modal.Clrzaq6u.js";import"./uv-loading-icon.D2OVaaMI.js";import"./uv-input.DP28rKYF.js";import"./uv-line-progress.D7X4wFI6.js";const se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDIgNzkuYjdjNjRjY2Y5LCAyMDI0LzA3LzE2LTEyOjM5OjA0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjYuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjUtMDYtMDlUMTI6MTk6NDgrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI1LTA2LTEyVDE0OjI4OjU2KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI1LTA2LTEyVDE0OjI4OjU2KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5YjE3MDlhOC1iODc4LTQxMjctODg3My1kNWExNjk4ZTJkOGIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo5YWUzMzNjNC1mMDE2LTI4NGUtODVmZS02MjJmZjBlOGE2M2MiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYjcyMDc3MS1jODMyLTRlZDktYWM0Yi1hMzk1YjAwMjRlMTQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmRiNzIwNzcxLWM4MzItNGVkOS1hYzRiLWEzOTViMDAyNGUxNCIgc3RFdnQ6d2hlbj0iMjAyNS0wNi0wOVQxMjoxOTo0OCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI2LjAgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjliMTcwOWE4LWI4NzgtNDEyNy04ODczLWQ1YTE2OThlMmQ4YiIgc3RFdnQ6d2hlbj0iMjAyNS0wNi0xMlQxNDoyODo1NiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI2LjAgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Q39j5gAAAp9JREFUeNrtm92RhCAMx7cESuB5nyzBEuhg7UBLoIMtwRIogRIsgRIswdOZ7MyOh/IRQHB5yNzT6eYHyT8J+FiW5ZHSns9nu9p7tXE1CX+71Ujq37JZSscbcHg5MLUavyWA1bHhxPG9TSl3QwrnmYPzH5O3ALA6QmFrLx7G7wBg9HR+szlFKMQGoBAANuuLBQBZf0HaaBlm1He3xNZ7LAB58mwBYbKX0i3saDQAH+JXANhW2SGv8GAA4MVcQ/yQNoDCAnjvfoMKrSShpGw4+F+JBNAGUJQBC2CyfBFDVoD/SuNA4XQqpybnO5cfrHsRYhewr2eIWHJqAiB8tyyyGuS7Z8xIAMIXgPJNWggIQ4RkqnwBzCELFwgpdRCnUqcoVwNQMRoYqBK3LvEFCY4YJBgLYPIF8MbmgEx6itEXAA1ZtyMA8FD1hE8dMFhKII0IgCCUQIYohc+SF0/RtzvWJNYL49PhvWySVwahsC1Ok81UOPCM0ZQUpW1IFgdgFxICepUZoLxdlahYAMUdjFQAFUABAKDgYCA3LGZxkx0AcFhXbY1XndwGmErLnUIQLQCLml8U5jy3nVq5TH7aQpynLi27S7vZFwKgdxmOuEx+eOHbXzsccZncsoKSn3U+s+35VUlKYFhQeiSD8qStZIWpANX4M+tOiXTxM32tuii5GIJw6MFILYUrgAqgAqgAKoAKoAKoABAnQwSqq7bEKREKAJzpK1NtfUG522DmlyFufTcZ9f5tLAAsx0FJiO8MbF/0cr0YlcB54nIVJkQIZDcp0vT8PGYS5LmNy2Fh+s+XZylksPv65K1Dbt8mBzm9YtWGg1vn5PYADLlE/AIA071DcncApvOH5u4Axl8H0PtcaL6bCkw5Hb5cfcVNQGK87PDlD8sIryZx+YKOAAAAAElFTkSuQmCC",ie=l({__name:"VideoList",setup(e,{expose:a}){const{t:l}=t(),S=s(),C=s([]),L=s(null);async function M(e,a){const l=await J.taskLog({page:e,size:a,modelType:"video"});if(200===l.code){const e=A(l.data.records);S.value.complete(e);if(!e.some((e=>{var a;return!(!e.errMsg&&e.children.length>0&&(null==(a=null==e?void 0:e.children[0])?void 0:a.mp4))&&!e.errMsg})))return void Y();L.value=setTimeout((()=>{R()}),3e3)}else S.value.complete(!1)}function z(e){w({title:l("app.tip.title"),content:l("square.index.video.del"),success:function(a){a.confirm&&async function(e){const{code:a}=await J.delChatLog({id:e.id});200===a&&(x({title:l("app.del.success"),icon:"none"}),S.value.refresh())}(e)}})}const V=e=>{const a=parseInt(e),l=a%60;return`${Math.floor(a/60).toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},R=()=>{S.value.refresh()},Y=()=>{b(L.value)||(clearTimeout(L.value),L.value=null)};return i((()=>{Y()})),a({getData:R}),(e,a)=>{const t=I,s=_,i=n(u("uv-icon"),o),A=n(u("z-paging"),F);return c(),d(A,{fixed:!1,modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),emptyViewText:h(l)("app.noContent"),emptyViewImg:"/static/empty-1.png",emptyViewImgStyle:{width:"128rpx",height:"128rpx"},ref_key:"pagingRef",ref:S,height:"100%","default-page-size":99,onQuery:M},{default:r((()=>[m(t,{class:"list"},{default:r((()=>[(c(!0),v(p,null,y(C.value,((a,n)=>(c(),d(t,{key:n,class:"item",onClick:l=>e.$tools.to("/pages/video/task?id="+a.id),onLongpress:e=>z(a)},{default:r((()=>{var e;return[!a.errMsg&&a.children.length>0&&(null==(e=null==a?void 0:a.children[0])?void 0:e.mp4)?(c(!0),v(p,{key:0},y(a.children,(e=>(c(),v(p,null,[(null==e?void 0:e.cover)?(c(),v(p,{key:0},[m(t,{class:"cover",style:f({backgroundImage:`url(${e.cover})`})},null,8,["style"]),m(t,{class:"duration"},{default:r((()=>[m(t,null,{default:r((()=>{var e;return[g(k(V((null==(e=a.requestParams)?void 0:e.duration)||"5")),1)]})),_:2},1024)])),_:2},1024)],64)):(c(),v(p,{key:1},[m(s,{src:P,mode:"center",style:{width:"100%",height:"100%","border-radius":"20rpx"}}),m(t,{class:"flex-center absolute-index1 mask"},{default:r((()=>[m(i,{name:"info-circle",label:h(l)("my.task.index.draw.circle")},null,8,["label"])])),_:1})],64))],64)))),256)):a.errMsg?(c(),v(p,{key:1},[m(s,{class:"status-icon",src:H}),m(t,{class:"fail"},{default:r((()=>[g(k(h(l)("my.task.index.draw.fail")),1)])),_:1})],64)):(c(),v(p,{key:2},[m(s,{class:"status-icon loading",src:se}),m(t,{class:"ing"},{default:r((()=>[g(k(h(l)("my.task.index.draw.loading")),1)])),_:1})],64))]})),_:2},1032,["onClick","onLongpress"])))),128))])),_:1})])),_:1},8,["modelValue","emptyViewText"])}}},[["__scopeId","data-v-77000130"]]),ne=l({__name:"DrawList",props:{type:{type:String,default:"1"}},setup(e,{expose:a}){const{t:l}=t(),i=s(),A=s([]),b=s("1"),M=e,z=s([{name:l("my.task.index.draw.tabs.name1"),value:"1"},{name:l("my.task.index.draw.tabs.name2"),value:"2"},{name:l("my.task.index.draw.tabs.name3"),value:"3"},{name:l("my.task.index.draw.tabs.name4"),value:"4"}]);async function V(e,a){const l="1"===b.value?X.drawList:X.drawListPage,t=await l({page:e,size:12,keyType:"4"===b.value?"1":b.value});200===t.code?i.value.complete(t.data.rows||t.data.result):i.value.complete(!1)}function R(e){w({title:l("app.tip.title"),content:l("square.index.draw.del"),success:function(a){a.confirm&&async function(e){const{code:a}=await X.delete({id:e.id});200===a&&(x({title:l("app.del.success"),icon:"none"}),i.value.refresh())}(e)}})}function Y(e){w({title:l("app.tip.title"),content:l("square.index.draw.del"),success:function(a){a.confirm&&async function(e){const{code:a}=await X.del({id:e.id});200===a&&(x({title:l("app.del.success"),icon:"none"}),i.value.refresh())}(e)}})}S((()=>M.type),(e=>{var a;b.value=e,null==(a=i.value)||a.refresh()}),{immediate:!0});return a({getData:()=>{i.value.refresh()}}),(e,a)=>{const t=I,s=L,w=_,x=n(u("uv-icon"),o),S=n(u("z-paging"),F);return c(),d(t,{class:"draw-list-container"},{default:r((()=>[m(s,{"scroll-x":!0,style:{overflow:"auto","max-width":"100%","white-space":"nowrap"}},{default:r((()=>[m(t,{class:"draw-tabs"},{default:r((()=>[(c(!0),v(p,null,y(z.value,(e=>(c(),d(t,{class:C(["draw-tabs-item",{is_active:b.value===e.value}]),key:e.value,onClick:a=>(e=>{b.value=e.value,i.value.refresh()})(e)},{default:r((()=>[g(k(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),m(S,{fixed:!1,modelValue:A.value,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value=e),emptyViewText:h(l)("app.noContent"),emptyViewImg:"/static/empty-1.png",emptyViewImgStyle:{width:"128rpx",height:"128rpx"},ref_key:"pagingRef",ref:i,height:"100%",onQuery:V},{default:r((()=>[m(t,{class:"list"},{default:r((()=>[(c(!0),v(p,null,y(A.value,((a,s)=>(c(),d(t,{key:s,class:"item",onClick:l=>"1"===b.value?e.$tools.to("/pages/draw/task?jobId="+a.jobId):e.$tools.to("/pages/draw/klingTask?jobId="+a.id),onLongpress:e=>"1"===b.value?R(a):Y(a)},{default:r((()=>[10===a.status?(c(),v(p,{key:0},[a.responseResult?(c(),d(t,{key:0,class:"cover",style:f({backgroundImage:`url(${a.responseResult[0].url+"?imageView2/0/w/300/q/85&format=webp&quality=lossless&width=300&height=300"})`})},null,8,["style"])):(c(),v(p,{key:1},[m(w,{src:P,mode:"center",style:{width:"100%",height:"100%","border-radius":"20rpx"}}),m(t,{class:"flex-center absolute-index1 mask"},{default:r((()=>[m(x,{name:"info-circle",label:h(l)("my.task.index.draw.circle")},null,8,["label"])])),_:1})],64))],64)):4===a.status?(c(),v(p,{key:1},[m(w,{class:"status-icon",src:H}),m(t,{class:"fail"},{default:r((()=>[g(k(h(l)("music.index.task.fail")),1)])),_:1})],64)):(c(),v(p,{key:2},[m(w,{class:"status-icon loading",src:se}),m(t,{class:"ing"},{default:r((()=>[g(k(h(l)("my.task.index.draw.loading")),1)])),_:1})],64))])),_:2},1032,["onClick","onLongpress"])))),128))])),_:1})])),_:1},8,["modelValue","emptyViewText"])])),_:1})}}},[["__scopeId","data-v-a8b4df42"]]);const oe=l({name:"uv-divider",mixins:[M,z,{props:{dashed:{type:Boolean,default:!1},hairline:{type:Boolean,default:!0},dot:{type:Boolean,default:!1},textPosition:{type:String,default:"center"},text:{type:[String,Number],default:""},textSize:{type:[String,Number],default:14},textColor:{type:String,default:"#909399"},lineColor:{type:String,default:"#dcdfe6"},...null==(a=null==(e=uni.$uv)?void 0:e.props)?void 0:a.divider}}],emits:["click"],computed:{textStyle(){const e={};return e.fontSize=this.$uv.addUnit(this.textSize),e.color=this.textColor,e},leftLineStyle(){const e={};return"left"===this.textPosition?e.width="80rpx":e.flex=1,e},rightLineStyle(){const e={};return"right"===this.textPosition?e.width="80rpx":e.flex=1,e}},methods:{click(){this.$emit("click")}}},[["render",function(e,a,l,t,s,i){const o=n(u("uv-line"),q),v=R,p=I;return c(),d(p,{class:"uv-divider",style:f([e.$uv.addStyle(e.customStyle)]),onClick:i.click},{default:r((()=>[m(o,{color:e.lineColor,customStyle:i.leftLineStyle,hairline:e.hairline,dashed:e.dashed},null,8,["color","customStyle","hairline","dashed"]),e.dot?(c(),d(v,{key:0,class:"uv-divider__dot"},{default:r((()=>[g("●")])),_:1})):e.text?(c(),d(v,{key:1,class:"uv-divider__text",style:f([i.textStyle])},{default:r((()=>[g(k(e.text),1)])),_:1},8,["style"])):V("",!0),m(o,{color:e.lineColor,customStyle:i.rightLineStyle,hairline:e.hairline,dashed:e.dashed},null,8,["color","customStyle","hairline","dashed"])])),_:1},8,["style","onClick"])}],["__scopeId","data-v-2d105b97"]]),ue=l({__name:"MusicList",props:{sticky:{type:Boolean,default:!0}},setup(e,{expose:a}){Y((e=>({"313a13ab":R.value,"313a13ac":j.value})));const{t:l}=t(),S=s([]),C=s(),L=s(!1),M=s({}),z=s({}),R=s("0"),j=s("0"),D=s(20),N=s(1);function B(e,a,l){R.value=e.detail.x-140+"px",j.value=e.detail.y-100+"px",M.value=a,z.value=l,L.value=!0}function T(){var e;L.value=!1,e=M.value,w({title:l("app.tip.title"),content:l("square.index.music.del"),success:function(a){a.confirm&&async function(e){const{code:a}=await J.delChatLog({id:e.id});200===a&&(x({title:l("app.del.success"),icon:"none"}),C.value.refresh())}(e)}})}function O(){L.value=!1,U.download(z.value.mp4,"mp4")}function W(){L.value=!1,U.download(z.value.mp3,"mp3")}const Q=s(null);async function X(e,a){const l=await J.taskLog({page:e,size:a,modelType:"music"});if(200===l.code){const t=A(l.data.records);C.value.complete(t),N.value=e,D.value=a;if(!t.some((e=>{var a;return!(!e.errMsg&&e.children.length>0&&(null==(a=null==e?void 0:e.children[0])?void 0:a.mp3))&&!e.errMsg})))return void K();Q.value=setTimeout((()=>{q()}),3e3)}else C.value.complete(!1)}const q=()=>{C.value.refresh()},K=()=>{b(Q.value)||(clearTimeout(Q.value),Q.value=null)};return i((()=>{K()})),a({getData:q}),(a,t)=>{const s=I,i=_,A=n(u("uv-icon"),o),w=n(u("uv-divider"),oe),x=n(u("z-paging"),F);return c(),d(x,{fixed:!1,modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=e=>S.value=e),emptyViewText:h(l)("app.noContent"),emptyViewImg:"/static/empty-1.png",emptyViewImgStyle:{width:"128rpx",height:"128rpx"},ref_key:"pagingRef",ref:C,scrollable:e.sticky,height:"100%","default-page-size":99,onQuery:X},{default:r((()=>[m(s,{class:"music-list"},{default:r((()=>[(c(!0),v(p,null,y(S.value,((e,t)=>{var n;return c(),v(p,{key:t},[!e.errMsg&&e.children.length>0&&(null==(n=null==e?void 0:e.children[0])?void 0:n.mp3)?(c(!0),v(p,{key:0},y(e.children,(a=>(c(),d(s,{class:"music-item",onClick:e=>function(e){Z({url:`/pages/music/task?id=${e.id}&from=my&pageNum=${N.value}&pageSize=${D.value}`,success:a=>{setTimeout((()=>{G("musicVideo",{data:e.mp4})}),500)}})}(a)},{default:r((()=>[(null==a?void 0:a.cover)?(c(),d(s,{key:0,class:"cover",style:f({backgroundImage:`url(${a.cover})`})},null,8,["style"])):(c(),v(p,{key:1},[m(i,{src:P,mode:"center",style:{width:"100%",height:"100%","border-radius":"20rpx"}}),m(s,{class:"flex-center absolute-index1 mask"},{default:r((()=>[m(A,{name:"info-circle",label:h(l)("my.task.index.draw.circle")},null,8,["label"])])),_:1})],64)),m(s,{class:"music-info"},{default:r((()=>[m(s,{class:"version"},{default:r((()=>[g(k(e.model),1)])),_:2},1024),m(s,{class:"name uv-line-1"},{default:r((()=>[g(k(null==a?void 0:a.title),1)])),_:2},1024),m(s,{class:"desc uv-line-1"},{default:r((()=>[g(k(null==a?void 0:a.intro),1)])),_:2},1024)])),_:2},1024),m(s,{class:"more-dot",onClick:E((l=>B(l,e,a)),["stop"])},{default:r((()=>[m(A,{name:"more-dot-fill",color:"#6F7478",size:"22"})])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),256)):e.errMsg?(c(),d(s,{key:1,class:"music-item"},{default:r((()=>[m(s,{class:"cover"},{default:r((()=>[m(i,{class:"status-icon",src:H})])),_:1}),m(s,{class:"music-info"},{default:r((()=>[m(s,{class:"version"},{default:r((()=>[g(k(e.model),1)])),_:2},1024),m(s,{class:"fail"},{default:r((()=>[g(k(h(l)("my.task.index.draw.fail")),1)])),_:1})])),_:2},1024),m(s,{class:"more-dot",onClick:E((l=>B(l,e,a.children)),["stop"])},{default:r((()=>[m(A,{name:"more-dot-fill",color:"#6F7478",size:"22"})])),_:2},1032,["onClick"])])),_:2},1024)):(c(),d(s,{key:2,class:"music-item"},{default:r((()=>[m(s,{class:"cover"},{default:r((()=>[m(i,{class:"status-icon loading",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAU+SURBVHic7ZtdUttIEMf/PXINj/GeYJUTxLmBOQHsoxGutU4QOIHhBJATiJSY8iPkBHFOEN8gyg38apXdsw+MKSHrY2RbA2z59wTWfLRao+6Z7hbBMXEc9z3PO9Fad4nI11onAH6mafoYhuHctTzkaiKlVI+IbrTW/ZImCYBvQRBcuZIJcKSA+/v7CyK6sWw+S9P02NVqEG1PEMfxaYObB4De0dHRQ2sC5WhVAZPJxBdCNLl5AIDWuh/H8VULIm3QqgKYeQzA36avEOJLFEXd/UpUME/L4/d36NuVUv67L0HK6LQ1sFKqhy2ffoZeXYMoitZzzLcxnK0pgJm7Quy2wIjIL/o9juO+EOILnlbY82uilEoATIUQ14PBILGZo7GEURT5Ga07JYqirlIqEkL8AHCKzM0bfAAjZv6tlLqyGdNqBURR1O10OhdG610AUEoBwF2ZtpfLZSKltBm+illWBinlL9i/VmOlFOo2VrUrYDKZ+FLKX0KIMTY1PmLm3/f39xf5fmEYJkQ0tRS2kNVq9X39t5TyBs1tyrhItiy1CmDmh7qJiegmjuPTgr7fi9pbkgyHwynw9M4DGG0zCBGNq9xppQKUUiNYWGIAEELc5Cc6Pz+/3XYVMPNlZuwv24xhqHSndSvgpMFEfqfT2VAWEYV4Oug04Xo4HD5m/u837J+ntH+dAqye/hrP8zYUNhgMEiHEMSyVoLW+zBou43F23RGW3kedAhpNrLUubD8YDJIgCD4CKFsNcyKaCiE+np+f3zaZc1fq3OAcDZTAzH+qrgdBcAfgzsQGfAAfVqvVn+VyOavYxe3jWFw6RqUCiOhRa13pRnJMbRoFQTBDxsdXEYbh3Ozw/AZy5Cmdq/IVIKKvDSa5W7utfcPM39rqX6mAwWCQaK0vq9oYEiHEdWPJLFkul7fY8lUgomnVg6ndCBmjVGq8mPk6TdPPtoePbTD2weZB5EmMGy6lUUzQRHT/BgAL47V3zAFnbNl8DuDY2JtSnEWF90Ucx6cmzOaXtSGiKRGFNqvy3Slgjdmmn+BJET6e9hKPq9Xqe1vG+MCBA/8/XhjBKIq6R0dH/dVq1fM8b0ZEszb9+1vgWQHGvUTYPPzcpWl6+RqZ210we5ax1roH4yEWi8V1/j4E8JzCekDxyW8kpYwcyLw3lFJXQogfJhPdBeBrrS+klL/yUSsBAMxcl787NXG5N89kMvFRvlv0O53Oi9Pt+ixQG/kRQnzaTTQ3MHNlGE8I8SI+uFZAbdCDmf/aQS5nWMi5aQOIqDY44XmeVQDjDTCtuZ5k/1nbgLr4fbJYLOoGfhMMh8NpVSheCPHiWC2A2vj9nJnflRskorDgfuZa68v8vubFRsict0/wZBQTADMhxEan94LJIn8CgDRNv72nh3jgwIEDBw4cONA6jfICplqsBwCus0JtYa0AU/mZLZiaa62vXRc05FnXGmwbv7RSwGQy8Zn5B4rTUZ/r8m9tkc8VMvNx06yQVaWoCSz6RdeYeaM8ziEvQl+e59kmTp+xLZX9UHbB87zSa21SVPtXVqNUhZUCFovFz4rLVddaIwzDecGZv3FhppUCwjBMABRVgDyenZ09FvzuBFP8cAHgDkC4zQdXjdygUmpERJ/MUvtpqr4aYwqffWbuvrY7dV4fYL4gyxdev1r2qbUPJoow7rQoCTOSUnYB/ONSHsDBZ3NZtNZVRc+nLj6SyuNUAajJQEkpfUdyPON6BSQu57PB9Qqo2jInr7GldqqAIAi+olgJ8+wHEi55lTK5TIkbiCghoq+vlXz5D4V7F5W4LjaKAAAAAElFTkSuQmCC"})])),_:1}),m(s,{class:"music-info"},{default:r((()=>[m(s,{class:"version"},{default:r((()=>[g(k(e.model),1)])),_:2},1024),m(s,{class:"fail"},{default:r((()=>[g(k(h(l)("my.task.index.draw.loading")),1)])),_:1})])),_:2},1024),m(s,{class:"more-dot-1",onClick:E((l=>B(l,e,a.children)),["stop"])},{default:r((()=>[m(A,{name:"more-dot-fill",color:"#6F7478",size:"22"})])),_:2},1032,["onClick"])])),_:2},1024))],64)})),128)),L.value?(c(),d(s,{key:0,class:"music-option"},{default:r((()=>[m(s,{style:{position:"absolute",width:"100%",height:"100%","z-index":"1"},onClick:t[0]||(t[0]=e=>L.value=!1)}),m(s,{class:"music-option-box"},{default:r((()=>{var e,a;return[(null==(e=z.value)?void 0:e.mp3)?(c(),d(s,{key:0,class:"music-option-box-item",onClick:O},{default:r((()=>[m(A,{name:"/static/download-video-1.png",size:"32rpx"}),m(s,null,{default:r((()=>[g(k(h(l)("my.task.index.music.mp4")),1)])),_:1})])),_:1})):V("",!0),m(w,{customStyle:{margin:"0"},lineColor:"#E0E2E9"}),(null==(a=z.value)?void 0:a.mp3)?(c(),d(s,{key:1,class:"music-option-box-item",onClick:W},{default:r((()=>[m(A,{name:"/static/download-audio-1.png",size:"32rpx"}),m(s,null,{default:r((()=>[g(k(h(l)("my.task.index.music.mp3")),1)])),_:1})])),_:1})):V("",!0),m(w,{customStyle:{margin:"0"},lineColor:"#E0E2E9"}),m(s,{class:"music-option-box-item",onClick:T},{default:r((()=>[m(A,{name:"/static/delete-12.png",size:"32rpx"}),m(s,null,{default:r((()=>[g(k(h(l)("app.del")),1)])),_:1})])),_:1})]})),_:1})])),_:1})):V("",!0)])),_:1})])),_:1},8,["modelValue","emptyViewText","scrollable"])}}},[["__scopeId","data-v-05fdd09a"]]),ce=l({__name:"Human",props:{type:{type:String,default:"1"}},setup(e){const{t:a}=t(),l=e,f=s(null),w=s(null),S=[{key:"renaming",name:a("my.task.index.human.more.renaming")},{key:"del",name:a("my.task.index.human.more.del")}],M=[{name:a("my.works"),id:"1"},{name:a("human.select.tabs.name1"),id:"2"},{name:a("sound.select.tabs.name1"),id:"3"}],z=s("1"),R=e=>{var a;b(e)||(re(),z.value=String(e),null==(a=f.value)||a.reload())},Y=j((()=>{const e=z.value;return"1"===e?a("my.task.index.human.toast1"):"2"===e?a("my.task.index.human.toast2"):"3"===e?a("my.task.index.human.toast3"):void 0})),E=s([]),Z=async(e,a)=>{const l=z.value;"1"===l?await G({page:e,size:a}):"2"===l?await U({page:e,size:a}):"3"===l&&await O({page:e,size:a})},G=async e=>{var a;await N();const{data:l}=await te.myWorks(e),t=A(null==l?void 0:l.rows);null==(a=f.value)||a.complete(t);t.some((e=>"0"===String(e.status)&&(b(e.fileUrl)||b(e.cover))))&&"1"===z.value&&(w.value=setTimeout((()=>{G(e)}),3e3))},U=async e=>{var a;await N();const{data:l}=await te.getMyVideos(e),t=A(null==l?void 0:l.rows);null==(a=f.value)||a.complete(t);t.some((e=>"0"===String(e.status)&&(b(e.fileUrl)||b(e.cover))))&&"2"===z.value&&(w.value=setTimeout((()=>{U(e)}),3e3))},O=async e=>{var a;await N();const{data:l}=await te.getMyVoices(e),t=A(null==l?void 0:l.rows);null==(a=f.value)||a.complete(t);t.some((e=>"0"===String(e.status)&&(b(e.fileUrl)||b(e.cover))))&&"3"===z.value&&(w.value=setTimeout((()=>{O(e)}),3e3))},W=s(null),Q=s(null),P=e=>{var a,l,t;const s=z.value;"1"===s?null==(a=W.value)||a.play(e.name,e.fileUrl):"2"===s?null==(l=W.value)||l.play(e.name,e.fileUrl):"3"===s&&(null==(t=Q.value)||t.play(e))},J=s(null),X=e=>{var l;const t=z.value;q.value=e,"1"===t?oe.value=a("my.task.index.human.tip1"):"2"===t?oe.value=a("my.task.index.human.tip2"):"3"===t&&(oe.value=a("my.task.index.human.tip3")),null==(l=J.value)||l.open()},q=s({}),ie=e=>{var a,l;"renaming"===e.key&&(null==(a=ce.value)||a.open()),"del"===e.key&&(null==(l=ne.value)||l.open())},ne=s(null),oe=s(""),ue=async e=>{var l,t;const s=null==(l=q.value)?void 0:l.id;if(b(s))return;B({title:a("my.task.index.human.del")});const i=z.value;let n;if("1"===i){const{code:e}=await te.deleteVideo({id:s});n=e}else if("2"===i){const{code:e}=await te.deleteVideo({id:s});n=e}else if("3"===i){const{code:e}=await te.deleteVoice({id:s});n=e}if(T(),200!==n)return e(!1);x({title:a("app.del.success")}),e(!0),null==(t=f.value)||t.reload()},ce=s(null),de=async(e,l)=>{var t,s;const i=null==(t=q.value)?void 0:t.id;if(b(i))return l(!1);const n=z.value;let o;if(B({title:a("my.task.index.human.save")}),"1"===n){const{code:a}=await te.updateVideo({id:i,name:e});o=a}else if("2"===n){const{code:a}=await te.updateVideo({id:i,name:e});o=a}else if("3"===n){const{code:a}=await te.updateVoice({id:i,name:e});o=a}if(T(),200!==o)return l(!1);x({title:a("app.edit.success")}),l(!0),null==(s=f.value)||s.reload()},re=()=>{b(w.value)||(clearTimeout(w.value),w.value=null)};return D((()=>{R(l.type||"1")})),i((()=>{re()})),(e,l)=>{const t=I,s=L,i=_,A=n(u("uv-icon"),o),w=n(u("z-paging"),F);return c(),d(t,{class:"human-list-container"},{default:r((()=>[m(t,{class:"scroll-view-box"},{default:r((()=>[m(s,{class:"scroll-view","scroll-x":!0},{default:r((()=>[m(t,{class:"human-tabs"},{default:r((()=>[(c(),v(p,null,y(M,(e=>m(t,{class:C(["human-tabs-item",{is_active:z.value===e.id}]),onClick:a=>R(e.id)},{default:r((()=>[g(k(e.name),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1})])),_:1}),m(t,{class:"human-scroll-box"},{default:r((()=>[m(w,{ref_key:"pagingRef",ref:f,modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value=e),fixed:!1,height:"100%","show-loading-more-no-more-view":!1,"loading-more-default-as-loading":!0,"default-page-size":100,emptyViewText:h(a)("app.noContent"),emptyViewImg:"/static/empty-1.png",emptyViewImgStyle:{width:"128rpx",height:"128rpx"},onQuery:Z},{default:r((()=>["1"===z.value?(c(),d(t,{key:0,class:"assets-paging-content"},{default:r((()=>[(c(!0),v(p,null,y(E.value,(e=>(c(),v(p,{key:e.id},["0"===String(e.status)?(c(),d(t,{key:0,class:"item generation"},{default:r((()=>[m(i,{class:"status-icon loading",src:se}),m(t,{class:"ing"},{default:r((()=>[g(k(h(a)("my.task.index.draw.loading")),1)])),_:1})])),_:1})):"2"===String(e.status)?(c(),d(t,{key:1,class:"item generation"},{default:r((()=>[m(i,{class:"status-icon",src:H}),m(t,{class:"fail"},{default:r((()=>[g(k(h(a)("my.task.index.draw.fail")),1)])),_:1})])),_:1})):(c(),d(t,{key:2,class:"item li",onClick:a=>P(e),onLongpress:a=>X(e)},{default:r((()=>[m(i,{class:"cover",src:e.cover,mode:"aspectFill"},null,8,["src"]),e.name?(c(),d(t,{key:0,class:"content"},{default:r((()=>[m(t,{class:"title-box"},{default:r((()=>[g(k(e.name),1)])),_:2},1024)])),_:2},1024)):V("",!0)])),_:2},1032,["onClick","onLongpress"]))],64)))),128))])),_:1})):V("",!0),"2"===z.value?(c(),d(t,{key:1,class:"assets-paging-content"},{default:r((()=>[(c(!0),v(p,null,y(E.value,(e=>(c(),v(p,{key:e.id},["0"===String(e.status)?(c(),d(t,{key:0,class:"item generation"},{default:r((()=>[m(i,{class:"status-icon loading",src:se}),m(t,{class:"ing"},{default:r((()=>[g(k(h(a)("my.task.index.human.ing1")),1)])),_:1})])),_:1})):"2"===String(e.status)?(c(),d(t,{key:1,class:"item generation"},{default:r((()=>[m(i,{class:"status-icon",src:H}),m(t,{class:"fail"},{default:r((()=>[g(k(h(a)("my.task.index.draw.fail")),1)])),_:1})])),_:1})):(c(),d(t,{key:2,class:"item li",onClick:a=>P(e),onLongpress:a=>X(e)},{default:r((()=>[m(i,{class:"cover",src:e.cover,mode:"aspectFill"},null,8,["src"]),e.name?(c(),d(t,{key:0,class:"content"},{default:r((()=>[m(t,{class:"title-box"},{default:r((()=>[g(k(e.name),1)])),_:2},1024)])),_:2},1024)):V("",!0)])),_:2},1032,["onClick","onLongpress"]))],64)))),128))])),_:1})):V("",!0),"3"===z.value?(c(),d(t,{key:2,class:"assets-paging-content sound"},{default:r((()=>[(c(!0),v(p,null,y(E.value,(e=>(c(),v(p,{key:e.id},["0"===String(e.status)?(c(),d(t,{key:0,class:"item generation"},{default:r((()=>[m(i,{class:"status-icon loading",src:se}),m(t,{class:"ing"},{default:r((()=>[g(k(h(a)("my.task.index.human.ing2")),1)])),_:1})])),_:1})):"2"===String(e.status)?(c(),d(t,{key:1,class:"item generation"},{default:r((()=>[m(i,{class:"status-icon",src:H}),m(t,{class:"fail"},{default:r((()=>[g(k(h(a)("my.task.index.draw.fail")),1)])),_:1})])),_:1})):(c(),d(t,{key:2,class:"item sound",onClick:a=>P(e),onLongpress:a=>X(e)},{default:r((()=>[m(i,{class:"cover",src:e.cover,mode:"aspectFill"},null,8,["src"]),m(t,{class:"content"},{default:r((()=>[m(t,{class:"title-box"},{default:r((()=>[m(t,{class:"view"},{default:r((()=>[g(k(e.name),1)])),_:2},1024)])),_:2},1024),m(t,{class:"audio-sound-box"},{default:r((()=>[m(t,{class:"sound-box"},{default:r((()=>[m(t,{class:"icon-box"},{default:r((()=>[m(A,{name:"play-right-fill",color:"#A5A5A5",size:"10"})])),_:1}),m(t,{class:"tag"},{default:r((()=>[g(k(h(a)("sound.select.tag")),1)])),_:1})])),_:1})])),_:1})])),_:2},1024)])),_:2},1032,["onClick","onLongpress"]))],64)))),128))])),_:1})):V("",!0)])),_:1},8,["modelValue","emptyViewText"])])),_:1}),m(K,{ref_key:"moreRef",ref:J,data:S,onChange:ie},null,512),m($,{ref_key:"modalRef",ref:ne,title:h(a)("app.tip.title"),content:oe.value,onConfirm:ue},null,8,["title","content"]),m(ee,{ref_key:"inputRef",ref:ce,placeholder:Y.value,content:q.value.name,onConfirm:de},null,8,["placeholder","content"]),m(ae,{ref_key:"videoPayRef",ref:W},null,512),m(le,{ref_key:"audioPayRef",ref:Q},null,512)])),_:1})}}},[["__scopeId","data-v-cb38189a"]]),de=l({__name:"index",setup(e){const{t:a}=t(),l=s(1),i=[{name:a("my.task.index.tabs.name1"),id:1},{name:a("my.task.index.tabs.name2"),id:2},{name:a("my.task.index.tabs.name3"),id:3},{name:a("my.task.index.tabs.name4"),id:4}],A=s("1");return O((({type:e,tab:a})=>{l.value=parseInt(a||1),A.value=String(e||"1")})),(e,t)=>{const s=W("ai-bindphone"),w=W("ai-privacy"),x=n(u("uv-icon"),o),b=I;return c(),d(b,{class:"my-task-container container-bg"},{default:r((()=>[m(s,{ref:"aiPrivacyRef"},null,512),m(w,{ref:"aiPrivacyRef"},null,512),m(Q,{bg:!1},{left:r((()=>[m(x,{name:"arrow-left",bold:"",size:"22",color:"#000",onClick:t[0]||(t[0]=a=>e.$tools.back()),class:"arrow-left"})])),center:r((()=>[m(b,{class:"my-task-title"},{default:r((()=>[g(k(h(a)("my.task.index.title")),1)])),_:1})])),_:1}),m(b,{class:"my-task-body",style:f(`height: ${e.$tools.height().contentHeight}px;`)},{default:r((()=>[m(b,{class:"tabs"},{default:r((()=>[(c(),v(p,null,y(i,(e=>m(b,{class:C(["tab",{is_active:l.value===e.id}]),key:e.id,onClick:a=>l.value=e.id},{default:r((()=>[g(k(e.name),1)])),_:2},1032,["class","onClick"]))),64))])),_:1}),m(b,{class:"content-box",style:f(`height: calc(${e.$tools.height().contentHeight}px - 120rpx)`)},{default:r((()=>[1===l.value?(c(),d(ne,{key:0,type:A.value},null,8,["type"])):V("",!0),2===l.value?(c(),d(ie,{key:1})):V("",!0),3===l.value?(c(),d(ue,{key:2})):V("",!0),4===l.value?(c(),d(ce,{key:3,type:A.value},null,8,["type"])):V("",!0)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-3e730bd4"]]);export{de as default};
