import{_ as a,R as e,u as s,S as l,r as o,o as n,v as t,E as u,m as i,G as r,p as d,a as c,b as v,w as p,d as m,e as A,t as g,g as f,a0 as h,a1 as k,aq as y,U as x,bl as C,as as w,i as B,j as F}from"./index-5HZnFt5a.js";import{_ as S}from"./uv-line-progress.D7X4wFI6.js";import{_ as U}from"./trash.CZ3Tbgel.js";const b=a({__name:"sound",props:{modelValue:{},modelModifiers:{}},emits:e(["change"],["update:modelValue"]),setup(a,{expose:e,emit:b}){const{t:J}=s(),M=l(a,"modelValue"),V=o(null),Y=b;o(null),o(!1),o(0);const E=async()=>{const a=await H();h(null==a?void 0:a.path)||await _({name:k(null==a?void 0:a.name),path:null==a?void 0:a.path,size:k(null==a?void 0:a.size)})},H=()=>new Promise((a=>{y({count:1,extension:[".mp3",".m4a",".wav"],success:e=>{var s,l;console.log(e);try{a({name:k(null==(s=null==e?void 0:e.tempFiles[0])?void 0:s.name),size:k(null==(l=null==e?void 0:e.tempFiles[0])?void 0:l.size),path:null==e?void 0:e.tempFilePaths[0]})}catch(o){a({name:"",path:"",size:""})}},fail:e=>{a({})}})})),O=()=>{M.value="",Y("change","")},_=async a=>{if(a.size>10485760)return void x({title:J("sound.creating.recorder.toast"),icon:"none"});a.data={returnDuration:!0};const{code:e,data:s,duration:l}=await C(a);200===e&&(M.value=k(s),j.value=K(l),Y("change",s))},z=o(!1),R=()=>{z.value?V.value.pause():V.value.play()},T=o(0),G=o("00:00"),j=o("00:00"),K=a=>{const e=Math.floor(a/60),s=Math.floor(a%60);return`${String(e).padStart(2,"0")}:${String(s).padStart(2,"0")}`};return n((()=>{(()=>{const a=w();a.sessionCategory="soloAmbient",a.onCanplay((()=>{j.value=K(a.duration)})),a.onPlay((()=>{j.value=K(a.duration),z.value=!0})),a.onPause((()=>{z.value=!1})),a.onStop((()=>{a.seek(0),G.value="00:00",z.value=!1})),a.onEnded((()=>{a.seek(0),G.value="00:00",z.value=!1})),a.onError((()=>{a.seek(0),G.value="00:00",z.value=!1})),a.onTimeUpdate((()=>{if(a.duration>0){const e=a.currentTime/a.duration*100;T.value=Math.min(e,100).toFixed(2),G.value=K(a.currentTime)}else G.value="00:00"})),V.value=a})()})),t((()=>M.value),(a=>{V.value.src=a})),u((()=>{V.value.stop()})),e({uploadFile:_}),(a,e)=>{const s=i(d("uv-icon"),r),l=B,o=i(d("uv-line-progress"),S),n=F;return c(),v(l,{class:"form-upload-human-card"},{default:p((()=>[M.value?(c(),v(l,{key:0,class:"upload-sound-box"},{default:p((()=>[m(l,{class:"sound-box"},{default:p((()=>[m(l,{class:"audio-sound-play"},{default:p((()=>[m(l,{class:"icon-box",onClick:R},{default:p((()=>[z.value?(c(),v(s,{key:0,name:"pause",color:"#000",size:"18"})):(c(),v(s,{key:1,name:"play-right-fill",color:"#000",size:"18"}))])),_:1}),m(l,{class:"time-box"},{default:p((()=>[A(g(G.value)+" / "+g(j.value),1)])),_:1}),m(l,{class:"progress-box"},{default:p((()=>[m(o,{percentage:T.value,showText:!1},null,8,["percentage"])])),_:1})])),_:1})])),_:1}),m(l,{class:"del-icon",onClick:O},{default:p((()=>[m(n,{class:"icon",src:U})])),_:1})])),_:1})):(c(),v(l,{key:1,class:"upload-img"},{default:p((()=>[m(l,{class:"icon-box",onClick:E},{default:p((()=>[m(n,{class:"icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMAYJ+/QN8gEIDvj3BQMM+vdfJgTQAAAm9JREFUWMPtmN2SpCAMhTuQ8I/y/k+7tUwhjAooWLU7u56r7i78DOG0Jvn8YUmBCIBePAkVji0hSXOF8hGs42EvreYDBwqn4n4uCRSqMhMJURlDq1HWKsZ1/mk4aLPtG0SxC8tTqgfJLHyJHU4KExom4l1ODYAUogbcgSFK1f4wX0HT7ROUOnHbmTIDhuhdRkPJiAHztskjmN3jungRXrANDVgtBtwNGW+B45nb3qr4zHO3wFSxv3BQiJJxrquySRWOYg+AMfw08OOpyJJQig+DO2J/G1hBRbOp6OsFz4INHPWf+vgFv+CfCJZ+Cixr9aGNxf8w2NSKdBnr92Ewxs/1Em8YDLGMrIPlKFhVwTLCfFEUukvVpk0prjpEJ1gqY9WdmnSttRYJdqNYx8MeodLY5SxBJ8k5El2ekD9dB+XpUb+Lw7Jhs+kmVVvA1S5OUrmr5nuVF4kV1Gog84I1Rd+yEZQhQ4hissnVsky3bNqHvjfphK1JBu7S3QxZ7cYKfI8W2zxHlenWstceu/0gRBu3XeQh3TCHYNK3TsgktgdpFvGVMc518YvLy7p/J/Wd7HmoiqVFcGmOQ5kcZfU5lqB4P/T742wjLAdABzHc+8NcHbWVKyUYylBunMyr+fUiWdCZy6TwDgBRnM4Rzb3xIMP2wp2d+5J5kldHyw2roY88ekEbPKM6lv0hbk3HWNikV+OE3BKFYPjBdn1VXaaJloVo5+ahQTKuOjRFVowO5i2vUnXyzCgb2HKEcpWoc3AP1rCYl4Upi/7zqHh+b73gF/yCf0stoapl4iY2NOUmdt+UGgZDG4yfYSHjVa3+84/pF7IvYtmzn1QFAAAAAElFTkSuQmCC"})])),_:1}),m(l,{class:"title",onClick:E},{default:p((()=>[A(g(f(J)("sound.creating.recorder.select")),1)])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-6246f95f"]]);export{b as a};
