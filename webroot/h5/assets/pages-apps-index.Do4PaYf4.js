import{_ as a,aM as e,r as l,o as t,a as s,b as o,w as i,d as n,ah as u,e as r,t as d,g as p,L as c,K as v,i as m,u as g,m as h,p as f,G as y,T as A,M as _,ab as b,ac as x,j as w,ad as C,l as k,n as I,a6 as S,q as B,B as F,at as z,F as R,H as V,J as j,c as T,a4 as U,I as E,a1 as Q,a9 as $,X as Y,Y as D,h as H}from"./index-5HZnFt5a.js";import{_ as J}from"./uv-button.CiJ2J5v4.js";import{_ as L}from"./z-paging.B8jSxtUa.js";import{_ as K}from"./uv-modal.Clrzaq6u.js";import{_ as N}from"./uv-tabs.CxaWShil.js";import{_ as O}from"./uv-input.DP28rKYF.js";import{_ as M}from"./input-search.CX-Pz1Ac.js";import{a as G}from"./apps.NDkBLVtm.js";import{_ as W}from"./is-vip.81A82wTA.js";import"./uv-badge.vue_vue_type_style_index_0_scoped_d4ba6c2a_lang.C03jWKDg.js";import"./page-tabbar.vue_vue_type_style_index_0_scoped_39680c3c_lang.5JlmRQzU.js";import{d as X}from"./dialog.CErO1ANM.js";import"./uv-loading-icon.D2OVaaMI.js";import"./uv-line.rnRAS3LR.js";const P=a({__name:"header",props:{title:{type:[String,Number],default:""}},emits:["change"],setup(a,{emit:g}){const h=e(),f=g,y=l(0),A=l(0);return t((()=>{y.value=uni.$uv.addUnit(uni.$uv.sys().statusBarHeight,"px"),A.value=uni.$uv.addUnit(uni.$uv.sys().statusBarHeight+44,"px"),f("change",A.value)})),(e,l)=>{const t=m;return s(),o(t,{class:"page-apps-header",style:v({height:A.value,paddingTop:y.value})},{default:i((()=>[n(t,{class:"body"},{default:i((()=>[n(t,{class:"left"},{default:i((()=>[u(e.$slots,"left",{},void 0,!0)])),_:3}),n(t,{class:"title"},{default:i((()=>[r(d(a.title),1)])),_:1}),p(h).right?(s(),o(t,{key:0,class:"right"},{default:i((()=>[u(e.$slots,"right",{},void 0,!0)])),_:3})):c("",!0)])),_:3})])),_:3},8,["style"])}}},[["__scopeId","data-v-077f8359"]]),Z=a({__name:"AppsTabs",emits:["change","search","init","show"],setup(a,{expose:e,emit:u}){const{t:r}=g(),d=C(),v=u,k=l([]),I=async()=>{const a=await x(d,".apps-tabs-box");v("init",a.height,k.value)},S=l(!1),B=()=>{S.value=!S.value,S.value||(F.value=""),v("show",S.value)},F=l(""),z=()=>{v("search",F.value)},R=l(!1);return t((()=>{(async()=>{const{data:a}=await G.groupQuery({page:1,size:20,status:1});k.value=[{name:r("dialog.tabs.recommend"),id:"recommend"},{name:r("dialog.tabs.popular"),id:"popular"},...a],R.value=!0,await b(),setTimeout((()=>{I()}),300)})()})),e({searchInputShow:B}),(a,e)=>{const l=w,t=m,u=h(f("uv-tabs"),N),d=h(f("uv-icon"),y),g=h(f("uv-input"),O);return s(),o(t,{class:"apps-tabs-box"},{default:i((()=>[n(t,{class:"apps-tabs"},{default:i((()=>[R.value?(s(),o(u,{key:0,list:k.value,keyName:"name",lineWidth:"56rpx",activeStyle:{color:"#000000",fontSize:"32rpx",fontWeight:600},inactiveStyle:{color:"#767676",fontSize:"32rpx"},onChange:e[0]||(e[0]=a=>{return e=a.id,void v("change",e);var e})},{right:i((()=>[n(t,{class:"search",onClick:A(B,["stop"])},{default:i((()=>[n(l,{src:M})])),_:1})])),_:1},8,["list"])):c("",!0)])),_:1}),n(t,{class:_(["search-input",S.value?"is-show":""])},{default:i((()=>[n(g,{modelValue:F.value,"onUpdate:modelValue":e[1]||(e[1]=a=>F.value=a),placeholder:p(r)("dialog.tabs.search"),confirmType:"search",clearable:"",customStyle:{backgroundColor:"#fff",borderRadius:"60rpx",height:"80rpx",padding:"0 15rpx",border:"none",boxShadow:"0px 8px 20px 0px rgba(0, 0, 0, 0.05)"},onClear:z,onBlur:z,onConfirm:z},{prefix:i((()=>[n(d,{name:"search",size:"40rpx",color:"#000000"})])),_:1},8,["modelValue","placeholder","customStyle"])])),_:1},8,["class"])])),_:1})}}},[["__scopeId","data-v-a0385859"]]),q=a({__name:"ApplyItem",props:{data:{type:Object,default:()=>({})},size:{type:String,default:"normal"},index:{type:Number,default:0},vips:{type:Array,default:()=>[]}},emits:["change"],setup(a,{emit:e}){const l=k(),t=a,u=e;return(e,v)=>{const g=w,y=h(f("uv-avatar"),I),A=m;return s(),o(A,{class:_(["item",a.index>0?"line":""]),onClick:v[0]||(v[0]=e=>(async a=>{await S(a,t.vips)&&u("change",a)})(a.data))},{default:i((()=>[a.data.isVipUsed?(s(),o(g,{key:0,class:"vip-icon",src:W})):c("",!0),n(y,{src:a.data.iconFileUrl,"default-url":p(l).query.robotAvatar,size:"small"===a.size?"100rpx":"112rpx"},null,8,["src","default-url","size"]),n(A,{class:"info"},{default:i((()=>[n(A,{class:"name uv-line-1"},{default:i((()=>[r(d(a.data.name),1)])),_:1}),n(A,{class:"uv-line-1 desc"},{default:i((()=>[r(d(a.data.description),1)])),_:1})])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-484aa405"]]),aa=a({__name:"index",setup(a){const{t:e}=g(),u=C(),c=B(),y=l(null),A=l(!1),b=l([]),k=l("100%"),S=a=>{k.value=`calc(100% - ${a})`},N=l(!1),O=()=>{N.value=!N.value,N.value&&va()},M=l(44),W=l([]),aa=(a,e)=>{M.value=a,W.value=e},ea=l("recommend"),la=a=>{var e;ea.value=a,sa.value=[],"number"==typeof a?null==(e=y.value)||e.reload():ta()},ta=()=>{"recommend"===ea.value&&G.listByFrontType({type:"recommend",page:1,size:99}).then((({data:a})=>{var e;null==(e=y.value)||e.completeByNoMore(null==a?void 0:a.rows,!0),setTimeout((()=>{A.value=!0}),3e3)})),"popular"===ea.value&&G.listByFrontType({type:"hot",page:1,size:99}).then((({data:a})=>{var e;null==(e=y.value)||e.completeByNoMore(null==a?void 0:a.rows,!0),setTimeout((()=>{A.value=!0}),3e3)}))},sa=l([]),oa=async(a,e)=>{var l;if(A.value=!1,"number"==typeof ea.value){const t=W.value.find((a=>a.id&&a.id===ea.value)),{data:s}=await G.listByFrontType({page:a,size:e,search:ia.value,tag:Q(t.name),type:"new"});null==(l=y.value)||l.complete(s.rows),setTimeout((()=>{A.value=!0}),3e3)}else ta()},ia=l(""),na=a=>{ia.value=a},ua=l(!1),ra=a=>{ua.value=a,a||(ia.value="")},da=l(null),pa=()=>{var a;ua.value&&(null==(a=da.value)||a.searchInputShow())},ca=l(109.3),va=async()=>{await ga(),await fa();const a=await x(u,".log-top-header");ca.value=a.height},ma=l({}),ga=async()=>{const a=$(c.userInfo),e=Q(null==a?void 0:a.phone);a.encryptPhone=(null==e?void 0:e.substring(0,3))+"****"+(null==e?void 0:e.substring(7,11)),ma.value=a},ha=l([]),fa=async()=>{const{data:a}=await G.usedBots({page:1,size:999});ha.value=U(null==a?void 0:a.rows)},ya=l(null),Aa=l({}),_a=async()=>{Y({title:e("app.api.loading"),mask:!0}),await X.deleteGroup({groupId:Aa.value.id}),D(),ba(),fa().then()},ba=()=>{var a;null==(a=ya.value)||a.close(),Aa.value={}},xa=a=>{H.to(`/pagesA/chat/apps?id=${a.botId}`,!0)};l(0);const wa=l("100%");return t((()=>{wa.value="100vh"})),F((()=>{(async()=>{var a;const{data:e}=await T.getVipLeavel();b.value=U(e),null==(a=y.value)||a.reload()})()})),z((()=>{N.value=!1})),(a,l)=>{const t=R("ai-bindphone"),u=R("ai-privacy"),c=m,g=w,x=h(f("uv-avatar"),I),C=h(f("uv-button"),J),B=h(f("z-paging"),L),F=h(f("uv-modal"),K);return s(),V(j,null,[n(c,{class:"apps-index-page",style:v({height:wa.value})},{default:i((()=>[n(t,{ref:"aiPrivacyRef"},null,512),n(u,{ref:"aiPrivacyRef"},null,512),n(c,{class:_(["dialog-log-drawer",N.value?"show":""]),style:v({height:wa.value})},{default:i((()=>[n(c,{class:"dialog-log-title",style:v({height:a.$uv.addUnit(a.$uv.sys().statusBarHeight+44,"px"),paddingTop:a.$uv.addUnit(a.$uv.sys().statusBarHeight,"rpx")})},{default:i((()=>[r(d(p(e)("apps.title")),1)])),_:1},8,["style"]),n(P,null,{left:i((()=>[n(g,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAADfSURBVEiJtdbdDYMgFIbhN52gIzCCIziKIzgCm3SEjuAojtAR6AU2seSA/HySnAt/+B5AQgRYgQ14AQ5980A4auV0EYBdjJ6xQJzY3w0lmmKBuIrmg1H0MlOJVmcp0OaMEbS7b0/HkYEWA6Y7sFLQJ0FlWA0qx0qoVdJT6gpVH4kALArs0QDmQp9HSZunvKTp7pVjn7tQC/t9s0WNWoHpBpGhuSBnvOtH0Z5Rd6PTwGib0Ql7980VWDOaw5YGrBp1QuwKdRD/FZVYCX1boBdgOXSDuLY7ccqrEDuj+1HzF3vBC1yHTZGkAAAAAElFTkSuQmCC",class:"closeIcon",onClick:O})])),_:1}),n(c,{class:"main-content",style:v({height:k.value})},{default:i((()=>[n(c,{class:"log-top-header"},{default:i((()=>[n(c,{class:"user-info-box"},{default:i((()=>[n(c,{class:"avatar-box"},{default:i((()=>[n(x,{src:ma.value.avatar,size:"90rpx",onClick:l[0]||(l[0]=e=>a.$tools.to("/pagesA/my/account/index",!0))},null,8,["src"])])),_:1}),n(c,{class:"content-box"},{default:i((()=>[n(c,{class:"user"},{default:i((()=>[r(d(ma.value.encryptPhone),1)])),_:1}),n(c,{class:"id"},{default:i((()=>[r("IDï¼š"+d(ma.value.id),1)])),_:1})])),_:1}),n(c,{class:"btn-box"},{default:i((()=>[n(C,{type:"primary",icon:"integral-fill",text:p(e)("apps.log.name"),customStyle:{border:"2px solid #D8D8D8",borderRadius:"24rpx",color:"#574FFE",background:"#F6F2FB",width:"190rpx"},iconSize:"40rpx",iconColor:"#574FFE",onClick:l[1]||(l[1]=e=>a.$tools.to("/pagesA/my/vip/index",!0))},null,8,["text"])])),_:1})])),_:1}),n(c,{class:"title"},{default:i((()=>[r(d(p(e)("apps.log.title")),1)])),_:1})])),_:1}),n(c,{class:"scroll-inner log",style:v({height:`calc(100% - ${ca.value}px)`})},{default:i((()=>[(s(!0),V(j,null,E(ha.value,(a=>(s(),o(c,{key:a.id,class:"item",onClick:l=>(async a=>{Y({title:e("app.loading"),mask:!0});const{data:l}=await G.conversationList({page:1,size:1,botId:a.botId}),t=U(null==l?void 0:l.rows);if(t.length<=0)return;const s=$(t[0]);O(),D(),H.to(`/pagesA/chat/apps?id=${a.botId}&cid=${s.conversationId}`,!0)})(a),onLongpress:e=>(a=>{var e;Aa.value=a,null==(e=ya.value)||e.open()})(a)},{default:i((()=>[n(g,{class:"image",src:a.iconFileUrl},null,8,["src"]),n(c,{class:"data"},{default:i((()=>[n(c,{"class-name":""},{default:i((()=>[r(d(a.name),1)])),_:2},1024),n(c,{class:"desc uv-line-1"},{default:i((()=>[r(d(a.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","onLongpress"])))),128))])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},8,["class","style"]),n(c,{class:_(["app-list-drawer-mask",N.value?"show":""]),onClick:O},null,8,["class"]),n(c,{class:_(["app-list-drawer",N.value?"show":""]),style:v({height:wa.value})},{default:i((()=>[n(P,{title:p(e)("apps.title"),onChange:S},{left:i((()=>[n(g,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAABxSURBVFiF7dXLCYAwEEXRhxVYWvrfTAmxA93oJop5YD4I98DshEwUvBIAoJQkhaR98OTz7Ko8YblrolxmeVhwc27Ryeo8lDTnLYbMTwzg7yjJy1ASSgLA0LokdiFcPf6Bt0K4RpXEKoSrdUkoBAB8cADSpvoh3OKCIAAAAABJRU5ErkJggg==",class:"barIcon",onClick:O})])),_:1},8,["title"]),n(c,{class:"main-content",style:v({height:k.value})},{default:i((()=>[n(c,{class:"apps-tabs-main"},{default:i((()=>[n(Z,{ref_key:"tabsRef",ref:da,onChange:la,onSearch:na,onInit:aa,onShow:ra},null,512)])),_:1}),n(c,{class:"scroll-inner",style:v({height:`calc(100% - ${M.value}px)`}),onClickCapture:pa},{default:i((()=>[n(B,{ref_key:"pagingRef",ref:y,modelValue:sa.value,"onUpdate:modelValue":l[2]||(l[2]=a=>sa.value=a),fixed:!1,auto:!1,height:"100%","show-loading-more-no-more-view":sa.value.length>11&&A.value,"show-loading-more-when-reload":!0,"loading-more-default-as-loading":!0,emptyViewText:p(e)("app.noContent"),emptyViewImg:"/static/empty-1.png",emptyViewImgStyle:{width:"128rpx",height:"128rpx"},onQuery:oa},{default:i((()=>[n(c,{class:"item-container"},{default:i((()=>[(s(!0),V(j,null,E(sa.value,((a,e)=>(s(),o(q,{key:a.id,data:a,index:e,vips:b.value,onChange:xa,size:"small"},null,8,["data","index","vips"])))),128))])),_:1})])),_:1},8,["modelValue","show-loading-more-no-more-view","emptyViewText"])])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},8,["class","style"])])),_:1},8,["style"]),n(c,{class:"modal"},{default:i((()=>[n(F,{ref_key:"modalRef",ref:ya,title:p(e)("apps.modal.title"),width:"410rpx"},{default:i((()=>[n(c,{class:"modal-content"},{default:i((()=>[r(d(p(e)("apps.modal.content")),1)])),_:1})])),confirmButton:i((()=>[n(c,{class:"btns"},{default:i((()=>[n(C,{type:"primary",text:p(e)("app.cancel"),customStyle:{border:"none",borderRadius:"20rpx",color:"#574FFE",background:"#F5F5FF",width:"190rpx"},onClick:ba},null,8,["text"]),n(C,{type:"primary",text:p(e)("app.confirm"),customStyle:{border:"none",borderRadius:"20rpx",color:"#ffffff",background:"#EA0000",width:"190rpx"},onClick:_a},null,8,["text"])])),_:1})])),_:1},8,["title"])])),_:1})],64)}}},[["__scopeId","data-v-b0849147"]]);export{aa as default};
