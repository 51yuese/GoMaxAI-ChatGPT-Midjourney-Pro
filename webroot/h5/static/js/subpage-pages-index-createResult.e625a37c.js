(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subpage-pages-index-createResult"],{"0c00":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-line-progress",style:[t.$u.addStyle(t.customStyle)]},[i("v-uni-view",{ref:"u-line-progress__background",staticClass:"u-line-progress__background",style:[{backgroundColor:t.inactiveColor,height:t.$u.addUnit(t.height)}]}),i("v-uni-view",{staticClass:"u-line-progress__line",style:[t.progressStyle]},[t._t("default",[t.showText&&t.percentage>=10?i("v-uni-text",{staticClass:"u-line-progress__text"},[t._v(t._s(t.innserPercentage+"%"))]):t._e()])],2)],1)},n=[]},1173:function(t,e,i){t.exports=i.p+"static/images/status6.png"},"11b9":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{url:String},data:function(){return{path:"",show:!1}},watch:{url:function(t){this.path=t,this.$emit("tailorImgPath",t)}}};e.default=a},"1c01":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"lime-clipper",class:{open:t.value},style:"z-index: "+t.zIndex+";"+t.customStyle,attrs:{"disable-scroll":!0}},[i("v-uni-view",{staticClass:"lime-clipper-mask",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.clipTouchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.clipTouchMove.apply(void 0,arguments)},touchend:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.clipTouchEnd.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"lime-clipper__content",style:t.clipStyle},t._l([0,0,0,0],(function(t,e){return i("v-uni-view",{key:e,staticClass:"lime-clipper__edge"})})),1)],1),t.image?i("v-uni-image",{staticClass:"lime-clipper-image",style:t.imageStyle,attrs:{src:t.image,mode:"auto"==t.imageWidth?"widthFix":"scaleToFill"},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)},load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.imageTouchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.imageTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.imageTouchEnd.apply(void 0,arguments)}}}):t._e(),i("v-uni-canvas",{staticClass:"lime-clipper-canvas",style:"width: "+t.canvasWidth*t.scaleRatio+"px; height:"+t.canvasHeight*t.scaleRatio+"px;",attrs:{"canvas-id":"lime-clipper",id:"lime-clipper","disable-scroll":!0}}),i("v-uni-view",{staticClass:"lime-clipper-tools"},[i("v-uni-view",{staticClass:"lime-clipper-tools__btns"},[t.isShowCancelBtn?i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t.$slots.cancel?t._t("cancel"):i("v-uni-view",{staticClass:"cancel"},[t._v("取消")])],2):t._e(),t.isShowPhotoBtn?i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadImage.apply(void 0,arguments)}}},[t.$slots.photo?t._t("photo"):i("v-uni-image",{attrs:{src:"/uni_modules/lime-clipper/static/photo.svg"}})],2):t._e(),t.isShowRotateBtn?i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rotate.apply(void 0,arguments)}}},[t.$slots.rotate?t._t("rotate"):i("v-uni-image",{attrs:{src:"/uni_modules/lime-clipper/static/rotate.svg","data-type":"inverse"}})],2):t._e(),t.isShowConfirmBtn?i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t.$slots.confirm?t._t("confirm"):i("v-uni-view",{staticClass:"confirm"},[t._v("确定")])],2):t._e()],1),t._t("default")],2)],1)},n=[]},"31c2":function(t,e,i){"use strict";i.r(e);var a=i("1c01"),n=i("82a2");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("3b30");var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"2c477d90",null,!1,a["a"],void 0);e["default"]=r.exports},"360f":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-5a885ee4], uni-scroll-view[data-v-5a885ee4], uni-swiper-item[data-v-5a885ee4]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-line-progress[data-v-5a885ee4]{align-items:stretch;position:relative;display:flex;flex-direction:row;flex:1;overflow:hidden;border-radius:100px}.u-line-progress__background[data-v-5a885ee4]{background-color:#ececec;border-radius:100px;flex:1}.u-line-progress__line[data-v-5a885ee4]{position:absolute;top:0;left:0;bottom:0;align-items:center;display:flex;flex-direction:row;color:#fff;border-radius:100px;transition:width .5s ease;justify-content:flex-end}.u-line-progress__text[data-v-5a885ee4]{font-size:10px;align-items:center;text-align:right;color:#fff;margin-right:5px;-webkit-transform:scale(.9);transform:scale(.9)}',""]),t.exports=e},"3b30":function(t,e,i){"use strict";var a=i("4488"),n=i.n(a);n.a},4488:function(t,e,i){var a=i("8f73");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("bf26b636",a,!0,{sourceMap:!1,shadowMode:!1})},6343:function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f07e")),o=a(i("c964")),s=a(i("d0ffa"));i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("4de4"),i("99af"),i("cb29"),i("caad6"),i("2532");var r=a(i("cdd1")),c=(i("a6f2"),i("dccf")),l=(i("28c4"),a(i("858e"))),d={data:function(){return{describeData:{},isShow:!1,actionList:[],imageUrl:"",percent:0,status:"",action:"",isShow1:!1,selectList:[],maskIsShow:!1,imageH:0,isWechat:!1,type:1,regionRedrawShow:!1,canvasWidth:0,canvasHeight:0,areaPoint:{startX:0,startY:0,endX:0,endY:0},startMove:!1,redrawImg:"",redrawPrompt:"",controlsBtnInfo:{}}},onLoad:function(){var t=this,e=this.getOpenerEventChannel();e.on("resultData",(function(e){console.log(e),t.describeData=e.data,t.redrawImg=e.data.imageUrl,t.type=e.type,1==e.type&&t.getDrawById(e.data.jobId)})),this.getPlazaType()},methods:{returnPage:function(){uni.removeStorageSync("publicStatus"),uni.navigateBack({delta:1})},getDrawById:function(t){var e=this,i=setInterval((function(){e.$Request.get("/api/midjourney/getDetailByIds?jobIds="+t).then((function(t){0!=t.data.length&&(e.percent=t.data[0].progress,e.describeData=t.data[0],3==t.data[0].status?(clearInterval(i),e.describeData=t.data[0],1==uni.getStorageSync("publicStatus")&&e.publish({id:1})):4==t.data[0].status&&(e.describeData.imageUrl="",clearInterval(i),uni.showToast({title:""==t.data[0].failReason?"服务器异常，请稍后重试吧！":t.data[0].failReason,icon:"none"})))}))}),3e3)},getPlazaType:function(){var t=this;this.$Request.post("/api/midjourney/inspireClassifyQuery",{page:1,size:20}).then((function(e){t.selectList=e.data.rows}))},copyClick:function(t){uni.setClipboardData({data:t,success:function(t){uni.showToast({title:"复制成功",icon:"success"})}})},downloadClick:function(){this.saveImageH5()},saveImage:function(){uni.showLoading({title:"下载中"}),uni.downloadFile({url:this.imageUrl,success:function(t){uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(){uni.hideLoading(),uni.showToast({title:"保存成功",icon:"success"})},fail:function(){uni.hideLoading(),uni.showToast({title:"保存失败",icon:"error"})}})}})},saveImageApp:function(t){var e=new plus.nativeObj.Bitmap("test");e.loadBase64Data(t,(function(){var t="_doc/"+new Date+".png";e.save(t,{overwrite:!0},(function(i){uni.saveImageToPhotosAlbum({filePath:t,success:function(){uni.showToast({title:"保存成功",icon:"none"}),e.clear()}})}),(function(t){uni.showToast({title:"保存失败",icon:"none"}),e.clear()}))}),(function(t){e.clear()}))},saveImageH5:function(){uni.showLoading({title:"下载中"});var t=(new Date).getTime()+".png";r.default.get(c.publicPath+"/api/file/down",{responseType:"blob",params:{url:this.describeData.imageUrl}}).then((function(e){var i=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=i,a.setAttribute("download",t),a.click(),a.remove(),uni.hideLoading(),uni.showToast({title:"下载成功",icon:"success"})}))},delete_draw:function(){var t=this;uni.showModal({title:"提示",content:"确认删除该幅作品吗？删除后无法恢复",confirmText:"确认删除",confirmColor:"#FF3B30",cancelText:"取消",cancelColor:"#10A37F",success:function(e){e.confirm&&t.$Request.post("/api/midjourney/delete_draw",{id:t.describeData.id}).then((function(t){uni.showToast({title:null==t.message?t.data:t.message,icon:"none"}),200==t.code&&uni.navigateBack({delta:1})}),(function(t){uni.showToast({title:t,icon:"none"})}))}})},plusClick:function(){this.isShow1=!0},handleMore:function(){if(this.describeData.buttons.length&&(this.isShow=!0),this.describeData.buttons){var t=this.describeData.buttons.filter((function(t){return""!==t.label})),e=this.describeData.buttons.filter((function(t){return""==t.label}));this.describeData.buttons=[].concat((0,s.default)(t),(0,s.default)(e))}},handleClick:function(t){var e=this;if(this.controlsBtnInfo=t,"Vary (Region)"!=t.label){var i={type:4,params:{action:this.getAction(t),customId:t.customId,taskId:this.describeData.id}};uni.showLoading({title:"加载中"}),this.$Request.post("/api/midjourney/task_add",i).then((function(t){200!=t.code?(uni.hideLoading(),uni.showToast({title:t.message,icon:"none"})):200==t.code&&(uni.hideLoading(),e.percent=0,e.actionList=[],e.isShow=!1,e.type=1,e.getDrawById(t.data.jobId))}))}else this.getRedrawRegion(),this.regionRedrawShow=!0,this.isShow=!1},getRedrawRegion:function(){},canvasStart:function(t){this.startMove=!0,console.log(t),this.areaPoint.startX=t.changedTouches[0].x,this.areaPoint.startY=t.changedTouches[0].y},canvasMove:function(t){if(this.startMove){this.areaPoint.endX=t.changedTouches[0].x,this.areaPoint.endY=t.changedTouches[0].y;this.areaPoint.startX,this.areaPoint.startY,this.areaPoint.endX,this.areaPoint.endY}console.log(t)},canvasEnd:function(t){if(console.log(t),this.startMove){this.areaPoint.endX=t.changedTouches[0].x,this.areaPoint.endY=t.changedTouches[0].y;var e=this.areaPoint.startX,i=this.areaPoint.startY,a=this.areaPoint.endX,n=this.areaPoint.endY,o=uni.createCanvasContext("canvas",this);o.fillStyle="blue",o.arcTo(e,i,a,n,0),o.fill()}},tailorImg:function(t){console.log(t);var e=t.split(",");return console.log(e),e[1]},localityRedraw:function(){var t=this;if(console.log(this.describeData),""!=this.redrawPromp)if(""!=this.tailorImg()){l.default.VARY_REGION,this.controlsBtnInfo.customId,this.tailorImg(),this.redrawPrompt,l.default.IMAGE_ACTION;uni.showLoading({title:"任务提交种"}),this.$Request.post("/api/midjourney/task_add",data).then((function(e){200!=e.code?(uni.hideLoading(),uni.showToast({title:e.message,icon:"none"})):200==e.code&&(uni.hideLoading(),t.percent=0,t.actionList=[],t.isShow=!1,t.type=1,t.getDrawById(e.data.jobId))}))}else uni.showToast({title:"请先截取需要重绘的区域"});else uni.showToast({title:"请输入描述词"})},getAction:function(t){if(["U1","U2","U3","U4"].includes(t.label))return l.default.U_SCALE;if(["V1","V2","V3","V4"].includes(t.label))return l.default.V_EXPAND;if(!t.label&&t.emoji){if("🔄"===t.emoji)return l.default.REGENERATE;if(["⬅️","➡️","⬆️","⬇️"].includes(t.emoji))return l.default.STRETCH;if(["1️⃣","2️⃣","3️⃣","4️⃣"].includes(t.emoji))return l.default.IMAGE_TO_TEXT_ACTION}return t.label.includes("Upscale (4x)")?l.default.UPSCALE_4X:t.label.includes("Upscale (2x)")?l.default.UPSCALE_2X:t.label.includes("Vary (Subtle)")?l.default.VARY_SUBTLE:t.label.includes("Vary (Strong)")?l.default.VARY_STRONG:t.label.includes("Vary (Region)")?l.default.VARY_REGION:t.label.includes("Make Square")?l.default.SQUARE:t.label.includes("Zoom Out 2x")?l.default.ZOOM2X:t.label.includes("Zoom Out 1.5x")?l.default.ZOOM1_5X:t.label.includes("Custom Zoom")?l.default.ZOOM_CUSTOM:t.label.includes("Redo Upscale (Subtle)")?l.default.REDO_UPSCALE_SUBTLE:t.label.includes("Redo Upscale (Creative)")?l.default.REDO_UPSCALE_CREATIVE:l.default.NONE},publish:function(t){var e=this,i={squareType:t.id,id:this.describeData.id};this.$Request.post("/api/midjourney/rec",i).then((function(t){200==t.code?(uni.showToast({title:"发布成功",icon:"success"}),e.isShow1=!1,uni.removeStorageSync("publicStatus")):uni.showToast({title:t.message,icon:"error"})}),(function(t){uni.showToast({title:t,icon:"error"})}))},handleGetCurrentDraw:function(t){var e=this;return(0,o.default)((0,n.default)().mark((function i(){return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,e.$Request.get("/api/midjourney/getDraw",{jobId:t}).then((function(t){if(e.currentTask=t.data,t.data.imageUrl&&(e.imageUrl=t.data.imageUrl),t.data.buttons){var i=t.data.buttons.filter((function(t){return""!==t.label})),a=t.data.buttons.filter((function(t){return""==t.label}));e.actionList=[].concat((0,s.default)(i),(0,s.default)(a))}e.drawIntro=t.data.originPrompt,e.percent=t.data.progress,e.status=t.data.status,(4==t.data.status||3==t.data.status)&&clearInterval(e.timer)}));case 4:case"end":return i.stop()}}),i)})))()},comeBack:function(){uni.switchTab({url:"/pages/main/home/index"})},viewPic:function(){uni.previewImage({count:1,urls:[this.describeData.imageUrl+"?imageView2/0/w/400/q/85&format=webp&quality=lossless"]})},moveHandle:function(){return!0},none:function(){}}};e.default=d},"700f":function(t,e,i){"use strict";i.r(e);var a=i("7cd1"),n=i("ce81");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"0bcd9f67",null,!1,a["a"],void 0);e["default"]=r.exports},7154:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3");var a={props:{activeColor:{type:String,default:uni.$u.props.lineProgress.activeColor},inactiveColor:{type:String,default:uni.$u.props.lineProgress.color},percentage:{type:[String,Number],default:uni.$u.props.lineProgress.inactiveColor},showText:{type:Boolean,default:uni.$u.props.lineProgress.showText},height:{type:[String,Number],default:uni.$u.props.lineProgress.height}}};e.default=a},"716a":function(t,e,i){"use strict";var a=i("8c59"),n=i.n(a);n.a},"71cf":function(t,e,i){"use strict";i.r(e);var a=i("0c00"),n=i("855a");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("cdd6");var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"5a885ee4",null,!1,a["a"],void 0);e["default"]=r.exports},"7cd1":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={lClipper:i("31c2").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.url?i("v-uni-image",{staticStyle:{"border-radius":"24px"},attrs:{src:t.url,mode:"widthFix"}}):t._e(),t.show?i("l-clipper",{attrs:{imageUrl:t.url},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.url=e.url,t.show=!1},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.show=!1}}}):t._e(),i("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show=!0}}},[t._v("裁剪")])],1)},o=[]},"7d62":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".createResult_box[data-v-24f6b7d1]{width:100vw;height:100vh;background-color:F8F9F9}.tabbar[data-v-24f6b7d1]{width:100%;color:#fff;display:flex;align-items:flex-end;font-size:%?35?%;position:-webkit-sticky;position:sticky;top:0;z-index:1;background-color:#f8f9f9;padding:0 %?24?%;padding-bottom:%?24?%;padding-top:%?24?%}.createResult_main[data-v-24f6b7d1]{width:100%;height:calc(100% - %?196?%);z-index:0;background-color:#f8f9f9;position:relative}.createResult_main uni-scroll-view[data-v-24f6b7d1]{width:100%;padding:0 %?24?%;padding-bottom:%?100?%}.createResult_main uni-scroll-view .image_card[data-v-24f6b7d1]{width:100%;border-radius:20px;min-height:50vh;background-color:#fff}.createResult_main uni-scroll-view .image_card uni-image[data-v-24f6b7d1]{width:100%}.createResult_main uni-scroll-view .text_card[data-v-24f6b7d1]{margin-top:%?40?%}.createResult_main uni-scroll-view .text_card .title_card[data-v-24f6b7d1]{width:100%;display:flex;font-size:%?28?%;align-items:center;justify-content:space-between;padding-bottom:%?40?%}.createResult_main .bottom_tabber[data-v-24f6b7d1]{width:100%;height:%?120?%;padding:0 %?40?% %?20?% %?40?%;position:fixed;bottom:0;display:flex;align-items:center;justify-content:space-between;font-size:%?20?%;background-color:#fff;border-top:1px solid #e8e8e8}.createResult_main .bottom_tabber .left[data-v-24f6b7d1]{display:flex;color:#1e1f1f;margin-top:%?10?%}.createResult_main .bottom_tabber .right[data-v-24f6b7d1]{display:flex;margin-top:%?10?%}.createResult_main .bottom_tabber .right uni-button[data-v-24f6b7d1]{border-radius:%?50?%;width:%?200?%}.moreBox[data-v-24f6b7d1]{width:100%;padding:%?20?% %?30?% %?64?% %?30?%}.moreBox .topTitle[data-v-24f6b7d1]{display:flex;justify-content:space-between;padding-bottom:%?12?%}.moreBox .topTitle .topMoreLeft[data-v-24f6b7d1]{width:%?10?%;height:%?10?%}.moreBox .topTitle .moreTitle[data-v-24f6b7d1]{color:#1e1f1f;font-size:%?30?%;text-align:center;font-weight:550}.moreBox .topTitle .topMoreRight[data-v-24f6b7d1]{display:flex;align-items:center}.moreBox .adjust[data-v-24f6b7d1]{display:flex;margin-top:%?34?%}.moreBox .adjust .adjustLeft[data-v-24f6b7d1]{display:flex;align-items:center}.moreBox .adjust .adjustLeft .title[data-v-24f6b7d1]{font-size:%?30?%;color:#fff}.moreBox .adjust .adjustLeft .important[data-v-24f6b7d1]{color:#fff;border:%?2?% solid #fff;width:%?28?%;height:%?28?%;border-radius:50%;text-align:center;line-height:%?28?%;font-size:%?24?%}.moreBox .adjust .adjustRight[data-v-24f6b7d1]{display:flex;margin-left:%?26?%}.moreBox .adjust .adjustRight .adjustItem[data-v-24f6b7d1]{width:%?134?%;height:%?40?%;border:%?2?% solid #fff;color:#fff;font-size:%?24?%;margin-left:%?20?%;text-align:center;line-height:%?40?%;border-radius:%?5?%}.moreBox .adjust .adjustRight .adjustItem1[data-v-24f6b7d1]{width:%?60?%;height:%?40?%;border:%?2?% solid #fff;color:#fff;font-size:%?24?%;margin-left:%?20?%;border-radius:%?5?%;display:flex;justify-content:center;align-items:center}.moreBox .adjust .adjustRight .adjustItem1 .imgBox[data-v-24f6b7d1]{width:%?32?%;height:%?32?%}.moreBox .adjust .adjustRight .adjustItem1 .imgBox .img[data-v-24f6b7d1]{width:100%;height:100%}.moreBox .bottomTitle[data-v-24f6b7d1]{display:flex;justify-content:space-between;margin-top:%?42?%}.moreBox .bottomTitle .left[data-v-24f6b7d1]{color:#1e1f1f;font-size:%?24?%}.moreBox .bottomTitle .right[data-v-24f6b7d1]{color:#8b8c8c;font-size:%?12?%}.actionBox[data-v-24f6b7d1]{display:flex;flex-wrap:wrap;flex-shrink:1}.actionBox .actionItem[data-v-24f6b7d1]{width:%?210?%;height:%?40?%;color:#10a37f;font-size:%?24?%;display:flex;justify-content:center;align-items:center;margin-top:%?34?%;border-radius:%?5?%;margin-left:%?20?%;border-radius:%?16?%;border:1px solid #10a37f}.line[data-v-24f6b7d1]{position:absolute;z-index:1;left:50%;top:30%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;padding:0 %?30?%;width:100%;display:flex;flex-direction:column;align-items:center}.line .u-line-progress[data-v-24f6b7d1]{width:%?500?%;margin-top:%?20?%}.image[data-v-24f6b7d1]{width:100%;height:100%;z-index:0}.complete_image[data-v-24f6b7d1]{width:100%;height:100%;z-index:0}.publishBox[data-v-24f6b7d1]{padding:%?30?%}.publishBox .selectIntro[data-v-24f6b7d1]{font-size:%?30?%;text-align:center;color:#10a37f;font-weight:700}.publishBox .squareType[data-v-24f6b7d1]{font-size:%?24?%;padding-left:%?30?%;color:#8b8c8c;margin-top:%?24?%}.publishBox .selectList[data-v-24f6b7d1]{padding-left:%?30?%;margin-top:%?20?%}.publishBox .selectList .selectItem[data-v-24f6b7d1]{border-bottom:%?2?% solid #d9d9da;padding:%?20?% 0;font-size:%?24?%}.mask[data-v-24f6b7d1]{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:999;background-color:rgba(0,0,0,.9);display:flex;justify-content:center;align-items:center;overflow:hidden}.maskPic[data-v-24f6b7d1]{width:%?500?%;position:relative;z-index:1000}.loader[data-v-24f6b7d1]{width:50px;padding:8px;aspect-ratio:1;border-radius:50%;background:#438fef;--_m:conic-gradient(transparent 10%,#000),linear-gradient(#000 0 0) content-box;-webkit-mask:var(--_m);mask:var(--_m);-webkit-mask-composite:source-out;mask-composite:subtract;-webkit-animation:l3-data-v-24f6b7d1 1s infinite linear;animation:l3-data-v-24f6b7d1 1s infinite linear}@-webkit-keyframes l3-data-v-24f6b7d1{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes l3-data-v-24f6b7d1{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}[data-v-24f6b7d1] .u-popup__content{border-top-left-radius:%?24?%;border-top-right-radius:%?24?%}.region_redraw[data-v-24f6b7d1]{width:%?700?%;background-color:#fff;padding:%?24?%;text-align:center}",""]),t.exports=e},"82a2":function(t,e,i){"use strict";i.r(e);var a=i("8440"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},8440:function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f07e")),o=a(i("c964"));i("a9e3"),i("99af"),i("d3b7"),i("159b"),i("b64b"),i("caad6"),i("4fadc"),i("d81d");var s=i("bdd8"),r={},c={name:"lime-clipper",props:{value:{type:Boolean,default:!0},customStyle:{type:String},zIndex:{type:Number,default:99},imageUrl:{type:String},fileType:{type:String,default:"png"},quality:{type:Number,default:1},width:{type:Number,default:400},height:{type:Number,default:400},minWidth:{type:Number,default:200},maxWidth:{type:Number,default:600},destWidth:Number,destHeight:Number,minHeight:{type:Number,default:200},maxHeight:{type:Number,default:600},isLockWidth:{type:Boolean,default:!1},isLockHeight:{type:Boolean,default:!1},isLockRatio:{type:Boolean,default:!0},scaleRatio:{type:Number,default:1},minRatio:{type:Number,default:.5},maxRatio:{type:Number,default:2},isDisableScale:{type:Boolean,default:!1},isDisableRotate:{type:Boolean,default:!1},isLimitMove:{type:Boolean,default:!1},isShowPhotoBtn:{type:Boolean,default:!0},isShowRotateBtn:{type:Boolean,default:!0},isShowConfirmBtn:{type:Boolean,default:!0},isShowCancelBtn:{type:Boolean,default:!0},rotateAngle:{type:Number,default:90},source:{type:Object,default:function(){return{album:"从相册中选择",camera:"拍照"}}}},data:function(){return{canvasWidth:0,canvasHeight:0,clipX:0,clipY:0,clipWidth:0,clipHeight:0,animation:!1,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,scale:1,angle:0,image:"",imageInit:!1,sysinfo:{},throttleTimer:null,throttleFlag:!0,timeClipCenter:null,flagClipTouch:!1,flagEndTouch:!1,clipStart:{},animationTimer:null,touchRelative:[{x:0,y:0}],hypotenuseLength:0,ctx:null,canvasId:"lime-clipper"}},computed:{clipStyle:function(){var t=this.clipWidth,e=this.clipHeight,i=this.clipY,a=this.clipX,n=this.animation;return"\n\t\t\twidth: ".concat(t,"px;\n\t\t\theight:").concat(e,"px;\n\t\t\ttransition-property: ").concat(n?"":"background",";\n\t\t\tleft: ").concat(a,"px;\n\t\t\ttop: ").concat(i,"px\n\t\t\t")},imageStyle:function(){var t=this.imageWidth,e=this.imageHeight,i=this.imageLeft,a=this.imageTop,n=this.animation,o=this.scale,s=this.angle;return"\n\t\t\t\twidth: ".concat(t?t+"px":"auto",";\n\t\t\t\theight: ").concat(e?e+"px":"auto",";\n\t\t\t\ttransform: translate3d(").concat(i-t/2,"px, ").concat(a-e/2,"px, 0) scale(").concat(o,") rotate(").concat(s,"deg);\n\t\t\t\ttransition-duration: ").concat(n?.35:0,"s\n\t\t\t")},clipSize:function(){var t=this.clipWidth,e=this.clipHeight;return{clipWidth:t,clipHeight:e}},clipPoint:function(){var t=this.clipY,e=this.clipX;return{clipY:t,clipX:e}}},watch:{value:function(t){if(t){if(this.imageUrl){var e=(null===r||void 0===r?void 0:r[this.imageUrl])||{},i=e.imageWidth,a=e.imageHeight,n=e.imageLeft,o=e.imageTop,s=e.scale,c=e.clipX,l=e.clipY,d=e.clipWidth,u=e.clipHeight,h=e.path;h!=this.image?this.image=this.imageUrl:this.setDiffData({imageWidth:i,imageHeight:a,imageLeft:n,imageTop:o,scale:s,clipX:c,clipY:l,clipWidth:d,clipHeight:u})}}else this.animation=0,this.angle=0},imageUrl:function(t){this.image=t},image:{handler:function(){var t=(0,o.default)((0,n.default)().mark((function t(e){return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getImageInfo(e);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},clipSize:function(t){var e=t.widthVal,i=t.heightVal,a=this.minWidth,n=this.minHeight;a/=2,n/=2,e<a&&this.setDiffData({clipWidth:a}),i<n&&this.setDiffData({clipHeight:n}),this.calcClipSize()},angle:function(t){this.animation=this.imageInit,this.moveStop();var e=this.isLimitMove;e&&t%90&&this.setDiffData({angle:90*Math.round(t/90)}),this.imgMarginDetectionScale()},animation:function(t){var e=this;if(clearTimeout(this.animationTimer),t){var i=setTimeout((function(){e.setDiffData({animation:!1})}),260);this.setDiffData({animationTimer:i}),this.animationTimer=i}},isLimitMove:function(t){t&&(this.angle%90&&this.setDiffData({angle:90*Math.round(this.angle/90)}),this.imgMarginDetectionScale())},clipPoint:function(){this.cutDetectionPosition()},width:function(t,e){t!==e&&this.setDiffData({clipWidth:uni.upx2px(t)})},height:function(t,e){t!==e&&this.setDiffData({clipHeight:uni.upx2px(t)})}},mounted:function(){var t=uni.getSystemInfoSync();this.sysinfo=t,this.setClipInfo(),this.image=this.imageUrl||this.image,this.setClipCenter(),this.calcClipSize(),this.cutDetectionPosition()},methods:{setDiffData:function(t){var e=this;Object.keys(t).forEach((function(i){e[i]!==t[i]&&(e[i]=t[i])}))},getImageInfo:function(t){var e=this;t&&(this.value&&uni.showLoading({title:"请稍候...",mask:!0}),this.imageInit=!1,uni.getImageInfo({src:t,success:function(i){["right","left"].includes(i.orientation)?e.imgComputeSize(i.height,i.width):e.imgComputeSize(i.width,i.height),e.image=i.path,e.isLimitMove&&(e.imgMarginDetectionScale(),e.$emit("ready",i));var a=e.imageWidth,n=e.imageHeight,o=e.imageLeft,s=e.imageTop,c=e.scale,l=e.clipX,d=e.clipY,u=e.clipWidth,h=e.clipHeight;r[t]=Object.assign(i,{imageWidth:a,imageHeight:n,imageLeft:o,imageTop:s,scale:c,clipX:l,clipY:d,clipWidth:u,clipHeight:h})},fail:function(t){e.imgComputeSize(),e.isLimitMove&&e.imgMarginDetectionScale()}}))},setClipInfo:function(){var t=this.width,e=this.height,i=this.sysinfo,a=this.canvasId,n=t/2,o=e/2,s=(i.windowHeight-o)/2,r=(i.windowWidth-n)/2,c=i.windowWidth/2,l=i.windowHeight/2;this.ctx=uni.createCanvasContext(a,this),this.clipWidth=n,this.clipHeight=o,this.clipX=r,this.clipY=s,this.canvasHeight=o,this.canvasWidth=n,this.imageLeft=c,this.imageTop=l},setClipCenter:function(){var t=this.sysInfo,e=this.clipHeight,i=this.clipWidth,a=this.imageTop,n=this.imageLeft,o=t||uni.getSystemInfoSync(),s=.5*(o.windowHeight-e),r=.5*(o.windowWidth-i);this.imageTop=a-this.clipY+s,this.imageLeft=n-this.clipX+r,this.clipY=s,this.clipX=r},calcClipSize:function(){var t=this.clipHeight,e=this.clipWidth,i=this.sysinfo,a=this.clipX,n=this.clipY;e>i.windowWidth?this.setDiffData({clipWidth:i.windowWidth}):e+a>i.windowWidth&&this.setDiffData({clipX:i.windowWidth-a}),t>i.windowHeight?this.setDiffData({clipHeight:i.windowHeight}):t+n>i.windowHeight&&(this.clipY=i.windowHeight-n,this.setDiffData({clipY:i.windowHeight-n}))},cutDetectionPosition:function(){var t=this,e=this.clipX,i=this.clipY,a=this.sysinfo,n=this.clipHeight,o=this.clipWidth,s=function(){i<0&&t.setDiffData({clipY:0}),i>a.windowHeight-n&&t.setDiffData({clipY:a.windowHeight-n})},r=function(){e<0&&t.setDiffData({clipX:0}),e>a.windowWidth-o&&t.setDiffData({clipX:a.windowWidth-o})};if(null===i&&null===e){var c=.5*(a.windowHeight-n),l=.5*(a.windowWidth-o);this.setDiffData({clipX:l,clipY:c})}else null!==i&&null!==e?(s(),r()):null!==i&&null===e?(s(),this.setDiffData({clipX:(a.windowWidth-o)/2})):null===i&&null!==e&&(r(),this.setDiffData({clipY:(a.windowHeight-n)/2}))},imgComputeSize:function(t,e){var i=(0,s.calcImageSize)(t,e,this),a=i.imageWidth,n=i.imageHeight;this.imageWidth=a,this.imageHeight=n},imgMarginDetectionScale:function(t){if(this.isLimitMove){var e=(0,s.calcImageScale)(this,t);this.imgMarginDetectionPosition(e)}},imgMarginDetectionPosition:function(t){if(this.isLimitMove){var e=(0,s.calcImageOffset)(this,t),i=e.scale,a=e.left,n=e.top;this.setDiffData({imageLeft:a,imageTop:n,scale:i})}},throttle:function(){this.setDiffData({throttleFlag:!0})},moveDuring:function(){clearTimeout(this.timeClipCenter)},moveStop:function(){var t=this;clearTimeout(this.timeClipCenter);var e=setTimeout((function(){t.animation||t.setDiffData({imageInit:!0,animation:!0}),t.setClipCenter()}),800);this.setDiffData({timeClipCenter:e})},clipTouchStart:function(t){if(t.preventDefault(),this.image){var e=t.touches[0].clientX,i=t.touches[0].clientY,a=this.clipX,n=this.clipY,o=this.clipWidth,r=this.clipHeight,c=(0,s.determineDirection)(a,n,o,r,e,i);this.moveDuring(),c&&(this.clipStart={width:o,height:r,x:e,y:i,clipY:n,clipX:a,corner:c},this.flagClipTouch=!0,this.flagEndTouch=!0)}else uni.showToast({title:"请选择图片",icon:"none"})},clipTouchMove:function(t){if(t.stopPropagation(),t.preventDefault(),this.image){if(1===t.touches.length){var e=this.flagClipTouch,i=this.throttleFlag;if(e&&i){var a=this.isLockRatio,n=this.isLockHeight,o=this.isLockWidth;if(a&&(o||n))return;this.setDiffData({throttleFlag:!1}),this.throttle();var r=(0,s.clipTouchMoveOfCalculate)(this,t);if(r){var c=r.width,l=r.height,d=r.clipX,u=r.clipY;o||n?o?n||this.setDiffData({clipHeight:l,clipY:u}):this.setDiffData({clipWidth:c,clipX:d}):this.setDiffData({clipWidth:c,clipHeight:l,clipX:d,clipY:u}),this.imgMarginDetectionScale()}}}}else uni.showToast({title:"请选择图片",icon:"none"})},clipTouchEnd:function(){this.moveStop(),this.flagClipTouch=!1},imageTouchStart:function(t){event.preventDefault(),this.flagEndTouch=!1;var e=this.imageLeft,i=this.imageTop,a=t.touches[0].clientX,n=t.touches[0].clientY,o=[];if(1===t.touches.length)o[0]={x:a-e,y:n-i},this.touchRelative=o;else{var r=t.touches[1].clientX,c=t.touches[1].clientY,l=Math.abs(a-r),d=Math.abs(n-c),u=(0,s.calcPythagoreanTheorem)(l,d);o=[{x:a-e,y:n-i},{x:r-e,y:c-i}],this.touchRelative=o,this.hypotenuseLength=u}},imageTouchMove:function(t){event.preventDefault();var e=this.flagEndTouch,i=this.throttleFlag;if(!e&&i){var a=t.touches[0].clientX,n=t.touches[0].clientY;if(this.setDiffData({throttleFlag:!1}),this.throttle(),this.moveDuring(),1===t.touches.length){var o=(0,s.imageTouchMoveOfCalcOffset)(this,a,n),r=o.left,c=o.top;this.setDiffData({imageLeft:r,imageTop:c}),this.imgMarginDetectionPosition()}else{var l=t.touches[1].clientX,d=t.touches[1].clientY,u=Math.abs(a-l),h=Math.abs(n-d),f=(0,s.calcPythagoreanTheorem)(u,h),p=this.scale*(f/this.hypotenuseLength);this.isDisableScale?p=1:(p=p<=this.minRatio?this.minRatio:p,p=p>=this.maxRatio?this.maxRatio:p,this.$emit("change",{width:this.imageWidth*p,height:this.imageHeight*p})),this.imgMarginDetectionScale(p),this.hypotenuseLength=Math.sqrt(Math.pow(u,2)+Math.pow(h,2)),this.scale=p}}},imageTouchEnd:function(){this.setDiffData({flagEndTouch:!0}),this.moveStop()},uploadImage:function(){var t=this,e=Object.entries(this.source),i=["original","compressed"],a=function(e){var i=e.tempFilePaths,a=e.tempFiles;t.image=i?i[0]:a[0].path},n=function(t){"message"!==t&&uni.chooseImage({count:1,sizeType:i,sourceType:[t],success:a})};e.length>1?uni.showActionSheet({itemList:e.map((function(t){return t[1]})),success:function(t){var i=t.tapIndex;n(e[i][0])}}):n(e[0][0])},imageReset:function(){var t=this.sysinfo||uni.getSystemInfoSync();this.moveStop(),this.scale=1,this.angle=0,this.imageTop=t.windowHeight/2,this.imageLeft=t.windowWidth/2},imageLoad:function(t){this.imageReset(),uni.hideLoading(),this.$emit("ready",t.detail)},rotate:function(t){if(!this.isDisableRotate)if(this.image){var e=this.rotateAngle,i=this.angle,a=t.currentTarget.dataset.type;this.angle="along"===a?i+e:i-e,this.$emit("rotate",this.angle)}else uni.showToast({title:"请选择图片",icon:"none"})},confirm:function(){var t=this;if(this.image){uni.showLoading({title:"加载中"});var e=this.canvasHeight,i=this.canvasWidth,a=this.clipHeight,n=this.clipWidth,o=this.scale,s=this.ctx,r=this.imageLeft,c=this.imageTop,l=this.clipX,d=this.clipY,u=this.angle,h=this.scaleRatio,f=this.image,p=this.quality,g=this.fileType,v=(this.type,this.canvasId),m=function(){var e=t.imageWidth*o*h,i=t.imageHeight*o*h,m=r-l,b=c-d;s.translate(m*h,b*h),s.rotate(u*Math.PI/180),s.drawImage(f,-e/2,-i/2,e,i),s.draw(!1,(function(){var e=n*h,i=a*h,o={x:0,y:0,width:e,height:i,destWidth:t.destWidth||e,destHeight:t.destHeight||i,canvasId:v,fileType:g,quality:p,success:function(e){s.url=e.tempFilePath||e.filePath,uni.hideLoading(),t.$emit("success",s),t.$emit("input",!1)},fail:function(e){console.error("error",e),t.$emit("fail",e),t.$emit("input",!1)}},s={url:"",width:e,height:i};uni.canvasToTempFilePath(o,t)}))};i!==n||e!==a?(this.canvasWidth=n,this.canvasHeight=a,s.draw(),this.$nextTick((function(){setTimeout((function(){m()}),100)}))):m()}else uni.showToast({title:"请选择图片",icon:"none"})},cancel:function(){this.$emit("cancel",!1),this.$emit("input",!1)}}};e.default=c},"855a":function(t,e,i){"use strict";i.r(e);var a=i("cab8"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"858e":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={NONE:0,TEXT_TO_IMAGE:1,IMAGE_TO_TEXT:2,IMAGE_MIX_IMAGE:3,U_SCALE:4,V_EXPAND:5,REGENERATE:6,VARY_STRONG:7,VARY_SUBTLE:8,VARY_REGION:9,SQUARE:10,ZOOM2X:11,ZOOM1_5X:12,UPSCALE_2X:13,UPSCALE_4X:14,RE_UPSCALE_2X:15,RE_UPSCALE_4X:16,STRETCH:17,ZOOM_CUSTOM:18,REDO_UPSCALE_SUBTLE:19,REDO_UPSCALE_CREATIVE:20,IMAGE_TO_TEXT_ACTION:21,MODAL_ACTION:22,IMAGE_ACTION:4,INSIGHT_FACE:5}},"8c59":function(t,e,i){var a=i("7d62");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("e86c4c08",a,!0,{sourceMap:!1,shadowMode:!1})},"8f73":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.flex-auto[data-v-2c477d90]{flex:auto}.bg-transparent[data-v-2c477d90]{background-color:rgba(0,0,0,.9);transition-duration:.35s}.lime-clipper[data-v-2c477d90]{width:100vw;height:calc(100vh - var(--window-top));background-color:rgba(0,0,0,.9);position:fixed;top:var(--window-top);left:300vw;z-index:1}.lime-clipper.open[data-v-2c477d90]{left:0}.lime-clipper-mask[data-v-2c477d90]{position:relative;z-index:2;pointer-events:none}.lime-clipper__content[data-v-2c477d90]{pointer-events:none;position:absolute;border:%?1?% solid hsla(0,0%,100%,.3);box-sizing:border-box;box-shadow:rgba(0,0,0,.5) 0 0 0 80vh;background:transparent}.lime-clipper__content[data-v-2c477d90]::before, .lime-clipper__content[data-v-2c477d90]::after{content:"";position:absolute;border:%?1?% dashed hsla(0,0%,100%,.3)}.lime-clipper__content[data-v-2c477d90]::before{width:100%;top:33.33%;height:33.33%;border-left:none;border-right:none}.lime-clipper__content[data-v-2c477d90]::after{width:33.33%;left:33.33%;height:100%;border-top:none;border-bottom:none}.lime-clipper__edge[data-v-2c477d90]{position:absolute;width:%?34?%;height:%?34?%;border:%?6?% solid #fff;pointer-events:auto}.lime-clipper__edge[data-v-2c477d90]::before{content:"";position:absolute;width:%?40?%;height:%?40?%;background-color:initial}.lime-clipper__edge[data-v-2c477d90]:nth-child(1){left:%?-6?%;top:%?-6?%;border-bottom-width:0!important;border-right-width:0!important}.lime-clipper__edge[data-v-2c477d90]:nth-child(1):before{top:-50%;left:-50%}.lime-clipper__edge[data-v-2c477d90]:nth-child(2){right:%?-6?%;top:%?-6?%;border-bottom-width:0!important;border-left-width:0!important}.lime-clipper__edge[data-v-2c477d90]:nth-child(2):before{top:-50%;left:50%}.lime-clipper__edge[data-v-2c477d90]:nth-child(3){left:%?-6?%;bottom:%?-6?%;border-top-width:0!important;border-right-width:0!important}.lime-clipper__edge[data-v-2c477d90]:nth-child(3):before{bottom:-50%;left:-50%}.lime-clipper__edge[data-v-2c477d90]:nth-child(4){right:%?-6?%;bottom:%?-6?%;border-top-width:0!important;border-left-width:0!important}.lime-clipper__edge[data-v-2c477d90]:nth-child(4):before{bottom:-50%;left:50%}.lime-clipper-image[data-v-2c477d90]{width:100%;max-width:inherit;border-style:none;position:absolute;top:0;left:0;z-index:1;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform-origin:center;transform-origin:center}.lime-clipper-canvas[data-v-2c477d90]{position:fixed;z-index:10;left:-200vw;top:-200vw;pointer-events:none}.lime-clipper-tools[data-v-2c477d90]{position:absolute;left:0;bottom:10px;width:100%;z-index:99;color:#fff}.lime-clipper-tools__btns[data-v-2c477d90]{font-weight:700;display:flex;align-items:center;justify-content:space-between;width:100%;padding:%?20?% %?40?%;box-sizing:border-box}.lime-clipper-tools__btns .cancel[data-v-2c477d90]{width:%?112?%;height:%?60?%;text-align:center;line-height:%?60?%}.lime-clipper-tools__btns .confirm[data-v-2c477d90]{width:%?112?%;height:%?60?%;line-height:%?60?%;background:var(--lime-clipper-confirm-color,#07c160);border-radius:%?6?%;text-align:center}.lime-clipper-tools__btns uni-image[data-v-2c477d90]{display:block;width:%?60?%;height:%?60?%}',""]),t.exports=e},a6f2:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.toBase64=void 0,i("d3b7");e.toBase64=function(t){return new Promise((function(e,i){uni.request({url:t,responseType:"arraybuffer",success:function(t){e(uni.arrayBufferToBase64(t.data))}})}))}},bdd8:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.calcImageOffset=function(t,e){var i=t.imageLeft,a=t.imageTop;e=e||t.scale;var n=t.imageWidth,o=t.imageHeight;t.angle/90%2&&(n=t.imageHeight,o=t.imageWidth);var s=t.clipX,r=t.clipWidth,c=t.clipY,l=t.clipHeight,d=function(t){return t*e/2},u=d(n),h=d(o);return i=s+u>=i?i:s+u,i=s+r-u<=i?i:s+r-u,a=c+h>=a?a:c+h,a=c+l-h<=a?a:c+l-h,{left:i,top:a,scale:e}},e.calcImageScale=function(t,e){e=e||t.scale;var i=t.imageWidth,a=t.imageHeight,n=t.clipWidth,o=t.clipHeight,s=t.angle;if(s/90%2){var r=[a,i];i=r[0],a=r[1]}if(0!==s&&e==Math.max(n/a,o/i))return Math.max(n/i,o/a);i*e<n&&(e=n/i);a*e<o&&(e=Math.max(e,o/a));return e},e.calcImageSize=function(t,e,i){var a=t,n=e,o=i.clipWidth,s=i.clipHeight,r=i.sysinfo,c=i.width,l=i.height,d=o||c,u=s||l;if(a&&n)a/n>d/u?(n=s||l,a=t/e*n):(a=d,n=e/t*a);else{var h=r||uni.getSystemInfoSync();a=h.windowWidth,n=0}return{imageWidth:a,imageHeight:n}},e.calcPythagoreanTheorem=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},e.clipTouchMoveOfCalculate=function(t,e){var i=e.touches[0].clientX,a=e.touches[0].clientY,n=t.clipWidth,o=t.clipHeight,s=t.clipY,r=t.clipX,c=t.clipStart,l=t.isLockRatio,d=t.maxWidth,u=t.minWidth,h=t.maxHeight,f=t.minHeight;d=uni.upx2px(d),u=uni.upx2px(u),f=uni.upx2px(f),h=uni.upx2px(h);var p=n,g=o,v=s,m=r,b=function(){p=p<=d?p>=u?p:u:d,g=g<=h?g>=f?g:f:h},w=function(){return(p>d||p<u||g>h||g<f)&&l?(b(),!1):(b(),!0)};switch(g=c.height+(c.corner>1&&c.corner<4?1:-1)*(c.y-a),c.corner){case 1:if(p=c.width-c.x+i,l&&(g=p/(n/o)),!w())return;break;case 2:if(p=c.width-c.x+i,l&&(g=p/(n/o)),!w())return;v=c.clipY-(g-c.height);break;case 3:if(p=c.width+c.x-i,l&&(g=p/(n/o)),!w())return;v=c.clipY-(g-c.height),m=c.clipX-(p-c.width);break;case 4:if(p=c.width+c.x-i,l&&(g=p/(n/o)),!w())return;m=c.clipX-(p-c.width);break;default:break}return{width:p,height:g,clipX:m,clipY:v}},e.determineDirection=function(t,e,i,a,n,o){var s,r=[t+i/2,e+a/2],c=[n,o];c[0]<=r[0]&&c[1]<=r[1]?s=3:c[0]>=r[0]&&c[1]<=r[1]?s=2:c[0]<=r[0]&&c[1]>=r[1]?s=4:c[0]>=r[0]&&c[1]>=r[1]&&(s=1);return s},e.imageTouchMoveOfCalcOffset=function(t,e,i){return{left:e-t.touchRelative[0].x,top:i-t.touchRelative[0].y}}},cab8:function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("7154")),o={name:"u-line-progress",mixins:[uni.$u.mpMixin,uni.$u.mixin,n.default],data:function(){return{lineWidth:0}},watch:{percentage:function(t){this.resizeProgressWidth()}},computed:{progressStyle:function(){var t={};return t.width=this.lineWidth,t.backgroundColor=this.activeColor,t.height=uni.$u.addUnit(this.height),t},innserPercentage:function(){return uni.$u.range(0,100,this.percentage)}},mounted:function(){this.init()},methods:{init:function(){var t=this;uni.$u.sleep(20).then((function(){t.resizeProgressWidth()}))},getProgressWidth:function(){return this.$uGetRect(".u-line-progress__background")},resizeProgressWidth:function(){var t=this;this.getProgressWidth().then((function(e){var i=e.width;t.lineWidth=i*t.innserPercentage/100+"px"}))}}};e.default=o},cb29:function(t,e,i){"use strict";var a=i("23e7"),n=i("81d5"),o=i("44d2");a({target:"Array",proto:!0},{fill:n}),o("fill")},cdd6:function(t,e,i){"use strict";var a=i("fa21"),n=i.n(a);n.a},ce81:function(t,e,i){"use strict";i.r(e);var a=i("11b9"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},cf13d:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uIcon:i("36ec").default,uLineProgress:i("71cf").default,uniIcons:i("0c03").default,uPopup:i("b272").default,limeClipper:i("700f").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"createResult_box"},[t.maskIsShow?a("v-uni-view",{staticClass:"mask",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.maskIsShow=!1},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}},[t.maskIsShow?a("v-uni-image",{staticClass:"maskPic",attrs:{src:t.describeData.imageUrl,mode:"widthFix"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.none.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}}):t._e(),a("v-uni-view",{staticStyle:{position:"absolute","z-index":"999"}},[a("v-uni-view",{staticClass:"loader"})],1)],1):t._e(),a("v-uni-view",{staticClass:"tabbar"},[a("v-uni-view",[a("u-icon",{attrs:{name:"arrow-left",color:"#1E1F1F",size:"12px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.returnPage.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"createResult_main"},[a("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[1==t.type?a("v-uni-view",[a("v-uni-view",{staticClass:"image_card",style:{border:100==t.percent?"":"1px solid #E8E8E8"}},[""!=t.describeData.imageUrl?a("v-uni-image",{staticStyle:{"border-radius":"24rpx"},attrs:{src:t.describeData.imageUrl+"?imageView2/0/w/400/q/85&format=webp&quality=lossless",mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewPic.apply(void 0,arguments)}}}):t._e(),""==t.describeData.imageUrl?a("v-uni-image",{attrs:{src:i("1173"),mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewPic.apply(void 0,arguments)}}}):t._e(),100!=t.percent?a("v-uni-view",{staticClass:"line"},[a("u-line-progress",{attrs:{"show-percent":!0,percentage:t.percent,activeColor:"#10A37F","inactive-color":"#F0F0F0"}}),a("v-uni-view",{staticStyle:{color:"#10A37F","font-size":"24rpx","margin-top":"24rpx"}},[t._v("正在生成中,请稍后...")])],1):t._e()],1)],1):a("v-uni-view",{staticStyle:{"text-align":"center"}},[""!=t.describeData.imageUrl?a("v-uni-image",{ref:"redrawBgImgRef",staticClass:"redrawBgImg",staticStyle:{"border-radius":"24rpx"},attrs:{src:t.describeData.imageUrl+"?imageView2/0/w/400/q/85&format=webp&quality=lossless",mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewPic.apply(void 0,arguments)}}}):t._e(),""==t.describeData.imageUrl?a("v-uni-image",{attrs:{src:i("1173"),mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewPic.apply(void 0,arguments)}}}):t._e()],1),3!==t.action?a("v-uni-view",{staticClass:"text_card"},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"12rpx"}},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[a("v-uni-view",{staticStyle:{"background-color":"#1E1F1F",width:"8rpx",height:"16rpx","border-radius":"8rpx"}}),a("v-uni-view",{staticStyle:{"margin-left":"8rpx",color:"#1E1F1F","font-size":"24rpx"}},[t._v("画面描述")])],1),a("v-uni-view",{staticStyle:{color:"#10A37F","font-size":"24rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyClick(t.describeData.originPrompt)}}},[t._v("全部复制")])],1),2!==t.action?a("v-uni-view",{staticStyle:{"overflow-y":"auto",width:"100%",height:"300rpx","background-color":"#FFF",border:"1px solid #E8E8E8","border-radius":"12rpx",padding:"24rpx","font-size":"26rpx",color:"#8B8C8C"}},[t._v(t._s(t.describeData.fullPrompt))]):t._e(),2==t.action?a("v-uni-view",{},t._l(t.describeData.prompt,(function(e,i){return a("v-uni-view",{key:i,staticStyle:{color:"#ffffff","padding-top":"40rpx","line-height":"40rpx"}},[t._v(t._s(e))])})),1):t._e()],1):t._e(),a("v-uni-view",{staticStyle:{"padding-bottom":"60rpx"}})],1),a("v-uni-view",{staticClass:"bottom_tabber"},[a("v-uni-view",{staticClass:"left"},[t.isWechat?t._e():a("v-uni-view",{staticStyle:{"margin-right":"40rpx"}},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.downloadClick.apply(void 0,arguments)}}},[a("uni-icons",{attrs:{type:"download",color:"#1E1F1F",size:"20"}}),a("v-uni-view",[t._v("下载")])],1)],1),a("v-uni-view",[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delete_draw.apply(void 0,arguments)}}},[a("uni-icons",{attrs:{type:"trash",color:"#1E1F1F",size:"20"}}),a("v-uni-view",[t._v("删除")])],1)],1),a("v-uni-view",{staticStyle:{"margin-left":"40rpx"}},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleMore.apply(void 0,arguments)}}},[a("uni-icons",{attrs:{type:"more-filled",color:"#1E1F1F",size:"20"}}),a("v-uni-view",[t._v("更多")])],1)],1)],1),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticStyle:{"font-size":"28rpx",border:"2rpx solid #10A37F",color:"#10A37F","border-radius":"16rpx",padding:"6rpx 24rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.plusClick.apply(void 0,arguments)}}},[t._v("发布")]),a("v-uni-view",{staticStyle:{"font-size":"28rpx",background:"#10A37F",color:"#ffffff","margin-left":"20rpx","border-radius":"16rpx",padding:"6rpx 24rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comeBack.apply(void 0,arguments)}}},[t._v("再来一张")])],1)],1)],1),a("u-popup",{attrs:{show:t.isShow,mode:"bottom"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.isShow=!1}}},[a("v-uni-view",{staticClass:"moreBox"},[a("v-uni-view",{staticClass:"topTitle"},[a("v-uni-view",{staticClass:"topMoreLeft"}),a("v-uni-view",{staticClass:"moreTitle"},[t._v("更多操作")]),a("v-uni-view",{staticClass:"topMoreRight"},[a("u-icon",{attrs:{name:"close"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShow=!1}}})],1)],1),a("v-uni-view",{staticClass:"actionBox"},t._l(t.describeData.buttons,(function(e,i){return a("v-uni-view",{key:i,staticClass:"actionItem",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClick(e)}}},[t._v(t._s(e.label?e.label:e.emoji))])})),1),a("v-uni-view",{staticClass:"bottomTitle"},[a("v-uni-view",{staticClass:"left"},[t._v("时间："+t._s(t.describeData.createdAt))]),a("v-uni-view",{staticClass:"right"},[t._v("快速模式")])],1)],1)],1),a("u-popup",{attrs:{mode:"bottom",show:t.isShow1},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.isShow1=!1}}},[a("v-uni-view",{staticClass:"publishBox"},[a("v-uni-view",{staticClass:"selectIntro"},[t._v("发布到广场")]),a("v-uni-view",{staticClass:"squareType"},[t._v("请选择广场类型:")]),a("v-uni-view",{staticClass:"selectList"},t._l(t.selectList,(function(e){return a("v-uni-view",{key:e.id,staticClass:"selectItem",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.publish(e)}}},[t._v(t._s(e.name))])})),1)],1)],1),a("u-popup",{attrs:{mode:"center",show:t.regionRedrawShow}},[a("v-uni-view",{staticClass:"region_redraw"},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"20rpx"}},[a("v-uni-view",{staticStyle:{color:"#1E1F1F","font-size":"30rpx","font-weight":"bold"}},[t._v("局部重绘")]),a("uni-icons",{attrs:{type:"closeempty",color:"#1E1F1F"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.regionRedrawShow=!1}}})],1),a("lime-clipper",{attrs:{url:t.redrawImg+"?imageView2/0/w/400/q/85&format=webp&quality=lossless"},on:{tailorImgPath:function(e){arguments[0]=e=t.$handleEvent(e),t.tailorImg.apply(void 0,arguments)}}}),a("v-uni-view",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"20rpx"}},[a("v-uni-view",{staticStyle:{height:"70rpx",width:"75%","border-radius":"16rpx",border:"1px solid #E8E8E8",background:"#FFF","text-align":"left",padding:"0 12rpx"}},[a("v-uni-input",{staticStyle:{width:"100%",height:"100%","font-size":"22rpx"},attrs:{placeholder:"请输入画面描述"},model:{value:t.redrawPrompt,callback:function(e){t.redrawPrompt=e},expression:"redrawPrompt"}})],1),a("v-uni-button",{staticStyle:{"background-color":"#10A37F",color:"#FFF",border:"none","font-size":"24rpx",margin:"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.localityRedraw.apply(void 0,arguments)}}},[t._v("提交任务")])],1)],1)],1)],1)},o=[]},dfce:function(t,e,i){"use strict";i.r(e);var a=i("6343"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},f618:function(t,e,i){"use strict";i.r(e);var a=i("cf13d"),n=i("dfce");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("716a");var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"24f6b7d1",null,!1,a["a"],void 0);e["default"]=r.exports},fa21:function(t,e,i){var a=i("360f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("728fccf4",a,!0,{sourceMap:!1,shadowMode:!1})}}]);